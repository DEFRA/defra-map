"use strict";(self.webpackChunkdefraMap=self.webpackChunkdefraMap||[]).push([[9033],{99680:function(e,t,r){r.d(t,{q:function(){return s}});var i=r(85408);class s{constructor(e,t){this._storage=new i.F,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,r=1){this._storage.put(this,e,t,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},85408:function(e,t,r){r.d(t,{Cn:function(){return n},F:function(){return u},Mn:function(){return l},Ti:function(){return s},k2:function(){return o}});var i=r(7187);const s=-3,n=s-1;var o,a;(a=o||(o={}))[a.ALL=0]="ALL",a[a.SOME=1]="SOME";class l{constructor(e,t,r){this.name=e,this._storage=t,this.id=p+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(e){return this._storage.getSize(this,e)}resetHitRate(){this._hit=this._miss=0}put(e,t,r,i=0){this._storage.put(this,e,t,r,i)}pop(e){const t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}get(e){const t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}peek(e){return this._storage.peek(this,e)}updateSize(e,t,r){this._storage.updateSize(this,e,t,r)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class u{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.A,this._users=new i.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){const r=this._db.get(e.id+t);return r?.size??0}put(e,t,r,i,a){t=e.id+t;const l=this._db.get(t);if(l&&(this._size-=l.size,e.size-=l.size,this._db.delete(t),l.entry!==r&&this._notifyRemove(t,l.entry,l.size,o.ALL)),i>this._maxSize)return void this._notifyRemove(t,r,i,o.ALL);if(void 0===r)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return console.warn(`Refusing to cache entry with size ${i} for key ${t}`),void this._notifyRemove(t,r,0,o.ALL);const u=1+Math.max(a,n)-s;this._db.set(t,new c(r,i,u)),this._size+=i,e.size+=i,this._checkSize()}updateSize(e,t,r,i){t=e.id+t;const s=this._db.get(t);if(s&&s.entry===r){for(this._size-=s.size,e.size-=s.size;i>this._maxSize;){const e=this._notifyRemove(t,r,i,o.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);i=e}s.size=i,this._size+=i,e.size+=i,this._checkSize()}}pop(e,t){t=e.id+t;const r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(e,t){t=e.id+t;const r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}peek(e,t){const r=this._db.get(e.id+t);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach(((e,i)=>{const s=e.lifetime;r[s]=(r[s]||0)+e.size,this._users.forAll((r=>{const{id:s,name:n}=r;if(i.startsWith(s)){const r=t[n]||0;t[n]=r+e.size}}))}));const i={};this._users.forAll((e=>{const r=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){const s=t[r]||0;t[r]=s,i[r]=Math.round(100*e.hitRate)+"%"}else i[r]="0%"}));const n=Object.keys(t);n.sort(((e,r)=>t[r]-t[e])),n.forEach((r=>e[r]=Math.round(t[r]/2**20)+"MB / "+i[r]));for(let t=r.length-1;t>=0;--t){const i=r[t];i&&(e["Priority "+(t+s-1)]=Math.round(i/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){const t=e.id;this._db.forEach(((e,r)=>{r.startsWith(t)&&(this._size-=e.size,this._db.delete(r),this._notifyRemove(r,e.entry,e.size,o.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,e.size,o.ALL))),this._users.forAll((e=>e.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,r,i){let s;return this._removeFuncs.some((n=>{if(e.startsWith(n[0])){const e=n[1](t,i,r);return"number"==typeof e&&(s=e),!0}return!1})),s}_checkSize(){this._users.forAll((e=>this._checkSizeLimits(e))),this._checkSizeLimits()}_checkSizeLimits(e){const t=e??this;if(t.maxSize<0||t.size<=t.maxSize)return;const r=e?.id;let i=!0;for(;i;){i=!1;for(const[s,n]of this._db)if(0===n.lifetime&&(!r||s.startsWith(r))){if(this._purgeItem(s,n,e),t.size<=.9*t.maxSize)return;i||=this._db.has(s)}}for(const[i,s]of this._db)if((!r||i.startsWith(r))&&(this._purgeItem(i,s,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t,r=this._users.find((t=>e.startsWith(t.id)))){if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);const i=this._notifyRemove(e,t.entry,t.size,o.SOME);null!=i&&i>0&&(this._size+=i,r&&(r.size+=i),t.lives=t.lifetime,t.size=i,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}let p=0;class c{constructor(e,t,r){this.entry=e,this.size=t,this.lifetime=r,this.lives=r}}},77793:function(e,t,r){r.d(t,{P:function(){return b},L:function(){return w}});var i=r(53804),s=r(83525),n=r(90194),o=r(21609),a=r(72977);class l{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(a.AU),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const t=new l,r=this._originStores[a.Gr.DEFAULTS];r&&r.forEach(((e,r)=>{t.set(r,(0,o.o8)(e),a.Gr.DEFAULTS)}));for(let r=a.Gr.SERVICE;r<a.AU;r++){const i=this._originStores[r];i&&i.forEach(((i,s)=>{e&&e.has(s)||t.set(s,(0,o.o8)(i),r)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=a.Gr.USER){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}delete(e,t=a.Gr.USER){const r=this._originStores[t];if(!r)return;const i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],i=r?.get(e),s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),s!==i}originOf(e){return this._propertyOriginMap.get(e)||a.Gr.DEFAULTS}forEach(e){this._values.forEach(e)}}var u=r(97354),p=r(63693),c=r(65953);const d=e=>{let t=class extends e{constructor(...e){super(...e);const t=(0,p.oY)(this),r=t.store,i=new l;t.store=i,(0,n.k)(t,r,i)}read(e,t){(0,u.L)(this,e,t)}getAtOrigin(e,t){const r=y(this),i=(0,a.aB)(t);if("string"==typeof e)return r.get(e,i);const s={};return e.forEach((e=>{s[e]=r.get(e,i)})),s}originOf(e){return(0,a.OL)(this.originIdOf(e))}originIdOf(e){return y(this).originOf(e)}revert(e,t){const r=y(this),i=(0,a.aB)(t),s=(0,p.oY)(this);let n;n="string"==typeof e?"*"===e?r.keys(i):[e]:e,n.forEach((e=>{s.invalidate(e),r.revert(e,i),s.commit(e)}))}};return t=(0,i._)([(0,c.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function y(e){return(0,p.oY)(e).store}let h=class extends(d(s.A)){};h=(0,i._)([(0,c.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],h);var f=r(62664),m=r(99495);const g=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return v(this).delete(e,(0,a.aB)(t))}write(e,t){return(0,m.M)(this,e=e||{},t),e}setAtOrigin(e,t,r){(0,p.oY)(this).setAtOrigin(e,t,(0,a.aB)(r))}removeOrigin(e){const t=v(this),r=(0,a.aB)(e),i=t.keys(r);for(const e of i)t.originOf(e)===r&&t.set(e,t.get(e,r),a.Gr.USER)}updateOrigin(e,t){const r=v(this),i=(0,a.aB)(t),s=(0,f.Jt)(this,e);for(let t=i+1;t<a.AU;++t)r.delete(e,t);r.set(e,s,i)}toJSON(e){return this.write({},e)}};return t=(0,i._)([(0,c.$)("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function v(e){return(0,p.oY)(e).store}const b=e=>{let t=class extends(g(d(e))){constructor(...e){super(...e)}};return t=(0,i._)([(0,c.$)("esri.core.MultiOriginJSONSupport")],t),t};let w=class extends(b(s.A)){};w=(0,i._)([(0,c.$)("esri.core.MultiOriginJSONSupport")],w)},58009:function(e,t,r){r.d(t,{R:function(){return s}});var i=r(39819);let s=class e{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new i.A(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e(this.major,this.minor,this._context)}static parse(t,r=""){const[s,n]=t.split("."),o=/^\s*\d+\s*$/;if(!s?.match||!o.test(s))throw new i.A((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!n?.match||!o.test(n))throw new i.A((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const a=parseInt(s,10),l=parseInt(n,10);return new e(a,l,r)}}},72952:function(e,t,r){r.d(t,{EB:function(){return y},Im:function(){return m},Mj:function(){return d},Ui:function(){return f},w2:function(){return h}});var i=r(83525),s=r(78879),n=r(63693);const o=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function a(e){return e instanceof i.A}function l(e){return e instanceof s.A?Object.keys(e.items):a(e)?(0,n.oY)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof s.A?e.items[t]:e[t]}function p(e){return e?e.declaredClass:null}function c(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const i=l(e),s=l(t);if(0===i.length&&0===s.length)return;if(!i.length||!s.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const n=s.filter((e=>!i.includes(e))),d=i.filter((e=>!s.includes(e))),y=i.filter((r=>s.includes(r)&&u(e,r)!==u(t,r))).concat(n,d).sort(),h=p(e);if(h&&o.has(h)&&y.length)return{type:"complete",oldValue:e,newValue:t};let f;const m=a(e)&&a(t);for(const i of y){const s=u(e,i),n=u(t,i);let o;if((m||"function"!=typeof s&&"function"!=typeof n)&&s!==n&&(null!=s||null!=n)){if(r&&r[i]&&"function"==typeof r[i])o=r[i]?.(s,n);else if(s instanceof Date&&n instanceof Date){if(s.getTime()===n.getTime())continue;o={type:"complete",oldValue:s,newValue:n}}else o="object"==typeof s&&"object"==typeof n&&p(s)===p(n)?c(s,n):{type:"complete",oldValue:s,newValue:n};null!=o&&(null!=f?f.diff[i]=o:f={type:"partial",diff:{[i]:o}})}}return f}function d(e,t){return y(e,t)}function y(e,t){if(null==e)return!1;const r=t.split(".");let i=e;for(const e of r){if("complete"===i.type)return!0;if("partial"!==i.type)return!1;{const t=i.diff[e];if(!t)return!1;i=t}}return!0}function h(e,t){if(!e)return!1;if("partial"===e.type){const r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1}function f(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&p(e)!==p(t)?{type:"complete",oldValue:e,newValue:t}:c(e,t)}function m(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!m(e))return!1;for(const e of t.removed)if(!m(e))return!1;for(const e of t.changed)if(!m(e))return!1;return!0}case"partial":for(const t in e.diff)if(!m(e.diff[t]))return!1;return!0}}},64786:function(e,t,r){r.d(t,{K:function(){return i}});const i=["operational-layers","basemap","ground"]},17643:function(e,t,r){r.d(t,{v:function(){return s}});var i=r(73888);function s(e){e?.writtenProperties&&e.writtenProperties.forEach((({target:e,propName:t,newOrigin:r})=>{(0,i.H)(e)&&r&&e.originOf(t)!==r&&e.updateOrigin(t,r)}))}},75505:function(e,t,r){r.d(t,{$:function(){return m},IB:function(){return n},N2:function(){return g},QP:function(){return x},RH:function(){return b},Vl:function(){return I},Ws:function(){return w},ZD:function(){return v},_L:function(){return A},bJ:function(){return M},e$:function(){return T},f6:function(){return N},pW:function(){return S},pf:function(){return O}});var i=r(52874),s=(r(33400),r(41546));function n(e){return"r"in e&&"g"in e&&"b"in e}function o(e){return"h"in e&&"s"in e&&"v"in e}function a(e){return"l"in e&&"a"in e&&"b"in e}function l(e){return"l"in e&&"c"in e&&"h"in e}const u=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],p=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function c(e,t){const r=[];let i,s;if(e[0].length!==t.length)throw new Error("dimensions do not match");const n=e.length,o=e[0].length;let a=0;for(i=0;i<n;i++){for(a=0,s=0;s<o;s++)a+=e[i][s]*t[s];r.push(a)}return r}function d(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),r=c(u,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function y(e){const t=c(p,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function h(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function f(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function m(e){return n(e)?e:l(e)?function(e){return y(f(function(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}(e)))}(e):a(e)?function(e){return y(f(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?y(e):o(e)?function(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,s=i*r,n=s*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:s,g:n,b:0};break;case 1:o={r:n,g:s,b:0};break;case 2:o={r:0,g:s,b:n};break;case 3:o={r:0,g:n,b:s};break;case 4:o={r:n,g:0,b:s};break;case 5:case 6:o={r:s,g:0,b:n};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+i-s),o.g=Math.round(o.g+i-s),o.b=Math.round(o.b+i-s),o}(e):e}function g(e){return o(e)?e:function(e){const t=e.r,r=e.g,i=e.b,s=Math.max(t,r,i),n=s-Math.min(t,r,i);let o=s,a=0===n?0:s===t?(r-i)/n%6:s===r?(i-t)/n+2:(t-r)/n+4,l=0===n?0:n/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}(m(e))}function v(e){return a(e)?e:function(e){return h(d(e))}(m(e))}function b(e){return l(e)?e:function(e){return function(e){const t=e.l,r=e.a,i=e.b,s=Math.sqrt(r*r+i*i);let n=Math.atan2(i,r);return n=n>0?n:n+2*Math.PI,{l:t,c:s,h:n}}(h(d(e)))}(m(e))}function w(e,t){const{r:r,g:s,b:n}=t?.ignoreAlpha?e:function(e){let{r:t,g:r,b:s,a:n}=e;return n<1&&(t=Math.round(n*t+255*(1-n)),r=Math.round(n*r+255*(1-n)),s=Math.round(n*s+255*(1-n))),new i.A({r:t,g:r,b:s})}(e);return.2126*r+.7152*s+.0722*n}var S,_;function M(e,t=S.High){return w(e,{ignoreAlpha:!0})>t?new i.A([0,0,0,e.a]):new i.A([255,255,255,e.a])}function T(e,t){const r=v(e);r.l*=1-t;const i=m(r),s=e.clone();return s.setColor(i),s.a=e.a,s}function A(e,t){const r=e.clone();return r.a*=t,r}function I(e,t){const r=g(e);r.s*=t;const i=m(r),s=e.clone();return s.setColor(i),s.a=e.a,s}function x(e){return i.A.toUnitRGBA(e)}function O(e){return(0,s.fA)(e[0],e[1],e[2],e.length>3?e[3]:1)}function N(e,t){const r=i.A.toUnitRGBA(e);return r[3]*=t,r}(_=S||(S={}))[_.Low=160]="Low",_[_.High=225]="High"},73888:function(e,t,r){function i(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,{H:function(){return i}})},92955:function(e,t,r){r.d(t,{GB:function(){return s},Qo:function(){return o},Y4:function(){return n}});var i=r(3569);class s{}function n(e){return e instanceof i.bo?e===s.instance:"unknown"===e?.toString().toLowerCase()}function o(e){return n(e)?s.instance:e}s.instance=new i.oh("Etc/UTC")},65298:function(e,t,r){r.d(t,{O7:function(){return A},Hr:function(){return T},el:function(){return M},mT:function(){return I}});var i=r(25591),s=r(39819),n=r(40633),o=r(44740),a=r(91508),l=r(65417),u=r(57652),p=r(1644),c=(r(50917),r(93040)),d=r(74697),y=r(39397),h=r(90683),f=r(26765);const m=()=>n.A.getLogger("esri.geometry.support.normalizeUtils");function g(e){return"polygon"===e[0].type}function v(e){return"polyline"===e[0].type}function b(e){const t=[];let r=0,i=0;for(let s=0;s<e.length;s++){const n=e[s];let o=null;for(let e=0;e<n.length;e++)o=n[e],t.push(o),0===e?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&t.push([(r+i)/2,0])}return t}function w(e,t,r){if(t){const t=function(e,t){if(!(e instanceof a.A||e instanceof o.A)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw m().error(e),new s.A(e)}const r=(0,l.r8)(e),i=[];for(const e of r){const r=[];i.push(r),r.push([e[0][0],e[0][1]]);for(let i=0;i<e.length-1;i++){const s=e[i][0],n=e[i][1],o=e[i+1][0],a=e[i+1][1],l=Math.sqrt((o-s)*(o-s)+(a-n)*(a-n)),u=(a-n)/l,p=(o-s)/l,c=l/t;if(c>1){for(let e=1;e<=c-1;e++){const i=e*t,o=p*i+s,a=u*i+n;r.push([o,a])}const e=(l+Math.floor(c-1)*t)/2,i=p*e+s,o=u*e+n;r.push([i,o])}r.push([o,a])}}return function(e){return"polygon"===e.type}(e)?new o.A({rings:i,spatialReference:e.spatialReference}):new a.A({paths:i,spatialReference:e.spatialReference})}(e,1e6);e=(0,p.ci)(t,!0)}return r&&(e=(0,l.kS)(e,r)),e}function S(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const r=(0,l.kd)(i,t);e[0]=i+r*(-2*t)}else if(i<r){const t=(0,l.kd)(i,r);e[0]=i+t*(-2*r)}}else{const i=e.x;if(i>t){const r=(0,l.kd)(i,t);e=e.clone().offset(r*(-2*t),0)}else if(i<r){const t=(0,l.kd)(i,r);e=e.clone().offset(t*(-2*r),0)}}return e}function _(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const s=t.cutIndexes[i],n=t.geometries[i],o=(0,l.r8)(n);for(let e=0;e<o.length;e++){const t=o[e];t.some((r=>{if(r[0]<180)return!0;{let r=0;for(let e=0;e<t.length;e++){const i=t[e][0];r=i>r?i:r}r=Number(r.toFixed(9));const i=-360*(0,l.kd)(r,180);for(let r=0;r<t.length;r++){const t=n.getPoint(e,r);n.setPoint(e,r,t.clone().offset(i,0))}return!0}}))}if(s===r){if(g(e))for(const t of(0,l.r8)(n))e[s]=e[s].addRing(t);else if(v(e))for(const t of(0,l.r8)(n))e[s]=e[s].addPath(t)}else r=s,e[s]=n}return e}async function M(e,t,r){if(!Array.isArray(e))return M([e],t);t&&"string"!=typeof t&&m().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const s="string"==typeof t?t:t?.url??i.default.geometryServiceUrl;let n,g,v,b,T,A,I,x,O=0;const N=[],C=[];for(const t of e)if(null!=t)if(n||(n=t.spatialReference,g=(0,u.Vp)(n),v=n.isWebMercator,A=v?102100:4326,b=l.j7[A].maxX,T=l.j7[A].minX,I=l.j7[A].plus180Line,x=l.j7[A].minus180Line),g)if("mesh"===t.type)C.push(t);else if("point"===t.type)C.push(S(t.clone(),b,T));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>S(e,b,T))),C.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,g);C.push(e.rings?new o.A(e):e)}else if(t.extent){const e=t.extent,r=(0,l.kd)(e.xmin,T)*(2*b);let i=0===r?t.clone():(0,l.kS)(t.clone(),r);e.offset(r,0);let{xmin:s,xmax:n}=e;s=Number(s.toFixed(9)),n=Number(n.toFixed(9)),e.intersects(I)&&n!==b?(O=n>O?n:O,i=w(i,v),N.push(i),C.push("cut")):e.intersects(x)&&s!==T?(O=n*(2*b)>O?n*(2*b):O,i=w(i,v,360),N.push(i),C.push("cut")):C.push(i)}else C.push(t.clone());else C.push(t);else C.push(t);let Z=(0,l.kd)(O,b),V=-90;const j=Z,D=new a.A;for(;Z>0;){const e=360*Z-180;D.addPath([[e,V],[e,-1*V]]),V*=-1,Z--}if(N.length>0&&j>0){const t=_(N,await async function(e,t,r,i){const s=(0,y.Dl)(e),n=t[0].spatialReference,o={...i,responseType:"json",query:{...s.query,f:"json",sr:(0,u.YX)(n),target:JSON.stringify({geometryType:(0,d.$B)(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await(0,c.A)(s.path+"/cut",o),{cutIndexes:l,geometries:p=[]}=a.data;return{cutIndexes:l,geometries:p.map((e=>{const t=(0,d.rS)(e);return t.spatialReference=n,t}))}}(s,N,D,r)),i=[],n=[];for(let r=0;r<C.length;r++){const s=C[r];if("cut"!==s)n.push(s);else{const s=t.shift(),o=e[r];null!=o&&"polygon"===o.type&&o.rings&&o.rings.length>1&&s.rings.length>=o.rings.length?(i.push(s),n.push("simplify")):n.push(v?(0,p.Gh)(s):s)}}if(!i.length)return n;const o=await async function(e,t,r){const i="string"==typeof e?(0,h.An)(e):e,s=t[0].spatialReference,n=(0,d.$B)(t[0]),o={...r,query:{...i.query,f:"json",sr:(0,u.YX)(s),geometries:JSON.stringify((0,f.X)(t))}},{data:a}=await(0,c.A)(i.path+"/simplify",o);return(0,f.V)(a.geometries,n,s)}(s,i,r),a=[];for(let e=0;e<n.length;e++){const t=n[e];"simplify"!==t?a.push(t):a.push(v?(0,p.Gh)(o.shift()):o.shift())}return a}const F=[];for(let e=0;e<C.length;e++){const t=C[e];if("cut"!==t)F.push(t);else{const e=N.shift();F.push(!0===v?(0,p.Gh)(e):e)}}return F}function T(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&(0,u.Vp)(e.spatialReference);if(!r)return t;const[i,s]=r.valid,n=2*s,{width:o}=t;let a,{xmin:l,xmax:p}=t;if([l,p]=[p,l],"extent"===e.type||0===o||o<=s||o>n||l<i||p>s)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=b(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=b(e.paths);break;case"multipoint":a=e.points}const c=t.clone();for(let e=0;e<a.length;e++){let t=a[e][0];t<0?(t+=s,p=Math.max(t,p)):(t-=s,l=Math.min(t,l))}return c.xmin=l,c.xmax=p,c.width<o?(c.xmin-=s,c.xmax-=s,c):t}function A(e,t,r){const i=(0,u.Vp)(r);if(null==i)return e;const[s,n]=i.valid,o=2*n;let a=0,l=0;t>n?a=Math.ceil(Math.abs(t-n)/o):t<s&&(a=-Math.ceil(Math.abs(t-s)/o)),e>n?l=Math.ceil(Math.abs(e-n)/o):e<s&&(l=-Math.ceil(Math.abs(e-s)/o));let p=e+(a-l)*o;const c=p-t;return c>n?p-=o:c<s&&(p+=o),p}function I(e,t){const r=(0,u.Vp)(t);if(r){const[t,i]=r.valid,s=i-t;if(e<t)for(;e<t;)e+=s;if(e>i)for(;e>i;)e-=s}return e}},65417:function(e,t,r){r.d(t,{j7:function(){return o},kS:function(){return l},kd:function(){return a},r8:function(){return u}});var i=r(91508),s=r(57165),n=r(74697);const o={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new i.A({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:s.A.WebMercator}),minus180Line:new i.A({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:s.A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new i.A({paths:[[[180,-180],[180,180]]],spatialReference:s.A.WGS84}),minus180Line:new i.A({paths:[[[-180,-180],[-180,180]]],spatialReference:s.A.WGS84})}};function a(e,t){return Math.ceil((e-t)/(2*t))}function l(e,t){const r=u(e);for(const e of r)for(const r of e)r[0]+=t;return e}function u(e){return(0,n.Bi)(e)?e.rings:e.paths}},87280:function(e,t,r){function i(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function s(e){if(function(e){return"lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length}(e))return e;const{originPosition:t,scale:r,translate:i}=e,s=r[0]??1,n=r[1]??1;return{originPosition:"lowerLeft",scale:[s,"lowerLeft"===t?n:-n,r[2]??1,r[3]??1],translate:[i[0]??0,i[1]??0,i[2]??0,i[3]??0]}}function n({scale:e,translate:t},r){return r*e[0]+t[0]}function o({scale:e,translate:t},r){return r*e[1]+t[1]}function a({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function l({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function u(e,t){return e&&t?y:e&&!t?c:!e&&t?d:p}r.d(t,{$X:function(){return v},Gy:function(){return f},P5:function(){return b},SW:function(){return m},Tr:function(){return g},VV:function(){return i}}),r(74697);const p=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let s=n(e,i[0]),a=o(e,i[1]);r[0]=[s,a];const{scale:l,originPosition:u}=e,p=l[0],c="lowerLeft"===u?l[1]:-l[1];for(let e=1;e<t.length;e++){const[i,n]=t[e];s+=p*i,a+=c*n,r[e]=[s,a]}return r},c=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let s=n(e,i[0]),l=o(e,i[1]);r[0]=[s,l,a(e,i[2])];const{scale:u,originPosition:p}=e,c=u[0],d="lowerLeft"===p?u[1]:-u[1];for(let i=1;i<t.length;i++){const[n,o,u]=t[i];s+=c*n,l+=d*o,r[i]=[s,l,a(e,u)]}return r},d=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let s=n(e,i[0]),a=o(e,i[1]);r[0]=[s,a,l(e,i[2])];const{scale:u,originPosition:p}=e,c=u[0],d="lowerLeft"===p?u[1]:-u[1];for(let i=1;i<t.length;i++){const[n,o,u]=t[i];s+=c*n,a+=d*o,r[i]=[s,a,l(e,u)]}return r},y=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let s=n(e,i[0]),u=o(e,i[1]);r[0]=[s,u,a(e,i[2]),l(e,i[3])];const{scale:p,originPosition:c}=e,d=p[0],y="lowerLeft"===c?p[1]:-p[1];for(let i=1;i<t.length;i++){const[n,o,p,c]=t[i];s+=d*n,u+=y*o,r[i]=[s,u,a(e,p),l(e,c)]}return r};function h(e,t,r){const i=new Array(r.length);for(let s=0;s<r.length;s++)i[s]=t(e,r[s]);return i}function f(e,t,r){const i=s(e);return t.x=function({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}(i,r.x),t.y=function({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}(i,r.y),null!=r.z&&(t.z=function({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}(i,r.z)),null!=r.m&&(t.m=function({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}(i,r.m)),t}function m(e,t,r,i=r?.hasZ??!1,n=r?.hasM??!1){if(null!=r){const o=s(e);t.points=u(i,n)(o,r.points),t.hasZ=i,t.hasM=n}return t}function g(e,t,r,i=null!=r?.z,u=null!=r?.m){if(null==r)return t;const p=s(e);return t.x=n(p,r.x),t.y=o(p,r.y),i&&(t.z=a(p,r.z)),u&&(t.m=l(p,r.m)),t}function v(e,t,r,i=r?.hasZ??!1,n=r?.hasM??!1){if(null!=r){const o=s(e);t.rings=h(o,u(i,n),r.rings),t.hasZ=i,t.hasM=n}return t}function b(e,t,r,i=r?.hasZ??!1,n=r?.hasM??!1){if(null!=r){const o=s(e);t.paths=h(o,u(i,n),r.paths),t.hasZ=i,t.hasM=n}return t}},10842:function(e,t,r){r.r(t),r.d(t,{default:function(){return vt}});var i=r(53804),s=r(25591),n=r(50917),o=r(59469),a=r(90473),l=(r(74865),r(1526),r(96173),r(52308),r(60189),r(30047),r(27777),r(61065),r(6537)),u=r(40633),p=r(78879),c=r(39819),d=r(77793),y=r(34194),h=r(60539),f=r(28181),m=r(62938),g=r(90683),v=r(23502),b=(r(58941),r(13798),r(47332)),w=r(65953),S=r(81392),_=r(17643),M=r(91484),T=r(46157),A=r(57652),I=r(20833),x=r(1615),O=r(92078),N=r(61380),C=r(18195),Z=r(93389),V=r(10748),j=r(30905),D=r(90363);let F=class extends j.oY{constructor(e){super(e),this.break=new D.A({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),this.first=new D.A({color:[0,255,0],size:20,outline:{color:[255,255,255],width:4}}),this.unlocated=new D.A({color:[255,0,0],size:12,outline:{color:[255,255,255],width:3}}),this.last=new D.A({color:[255,0,0],size:20,outline:{color:[255,255,255],width:4}}),this.middle=new D.A({color:[51,51,51],size:12,outline:{color:[0,122,194],width:3}}),this.waypoint=new D.A({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}})}};(0,i._)([(0,v.MZ)({types:V.wC})],F.prototype,"break",void 0),(0,i._)([(0,v.MZ)({types:V.wC})],F.prototype,"first",void 0),(0,i._)([(0,v.MZ)({types:V.wC})],F.prototype,"unlocated",void 0),(0,i._)([(0,v.MZ)({types:V.wC})],F.prototype,"last",void 0),(0,i._)([(0,v.MZ)({types:V.wC})],F.prototype,"middle",void 0),(0,i._)([(0,v.MZ)({types:V.wC})],F.prototype,"waypoint",void 0),F=(0,i._)([(0,w.$)("esri.layers.support.RouteStopSymbols")],F);const E=F;var L=r(22198),k=r(8740);let z=class extends j.oY{constructor(e){super(e),this.directionLines=new L.A({color:[0,122,194],width:6}),this.directionPoints=new D.A({color:[255,255,255],size:6,outline:{color:[0,122,194],width:2}}),this.pointBarriers=new D.A({style:"x",size:10,outline:{color:[255,0,0],width:3}}),this.polygonBarriers=new k.A({color:[255,170,0,.6],outline:{width:7.5,color:[255,0,0,.6]}}),this.polylineBarriers=new L.A({width:7.5,color:[255,85,0,.7]}),this.routeInfo=new L.A({width:8,color:[20,89,127]}),this.stops=new E}};(0,i._)([(0,v.MZ)({types:V.Y7})],z.prototype,"directionLines",void 0),(0,i._)([(0,v.MZ)({types:V.wC})],z.prototype,"directionPoints",void 0),(0,i._)([(0,v.MZ)({types:V.wC})],z.prototype,"pointBarriers",void 0),(0,i._)([(0,v.MZ)({types:V.Ac})],z.prototype,"polygonBarriers",void 0),(0,i._)([(0,v.MZ)({types:V.Y7})],z.prototype,"polylineBarriers",void 0),(0,i._)([(0,v.MZ)({types:V.Y7})],z.prototype,"routeInfo",void 0),(0,i._)([(0,v.MZ)({type:E})],z.prototype,"stops",void 0),z=(0,i._)([(0,w.$)("esri.layers.support.RouteSymbols")],z);const R=z;var P=r(51432),B=r(43173),U=r(29606),q=r(93040),J=r(39397),G=r(74376),$=r(66062);let W=class extends j.oY{constructor(e){super(e),this.dataType=null,this.name=null,this.parameterNames=null,this.restrictionUsageParameterName=null,this.timeNeutralAttributeName=null,this.trafficSupport=null,this.units=null,this.usageType=null}};(0,i._)([(0,v.MZ)({type:String})],W.prototype,"dataType",void 0),(0,i._)([(0,G.e)($.et,{ignoreUnknown:!1})],W.prototype,"name",void 0),(0,i._)([(0,v.MZ)({type:[String]})],W.prototype,"parameterNames",void 0),(0,i._)([(0,v.MZ)({type:String})],W.prototype,"restrictionUsageParameterName",void 0),(0,i._)([(0,G.e)($.Mm,{ignoreUnknown:!1})],W.prototype,"timeNeutralAttributeName",void 0),(0,i._)([(0,v.MZ)({type:String})],W.prototype,"trafficSupport",void 0),(0,i._)([(0,G.e)($.dn)],W.prototype,"units",void 0),(0,i._)([(0,G.e)($.WU)],W.prototype,"usageType",void 0),W=(0,i._)([(0,w.$)("esri.rest.support.NetworkAttribute")],W);const H=W;let K=class extends j.oY{constructor(e){super(e),this.buildTime=null,this.name=null,this.networkAttributes=null,this.networkSources=null,this.state=null}};(0,i._)([(0,v.MZ)({type:Number})],K.prototype,"buildTime",void 0),(0,i._)([(0,v.MZ)({type:String})],K.prototype,"name",void 0),(0,i._)([(0,v.MZ)({type:[H]})],K.prototype,"networkAttributes",void 0),(0,i._)([(0,v.MZ)()],K.prototype,"networkSources",void 0),(0,i._)([(0,v.MZ)({type:String})],K.prototype,"state",void 0),K=(0,i._)([(0,w.$)("esri.rest.support.NetworkDataset")],K);const Y=K;var X=r(11501);let Q=class extends j.oY{constructor(e){super(e),this.accumulateAttributeNames=null,this.attributeParameterValues=null,this.currentVersion=null,this.defaultTravelMode=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsSupportedLanguages=null,this.directionsTimeAttribute=null,this.hasZ=null,this.impedance=null,this.networkDataset=null,this.supportedTravelModes=null}readAccumulateAttributes(e){return null==e?null:e.map((e=>$.et.fromJSON(e)))}writeAccumulateAttributes(e,t,r){e?.length&&(t[r]=e.map((e=>$.et.toJSON(e))))}get capabilities(){return{supportsNow:(this.currentVersion??10)>=10.81}}readDefaultTravelMode(e,t){const r=t.supportedTravelModes?.find((({id:e})=>e===t.defaultTravelMode))??t.supportedTravelModes?.find((({itemId:e})=>e===t.defaultTravelMode));return r?X.A.fromJSON(r):null}};(0,i._)([(0,v.MZ)()],Q.prototype,"accumulateAttributeNames",void 0),(0,i._)([(0,b.w)("accumulateAttributeNames")],Q.prototype,"readAccumulateAttributes",null),(0,i._)([(0,S.K)("accumulateAttributeNames")],Q.prototype,"writeAccumulateAttributes",null),(0,i._)([(0,v.MZ)()],Q.prototype,"attributeParameterValues",void 0),(0,i._)([(0,v.MZ)()],Q.prototype,"capabilities",null),(0,i._)([(0,v.MZ)()],Q.prototype,"currentVersion",void 0),(0,i._)([(0,v.MZ)()],Q.prototype,"defaultTravelMode",void 0),(0,i._)([(0,b.w)("defaultTravelMode",["defaultTravelMode","supportedTravelModes"])],Q.prototype,"readDefaultTravelMode",null),(0,i._)([(0,v.MZ)()],Q.prototype,"directionsLanguage",void 0),(0,i._)([(0,G.e)($.Z7)],Q.prototype,"directionsLengthUnits",void 0),(0,i._)([(0,v.MZ)()],Q.prototype,"directionsSupportedLanguages",void 0),(0,i._)([(0,G.e)($.Mm,{ignoreUnknown:!1})],Q.prototype,"directionsTimeAttribute",void 0),(0,i._)([(0,v.MZ)()],Q.prototype,"hasZ",void 0),(0,i._)([(0,G.e)($.et,{ignoreUnknown:!1})],Q.prototype,"impedance",void 0),(0,i._)([(0,v.MZ)({type:Y})],Q.prototype,"networkDataset",void 0),(0,i._)([(0,v.MZ)({type:[X.A]})],Q.prototype,"supportedTravelModes",void 0),Q=(0,i._)([(0,w.$)("esri.rest.support.NetworkServiceDescription")],Q);const ee=Q;function te(e,t,r,i){i[r]=[t.length,t.length+e.length],e.forEach((e=>{t.push(e.geometry)}))}async function re(e,t,r){if(!e)throw new c.A("network-service:missing-url","Url to Network service is missing");const i=(0,J.jV)({f:"json",token:t},r),{data:s}=await(0,q.A)(e,i),n=s.currentVersion>=10.4?async function(e,t,r){try{const i=(0,J.jV)({f:"json",token:t},r),s=(0,g.UC)(e)+"/retrieveTravelModes",{data:{supportedTravelModes:n,defaultTravelMode:o}}=await(0,q.A)(s,i);return{supportedTravelModes:n,defaultTravelMode:o}}catch(e){throw new c.A("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e})}}(e,t,r):async function(e,t){const r=(0,J.jV)({f:"json"},t),{data:i}=await(0,q.A)(e.replace(/\/rest\/.*$/i,"/info"),r);if(!i?.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};const{owningSystemUrl:s}=i,n=(0,g.UC)(s)+"/sharing/rest/portals/self",{data:o}=await(0,q.A)(n,r),a=(0,y.wc)("helperServices.routingUtilities.url",o);if(!a)return{supportedTravelModes:[],defaultTravelMode:null};const l=(0,J.Dl)(s),u=/\/solve$/i.test(l.path)?"Route":/\/solveclosestfacility$/i.test(l.path)?"ClosestFacility":"ServiceAreas",p=(0,J.jV)({f:"json",serviceName:u},t),c=(0,g.UC)(a)+"/GetTravelModes/execute",d=await(0,q.A)(c,p),h=[];let f=null;if(d?.data?.results?.length){const e=d.data.results;for(const t of e)if("supportedTravelModes"===t.paramName){if(t.value?.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);h.push(t)}}else"defaultTravelMode"===t.paramName&&(f=t.value)}return{supportedTravelModes:h,defaultTravelMode:f}}(e,r),{defaultTravelMode:o,supportedTravelModes:a}=await n;return s.defaultTravelMode=o,s.supportedTravelModes=a,ee.fromJSON(s)}var ie=r(62664),se=r(65298),ne=r(78703),oe=r(51084),ae=r(50659),le=r(73037);const ue=new le.J({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let pe=class extends j.oY{constructor(e){super(e),this.description=null,this.type=null}};(0,i._)([(0,v.MZ)({type:String,json:{write:!0}})],pe.prototype,"description",void 0),(0,i._)([(0,v.MZ)({type:String,json:{read:ue.read,write:ue.write}})],pe.prototype,"type",void 0),pe=(0,i._)([(0,w.$)("esri.rest.support.GPMessage")],pe);const ce=pe,de=new le.J({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});let ye=class extends ce{constructor(e){super(e),this.type=null}};(0,i._)([(0,v.MZ)({type:String,json:{read:de.read,write:de.write}})],ye.prototype,"type",void 0),ye=(0,i._)([(0,w.$)("esri.rest.support.NAMessage")],ye);const he=ye;let fe=class extends j.oY{constructor(e){super(e)}};(0,i._)([(0,v.MZ)({json:{read:{source:"string"}}})],fe.prototype,"text",void 0),(0,i._)([(0,G.e)($.Ec,{name:"stringType"})],fe.prototype,"type",void 0),fe=(0,i._)([(0,w.$)("esri.rest.support.DirectionsString")],fe);const me=fe;var ge=r(45532);let ve=class extends j.oY{constructor(e){super(e),this.arriveTime=null,this.arriveTimeOffset=null,this.geometry=null,this.strings=null}readArriveTimeOffset(e,t){return(0,ne.Zn)(t.ETA,t.arriveTimeUTC)}readGeometry(e,t){return ge.default.fromJSON(t.point)}};(0,i._)([(0,v.MZ)({type:Date,json:{read:{source:"arriveTimeUTC"}}})],ve.prototype,"arriveTime",void 0),(0,i._)([(0,v.MZ)()],ve.prototype,"arriveTimeOffset",void 0),(0,i._)([(0,b.w)("arriveTimeOffset",["arriveTimeUTC","ETA"])],ve.prototype,"readArriveTimeOffset",null),(0,i._)([(0,v.MZ)({type:ge.default})],ve.prototype,"geometry",void 0),(0,i._)([(0,b.w)("geometry",["point"])],ve.prototype,"readGeometry",null),(0,i._)([(0,v.MZ)({type:[me]})],ve.prototype,"strings",void 0),ve=(0,i._)([(0,w.$)("esri.rest.support.DirectionsEvent")],ve);const be=ve;var we=r(91508);let Se=class extends o.default{constructor(e){super(e),this.events=null,this.strings=null}readGeometry(e,t){const r=function(e){if(null==e||""===e)return null;let t=0,r=0,i=0,s=0;const n=[];let o,a,l,u,p,c,d,y,h=0,f=0,m=0;if(p=e.match(/((\+|-)[^+\-|]+|\|)/g),p||(p=[]),0===parseInt(p[h],32)){h=2;const e=parseInt(p[h],32);h++,c=parseInt(p[h],32),h++,1&e&&(f=p.indexOf("|")+1,d=parseInt(p[f],32),f++),2&e&&(m=p.indexOf("|",f)+1,y=parseInt(p[m],32),m++)}else c=parseInt(p[h],32),h++;for(;h<p.length&&"|"!==p[h];){o=parseInt(p[h],32)+t,h++,t=o,a=parseInt(p[h],32)+r,h++,r=a;const e=[o/c,a/c];f&&(u=parseInt(p[f],32)+i,f++,i=u,e.push(u/d)),m&&(l=parseInt(p[m],32)+s,m++,s=l,e.push(l/y)),n.push(e)}return{paths:[n],hasZ:f>0,hasM:m>0}}(t.compressedGeometry);return null!=r?we.A.fromJSON(r):null}};(0,i._)([(0,v.MZ)({type:[be]})],Se.prototype,"events",void 0),(0,i._)([(0,b.w)("geometry",["compressedGeometry"])],Se.prototype,"readGeometry",null),(0,i._)([(0,v.MZ)({type:[me]})],Se.prototype,"strings",void 0),Se=(0,i._)([(0,w.$)("esri.rest.support.DirectionsFeature")],Se);const _e=Se;var Me=r(57165);let Te=class extends oe.A{constructor(e){super(e),this.extent=null,this.features=[],this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,t){if(!e)return[];const r=t.summary.envelope.spatialReference??t.spatialReference,i=r&&Me.A.fromJSON(r);return e.map((e=>{const t=_e.fromJSON(e);if(null!=t.geometry&&(t.geometry.spatialReference=i),null!=t.events)for(const e of t.events)null!=e.geometry&&(e.geometry.spatialReference=i);return t}))}get mergedGeometry(){return this.features?function(e,t){if(0===e.length)return new we.A({spatialReference:t});const r=[];for(const t of e)for(const e of t.paths)r.push(...e);const i=[];r.forEach(((e,t)=>{0!==t&&e[0]===r[t-1][0]&&e[1]===r[t-1][1]||i.push(e)}));const{hasM:s,hasZ:n}=e[0];return new we.A({hasM:s,hasZ:n,paths:[i],spatialReference:t})}(this.features.map((({geometry:e})=>e)),this.extent.spatialReference):null}get strings(){return this.features.flatMap((({strings:e})=>e)).filter(ae.Ru)}};(0,i._)([(0,v.MZ)({type:M.default,json:{read:{source:"summary.envelope"}}})],Te.prototype,"extent",void 0),(0,i._)([(0,v.MZ)({nonNullable:!0})],Te.prototype,"features",void 0),(0,i._)([(0,b.w)("features")],Te.prototype,"readFeatures",null),(0,i._)([(0,v.MZ)()],Te.prototype,"geometryType",void 0),(0,i._)([(0,v.MZ)({readOnly:!0})],Te.prototype,"mergedGeometry",null),(0,i._)([(0,v.MZ)()],Te.prototype,"routeId",void 0),(0,i._)([(0,v.MZ)()],Te.prototype,"routeName",void 0),(0,i._)([(0,v.MZ)({value:null,readOnly:!0})],Te.prototype,"strings",null),(0,i._)([(0,v.MZ)({json:{read:{source:"summary.totalDriveTime"}}})],Te.prototype,"totalDriveTime",void 0),(0,i._)([(0,v.MZ)({json:{read:{source:"summary.totalLength"}}})],Te.prototype,"totalLength",void 0),(0,i._)([(0,v.MZ)({json:{read:{source:"summary.totalTime"}}})],Te.prototype,"totalTime",void 0),Te=(0,i._)([(0,w.$)("esri.rest.support.DirectionsFeatureSet")],Te);const Ae=Te;let Ie=class extends j.oY{constructor(e){super(e),this.directionLines=null,this.directionPoints=null,this.directions=null,this.route=null,this.routeName=null,this.stops=null,this.traversedEdges=null,this.traversedJunctions=null,this.traversedTurns=null}};(0,i._)([(0,v.MZ)({type:oe.A,json:{write:!0}})],Ie.prototype,"directionLines",void 0),(0,i._)([(0,v.MZ)({type:oe.A,json:{write:!0}})],Ie.prototype,"directionPoints",void 0),(0,i._)([(0,v.MZ)({type:Ae,json:{write:!0}})],Ie.prototype,"directions",void 0),(0,i._)([(0,v.MZ)({type:o.default,json:{write:!0}})],Ie.prototype,"route",void 0),(0,i._)([(0,v.MZ)({type:String,json:{write:!0}})],Ie.prototype,"routeName",void 0),(0,i._)([(0,v.MZ)({type:[o.default],json:{write:!0}})],Ie.prototype,"stops",void 0),(0,i._)([(0,v.MZ)({type:oe.A,json:{write:!0}})],Ie.prototype,"traversedEdges",void 0),(0,i._)([(0,v.MZ)({type:oe.A,json:{write:!0}})],Ie.prototype,"traversedJunctions",void 0),(0,i._)([(0,v.MZ)({type:oe.A,json:{write:!0}})],Ie.prototype,"traversedTurns",void 0),Ie=(0,i._)([(0,w.$)("esri.rest.support.RouteResult")],Ie);const xe=Ie;function Oe(e){return e?oe.A.fromJSON(e).features.filter(ae.Ru):[]}let Ne=class extends j.oY{constructor(e){super(e),this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(e,t){return Oe(t.barriers)}readPolylineBarriers(e){return Oe(e)}readPolygonBarriers(e){return Oe(e)}};(0,i._)([(0,v.MZ)({type:[he]})],Ne.prototype,"messages",void 0),(0,i._)([(0,v.MZ)({type:[o.default]})],Ne.prototype,"pointBarriers",void 0),(0,i._)([(0,b.w)("pointBarriers",["barriers"])],Ne.prototype,"readPointBarriers",null),(0,i._)([(0,v.MZ)({type:[o.default]})],Ne.prototype,"polylineBarriers",void 0),(0,i._)([(0,b.w)("polylineBarriers")],Ne.prototype,"readPolylineBarriers",null),(0,i._)([(0,v.MZ)({type:[o.default]})],Ne.prototype,"polygonBarriers",void 0),(0,i._)([(0,b.w)("polygonBarriers")],Ne.prototype,"readPolygonBarriers",null),(0,i._)([(0,v.MZ)({type:[xe]})],Ne.prototype,"routeResults",void 0),Ne=(0,i._)([(0,w.$)("esri.rest.support.RouteSolveResult")],Ne);const Ce=Ne;function Ze(e){return e instanceof oe.A}async function Ve(e,t,r){const i=[],s=[],n={},o={},a=(0,J.Dl)(e),{path:l}=a;Ze(t.stops)&&te(t.stops.features,s,"stops.features",n),Ze(t.pointBarriers)&&te(t.pointBarriers.features,s,"pointBarriers.features",n),Ze(t.polylineBarriers)&&te(t.polylineBarriers.features,s,"polylineBarriers.features",n),Ze(t.polygonBarriers)&&te(t.polygonBarriers.features,s,"polygonBarriers.features",n);const p=await(0,se.el)(s);for(const e in n){const t=n[e];i.push(e),o[e]=p.slice(t[0],t[1])}if(function(e,t){for(let r=0;r<t.length;r++){const i=e[t[r]];if(i&&i.length)for(const e of i)if(null!=e&&e.hasZ)return!0}return!1}(o,i)){let e=null;try{e=await re(l,t.apiKey,r)}catch{}e&&!e.hasZ&&function(e,t){for(let r=0;r<t.length;r++){const i=e[t[r]];if(i&&i.length)for(const e of i)e.z=void 0}u.A.getLogger("esri.rest.networkService").warnOnce("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}(o,i)}for(const e in o)o[e].forEach(((r,i)=>{(0,ie.Jt)(t,e)[i].geometry=r}));const c={...r,query:{...a.query,...(0,ne.r9)(t),f:"json"}},d=l.endsWith("/solve")?l:`${l}/solve`,{data:y}=await(0,q.A)(d,c);return function(e){const{barriers:t,directionLines:r,directionPoints:i,directions:s,messages:n,polygonBarriers:o,polylineBarriers:a,routes:l,stops:u,traversedEdges:p,traversedJunctions:c,traversedTurns:d}=e,y=e=>{const t=f.find((t=>t.routeName===e));if(null!=t)return t;const r={routeId:f.length+1,routeName:e};return f.push(r),r},h=e=>{const t=f.find((t=>t.routeId===e));if(null!=t)return t;const r={routeId:e,routeName:null};return f.push(r),r},f=[];l?.features.forEach(((e,t)=>{e.geometry.spatialReference=l.spatialReference??void 0;const r=e.attributes.Name,i=t+1;f.push({routeId:i,routeName:r,route:e})})),s?.forEach((e=>{const{routeName:t}=e;y(t).directions=e}));const m=u?.features.every((e=>null==e.attributes.RouteName))&&f.length>0?f[0].routeName:null;return u?.features.forEach((e=>{e.geometry&&(e.geometry.spatialReference??=u.spatialReference??void 0);const t=m??e.attributes.RouteName,r=y(t);r.stops??=[],r.stops.push(e)})),r?.features.forEach((e=>{const t=e.attributes.RouteID,i=h(t),{geometryType:s,spatialReference:n}=r;i.directionLines??={features:[],geometryType:s,spatialReference:n},i.directionLines.features.push(e)})),i?.features.forEach((e=>{const t=e.attributes.RouteID,r=h(t),{geometryType:s,spatialReference:n}=i;r.directionPoints??={features:[],geometryType:s,spatialReference:n},r.directionPoints.features.push(e)})),p?.features.forEach((e=>{const t=e.attributes.RouteID,r=h(t),{geometryType:i,spatialReference:s}=p;r.traversedEdges??={features:[],geometryType:i,spatialReference:s},r.traversedEdges.features.push(e)})),c?.features.forEach((e=>{const t=e.attributes.RouteID,r=h(t),{geometryType:i,spatialReference:s}=c;r.traversedJunctions??={features:[],geometryType:i,spatialReference:s},r.traversedJunctions.features.push(e)})),d?.features.forEach((e=>{const t=e.attributes.RouteID,r=h(t);r.traversedTurns??={features:[]},r.traversedTurns.features.push(e)})),Ce.fromJSON({routeResults:f,barriers:t,polygonBarriers:o,polylineBarriers:a,messages:n})}(y)}var je=r(24227),De=r(49359),Fe=r(93887),Ee=r(29335),Le=r(55339),ke=r(63253),ze=r(75743),Re=r(67888);const Pe={type:String,json:{read:{source:"token"},write:{target:"token"}}};var Be=r(74697);let Ue=class extends((0,ze.O)(j.oY)){constructor(e){super(e),this.doNotLocateOnRestrictedElements=null,this.geometry=null,this.geometryType=null,this.name=null,this.spatialRelationship=null,this.type="layer",this.where=null}};(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ue.prototype,"doNotLocateOnRestrictedElements",void 0),(0,i._)([(0,v.MZ)({types:n.yR,json:{read:Be.rS,write:!0}})],Ue.prototype,"geometry",void 0),(0,i._)([(0,G.e)($.Vj)],Ue.prototype,"geometryType",void 0),(0,i._)([(0,v.MZ)({type:String,json:{name:"layerName",write:!0}})],Ue.prototype,"name",void 0),(0,i._)([(0,G.e)($.vS,{name:"spatialRel"})],Ue.prototype,"spatialRelationship",void 0),(0,i._)([(0,v.MZ)({type:String,json:{write:!0}})],Ue.prototype,"type",void 0),(0,i._)([(0,v.MZ)({type:String,json:{write:!0}})],Ue.prototype,"where",void 0),Ue=(0,i._)([(0,w.$)("esri.rest.support.DataLayer")],Ue);const qe=Ue;var Je;let Ge=Je=class extends oe.A{constructor(e){super(e),this.doNotLocateOnRestrictedElements=null}clone(){return new Je({doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements,...this.cloneProperties()})}};(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ge.prototype,"doNotLocateOnRestrictedElements",void 0),Ge=Je=(0,i._)([(0,w.$)("esri.rest.support.NetworkFeatureSet")],Ge);const $e=Ge;let We=class extends((0,ze.O)(j.oY)){constructor(e){super(e),this.doNotLocateOnRestrictedElements=null,this.url=null}};(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],We.prototype,"doNotLocateOnRestrictedElements",void 0),(0,i._)([(0,v.MZ)({type:String,json:{write:!0}})],We.prototype,"url",void 0),We=(0,i._)([(0,w.$)("esri.rest.support.NetworkUrl")],We);const He=We;var Ke;let Ye=Ke=class extends((0,ze.O)(j.oY)){constructor(e){super(e),this.accumulateAttributes=null,this.apiKey=null,this.attributeParameterValues=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsOutputType=null,this.directionsStyleName=null,this.directionsTimeAttribute=null,this.findBestSequence=null,this.geometryPrecision=null,this.geometryPrecisionM=null,this.geometryPrecisionZ=null,this.ignoreInvalidLocations=null,this.impedanceAttribute=null,this.outputGeometryPrecision=null,this.outputGeometryPrecisionUnits=null,this.outputLines="true-shape",this.outSpatialReference=null,this.overrides=null,this.pointBarriers=null,this.polygonBarriers=null,this.polylineBarriers=null,this.preserveFirstStop=null,this.preserveLastStop=null,this.preserveObjectID=null,this.restrictionAttributes=null,this.restrictUTurns=null,this.returnBarriers=!1,this.returnDirections=!1,this.returnPolygonBarriers=!1,this.returnPolylineBarriers=!1,this.returnRoutes=!0,this.returnStops=!1,this.returnTraversedEdges=null,this.returnTraversedJunctions=null,this.returnTraversedTurns=null,this.returnZ=!0,this.startTime=null,this.startTimeIsUTC=!0,this.stops=null,this.timeWindowsAreUTC=null,this.travelMode=null,this.useHierarchy=null,this.useTimeWindows=null}static from(e){return(0,Re.PZ)(Ke,e)}readAccumulateAttributes(e){return null==e?null:e.map((e=>$.et.fromJSON(e)))}writeAccumulateAttributes(e,t,r){e?.length&&(t[r]=e.map((e=>$.et.toJSON(e))))}writePointBarriers(e,t,r){Qe(e,t,r)}writePolygonBarrier(e,t,r){Qe(e,t,r)}writePolylineBarrier(e,t,r){Qe(e,t,r)}readRestrictionAttributes(e){return null==e?null:e.map((e=>$.OC.fromJSON(e)))}writeRestrictionAttributes(e,t,r){e?.length&&(t[r]=e.map((e=>$.OC.toJSON(e))))}readStartTime(e,t){const{startTime:r}=t;return null==r?null:"now"===r?"now":new Date(r)}writeStartTime(e,t){null!=e&&(t.startTime="now"===e?"now":e.getTime())}readStops(e,t){return function(e){return function(e){return e&&"type"in e}(e)?qe.fromJSON(e):function(e){return e&&"url"in e}(e)?He.fromJSON(e):function(e){return e&&"features"in e&&"doNotLocateOnRestrictedElements"in e}(e)?$e.fromJSON(e):function(e){return e&&"features"in e}(e)?oe.A.fromJSON(e):null}(t.stops)}writeStops(e,t,r){Qe(e,t,r)}};(0,i._)([(0,v.MZ)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],Ye.prototype,"accumulateAttributes",void 0),(0,i._)([(0,b.w)("accumulateAttributes")],Ye.prototype,"readAccumulateAttributes",null),(0,i._)([(0,S.K)("accumulateAttributes")],Ye.prototype,"writeAccumulateAttributes",null),(0,i._)([(0,v.MZ)(Pe)],Ye.prototype,"apiKey",void 0),(0,i._)([(0,v.MZ)({json:{write:!0}})],Ye.prototype,"attributeParameterValues",void 0),(0,i._)([(0,v.MZ)({type:String,json:{write:!0}})],Ye.prototype,"directionsLanguage",void 0),(0,i._)([(0,G.e)($.Z7)],Ye.prototype,"directionsLengthUnits",void 0),(0,i._)([(0,G.e)($.aJ)],Ye.prototype,"directionsOutputType",void 0),(0,i._)([(0,G.e)($.$n)],Ye.prototype,"directionsStyleName",void 0),(0,i._)([(0,G.e)($.Mm,{name:"directionsTimeAttributeName",ignoreUnknown:!1})],Ye.prototype,"directionsTimeAttribute",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"findBestSequence",void 0),(0,i._)([(0,v.MZ)({type:Number,json:{write:!0}})],Ye.prototype,"geometryPrecision",void 0),(0,i._)([(0,v.MZ)({type:Number,json:{write:!0}})],Ye.prototype,"geometryPrecisionM",void 0),(0,i._)([(0,v.MZ)({type:Number,json:{write:!0}})],Ye.prototype,"geometryPrecisionZ",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"ignoreInvalidLocations",void 0),(0,i._)([(0,G.e)($.et,{name:"impedanceAttributeName",ignoreUnknown:!1})],Ye.prototype,"impedanceAttribute",void 0),(0,i._)([(0,v.MZ)({type:Number,json:{write:!0}})],Ye.prototype,"outputGeometryPrecision",void 0),(0,i._)([(0,G.e)($.hY)],Ye.prototype,"outputGeometryPrecisionUnits",void 0),(0,i._)([(0,G.e)($.Sr)],Ye.prototype,"outputLines",void 0),(0,i._)([(0,v.MZ)({type:Me.A,json:{name:"outSR",write:!0}})],Ye.prototype,"outSpatialReference",void 0),(0,i._)([(0,v.MZ)({json:{write:!0}})],Ye.prototype,"overrides",void 0),(0,i._)([(0,v.MZ)({json:{name:"barriers",write:!0}})],Ye.prototype,"pointBarriers",void 0),(0,i._)([(0,S.K)("pointBarriers")],Ye.prototype,"writePointBarriers",null),(0,i._)([(0,v.MZ)({json:{write:!0}})],Ye.prototype,"polygonBarriers",void 0),(0,i._)([(0,S.K)("polygonBarriers")],Ye.prototype,"writePolygonBarrier",null),(0,i._)([(0,v.MZ)({json:{write:!0}})],Ye.prototype,"polylineBarriers",void 0),(0,i._)([(0,S.K)("polylineBarriers")],Ye.prototype,"writePolylineBarrier",null),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"preserveFirstStop",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"preserveLastStop",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"preserveObjectID",void 0),(0,i._)([(0,v.MZ)({type:[String],json:{name:"restrictionAttributeNames",write:!0}})],Ye.prototype,"restrictionAttributes",void 0),(0,i._)([(0,b.w)("restrictionAttributes")],Ye.prototype,"readRestrictionAttributes",null),(0,i._)([(0,S.K)("restrictionAttributes")],Ye.prototype,"writeRestrictionAttributes",null),(0,i._)([(0,G.e)($.hE)],Ye.prototype,"restrictUTurns",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"returnBarriers",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"returnDirections",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"returnPolygonBarriers",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"returnPolylineBarriers",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"returnRoutes",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"returnStops",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"returnTraversedEdges",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"returnTraversedJunctions",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"returnTraversedTurns",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"returnZ",void 0),(0,i._)([(0,v.MZ)({json:{write:!0}})],Ye.prototype,"startTime",void 0),(0,i._)([(0,b.w)("startTime")],Ye.prototype,"readStartTime",null),(0,i._)([(0,S.K)("startTime")],Ye.prototype,"writeStartTime",null),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"startTimeIsUTC",void 0),(0,i._)([(0,v.MZ)({json:{write:!0}})],Ye.prototype,"stops",void 0),(0,i._)([(0,b.w)("stops")],Ye.prototype,"readStops",null),(0,i._)([(0,S.K)("stops")],Ye.prototype,"writeStops",null),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"timeWindowsAreUTC",void 0),(0,i._)([(0,v.MZ)({type:X.A,json:{write:!0}})],Ye.prototype,"travelMode",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"useHierarchy",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ye.prototype,"useTimeWindows",void 0),Ye=Ke=(0,i._)([(0,w.$)("esri.rest.support.RouteParameters")],Ye);const Xe=Ye;function Qe(e,t,r){null!=e&&(t[r]=p.A.isCollection(e)?{features:e.toArray().map((e=>e.toJSON()))}:e.toJSON())}var et=r(28940),tt=r(34258),rt=r(71673);function it(e){return e.length?e:null}function st(e){switch(e){case"esriGeometryPoint":return{type:"esriSMS",style:"esriSMSCircle",size:12,color:[0,0,0,0],outline:st("esriGeometryPolyline")};case"esriGeometryPolyline":return{type:"esriSLS",style:"esriSLSSolid",width:1,color:[0,0,0,0]};case"esriGeometryPolygon":return{type:"esriSFS",style:"esriSFSNull",outline:st("esriGeometryPolyline")}}}function nt(e){return"layers"in e}async function ot(e){const t=Me.A.WGS84;return await(0,T.initializeProjection)(e.spatialReference,t),(0,T.project)(e,t)}function at(e,t){switch(t){case"seconds":return e/60;case"hours":return 60*e;case"days":return 60*e*24;default:return e}}function lt(e,t){return"decimal-degrees"===t||"points"===t||"unknown"===t?e:(0,m.oU)(e,t,"meters")}const ut=p.A.ofType(je.A),pt=p.A.ofType(De.A),ct=p.A.ofType(Fe.A),dt=p.A.ofType(Ee.A),yt=p.A.ofType(Le.A),ht=p.A.ofType(tt.A),ft="esri.layers.RouteLayer",mt=()=>u.A.getLogger(ft);let gt=class extends((0,x.dM)((0,C.j)((0,O.q)((0,N.A)((0,d.P)(I.A)))))){constructor(e){super(e),this._cachedServiceDescription=null,this._featureCollection=null,this._type="Feature Collection",this.defaultSymbols=new R,this.directionLines=null,this.directionPoints=null,this.featureCollectionType="route",this.legendEnabled=!1,this.maxScale=0,this.minScale=0,this.pointBarriers=new ct,this.polygonBarriers=new dt,this.polylineBarriers=new yt,this.routeInfo=null,this.spatialReference=Me.A.WGS84,this.stops=new ht,this.type="route";const t=()=>{this._setStopSymbol(this.stops)};this.addHandles((0,f.on)((()=>this.stops),"change",t,{sync:!0,onListenerAdd:t}))}writeFeatureCollectionWebmap(e,t,r,i){const s=[this._writePolygonBarriers(),this._writePolylineBarriers(),this._writePointBarriers(),this._writeRouteInfo(),this._writeDirectionLines(),this._writeDirectionPoints(),this._writeStops()].filter((e=>!!e)),n=s.map(((e,t)=>t)),o="web-map"===i.origin?"featureCollection.layers":"layers";(0,y.sM)(o,s,t),t.opacity=this.opacity,t.visibility=this.visible,t.visibleLayers=n}readDirectionLines(e,t){return this._getNetworkFeatures(t,"DirectionLines",(e=>je.A.fromGraphic(e)))}readDirectionPoints(e,t){return this._getNetworkFeatures(t,"DirectionPoints",(e=>De.A.fromGraphic(e)))}get fullExtent(){const e=new M.default({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:Me.A.WGS84});if(null!=this.routeInfo?.geometry)return this.routeInfo.geometry.extent??e;if(null==this.stops)return e;const t=this.stops.filter((e=>null!=e.geometry));if(t.length<2)return e;const{spatialReference:r}=t.at(0).geometry;if(null==r)return e;const i=t.toArray().map((e=>{const t=e.geometry;return[t.x,t.y]}));return new rt.A({points:i,spatialReference:r}).extent}readMaxScale(e,t){const r=nt(t)?t.layers:t.featureCollection?.layers,i=r?.find((e=>null!=e.layerDefinition.maxScale));return i?.layerDefinition.maxScale??0}readMinScale(e,t){const r=nt(t)?t.layers:t.featureCollection?.layers,i=r?.find((e=>null!=e.layerDefinition.minScale));return i?.layerDefinition.minScale??0}readPointBarriers(e,t){return this._getNetworkFeatures(t,"Barriers",(e=>Fe.A.fromGraphic(e)))}readPolygonBarriers(e,t){return this._getNetworkFeatures(t,"PolygonBarriers",(e=>Ee.A.fromGraphic(e)))}readPolylineBarriers(e,t){return this._getNetworkFeatures(t,"PolylineBarriers",(e=>Le.A.fromGraphic(e)))}readRouteInfo(e,t){return this._getNetworkFeatures(t,"RouteInfo",(e=>ke.A.fromGraphic(e))).at(0)??null}readSpatialReference(e,t){const r=nt(t)?t.layers:t.featureCollection?.layers;if(!r?.length)return Me.A.WGS84;const{layerDefinition:i,featureSet:s}=r[0],n=s.features[0],o=n?.geometry?.spatialReference??s.spatialReference??i.spatialReference??i.extent.spatialReference??A.KK;return Me.A.fromJSON(o)}readStops(e,t){return this._getNetworkFeatures(t,"Stops",(e=>tt.A.fromGraphic(e)),(e=>this._setStopSymbol(e)))}get title(){return this.routeInfo?.name??"Route"}set title(e){this._overrideIfSome("title",e)}get url(){return s.default.routeServiceUrl}set url(e){null!=e?this._set("url",(0,Z.Jf)(e,mt())):this._set("url",s.default.routeServiceUrl)}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}removeAll(){this.removeResult(),this.pointBarriers.removeAll(),this.polygonBarriers.removeAll(),this.polylineBarriers.removeAll(),this.stops.removeAll()}removeResult(){null!=this.directionLines&&(this.directionLines.removeAll(),this._set("directionLines",null)),null!=this.directionPoints&&(this.directionPoints.removeAll(),this._set("directionPoints",null)),null!=this.routeInfo&&this._set("routeInfo",null)}async save(){await this.load();const{fullExtent:e,portalItem:t}=this;if(!t)throw new c.A("routelayer:portal-item-not-set","save() requires to the layer to have a portal item");if(!t.id)throw new c.A("routelayer:portal-item-not-saved","Please use saveAs() first to save the routelayer");if("Feature Collection"!==t.type)throw new c.A("routelayer:portal-item-wrong-type",'Portal item needs to have type "Feature Collection"');if(null==this.routeInfo)throw new c.A("routelayer:route-unsolved","save() requires a solved route");const{portal:r}=t;await r.signIn(),r.user||await t.reload();const{itemUrl:i,itemControl:s}=t;if("admin"!==s&&"update"!==s)throw new c.A("routelayer:insufficient-permissions","To save this layer, you need to be the owner or an administrator of your organization");const n={messages:[],origin:"portal-item",portal:r,url:i?(0,g.An)(i):void 0,writtenProperties:[]},o=this.write(void 0,n);return t.extent=await ot(e),t.title=this.title,await t.update({data:o}),t}async saveAs(e,t={}){if(await this.load(),null==this.routeInfo)throw new c.A("routelayer:route-unsolved","saveAs() requires a solved route");const r=B.default.from(e).clone();r.extent??=await ot(this.fullExtent),r.id=null,r.portal??=P.A.getDefault(),r.title??=this.title,r.type="Feature Collection",r.typeKeywords=["Data","Feature Collection",U.mm.MULTI_LAYER,"Route Layer"];const{portal:i}=r,s={messages:[],origin:"portal-item",portal:i,url:null,writtenProperties:[]};await i.signIn();const n=t?.folder,o=this.write(void 0,s);return await(i.user?.addItem({item:r,folder:n,data:o})),this.portalItem=r,(0,_.v)(s),s.portalItem=r,r}async solve(e,t){const r=e?.stops??this.stops,i=e?.pointBarriers??it(this.pointBarriers),s=e?.polylineBarriers??it(this.polylineBarriers),n=e?.polygonBarriers??it(this.polygonBarriers);if(null==r)throw new c.A("routelayer:undefined-stops","the route layer must have stops defined in the route parameters.");if((function(e){return"esri.rest.support.FeatureSet"===e.declaredClass}(r)||function(e){return"esri.rest.support.NetworkFeatureSet"===e.declaredClass}(r))&&r.features.length<2||p.A.isCollection(r)&&r.length<2)throw new c.A("routelayer:insufficent-stops","the route layer must have two or more stops to solve a route.");if(p.A.isCollection(r))for(const e of r)e.routeName=null;const o=e?.apiKey,a=this.url,l=await this._getServiceDescription(a,o,t),u=e?.travelMode??l.defaultTravelMode,d=e?.accumulateAttributes??[];null!=u&&(d.push(u.distanceAttributeName),u.timeAttributeName&&d.push(u.timeAttributeName));const y={accumulateAttributes:d,directionsOutputType:"featuresets",ignoreInvalidLocations:!0,pointBarriers:i,polylineBarriers:s,polygonBarriers:n,preserveFirstStop:!0,preserveLastStop:!0,returnBarriers:!!i,returnDirections:!0,returnPolygonBarriers:!!n,returnPolylineBarriers:!!s,returnRoutes:!0,returnStops:!0,stops:r},f=Xe.from(e??{});let m;f.set(y);try{m=await Ve(a,f,t)}catch(e){throw(0,h.zf)(e)?e:new c.A("routelayer:failed-route-request","the routing request failed",{error:e})}const g=this._toRouteLayerSolution(m);return this._isOverridden("title")||(this.title=g.routeInfo.name??"Route"),function(e,t,r){const i=t.networkDataset?.networkAttributes,s=i?.filter((({usageType:e})=>"cost"===e))??[],n=r.travelMode??t.defaultTravelMode;if(null==n)return void mt().warn("route-layer:missing-travel-mode","The routing service must have a default travel mode or one must be specified in the route parameter.");const{timeAttributeName:o,distanceAttributeName:a}=n,l=s.find((({name:e})=>e===o)),u=s.find((({name:e})=>e===a)),p=r.travelMode?.impedanceAttributeName??r.impedanceAttribute??t.impedance,d=l?.units,y=u?.units;if(!d||!y)throw new c.A("routelayer:unknown-impedance-units","the units of either the distance or time impedance are unknown");const h=r.directionsLanguage??t.directionsLanguage,f=r.accumulateAttributes??t.accumulateAttributeNames??[],m=new Set(s.filter((({name:e})=>e===o||e===a||e===p||null!=e&&f.includes(e))).map((({name:e})=>e))),g=e=>{for(const t in e)m.has(t)||delete e[t]};for(const t of e.pointBarriers)null!=t.costs&&(t.addedCost=t.costs[p]??0,g(t.costs));for(const t of e.polygonBarriers)null!=t.costs&&(t.scaleFactor=t.costs[p]??1,g(t.costs));for(const t of e.polylineBarriers)null!=t.costs&&(t.scaleFactor=t.costs[p]??1,g(t.costs));const{routeInfo:v}=e,{findBestSequence:b,preserveFirstStop:w,preserveLastStop:S,startTimeIsUTC:_,timeWindowsAreUTC:M}=r;v.analysisSettings=new et.A({accumulateAttributes:f,directionsLanguage:h,findBestSequence:b,preserveFirstStop:w,preserveLastStop:S,startTimeIsUTC:_,timeWindowsAreUTC:M,travelMode:n}),v.totalDuration=at(v.totalCosts?.[o]??0,d),v.totalDistance=lt(v.totalCosts?.[a]??0,y),v.totalLateDuration=at(v.totalViolations?.[o]??0,d),v.totalWaitDuration=at(v.totalWait?.[o]??0,d),null!=v.totalCosts&&g(v.totalCosts),null!=v.totalViolations&&g(v.totalViolations),null!=v.totalWait&&g(v.totalWait);for(const t of e.stops)null!=t.serviceCosts&&(t.serviceDuration=at(t.serviceCosts[o]??0,d),t.serviceDistance=lt(t.serviceCosts[a]??0,y),g(t.serviceCosts)),null!=t.cumulativeCosts&&(t.cumulativeDuration=at(t.cumulativeCosts[o]??0,d),t.cumulativeDistance=lt(t.cumulativeCosts[a]??0,y),g(t.cumulativeCosts)),null!=t.violations&&(t.lateDuration=at(t.violations[o]??0,d),g(t.violations)),null!=t.wait&&(t.waitDuration=at(t.wait[o]??0,d),g(t.wait))}(g,l,f),g}update(e){const{stops:t,directionLines:r,directionPoints:i,pointBarriers:s,polylineBarriers:n,polygonBarriers:o,routeInfo:a}=e;this.set({stops:t,pointBarriers:s,polylineBarriers:n,polygonBarriers:o}),this._set("directionLines",r),this._set("directionPoints",i),this._set("routeInfo",a),null!=a.geometry&&(this.spatialReference=a.geometry.spatialReference)}_getNetworkFeatures(e,t,r,i){const s=nt(e)?e.layers:e.featureCollection?.layers,n=s?.find((e=>e.layerDefinition.name===t));if(null==n)return new p.A;const{layerDefinition:u,popupInfo:c,featureSet:d}=n,y=u.drawingInfo.renderer,{features:h}=d,f=d.spatialReference??u.spatialReference??u.extent.spatialReference??A.KK,m=y&&(0,l.L)(y),g=Me.A.fromJSON(f),v=h.map((e=>{const i=o.default.fromJSON(e);null!=i.geometry&&null!=e.geometry&&null==e.geometry.spatialReference&&(i.geometry.spatialReference=g);const s=r(i);return s.symbol??=m?.getSymbol(i)??this._getNetworkSymbol(t),s.popupTemplate??=c&&a.A.fromJSON(c),s}));return i&&v.some((({symbol:e})=>!e))&&i(v),new p.A(v)}_getNetworkSymbol(e){switch(e){case"Barriers":return this.defaultSymbols.pointBarriers;case"DirectionPoints":return this.defaultSymbols.directionPoints;case"DirectionLines":return this.defaultSymbols.directionLines;case"PolylineBarriers":return this.defaultSymbols.polylineBarriers;case"PolygonBarriers":return this.defaultSymbols.polygonBarriers;case"RouteInfo":return this.defaultSymbols.routeInfo;case"Stops":return null}}async _getServiceDescription(e,t,r){if(null!=this._cachedServiceDescription&&this._cachedServiceDescription.url===e)return this._cachedServiceDescription.serviceDescription;const i=await re(e,t,r);return this._cachedServiceDescription={serviceDescription:i,url:e},i}_setStopSymbol(e){if(!e||0===e.length)return;if(null==this.defaultSymbols.stops)return;if(e.every((({symbol:e})=>null!=e)))return;const{first:t,last:r,middle:i,unlocated:s,waypoint:n,break:o}=this.defaultSymbols.stops;if(null==this.routeInfo||1===e.length)return void e.forEach(((s,n)=>{switch(n){case 0:s.symbol=t;break;case e.length-1:s.symbol=r;break;default:s.symbol=i}}));const a=e.map((({sequence:e})=>e)).filter((e=>null!=e)),l=Math.min(...a),u=Math.max(...a);for(const a of e)a.sequence!==l?a.sequence!==u?"ok"===a.status||"not-located-on-closest"===a.status?"waypoint"!==a.locationType?"break"!==a.locationType?a.symbol=i:a.symbol=o:a.symbol=n:a.symbol=s:a.symbol=r:a.symbol=t}_toRouteLayerSolution(e){const t=e.routeResults[0].stops?.map((e=>tt.A.fromJSON(e.toJSON())));this._setStopSymbol(t);const r=new ht(t),i=new dt(e.polygonBarriers?.map((e=>{const t=Ee.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.polygonBarriers,t}))),s=new yt(e.polylineBarriers?.map((e=>{const t=Le.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.polylineBarriers,t}))),n=new ct(e.pointBarriers?.map((e=>{const t=Fe.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.pointBarriers,t}))),o=e.routeResults[0].route?.toJSON(),a=ke.A.fromJSON(o);a.symbol=this.defaultSymbols.routeInfo;const l=new pt(e.routeResults[0].directionPoints?.features.map((e=>{const t=De.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.directionPoints,t})));return{directionLines:new ut(e.routeResults[0].directionLines?.features.map((e=>{const t=je.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.directionLines,t}))),directionPoints:l,pointBarriers:n,polygonBarriers:i,polylineBarriers:s,routeInfo:a,stops:r}}_writeDirectionLines(){return this._writeNetworkFeatures(this.directionLines,this.defaultSymbols.directionLines,"esriGeometryPolyline",je.A.fields,"DirectionLines","Direction Lines")}_writeDirectionPoints(){return this._writeNetworkFeatures(this.directionPoints,this.defaultSymbols.directionPoints,"esriGeometryPoint",De.A.fields,"DirectionPoints","Direction Points")}_writeNetworkFeatures(e,t,r,i,s,n){if(!e?.length)return null;const o=this.spatialReference.toJSON(),{fullExtent:a,maxScale:l,minScale:u}=this;return{featureSet:{features:e.toArray().map((e=>function(e){const{attributes:t,geometry:r,popupTemplate:i,symbol:s}=e.toGraphic().toJSON();return{attributes:t,geometry:r,popupInfo:i,symbol:s}}(e))),geometryType:r,spatialReference:o},layerDefinition:{capabilities:"Query,Update,Editing",drawingInfo:{renderer:{type:"simple",symbol:null!=t?t.toJSON():st(r)}},extent:a.toJSON(),fields:i,geometryType:r,hasM:!1,hasZ:!1,maxScale:l,minScale:u,name:s,objectIdField:"ObjectID",spatialReference:o,title:n,type:"Feature Layer",typeIdField:""}}}_writePointBarriers(){return this._writeNetworkFeatures(this.pointBarriers,this.defaultSymbols.pointBarriers,"esriGeometryPoint",Fe.A.fields,"Barriers","Point Barriers")}_writePolygonBarriers(){return this._writeNetworkFeatures(this.polygonBarriers,this.defaultSymbols.polygonBarriers,"esriGeometryPolygon",Ee.A.fields,"PolygonBarriers","Polygon Barriers")}_writePolylineBarriers(){return this._writeNetworkFeatures(this.polylineBarriers,this.defaultSymbols.polylineBarriers,"esriGeometryPolyline",Le.A.fields,"PolylineBarriers","Line Barriers")}_writeRouteInfo(){return this._writeNetworkFeatures(null!=this.routeInfo?new p.A([this.routeInfo]):null,this.defaultSymbols.routeInfo,"esriGeometryPolyline",ke.A.fields,"RouteInfo","Route Details")}_writeStops(){const e=this._writeNetworkFeatures(this.stops,null,"esriGeometryPoint",tt.A.fields,"Stops","Stops");if(null==e)return null;const{stops:t}=this.defaultSymbols,r=t?.first?.toJSON(),i=t?.middle?.toJSON(),s=t?.last?.toJSON();return e.layerDefinition.drawingInfo.renderer={type:"uniqueValue",field1:"Sequence",defaultSymbol:i,uniqueValueInfos:[{value:"1",symbol:r,label:"First Stop"},{value:`${this.stops.length}`,symbol:s,label:"Last Stop"}]},e}};(0,i._)([(0,v.MZ)({readOnly:!0,json:{read:!1,origins:{"portal-item":{write:{allowNull:!0,ignoreOrigin:!0}},"web-map":{write:{overridePolicy(){return{allowNull:!0,ignoreOrigin:null==this.portalItem}}}}}}})],gt.prototype,"_featureCollection",void 0),(0,i._)([(0,S.K)(["web-map","portal-item"],"_featureCollection")],gt.prototype,"writeFeatureCollectionWebmap",null),(0,i._)([(0,v.MZ)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{target:"type",overridePolicy(){return{ignoreOrigin:null!=this.portalItem}}}}}}})],gt.prototype,"_type",void 0),(0,i._)([(0,v.MZ)({nonNullable:!0,type:R})],gt.prototype,"defaultSymbols",void 0),(0,i._)([(0,v.MZ)({readOnly:!0})],gt.prototype,"directionLines",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"directionLines",["layers","featureCollection.layers"])],gt.prototype,"readDirectionLines",null),(0,i._)([(0,v.MZ)({readOnly:!0})],gt.prototype,"directionPoints",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"directionPoints",["layers","featureCollection.layers"])],gt.prototype,"readDirectionPoints",null),(0,i._)([(0,v.MZ)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],gt.prototype,"featureCollectionType",void 0),(0,i._)([(0,v.MZ)({readOnly:!0})],gt.prototype,"fullExtent",null),(0,i._)([(0,v.MZ)({json:{origins:{"web-map":{name:"featureCollection.showLegend"}},write:!0}})],gt.prototype,"legendEnabled",void 0),(0,i._)([(0,v.MZ)({type:["show","hide"]})],gt.prototype,"listMode",void 0),(0,i._)([(0,v.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],gt.prototype,"maxScale",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"maxScale",["layers","featureCollection.layers"])],gt.prototype,"readMaxScale",null),(0,i._)([(0,v.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],gt.prototype,"minScale",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"minScale",["layers","featureCollection.layers"])],gt.prototype,"readMinScale",null),(0,i._)([(0,v.MZ)({type:["ArcGISFeatureLayer"],value:"ArcGISFeatureLayer"})],gt.prototype,"operationalLayerType",void 0),(0,i._)([(0,v.MZ)({nonNullable:!0,type:p.A.ofType(Fe.A)})],gt.prototype,"pointBarriers",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"pointBarriers",["layers","featureCollection.layers"])],gt.prototype,"readPointBarriers",null),(0,i._)([(0,v.MZ)({nonNullable:!0,type:p.A.ofType(Ee.A)})],gt.prototype,"polygonBarriers",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"polygonBarriers",["layers","featureCollection.layers"])],gt.prototype,"readPolygonBarriers",null),(0,i._)([(0,v.MZ)({nonNullable:!0,type:p.A.ofType(Le.A)})],gt.prototype,"polylineBarriers",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"polylineBarriers",["layers","featureCollection.layers"])],gt.prototype,"readPolylineBarriers",null),(0,i._)([(0,v.MZ)({readOnly:!0})],gt.prototype,"routeInfo",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"routeInfo",["layers","featureCollection.layers"])],gt.prototype,"readRouteInfo",null),(0,i._)([(0,v.MZ)({type:Me.A})],gt.prototype,"spatialReference",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"spatialReference",["layers","featureCollection.layers"])],gt.prototype,"readSpatialReference",null),(0,i._)([(0,v.MZ)({nonNullable:!0,type:p.A.ofType(tt.A)})],gt.prototype,"stops",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"stops",["layers","featureCollection.layers"])],gt.prototype,"readStops",null),(0,i._)([(0,v.MZ)()],gt.prototype,"title",null),(0,i._)([(0,v.MZ)({readOnly:!0,json:{read:!1}})],gt.prototype,"type",void 0),(0,i._)([(0,v.MZ)()],gt.prototype,"url",null),gt=(0,i._)([(0,w.$)(ft)],gt);const vt=gt},92078:function(e,t,r){r.d(t,{q:function(){return w}});var i=r(53804),s=r(30580),n=r(39819),o=r(90683),a=r(23502),l=r(67888),u=(r(13798),r(58941),r(47332)),p=r(65953),c=r(81392),d=r(64786),y=r(97354),h=r(99495);const f={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},m={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},g={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},v={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":f,"web-map/basemap":m,"web-map/tables":g,"link-chart/operational-layers":{...f,LinkChartLayer:!0},"link-chart/basemap":m,"link-chart/tables":g,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};var b=r(7010);const w=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,r){return"Group Layer"===r?.portalItem?.type?void 0:e}writeListMode(e,t,r,i){(i&&"ground"===i.layerContainerType||e&&(0,h.R)(this,r,{},i))&&(t[r]=e)}writeOperationalLayerType(e,t,r,i){e&&"tables"!==i?.layerContainerType&&(t.layerType=e)}writeTitle(e,t){t.title=e??"Layer"}readTimeExtent(e){return e?s.A.fromArray(e):null}writeTimeExtent(e,t,r,i){e&&"tables"!==i.layerContainerType&&(e.isEmpty?i?.messages&&i.messages.push(new n.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[r]=e.toArray())}read(e,t){t&&(t.layer=this),(0,y.t)(this,e,(t=>super.read(e,t)),t)}write(e,t){if(!this.persistenceEnabled&&!t?.ignorePersistenceEnabled)return null;if(t?.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,r=v[e];let i=!!r?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(i=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===e&&(i=!1),!i)return t.messages?.push(new n.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const r=super.write(e,{...t,layer:this}),i=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof n.A&&"web-document-write:property-required"===e.name)).length;return(0,o.w8)(r?.url)?(t?.messages?.push(new n.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&i?null:r}beforeSave(){}};return(0,i._)([(0,a.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,i._)([(0,u.w)("id",["id"])],t.prototype,"readId",null),(0,i._)([(0,a.MZ)(b.C1)],t.prototype,"listMode",void 0),(0,i._)([(0,c.K)("listMode")],t.prototype,"writeListMode",null),(0,i._)([(0,a.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:d.K}}}}})],t.prototype,"operationalLayerType",void 0),(0,i._)([(0,c.K)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,i._)([(0,a.MZ)(b.ke)],t.prototype,"opacity",void 0),(0,i._)([(0,a.MZ)({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),(0,i._)([(0,a.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,i._)([(0,c.K)("title"),(0,c.K)(["web-scene"],"title")],t.prototype,"writeTitle",null),(0,i._)([(0,a.MZ)({type:s.A,json:{origins:{"web-scene":{write:{layerContainerTypes:d.K}}}}})],t.prototype,"visibilityTimeExtent",void 0),(0,i._)([(0,u.w)("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),(0,i._)([(0,c.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[l.jz,l.Uv]]}})],t.prototype,"writeTimeExtent",null),(0,i._)([(0,a.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:d.K}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=(0,i._)([(0,p.$)("esri.layers.mixins.OperationalLayer")],t),t}},61380:function(e,t,r){r.d(t,{A:function(){return _}});var i=r(53804),s=r(25591),n=r(7156),o=r(93040),a=r(77472),l=r(39819),u=r(40633),p=r(95929),c=r(60539),d=r(90683),y=r(23502),h=(r(58941),r(13798),r(47332)),f=r(65953),m=r(81392),g=r(11432),v=r(51432),b=r(43173),w=r(85956),S=r(29606);const _=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,p.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new b.default({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:i}=await r.e(1536).then(r.bind(r,58615));return(0,c.Te)(t),await i({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(e){throw(0,c.zf)(e)||u.A.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,c.QP)(e),!0))))}async setUserPrivileges(e,t){if(!s.default.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:r,fullEdit:i},content:{updateItem:s}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",i),this._set("userHasUpdateItemPrivileges",s)}catch(e){(0,c.QP)(e)}}async _fetchUserPrivileges(e,t){let r=this.portalItem;if(!e||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(t);const i=e===r.id;if(i&&r.portal.user)return(0,S.It)(r);let s,o;if(i)s=r.portal.url;else try{s=await(0,g.wI)(this.url,t)}catch(e){(0,c.QP)(e)}if(!s||!(0,d.b8)(s,r.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;o=await(n.id?.getCredential(`${s}/sharing`,{prompt:!1,signal:e}))}catch(e){(0,c.QP)(e)}if(!o)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(i?await r.reload():(r=new b.default({id:e,portal:{url:s}}),await r.load(t)),r.portal.user)return(0,S.It)(r)}catch(e){(0,c.QP)(e)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){(0,c.QP)(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?n.id?.findCredential(this.url):null;if(!t)return!0;const r=M.credential===t?M.user:await this._fetchEditingUser(e);return M.credential=t,M.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const r=n.id?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const i=`${r.owningSystemUrl}/sharing/rest`,s=v.A.getDefault();if(s&&s.loaded&&(0,d.S8)(s.restUrl)===(0,d.S8)(i))return s.user;const l=`${i}/community/self`,u=null!=e?e.signal:null,p=await(0,a.Ke)((0,o.A)(l,{authMode:"no-prompt",query:{f:"json"},signal:u}));return p.ok?w.A.fromJSON(p.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t?.portal,i=this.portalItem?.id&&(this.portalItem.portal||v.A.getDefault());return r&&i&&!(0,d.ut)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new l.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,i._)([(0,y.MZ)({type:b.default})],t.prototype,"portalItem",null),(0,i._)([(0,h.w)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,i._)([(0,m.K)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,i._)([(0,y.MZ)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,i._)([(0,y.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,i._)([(0,y.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,i._)([(0,y.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,i._)([(0,f.$)("esri.layers.mixins.PortalLayer")],t),t},M={credential:null,user:null}},7103:function(e,t,r){r.d(t,{A:function(){return d}});var i=r(39819),s=r(30905),n=r(40633),o=r(25738),a=r(92955),l=r(53743),u=r(21168),p=r(3569);const c=new Map;class d{static fromJSON(e){return new d(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new d(e.fields??[],m(e))}static fromLayerJSON(e){return new d(e.fields??[],m(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const r=[];for(const e of this.fields){const t=e?.name,i=h(t);if(t&&i){const s=y(t);this._fieldsMap.set(t,e),this._fieldsMap.set(s,e),this._normalizedFieldsMap.set(i,e),r.push(`${s}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,l.vE)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,l.WA)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,l.te)(e)||(0,l.Xz)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,l.te)(e)||(0,l.Xz)(e)||e.nullable||void 0!==(0,l.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(y(e))??this._normalizedFieldsMap.get(h(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(n.A.getLogger("esri.layers.support.FieldsIndex").error(new i.A("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),u.n$):f.has(t.type)?u.L5:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===u.L5?a.GB.instance:t===u.n$?p.mQ.utcInstance:(0,o.tE)(c,t,(()=>p.oh.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,l.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>(0,s.Wj)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function y(e){return e.trim().toLowerCase()}function h(e){return(0,l.rS)(e)?.toLowerCase()??""}const f=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function m(e){const t=new Map;if(!e.fields)return t;const r=!0===e.datesInUnknownTimezone,{timeInfo:i,editFieldsInfo:s}=e,n=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",a=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,u.ZS)(e.dateFieldsTimeReference):null,l=s?function(e){return"timeZone"in e}(s)?s.timeZone??a:s.dateFieldsTimeReference?(0,u.ZS)(s.dateFieldsTimeReference):a??u.n$:null,p=i?function(e){return"timeZone"in e}(i)?i.timeZone??a:i.timeReference?(0,u.ZS)(i.timeReference):a:null,c=new Map([[y(s?.creationDateField??""),l],[y(s?.editDateField??""),l],[y(n),p],[y(o),p]]);for(const{name:i,type:s}of e.fields)if(f.has(s))t.set(i,u.L5);else if("date"!==s&&"esriFieldTypeDate"!==s)t.set(i,null);else if(r)t.set(i,u.L5);else{const e=c.get(y(i??""))??a;t.set(i,e)}return t}},7010:function(e,t,r){r.d(t,{C1:function(){return M},Fm:function(){return b},Ih:function(){return v},M6:function(){return p},OZ:function(){return d},PY:function(){return u},Qo:function(){return f},Yj:function(){return h},fV:function(){return y},hG:function(){return _},hn:function(){return S},id:function(){return w},kF:function(){return c},ke:function(){return g}});var i=r(64786),s=r(91484),n=r(57165),o=r(60534),a=r(6422),l=r(59798);const u={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:i.K}}},p={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},c={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:i.K}}},d={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:o.w}}},y={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:i.K}}},h={value:null,type:a.A,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:i.K}}};function f(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const m={write:{enabled:!0,layerContainerTypes:i.K},read:!0},g={type:Number,json:{origins:{"web-document":m,"portal-item":{write:!0}}}},v={...g,json:{...g.json,origins:{"web-document":{...m,write:{enabled:!0,layerContainerTypes:i.K,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition?.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,l.D)(t.layerDefinition.drawingInfo.transparency):void 0:(0,l.D)(t.drawingInfo.transparency)}}},b={type:s.default,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=s.default.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(r.spatialReference=n.A.fromJSON(t.spatialReference)),r}}}},read:!1}},w={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},S={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:i.K}}},name:"layerDefinition.minScale",write:!0}},_={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:i.K}}},name:"layerDefinition.maxScale",write:!0}},M={json:{write:{ignoreOrigin:!0,layerContainerTypes:i.K},origins:{"web-map":{read:!1,write:!1}}}}},29606:function(e,t,r){r.d(t,{It:function(){return d},LG:function(){return o},OM:function(){return u},Y:function(){return a},bK:function(){return l},mm:function(){return c},sQ:function(){return p}});var i=r(46157),s=r(57165),n=r(1644);function o(e,t){if(!a(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function a(e,t){return!!e.typeKeywords?.includes(t)}function l(e){return a(e,c.HOSTED_SERVICE)}function u(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}async function p(e){const t=e.clone().normalize();let r;if(t.length>1)for(const e of t)r?e.width>r.width&&(r=e):r=e;else r=t[0];return async function(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,n.ci)(e);const r=s.A.WGS84;return await(0,i.initializeProjection)(t,r),(0,i.project)(e,r)}(r)}const c={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function d(e){const{portal:t,isOrgItem:r,itemControl:i}=e,s=t.user?.privileges;let n=!s||s.includes("features:user:edit"),o=!!r&&!!s?.includes("features:user:fullEdit");const a="update"===i||"admin"===i;return a?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:a}}}},74865:function(e,t,r){r.d(t,{A:function(){return O}});var i,s=r(53804),n=r(10748),o=r(73037),a=r(21609),l=r(40633),u=r(23502),p=r(77560),c=r(74376),d=r(47332),y=r(65953),h=r(81392),f=r(67888),m=r(53743),g=r(30047),v=r(77056),b=r(23879),w=r(85336),S=r(49951),_=r(54547);const M="percent-of-total",T="field",A=new o.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:M,esriNormalizeByField:T}),I=(0,f.dp)(b.A);let x=i=class extends((0,v.h)(g.A)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map((e=>{const t=new b.A;return t.read(e,r),null==t.minValue&&(t.minValue=i),null==t.maxValue&&(t.maxValue=t.minValue),i=t.maxValue,t}))}writeClassBreakInfos(e,t,r,i){const s=e.map((e=>e.write({},i)));this._areClassBreaksConsecutive()&&s.forEach((e=>delete e.classMinValue)),t[r]=s}castField(e){return null==e?e:"function"==typeof e?(l.A.getLogger(this).error(".field: field must be a string value"),null):(0,f.GX)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t&&T||r&&M||null,t&&r&&l.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==T&&e!==M||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i="number"==typeof e?new b.A({minValue:e,maxValue:t,symbol:(0,n.dp)(r)}):I((0,a.o8)(e)),this.classBreakInfos.push(i),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]===e&&r[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&null==t?.arcade&&l.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&null==t?.arcade&&(r={...r,arcade:await(0,_.lw)()});const i=this.getBreakIndex(e,r);return-1!==i?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void l.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&null==t?.arcade){const e=await(0,_.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),r={...r,arcade:e}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new i({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,a.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,a.o8)(this.visualVariables),legendOptions:(0,a.o8)(this.legendOptions),authoringInfo:(0,a.o8)(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map((r=>r.collectRequiredFields(e,t))),(0,m.Dx)(e,t,this.valueExpression)];(0,m.rq)(e,t,this.field),(0,m.rq)(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:s,arcade:n,timeZone:o}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const u=n.arcadeUtils;if(!l){const e=u.createSyntaxTree(a);l=u.createFunction(e),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const p=u.executeFunction(l,u.createExecContext(e,u.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),o));return this._getBreakIndexfromInfos(p)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let s=parseFloat(r[t]);if(i){const e=this.normalizationTotal,t=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if("log"===i)s=Math.log(s)*Math.LOG10E;else if(i!==M||null==e||isNaN(e)){if(i===T&&!isNaN(t)){if(isNaN(s)||isNaN(t))return-1;s/=t}}else s=s/e*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};(0,s._)([(0,u.MZ)(w.As)],x.prototype,"backgroundFillSymbol",void 0),(0,s._)([(0,u.MZ)({type:[b.A]})],x.prototype,"classBreakInfos",void 0),(0,s._)([(0,d.w)("classBreakInfos")],x.prototype,"readClassBreakInfos",null),(0,s._)([(0,h.K)("classBreakInfos")],x.prototype,"writeClassBreakInfos",null),(0,s._)([(0,u.MZ)({type:String,json:{write:!0}})],x.prototype,"defaultLabel",void 0),(0,s._)([(0,u.MZ)(w.z4)],x.prototype,"defaultSymbol",void 0),(0,s._)([(0,u.MZ)({type:String,json:{write:!0}})],x.prototype,"field",void 0),(0,s._)([(0,p.w)("field")],x.prototype,"castField",null),(0,s._)([(0,u.MZ)({type:Boolean})],x.prototype,"isMaxInclusive",void 0),(0,s._)([(0,u.MZ)({type:S.q,json:{write:!0}})],x.prototype,"legendOptions",void 0),(0,s._)([(0,u.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],x.prototype,"minValue",null),(0,s._)([(0,u.MZ)({type:String,json:{write:!0}})],x.prototype,"normalizationField",void 0),(0,s._)([(0,u.MZ)({type:Number,cast:e=>(0,f.GB)(e),json:{write:!0}})],x.prototype,"normalizationTotal",void 0),(0,s._)([(0,u.MZ)({type:A.apiValues,value:null,json:{type:A.jsonValues,read:A.read,write:A.write}})],x.prototype,"normalizationType",null),(0,s._)([(0,c.e)({classBreaks:"class-breaks"})],x.prototype,"type",void 0),(0,s._)([(0,u.MZ)({type:String,json:{write:!0}})],x.prototype,"valueExpression",void 0),(0,s._)([(0,u.MZ)({type:String,json:{write:!0}})],x.prototype,"valueExpressionTitle",void 0),x=i=(0,s._)([(0,y.$)("esri.renderers.ClassBreaksRenderer")],x);const O=x},1526:function(e,t,r){r.d(t,{A:function(){return N}});var i=r(53804),s=r(21609),n=r(23502),o=(r(58941),r(40633)),a=r(65953),l=r(81392),u=r(53743),p=r(30047),c=r(77056),d=r(52874),y=r(93040),h=r(39819),f=r(99680),m=r(60539),g=r(58009),v=r(7103),b=r(54547),w=r(38164),S=r(67895),_=r(7590);const M="esri.renderers.support.DictionaryLoader",T={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class A{constructor(e,t,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new f.q(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=t,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,t){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{r=await this._dictionaryPromise}catch(e){if((0,m.zf)(e))return this._dictionaryPromise=null,null}const i=this._dictionaryVersion?.since(4,0),s={};if(this.fieldMap)for(const t of this._symbolFields){const r=(0,_.MO)(this.fieldMap[t],this._fieldIndex);if(r){const n=e.attributes[r];s[t]=i?n:null!=n?""+e.attributes[r]:""}else s[t]=""}let n=null;try{n=r?.(s,t)}catch(e){return null}if(!n||"string"!=typeof n||"invalid"===n)return null;const o=n.split(";"),a=[],l=[];for(const e of o)if(e)if(e.includes("po:")){const t=e.substr(3).split("|");if(3===t.length){const e=t[0],r=t[1];let i=t[2];if("DashTemplate"===r)i=i.split(" ").map((e=>Number(e)));else if("Color"===r){const e=new d.A(i).toRgba();i=[e[0],e[1],e[2],255*e[3]]}else i=Number(i);l.push({primitiveName:e,propertyName:r,value:i,defaultValue:null})}}else if(e.includes("|")){for(const t of e.split("|"))if(this._itemNames.has(t)){a.push(t);break}}else this._itemNames.has(e)&&a.push(e);const u=null==e.geometry||!e.geometry.hasZ&&"point"===e.geometry.type;return this._cimPartsToCIMSymbol(e,a,l,u,t)}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void o.A.getLogger(M).error("no valid URL!");const t=(0,y.A)(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:null!=e?e.signal:null}),[{data:r}]=await Promise.all([t,(0,b.lw)()]);if(!r)throw this._dictionaryPromise=null,new h.A("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:i,dictionary_version:s,expression:n,itemsNames:a}=r,l=n;let u=!1;s&&(this._dictionaryVersion=g.R.parse(s),u=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=i.symbol;const p={};if(this.config){const e=this.config;for(const t in e)p[t]=e[t]}if(i.configuration)for(const e of i.configuration)p.hasOwnProperty(e.name)||(p[e.name]=e.value);const c=[];if(e?.fields&&this.fieldMap)for(const t in this.fieldMap){const r=this.fieldMap[t],i=e.fields.filter((e=>e.name.toLowerCase()===r?.toLowerCase()));i.length>0&&c.push({...i[0],type:u?i[0].type:"esriFieldTypeString"})}c.length>0&&(this._fieldIndex=new v.A(c));const d=(0,b.xR)(l,null!=e?e.spatialReference:null,c,p).then((e=>{const t={scale:0};return(r,i)=>{if(null==e)return null;const s=e.repurposeFeature({geometry:null,attributes:r});return t.scale=null!=i?i.scale??void 0:void 0,e.evaluate({$feature:s,$view:t},e.services)}})).catch((e=>(o.A.getLogger(M).error("Creating dictionary expression failed:",e),null)));return this._dictionaryPromise=d,d}async _cimPartsToCIMSymbol(e,t,r,i,n){const o=new Array(t.length);for(let e=0;e<t.length;e++)o[e]=this._getSymbolPart(t[e],n);let a=await Promise.all(o);const l=this.fieldMap;if(l){a=(0,s.o8)(a);for(const t of a)S.$.applyDictionaryTextOverrides(t,e,l,this._fieldIndex,(0,_.bs)(t))}return new w.A({data:I(a,r,i)})}async _getSymbolPart(e,t){const r=this._symbolCache.get(e);if(r)return r;if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const i=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),s=(0,y.A)(i,{responseType:"json",query:{f:"json"},...t});this._ongoingRequests.set(e,s),s.finally((()=>this._ongoingRequests.delete(e)));try{const t=await s;return this._symbolCache.put(e,t.data),t.data}catch(e){throw e}}}function I(e,t,r){if(!e||0===e.length)return null;const i={...e[0]};if(e.length>1){i.symbolLayers=[];for(const t of e){const e=t;i.symbolLayers.unshift(...e.symbolLayers)}}return r&&(i.callout=T),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}var x;let O=x=class extends((0,c.h)(p.A)){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new A(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i?.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new x({config:(0,s.o8)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,s.o8)(this.fieldMap),url:(0,s.o8)(this.url),visualVariables:(0,s.o8)(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await(0,u.Dx)(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};(0,i._)([(0,n.MZ)({type:A})],O.prototype,"_loader",null),(0,i._)([(0,n.MZ)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],O.prototype,"config",void 0),(0,i._)([(0,n.MZ)({type:Object,json:{write:!0}})],O.prototype,"fieldMap",void 0),(0,i._)([(0,n.MZ)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],O.prototype,"scaleExpression",void 0),(0,i._)([(0,l.K)("scaleExpression")],O.prototype,"writeData",null),(0,i._)([(0,n.MZ)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],O.prototype,"scaleExpressionTitle",void 0),(0,i._)([(0,n.MZ)({type:String,json:{write:!0}})],O.prototype,"url",void 0),(0,i._)([(0,l.K)("visualVariables")],O.prototype,"writeVisualVariables",null),O=x=(0,i._)([(0,a.$)("esri.renderers.DictionaryRenderer")],O);const N=O},96173:function(e,t,r){r.d(t,{A:function(){return S}});var i,s=r(53804),n=r(52874),o=r(21609),a=r(23502),l=(r(58941),r(40633),r(74376)),u=r(65953),p=r(53743),c=r(30047),d=r(77056),y=r(19563),h=r(30905);r(13798);let f=i=class extends h.oY{constructor(){super(...arguments),this.unit=null}clone(){return new i({unit:this.unit})}};(0,s._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"unit",void 0),f=i=(0,s._)([(0,u.$)("esri.renderers.support.DotDensityLegendOptions")],f);const m=f;var g,v=r(8740),b=r(22198);let w=g=class extends((0,d.h)(c.A)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new n.A([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new b.A,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new v.A({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new g({attributes:(0,o.o8)(this.attributes),backgroundColor:(0,o.o8)(this.backgroundColor),dotBlendingEnabled:(0,o.o8)(this.dotBlendingEnabled),dotShape:(0,o.o8)(this.dotShape),dotSize:(0,o.o8)(this.dotSize),dotValue:(0,o.o8)(this.dotValue),legendOptions:(0,o.o8)(this.legendOptions),outline:(0,o.o8)(this.outline),referenceScale:(0,o.o8)(this.referenceScale),seed:(0,o.o8)(this.seed),visualVariables:(0,o.o8)(this.visualVariables),authoringInfo:(0,o.o8)(this.authoringInfo)})}getControllerHash(){const e=this.attributes?.map((e=>e.field||e.valueExpression||""));return`${e}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await(0,p.Dx)(e,t,r.valueExpression),r.field&&e.add(r.field)}};(0,s._)([(0,a.MZ)({type:[y.A],json:{write:!0}})],w.prototype,"attributes",void 0),(0,s._)([(0,a.MZ)({type:n.A,json:{write:!0}})],w.prototype,"backgroundColor",void 0),(0,s._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],w.prototype,"dotBlendingEnabled",void 0),(0,s._)([(0,a.MZ)({type:String,json:{write:!1}})],w.prototype,"dotShape",void 0),(0,s._)([(0,a.MZ)({type:Number,json:{write:!0}})],w.prototype,"dotSize",void 0),(0,s._)([(0,a.MZ)({type:m,json:{write:!0}})],w.prototype,"legendOptions",void 0),(0,s._)([(0,a.MZ)({type:b.A,json:{default:null,write:!0}})],w.prototype,"outline",void 0),(0,s._)([(0,a.MZ)({type:Number,json:{write:!0}})],w.prototype,"dotValue",void 0),(0,s._)([(0,a.MZ)({type:Number,json:{write:!0}})],w.prototype,"referenceScale",void 0),(0,s._)([(0,a.MZ)({type:Number,json:{write:!0}})],w.prototype,"seed",void 0),(0,s._)([(0,l.e)({dotDensity:"dot-density"})],w.prototype,"type",void 0),w=g=(0,s._)([(0,u.$)("esri.renderers.DotDensityRenderer")],w);const S=w},52308:function(e,t,r){r.d(t,{A:function(){return I}});var i=r(53804),s=r(52874),n=(r(10748),r(88022)),o=r(21609),a=r(40633),l=r(74087),u=r(13520),p=r(23502),c=(r(58941),r(63693)),d=r(74376),y=r(65953),h=r(53743),f=r(30047),m=r(53871),g=r(27419),v=r(75743),b=r(30905);r(13798);let w=class extends((0,v.O)(b.oY)){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],w.prototype,"minLabel",void 0),(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],w.prototype,"maxLabel",void 0),(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],w.prototype,"title",void 0),w=(0,i._)([(0,y.$)("esri.renderers.support.HeatmapLegendOptions")],w);var S,_=r(70181),M=r(90363);function T(e){if(null!=e){const{maxDensity:t,minDensity:r,radius:i}=e;if(null!=t||null!=r||null!=i){const{blurRadius:t,maxPixelIntensity:r,minPixelIntensity:i,...s}=e;return s}}return e}let A=S=class extends f.A{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new g.A({ratio:0,color:new s.A("rgba(255, 140, 0, 0)")}),new g.A({ratio:.75,color:new s.A("rgba(255, 140, 0, 1)")}),new g.A({ratio:.9,color:new s.A("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return T(e)}get blurRadius(){return(0,_.PU)(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",(0,_.zp)(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(_.ex**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||"user"===(0,c.oY)(this).getDefaultOrigin()&&(this._warnedProps[e]=!0,(0,l._)((()=>{(0,n.Lx)(a.A.getLogger(this),e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})})))}read(e,t){e=T(e),super.read(e,t)}getSymbol(){return new M.A}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&"string"==typeof r&&(0,h.rq)(e,t,r),i&&"string"==typeof i&&await(0,h.Dx)(e,t,i)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new S({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:(0,o.o8)(this.colorStops),field:this.field,legendOptions:(0,o.o8)(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,i._)([(0,p.MZ)({type:m.A,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],A.prototype,"authoringInfo",void 0),(0,i._)([(0,p.MZ)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],A.prototype,"blurRadius",null),(0,i._)([(0,p.MZ)({type:[g.A],json:{write:!0}})],A.prototype,"colorStops",void 0),(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],A.prototype,"field",void 0),(0,i._)([(0,p.MZ)({type:w,json:{write:!0}})],A.prototype,"legendOptions",void 0),(0,i._)([(0,p.MZ)({type:Number,json:{write:!0}})],A.prototype,"maxDensity",void 0),(0,i._)([(0,p.MZ)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],A.prototype,"maxPixelIntensity",null),(0,i._)([(0,p.MZ)({type:Number,json:{write:!0}})],A.prototype,"minDensity",void 0),(0,i._)([(0,p.MZ)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],A.prototype,"minPixelIntensity",null),(0,i._)([(0,p.MZ)({type:Number,cast:u.cr,json:{write:!0}})],A.prototype,"radius",void 0),(0,i._)([(0,p.MZ)({type:Number,range:{min:0},json:{default:0,write:!0}})],A.prototype,"referenceScale",void 0),(0,i._)([(0,d.e)({heatmap:"heatmap"})],A.prototype,"type",void 0),(0,i._)([(0,p.MZ)({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],A.prototype,"valueExpression",void 0),(0,i._)([(0,p.MZ)({type:String})],A.prototype,"valueExpressionTitle",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],A.prototype,"_pixelIntensityToDensity",null),A=S=(0,i._)([(0,y.$)("esri.renderers.HeatmapRenderer")],A);const I=A},60189:function(e,t,r){r.d(t,{A:function(){return _}});var i=r(53804),s=r(52874),n=(r(10748),r(50659)),o=r(75743),a=r(13520),l=r(23502),u=(r(58941),r(40633),r(74376)),p=r(65953),c=r(53743),d=r(30047),y=r(77056),h=r(19563),f=r(30905);r(13798);let m=class extends((0,o.O)(f.oY)){constructor(){super(...arguments),this.color=new s.A([0,0,0,0]),this.label=null,this.threshold=0}};(0,i._)([(0,l.MZ)({type:s.A,json:{write:!0}})],m.prototype,"color",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],m.prototype,"label",void 0),(0,i._)([(0,l.MZ)({type:Number,range:{min:0,max:1},json:{write:!0}})],m.prototype,"threshold",void 0),m=(0,i._)([(0,p.$)("esri.renderers.support.OthersCategory")],m);let g=class extends((0,o.O)(f.oY)){constructor(){super(...arguments),this.title=null}};(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],g.prototype,"title",void 0),g=(0,i._)([(0,p.$)("esri.renderers.support.PieChartLegendOptions")],g);var v=r(90363),b=r(8740),w=r(22198);let S=class extends((0,y.h)((0,o.O)(d.A))){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new s.A([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new m,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){return new v.A({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(n.Ru)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await(0,c.Dx)(e,t,r.valueExpression),r.field&&e.add(r.field)}};(0,i._)([(0,l.MZ)({type:[h.A],json:{write:!0}})],S.prototype,"attributes",void 0),(0,i._)([(0,l.MZ)({type:b.A,json:{default:null,write:!0}})],S.prototype,"backgroundFillSymbol",void 0),(0,i._)([(0,l.MZ)({type:s.A,json:{write:!0}})],S.prototype,"defaultColor",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],S.prototype,"defaultLabel",void 0),(0,i._)([(0,l.MZ)({type:Number,range:{min:0,max:1},json:{write:!0}})],S.prototype,"holePercentage",void 0),(0,i._)([(0,l.MZ)({type:m,json:{write:!0}})],S.prototype,"othersCategory",void 0),(0,i._)([(0,l.MZ)({type:g,json:{write:!0}})],S.prototype,"legendOptions",void 0),(0,i._)([(0,l.MZ)({type:w.A,json:{default:null,write:!0}})],S.prototype,"outline",void 0),(0,i._)([(0,l.MZ)({type:Number,cast:a.cr,json:{write:!0}})],S.prototype,"size",void 0),(0,i._)([(0,u.e)({pieChart:"pie-chart"})],S.prototype,"type",void 0),S=(0,i._)([(0,p.$)("esri.renderers.PieChartRenderer")],S);const _=S},30047:function(e,t,r){r.d(t,{A:function(){return c}});var i=r(53804),s=r(73037),n=r(30905),o=r(23502),a=(r(58941),r(40633),r(13798),r(65953)),l=r(53871);const u=new s.J({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let p=class extends n.oY{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};(0,i._)([(0,o.MZ)({type:l.A,json:{write:!0}})],p.prototype,"authoringInfo",void 0),(0,i._)([(0,o.MZ)({type:u.apiValues,readOnly:!0,json:{type:u.jsonValues,read:!1,write:{writer:u.write,ignoreOrigin:!0}}})],p.prototype,"type",void 0),p=(0,i._)([(0,a.$)("esri.renderers.Renderer")],p);const c=p},27777:function(e,t,r){r.d(t,{A:function(){return y}});var i,s=r(53804),n=r(21609),o=r(23502),a=(r(58941),r(40633),r(74376)),l=r(65953),u=r(30047),p=r(77056),c=r(85336);let d=i=class extends((0,p.h)(u.A)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map((r=>r.collectRequiredFields(e,t))))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new i({description:this.description,label:this.label,symbol:(0,n.o8)(this.symbol),visualVariables:(0,n.o8)(this.visualVariables),authoringInfo:(0,n.o8)(this.authoringInfo)})}};(0,s._)([(0,o.MZ)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,s._)([(0,o.MZ)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,s._)([(0,o.MZ)(c.Wp)],d.prototype,"symbol",void 0),(0,s._)([(0,a.e)({simple:"simple"})],d.prototype,"type",void 0),d=i=(0,s._)([(0,l.$)("esri.renderers.SimpleRenderer")],d);const y=d},61065:function(e,t,r){r.d(t,{A:function(){return J}});var i=r(53804),s=r(10748),n=r(39819),o=r(21609),a=r(40633),l=r(34194),u=r(28181),p=r(23502),c=r(77560),d=r(74376),y=r(47332),h=r(65953),f=r(81392),m=r(72952),g=r(67888),v=r(53743),b=r(51432),w=r(30047),S=r(77056),_=r(85336),M=r(49951),T=r(75743),A=r(30905);r(58941),r(13798);let I=class extends((0,T.O)(A.oY)){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};(0,i._)([(0,p.MZ)(_.Ug)],I.prototype,"value",void 0),(0,i._)([(0,p.MZ)(_.Ug)],I.prototype,"value2",void 0),(0,i._)([(0,p.MZ)(_.Ug)],I.prototype,"value3",void 0),I=(0,i._)([(0,h.$)("esri.renderers.support.UniqueValue")],I);const x=I;var O=r(50659);let N=class extends((0,T.O)(A.oY)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(null==e)return null;const t=typeof(e=Array.isArray(e)?e:[e])[0];return"string"===t||"number"===t?e.map((e=>new x({value:e}))):"object"===t?e[0]instanceof x?e:e.map((e=>new x(e))):null}};(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],N.prototype,"description",void 0),(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],N.prototype,"label",void 0),(0,i._)([(0,p.MZ)(_.z4)],N.prototype,"symbol",void 0),(0,i._)([(0,p.MZ)({type:[x],json:{type:[[String]],read:{reader:e=>e?e.map((e=>new x({value:e[0],value2:e[1],value3:e[2]}))):null},write:{writer:(e,t)=>{const r=[];for(const t of e){const e=[t.value,t.value2,t.value3].filter(O.Ru).map((e=>e.toString()));r.push(e)}t.values=r}}}})],N.prototype,"values",void 0),(0,i._)([(0,c.w)("values")],N.prototype,"castValues",null),N=(0,i._)([(0,h.$)("esri.renderers.support.UniqueValueClass")],N);const C=N;let Z=class extends((0,T.O)(A.oY)){constructor(e){super(e),this.heading=null,this.classes=null}};(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],Z.prototype,"heading",void 0),(0,i._)([(0,p.MZ)({type:[C],json:{write:!0}})],Z.prototype,"classes",void 0),Z=(0,i._)([(0,h.$)("esri.renderers.support.UniqueValueGroup")],Z);const V=Z;var j,D=r(99278),F=r(54547),E=r(60534),L=r(3521),k=r(36e3);const z="esri.renderers.UniqueValueRenderer",R=()=>a.A.getLogger(z),P="uvInfos-watcher",B="uvGroups-watcher",U=(0,g.dp)(D.A);let q=j=class extends((0,S.h)(w.A)){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,t){if(!e&&!t)return;if(!e||!t)return{type:"complete",oldValue:e,newValue:t};let r=!1;const i={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<t.length;s++){const n=e.find((e=>e.value===t[s].value));n?(0,m.Ui)(n,t[s])?(i.changed.push({type:"complete",oldValue:n,newValue:t[s]}),r=!0):i.unchanged.push({oldValue:n,newValue:t[s]}):(i.added.push(t[s]),r=!0)}for(let s=0;s<e.length;s++)t.find((t=>t.value===e[s].value))||(i.removed.push(e[s]),r=!0);return r?i:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return null==e||"function"==typeof e?e:(0,g.GX)(e)}writeField(e,t,r,i){"string"==typeof e?t[r]=e:i?.messages?i.messages.push(new n.A("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):R().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||b.A.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const e=(0,E.f)(t.styleUrl,r);return Object.freeze({styleUrl:e})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=(0,E.t)(e.styleUrl,i))}set uniqueValueGroups(e){this.styleOrigin?R().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?R().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void R().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r="object"==typeof e?U(e):new D.A({value:e,symbol:(0,s.dp)(t)}),this.uniqueValueInfos?.push(r),this._valueInfoMap[r.value]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void R().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const i=t[r];if(String(i.value)===String(e)){delete this._valueInfoMap[e],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&null==t?.arcade&&(r={...r,arcade:await(0,F.lw)()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void R().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return r?.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&null==r?.arcade){const e=await(0,F.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),r={...r,arcade:e}}const i=this._getUniqueValueInfo(e,r);return i?.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce(((e,t)=>e+t.getAttributeHash()),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=this.uniqueValueInfos?.reduce(((e,t)=>e+t.getMeshHash()),"");return`${e}.${t}.${r}.${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}.${this.valueExpression}`}clone(){const e=new j({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,o.o8)(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,o.o8)(this.visualVariables),legendOptions:(0,o.o8)(this.legendOptions),authoringInfo:(0,o.o8)(this.authoringInfo),backgroundFillSymbol:(0,o.o8)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=(0,o.o8)(this.uniqueValueInfos),r=(0,o.o8)(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze((0,o.o8)(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map((r=>r.collectRequiredFields(e,t))),(0,v.Dx)(e,t,this.valueExpression)];(0,v.rq)(e,t,this.field),(0,v.rq)(e,t,this.field2),(0,v.rq)(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return(0,L.cF)(this.styleOrigin,{portal:this.portal}).then((e=>{const t=[];return this._valueInfoMap={},e?.data&&Array.isArray(e.data.items)&&e.data.items.forEach((r=>{const i=new k.A({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const s=new D.A({value:r.name,symbol:i});t.push(s),this._valueInfoMap[r.name]=s})),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",",")}_updateUniqueValues(){null!=this._isInfosSource&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(P);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push((0,u.watch)((()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description})),((e,t)=>{e!==t&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)}),{sync:!0}));this.addHandles(t,P)}}_watchUniqueValueGroups(){this.removeHandles(B);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push((0,u.watch)((()=>({classes:r.classes})),((e,t)=>{e!==t&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}));for(const e of r.classes??[])t.push((0,u.watch)((()=>({symbol:e.symbol,values:e.values,label:e.label,description:e.description})),((e,t)=>{e!==t&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}))}this.addHandles(t,B)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:i,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!r);for(const t of n)for(const n of t.classes??[]){const{symbol:t,label:o,values:l,description:u}=n;for(const n of l??[]){const{value:l,value2:p,value3:c}=n,d=[l];r&&d.push(p),i&&d.push(c);const y=a?d.join(s||""):d[0]??void 0;e.push(new D.A({symbol:t,label:o,value:y,description:u}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:i,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!t&&!i||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!r),a=n.map((e=>{const{symbol:t,label:r,value:i,description:n}=e,[a,l,u]=o?i?.toString()?.split(s||"")||[]:[i];return new C({symbol:t,label:r,description:n,values:[new x({value:a,value2:l,value3:u})]})})),l=[new V({classes:a})];e&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:s,arcade:n,timeZone:o}=t??{};let a=this._cache.compiledFunc;const l=n.arcadeUtils;if(!a){const e=l.createSyntaxTree(this.valueExpression);a=l.createFunction(e),this._cache.compiledFunc=a}const u=l.executeFunction(a,l.createExecContext(e,l.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),o));return this._valueInfoMap[u+""]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(this.field2){const e=this.field2,s=this.field3,n=[];t&&n.push(r[t]),e&&n.push(r[e]),s&&n.push(r[s]),i=n.join(this.fieldDelimiter||"")}else t&&(i=r[t]);return this._valueInfoMap[i+""]}static fromPortalStyle(e,t){const r=new j(t?.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t?.portal||b.A.getDefault());const i=r.populateFromStyle();return i.catch((t=>{R().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",t)})),i}static fromStyleUrl(e,t){const r=new j(t?.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch((t=>{R().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",t)})),i}};(0,i._)([(0,p.MZ)({readOnly:!0})],q.prototype,"_cache",null),(0,i._)([(0,d.e)({uniqueValue:"unique-value"})],q.prototype,"type",void 0),(0,i._)([(0,p.MZ)(_.As)],q.prototype,"backgroundFillSymbol",void 0),(0,i._)([(0,p.MZ)({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],q.prototype,"field",null),(0,i._)([(0,c.w)("field")],q.prototype,"castField",null),(0,i._)([(0,f.K)("field")],q.prototype,"writeField",null),(0,i._)([(0,p.MZ)({type:String,value:null,json:{write:!0}})],q.prototype,"field2",null),(0,i._)([(0,p.MZ)({type:String,value:null,json:{write:!0}})],q.prototype,"field3",null),(0,i._)([(0,p.MZ)({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],q.prototype,"orderByClassesEnabled",void 0),(0,i._)([(0,p.MZ)({type:String,value:null,json:{write:!0}})],q.prototype,"valueExpression",null),(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],q.prototype,"valueExpressionTitle",void 0),(0,i._)([(0,p.MZ)({type:M.q,json:{write:!0}})],q.prototype,"legendOptions",void 0),(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],q.prototype,"defaultLabel",void 0),(0,i._)([(0,p.MZ)((0,l.$N)({..._.z4},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],q.prototype,"defaultSymbol",null),(0,i._)([(0,p.MZ)({type:String,value:null,json:{write:!0}})],q.prototype,"fieldDelimiter",null),(0,i._)([(0,p.MZ)({type:b.A,readOnly:!0})],q.prototype,"portal",void 0),(0,i._)([(0,y.w)("portal",["styleName"])],q.prototype,"readPortal",null),(0,i._)([(0,p.MZ)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],q.prototype,"styleOrigin",void 0),(0,i._)([(0,y.w)("styleOrigin",["styleName","styleUrl"])],q.prototype,"readStyleOrigin",null),(0,i._)([(0,f.K)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],q.prototype,"writeStyleOrigin",null),(0,i._)([(0,p.MZ)({type:[V],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||function(e){const{field1:t,field2:r,field3:i,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=e,a=!(!t||!r);return[{classes:(n??[]).map((e=>{const{symbol:n,label:l,value:u,description:p}=e,[c,d,y]=a?u?.toString()?.split(s||"")||[]:[u],h=[];return(t||o)&&h.push(c),r&&h.push(d),i&&h.push(y),{symbol:n,label:l,values:[h],description:p}}))}]}(t)).map((e=>V.fromJSON(e,r)))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],q.prototype,"uniqueValueGroups",null),(0,i._)([(0,p.MZ)({type:[D.A],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],q.prototype,"uniqueValueInfos",null),q=j=(0,i._)([(0,h.$)(z)],q);const J=q},77056:function(e,t,r){r.d(t,{h:function(){return j}});var i=r(53804),s=r(23502),n=(r(58941),r(40633)),o=(r(13798),r(47332)),a=r(65953),l=r(81392),u=r(53743);const p=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var c,d=r(74843),y=r(64494),h=r(30905),f=r(67888),m=r(59798);let g=c=class extends h.oY{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return(0,m.D)(t.transparency)}writeOpacity(e,t,r){t[r]=(0,m.p)(e)}clone(){return new c({label:this.label,opacity:this.opacity,value:this.value})}};(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],g.prototype,"label",void 0),(0,i._)([(0,s.MZ)({type:Number,json:{type:f.jz,write:{target:"transparency"}}})],g.prototype,"opacity",void 0),(0,i._)([(0,o.w)("opacity",["transparency"])],g.prototype,"readOpacity",null),(0,i._)([(0,l.K)("opacity")],g.prototype,"writeOpacity",null),(0,i._)([(0,s.MZ)({type:Number,json:{write:!0}})],g.prototype,"value",void 0),g=c=(0,i._)([(0,a.$)("esri.renderers.visualVariables.support.OpacityStop")],g);const v=g;var b;let w=b=class extends y.A{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)),this._set("stops",e)}clone(){return new b({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};(0,i._)([(0,s.MZ)({readOnly:!0})],w.prototype,"cache",null),(0,i._)([(0,s.MZ)({type:["opacity"],json:{type:["transparencyInfo"]}})],w.prototype,"type",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],w.prototype,"normalizationField",void 0),(0,i._)([(0,s.MZ)({type:[v],json:{write:!0}})],w.prototype,"stops",null),w=b=(0,i._)([(0,a.$)("esri.renderers.visualVariables.OpacityVariable")],w);const S=w;var _=r(36604),M=r(53096),T=r(83525),A=r(73037),I=r(89001);const x={color:d.A,size:M.A,opacity:S,rotation:_.A},O=new A.J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),N=/^\[([^\]]+)\]$/i;let C=class extends T.A{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e&&e.filter((e=>!!e)),e?.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some((e=>!!e.target))&&e.sort(((e,t)=>{let r=null;return r=e.target===t.target?0:e.target?1:-1,r}));for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,r){const{rotationExpression:i,rotationType:s}=t,o=i?.match(N),a=o?.[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:a})),e)return e.map((e=>{const t=O.read(e.type),i=x[t];i||(n.A.getLogger(this).warn(`Unknown variable type: ${t}`),r?.messages&&r.messages.push(new I.A("visual-variable:unsupported",`visualVariable of type '${t}' is not supported`,{definition:e,context:r})));const s=new i;return s.read(e,r),s}))}writeVariables(e,t){const r=[];for(const i of e){const e=i.toJSON(t);e&&r.push(e)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};(0,i._)([(0,s.MZ)()],C.prototype,"visualVariables",null),C=(0,i._)([(0,a.$)("esri.renderers.visualVariables.VisualVariableFactory")],C);const Z=C,V={base:y.A,key:"type",typeMap:{opacity:S,color:d.A,rotation:_.A,size:M.A}},j=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Z}set visualVariables(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(e,t,r){return this._vvFactory.readVariables(e,t,r)}writeVisualVariables(e,t,r,i){t[r]=this._vvFactory.writeVariables(e,i)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const e of this.visualVariables)if(e.arcadeRequired)return!0;return!1}hasVisualVariables(e,t){return e?this.getVisualVariablesForType(e,t).length>0:this.getVisualVariablesForType("size",t).length>0||this.getVisualVariablesForType("color",t).length>0||this.getVisualVariablesForType("opacity",t).length>0||this.getVisualVariablesForType("rotation",t).length>0}getVisualVariablesForType(e,t){const r=this.visualVariables;return r?r.filter((r=>r.type===e&&("string"==typeof t?r.target===t:!1!==t||!r.target))):[]}async collectVVRequiredFields(e,t){let r=[];this.visualVariables&&(r=r.concat(this.visualVariables));for(const i of r)i&&(i.field&&(0,u.rq)(e,t,i.field),i.normalizationField&&(0,u.rq)(e,t,i.normalizationField),i.valueExpression&&(D(i.valueExpression,e,t)||await(0,u.Dx)(e,t,i.valueExpression)))}};return(0,i._)([(0,s.MZ)({types:[V],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),(0,i._)([(0,o.w)("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),(0,i._)([(0,l.K)("visualVariables")],t.prototype,"writeVisualVariables",null),t=(0,i._)([(0,a.$)("esri.renderers.mixins.VisualVariablesMixin")],t),t};function D(e,t,r){const i=(s=e,s.match(p)?.[1]?.replace(/\\'/g,"'")??null);var s;return null!=i&&((0,u.rq)(t,r,i),!0)}},19563:function(e,t,r){r.d(t,{A:function(){return y}});var i,s=r(53804),n=r(52874),o=r(30905),a=r(40633),l=r(23502),u=r(77560),p=(r(13798),r(58941),r(65953)),c=r(67888);let d=i=class extends o.oY{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return null==e?e:"function"==typeof e?(a.A.getLogger(this).error(".field: field must be a string value"),null):(0,c.GX)(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new i({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,s._)([(0,l.MZ)({type:n.A,json:{type:[Number],write:!0}})],d.prototype,"color",void 0),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],d.prototype,"field",void 0),(0,s._)([(0,u.w)("field")],d.prototype,"castField",null),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0),d=i=(0,s._)([(0,p.$)("esri.renderers.support.AttributeColorInfo")],d);const y=d},53871:function(e,t,r){r.d(t,{A:function(){return F}});var i,s=r(53804),n=r(73037),o=r(30905),a=r(21609),l=r(23502),u=r(67888),p=r(47332),c=r(65953);r(58941),r(40633),r(13798);let d=i=class extends o.oY{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new i({minValue:this.minValue,maxValue:this.maxValue})}};var y;(0,s._)([(0,l.MZ)({type:Number,json:{write:!0}})],d.prototype,"minValue",void 0),(0,s._)([(0,l.MZ)({type:Number,json:{write:!0}})],d.prototype,"maxValue",void 0),d=i=(0,s._)([(0,c.$)("esri.renderers.support.AuthoringInfoClassBreakInfo")],d);let h=y=class extends o.oY{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new y({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,a.o8)(this.classBreakInfos)})}};(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],h.prototype,"field",void 0),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],h.prototype,"normalizationField",void 0),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],h.prototype,"label",void 0),(0,s._)([(0,l.MZ)({type:[d],json:{write:!0}})],h.prototype,"classBreakInfos",void 0),h=y=(0,s._)([(0,c.$)("esri.renderers.support.AuthoringInfoFieldInfo")],h);var f,m=r(77560);let g=f=class extends o.oY{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new f({label:this.label,value:this.value,size:this.size})}};(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],g.prototype,"label",void 0),(0,s._)([(0,l.MZ)({type:Number,json:{write:!0}})],g.prototype,"size",void 0),(0,s._)([(0,l.MZ)({type:Number,json:{write:!0}})],g.prototype,"value",void 0),g=f=(0,s._)([(0,c.$)("esri.renderers.support.AuthoringInfoSizeStop")],g);const v=g;var b;const w=new n.J({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),S=new n.J({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),_={key:e=>"number"==typeof e?"number":"string",typeMap:{number:Number,string:String},base:null},M=["high-to-low","above-and-below","centered-on","extremes"],T=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],A=["seconds","minutes","hours","days","months","years"];let I=b=class extends o.oY{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return"string"==typeof e||"number"==typeof e?e:null}get normalizationField(){return"reference-size"===this.theme?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return"reference-size"===this.theme?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return"reference-size"===this.theme?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return"string"==typeof e||"number"==typeof e?e:null}get sizeStops(){return"reference-size"===this.theme?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return"color"===this.type?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new b({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:(0,a.o8)(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};(0,s._)([(0,l.MZ)({types:_,json:{write:!0}})],I.prototype,"endTime",void 0),(0,s._)([(0,m.w)("endTime")],I.prototype,"castEndTime",null),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],I.prototype,"field",void 0),(0,s._)([(0,l.MZ)({type:Number,json:{write:!0}})],I.prototype,"maxSliderValue",void 0),(0,s._)([(0,l.MZ)({type:Number,json:{write:!0}})],I.prototype,"minSliderValue",void 0),(0,s._)([(0,l.MZ)({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],I.prototype,"normalizationField",null),(0,s._)([(0,l.MZ)({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],I.prototype,"referenceSizeScale",null),(0,s._)([(0,l.MZ)({type:["circle","diamond","hexagon-flat","hexagon-pointy","square"],value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],I.prototype,"referenceSizeSymbolStyle",null),(0,s._)([(0,l.MZ)({types:_,json:{write:!0}})],I.prototype,"startTime",void 0),(0,s._)([(0,m.w)("startTime")],I.prototype,"castStartTime",null),(0,s._)([(0,l.MZ)({type:[v],json:{origins:{"web-scene":{write:!1}},write:!0}})],I.prototype,"sizeStops",null),(0,s._)([(0,l.MZ)({type:w.apiValues,value:null,json:{type:w.jsonValues,read:w.read,write:w.write}})],I.prototype,"style",null),(0,s._)([(0,l.MZ)({type:T,value:null,json:{type:T,origins:{"web-scene":{type:M,write:{writer:(e,t)=>{M.includes(e)&&(t.theme=e)}}}},write:!0}})],I.prototype,"theme",null),(0,s._)([(0,l.MZ)({type:S.apiValues,json:{type:S.jsonValues,read:S.read,write:S.write}})],I.prototype,"type",void 0),(0,s._)([(0,l.MZ)({type:A,json:{type:A,write:!0}})],I.prototype,"units",void 0),I=b=(0,s._)([(0,c.$)("esri.renderers.support.AuthoringInfoVisualVariable")],I);const x=I;var O,N=r(85982);const C=new n.J({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Z=new n.J({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),V=new n.J({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),j=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"];let D=O=class extends o.oY{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?(0,N.r)(e):void 0}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return"flow"===this.type?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new O({classificationMethod:this.classificationMethod,colorRamp:(0,a.o8)(this.colorRamp),fadeRatio:(0,a.o8)(this.fadeRatio),fields:this.fields?.slice(0),field1:(0,a.o8)(this.field1),field2:(0,a.o8)(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};(0,s._)([(0,l.MZ)({type:C.apiValues,value:null,json:{type:C.jsonValues,read:C.read,write:C.write,origins:{"web-document":{default:"manual",type:C.jsonValues,read:C.read,write:C.write}}}})],D.prototype,"classificationMethod",null),(0,s._)([(0,l.MZ)({types:N.g,json:{write:!0}})],D.prototype,"colorRamp",void 0),(0,s._)([(0,p.w)("colorRamp")],D.prototype,"readColorRamp",null),(0,s._)([(0,l.MZ)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],D.prototype,"fadeRatio",void 0),(0,s._)([(0,l.MZ)({type:[String],value:null,json:{write:!0}})],D.prototype,"fields",null),(0,s._)([(0,l.MZ)({type:h,value:null,json:{write:!0}})],D.prototype,"field1",null),(0,s._)([(0,l.MZ)({type:h,value:null,json:{write:!0}})],D.prototype,"field2",null),(0,s._)([(0,l.MZ)({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],D.prototype,"flowTheme",null),(0,s._)([(0,l.MZ)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],D.prototype,"focus",null),(0,s._)([(0,l.MZ)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],D.prototype,"isAutoGenerated",void 0),(0,s._)([(0,l.MZ)({type:Number,value:null,json:{type:u.jz,write:!0}})],D.prototype,"numClasses",null),(0,s._)([(0,l.MZ)({type:j,json:{type:j,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],D.prototype,"lengthUnit",void 0),(0,s._)([(0,l.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],D.prototype,"maxSliderValue",void 0),(0,s._)([(0,l.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],D.prototype,"minSliderValue",void 0),(0,s._)([(0,l.MZ)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],D.prototype,"statistics",null),(0,s._)([(0,l.MZ)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],D.prototype,"standardDeviationInterval",null),(0,s._)([(0,l.MZ)({type:Z.apiValues,value:null,json:{type:Z.jsonValues,read:Z.read,write:Z.write,origins:{"web-scene":{type:V.jsonValues,write:{writer:V.write,overridePolicy:e=>({enabled:"flow"!==e})}}}}})],D.prototype,"type",null),(0,s._)([(0,l.MZ)({type:[x],json:{write:!0}})],D.prototype,"visualVariables",void 0),(0,s._)([(0,l.MZ)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],D.prototype,"univariateSymbolStyle",null),(0,s._)([(0,l.MZ)({type:["high-to-low","above-and-below","above","below"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],D.prototype,"univariateTheme",null),D=O=(0,s._)([(0,c.$)("esri.renderers.support.AuthoringInfo")],D);const F=D},23879:function(e,t,r){r.d(t,{A:function(){return p}});var i,s=r(53804),n=r(30905),o=r(23502),a=(r(58941),r(40633),r(13798),r(65953)),l=r(85336);let u=i=class extends n.oY{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new i({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};(0,s._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,s._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,s._)([(0,o.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],u.prototype,"minValue",void 0),(0,s._)([(0,o.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],u.prototype,"maxValue",void 0),(0,s._)([(0,o.MZ)(l.Wp)],u.prototype,"symbol",void 0),u=i=(0,s._)([(0,a.$)("esri.renderers.support.ClassBreakInfo")],u);const p=u},27419:function(e,t,r){r.d(t,{A:function(){return c}});var i,s=r(53804),n=r(52874),o=r(30905),a=r(23502),l=r(67888),u=(r(13798),r(58941),r(65953));let p=i=class extends o.oY{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new i({color:this.color&&this.color.clone(),ratio:this.ratio})}};(0,s._)([(0,a.MZ)({type:n.A,json:{type:[l.jz],default:null,write:!0}})],p.prototype,"color",void 0),(0,s._)([(0,a.MZ)({type:Number,json:{write:!0}})],p.prototype,"ratio",void 0),p=i=(0,s._)([(0,u.$)("esri.renderers.support.HeatmapColorStop")],p);const c=p},49951:function(e,t,r){r.d(t,{q:function(){return l}});var i,s=r(53804),n=r(30905),o=r(23502),a=(r(58941),r(40633),r(13798),r(65953));let l=i=class extends n.oY{constructor(){super(...arguments),this.title=null}clone(){return new i({title:this.title})}};(0,s._)([(0,o.MZ)({type:String,json:{write:!0}})],l.prototype,"title",void 0),l=i=(0,s._)([(0,a.$)("esri.renderers.support.LegendOptions")],l)},99278:function(e,t,r){r.d(t,{A:function(){return p}});var i,s=r(53804),n=r(30905),o=r(23502),a=(r(58941),r(40633),r(13798),r(65953)),l=r(85336);let u=i=class extends n.oY{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new i({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${e}`}};(0,s._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,s._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,s._)([(0,o.MZ)(l.Wp)],u.prototype,"symbol",void 0),(0,s._)([(0,o.MZ)(l.Ug)],u.prototype,"value",void 0),u=i=(0,s._)([(0,a.$)("esri.renderers.support.UniqueValueInfo")],u);const p=u},85336:function(e,t,r){r.d(t,{As:function(){return c},Ug:function(){return d},Wp:function(){return p},z4:function(){return u}});var i=r(10748),s=r(34194),n=r(51575),o=r(8404),a=r(34563),l=r(15186);const u={types:i.xK,json:{write:{writer:o.M9},origins:{"web-scene":{types:i.On,write:{writer:o.M9},read:{reader:(0,n.C)({types:i.On})}}}}},p=(0,s.$N)({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},u),c={types:{base:a.A,key:"type",typeMap:{"simple-fill":i.Es.typeMap["simple-fill"],"picture-fill":i.Es.typeMap["picture-fill"],"polygon-3d":i.Es.typeMap["polygon-3d"]}},json:{write:{writer:o.M9},origins:{"web-scene":{type:l.A,write:{writer:o.M9}}}}},d={cast:e=>null==e||"string"==typeof e||"number"==typeof e?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}}},70181:function(e,t,r){r.d(t,{O3:function(){return c},PU:function(){return u},YW:function(){return y},ex:function(){return a},hv:function(){return d},zp:function(){return l}});var i=r(15774),s=r(13520),n=r(33400),o=r(41546);const a=2.4;function l(e){return(0,s.PN)(e*a)}function u(e){return(0,s.Lz)(e)/a}function p(e,t,r,s){let{color:o,ratio:a}=t,{color:l,ratio:u}=r;if(u===a){const e=1e-6;1===u?a-=e:u+=e}const p=(0,i.qE)((s-a)/(u-a),0,1);(0,n.l)(e,o.toArray(),l.toArray(),p)}function c(e){const t=new Uint8ClampedArray(2048);if((e=e.filter((({ratio:e})=>e>=0&&e<=1)).sort(((e,t)=>e.ratio-t.ratio)).map((({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)})))).length<1)return t;let r=e[0],i=e[0],s=1;const n=(0,o.vt)();for(let o=0;o<512;o++){const a=(o+.5)/512;for(;a>i.ratio&&s<e.length;)r=i,i=e[s++];p(n,r,i,a),t.set(n,4*o)}return t}function d(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function y(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},6537:function(e,t,r){r.d(t,{L:function(){return l},r:function(){return o}});var i=r(89001),s=r(51575),n=r(31315);function o(e,t){return l(e,null,t)}const a=(0,s.C)({types:n.H});function l(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(r?.messages&&r.messages.push(new i.A("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):a(e,t,r):null}},31315:function(e,t,r){r.d(t,{H:function(){return d},X:function(){return y}});var i=r(40633),s=r(74865),n=r(1526),o=r(96173),a=r(52308),l=r(60189),u=r(30047),p=r(27777),c=r(61065);const d={key:"type",base:u.A,typeMap:{heatmap:a.A,simple:p.A,"unique-value":c.A,"class-breaks":s.A,"dot-density":o.A,dictionary:n.A,"pie-chart":l.A},errorContext:"renderer"},y={key:"type",base:u.A,typeMap:{simple:p.A,"unique-value":c.A,"class-breaks":s.A,heatmap:a.A},errorContext:"renderer",validate:function(e){switch(e.type){case"simple":return function(e){if(e.symbol)return e;i.A.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}(e);case"unique-value":return function(e){const t=e.uniqueValueInfos,r=t?.filter((({symbol:e,label:t},r)=>(e||i.A.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${r}] ${t}) without a symbol from web scene.`),!!e)));return r?.length!==t?.length&&(e.uniqueValueInfos=r),e}(e);case"class-breaks":return function(e){const t=e.classBreakInfos,r=t?.filter((({symbol:e,label:t},r)=>(e||i.A.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${r}] ${t}) without a symbol from web scene.`),!!e)));return r?.length!==t?.length&&(e.classBreakInfos=r),e}(e);case"heatmap":return e}}}},74843:function(e,t,r){r.d(t,{A:function(){return p}});var i,s=r(53804),n=r(23502),o=(r(58941),r(40633),r(13798),r(65953)),a=r(64494),l=r(71859);let u=i=class extends a.A{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)),this._set("stops",e)}clone(){return new i({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};(0,s._)([(0,n.MZ)({readOnly:!0})],u.prototype,"cache",null),(0,s._)([(0,n.MZ)({type:["color"],json:{type:["colorInfo"]}})],u.prototype,"type",void 0),(0,s._)([(0,n.MZ)({type:String,json:{write:!0}})],u.prototype,"normalizationField",void 0),(0,s._)([(0,n.MZ)({type:[l.A],json:{write:!0}})],u.prototype,"stops",null),u=i=(0,s._)([(0,o.$)("esri.renderers.visualVariables.ColorVariable")],u);const p=u},36604:function(e,t,r){r.d(t,{A:function(){return c}});var i,s=r(53804),n=r(39819),o=r(23502),a=(r(58941),r(40633),r(13798),r(65953)),l=r(81392),u=r(64494);let p=i=class extends u.A{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,r,i){if(i?.messages){const e=`visualVariables[${this.index}]`;i.messages.push(new n.A("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:e+".valueExpressionTitle",context:i}))}}clone(){return new i({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};(0,s._)([(0,o.MZ)({readOnly:!0})],p.prototype,"cache",null),(0,s._)([(0,o.MZ)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],p.prototype,"axis",void 0),(0,s._)([(0,o.MZ)({type:["rotation"],json:{type:["rotationInfo"]}})],p.prototype,"type",void 0),(0,s._)([(0,o.MZ)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],p.prototype,"rotationType",void 0),(0,s._)([(0,o.MZ)({type:String,json:{write:!0}})],p.prototype,"valueExpressionTitle",void 0),(0,s._)([(0,l.K)("web-scene","valueExpressionTitle")],p.prototype,"writeValueExpressionTitleWebScene",null),p=i=(0,s._)([(0,a.$)("esri.renderers.visualVariables.RotationVariable")],p);const c=p},53096:function(e,t,r){r.d(t,{A:function(){return x}});var i,s=r(53804),n=r(39819),o=r(73037),a=r(40633),l=r(23502),u=r(77560),p=r(47332),c=r(65953),d=r(81392),y=r(64494),h=r(13520),f=r(59423),m=(r(58941),r(13798),r(96893));let g=i=class extends m.A{constructor(){super(...arguments),this.customValues=null}clone(){return new i({title:this.title,showLegend:this.showLegend,customValues:this.customValues?.slice(0)})}};(0,s._)([(0,l.MZ)({type:[Number],json:{write:!0}})],g.prototype,"customValues",void 0),g=i=(0,s._)([(0,c.$)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],g);const v=g;var b,w=r(32974),S=r(70481);const _=new o.J({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),M=new o.J({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function T(e){if(null!=e)return"string"==typeof e||"number"==typeof e?function(e){return(0,h.cr)(e)}(e):"size"===e.type?(0,w.of)(e)?e:(delete(e={...e}).type,new I(e)):void 0}function A(e,t,r){if("object"!=typeof e)return e;const i=new I;return i.read(e,r),i}let I=b=class extends y.A{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:null!=this.valueExpression&&S.viewScaleRE.test(this.valueExpression)}}set index(e){(0,w.of)(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),(0,w.of)(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return(0,w.eh)(this)}set maxDataValue(e){e&&this.stops&&(a.A.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(a.A.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return T(e)}readMaxSize(e,t,r){return A(e,0,r)}set minDataValue(e){e&&this.stops&&(a.A.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(a.A.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return T(e)}readMinSize(e,t,r){return A(e,0,r)}get arcadeRequired(){return!!this.valueExpression||null!=this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||null!=this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)):e&&(a.A.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return(0,w.KZ)(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if("$view.scale"===e){if(i?.messages){const e=this.index,t="string"==typeof e?e:`visualVariables[${e}]`;i.messages.push(new n.A("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:t+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?M.read(e):null}clone(){return new b({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,w.of)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,w.of)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===w._w.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===w._w.Stops){const e=this.stops;if(!e)return this;const t=e.map((e=>e.size)).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map((e=>e.value||0))}};(0,s._)([(0,l.MZ)({readOnly:!0})],I.prototype,"cache",null),(0,s._)([(0,l.MZ)({type:_.apiValues,json:{type:_.jsonValues,origins:{"web-map":{read:!1}},read:_.read,write:_.write}})],I.prototype,"axis",void 0),(0,s._)([(0,l.MZ)()],I.prototype,"index",null),(0,s._)([(0,l.MZ)({type:String,readOnly:!0})],I.prototype,"inputValueType",null),(0,s._)([(0,l.MZ)({type:v,json:{write:!0}})],I.prototype,"legendOptions",void 0),(0,s._)([(0,l.MZ)({type:Number,value:null,json:{write:!0}})],I.prototype,"maxDataValue",null),(0,s._)([(0,l.MZ)({type:Number,value:null,json:{write:!0}})],I.prototype,"maxSize",null),(0,s._)([(0,u.w)("maxSize")],I.prototype,"castMaxSize",null),(0,s._)([(0,p.w)("maxSize")],I.prototype,"readMaxSize",null),(0,s._)([(0,l.MZ)({type:Number,value:null,json:{write:!0}})],I.prototype,"minDataValue",null),(0,s._)([(0,l.MZ)({type:Number,value:null,json:{write:!0}})],I.prototype,"minSize",null),(0,s._)([(0,u.w)("minSize")],I.prototype,"castMinSize",null),(0,s._)([(0,p.w)("minSize")],I.prototype,"readMinSize",null),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],I.prototype,"normalizationField",void 0),(0,s._)([(0,l.MZ)({readOnly:!0})],I.prototype,"arcadeRequired",null),(0,s._)([(0,l.MZ)({type:String})],I.prototype,"scaleBy",void 0),(0,s._)([(0,l.MZ)({type:[f.A],value:null,json:{write:!0}})],I.prototype,"stops",null),(0,s._)([(0,l.MZ)({type:["outline"],json:{write:!0}})],I.prototype,"target",void 0),(0,s._)([(0,l.MZ)({type:String,readOnly:!0})],I.prototype,"transformationType",null),(0,s._)([(0,l.MZ)({type:["size"],json:{type:["sizeInfo"]}})],I.prototype,"type",void 0),(0,s._)([(0,l.MZ)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],I.prototype,"useSymbolValue",void 0),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],I.prototype,"valueExpression",void 0),(0,s._)([(0,p.w)("valueExpression",["valueExpression","expression"])],I.prototype,"readValueExpression",null),(0,s._)([(0,d.K)("web-scene","valueExpression")],I.prototype,"writeValueExpressionWebScene",null),(0,s._)([(0,l.MZ)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],I.prototype,"valueRepresentation",void 0),(0,s._)([(0,l.MZ)({type:M.apiValues,json:{write:M.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],I.prototype,"valueUnit",void 0),(0,s._)([(0,p.w)("valueUnit")],I.prototype,"readValueUnit",null),I=b=(0,s._)([(0,c.$)("esri.renderers.visualVariables.SizeVariable")],I);const x=I},64494:function(e,t,r){r.d(t,{A:function(){return h}});var i=r(53804),s=r(73037),n=r(30905),o=r(40633),a=r(23502),l=r(77560),u=r(65953),p=r(67888),c=r(96893);const d=new s.J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let y=class extends n.oY{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return null==e?e:"function"==typeof e?(o.A.getLogger(this).error(".field: field must be a string value"),null):(0,p.GX)(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,i._)([(0,a.MZ)()],y.prototype,"index",void 0),(0,i._)([(0,a.MZ)({type:d.apiValues,readOnly:!0,json:{read:d.read,write:d.write}})],y.prototype,"type",void 0),(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],y.prototype,"field",void 0),(0,i._)([(0,l.w)("field")],y.prototype,"castField",null),(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],y.prototype,"valueExpression",void 0),(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],y.prototype,"valueExpressionTitle",void 0),(0,i._)([(0,a.MZ)({readOnly:!0})],y.prototype,"arcadeRequired",null),(0,i._)([(0,a.MZ)({type:c.A,json:{write:!0}})],y.prototype,"legendOptions",void 0),y=(0,i._)([(0,u.$)("esri.renderers.visualVariables.VisualVariable")],y);const h=y},71859:function(e,t,r){r.d(t,{A:function(){return d}});var i,s=r(53804),n=r(52874),o=r(30905),a=r(23502),l=r(67888),u=(r(13798),r(58941),r(65953)),p=r(81392);let c=i=class extends o.oY{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new i({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,s._)([(0,a.MZ)({type:n.A,json:{type:[l.jz],write:!0}})],c.prototype,"color",void 0),(0,s._)([(0,a.MZ)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,s._)([(0,a.MZ)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],c.prototype,"value",void 0),(0,s._)([(0,p.K)("value")],c.prototype,"writeValue",null),c=i=(0,s._)([(0,u.$)("esri.renderers.visualVariables.support.ColorStop")],c);const d=c},59423:function(e,t,r){r.d(t,{A:function(){return p}});var i,s=r(53804),n=r(30905),o=r(13520),a=r(23502),l=(r(58941),r(40633),r(13798),r(65953));let u=i=class extends n.oY{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new i({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};(0,s._)([(0,a.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,s._)([(0,a.MZ)({type:Number,cast:o.cr,json:{write:!0}})],u.prototype,"size",void 0),(0,s._)([(0,a.MZ)({type:Number,json:{write:!0}})],u.prototype,"value",void 0),(0,s._)([(0,a.MZ)({type:Boolean,json:{write:!1}})],u.prototype,"useMinValue",void 0),(0,s._)([(0,a.MZ)({type:Boolean,json:{write:!1}})],u.prototype,"useMaxValue",void 0),u=i=(0,s._)([(0,l.$)("esri.renderers.visualVariables.support.SizeStop")],u);const p=u},96893:function(e,t,r){r.d(t,{A:function(){return u}});var i,s=r(53804),n=r(23502),o=(r(58941),r(40633),r(13798),r(65953)),a=r(49951);let l=i=class extends a.q{constructor(){super(...arguments),this.showLegend=null}clone(){return new i({title:this.title,showLegend:this.showLegend})}};(0,s._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],l.prototype,"showLegend",void 0),l=i=(0,s._)([(0,o.$)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],l);const u=l},32974:function(e,t,r){var i,s;function n(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function o(e){return null!=e&&!isNaN(e)&&isFinite(e)}function a(e){return e.valueExpression?i.Expression:e.field&&"string"==typeof e.field?i.Field:i.Unknown}function l(e,t){const r=t||a(e),n=e.valueUnit||"unknown";return r===i.Unknown?s.Constant:e.stops?s.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?s.ClampedLinear:"unknown"===n?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?s.Proportional:s.Additive:s.Identity:s.RealWorldSize}r.d(t,{KZ:function(){return l},Yf:function(){return i},_w:function(){return s},eh:function(){return a},gf:function(){return o},of:function(){return n}}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(i||(i={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(s||(s={}))},70481:function(e,t,r){r.r(t),r.d(t,{getAllSizes:function(){return A},getColor:function(){return f},getOpacity:function(){return m},getRotationAngle:function(){return g},getSize:function(){return v},getSizeForValue:function(){return S},getSizeFromNumberOrVariable:function(){return b},getSizeRangeAtScale:function(){return _},getVisualVariableValues:function(){return M},viewScaleRE:function(){return h}});var i=r(52874),s=r(59469),n=r(82547),o=r(40633),a=r(85031),l=r(32974);const u=()=>o.A.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),p=e=>u().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),c=()=>u().error("Use of arcade expressions requires an arcade context"),d=new s.default,y=Math.PI,h=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function f(e,t,r){const s="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"color"===e.type)):e;if(!s)return;if("esri.renderers.visualVariables.ColorVariable"!==s.declaredClass)return void p("ColorVariable");const n="number"==typeof t,o=n?null:t,a=o?.attributes;let l=n?t:null;const u=s.field,{ipData:d,hasExpression:y}=s.cache;let h=s.cache.compiledFunc;if(!u&&!y){const e=s.stops;return e&&e[0]&&e[0].color}if("number"!=typeof l)if(y){if(null==r?.arcade)return void c();const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,i=t.getViewInfo(e),n=t.createExecContext(o,i,r.timeZone);if(!h){const e=t.createSyntaxTree(s.valueExpression);h=t.createFunction(e),s.cache.compiledFunc=h}l=t.executeFunction(h,n)}else a&&(l=a[u]);const f=s.normalizationField,m=null!=a&&null!=f?parseFloat(a[f]):void 0;if(null!=l&&(!f||n||!isNaN(m)&&0!==m)){isNaN(m)||n||(l/=m);const e=T(l,d);if(e){const t=e[0],n=e[1],o=t===n?s.stops[t].color:i.A.blendColors(s.stops[t].color,s.stops[n].color,e[2],null!=r?r.color:void 0);return new i.A(o)}}}function m(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"opacity"===e.type)):e;if(!i)return;if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void p("OpacityVariable");const s="number"==typeof t,n=s?null:t,o=n?.attributes;let a=s?t:null;const l=i.field,{ipData:u,hasExpression:d}=i.cache;let y=i.cache.compiledFunc;if(!l&&!d){const e=i.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof a)if(d){if(null==r?.arcade)return void c();const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,s=t.getViewInfo(e),o=t.createExecContext(n,s,r.timeZone);if(!y){const e=t.createSyntaxTree(i.valueExpression);y=t.createFunction(e),i.cache.compiledFunc=y}a=t.executeFunction(y,o)}else o&&(a=o[l]);const h=i.normalizationField,f=null!=o&&null!=h?parseFloat(o[h]):void 0;if(null!=a&&(!h||s||!isNaN(f)&&0!==f)){isNaN(f)||s||(a/=f);const e=T(a,u);if(e){const t=e[0],r=e[1];if(t===r)return i.stops[t].opacity;{const s=i.stops[t].opacity;return s+(i.stops[r].opacity-s)*e[2]}}}}function g(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"rotation"===e.type)):e;if(!i)return;if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void p("RotationVariable");const s=i.axis||"heading",n="heading"===s&&"arithmetic"===i.rotationType?90:0,o="heading"===s&&"arithmetic"===i.rotationType?-1:1,a="number"==typeof t?null:t,l=a?.attributes,u=i.field,{hasExpression:d}=i.cache;let y=i.cache.compiledFunc,h=0;if(!u&&!d)return h;if(d){if(null==r?.arcade)return void c();const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,s=t.getViewInfo(e),n=t.createExecContext(a,s,r.timeZone);if(!y){const e=t.createSyntaxTree(i.valueExpression);y=t.createFunction(e),i.cache.compiledFunc=y}h=t.executeFunction(y,n)}else l&&(h=l[u]||0);return h="number"!=typeof h||isNaN(h)?null:n+o*h,h}function v(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"size"===e.type)):e;if(!i)return;if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void p("SizeVariable");const s=S(function(e,t,r){const i="number"==typeof t,s=i?null:t,n=s?.attributes;let o=i?t:null;const{isScaleDriven:a}=e.cache;let u=e.cache.compiledFunc;if(a){const t=null!=r?r.scale:void 0,i=null!=r?r.view:void 0;o=null==t||"3d"===i?function(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):t}else if(!i)switch(e.inputValueType){case l.Yf.Expression:{if(null==r?.arcade)return void c();const t={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},i=r.arcade.arcadeUtils,n=i.getViewInfo(t),a=i.createExecContext(s,n,r.timeZone);if(!u){const t=i.createSyntaxTree(e.valueExpression);u=i.createFunction(t),e.cache.compiledFunc=u}o=i.executeFunction(u,a);break}case l.Yf.Field:n&&(o=n[e.field]);break;case l.Yf.Unknown:o=null}if(!(0,l.gf)(o))return null;if(i||!e.normalizationField)return o;const p=n?parseFloat(n[e.normalizationField]):null;return(0,l.gf)(p)&&0!==p?o/p:null}(i,t,r),i,t,r,i.cache.ipData);return null==s||isNaN(s)?0:s}function b(e,t,r){return null==e?null:(0,l.of)(e)?v(e,t,r):(0,l.gf)(e)?e:null}function w(e,t,r){return(0,l.gf)(r)&&e>r?r:(0,l.gf)(t)&&e<t?t:e}function S(e,t,r,i,s){switch(t.transformationType){case l._w.Additive:return function(e,t,r,i){return e+((b(t.minSize,r,i)||t.minDataValue)??0)}(e,t,r,i);case l._w.Constant:return function(e,t,r){const i=e.stops;let s=i?.length&&i[0].size;return null==s&&(s=e.minSize),b(s,t,r)}(t,r,i);case l._w.ClampedLinear:return function(e,t,r,i){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=b(t.minSize,r,i),o=b(t.maxSize,r,i),a=null!=i?i.shape:void 0;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return o;if(null==n||null==o)return null;if("area"===t.scaleBy&&a){const e="circle"===a,t=e?y*(n/2)**2:n*n,r=t+s*((e?y*(o/2)**2:o*o)-t);return e?2*Math.sqrt(r/y):Math.sqrt(r)}return n+s*(o-n)}(e,t,r,i);case l._w.Proportional:return function(e,t,r,i){const s=null!=i?i.shape:void 0,n=e/t.minDataValue,o=b(t.minSize,r,i),a=b(t.maxSize,r,i);let l=null;return l="circle"===s?2*Math.sqrt(n*(o/2)**2):"square"===s||"diamond"===s||"image"===s?Math.sqrt(n*o**2):n*o,w(l,o,a)}(e,t,r,i);case l._w.Stops:return function(e,t,r,i,s){const[n,o,a]=T(e,s);if(n===o)return b(t.stops?.[n].size,r,i);{const e=b(t.stops?.[n].size,r,i);return e+(b(t.stops?.[o].size,r,i)-e)*a}}(e,t,r,i,s);case l._w.RealWorldSize:return function(e,t,r,i){const s=(i?.resolution??1)*a.j[t.valueUnit],n=b(t.minSize,r,i),o=b(t.maxSize,r,i),{valueRepresentation:l}=t;let u=null;return u="area"===l?2*Math.sqrt(e/y)/s:"radius"===l||"distance"===l?2*e/s:e/s,w(u,n,o)}(e,t,r,i);case l._w.Identity:return e;case l._w.Unknown:return null}}function _(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&"3d"===r||t))return null;const s={scale:t,view:r};let n=b(e.minSize,d,s),o=b(e.maxSize,d,s);if(null!=n||null!=o){if(n>o){const e=o;o=n,n=e}return{minSize:n,maxSize:o}}}function M(e,t,r){if(!e.visualVariables)return;const i=[],s=[],n=[],o=[],a=[];for(const t of e.visualVariables)switch(t.type){case"color":s.push(t);break;case"opacity":n.push(t);break;case"rotation":a.push(t);break;case"size":o.push(t)}return s.forEach((e=>{const s=f(e,t,r);i.push({variable:e,value:s})})),n.forEach((e=>{const s=m(e,t,r);i.push({variable:e,value:s})})),a.forEach((e=>{const s=g(e,t,r);i.push({variable:e,value:s})})),o.forEach((e=>{const s=v(e,t,r);i.push({variable:e,value:s})})),i.filter((e=>null!=e.value))}function T(e,t){if(!t)return;let r=0,i=t.length-1;return t.some(((t,s)=>e<t?(i=s,!0):(r=s,!1))),[r,i,(e-t[r])/(t[i]-t[r])]}function A(e,t,r){const i=["proportional","proportional","proportional"];for(const s of e){const e=s.useSymbolValue?"symbol-value":v(s,t,r);switch(s.axis){case"width":i[0]=e;break;case"depth":i[1]=e;break;case"height":i[2]=e;break;case"width-and-depth":i[0]=e,i[1]=e;break;case"all":case void 0:case null:i[0]=e,i[1]=e,i[2]=e;break;default:(0,n.Xb)(s.axis)}}return i}},26765:function(e,t,r){r.d(t,{V:function(){return n},X:function(){return s}});var i=r(74697);function s(e){return{geometryType:(0,i.$B)(e[0]),geometries:e.map((e=>e.toJSON()))}}function n(e,t,r){const s=(0,i.xD)(t);return e.map((e=>{const t=s.fromJSON(e);return t.spatialReference=r,t}))}},78703:function(e,t,r){r.d(t,{Zn:function(){return l},aZ:function(){return o},lh:function(){return s},nA:function(){return a},p3:function(){return n},r9:function(){return u}});var i=r(66062);function s(e,t){if(null==e)return null;const r={},s=new RegExp(`^${t}`,"i");for(const n of Object.keys(e))if(s.test(n)){const s=n.substring(t.length);r[i.et.fromJSON(s)]=e[n]}return r}function n(e,t,r){if(null!=e){t.attributes||(t.attributes={});for(const s in e){const n=i.et.toJSON(s);t.attributes[`${r}${n}`]=e[s]}}}function o(e){const t={};for(const r of Object.keys(e)){const s=r;t[i.et.fromJSON(s)]=e[r]}return t}function a(e){const t={};for(const r of Object.keys(e)){const s=r;t[i.et.toJSON(s)]=e[r]}return t}function l(e,t){return null==e||null==t?null:Math.round((e-t)/6e4)}function u(e){const t=e.toJSON(),r=t;return r.accumulateAttributeNames&&=t.accumulateAttributeNames?.join(),r.attributeParameterValues&&=JSON.stringify(t.attributeParameterValues),r.barriers&&=JSON.stringify(t.barriers),r.outSR&&=t.outSR?.wkid,r.overrides&&=JSON.stringify(t.overrides),r.polygonBarriers&&=JSON.stringify(t.polygonBarriers),r.polylineBarriers&&=JSON.stringify(t.polylineBarriers),r.restrictionAttributeNames&&=t.restrictionAttributeNames?.join(),r.stops&&=JSON.stringify(t.stops),r.travelMode&&=JSON.stringify(t.travelMode),r}},30698:function(e,t,r){r.d(t,{A:function(){return y}});var i,s=r(53804),n=r(52874),o=r(21609),a=r(23502),l=r(67888),u=r(74376),p=r(65953),c=r(9035);let d=i=class extends c.A{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new i({fromColor:(0,o.o8)(this.fromColor),toColor:(0,o.o8)(this.toColor),algorithm:this.algorithm})}};(0,s._)([(0,u.e)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],d.prototype,"algorithm",void 0),(0,s._)([(0,a.MZ)({type:n.A,json:{type:[l.jz],write:!0}})],d.prototype,"fromColor",void 0),(0,s._)([(0,a.MZ)({type:n.A,json:{type:[l.jz],write:!0}})],d.prototype,"toColor",void 0),(0,s._)([(0,a.MZ)({type:["algorithmic"]})],d.prototype,"type",void 0),d=i=(0,s._)([(0,p.$)("esri.rest.support.AlgorithmicColorRamp")],d);const y=d},9035:function(e,t,r){r.d(t,{A:function(){return l}});var i=r(53804),s=r(30905),n=r(23502),o=(r(58941),r(40633),r(13798),r(65953));let a=class extends s.oY{constructor(e){super(e),this.type=null}};(0,i._)([(0,n.MZ)({readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=(0,i._)([(0,o.$)("esri.rest.support.ColorRamp")],a);const l=a},24227:function(e,t,r){r.d(t,{A:function(){return f}});var i,s=r(53804),n=r(59469),o=r(90473),a=r(10748),l=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(65953)),d=r(91508),y=r(66062);let h=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.directionLineType=null,this.directionPointId=null,this.distance=null,this.duration=null,this.fromLevel=null,this.geometry=null,this.objectId=null,this.popupTemplate=null,this.symbol=null,this.toLevel=null,this.type="direction-line"}static fromGraphic(e){return new i({directionLineType:y.gD.fromJSON(e.attributes.DirectionLineType),directionPointId:e.attributes.DirectionPointID,distance:e.attributes.Meters,duration:e.attributes.Minutes,fromLevel:e.attributes.FromLevel??null,geometry:e.geometry,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,symbol:e.symbol,toLevel:e.attributes.ToLevel??null})}toGraphic(){const e={ObjectID:this.objectId,DirectionLineType:null!=this.directionLineType?y.gD.toJSON(this.directionLineType):null,DirectionPointID:this.directionPointId,Meters:this.distance,Minutes:this.duration};return null!=this.fromLevel&&(e.FromLevel=this.fromLevel),null!=this.toLevel&&(e.ToLevel=this.toLevel),new n.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};h.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"DirectionLineType",alias:"Line Type",type:"esriFieldTypeInteger"},{name:"DirectionPointID",alias:"Direction Point ID",type:"esriFieldTypeInteger"},{name:"FromLevel",alias:"From Level",type:"esriFieldTypeInteger"},{name:"Meters",alias:"Meters",type:"esriFieldTypeDouble"},{name:"Minutes",alias:"Minutes",type:"esriFieldTypeDouble"},{name:"ToLevel",alias:"To Level",type:"esriFieldTypeInteger"}],(0,s._)([(0,p.MZ)({type:y.gD.apiValues,json:{read:{source:"attributes.DirectionLineType",reader:y.gD.read}}})],h.prototype,"directionLineType",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.DirectionPointID"}}})],h.prototype,"directionPointId",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.Meters"}}})],h.prototype,"distance",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.Minutes"}}})],h.prototype,"duration",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.FromLevel"}}})],h.prototype,"fromLevel",void 0),(0,s._)([(0,p.MZ)({type:d.A})],h.prototype,"geometry",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.ObjectID"}}})],h.prototype,"objectId",void 0),(0,s._)([(0,p.MZ)({type:o.A})],h.prototype,"popupTemplate",void 0),(0,s._)([(0,p.MZ)({types:a.Es})],h.prototype,"symbol",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.ToLevel"}}})],h.prototype,"toLevel",void 0),(0,s._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],h.prototype,"type",void 0),h=i=(0,s._)([(0,c.$)("esri.rest.support.DirectionLine")],h);const f=h},49359:function(e,t,r){r.d(t,{A:function(){return m}});var i,s=r(53804),n=r(59469),o=r(90473),a=r(10748),l=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(47332)),d=r(65953),y=r(45532),h=r(66062);let f=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.alternateName=null,this.arrivalTime=null,this.arrivalTimeOffset=null,this.azimuth=null,this.branchName=null,this.directionPointType=null,this.displayText=null,this.exitName=null,this.geometry=null,this.intersectingName=null,this.level=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.sequence=null,this.shortVoiceInstruction=null,this.stopId=null,this.symbol=null,this.towardName=null,this.type="direction-point",this.voiceInstruction=null}readArrivalTime(e,t){return null!=t.attributes.ArrivalTime?new Date(t.attributes.ArrivalTime):null}static fromGraphic(e){return new i({alternateName:e.attributes.AlternateName??null,arrivalTime:null!=e.attributes.ArrivalTime?new Date(e.attributes.ArrivalTime):null,arrivalTimeOffset:e.attributes.ArrivalUTCOffset??null,azimuth:e.attributes.Azimuth??null,branchName:e.attributes.BranchName??null,directionPointType:h._6.fromJSON(e.attributes.DirectionPointType),displayText:e.attributes.DisplayText??null,exitName:e.attributes.ExitName??null,geometry:e.geometry,intersectingName:e.attributes.IntersectingName??null,level:e.attributes.Level??null,name:e.attributes.Name??null,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,sequence:e.attributes.Sequence,shortVoiceInstruction:e.attributes.ShortVoiceInstruction??null,stopId:e.attributes.StopID??null,symbol:e.symbol,towardName:e.attributes.TowardName??null,voiceInstruction:e.attributes.VoiceInstruction??null})}toGraphic(){const e={ObjectID:this.objectId,DirectionPointType:null!=this.directionPointType?h._6.toJSON(this.directionPointType):null,Sequence:this.sequence,StopID:this.stopId};return null!=this.alternateName&&(e.AlternateName=this.alternateName),null!=this.arrivalTime&&(e.ArrivalTime=this.arrivalTime.getTime()),null!=this.arrivalTimeOffset&&(e.ArrivalUTCOffset=this.arrivalTimeOffset),null!=this.azimuth&&(e.Azimuth=this.azimuth),null!=this.branchName&&(e.BranchName=this.branchName),null!=this.displayText&&(e.DisplayText=this.displayText),null!=this.exitName&&(e.ExitName=this.exitName),null!=this.intersectingName&&(e.IntersectingName=this.intersectingName),null!=this.level&&(e.Level=this.level),null!=this.name&&(e.Name=this.name),null!=this.shortVoiceInstruction&&(e.ShortVoiceInstruction=this.shortVoiceInstruction),null!=this.towardName&&(e.TowardName=this.towardName),null!=this.voiceInstruction&&(e.VoiceInstruction=this.voiceInstruction),new n.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};f.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"AlternateName",alias:"Alternative Name",type:"esriFieldTypeString"},{name:"ArrivalTime",alias:"Arrival Time",type:"esriFieldTypeDate"},{name:"ArrivalUTCOffset",alias:"Arrival Time Offset",type:"esriFieldTypeInteger"},{name:"Azimuth",alias:"Azimuth",type:"esriFieldTypeDouble"},{name:"BranchName",alias:"Branch Name",type:"esriFieldTypeString"},{name:"DirectionPointType",alias:"Directions Point Type",type:"esriFieldTypeInteger"},{name:"DisplayText",alias:"Display Text",type:"esriFieldTypeString"},{name:"ExitName",alias:"Exit Name",type:"esriFieldTypeString"},{name:"IntersectingName",alias:"Intersecting Name",type:"esriFieldTypeString"},{name:"Level",alias:"Level",type:"esriFieldTypeInteger"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"Sequence",alias:"Sequence",type:"esriFieldTypeInteger"},{name:"ShortVoiceInstruction",alias:"Short Voice Instruction",type:"esriFieldTypeString"},{name:"StopID",alias:"Stop ID",type:"esriFieldTypeInteger"},{name:"TowardName",alias:"Toward Name",type:"esriFieldTypeString"},{name:"VoiceInstruction",alias:"Voice Instruction",type:"esriFieldTypeString"}],(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.AlternateName"}}})],f.prototype,"alternateName",void 0),(0,s._)([(0,p.MZ)()],f.prototype,"arrivalTime",void 0),(0,s._)([(0,c.w)("arrivalTime",["attributes.ArrivalTime"])],f.prototype,"readArrivalTime",null),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.ArrivalUTCOffset"}}})],f.prototype,"arrivalTimeOffset",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.Azimuth"}}})],f.prototype,"azimuth",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.BranchName"}}})],f.prototype,"branchName",void 0),(0,s._)([(0,p.MZ)({type:h._6.apiValues,json:{read:{source:"attributes.DirectionPointType",reader:h._6.read}}})],f.prototype,"directionPointType",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.DisplayText"}}})],f.prototype,"displayText",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.ExitName"}}})],f.prototype,"exitName",void 0),(0,s._)([(0,p.MZ)({type:y.default})],f.prototype,"geometry",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.IntersectingName"}}})],f.prototype,"intersectingName",void 0),(0,s._)([(0,p.MZ)()],f.prototype,"level",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.Name"}}})],f.prototype,"name",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.ObjectID"}}})],f.prototype,"objectId",void 0),(0,s._)([(0,p.MZ)({type:o.A})],f.prototype,"popupTemplate",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.Sequence"}}})],f.prototype,"sequence",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.ShortVoiceInstruction"}}})],f.prototype,"shortVoiceInstruction",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.StopID"}}})],f.prototype,"stopId",void 0),(0,s._)([(0,p.MZ)({types:a.Es})],f.prototype,"symbol",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.TowardName"}}})],f.prototype,"towardName",void 0),(0,s._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],f.prototype,"type",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.VoiceInstruction"}}})],f.prototype,"voiceInstruction",void 0),f=i=(0,s._)([(0,d.$)("esri.rest.support.DirectionPoint")],f);const m=f},51084:function(e,t,r){r.d(t,{A:function(){return b}});var i,s=r(53804),n=r(50917),o=r(59469),a=r(73037),l=r(30905),u=r(21609),p=r(23502),c=(r(58941),r(40633),r(47332)),d=r(65953),y=r(81392),h=r(57165),f=r(74697),m=r(56740);const g=new a.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let v=i=class extends l.oY{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=h.A.fromJSON(t.spatialReference),i=[];for(let t=0;t<e.length;t++){const s=e[t],n=o.default.fromJSON(s),a=s.geometry?.spatialReference;null==n.geometry||a||(n.geometry.spatialReference=r);const l=s.aggregateGeometries,u=n.aggregateGeometries;if(l&&null!=u)for(const e in u){const t=u[e],i=l[e],s=i?.spatialReference;null==t||s||(t.spatialReference=r)}i.push(n)}return i}writeGeometryType(e,t,r,i){if(e)return void g.write(e,t,r,i);const{features:s}=this;if(s)for(const e of s)if(null!=e?.geometry)return void g.write(e.geometry.type,t,r,i)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=(0,f.rS)(e);return i&&!r&&t.spatialReference&&(i.spatialReference=h.A.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new i(this.cloneProperties())}cloneProperties(){return(0,u.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const t=e?.[r];i.geometry=t?.toJSON()||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,s]}=e,n=this.features,o=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-i)/t)),(e=>Math.round((s-e)/r)));for(let e=0,t=n.length;e<t;e++)o?.(n[e].geometry)||(n.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,s],scale:[n,o]}=r;let a=null,l=null;if(this.hasZ&&null!=r?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=r;a=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=r;l=r=>null==r?r:r*t+e}const u=this._getHydrationFunction(e,(e=>e*n+i),(e=>s-e*o),a,l);for(const{geometry:e}of t)null!=e&&u&&u(e);return this.transform=null,this}_quantizePoints(e,t,r){let i,s;const n=[];for(let o=0,a=e.length;o<a;o++){const a=e[o];if(o>0){const e=t(a[0]),o=r(a[1]);e===i&&o===s||(n.push([e-i,o-s]),i=e,s=o)}else i=t(a[0]),s=r(a[1]),n.push([i,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const i=(0,f.Bi)(e)?e.rings:e.paths,s=[];for(let e=0,n=i.length;e<n;e++){const n=i[e],o=this._quantizePoints(n,t,r);o&&s.push(o)}return s.length>0?((0,f.Bi)(e)?e.rings=s:e.paths=s,e):null}:"multipoint"===e?e=>{const i=this._quantizePoints(e.points,t,r);return i&&i.length>0?(e.points=i,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,i,s){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),i&&(e.z=i(e.z))}:"polyline"===e||"polygon"===e?e=>{const n=(0,f.Bi)(e)?e.rings:e.paths;let o,a;for(let e=0,i=n.length;e<i;e++){const i=n[e];for(let e=0,s=i.length;e<s;e++){const s=i[e];e>0?(o+=s[0],a+=s[1]):(o=s[0],a=s[1]),s[0]=t(o),s[1]=r(a)}}if(i&&s)for(let e=0,t=n.length;e<t;e++){const t=n[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=i(r[2]),r[3]=s(r[3])}}else if(i)for(let e=0,t=n.length;e<t;e++){const t=n[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=i(r[2])}}else if(s)for(let e=0,t=n.length;e<t;e++){const t=n[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=s(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),i&&null!=e.zmax&&null!=e.zmin&&(e.zmax=i(e.zmax),e.zmin=i(e.zmin)),s&&null!=e.mmax&&null!=e.mmin&&(e.mmax=s(e.mmax),e.mmin=s(e.mmin))}:"multipoint"===e?e=>{const n=e.points;let o,a;for(let e=0,i=n.length;e<i;e++){const i=n[e];e>0?(o+=i[0],a+=i[1]):(o=i[0],a=i[1]),i[0]=t(o),i[1]=r(a)}if(i&&s)for(let e=0,t=n.length;e<t;e++){const t=n[e];t[2]=i(t[2]),t[3]=s(t[3])}else if(i)for(let e=0,t=n.length;e<t;e++){const t=n[e];t[2]=i(t[2])}else if(s)for(let e=0,t=n.length;e<t;e++){const t=n[e];t[2]=s(t[2])}}:null}};(0,s._)([(0,p.MZ)({type:String,json:{write:!0}})],v.prototype,"displayFieldName",void 0),(0,s._)([(0,p.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"exceededTransferLimit",void 0),(0,s._)([(0,p.MZ)({type:[o.default],json:{write:!0}})],v.prototype,"features",void 0),(0,s._)([(0,c.w)("features")],v.prototype,"readFeatures",null),(0,s._)([(0,p.MZ)({type:[m.A],json:{write:!0}})],v.prototype,"fields",void 0),(0,s._)([(0,p.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],v.prototype,"geometryType",void 0),(0,s._)([(0,y.K)("geometryType")],v.prototype,"writeGeometryType",null),(0,s._)([(0,p.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"hasM",void 0),(0,s._)([(0,p.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"hasZ",void 0),(0,s._)([(0,p.MZ)({types:n.yR,json:{write:!0}})],v.prototype,"queryGeometry",void 0),(0,s._)([(0,c.w)("queryGeometry")],v.prototype,"readQueryGeometry",null),(0,s._)([(0,p.MZ)({type:h.A,json:{write:!0}})],v.prototype,"spatialReference",void 0),(0,s._)([(0,y.K)("spatialReference")],v.prototype,"writeSpatialReference",null),(0,s._)([(0,p.MZ)({json:{write:!0}})],v.prototype,"transform",void 0),v=i=(0,s._)([(0,d.$)("esri.rest.support.FeatureSet")],v),v.prototype.toJSON.isDefaultToJSON=!0;const b=v},96245:function(e,t,r){r.d(t,{A:function(){return c}});var i,s=r(53804),n=r(21609),o=r(23502),a=(r(58941),r(40633),r(65953)),l=r(30698),u=r(9035);let p=i=class extends u.A{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new i({colorRamps:(0,n.o8)(this.colorRamps)})}};(0,s._)([(0,o.MZ)({type:[l.A],json:{write:!0}})],p.prototype,"colorRamps",void 0),(0,s._)([(0,o.MZ)({type:["multipart"]})],p.prototype,"type",void 0),p=i=(0,s._)([(0,a.$)("esri.rest.support.MultipartColorRamp")],p);const c=p},93887:function(e,t,r){r.d(t,{A:function(){return v}});var i,s=r(53804),n=r(59469),o=r(90473),a=r(10748),l=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(47332)),d=r(65953),y=r(81392),h=r(45532),f=r(78703),m=r(66062);let g=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.addedCost=null,this.barrierType=null,this.costs=null,this.curbApproach=null,this.fullEdge=null,this.geometry=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.sideOfEdge=null,this.sourceId=null,this.sourceOid=null,this.status=null,this.symbol=null,this.type="point-barrier"}readCosts(e,t){return(0,f.lh)(t.attributes,"Attr_")}writeCosts(e,t){(0,f.p3)(e,t,"Attr_")}static fromGraphic(e){return new i({addedCost:e.attributes.AddedCost??null,barrierType:null!=e.attributes.BarrierType?m.iM.fromJSON(e.attributes.BarrierType):null,costs:null!=e.attributes.Costs?(0,f.aZ)(JSON.parse(e.attributes.Costs)):null,curbApproach:null!=e.attributes.CurbApproach?m.JJ.fromJSON(e.attributes.CurbApproach):null,fullEdge:null!=e.attributes.FullEdge?m.fe.fromJSON(e.attributes.FullEdge):null,geometry:e.geometry,name:e.attributes.Name??null,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,status:null!=e.attributes.Status?m.$r.fromJSON(e.attributes.Status):null,symbol:e.symbol})}toGraphic(){const e={ObjectID:this.objectId,AddedCost:this.addedCost,BarrierType:null!=this.barrierType?m.iM.toJSON(this.barrierType):null,Costs:null!=this.costs?JSON.stringify((0,f.nA)(this.costs)):null,CurbApproach:null!=this.curbApproach?m.JJ.toJSON(this.curbApproach):null,FullEdge:null!=this.fullEdge?m.fe.toJSON(this.fullEdge):null,Name:this.name,Status:null!=this.status?m.$r.toJSON(this.status):null};return new n.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};g.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"AddedCost",alias:"Added Cost",type:"esriFieldTypeDouble"},{name:"BarrierType",alias:"Barrier Type",type:"esriFieldTypeInteger"},{name:"Costs",alias:"Costs",type:"esriFieldTypeString"},{name:"CurbApproach",alias:"Curb Approach",type:"esriFieldTypeInteger"},{name:"FullEdge",alias:"Full Edge",type:"esriFieldTypeInteger"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"Status",alias:"Status",type:"esriFieldTypeInteger"}],(0,s._)([(0,p.MZ)()],g.prototype,"addedCost",void 0),(0,s._)([(0,p.MZ)({type:m.iM.apiValues,json:{name:"attributes.BarrierType",read:{reader:m.iM.read},write:{writer:m.iM.write}}})],g.prototype,"barrierType",void 0),(0,s._)([(0,p.MZ)()],g.prototype,"costs",void 0),(0,s._)([(0,c.w)("costs",["attributes"])],g.prototype,"readCosts",null),(0,s._)([(0,y.K)("costs")],g.prototype,"writeCosts",null),(0,s._)([(0,p.MZ)({constructOnly:!0,type:m.JJ.apiValues,json:{read:{source:"attributes.CurbApproach",reader:m.JJ.read}}})],g.prototype,"curbApproach",void 0),(0,s._)([(0,p.MZ)({type:m.fe.apiValues,json:{name:"attributes.FullEdge",read:{reader:m.fe.read},write:{writer:m.fe.write}}})],g.prototype,"fullEdge",void 0),(0,s._)([(0,p.MZ)({type:h.default,json:{write:!0}})],g.prototype,"geometry",void 0),(0,s._)([(0,p.MZ)({json:{name:"attributes.Name"}})],g.prototype,"name",void 0),(0,s._)([(0,p.MZ)({json:{name:"attributes.ObjectID"}})],g.prototype,"objectId",void 0),(0,s._)([(0,p.MZ)({type:o.A})],g.prototype,"popupTemplate",void 0),(0,s._)([(0,p.MZ)({type:m.mt.apiValues,json:{read:{source:"attributes.SideOfEdge",reader:m.mt.read}}})],g.prototype,"sideOfEdge",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.SourceID"}}})],g.prototype,"sourceId",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.SourceOID"}}})],g.prototype,"sourceOid",void 0),(0,s._)([(0,p.MZ)({type:m.$r.apiValues,json:{read:{source:"attributes.Status",reader:m.$r.read}}})],g.prototype,"status",void 0),(0,s._)([(0,p.MZ)({types:a.Es})],g.prototype,"symbol",void 0),(0,s._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],g.prototype,"type",void 0),g=i=(0,s._)([(0,d.$)("esri.rest.support.PointBarrier")],g);const v=g},29335:function(e,t,r){r.d(t,{A:function(){return v}});var i,s=r(53804),n=r(59469),o=r(90473),a=r(10748),l=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(47332)),d=r(65953),y=r(81392),h=r(44740),f=r(78703),m=r(66062);let g=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.barrierType=null,this.costs=null,this.geometry=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.scaleFactor=null,this.symbol=null,this.type="polygon-barrier"}readCosts(e,t){return(0,f.lh)(t.attributes,"Attr_")}writeCosts(e,t){(0,f.p3)(e,t,"Attr_")}static fromGraphic(e){return new i({barrierType:null!=e.attributes.BarrierType?m.iM.fromJSON(e.attributes.BarrierType):null,costs:null!=e.attributes.Costs?(0,f.aZ)(JSON.parse(e.attributes.Costs)):null,geometry:e.geometry,name:e.attributes.Name??null,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,scaleFactor:e.attributes.ScaleFactor??null,symbol:e.symbol})}toGraphic(){const e={ObjectID:this.objectId,BarrierType:null!=this.barrierType?m.iM.toJSON(this.barrierType):null,Costs:null!=this.costs?JSON.stringify((0,f.nA)(this.costs)):null,Name:this.name??null,ScaleFactor:this.scaleFactor??null};return new n.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};g.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"BarrierType",alias:"Barrier Type",type:"esriFieldTypeInteger"},{name:"Costs",alias:"Costs",type:"esriFieldTypeString"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"ScaleFactor",alias:"Scale Factor",type:"esriFieldTypeDouble"}],(0,s._)([(0,p.MZ)({type:m.iM.apiValues,json:{name:"attributes.BarrierType",read:{reader:m.iM.read},write:{writer:m.iM.write}}})],g.prototype,"barrierType",void 0),(0,s._)([(0,p.MZ)()],g.prototype,"costs",void 0),(0,s._)([(0,c.w)("costs",["attributes"])],g.prototype,"readCosts",null),(0,s._)([(0,y.K)("costs")],g.prototype,"writeCosts",null),(0,s._)([(0,p.MZ)({type:h.A,json:{write:!0}})],g.prototype,"geometry",void 0),(0,s._)([(0,p.MZ)({json:{name:"attributes.Name"}})],g.prototype,"name",void 0),(0,s._)([(0,p.MZ)({json:{name:"attributes.ObjectID"}})],g.prototype,"objectId",void 0),(0,s._)([(0,p.MZ)({type:o.A})],g.prototype,"popupTemplate",void 0),(0,s._)([(0,p.MZ)()],g.prototype,"scaleFactor",void 0),(0,s._)([(0,p.MZ)({types:a.Es})],g.prototype,"symbol",void 0),(0,s._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],g.prototype,"type",void 0),g=i=(0,s._)([(0,d.$)("esri.rest.support.PolygonBarrier")],g);const v=g},55339:function(e,t,r){r.d(t,{A:function(){return g}});var i,s=r(53804),n=r(59469),o=r(90473),a=r(10748),l=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(47332)),d=r(65953),y=r(91508),h=r(78703),f=r(66062);let m=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.barrierType=null,this.costs=null,this.geometry=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.scaleFactor=null,this.symbol=null,this.type="polyline-barrier"}readCosts(e,t){return(0,h.lh)(t.attributes,"Attr_")}static fromGraphic(e){return new i({barrierType:null!=e.attributes.BarrierType?f.iM.fromJSON(e.attributes.BarrierType):null,costs:null!=e.attributes.Costs?(0,h.aZ)(JSON.parse(e.attributes.Costs)):null,geometry:e.geometry,name:e.attributes.Name??null,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,scaleFactor:e.attributes.ScaleFactor??null,symbol:e.symbol})}toGraphic(){const e={ObjectID:this.objectId,BarrierType:null!=this.barrierType?f.iM.toJSON(this.barrierType):null,Costs:null!=this.costs?JSON.stringify((0,h.nA)(this.costs)):null,Name:this.name,ScaleFactor:this.scaleFactor};return new n.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};m.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"BarrierType",alias:"Barrier Type",type:"esriFieldTypeInteger"},{name:"Costs",alias:"Costs",type:"esriFieldTypeString"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"ScaleFactor",alias:"Scale Factor",type:"esriFieldTypeDouble"}],(0,s._)([(0,p.MZ)({type:f.iM.apiValues,json:{read:{source:"attributes.BarrierType",reader:f.iM.read}}})],m.prototype,"barrierType",void 0),(0,s._)([(0,p.MZ)()],m.prototype,"costs",void 0),(0,s._)([(0,c.w)("costs",["attributes"])],m.prototype,"readCosts",null),(0,s._)([(0,p.MZ)({type:y.A,json:{write:!0}})],m.prototype,"geometry",void 0),(0,s._)([(0,p.MZ)({json:{name:"attributes.Name"}})],m.prototype,"name",void 0),(0,s._)([(0,p.MZ)({json:{name:"attributes.ObjectID"}})],m.prototype,"objectId",void 0),(0,s._)([(0,p.MZ)({type:o.A})],m.prototype,"popupTemplate",void 0),(0,s._)([(0,p.MZ)()],m.prototype,"scaleFactor",void 0),(0,s._)([(0,p.MZ)({types:a.Es})],m.prototype,"symbol",void 0),(0,s._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],m.prototype,"type",void 0),m=i=(0,s._)([(0,d.$)("esri.rest.support.PolylineBarrier")],m);const g=m},63253:function(e,t,r){r.d(t,{A:function(){return g}});var i,s=r(53804),n=r(59469),o=r(90473),a=r(10748),l=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(47332)),d=r(65953),y=r(91508),h=r(78703),f=r(28940);let m=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.analysisSettings=null,this.endTime=null,this.endTimeOffset=null,this.firstStopId=null,this.geometry=null,this.lastStopId=null,this.messages=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.startTime=null,this.startTimeOffset=null,this.stopCount=null,this.symbol=null,this.totalCosts=null,this.totalDistance=null,this.totalDuration=null,this.totalLateDuration=null,this.totalViolations=null,this.totalWait=null,this.totalWaitDuration=null,this.type="route-info",this.version="1.0.0"}readEndTime(e,t){return null!=t.attributes.EndTimeUTC?new Date(t.attributes.EndTimeUTC):null}readEndTimeOffset(e,t){return(0,h.Zn)(t.attributes.EndTime,t.attributes.EndTimeUTC)}readStartTime(e,t){return null!=t.attributes.StartTimeUTC?new Date(t.attributes.StartTimeUTC):null}readStartTimeOffset(e,t){return(0,h.Zn)(t.attributes.StartTime,t.attributes.StartTimeUTC)}readTotalCosts(e,t){return(0,h.lh)(t.attributes,"Total_")}readTotalViolations(e,t){return(0,h.lh)(t.attributes,"TotalViolation_")}readTotalWait(e,t){return(0,h.lh)(t.attributes,"TotalWait_")}static fromGraphic(e){return new i({analysisSettings:null!=e.attributes.AnalysisSettings?f.A.fromJSON(JSON.parse(e.attributes.AnalysisSettings)):null,endTime:null!=e.attributes.EndTime?new Date(e.attributes.EndTime):null,endTimeOffset:e.attributes.EndUTCOffset??null,geometry:e.geometry,messages:null!=e.attributes.Messages?JSON.parse(e.attributes.Messages):null,name:e.attributes.RouteName,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,startTime:null!=e.attributes.StartTime?new Date(e.attributes.StartTime):null,startTimeOffset:e.attributes.StartUTCOffset??null,symbol:e.symbol,totalCosts:null!=e.attributes.TotalCosts?(0,h.aZ)(JSON.parse(e.attributes.TotalCosts)):null,totalDistance:e.attributes.TotalMeters??null,totalDuration:e.attributes.TotalMinutes??null,totalLateDuration:e.attributes.TotalLateMinutes??null,totalWaitDuration:e.attributes.TotalWaitMinutes??null,version:e.attributes.Version})}toGraphic(){const e={ObjectID:this.objectId,AnalysisSettings:null!=this.analysisSettings?JSON.stringify(this.analysisSettings.toJSON()):null,EndTime:null!=this.endTime?this.endTime.getTime():null,EndUTCOffset:this.endTimeOffset,Messages:null!=this.messages?JSON.stringify(this.messages):null,RouteName:this.name,StartTime:null!=this.startTime?this.startTime.getTime():null,StartUTCOffset:this.startTimeOffset,TotalCosts:null!=this.totalCosts?JSON.stringify((0,h.nA)(this.totalCosts)):null,TotalLateMinutes:this.totalLateDuration,TotalMeters:this.totalDistance,TotalMinutes:this.totalDuration,TotalWaitMinutes:this.totalWaitDuration,Version:this.version};return new n.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};m.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"AnalysisSettings",alias:"Analysis Settings",type:"esriFieldTypeString"},{name:"EndTime",alias:"End Time",type:"esriFieldTypeDate"},{name:"EndUTCOffset",alias:"End Time Offset",type:"esriFieldTypeInteger"},{name:"Messages",alias:"Messages",type:"esriFieldTypeString"},{name:"RouteName",alias:"Route Name",type:"esriFieldTypeString"},{name:"StartTime",alias:"Start Time",type:"esriFieldTypeDate"},{name:"StartUTCOffset",alias:"Start Time Offset",type:"esriFieldTypeInteger"},{name:"TotalCosts",alias:"Total Costs",type:"esriFieldTypeString"},{name:"TotalLateMinutes",alias:"Total Late Minutes",type:"esriFieldTypeDouble"},{name:"TotalMeters",alias:"Total Meters",type:"esriFieldTypeDouble"},{name:"TotalMinutes",alias:"Total Minutes",type:"esriFieldTypeDouble"},{name:"TotalWaitMinutes",alias:"Total Wait Minutes",type:"esriFieldTypeDouble"},{name:"Version",alias:"Version",type:"esriFieldTypeString"}],(0,s._)([(0,p.MZ)()],m.prototype,"analysisSettings",void 0),(0,s._)([(0,p.MZ)()],m.prototype,"endTime",void 0),(0,s._)([(0,c.w)("endTime",["attributes.EndTimeUTC"])],m.prototype,"readEndTime",null),(0,s._)([(0,p.MZ)()],m.prototype,"endTimeOffset",void 0),(0,s._)([(0,c.w)("endTimeOffset",["attributes.EndTime","attributes.EndTimeUTC"])],m.prototype,"readEndTimeOffset",null),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.FirstStopID"}}})],m.prototype,"firstStopId",void 0),(0,s._)([(0,p.MZ)({type:y.A})],m.prototype,"geometry",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.LastStopID"}}})],m.prototype,"lastStopId",void 0),(0,s._)([(0,p.MZ)()],m.prototype,"messages",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.Name"}}})],m.prototype,"name",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.ObjectID"}}})],m.prototype,"objectId",void 0),(0,s._)([(0,p.MZ)({type:o.A})],m.prototype,"popupTemplate",void 0),(0,s._)([(0,p.MZ)()],m.prototype,"startTime",void 0),(0,s._)([(0,c.w)("startTime",["attributes.StartTimeUTC"])],m.prototype,"readStartTime",null),(0,s._)([(0,p.MZ)()],m.prototype,"startTimeOffset",void 0),(0,s._)([(0,c.w)("startTimeOffset",["attributes.StartTime","attributes.StartTimeUTC"])],m.prototype,"readStartTimeOffset",null),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.StopCount"}}})],m.prototype,"stopCount",void 0),(0,s._)([(0,p.MZ)({types:a.Es})],m.prototype,"symbol",void 0),(0,s._)([(0,p.MZ)()],m.prototype,"totalCosts",void 0),(0,s._)([(0,c.w)("totalCosts",["attributes"])],m.prototype,"readTotalCosts",null),(0,s._)([(0,p.MZ)()],m.prototype,"totalDistance",void 0),(0,s._)([(0,p.MZ)()],m.prototype,"totalDuration",void 0),(0,s._)([(0,p.MZ)()],m.prototype,"totalLateDuration",void 0),(0,s._)([(0,p.MZ)()],m.prototype,"totalViolations",void 0),(0,s._)([(0,c.w)("totalViolations",["attributes"])],m.prototype,"readTotalViolations",null),(0,s._)([(0,p.MZ)()],m.prototype,"totalWait",void 0),(0,s._)([(0,c.w)("totalWait",["attributes"])],m.prototype,"readTotalWait",null),(0,s._)([(0,p.MZ)()],m.prototype,"totalWaitDuration",void 0),(0,s._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],m.prototype,"type",void 0),(0,s._)([(0,p.MZ)()],m.prototype,"version",void 0),m=i=(0,s._)([(0,d.$)("esri.rest.support.RouteInfo")],m);const g=m},28940:function(e,t,r){r.d(t,{A:function(){return d}});var i=r(53804),s=r(30905),n=r(23502),o=(r(58941),r(40633),r(13798),r(47332)),a=r(65953),l=r(81392),u=r(66062),p=r(11501);let c=class extends s.oY{constructor(e){super(e),this.accumulateAttributes=null,this.directionsLanguage=null,this.findBestSequence=null,this.preserveFirstStop=null,this.preserveLastStop=null,this.startTimeIsUTC=null,this.timeWindowsAreUTC=null,this.travelMode=null}readAccumulateAttributes(e){return null==e?null:e.map((e=>u.et.fromJSON(e)))}writeAccumulateAttributes(e,t,r){e?.length&&(t[r]=e.map((e=>u.et.toJSON(e))))}};(0,i._)([(0,n.MZ)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],c.prototype,"accumulateAttributes",void 0),(0,i._)([(0,o.w)("accumulateAttributes")],c.prototype,"readAccumulateAttributes",null),(0,i._)([(0,l.K)("accumulateAttributes")],c.prototype,"writeAccumulateAttributes",null),(0,i._)([(0,n.MZ)({type:String,json:{write:!0}})],c.prototype,"directionsLanguage",void 0),(0,i._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"findBestSequence",void 0),(0,i._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"preserveFirstStop",void 0),(0,i._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"preserveLastStop",void 0),(0,i._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"startTimeIsUTC",void 0),(0,i._)([(0,n.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"timeWindowsAreUTC",void 0),(0,i._)([(0,n.MZ)({type:p.A,json:{write:!0}})],c.prototype,"travelMode",void 0),c=(0,i._)([(0,a.$)("esri.rest.support.RouteSettings")],c);const d=c},34258:function(e,t,r){r.d(t,{A:function(){return v}});var i,s=r(53804),n=r(59469),o=r(90473),a=r(10748),l=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(47332)),d=r(65953),y=r(81392),h=r(45532),f=r(78703),m=r(66062);let g=i=class extends((0,l.O)(u.oY)){constructor(e){super(e),this.arriveCurbApproach=null,this.arriveTime=null,this.arriveTimeOffset=null,this.bearing=null,this.bearingTol=null,this.cumulativeCosts=null,this.cumulativeDistance=null,this.cumulativeDuration=null,this.curbApproach=null,this.departCurbApproach=null,this.departTime=null,this.departTimeOffset=null,this.distanceToNetworkInMeters=null,this.geometry=null,this.lateDuration=null,this.locationType=null,this.name=null,this.navLatency=null,this.objectId=null,this.popupTemplate=null,this.posAlong=null,this.routeName=null,this.serviceCosts=null,this.serviceDistance=null,this.serviceDuration=null,this.sequence=null,this.sideOfEdge=null,this.snapX=null,this.snapY=null,this.snapZ=null,this.sourceId=null,this.sourceOid=null,this.status=null,this.symbol=null,this.timeWindowEnd=null,this.timeWindowEndOffset=null,this.timeWindowStart=null,this.timeWindowStartOffset=null,this.type="stop",this.violations=null,this.waitDuration=null,this.wait=null}readArriveTimeOffset(e,t){return(0,f.Zn)(t.attributes.ArriveTime,t.attributes.ArriveTimeUTC)}readCumulativeCosts(e,t){return(0,f.lh)(t.attributes,"Cumul_")}readDepartTimeOffset(e,t){return(0,f.Zn)(t.attributes.DepartTime,t.attributes.DepartTimeUTC)}readServiceCosts(e,t){return(0,f.lh)(t.attributes,"Attr_")}writeServiceCosts(e,t){(0,f.p3)(e,t,"Attr_")}writeTimeWindowEnd(e,t){null!=e&&(t.attributes||(t.attributes={}),t.attributes.TimeWindowEnd=e.getTime())}writeTimeWindowStart(e,t){null!=e&&(t.attributes||(t.attributes={}),t.attributes.TimeWindowStart=e.getTime())}readViolations(e,t){return(0,f.lh)(t.attributes,"Violation_")}readWait(e,t){return(0,f.lh)(t.attributes,"Wait_")}static fromGraphic(e){return new i({arriveCurbApproach:null!=e.attributes.ArrivalCurbApproach?m.JJ.fromJSON(e.attributes.ArrivalCurbApproach):null,arriveTime:null!=e.attributes.ArrivalTime?new Date(e.attributes.ArrivalTime):null,arriveTimeOffset:e.attributes.ArrivalUTCOffset,cumulativeCosts:null!=e.attributes.CumulativeCosts?(0,f.aZ)(JSON.parse(e.attributes.CumulativeCosts)):null,cumulativeDistance:e.attributes.CumulativeMeters??null,cumulativeDuration:e.attributes.CumulativeMinutes??null,curbApproach:null!=e.attributes.CurbApproach?m.JJ.fromJSON(e.attributes.CurbApproach):null,departCurbApproach:null!=e.attributes.DepartureCurbApproach?m.JJ.fromJSON(e.attributes.DepartureCurbApproach):null,departTime:null!=e.attributes.DepartureTime?new Date(e.attributes.DepartureTime):null,departTimeOffset:e.attributes.DepartureUTCOffset??null,geometry:e.geometry,lateDuration:e.attributes.LateMinutes??null,locationType:null!=e.attributes.LocationType?m.EM.fromJSON(e.attributes.LocationType):null,name:e.attributes.Name,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,routeName:e.attributes.RouteName,sequence:e.attributes.Sequence??null,serviceCosts:null!=e.attributes.ServiceCosts?(0,f.aZ)(JSON.parse(e.attributes.ServiceCosts)):null,serviceDistance:e.attributes.ServiceMeters??null,serviceDuration:e.attributes.ServiceMinutes??null,status:null!=e.attributes.Status?m.$r.fromJSON(e.attributes.Status):null,symbol:e.symbol,timeWindowEnd:null!=e.attributes.TimeWindowEnd?new Date(e.attributes.TimeWindowEnd):null,timeWindowEndOffset:e.attributes.TimeWindowEndUTCOffset??null,timeWindowStart:null!=e.attributes.TimeWindowStart?new Date(e.attributes.TimeWindowStart):null,timeWindowStartOffset:e.attributes.TimeWindowStartUTCOffset??null,waitDuration:e.attributes.WaitMinutes??null})}toGraphic(){const e={ObjectID:this.objectId,ArrivalCurbApproach:null!=this.arriveCurbApproach?m.JJ.toJSON(this.arriveCurbApproach):null,ArrivalTime:null!=this.arriveTime?this.arriveTime.getTime():null,ArrivalUTCOffset:this.arriveTimeOffset,CumulativeCosts:null!=this.cumulativeCosts?JSON.stringify((0,f.nA)(this.cumulativeCosts)):null,CumulativeMeters:this.cumulativeDistance,CumulativeMinutes:this.cumulativeDuration,CurbApproach:null!=this.curbApproach?m.JJ.toJSON(this.curbApproach):null,DepartureCurbApproach:null!=this.departCurbApproach?m.JJ.toJSON(this.departCurbApproach):null,DepartureTime:null!=this.departTime?this.departTime.getTime():null,DepartureUTCOffset:this.departTimeOffset,LateMinutes:this.lateDuration,LocationType:null!=this.locationType?m.EM.toJSON(this.locationType):null,Name:this.name,RouteName:this.routeName,Sequence:this.sequence,ServiceCosts:null!=this.serviceCosts?JSON.stringify((0,f.nA)(this.serviceCosts)):null,ServiceMeters:this.serviceDistance,ServiceMinutes:this.serviceDuration,Status:null!=this.status?m.$r.toJSON(this.status):null,TimeWindowEnd:null!=this.timeWindowEnd?this.timeWindowEnd.getTime():null,TimeWindowEndUTCOffset:this.timeWindowEndOffset??this.arriveTimeOffset,TimeWindowStart:null!=this.timeWindowStart?this.timeWindowStart.getTime():null,TimeWindowStartUTCOffset:this.timeWindowStartOffset??this.arriveTimeOffset,WaitMinutes:this.waitDuration};return new n.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};g.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"ArrivalCurbApproach",alias:"Arrival Curb Approach",type:"esriFieldTypeInteger"},{name:"ArrivalTime",alias:"Arrival Time",type:"esriFieldTypeDate"},{name:"ArrivalUTCOffset",alias:"Arrival Time",type:"esriFieldTypeInteger"},{name:"CumulativeCosts",alias:"Cumulative Costs",type:"esriFieldTypeString"},{name:"CumulativeMeters",alias:"Cumulative Meters",type:"esriFieldTypeDouble"},{name:"CumulativeMinutes",alias:"Cumulative Minutes",type:"esriFieldTypeDouble"},{name:"CurbApproach",alias:"Curb Approach",type:"esriFieldTypeInteger"},{name:"DepartureCurbApproach",alias:"Departure Curb Approach",type:"esriFieldTypeInteger"},{name:"DepartureTime",alias:"Departure Time",type:"esriFieldTypeDate"},{name:"DepartureUTCOffset",alias:"Departure Time",type:"esriFieldTypeInteger"},{name:"LateMinutes",alias:"Minutes Late",type:"esriFieldTypeDouble"},{name:"LocationType",alias:"Location Type",type:"esriFieldTypeInteger"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"RouteName",alias:"Route Name",type:"esriFieldTypeString"},{name:"Sequence",alias:"Sequence",type:"esriFieldTypeInteger"},{name:"ServiceCosts",alias:"Service Costs",type:"esriFieldTypeString"},{name:"ServiceMeters",alias:"Service Meters",type:"esriFieldTypeDouble"},{name:"ServiceMinutes",alias:"Service Minutes",type:"esriFieldTypeDouble"},{name:"Status",alias:"Status",type:"esriFieldTypeInteger"},{name:"TimeWindowEnd",alias:"Time Window End",type:"esriFieldTypeDate"},{name:"TimeWindowEndUTCOffset",alias:"Time Window End Offset",type:"esriFieldTypeInteger"},{name:"TimeWindowStart",alias:"Time Window Start",type:"esriFieldTypeDate"},{name:"TimeWindowStartUTCOffset",alias:"Time Window Start Offset",type:"esriFieldTypeInteger"},{name:"WaitMinutes",alias:"Minutes Wait",type:"esriFieldTypeDouble"}],(0,s._)([(0,p.MZ)({type:m.JJ.apiValues,json:{read:{source:"attributes.ArrivalCurbApproach",reader:m.JJ.read}}})],g.prototype,"arriveCurbApproach",void 0),(0,s._)([(0,p.MZ)({type:Date,json:{read:{source:"attributes.ArriveTimeUTC"}}})],g.prototype,"arriveTime",void 0),(0,s._)([(0,p.MZ)()],g.prototype,"arriveTimeOffset",void 0),(0,s._)([(0,c.w)("arriveTimeOffset",["attributes.ArriveTime","attributes.ArriveTimeUTC"])],g.prototype,"readArriveTimeOffset",null),(0,s._)([(0,p.MZ)({json:{name:"attributes.Bearing",read:!1,write:!0}})],g.prototype,"bearing",void 0),(0,s._)([(0,p.MZ)({json:{name:"attributes.BearingTol",read:!1,write:!0}})],g.prototype,"bearingTol",void 0),(0,s._)([(0,p.MZ)()],g.prototype,"cumulativeCosts",void 0),(0,s._)([(0,c.w)("cumulativeCosts",["attributes"])],g.prototype,"readCumulativeCosts",null),(0,s._)([(0,p.MZ)()],g.prototype,"cumulativeDistance",void 0),(0,s._)([(0,p.MZ)()],g.prototype,"cumulativeDuration",void 0),(0,s._)([(0,p.MZ)({type:m.JJ.apiValues,json:{name:"attributes.CurbApproach",read:{reader:m.JJ.read},write:{writer:m.JJ.write}}})],g.prototype,"curbApproach",void 0),(0,s._)([(0,p.MZ)({type:m.JJ.apiValues,json:{read:{source:"attributes.DepartCurbApproach",reader:m.JJ.read}}})],g.prototype,"departCurbApproach",void 0),(0,s._)([(0,p.MZ)({type:Date,json:{read:{source:"attributes.DepartTimeUTC"}}})],g.prototype,"departTime",void 0),(0,s._)([(0,p.MZ)()],g.prototype,"departTimeOffset",void 0),(0,s._)([(0,c.w)("departTimeOffset",["attributes.DepartTime","attributes.DepartTimeUTC"])],g.prototype,"readDepartTimeOffset",null),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.DistanceToNetworkInMeters"}}})],g.prototype,"distanceToNetworkInMeters",void 0),(0,s._)([(0,p.MZ)({type:h.default,json:{write:!0}})],g.prototype,"geometry",void 0),(0,s._)([(0,p.MZ)()],g.prototype,"lateDuration",void 0),(0,s._)([(0,p.MZ)({type:m.EM.apiValues,json:{name:"attributes.LocationType",read:{reader:m.EM.read},write:{writer:m.EM.write}}})],g.prototype,"locationType",void 0),(0,s._)([(0,p.MZ)({json:{name:"attributes.Name"}})],g.prototype,"name",void 0),(0,s._)([(0,p.MZ)({json:{name:"attributes.NavLatency",read:!1,write:!0}})],g.prototype,"navLatency",void 0),(0,s._)([(0,p.MZ)({json:{name:"attributes.ObjectID"}})],g.prototype,"objectId",void 0),(0,s._)([(0,p.MZ)({type:o.A})],g.prototype,"popupTemplate",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.PosAlong"}}})],g.prototype,"posAlong",void 0),(0,s._)([(0,p.MZ)({json:{name:"attributes.RouteName"}})],g.prototype,"routeName",void 0),(0,s._)([(0,p.MZ)()],g.prototype,"serviceCosts",void 0),(0,s._)([(0,c.w)("serviceCosts",["attributes"])],g.prototype,"readServiceCosts",null),(0,s._)([(0,y.K)("serviceCosts")],g.prototype,"writeServiceCosts",null),(0,s._)([(0,p.MZ)()],g.prototype,"serviceDistance",void 0),(0,s._)([(0,p.MZ)()],g.prototype,"serviceDuration",void 0),(0,s._)([(0,p.MZ)({json:{name:"attributes.Sequence"}})],g.prototype,"sequence",void 0),(0,s._)([(0,p.MZ)({type:m.mt.apiValues,json:{read:{source:"attributes.SideOfEdge",reader:m.mt.read}}})],g.prototype,"sideOfEdge",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.SnapX"}}})],g.prototype,"snapX",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.SnapY"}}})],g.prototype,"snapY",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.SnapZ"}}})],g.prototype,"snapZ",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.SourceID"}}})],g.prototype,"sourceId",void 0),(0,s._)([(0,p.MZ)({json:{read:{source:"attributes.SourceOID"}}})],g.prototype,"sourceOid",void 0),(0,s._)([(0,p.MZ)({type:m.$r.apiValues,json:{read:{source:"attributes.Status",reader:m.$r.read}}})],g.prototype,"status",void 0),(0,s._)([(0,p.MZ)({types:a.Es})],g.prototype,"symbol",void 0),(0,s._)([(0,p.MZ)({type:Date,json:{name:"attributes.TimeWindowEnd"}})],g.prototype,"timeWindowEnd",void 0),(0,s._)([(0,y.K)("timeWindowEnd")],g.prototype,"writeTimeWindowEnd",null),(0,s._)([(0,p.MZ)()],g.prototype,"timeWindowEndOffset",void 0),(0,s._)([(0,p.MZ)({type:Date,json:{name:"attributes.TimeWindowStart"}})],g.prototype,"timeWindowStart",void 0),(0,s._)([(0,y.K)("timeWindowStart")],g.prototype,"writeTimeWindowStart",null),(0,s._)([(0,p.MZ)()],g.prototype,"timeWindowStartOffset",void 0),(0,s._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],g.prototype,"type",void 0),(0,s._)([(0,p.MZ)()],g.prototype,"violations",void 0),(0,s._)([(0,c.w)("violations",["attributes"])],g.prototype,"readViolations",null),(0,s._)([(0,p.MZ)()],g.prototype,"waitDuration",void 0),(0,s._)([(0,p.MZ)()],g.prototype,"wait",void 0),(0,s._)([(0,c.w)("wait",["attributes"])],g.prototype,"readWait",null),g=i=(0,s._)([(0,d.$)("esri.rest.support.Stop")],g);const v=g},11501:function(e,t,r){r.d(t,{A:function(){return y}});var i=r(53804),s=r(75743),n=r(30905),o=r(23502),a=(r(58941),r(40633),r(13798),r(74376)),l=r(47332),u=r(65953),p=r(81392),c=r(66062);let d=class extends((0,s.O)(n.oY)){constructor(e){super(e),this.attributeParameterValues=null,this.description=null,this.distanceAttributeName=null,this.id=null,this.impedanceAttributeName=null,this.name=null,this.restrictionAttributeNames=null,this.simplificationTolerance=null,this.simplificationToleranceUnits=null,this.timeAttributeName=null,this.type=null,this.useHierarchy=null,this.uturnAtJunctions=null}readId(e,t){return t.id??t.itemId??null}readRestrictionAttributes(e,t){const{restrictionAttributeNames:r}=t;return null==r?null:r.map((e=>c.OC.fromJSON(e)))}writeRestrictionAttributes(e,t,r){null!=e&&(t[r]=e.map((e=>c.OC.toJSON(e))))}};(0,i._)([(0,o.MZ)({type:[Object],json:{write:!0}})],d.prototype,"attributeParameterValues",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,i._)([(0,a.e)(c.dd,{ignoreUnknown:!1})],d.prototype,"distanceAttributeName",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],d.prototype,"id",void 0),(0,i._)([(0,l.w)("id",["id","itemId"])],d.prototype,"readId",null),(0,i._)([(0,a.e)(c.et,{ignoreUnknown:!1})],d.prototype,"impedanceAttributeName",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],d.prototype,"name",void 0),(0,i._)([(0,o.MZ)({type:[String],json:{write:!0}})],d.prototype,"restrictionAttributeNames",void 0),(0,i._)([(0,l.w)("restrictionAttributeNames")],d.prototype,"readRestrictionAttributes",null),(0,i._)([(0,p.K)("restrictionAttributeNames")],d.prototype,"writeRestrictionAttributes",null),(0,i._)([(0,o.MZ)({type:Number,json:{write:{allowNull:!0}}})],d.prototype,"simplificationTolerance",void 0),(0,i._)([(0,a.e)(c.hY)],d.prototype,"simplificationToleranceUnits",void 0),(0,i._)([(0,a.e)(c.Mm,{ignoreUnknown:!1})],d.prototype,"timeAttributeName",void 0),(0,i._)([(0,a.e)(c.ow)],d.prototype,"type",void 0),(0,i._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],d.prototype,"useHierarchy",void 0),(0,i._)([(0,a.e)(c.hE)],d.prototype,"uturnAtJunctions",void 0),d=(0,i._)([(0,u.$)("esri.rest.support.TravelMode")],d);const y=d},85982:function(e,t,r){r.d(t,{g:function(){return o},r:function(){return a}});var i=r(30698),s=r(9035),n=r(96245);const o={key:"type",base:s.A,typeMap:{algorithmic:i.A,multipart:n.A}};function a(e){return e?.type?"algorithmic"===e.type?i.A.fromJSON(e):"multipart"===e.type?n.A.fromJSON(e):null:null}},66062:function(e,t,r){r.d(t,{$n:function(){return w},$r:function(){return h},EM:function(){return y},Ec:function(){return O},JJ:function(){return d},Mm:function(){return _},OC:function(){return T},Sr:function(){return u},Vj:function(){return I},WU:function(){return x},Z7:function(){return o},_6:function(){return v},aJ:function(){return l},dd:function(){return S},dn:function(){return a},et:function(){return M},fe:function(){return g},gD:function(){return b},hE:function(){return p},hY:function(){return n},iM:function(){return m},mt:function(){return f},ow:function(){return c},vS:function(){return A}});var i=r(73037);const s={esriCentimeters:"centimeters",esriDecimalDegrees:"decimal-degrees",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriPoints:"points",esriUnknownUnits:"unknown",esriYards:"yards"},n=(0,i.O)()(s),o=((0,i.O)()({...s,esriIntFeet:"international-feet",esriIntInches:"international-inches",esriIntMiles:"international-miles",esriIntNauticalMiles:"international-nautical-miles",esriIntYards:"international-yards"}),(0,i.O)()({esriAcres:"international-acres",esriAcresUS:"us-acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-international-feet",esriSquareFeetUS:"square-us-feet",esriSquareInches:"square-international-inches",esriSquareInchesUS:"square-us-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-international-miles",esriSquareMilesUS:"square-us-miles",esriSquareMillimeters:"square-millimeters",esriSquareYards:"square-international-yards",esriSquareYardsUS:"square-us-yards",esriUnknownAreaUnits:"unknown"}),(0,i.O)()({esriNAUCentimeters:"centimeters",esriNAUDecimalDegrees:"decimal-degrees",esriNAUDecimeters:"decimeters",esriNAUFeet:"feet",esriNAUInches:"inches",esriNAUKilometers:"kilometers",esriNAUMeters:"meters",esriNAUMiles:"miles",esriNAUMillimeters:"millimeters",esriNAUNauticalMiles:"nautical-miles",esriNAUPoints:"points",esriNAUYards:"yards"})),a=((0,i.O)()({esriNAUDays:"days",esriNAUHours:"hours",esriNAUMinutes:"minutes",esriNAUSeconds:"seconds"}),(0,i.O)()({esriNAUCentimeters:"centimeters",esriNAUDecimalDegrees:"decimal-degrees",esriNAUDecimeters:"decimeters",esriNAUFeet:"feet",esriNAUInches:"inches",esriNAUKilometers:"kilometers",esriNAUMeters:"meters",esriNAUMiles:"miles",esriNAUMillimeters:"millimeters",esriNAUNauticalMiles:"nautical-miles",esriNAUPoints:"points",esriNAUYards:"yards",esriNAUDays:"days",esriNAUHours:"hours",esriNAUMinutes:"minutes",esriNAUSeconds:"seconds",esriNAUKilometersPerHour:"kilometers-per-hour",esriNAUMilesPerHour:"miles-per-hour",esriNAUUnknown:"unknown"})),l=(0,i.O)()({esriDOTComplete:"complete",esriDOTCompleteNoEvents:"complete-no-events",esriDOTFeatureSets:"featuresets",esriDOTInstructionsOnly:"instructions-only",esriDOTStandard:"standard",esriDOTSummaryOnly:"summary-only"}),u=(0,i.O)()({esriNAOutputLineNone:"none",esriNAOutputLineStraight:"straight",esriNAOutputLineTrueShape:"true-shape",esriNAOutputLineTrueShapeWithMeasure:"true-shape-with-measure"}),p=((0,i.O)()({esriNAOutputPolygonNone:"none",esriNAOutputPolygonSimplified:"simplified",esriNAOutputPolygonDetailed:"detailed"}),(0,i.O)()({esriNFSBAllowBacktrack:"allow-backtrack",esriNFSBAtDeadEndsOnly:"at-dead-ends-only",esriNFSBNoBacktrack:"no-backtrack",esriNFSBAtDeadEndsAndIntersections:"at-dead-ends-and-intersections"})),c=((0,i.O)()({esriNATravelDirectionFromFacility:"from-facility",esriNATravelDirectionToFacility:"to-facility"}),(0,i.O)()({esriNATimeOfDayNotUsed:"not-used",esriNATimeOfDayUseAsStartTime:"start",esriNATimeOfDayUseAsEndTime:"end"}),(0,i.O)()({AUTOMOBILE:"automobile",TRUCK:"truck",WALK:"walk",OTHER:"other"})),d=(0,i.O)()({0:"either-side-of-vehicle",1:"right-side-of-vehicle",2:"left-side-of-vehicle",3:"no-u-turn"},{useNumericKeys:!0}),y=(0,i.O)()({0:"stop",1:"waypoint",2:"break"},{useNumericKeys:!0}),h=(0,i.O)()({0:"ok",1:"not-located",2:"network-element-not-located",3:"element-not-traversable",4:"invalid-field-values",5:"not-reached",6:"time-window-violation",7:"not-located-on-closest"},{useNumericKeys:!0}),f=(0,i.O)()({1:"right",2:"left"},{useNumericKeys:!0}),m=(0,i.O)()({0:"restriction",1:"scaled-cost",2:"added-cost"},{useNumericKeys:!0}),g=(0,i.O)()({0:"permit",1:"restrict"},{useNumericKeys:!0}),v=(0,i.O)()({1:"header",50:"arrive",51:"depart",52:"straight",100:"on-ferry",101:"off-ferry",102:"central-fork",103:"roundabout",104:"u-turn",150:"door",151:"stairs",152:"elevator",153:"escalator",154:"pedestrian-ramp",200:"left-fork",201:"left-ramp",202:"clockwise-roundabout",203:"left-handed-u-turn",204:"bear-left",205:"left-turn",206:"sharp-left",207:"left-turn-and-immediate-left-turn",208:"left-turn-and-immediate-right-turn",300:"right-fork",301:"right-ramp",302:"counter-clockwise-roundabout",303:"right-handed-u-turn",304:"bear-right",305:"right-turn",306:"sharp-right",307:"right-turn-and-immediate-left-turn",308:"right-turn-and-immediate-right-turn",400:"up-elevator",401:"up-escalator",402:"up-stairs",500:"down-elevator",501:"down-escalator",502:"down-stairs",1e3:"general-event",1001:"landmark",1002:"time-zone-change",1003:"traffic-event",1004:"scaled-cost-barrier-event",1005:"boundary-crossing",1006:"restriction-violation",1007:"lane"},{useNumericKeys:!0}),b=(0,i.O)()({0:"unknown",1:"segment",2:"maneuver-segment",3:"restriction-violation",4:"scaled-cost-barrier",5:"heavy-traffic",6:"slow-traffic",7:"moderate-traffic"},{useNumericKeys:!0}),w=(0,i.O)()({"NA Campus":"campus","NA Desktop":"desktop","NA Navigation":"navigation"}),S=(0,i.O)()({Kilometers:"kilometers",Miles:"miles",Meters:"meters"},{ignoreUnknown:!1}),_=(0,i.O)()({Minutes:"minutes",TimeAt1KPH:"time-at-1-kph",TravelTime:"travel-time",TruckMinutes:"truck-minutes",TruckTravelTime:"truck-travel-time",WalkTime:"walk-time"},{ignoreUnknown:!1}),M=(0,i.O)()({Kilometers:"kilometers",Miles:"miles",Meters:"meters",Minutes:"minutes",TimeAt1KPH:"time-at-1-kph",TravelTime:"travel-time",TruckMinutes:"truck-minutes",TruckTravelTime:"truck-travel-time",WalkTime:"walk-time"},{ignoreUnknown:!1}),T=(0,i.O)()({"Any Hazmat Prohibited":"any-hazmat-prohibited","Avoid Carpool Roads":"avoid-carpool-roads","Avoid Express Lanes":"avoid-express-lanes","Avoid Ferries":"avoid-ferries","Avoid Gates":"avoid-gates","Avoid Limited Access Roads":"avoid-limited-access-roads","Avoid Private Roads":"avoid-private-roads","Avoid Roads Unsuitable for Pedestrians":"avoid-roads-unsuitable-for-pedestrians","Avoid Stairways":"avoid-stairways","Avoid Toll Roads":"avoid-toll-roads","Avoid Toll Roads for Trucks":"avoid-toll-roads-for-trucks","Avoid Truck Restricted Roads":"avoid-truck-restricted-roads","Avoid Unpaved Roads":"avoid-unpaved-roads","Axle Count Restriction":"axle-count-restriction","Driving a Bus":"driving-a-bus","Driving a Taxi":"driving-a-taxi","Driving a Truck":"driving-a-truck","Driving an Automobile":"driving-an-automobile","Driving an Emergency Vehicle":"driving-an-emergency-vehicle","Height Restriction":"height-restriction","Kingpin to Rear Axle Length Restriction":"kingpin-to-rear-axle-length-restriction","Length Restriction":"length-restriction","Preferred for Pedestrians":"preferred-for-pedestrians","Riding a Motorcycle":"riding-a-motorcycle","Roads Under Construction Prohibited":"roads-under-construction-prohibited","Semi or Tractor with One or More Trailers Prohibited":"semi-or-tractor-with-one-or-more-trailers-prohibited","Single Axle Vehicles Prohibited":"single-axle-vehicles-prohibited","Tandem Axle Vehicles Prohibited":"tandem-axle-vehicles-prohibited","Through Traffic Prohibited":"through-traffic-prohibited","Truck with Trailers Restriction":"truck-with-trailers-restriction","Use Preferred Hazmat Routes":"use-preferred-hazmat-routes","Use Preferred Truck Routes":"use-preferred-truck-routes",Walking:"walking","Weight Restriction":"weight-restriction"},{ignoreUnknown:!1}),A=(0,i.O)()({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),I=(0,i.O)()({esriGeometryPoint:"point",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"envelope",esriGeometryMultipoint:"multipoint"}),x=(0,i.O)()({esriNAUTCost:"cost",esriNAUTDescriptor:"descriptor",esriNAUTRestriction:"restriction",esriNAUTHierarchy:"hierarchy"}),O=(0,i.O)()({esriDSTAltName:"alt-name",esriDSTArrive:"arrive",esriDSTBranch:"branch",esriDSTCrossStreet:"cross-street",esriDSTCumulativeLength:"cumulative-length",esriDSTDepart:"depart",esriDSTEstimatedArrivalTime:"estimated-arrival-time",esriDSTExit:"exit",esriDSTGeneral:"general",esriDSTLength:"length",esriDSTServiceTime:"service-time",esriDSTStreetName:"street-name",esriDSTSummary:"summary",esriDSTTime:"time",esriDSTTimeWindow:"time-window",esriDSTToward:"toward",esriDSTViolationTime:"violation-time",esriDSTWaitTime:"wait-time"})},39397:function(e,t,r){r.d(t,{Dl:function(){return o},jV:function(){return n},lF:function(){return a}}),r(25591),r(7156);var i=r(21609),s=r(90683);function n(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function o(e){return"string"==typeof e?(0,s.An)(e):(0,i.o8)(e)}function a(e,t,r){const i={};for(const s in e){if("declaredClass"===s)continue;const n=e[s];if(null!=n&&"function"!=typeof n)if(Array.isArray(n))i[s]=n.map((e=>a(e)));else if("object"==typeof n)if(n.toJSON){const e=n.toJSON(r?.[s]);i[s]=t?e:JSON.stringify(e)}else i[s]=t?n:JSON.stringify(n);else i[s]=n}return i}r(48893)},96736:function(e,t,r){r.d(t,{Vd:function(){return s},Vo:function(){return n}});var i=r(58941);const s=()=>!!(0,i.A)("enable-feature:force-wosr"),n=()=>!!(0,i.A)("enable-feature:SceneLayer-editing");((e="i3s-patching")=>{switch(i.A.add("enable-i3s-patching",!1,!0,!0),i.A.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),i.A.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":i.A.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0);break;case"i3s-patching":i.A.add("enable-i3s-patching",!0,!0,!0)}})("i3s-patching")},67895:function(e,t,r){r.d(t,{$:function(){return p}});var i=r(52874),s=r(75505),n=r(21609),o=r(54547),a=r(7590),l=r(16088);const u=e=>{if(!e)return[0,0,0,0];const{r:t,g:r,b:i,a:s}=e;return[t,r,i,255*s]};class p{static findApplicableOverrides(e,t,r){if(e&&t){if(e.primitiveName){let i=!1;for(const t of r)if(t.primitiveName===e.primitiveName){i=!0;break}if(!i)for(const i of t)i.primitiveName===e.primitiveName&&r.push(i)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const i of e.effects)p.findApplicableOverrides(i,t,r);if(e.symbolLayers)for(const i of e.symbolLayers)p.findApplicableOverrides(i,t,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const i of e.effects)p.findApplicableOverrides(i,t,r);if(e.markerPlacement&&p.findApplicableOverrides(e.markerPlacement,t,r),"CIMVectorMarker"===e.type){if(e.markerGraphics)for(const i of e.markerGraphics)p.findApplicableOverrides(i,t,r),p.findApplicableOverrides(i.symbol,t,r)}else"CIMCharacterMarker"===e.type?p.findApplicableOverrides(e.symbol,t,r):"CIMHatchFill"===e.type?p.findApplicableOverrides(e.lineSymbol,t,r):"CIMPictureMarker"===e.type&&p.findApplicableOverrides(e.animatedSymbolProperties,t,r)}}}static findEffectOverrides(e,t){if(!e)return null;if("CIMGeometricEffectDashes"===e.type&&(0,a.K3)(e),!t||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const r=(0,a.rB)(e),i=e.primitiveName,s=[];for(const e of t)e.primitiveName===i&&s.push((0,a.rB)(e));return{type:"cim-effect-param",effect:r,overrides:(0,a.pk)(s)}}static async resolveSymbolOverrides(e,t,r,i,s,o,l){if(!e?.symbol)return null;let{symbol:u,primitiveOverrides:c}=e;const d=!!c;if(!d&&!i)return u;u=(0,n.o8)(u),c=(0,n.o8)(c);let y=!0;if(t||(t={attributes:{}},y=!1),d){if(y||(c=c.filter((e=>!e.valueExpressionInfo?.expression.includes("$feature")))),l||(c=c.filter((e=>!e.valueExpressionInfo?.expression.includes("$view")))),c.length>0){const e={spatialReference:r,fields:(0,a.O2)(t.attributes),geometryType:s};await p.createRenderExpressions(c,e),p.evaluateOverrides(c,t,s??"esriGeometryPoint",o,l)}p.applyOverrides(u,c)}return i&&p.applyDictionaryTextOverrides(u,t,i,null),u}static async createRenderExpressions(e,t){const r=[];for(const i of e){const e=i.valueExpressionInfo;if(!e||p._expressionToRenderExpression.has(e.expression))continue;const s=(0,o.Ad)(e.expression,t.spatialReference,t.fields);r.push(s),s.then((t=>p._expressionToRenderExpression.set(e.expression,t)))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,t,r,i,n){const o={$view:{scale:n?.scale}};for(const n of e){n.value&&"object"==typeof n.value&&(0,s.IB)(n.value)&&("Color"===n.propertyName||"StrokeColor"===n.propertyName)&&(n.value=u(n.value));const e=n.valueExpressionInfo;if(!e)continue;const a=p._expressionToRenderExpression.get(e.expression);a&&(n.value=(0,l.A)(a,t,o,r,i))}}static applyDictionaryTextOverrides(e,t,r,i,s="Normal"){if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const n=e.symbolLayers;if(!n)return;for(const o of n)o&&"CIMVectorMarker"===o.type&&p.applyDictionaryTextOverrides(o,t,r,i,"CIMTextSymbol"===e.type?e.textCase:s)}break;case"CIMVectorMarker":{const s=e.markerGraphics;if(!s)return;for(const e of s)e&&p.applyDictionaryTextOverrides(e,t,r,i)}break;case"CIMMarkerGraphic":{const n=e.textString;if(n&&n.includes("[")){const o=(0,a.gQ)(n,r);e.textString=(0,a.FM)(t,o,i,s)}}}}static applyOverrides(e,t,r,i){if(e.primitiveName)for(const s of t)if(s.primitiveName===e.primitiveName){const t=(0,a.YF)(s.propertyName);if(i&&i.push({cim:e,nocapPropertyName:t,value:e[t]}),r){let t=!1;for(const i of r)i.primitiveName===e.primitiveName&&(t=!0);t||r.push(s)}null!=s.value&&(e[t]=s.value)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const s of e.effects)p.applyOverrides(s,t,r,i);if(e.symbolLayers)for(const s of e.symbolLayers)p.applyOverrides(s,t,r,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const s of e.effects)p.applyOverrides(s,t,r,i);if("CIMVectorMarker"===e.type&&e.markerGraphics)for(const s of e.markerGraphics)p.applyOverrides(s,t,r,i),p.applyOverrides(s.symbol,t,r,i)}}static restoreOverrides(e){for(const t of e)t.cim[t.nocapPropertyName]=t.value}static buildOverrideKey(e){let t="";for(const r of e)void 0!==r.value&&(t+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return t}static toValue(e,t){if("DashTemplate"===e)return t.split(" ").map((e=>Number(e)));if("Color"===e){const e=new i.A(t).toRgba();return e[3]*=255,e}return t}}p._expressionToRenderExpression=new Map},38821:function(e,t,r){r.d(t,{D:function(){return s},K:function(){return i}});const i={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},s={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0}}},7590:function(e,t,r){r.d(t,{$w:function(){return g},Bu:function(){return N},DW:function(){return A},FM:function(){return u},G9:function(){return n},GV:function(){return v},Go:function(){return p},K3:function(){return k},Kn:function(){return M},MM:function(){return y},MO:function(){return P},Nl:function(){return C},Ny:function(){return b},O2:function(){return Z},UE:function(){return V},YC:function(){return R},YF:function(){return D},ZO:function(){return E},_1:function(){return x},_H:function(){return S},_d:function(){return T},bs:function(){return z},e6:function(){return c},gQ:function(){return l},iA:function(){return L},jn:function(){return f},lW:function(){return d},mA:function(){return h},n5:function(){return j},pM:function(){return I},pV:function(){return _},pk:function(){return B},rB:function(){return U},s4:function(){return s},xo:function(){return O},yH:function(){return w},zb:function(){return F},zr:function(){return m}});var i=r(38821);function s(e,t,r,i){return function(e){return"function"==typeof e}(e)?e(t,r,i):e}function n(e){return[e.r,e.g,e.b,e.a]}const o=" /-,\n";function a(e){let t=e.length;for(;t--;)if(!o.includes(e.charAt(t)))return!1;return!0}function l(e,t){const r=[];let i=0,s=-1;do{if(s=e.indexOf("[",i),s>=i){if(s>i){const t=e.substr(i,s-i);r.push([t,null,a(t)])}if(i=s+1,s=e.indexOf("]",i),s>=i){if(s>i){const n=t[e.substr(i,s-i)];n&&r.push([null,n,!1])}i=s+1}}}while(-1!==s);if(i<e.length-1){const t=e.substr(i);r.push([t,null,a(t)])}return r}function u(e,t,r,i){let s="",n=null;for(const i of t){const[t,o,a]=i;if(t)a?n=t:(n&&(s+=n,n=null),s+=t);else{let t=o;null!=r&&(t=P(o,r));const i=e.attributes[t];i&&(n&&(s+=n,n=null),s+=i)}}return function(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(s,i)}function p(e,t,r,i,s,n,o=!0){const a=t/s,l=r/n,u=Math.ceil(a/2),p=Math.ceil(l/2);for(let r=0;r<n;r++)for(let c=0;c<s;c++){const d=4*(c+(o?n-r-1:r)*s);let y=0,h=0,f=0,m=0,g=0,v=0,b=0;const w=(r+.5)*l;for(let i=Math.floor(r*l);i<(r+1)*l;i++){const r=Math.abs(w-(i+.5))/p,s=(c+.5)*a,n=r*r;for(let r=Math.floor(c*a);r<(c+1)*a;r++){let o=Math.abs(s-(r+.5))/u;const a=Math.sqrt(n+o*o);a>=-1&&a<=1&&(y=2*a*a*a-3*a*a+1,y>0&&(o=4*(r+i*t),b+=y*e[o+3],f+=y,e[o+3]<255&&(y=y*e[o+3]/250),m+=y*e[o],g+=y*e[o+1],v+=y*e[o+2],h+=y))}}i[d]=m/h,i[d+1]=g/h,i[d+2]=v/h,i[d+3]=b/f}}function c(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function d(e){return e.data?.symbol??null}function y(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function h(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function f(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function m(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const g=(e,t=0)=>null==e||isNaN(e)?t:e,v=(e,t)=>e??t,b=e=>e.tintColor?c(e.tintColor):[255,255,255,1],w=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function S(){return r.e(4696).then(r.bind(r,28356))}function _(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function M(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function T(e){let t="normal",r="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function A(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function I(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=I(t);if(null!=e)return e}break;case"CIMTextSymbol":return I(e.symbol);case"CIMSolidFill":return e.color}return null}function x(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=x(e);if(null!=t)return t}break}case"CIMTextSymbol":return x(e.symbol);case"CIMSolidStroke":return e.color}}function O(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=O(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return O(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function N(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function C(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function Z(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const V=e=>e.includes("data:image/svg+xml");function j(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function D(e){return e?e.charAt(0).toLowerCase()+e.substring(1):e}function F(e,t,r,i,s,n){const{infos:o}=n;let a=1,l=0,u=0,p=0;for(const{offsetX:e,offsetY:t,rotation:r,size:i,frameHeight:s,rotateClockWise:n}of o)u=J(e,t,l,a,u),p=q(e,t,l,a,p),s&&(a*=i/s),l=G(r,n,l);const c=J(i,s,l,a,u),d=q(i,s,l,a,p);return{size:e*a,rotation:G(t,r,l),offsetX:c,offsetY:d}}function E(e){if(null==e)return!1;if(Array.isArray(e))return e.every((e=>E(e)));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function L(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderlinecolor"===t||"tintcolor"===t)return[...i.K[t]];const r=i.D[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function k(e){return e?.dashTemplate&&"string"==typeof e.dashTemplate&&(e.dashTemplate=e.dashTemplate.split(" ").map(Number)),e}function z(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return z(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return z(e.symbol)}}return"Normal"}function R(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers)for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const e=r.size??i.D.CIMVectorMarker.size;e>t&&(t=e);break}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers)for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=r.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&m(r.markerPlacement)){const e=r.size??i.D.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{const e=r.height;null!=e&&e>t&&(t=e)}}return t}}}function P(e,t){if(null!==t){const r=t.get(e);return r?r.name:e}return e}function B(e){return e.map((e=>({...e,propertyName:D(e.propertyName)})))}function U(e){const t={};for(const r in e){const i=e[r];t[D(r)]=i}return t}function q(e,t,r,i,s){const n=r*Math.PI/180;if(n){const r=Math.cos(n);return(Math.sin(n)*e+r*t)*i+s}return t*i+s}function J(e,t,r,i,s){const n=r*Math.PI/180;return n?(Math.cos(n)*e-Math.sin(n)*t)*i+s:e*i+s}function G(e,t,r){return t?r-e:r+e}},74661:function(e,t,r){r.d(t,{A7:function(){return u},Cx:function(){return p},Hk:function(){return c},JJ:function(){return f},SF:function(){return d},UK:function(){return l},jM:function(){return y},x3:function(){return h}}),r(58941);var i=r(8740),s=r(22198),n=r(90363),o=r(90972),a=r(6259);const l=n.A.fromJSON(a.Cb),u=s.A.fromJSON(a.yM),p=i.A.fromJSON(a.WR),c=o.A.fromJSON(a.JZ);function d(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return u;case"polygon":case"extent":return p}return null}const y=n.A.fromJSON(a.nC),h=s.A.fromJSON(a.HW),f=i.A.fromJSON(a.b6)},40990:function(e,t,r){r.d(t,{af:function(){return w},al:function(){return b},dX:function(){return S}});var i=r(52874),s=(r(10748),r(78879)),n=(r(58941),r(13520)),o=r(22762),a=r(56150),l=r(97025),u=r(78018),p=r(15186),c=r(10052),d=r(74661),y=r(6259),h=r(77529);const f=u.A.fromSimpleMarkerSymbol(d.UK),m=a.A.fromSimpleLineSymbol(d.A7),g=p.A.fromSimpleFillSymbol(d.Cx),v=new l.A({symbolLayers:new s.A([new o.A({material:{color:y.fT},edges:new c.A({size:(0,n.PN)(1),color:new i.A(y.JR)})})])}),b=new a.A({symbolLayers:new s.A([new h.A({material:{color:new i.A([0,0,0])},size:(0,n.PN)(1)})])}),w=new p.A({symbolLayers:new s.A([new o.A({outline:{color:new i.A([0,0,0]),size:(0,n.PN)(1)}})])});function S(e){if(null==e)return null;switch(e.type){case"mesh":return v;case"point":case"multipoint":return f;case"polyline":return m;case"polygon":case"extent":return g}return null}},6259:function(e,t,r){r.d(t,{Cb:function(){return n},HW:function(){return p},JR:function(){return s},JZ:function(){return l},WR:function(){return a},b6:function(){return c},fT:function(){return i},nC:function(){return u},yM:function(){return o}});const i=[252,146,31,255],s=[153,153,153,255],n={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},p={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},c={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},8404:function(e,t,r){r.d(t,{M9:function(){return u},oO:function(){return p},rS:function(){return y}});var i=r(10748),s=r(39819),n=r(11432),o=r(97992),a=r(11299),l=r(36e3);function u(e,t,r,i){const s=d(e,{},{context:i,isLabelSymbol:!1});null!=s&&(t[r]=s)}function p(e,t,r,i){const s=d(e,{},{context:i,isLabelSymbol:!0});null!=s&&(t[r]=s)}function c(e){return e instanceof o.A||e instanceof l.A}function d(e,t,r){if(null==e)return null;const{context:i,isLabelSymbol:o}=r,l=i?.origin,u=i?.messages;if("web-scene"===l&&!c(e)){const r=(0,a.t)(e,{retainCIM:!0,hasLabelingContext:o});return null!=r.symbol?r.symbol.write(t,i):(u?.push(new s.A("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:r.error})),null)}return("web-map"===l||"portal-item"===l&&!(0,n.TU)(i?.layer))&&c(e)?(u?.push(new s.A("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function y(e,t){return(0,i.Bu)(e,null,t)}},3521:function(e,t,r){r.d(t,{bo:function(){return d},cF:function(){return c},jg:function(){return g},o5:function(){return y},yA:function(){return h}});var i=r(93040),s=r(39819),n=r(60539),o=r(90683),a=r(51432),l=r(26544),u=r(96736);let p={};function c(e,t,r){return null!=e?.styleUrl?async function(e,t){try{return{data:(await h(e,t)).data,baseUrl:(0,o.nM)(e),styleUrl:e}}catch(e){return(0,n.QP)(e),null}}(e.styleUrl,r):null!=e?.styleName?function(e,t,r){const i=null!=t.portal?t.portal:a.A.getDefault();let n;const o=`${i.url} - ${i.user?.username} - ${e}`;return p[o]||(p[o]=function(e,t,r){return t.load(r).then((()=>{const i=new l.A({disableExtraQuery:!0,query:`owner:${f} AND type:${m} AND typekeywords:"${e}"`});return t.queryItems(i,r)})).then((({results:t})=>{let i=null;const n=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t){const t=e.typeKeywords?.some((e=>e.toLowerCase()===n));if(t&&e.type===m&&e.owner===f){i=e;break}}if(!i)throw new s.A("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return i.load(r)}))}(e,i,r).then((e=>(n=e,e.fetchData()))).then((t=>({data:t,baseUrl:n.itemUrl??"",styleName:e})))),p[o]}(e.styleName,t,r):Promise.reject(new s.A("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function d(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function y(e,t,r=["gltf"]){if("cimRef"===t)return encodeURI(e.cimRef);if(e.formatInfos&&!(0,u.Vd)())for(const t of r){const r=e.formatInfos.find((e=>e.type===t));if(r)return r.href}return encodeURI(e.webRef)}function h(e,t){const r={responseType:"json",query:{f:"json"},...t};return(0,i.A)((0,o.S8)(e),r)}const f="esri_en",m="Style",g="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},11299:function(e,t,r){r.d(t,{c:function(){return g},t:function(){return v}});var i=r(10748),s=r(39819),n=r(40990),o=r(36e3),a=r(78018),l=r(22198),u=r(56150),p=r(90363),c=r(24411),d=r(8740),y=r(97025),h=r(15186),f=r(90972),m=r(56922);const g={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function v(e,t=g){if(!e)return{symbol:null};const{retainId:r=g.retainId,ignoreDrivers:v=g.ignoreDrivers,hasLabelingContext:b=g.hasLabelingContext,retainCIM:w=g.retainCIM,cimFallbackEnabled:S=g.cimFallbackEnabled}=t;let _=null;if((0,i.wk)(e)||e instanceof o.A)_=e.clone();else if("cim"===e.type){const r=e.data?.symbol?.type;switch(r){case"CIMPointSymbol":_=w?e.clone():a.A.fromCIMSymbol(e);break;case"CIMLineSymbol":S&&(_=n.al.clone(),t?.logWarning?.("Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":S&&(_=n.af.clone(),t?.logWarning?.("Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!_)return{error:new s.A("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${r||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof l.A)_=u.A.fromSimpleLineSymbol(e);else if(e instanceof p.A)_=a.A.fromSimpleMarkerSymbol(e);else if(e instanceof c.A)_=a.A.fromPictureMarkerSymbol(e);else if(e instanceof d.A)_=t.geometryType&&"mesh"===t.geometryType?y.A.fromSimpleFillSymbol(e):h.A.fromSimpleFillSymbol(e);else{if(!(e instanceof f.A))return{error:new s.A("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};_=b?m.A.fromTextSymbol(e):a.A.fromTextSymbol(e)}return r&&_&&"cim"!==_.type&&(_.id=e.id),v&&(0,i.wk)(_)&&_.symbolLayers.forEach((e=>e.ignoreDrivers=!0)),{symbol:_}}},16088:function(e,t,r){r.d(t,{A:function(){return o}});var i=r(39819),s=r(40633),n=r(87280);function o(e,t,r,i,n){if(null==e)return null;const o=e.referencesGeometry()&&n?l(t,i,n):t,a=e.repurposeFeature(o);try{return e.evaluate({...r,$feature:a},e.services)}catch(e){return s.A.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",e),null}}const a=new Map;function l(e,t,r){const{transform:o,hasZ:l,hasM:u}=r;a.has(t)||a.set(t,function(e){const t={};switch(e){case"esriGeometryPoint":return(e,r,i,s)=>(0,n.Tr)(r,t,e,i,s);case"esriGeometryPolygon":return(e,r,i,s)=>(0,n.$X)(r,t,e,i,s);case"esriGeometryPolyline":return(e,r,i,s)=>(0,n.P5)(r,t,e,i,s);case"esriGeometryMultipoint":return(e,r,i,s)=>(0,n.SW)(r,t,e,i,s);default:return s.A.getLogger("esri.views.2d.support.arcadeOnDemand").error(new i.A("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}(t));const p=a.get(t)(e.geometry,o,l,u);return{...e,geometry:p}}}}]);
//# sourceMappingURL=RouteLayer.js.map