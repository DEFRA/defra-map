"use strict";(self.webpackChunkdefraMap=self.webpackChunkdefraMap||[]).push([[8643],{14520:function(e,n,t){function r(e){return e=e||globalThis.location.hostname,c.some((n=>null!=e?.match(n)))}function o(e,n){return e&&(n=n||globalThis.location.hostname)?null!=n.match(l)||null!=n.match(s)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=n.match(i)||null!=n.match(a)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}t.d(n,{EM:function(){return o},b5:function(){return r}});const l=/^devext\.arcgis\.com$/,i=/^qaext\.arcgis\.com$/,s=/^[\w-]*\.mapsdevext\.arcgis\.com$/,a=/^[\w-]*\.mapsqa\.arcgis\.com$/,c=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,l,i,/^jsapps\.esri\.com$/,s,a]},96736:function(e,n,t){t.d(n,{Vd:function(){return o},Vo:function(){return l}});var r=t(58941);const o=()=>!!(0,r.A)("enable-feature:force-wosr"),l=()=>!!(0,r.A)("enable-feature:SceneLayer-editing");((e="i3s-patching")=>{switch(r.A.add("enable-i3s-patching",!1,!0,!0),r.A.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),r.A.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":r.A.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0);break;case"i3s-patching":r.A.add("enable-i3s-patching",!0,!0,!0)}})("i3s-patching")},74661:function(e,n,t){t.d(n,{A7:function(){return c},Cx:function(){return u},Hk:function(){return f},JJ:function(){return p},SF:function(){return m},UK:function(){return a},jM:function(){return y},x3:function(){return b}}),t(58941);var r=t(8740),o=t(22198),l=t(90363),i=t(90972),s=t(6259);const a=l.A.fromJSON(s.Cb),c=o.A.fromJSON(s.yM),u=r.A.fromJSON(s.WR),f=i.A.fromJSON(s.JZ);function m(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return a;case"polyline":return c;case"polygon":case"extent":return u}return null}const y=l.A.fromJSON(s.nC),b=o.A.fromJSON(s.HW),p=r.A.fromJSON(s.b6)},40990:function(e,n,t){t.d(n,{af:function(){return w},al:function(){return g},dX:function(){return h}});var r=t(52874),o=(t(10748),t(78879)),l=(t(58941),t(13520)),i=t(22762),s=t(56150),a=t(97025),c=t(78018),u=t(15186),f=t(10052),m=t(74661),y=t(6259),b=t(77529);const p=c.A.fromSimpleMarkerSymbol(m.UK),d=s.A.fromSimpleLineSymbol(m.A7),S=u.A.fromSimpleFillSymbol(m.Cx),A=new a.A({symbolLayers:new o.A([new i.A({material:{color:y.fT},edges:new f.A({size:(0,l.PN)(1),color:new r.A(y.JR)})})])}),g=new s.A({symbolLayers:new o.A([new b.A({material:{color:new r.A([0,0,0])},size:(0,l.PN)(1)})])}),w=new u.A({symbolLayers:new o.A([new i.A({outline:{color:new r.A([0,0,0]),size:(0,l.PN)(1)}})])});function h(e){if(null==e)return null;switch(e.type){case"mesh":return A;case"point":case"multipoint":return p;case"polyline":return d;case"polygon":case"extent":return S}return null}},6259:function(e,n,t){t.d(n,{Cb:function(){return l},HW:function(){return u},JR:function(){return o},JZ:function(){return a},WR:function(){return s},b6:function(){return f},fT:function(){return r},nC:function(){return c},yM:function(){return i}});const r=[252,146,31,255],o=[153,153,153,255],l={type:"esriSMS",style:"esriSMSCircle",size:6,color:r,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},i={type:"esriSLS",style:"esriSLSSolid",width:.75,color:r},s={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},f={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},8404:function(e,n,t){t.d(n,{M9:function(){return c},oO:function(){return u},rS:function(){return y}});var r=t(10748),o=t(39819),l=t(11432),i=t(97992),s=t(11299),a=t(36e3);function c(e,n,t,r){const o=m(e,{},{context:r,isLabelSymbol:!1});null!=o&&(n[t]=o)}function u(e,n,t,r){const o=m(e,{},{context:r,isLabelSymbol:!0});null!=o&&(n[t]=o)}function f(e){return e instanceof i.A||e instanceof a.A}function m(e,n,t){if(null==e)return null;const{context:r,isLabelSymbol:i}=t,a=r?.origin,c=r?.messages;if("web-scene"===a&&!f(e)){const t=(0,s.t)(e,{retainCIM:!0,hasLabelingContext:i});return null!=t.symbol?t.symbol.write(n,r):(c?.push(new o.A("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:t.error})),null)}return("web-map"===a||"portal-item"===a&&!(0,l.TU)(r?.layer))&&f(e)?(c?.push(new o.A("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(n,r)}function y(e,n){return(0,r.Bu)(e,null,n)}},3521:function(e,n,t){t.d(n,{bo:function(){return m},cF:function(){return f},jg:function(){return S},o5:function(){return y},yA:function(){return b}});var r=t(93040),o=t(39819),l=t(60539),i=t(90683),s=t(51432),a=t(26544),c=t(96736);let u={};function f(e,n,t){return null!=e?.styleUrl?async function(e,n){try{return{data:(await b(e,n)).data,baseUrl:(0,i.nM)(e),styleUrl:e}}catch(e){return(0,l.QP)(e),null}}(e.styleUrl,t):null!=e?.styleName?function(e,n,t){const r=null!=n.portal?n.portal:s.A.getDefault();let l;const i=`${r.url} - ${r.user?.username} - ${e}`;return u[i]||(u[i]=function(e,n,t){return n.load(t).then((()=>{const r=new a.A({disableExtraQuery:!0,query:`owner:${p} AND type:${d} AND typekeywords:"${e}"`});return n.queryItems(r,t)})).then((({results:n})=>{let r=null;const l=e.toLowerCase();if(n&&Array.isArray(n))for(const e of n){const n=e.typeKeywords?.some((e=>e.toLowerCase()===l));if(n&&e.type===d&&e.owner===p){r=e;break}}if(!r)throw new o.A("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return r.load(t)}))}(e,r,t).then((e=>(l=e,e.fetchData()))).then((n=>({data:n,baseUrl:l.itemUrl??"",styleName:e})))),u[i]}(e.styleName,n,t):Promise.reject(new o.A("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function m(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function y(e,n,t=["gltf"]){if("cimRef"===n)return encodeURI(e.cimRef);if(e.formatInfos&&!(0,c.Vd)())for(const n of t){const t=e.formatInfos.find((e=>e.type===n));if(t)return t.href}return encodeURI(e.webRef)}function b(e,n){const t={responseType:"json",query:{f:"json"},...n};return(0,r.A)((0,i.S8)(e),t)}const p="esri_en",d="Style",S="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},11299:function(e,n,t){t.d(n,{c:function(){return S},t:function(){return A}});var r=t(10748),o=t(39819),l=t(40990),i=t(36e3),s=t(78018),a=t(22198),c=t(56150),u=t(90363),f=t(24411),m=t(8740),y=t(97025),b=t(15186),p=t(90972),d=t(56922);const S={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function A(e,n=S){if(!e)return{symbol:null};const{retainId:t=S.retainId,ignoreDrivers:A=S.ignoreDrivers,hasLabelingContext:g=S.hasLabelingContext,retainCIM:w=S.retainCIM,cimFallbackEnabled:h=S.cimFallbackEnabled}=n;let M=null;if((0,r.wk)(e)||e instanceof i.A)M=e.clone();else if("cim"===e.type){const t=e.data?.symbol?.type;switch(t){case"CIMPointSymbol":M=w?e.clone():s.A.fromCIMSymbol(e);break;case"CIMLineSymbol":h&&(M=l.al.clone(),n?.logWarning?.("Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":h&&(M=l.af.clone(),n?.logWarning?.("Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!M)return{error:new o.A("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${t||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof a.A)M=c.A.fromSimpleLineSymbol(e);else if(e instanceof u.A)M=s.A.fromSimpleMarkerSymbol(e);else if(e instanceof f.A)M=s.A.fromPictureMarkerSymbol(e);else if(e instanceof m.A)M=n.geometryType&&"mesh"===n.geometryType?y.A.fromSimpleFillSymbol(e):b.A.fromSimpleFillSymbol(e);else{if(!(e instanceof p.A))return{error:new o.A("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};M=g?d.A.fromTextSymbol(e):s.A.fromTextSymbol(e)}return t&&M&&"cim"!==M.type&&(M.id=e.id),A&&(0,r.wk)(M)&&M.symbolLayers.forEach((e=>e.ignoreDrivers=!0)),{symbol:M}}},27923:function(e,n,t){t.d(n,{I:function(){return p},p:function(){return b},resolveWebStyleSymbol:function(){return y}});var r=t(10748),o=t(14520),l=t(39819),i=t(90683),s=t(51432),a=t(60534),c=t(8404),u=t(48812),f=t(3521),m=t(11355);function y(e,n,t,r){const o=e.name;return null==o?Promise.reject(new l.A("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,n,t){const r=f.jg.replaceAll(/\{SymbolName\}/gi,e),o=null!=n.portal?n.portal:s.A.getDefault();return(0,f.yA)(r,t).then((e=>{const n=(0,f.bo)(e.data);return(0,c.rS)(n,{portal:o,url:(0,i.An)((0,i.nM)(r)),origin:"portal-item"})}))}(o,n,r):(0,f.cF)(e,n,r).then((e=>p(e,o,n,t,f.o5,r)))}function b(e,n){return n.items.find((n=>n.name===e))}function p(e,n,t,y,p,d){const S=null!=t?.portal?t.portal:s.A.getDefault(),A={portal:S,url:(0,i.An)(e.baseUrl),origin:"portal-item"},g=b(n,e.data);if(!g){const e=`The symbol name '${n}' could not be found`;return Promise.reject(new l.A("symbolstyleutils:symbol-name-not-found",e,{symbolName:n}))}let w=(0,a.f)(p(g,y),A),h=g.thumbnail?.href??null;const M=g.thumbnail?.imageData;(0,o.b5)()&&(w=(0,o.EM)(w)??"",h=(0,o.EM)(h));const C={portal:S,url:(0,i.An)((0,i.nM)(w)),origin:"portal-item"};return(0,f.yA)(w,d).then((o=>{const l="cimRef"===y?(0,f.bo)(o.data):o.data,i=(0,c.rS)(l,C);if(i&&(0,r.wk)(i)){if(h){const e=(0,a.f)(h,A);i.thumbnail=new m.V({url:e})}else M&&(i.thumbnail=new m.V({url:`data:image/png;base64,${M}`}));e.styleUrl?i.styleOrigin=new u.A({portal:t.portal,styleUrl:e.styleUrl,name:n}):e.styleName&&(i.styleOrigin=new u.A({portal:t.portal,styleName:e.styleName,name:n}))}return i}))}}}]);
//# sourceMappingURL=support-webStyleSymbolUtils.js.map