/*! For license information please see flood-map-provider.js.LICENSE.txt */
(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[534],{26:function(t,e,r){r.r(e),r.d(e,{default:function(){return Ut}});class n{constructor(t=[],e=(t,e)=>t<e?-1:t>e?1:0){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:r}=this,n=e[t];for(;t>0;){const o=t-1>>1,i=e[o];if(r(n,i)>=0)break;e[t]=i,t=o}e[t]=n}_down(t){const{data:e,compare:r}=this,n=this.length>>1,o=e[t];for(;t<n;){let n=1+(t<<1);const i=n+1;if(i<this.length&&r(e[i],e[n])<0&&(n=i),r(e[n],o)>=0)break;e[t]=e[n],t=n}e[t]=o}}function o(t,e,r,n){this.x=t,this.y=e,this.h=r,this.d=function(t,e,r){let n=!1,o=1/0;for(const a of r)for(let r=0,u=a.length,c=u-1;r<u;c=r++){const u=a[r],l=a[c];u[1]>e!=l[1]>e&&t<(l[0]-u[0])*(e-u[1])/(l[1]-u[1])+u[0]&&(n=!n),o=Math.min(o,i(t,e,u,l))}return 0===o?0:(n?1:-1)*Math.sqrt(o)}(t,e,n),this.max=this.d+this.h*Math.SQRT2}function i(t,e,r,n){let o=r[0],i=r[1],a=n[0]-o,u=n[1]-i;if(0!==a||0!==u){const r=((t-o)*a+(e-i)*u)/(a*a+u*u);r>1?(o=n[0],i=n[1]):r>0&&(o+=a*r,i+=u*r)}return a=t-o,u=e-i,a*a+u*u}var a=r(278);function u(t){return function(t){var e=0;return function(t,e){var r,n,o,i,a,u,c,l,s,f,h=0,y="FeatureCollection"===t.type,p="Feature"===t.type,d=y?t.features.length:1;for(r=0;r<d;r++){for(u=y?t.features[r].geometry:p?t.geometry:t,l=y?t.features[r].properties:p?t.properties:{},s=y?t.features[r].bbox:p?t.bbox:void 0,f=y?t.features[r].id:p?t.id:void 0,a=(c=!!u&&"GeometryCollection"===u.type)?u.geometries.length:1,o=0;o<a;o++)if(null!==(i=c?u.geometries[o]:u))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,h,l,s,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===e(i.geometries[n],h,l,s,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,s,f))return!1;h++}}(t,(function(t,r,n,o,i){e=e+function(t){let e,r=0;switch(t.type){case"Polygon":return c(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)r+=c(t.coordinates[e]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)})),e}(t)}function c(t){let e=0;if(t&&t.length>0){e+=Math.abs(f(t[0]));for(let r=1;r<t.length;r++)e-=Math.abs(f(t[r]))}return e}var l=a.zX*a.zX/2,s=Math.PI/180;function f(t){const e=t.length-1;if(e<=2)return 0;let r=0,n=0;for(;n<e;){const o=t[n],i=t[n+1===e?0:n+1],a=t[n+2>=e?(n+2)%e:n+2],u=o[0]*s,c=i[1]*s;r+=(a[0]*s-u)*Math.sin(c),n++}return r*l}var h=r(480),y=r(165);function p(t,e){var r,n,o,i,a,u,c;for(n=1;n<=8;n*=2){for(r=[],i=!(m(o=t[t.length-1],e)&n),a=0;a<t.length;a++)(c=!(m(u=t[a],e)&n))!==i&&r.push(d(o,u,n,e)),c&&r.push(u),o=u,i=c;if(!(t=r).length)break}return r}function d(t,e,r,n){return 8&r?[t[0]+(e[0]-t[0])*(n[3]-t[1])/(e[1]-t[1]),n[3]]:4&r?[t[0]+(e[0]-t[0])*(n[1]-t[1])/(e[1]-t[1]),n[1]]:2&r?[n[2],t[1]+(e[1]-t[1])*(n[2]-t[0])/(e[0]-t[0])]:1&r?[n[0],t[1]+(e[1]-t[1])*(n[0]-t[0])/(e[0]-t[0])]:null}function m(t,e){var r=0;return t[0]<e[0]?r|=1:t[0]>e[2]&&(r|=2),t[1]<e[1]?r|=4:t[1]>e[3]&&(r|=8),r}function v(t,e){const r=[];for(const n of t){const t=p(n,e);t.length>0&&(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push(t[0]),t.length>=4&&r.push(t))}return r}var g=r(651),b=r(80);function w(){w=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),u=new N(n||[]);return o(a,"_invoke",{value:j(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",y="suspendedYield",p="executing",d="completed",m={};function v(){}function g(){}function b(){}var L={};l(L,a,(function(){return this}));var O=Object.getPrototypeOf,E=O&&O(O(T([])));E&&E!==r&&n.call(E,a)&&(L=E);var P=b.prototype=v.prototype=Object.create(L);function M(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==x(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=k(u,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:y,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(x(e)+" is not iterable")}return g.prototype=b,o(P,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},M(S.prototype),l(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},M(P),l(P,c,"Generator"),l(P,a,(function(){return this})),l(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function L(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function O(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||E(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){if(t){if("string"==typeof t)return P(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(t,e):void 0}}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function M(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach((function(e){j(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function j(t,e,r){return(e=function(t){var e=function(t){if("object"!=x(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==x(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k(){var t=this.map,e=t.getPadding(),r=t.getBounds(),n=t.project([r.getWest(),r.getSouth()]),o=t.project([r.getEast(),r.getNorth()]);n.x+=e.left,n.y-=e.bottom,o.x-=e.right,o.y+=e.top;var i=t.unproject(n),a=t.unproject(o);return[[i.lng,i.lat],[a.lng,a.lat]].flat(1)}function A(t){var e=this.map;return t.map((function(t){var r=e.getCenter(),i=r.lng,u=r.lat,c="Polygon"===t.geometry.type?function(t,e=1,r=!1){let i=1/0,a=1/0,u=-1/0,c=-1/0;for(const[e,r]of t[0])e<i&&(i=e),r<a&&(a=r),e>u&&(u=e),r>c&&(c=r);const l=u-i,s=c-a,f=Math.max(e,Math.min(l,s));if(f===e){const t=[i,a];return t.distance=0,t}const h=new n([],((t,e)=>e.max-t.max));let y=function(t){let e=0,r=0,n=0;const i=t[0];for(let t=0,o=i.length,a=o-1;t<o;a=t++){const o=i[t],u=i[a],c=o[0]*u[1]-u[0]*o[1];r+=(o[0]+u[0])*c,n+=(o[1]+u[1])*c,e+=3*c}const a=new o(r/e,n/e,0,t);return 0===e||a.d<0?new o(i[0][0],i[0][1],0,t):a}(t);const p=new o(i+l/2,a+s/2,0,t);p.d>y.d&&(y=p);let d=2;function m(n,i,a){const u=new o(n,i,a,t);d++,u.max>y.d+e&&h.push(u),u.d>y.d&&(y=u,r&&console.log(`found best ${Math.round(1e4*u.d)/1e4} after ${d} probes`))}let v=f/2;for(let t=i;t<u;t+=f)for(let e=a;e<c;e+=f)m(t+v,e+v,v);for(;h.length;){const{max:t,x:r,y:n,h:o}=h.pop();if(t-y.d<=e)break;v=o/2,m(r-v,n-v,v),m(r+v,n-v,v),m(r-v,n+v,v),m(r+v,n+v,v)}r&&console.log(`num probes: ${d}\nbest distance: ${y.d}`);const g=[y.x,y.y];return g.distance=y.d,g}(t.geometry.coordinates,1e-5):t.geometry.coordinates,l=new a.zx([c[0],c[1]]),s=new a.zx([i,u]),f=(0,h.I)(l,s,{units:"metres"});return S(S({},t.properties),{},{id:t.properties.id||t.id,geometryType:t.geometry.type,coord:c,distance:f})}))}function _(t){var e=[];return t.forEach((function(t){var r=e.find((function(e){return e.length&&(t.id&&t.id===e[0].id||t.properties.id&&t.properties.id===e[0].properties.id)}));if("MultiPolygon"===t.geometry.type){var n=t.geometry.coordinates.map((function(t){var e=new a.n1([t[0]]);return e.properties={area:u(e)},e})),o=n.find((function(t){return t.properties.area===Math.max.apply(Math,O(n.map((function(t){return t.properties.area}))))}));t.geometry=o.geometry,t.properties.area=o.properties.area}else if("Polygon"===t.geometry.type){var i=new a.n1([t.geometry.coordinates[0]]);t.properties.area=u(i),t.geometry=i.geometry}else t.properties.area=0;(null==r?void 0:r.push(t))||e.push([t])})),e.map((function(t){return t.find((function(e){return e.properties.area===Math.max.apply(Math,O(t.map((function(t){return t.properties.area}))))}))}))}function N(){var t=this.map,e=t.getBounds().toArray().flat(1),r=k.bind(this)(),n=t.getCenter(),o=t.getZoom();return{bounds:e,focusBounds:r,center:n=n.toArray().map((function(t){return parseFloat(t.toFixed(b.N.PRECISION))})),zoom:o=parseFloat(o.toFixed(b.N.PRECISION)),isMaxZoom:t.getZoom()>=t.getMaxZoom(),isMinZoom:t.getZoom()<=t.getMinZoom()}}function T(){var t=this.map,e=this.featureLayers,r=this.labelLayers;t.on("mousemove",[].concat(O(e),O(r)),(function(n){var o=t.queryRenderedFeatures(n.point,{layers:[].concat(O(e),O(r))}),i=!n.originalEvent.altKey&&o&&!!o.find((function(t){return e.includes(t.layer.id)})),a=n.originalEvent.altKey&&o&&!!o.find((function(t){return r.includes(t.layer.id)}));t.getCanvas().style.cursor=i||a?"pointer":""})),t.on("mouseout",[].concat(O(e),O(r)),(function(){t.getCanvas().style.cursor=""}))}function I(t){return F.apply(this,arguments)}function F(){var t;return t=w().mark((function t(e){var r,n,o,i,a;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.selectedLayers,n=N.bind(this)(),o=C.bind(this)(e),i=z.bind(this)(),a=D.bind(this)(r),t.abrupt("return",S(S({},n),{},{resultType:o.resultType,coord:o.coord,selectedId:a,features:o,label:i}));case 6:case"end":return t.stop()}}),t,this)})),F=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){L(i,n,o,a,u,"next",t)}function u(t){L(i,n,o,a,u,"throw",t)}a(void 0)}))},F.apply(this,arguments)}function C(t){var e,r,n,o=this.map,i=this.featureLayers,u=this.locationLayers,c=this.paddingBox,l=this.scale,s=(0,g.mK)(c,l),f=[].concat(O(i),O(u));f=null===(e=o.getStyle())||void 0===e?void 0:e.layers.filter((function(t){var e;return f.includes(null==t?void 0:t.id)&&"none"!==(null==t||null===(e=t.layout)||void 0===e?void 0:e.visibility)})).map((function(t){return t.id}));var h=o.queryRenderedFeatures(t,{layers:f});h=h.map((function(t){return S(S({},t.properties),{},{id:t.properties.id||t.id,name:t.properties.name,layer:t.layer.id})}));var p,w=o.queryRenderedFeatures({layers:i}),x=Array.from(new Set(w.map((function(t){return t.properties.id||t.id})))).length,L=o.queryRenderedFeatures(s,{layers:i}),E=Array.from(new Set(L.map((function(t){return t.properties.id||t.id})))).length,P=function(t,e){return e.map((function(e){if(["Polygon","MultiPolygon"].includes(e.geometry.type)){var r=function(t,e){const r=(0,y.bg)(t),n=r.type,o="Feature"===t.type?t.properties:{};let i=r.coordinates;switch(n){case"LineString":case"MultiLineString":{const t=[];return"LineString"===n&&(i=[i]),i.forEach((r=>{!function(t,e,r){var n,o,i,a=t.length,u=m(t[0],e),c=[];let l,s;for(r||(r=[]),n=1;n<a;n++){for(l=t[n-1],s=t[n],o=i=m(s,e);;){if(!(u|o)){c.push(l),o!==i?(c.push(s),n<a-1&&(r.push(c),c=[])):n===a-1&&c.push(s);break}if(u&o)break;u?(l=d(l,s,u,e),u=m(l,e)):(s=d(l,s,o,e),o=m(s,e))}u=i}c.length&&r.push(c)}(r,e,t)})),1===t.length?(0,a.wi)(t[0],o):(0,a.NU)(t,o)}case"Polygon":return(0,a.n1)(v(i,e),o);case"MultiPolygon":return(0,a.g5)(i.map((t=>v(t,e))),o);default:throw new Error("geometry "+n+" not supported")}}("Polygon"===e.geometry.type?new a.n1(e.geometry.coordinates):new a.g5(e.geometry.coordinates),t);r.geometry.coordinates=r.geometry.coordinates.filter((function(t){return t.length})),e.geometry=r.geometry}return e}))}(k.bind(this)(),L),M=E<=b.N.MAX_FEATURES?_(w):[],j=E<=b.N.MAX_FEATURES?_(P):[],N=w.length<=b.N.MAX_FEATURES?A.bind(this)(M):[],T=A.bind(this)(j).sort((function(t,e){return t.distance-e.distance}));t&&(p=(p=[(p=o.unproject(t)).lng,p.lat]).map((function(t){return Math.round(t*Math.pow(10,b.N.PRECISION))/Math.pow(10,b.N.PRECISION)})));var I=h.length?h[0]:null,F=(null==i?void 0:i.includes(null==I?void 0:I.layer))?"feature":(null==u?void 0:u.includes(null==I?void 0:I.layer))&&"pixel",C=null===(r=f)||void 0===r?void 0:r.some((function(t){return null==i?void 0:i.includes(t)})),R=null===(n=f)||void 0===n?void 0:n.some((function(t){return null==u?void 0:u.includes(t)}));return{resultType:F||(R?"pixel":null),items:h,featuresTotal:x,featuresInViewport:N,featuresFocusTotal:E,featuresInFocus:T,isFeaturesInMap:C,isPixelFeaturesAtPixel:null==u?void 0:u.includes(null==I?void 0:I.layer),isPixelFeaturesInMap:R,coord:p}}function R(t){var e=this.map,r=this.selectedLayers;if(null!=e&&e.getStyle()){var n,o=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=E(t))){e&&(t=e);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==e.return||e.return()}finally{if(a)throw o}}}}(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;e.setLayoutProperty(i,"visibility",t?"visible":"none"),e.setFilter(i,["any",["==",["id"],t||""],["==",["get","id"],t||""]])}}catch(t){o.e(t)}finally{o.f()}}}function z(){var t,e=this.map,r=e.queryRenderedFeatures({layers:["label"]});if(null!=r&&r.length){var n,o=null===(n=e.getStyle())||void 0===n||null===(n=n.layers.find((function(t){return"label"===t.id})))||void 0===n?void 0:n.layout["text-field"];t="".concat(o," (").concat(r[0].properties.layer,")")}return t}function D(t){var e,r,n=this.map.queryRenderedFeatures({layers:t});return n.length?(null===(e=n[0].properties)||void 0===e?void 0:e.id)||(null===(r=n[0])||void 0===r?void 0:r.id):null}function B(t){var e=this.map,r=this.labelLayers;return e.queryRenderedFeatures(t,{layers:r})[0]}function G(){var t=this.map,e=this.paddingBox,r=this.scale,n=(0,g.mK)(e,r);return t.queryRenderedFeatures(n,{layers:this.labelLayers}).map((function(e){var r="Point"===e.geometry.type&&t.project(e.geometry.coordinates);if("Point"!==e.geometry.type){var n=e.geometry.coordinates.flat("MultiLineString"===e.geometry.type?1:0).map((function(e){return t.project(e)})),o=n.map((function(t){return t.x})),i=n.map((function(t){return t.y}));r={x:(Math.max.apply(Math,O(o))-Math.min.apply(Math,O(o)))/2+Math.min.apply(Math,O(o)),y:(Math.max.apply(Math,O(i))-Math.min.apply(Math,O(i)))/2+Math.min.apply(Math,O(i))}}return{feature:e,pixel:[r.x,r.y]}}))}var q=r(387),Z=r.n(q),U=function(){var t=document.createElement("div");return t.className="fm-c-marker fm-c-marker--location",t.innerHTML='<div class="fm-c-marker__inner"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="8" stroke="#fff" stroke-width="3"/></svg></div>',t},H=r(472);function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?V(Object(r),!0).forEach((function(e){K(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function K(t,e,r){return(e=function(t){var e=function(t){if("object"!=X(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==X(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var $="symbol-placement",W="text-field";function Q(){var t=this.map;t.getStyle().layers.filter((function(t){return t.layout&&$ in t.layout&&"line"===t.layout[$]})).forEach((function(e){return t.setLayoutProperty(e.id,$,"line-center")}))}function tt(){var t=this.map,e=t.getStyle().layers;this.labelLayers=e.filter((function(t){return"label"!==t.id&&t.layout?t.layout[W]:null})).map((function(t){return t.id})),t.addSource("label",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.addLayer({id:"label",type:"symbol",source:"label",layout:{"text-allow-overlap":!0,"text-ignore-placement":!0},paint:{"text-halo-width":3,"text-halo-blur":1,"text-opacity":1}})}function et(t){var e=this.map,r=this.shortcutMarkers,n=this.modules.Marker;r.forEach((function(t){return t.remove()})),t.forEach((function(t,o){var i,a,u="Point"===t.geometryType?[0,b.N.SHORTCUT_LABEL_OFFSET]:[0,0];r.push(new n({element:(i=o+1,a=document.createElement("div"),a.className="fm-c-marker fm-c-marker--shortcut",a.innerHTML='<div class="fm-c-marker__inner">'.concat(i,"</div>"),a),offset:u}).setLngLat(t.coord).addTo(e))}))}function rt(t){var e=this.map,r=this.scale,n=this.style;if(e.style)if(t){var o;e.moveLayer("label"),e.getSource("label").setData({type:"Feature",geometry:t.geometry,properties:J(J({},t.properties),{},{layer:t.layer.id})});var i=1===r?1.5:1.25,a=t.layer.layout[W];e.setLayoutProperty("label",$,t.layer.layout[$]),e.setLayoutProperty("label",W,a.sections?a.sections[0].text:a),e.setLayoutProperty("label","text-font",t.layer.layout["text-font"]),e.setLayoutProperty("label","text-letter-spacing",t.layer.layout["text-letter-spacing"]),e.setLayoutProperty("label","text-size",t.layer.layout["text-size"]*i),e.setLayoutProperty("label","text-anchor",t.layer.layout["text-anchor"]),e.setLayoutProperty("label","text-justify",t.layer.layout["text-justify"]),e.setLayoutProperty("label","text-offset",null===(o=t.layer.layout["text-offset"])||void 0===o?void 0:o.map((function(t){return t/i}))),e.setPaintProperty("label","text-color","dark"===n?"#ffffff":"#000000"),e.setPaintProperty("label","text-halo-color","dark"===n?"#000000":"#ffffff")}else{var u;null==e||null===(u=e.getSource("label"))||void 0===u||u.setData({type:"FeatureCollection",features:[]})}}function nt(t,e,r){var n,o=this.map,i=[],a=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Y(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(t);try{var u=function(){var t=n.value;t.id="".concat(t.id,"-selected"),t.filter=["==","id",e||""],"symbol"===t.type&&(t.layout["icon-image"]=["concat",t.layout["icon-image"],"-selected"]),"fill"===t.type&&(t.paint={"line-color":r?"#ffffff":"#0b0c0c","line-width":2},t.type="line"),o.getLayer(t.id)&&o.removeLayer(t.id),i.push(t.id),setTimeout((function(){return o.addLayer(t)}),0)};for(a.s();!(n=a.n()).done;)u()}catch(t){a.e(t)}finally{a.f()}return i}function ot(){var t,e;if(null!==(t=this.symbols)&&void 0!==t&&t.length){var r=this.map,n=this.symbols,o=this.style,i=["dark","aerial"].includes(o.name);e=Promise.all(n.map((function(t){return fetch(t)}))).then((function(t){return Promise.all(t.map((function(t){return t.text()})))})).then((function(t){return Promise.all(t.map((function(t,e){return at(it(n[e]),t,r,i)})).concat(t.map((function(t,e){return at("".concat(it(n[e]),"-selected"),t,r,i)}))))}))}return e}var it=function(t){return t.split("\\").pop().split("/").pop().slice(0,-Math.abs(4))},at=function(t,e,r,n){var o=(0,H.c)(t,null,e,n,2),i=r.getCanvasContainer();i.insertAdjacentHTML("beforeend",o);var a=i.lastChild;Z()(a,{recursive:!0,properties:["stroke","fill"]});var u="data:image/svg+xml;base64,"+btoa(i.lastChild.outerHTML),c=document.createElement("img");return null==a||a.remove(),new Promise((function(e,n){c.onload=function(){try{if(null!=r&&r.hasImage(t))return;r.addImage(t,c),e(c)}catch(t){console.log(t)}},c.onerror=n,c.src=u}))};function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function lt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(r),!0).forEach((function(e){st(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ct(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function st(t,e,r){return(e=function(t){var e=function(t){if("object"!=ut(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ut(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ft(){ft=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),u=new A(n||[]);return o(a,"_invoke",{value:M(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",y="suspendedYield",p="executing",d="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,L=x&&x(x(_([])));L&&L!==r&&n.call(L,a)&&(w=L);var O=b.prototype=v.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==ut(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function M(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=S(u,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:y,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function _(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ut(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,u,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=_,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:_(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function ht(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function yt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ht(i,n,o,a,u,"next",t)}function u(t){ht(i,n,o,a,u,"throw",t)}a(void 0)}))}}var pt=function(t){var e=t.getCenter(),r=t.getZoom(),n=e.lat,o=Math.pow(2,r);return 40075016.686*Math.cos(n*Math.PI/180)/(512*o)},dt=function(t){var e=t.getStyle();if(!e)return[];var r=t.getZoom(),n=new Set;return e.layers.forEach((function(t){if(t.source){var o=void 0!==t.minzoom?t.minzoom:0,i=void 0!==t.maxzoom?t.maxzoom:24;if(r>=o&&r<i&&(!t.layout||"none"!==t.layout.visibility)){var a=e.sources[t.source];a&&a.attribution&&n.add(a.attribution)}}})),Array.from(n)};function mt(){return vt.apply(this,arguments)}function vt(){return(vt=yt(ft().mark((function t(){var e,r,n,o;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.map,t.next=3,ot.bind(this)();case 3:this.isLoaded=!0,r=pt(e),n=e.getZoom(),o=dt(e),this.dispatchEvent(new CustomEvent("load",{detail:{framework:{map:e},resolution:r,zoom:n,attributions:o}}));case 8:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function gt(){return bt.apply(this,arguments)}function bt(){return(bt=yt(ft().mark((function t(){var e;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.map,this.baseLayers=e.getStyle().layers,Q.bind(this)(),tt.bind(this)(),T.bind(this)(this.featureLayers,this.labelLayers),!this.isLoaded){t.next=9;break}return t.next=8,ot.bind(this)();case 8:this.dispatchEvent(new CustomEvent("style",{detail:{type:"style"}}));case 9:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function wt(){return xt.apply(this,arguments)}function xt(){return(xt=yt(ft().mark((function t(){var e,r,n,o,i,a,u,c,l,s,f,h,y,p,d;return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.map){t.next=11;break}return r=this.map,n=this.paddingBox,o=this.selectedId,i=this.scale,a=n.offsetTop,u=n.offsetLeft,c=n.offsetWidth,l=n.offsetHeight,s=n.parentNode,f=s.offsetTop,h=s.offsetLeft,y=[u+h+c/2,a+f+l/2].map((function(t){return t/i})),t.next=7,I.bind(this)(o?null:y);case 7:p=t.sent,d=dt(r),et.bind(this)(null==p||null===(e=p.features)||void 0===e?void 0:e.featuresInFocus),this.dispatchEvent(new CustomEvent("update",{detail:lt(lt({},p),{},{attributions:d})}));case 11:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Lt(t){return Ot.apply(this,arguments)}function Ot(){return(Ot=yt(ft().mark((function t(e){return ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.hideLabel(),this.dispatchEvent(new CustomEvent("movestart",{detail:{isUserInitiated:e.isUserInitiated||!!e.originalEvent}}));case 2:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function Et(){var t=this.map,e=t.getZoom()>=t.getMaxZoom(),r=t.getZoom()<=t.getMinZoom(),n=t.getZoom(),o=pt(t),i=dt(t);this.dispatchEvent(new CustomEvent("move",{detail:{isMaxZoom:e,isMinZoom:r,zoom:n,resolution:o,attributions:i}}))}function Pt(t){var e=this;if(this.baseLayers.length){var r=this.map,n=this.style,o=this.selectedId,i=t.target.getStyle().layers.filter((function(t){return e.featureLayers.includes(t.id)}));if(r.getStyle().layers.filter((function(t){return t.id.includes("selected")})).length!==i.length){var a=["dark","aerial"].includes(n.name);this.selectedLayers=nt.bind(this)(i,o,a)}}}function Mt(t){console.log(t)}var St=r(166),jt=r(987),kt=r(18);function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function _t(){_t=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),u=new A(n||[]);return o(a,"_invoke",{value:M(t,r,u)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var h="suspendedStart",y="suspendedYield",p="executing",d="completed",m={};function v(){}function g(){}function b(){}var w={};l(w,a,(function(){return this}));var x=Object.getPrototypeOf,L=x&&x(x(_([])));L&&L!==r&&n.call(L,a)&&(w=L);var O=b.prototype=v.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,a,u){var c=f(t[o],t,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==At(s)&&n.call(s,"__await")?e.resolve(s.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(s).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function M(e,r,n){var o=h;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=S(u,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:y,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function _(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(At(e)+" is not iterable")}return g.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=l(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(P.prototype),l(P.prototype,u,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new P(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(O),l(O,c,"Generator"),l(O,a,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=_,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return u.type="throw",u.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:_(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Nt(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Tt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Nt(i,n,o,a,u,"next",t)}function u(t){Nt(i,n,o,a,u,"throw",t)}a(void 0)}))}}function It(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ft(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?It(Object(r),!0).forEach((function(e){Ct(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ct(t,e,r){return(e=zt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zt(n.key),n)}}function zt(t){var e=function(t){if("object"!=At(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==At(e)?e:e+""}function Dt(t){var e="function"==typeof Map?new Map:void 0;return Dt=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(Bt())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&Gt(o,r.prototype),o}(t,arguments,qt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Gt(r,t)},Dt(t)}function Bt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Bt=function(){return!!t})()}function Gt(t,e){return Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gt(t,e)}function qt(t){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qt(t)}var Zt=function(t){function e(t){var r,n=t.transformRequest,o=t.symbols;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,r){return e=qt(e),function(t,e){if(e&&("object"==At(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Bt()?Reflect.construct(e,r||[],qt(t).constructor):e.apply(t,r))}(this,e)).srid=4326,r.capabilities=Ft(Ft({},jt.R.default),{},{hasDraw:!0,hasSize:!!window.globalThis}),r.transformRequest=n,r.symbols=o,r.baseLayers=[],r.selectedId="",r.selectedCoordinate=null,r.isLoaded=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gt(t,e)}(e,t),n=e,o=[{key:"init",value:function(t){var e=this;this.capabilities.isLatest?r.e(803).then(r.t.bind(r,443,23)).then((function(r){e.addMap(r,t)})):Promise.all([r.e(689).then(r.t.bind(r,634,23)),r.e(689).then(r.bind(r,130)),r.e(689).then(r.bind(r,160))]).then((function(r){window.ResizeObserver||r[1].install(),e.addMap(r[0],t)}))}},{key:"remove",value:function(){var t;null===(t=this.map)||void 0===t||t.remove(),this.map=null}},{key:"addMap",value:function(t,e){var r=this,n=e.container,o=e.paddingBox,i=e.bounds,a=e.maxBounds,u=e.center,c=e.zoom,l=e.minZoom,s=e.maxZoom,f=e.style,h=e.size,y=e.featureLayers,p=e.locationLayers,d=e.callBack,m=t.default,v=m.Map,w=m.Marker,x=m.LngLatBounds,L=(0,g.X_)(h),O=new v(Ft(Ft({},e),{},{container:n,style:null==f?void 0:f.url,maxBounds:a||kt.NT.MAX_BOUNDS_4326,bounds:i,center:u,zoom:c,minZoom:l,maxZoom:s,fadeDuration:0,attributionControl:!1,dragRotate:!1}));O.setPadding((0,g.Ig)(o,L)),i?O.fitBounds(i,{animate:!1}):O.flyTo({center:u,zoom:c,animate:!1}),O.touchZoomRotate.disableRotation(),O.setPixelRatio&&O.setPixelRatio(window.devicePixelRatio*L);var E,P=O.getCanvas();P.removeAttribute("role"),P.removeAttribute("tabindex"),P.removeAttribute("aria-label"),P.style.display="block",this.container=n,this.map=O,this.featureLayers=y||[],this.locationLayers=p||[],this.selectedLayers=[],this.paddingBox=o,this.style=f,this.scale=L,this.targetMarker=new w({element:(E=document.createElement("div"),E.className="fm-c-marker fm-c-marker--target",E.innerHTML='<div class="fm-c-marker__inner">\n    <svg width="38" height="38" viewBox="0 0 38 38" fill-rule="evenodd" fill="currentColor">\n      <path d="M5.035 20H1v-2h4.035C5.525 11.069 11.069 5.525 18 5.035V1h2v4.035c6.931.49 12.475 6.034 12.965 12.965H37v2h-4.035c-.49 6.931-6.034 12.475-12.965 12.965V37h-2v-4.035C11.069 32.475 5.525 26.931 5.035 20zM19 7A12.01 12.01 0 0 0 7 19a12.01 12.01 0 0 0 12 12 12.01 12.01 0 0 0 12-12A12.01 12.01 0 0 0 19 7zm0 10a2 2 0 1 1 0 4 2 2 0 1 1 0-4z"/>\n      <path d="M5.035 20H1v-2h4.035a14.02 14.02 0 0 1 .246-1.8l1.96.399C7.083 17.375 7 18.178 7 19s.083 1.625.241 2.401l-1.96.399a14.02 14.02 0 0 1-.246-1.8zM20 5.035a14.02 14.02 0 0 1 1.8.246l-.399 1.96C20.625 7.083 19.822 7 19 7s-1.625.083-2.401.241l-.399-1.96a14.02 14.02 0 0 1 1.8-.246V1h2v4.035zm-2 27.93a14.02 14.02 0 0 1-1.8-.246l.399-1.96c.776.158 1.579.241 2.401.241s1.625-.083 2.401-.241l.399 1.96a14.02 14.02 0 0 1-1.8.246V37h-2v-4.035zM32.965 20a14.02 14.02 0 0 1-.246 1.8l-1.96-.399c.158-.776.241-1.579.241-2.401s-.083-1.625-.241-2.401l1.96-.399a14.02 14.02 0 0 1 .246 1.8H37v2h-4.035zM19 17a2 2 0 1 1 0 4 2 2 0 1 1 0-4zm3.8-9.385l.634-1.897a13.98 13.98 0 0 1 4.848 2.805l-1.327 1.496c-1.196-1.06-2.605-1.886-4.155-2.404zm5.181 3.43l1.496-1.327a13.98 13.98 0 0 1 2.805 4.848l-1.897.634c-.518-1.55-1.344-2.959-2.404-4.155zM30.385 22.8l1.897.634a13.98 13.98 0 0 1-2.805 4.848l-1.496-1.327c1.06-1.196 1.886-2.605 2.404-4.155zm-3.43 5.181l1.327 1.496a13.98 13.98 0 0 1-4.848 2.805l-.634-1.897c1.55-.518 2.959-1.344 4.155-2.404zM15.2 30.385l-.634 1.897a13.98 13.98 0 0 1-4.848-2.805l1.327-1.496c1.196 1.06 2.605 1.886 4.155 2.404zm-5.181-3.43l-1.496 1.327a13.98 13.98 0 0 1-2.805-4.848l1.897-.634c.518 1.55 1.344 2.959 2.404 4.155zM7.615 15.2l-1.897-.634a13.98 13.98 0 0 1 2.805-4.848l1.496 1.327c-1.06 1.196-1.886 2.605-2.404 4.155zm3.43-5.181L9.718 8.523a13.98 13.98 0 0 1 4.848-2.805l.634 1.897c-1.55.518-2.959 1.344-4.155 2.404z"/>\n    </svg>\n  </div>',E)}).setLngLat([0,0]).addTo(O),this.locationMarker=new w({element:U()}).setLngLat([0,0]).addTo(O),this.shortcutMarkers=[],this.modules={MaplibreMap:v,Marker:w,LngLatBounds:x},this.framework={map:O},O.on("load",mt.bind(this)),O.on("movestart",Lt.bind(this));var M,S,j,k=(M=function(){Et.bind(r)()},S=b.N.THROTTLE,j=0,function(){var t=Date.now();t-j>=S&&(j=t,M.apply(void 0,arguments))});O.on("move",k),O.on("styledata",Pt.bind(this));var A=(0,St.s)((function(){wt.bind(r)()}),b.N.DELAY);O.on("idle",A),O.on("style.load",gt.bind(this)),O.on("error",Mt.bind(this)),d&&d(this)}},{key:"getPixel",value:function(t){var e;return this.map&&t&&(e=this.map.project(t),e=[Math.round(e.x),Math.round(e.y)]),e}},{key:"panBy",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.map&&this.map.panBy(t,Ft({},b.N.ANIMATION),{isUserInitiated:e})}},{key:"panTo",value:function(t){this.map.flyTo(Ft({center:t},b.N.ANIMATION))}},{key:"zoomIn",value:function(){this.map&&this.map.zoomIn(b.N.ANIMATION)}},{key:"zoomOut",value:function(){this.map&&this.map.zoomOut(b.N.ANIMATION)}},{key:"setStyle",value:function(t){var e,r;this.style=t,this.map.setStyle(t.url,{diff:!1}),null===(e=this.draw)||void 0===e||null===(r=e.setStyle)||void 0===r||r.call(e)}},{key:"setPadding",value:function(t,e){if(this.map){var r=this.map,n=this.paddingBox,o=this.scale,i=(0,g.Ig)(n,o);this.map.setPadding(i||r.getPadding()),t&&this.map.easeTo(Ft({center:t,animate:e},b.N.ANIMATION))}}},{key:"setSize",value:function(t){var e,r=this,n=(0,g.X_)(t);this.scale=n,this.setPadding(),this.map.setPixelRatio&&(null===(e=this.map)||void 0===e||e.setPixelRatio(window.devicePixelRatio*n)),setTimeout((function(){r.map.resize(),r.dispatchEvent(new CustomEvent("style",{detail:{type:"size"}}))}),b.N.DELAY)}},{key:"fitBounds",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=[[t[0],t[1]],[t[2],t[3]]],this.map.fitBounds(t,{animate:e,linear:!0,duration:b.N.ANIMATION.duration})}},{key:"setCentre",value:function(t,e){this.map&&this.map.flyTo(Ft({center:t},b.N.ANIMATION))}},{key:"initDraw",value:function(t){var e=this;r.e(194).then(r.bind(r,145)).then((function(r){var n=r.default;e.draw=new n(e,t)}))}},{key:"setTargetMarker",value:function(t,e,r){var n=this.targetMarker;if(n){n.setLngLat(t||[0,0]);var o=n.getElement();o.classList.toggle("fm-c-marker--has-data",e),o.classList.toggle(b.A.MARKER_VISIBLE,r&&t)}}},{key:"selectFeature",value:function(t){this.selectedId=t,R.bind(this)(t)}},{key:"selectCoordinate",value:function(t){this.selectedCoordinate=t}},{key:"queryFeature",value:(a=Tt(_t().mark((function t(e){var r;return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,I.bind(this)(null,!1);case 3:(r=t.sent).features.items=[r.features.items.find((function(t){return t.id===e}))],this.dispatchEvent(new CustomEvent("mapquery",{detail:r}));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"queryPoint",value:(i=Tt(_t().mark((function t(e){var r;return _t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.bind(this)(e,this.selectedLayers);case 2:r=t.sent,this.hideLabel(),this.dispatchEvent(new CustomEvent("mapquery",{detail:Ft({resultType:r.features.resultType},r)}));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"getGeoLocation",value:function(t,e){navigator.geolocation.getCurrentPosition(function(){var e=Tt(_t().mark((function e(r){var n;return _t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(n=[r.coords.longitude,r.coords.latitude]).map((function(t){return parseFloat(t.toFixed(b.N.PRECISION))})),t(n,null);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(t){console.log(t),e(t)}),{enableHighAccuracy:!1})}},{key:"showLocation",value:function(t){this.locationMarker.setLngLat(t).addClassName(b.A.MARKER_VISIBLE)}},{key:"showNextLabel",value:function(t,e){var r,n,o=G.bind(this)(),i=this.map.getCenter(),a=i.lng,u=i.lat,c=this.map.project([a,u]),l=o.map((function(t){return t.pixel})),s=(0,g.cj)(e,t||[c.x,c.y],l),f=null===(r=o[s])||void 0===r?void 0:r.feature;return rt.bind(this)(f),null===(n=o[s])||void 0===n?void 0:n.pixel}},{key:"showLabel",value:function(t){var e=B.bind(this)(t);return rt.bind(this)(e),t}},{key:"hideLabel",value:function(){this.map&&rt.bind(this)()}}],o&&Rt(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i,a}(Dt(EventTarget)),Ut=Zt},80:function(t,e,r){r.d(e,{A:function(){return o},N:function(){return n}});var n={PRECISION:6,ANIMATION:{duration:500,curve:0},DELAY:500,THROTTLE:100,MAX_FEATURES:9,SHORTCUT_LABEL_OFFSET:-30},o={MARKER_VISIBLE:"fm-c-marker--visible"}},165:function(t,e,r){function n(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return[...t.geometry.coordinates];if("Point"===t.type)return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function o(t){return"Feature"===t.type?t.geometry:t}r.d(e,{bg:function(){return o},uG:function(){return n}})},166:function(t,e,r){r.d(e,{s:function(){return n}});var n=function(t,e){var r=null;return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];window.clearTimeout(r),r=window.setTimeout((function(){t.apply(void 0,o)}),e)}}},278:function(t,e,r){r.d(e,{Gf:function(){return h},NU:function(){return l},cJ:function(){return f},g5:function(){return s},n1:function(){return u},nv:function(){return y},tR:function(){return p},wi:function(){return c},zX:function(){return n},zx:function(){return a}});var n=6371008.8,o={centimeters:100*n,centimetres:100*n,degrees:360/(2*Math.PI),feet:3.28084*n,inches:39.37*n,kilometers:n/1e3,kilometres:n/1e3,meters:n,metres:n,miles:n/1609.344,millimeters:1e3*n,millimetres:1e3*n,nauticalmiles:n/1852,radians:1,yards:1.0936*n};function i(t,e,r={}){const n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function a(t,e,r={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!d(t[0])||!d(t[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:t},e,r)}function u(t,e,r={}){for(const e of t){if(e.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(e[e.length-1].length!==e[0].length)throw new Error("First and last Position are not equivalent.");for(let t=0;t<e[e.length-1].length;t++)if(e[e.length-1][t]!==e[0][t])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:t},e,r)}function c(t,e,r={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:t},e,r)}function l(t,e,r={}){return i({type:"MultiLineString",coordinates:t},e,r)}function s(t,e,r={}){return i({type:"MultiPolygon",coordinates:t},e,r)}function f(t,e="kilometers"){const r=o[e];if(!r)throw new Error(e+" units is invalid");return t*r}function h(t,e="kilometers"){const r=o[e];if(!r)throw new Error(e+" units is invalid");return t/r}function y(t){return t%(2*Math.PI)*180/Math.PI}function p(t){return t%360*Math.PI/180}function d(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}},387:function(t){var e,r;t.exports=(e=r={},Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,r){if(!e)throw new Error("No element specified.");(null==r?void 0:r.recursive)&&Array.prototype.forEach.call(e.children,(e=>{t(e,r)}));const n=getComputedStyle(e);Array.prototype.forEach.call((null==r?void 0:r.properties)||n,(t=>{e.style[t]=n.getPropertyValue(t)}))},r)},472:function(t,e,r){r.d(e,{c:function(){return o}});var n=window.DOMParser,o=function(t,e,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=t.includes("selected"),u=(new n).parseFromString(r,"text/html"),c=u.querySelector("svg");c.classList.add("fm-c-symbol"),c.classList.toggle("fm-c-symbol--selected",a),c.classList.toggle("fm-c-symbol--dark",o);var l=c.getAttribute("viewBox"),s=parseInt(l.split(" ")[2],10)*i,f=parseInt(l.split(" ")[3],10)*i;c.setAttribute("width",s),c.setAttribute("height",f),e&&c.setAttribute("fill",e);var h=c.querySelectorAll('[fill="#0b0c0c" i], [style*="fill:#0b0c0c" i]'),y=c.querySelectorAll('[stroke="#0b0c0c" i], [style*="stroke:#0b0c0c" i]');h.forEach((function(t){return t.classList.add("fm-c-symbol__ol-fill")})),y.forEach((function(t){return t.classList.add("fm-c-symbol__ol-stroke")}));var p=c.querySelectorAll('[fill="#fff" i], [fill="#ffffff" i], [style*="fill:#fff" i], [style*="fill:#ffffff" i]'),d=c.querySelectorAll('[stroke*="#fff" i], [stroke*="#ffffff" i], [style*="stroke:#fff" i], [style*="stroke:#ffffff" i]');p.forEach((function(t){return t.classList.add("fm-c-symbol__bg-fill")})),d.forEach((function(t){return t.classList.add("fm-c-symbol__bg-stroke")}));var m=c.querySelectorAll(':not(.fm-c-symbol__ol-fill):not(.fm-c-symbol__bg-fill)[fill], :not(.fm-c-symbol__ol-fill):not(.fm-c-symbol__bg-fill)[style*="fill"]'),v=c.querySelectorAll(':not(.fm-c-symbol__ol-stroke):not(.fm-c-symbol__bg-stroke)[stroke], :not(.fm-c-symbol__ol-stroke):not(.fm-c-symbol__bg-stroke)[style*="stroke"]');return m.forEach((function(t){return t.classList.add("fm-c-symbol__fg-fill")})),v.forEach((function(t){return t.classList.add("fm-c-symbol__fg-stroke")})),u.body.innerHTML}},480:function(t,e,r){r.d(e,{I:function(){return i}});var n=r(165),o=r(278);function i(t,e,r={}){var i=(0,n.uG)(t),a=(0,n.uG)(e),u=(0,o.tR)(a[1]-i[1]),c=(0,o.tR)(a[0]-i[0]),l=(0,o.tR)(i[1]),s=(0,o.tR)(a[1]),f=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(c/2),2)*Math.cos(l)*Math.cos(s);return(0,o.cJ)(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),r.units)}},651:function(t,e,r){r.d(e,{BS:function(){return E},CK:function(){return j},Ig:function(){return w},Ox:function(){return P},VH:function(){return m},X_:function(){return _},Yf:function(){return b},ZM:function(){return L},cj:function(){return A},dN:function(){return M},fC:function(){return N},gd:function(){return T},lq:function(){return v},mG:function(){return k},mK:function(){return x},qo:function(){return g},zw:function(){return S}});var n=r(480),o=r(278),i=r(18);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return(e=function(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return h(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var y=function(t){var e=.621371;return t<800?"".concat(t," metres"):t<5e3?(t/1e3*e).toFixed(1)+" miles":Math.round(t/1e3*e)+" miles"},p=function(t){return(t.closest("[data-fm-main]")||document.body).getBoundingClientRect()},d=function(t){if(t>=1e3){var e=t/1e3,r=Math.round(100*e)/100;return"".concat(r,"km")}return"".concat(Math.round(t),"m")},m=function(t){var e=1e6;if(t>=e){var r=(t/e).toFixed(2);return r=Number(r).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2}),"".concat(r,"km")}return"".concat(Math.ceil(t).toLocaleString(),"m")},v=function(t){var e=t.area,r=t.center,n=t.width,o=t.radius,i=e?m(e):null,a=r?r.map((function(t){return Math.round(t)})).join(", "):null,u=n?d(n):null,l=o?d(o):null;return c(c({},t),{},{areaDisplay:i,centerDisplay:a,widthDisplay:u,radiusDisplay:l})},g=function(t){if(3===t.length)return"BNG";var e=s(t,2),r=e[0],n=e[1];return r>=-180&&r<=180&&n>=-90&&n<=90?"WSG84":r>180&&n>90?"BNG":"Unknown"},b=function(t,e){var r;if(t[0]>1e3){var i=Math.abs(t[0]-e[0]),a=Math.abs(t[1]-e[1]);r=Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}else{var u=new o.zx(t),c=new o.zx(e);r=(0,n.I)(u,c,{units:"metres"})}return Math.round(r)},w=function(t,e){var r;if(t){var n=p(t),o=t.getBoundingClientRect(),i=o.x||o.left,a=o.y||o.top,u=n.x||n.left,c=n.y||n.top;r={top:(a-c)/e,left:(i-u)/e,right:(n.width-o.width-(i-u))/e,bottom:(n.height-o.height-(a-c))/e}}return Object.values(r).every((function(t){return t>=0}))&&r},x=function(t,e){var r;if(t){var n=p(t),o=t.getBoundingClientRect();r=[[((o.x||o.left)-(n.x||n.left)+10)/e,((o.y||o.top)-(n.y||n.top)+o.height-10)/e],[(o.width+((o.x||o.left)-(n.x||n.left))-10)/e,((o.y||o.top)-(n.y||n.top)+10)/e]]}return r},L=function(t,e){var r=p(t),n=t.getBoundingClientRect(),o=((n.x||n.left)-(r.x||r.left))/e,i=((n.y||n.top)-(r.y||r.top))/e;return[o+n.width/2/e,i+n.height/2/e]},O=function(t,e,r,n,o){var i=n||{},a=i.featuresTotal,u=i.featuresFocusTotal,c=i.isFeaturesInMap,l=i.isPixelFeaturesAtPixel,s=i.isPixelFeaturesInMap,f=o?u:a,h=o?r:e,p="";f?p="".concat(f," feature").concat(1===f?"":"s"," in this area. "):l?p="Data visible at the center coordinate. ":s?p="No data visible at the center coordinate. ":c&&(p="No feature data in this area. ");var d=o?"Focus area ":"",m=t?"Approximate centre ".concat(t,". "):"",v="Covering ".concat(function(t){var e=b([t[0],t[1]],[t[2],t[1]]),r=b([t[0],t[1]],[t[0],t[3]]);return"".concat(y(e)," by ").concat(y(r))}(h),". "),g=t?"":"Use ALT plus I to find closest place";return"".concat(d).concat(m).concat(v).concat(p).concat(g)},E=function(t){var e,r,n,o,i=t.action,a=t.isBoundsChange,u=t.place,c=t.isFocusArea,l=t.prevZoom,s=t.prevCenter,f=t.center,h=t.bounds,p=t.focusBounds,d=t.zoom,m=t.isMaxZoom,v=t.isMinZoom,g=t.features,w=t.label,x=t.featureId,L=null;if(w)L=w;else if(x)e=null==g?void 0:g.featuresInViewport,r=x,n=e.length,L=(o=e.findIndex((function(t){return t.id===r})))>=0&&"".concat(n," feature").concat(1!==n?"s":""," in this area. ").concat(e[o].name,". ").concat(o+1," of ").concat(n," highlighted.");else if("GEOCODE"===i)L=O(u,h,p,g,c);else if("DATA"===i)L="Map change: new data. Use ALT plus I to get new details";else if(a){var E=function(t,e,r,n,o,i){var a=JSON.stringify(t)===JSON.stringify(o),u=e===i,c=r?" (Maximum zoom reached)":"",l=n?" (Minimum zoom reached)":"",s="";return!t||!e||a&&u||(s=a||u?a?"Zoomed ".concat(i>e?"in":"out").concat(c).concat(l,". "):"Map move: ".concat(function(t,e){t=t.map((function(t){return t>1e3?Math.round(t):Math.round(1e5*t)/1e5})),e=e.map((function(t){return t>1e3?Math.round(t):Math.round(1e5*t)/1e5}));var r=[t[0],t[1]],n=[t[0],e[1]],o=[t[0],t[1]],i=[e[0],t[1]],a=b(r,n),u=b(o,i),c=function(t,e){return[t[0]<e[0]&&"east",t[0]>e[0]&&"west",t[1]<e[1]&&"north",t[1]>e[1]&&"south"].filter((function(t){return t&&"string"==typeof t}))}(t,e),l=c.filter((function(t){return["east","west"].includes(t)})).join(""),s=c.filter((function(t){return["north","south"].includes(t)})).join(""),f=l?"".concat(l," ").concat(y(u)):"",h=s?"".concat(s," ").concat(y(a)):"";return"".concat(h+(l&&s?", ":"")+f)}(t,o),". "):"New area".concat(c).concat(l,". ")),s}(s,l,m,v,f,d),P=O(u,h,p,g,c);L="".concat(E).concat(P)}else L="";return L},P=function(t,e,r,n){var o;return t||(o="RESET"===e?r:n),o},M=function(t,e){var r,n=i.NT["MAX_BOUNDS_".concat(e)],o=null==t?void 0:t.split(",");return Array.isArray(o)&&3===(null===(r=o)||void 0===r?void 0:r.length)&&(o=!(o=o.slice(0,2).map((function(t){return parseFloat(t)}))).some(isNaN)&&o)&&("27700"===e?o.filter((function(t){return t>=0})).length:o[0]>n[0]&&o[0]<n[2]&&o[1]>n[1]&&o[1]<n[3])?o:null},S=function(t){var e=null==t?void 0:t.split(",");if(!Array.isArray(e)||3!==(null==e?void 0:e.length))return null;var r=parseFloat(e[2]);return r.isNaN?null:r},j=function(t,e){var r=t.code.slice(-1);return e.length>=r?e[r-1].id:""},k=function(t){var e;if(function(t){var e,r=null==t||null===(e=t.coordinates)||void 0===e?void 0:e[0];if(65!==(null==r?void 0:r.length))return!1;for(var n=s(r[0],2),o=n[0],i=n[1],a=s(r[32],2),u=[(o+a[0])/2,(i+a[1])/2],c=1/0,l=-1/0,f=1/0,h=-1/0,y=0;y<64;y++){var p=s(r[y],2),d=p[0],m=p[1],v=s(r[(y+1)%64],2),b=v[0],w=v[1],x=Math.hypot(d-u[0],m-u[1]);c=Math.min(c,x),l=Math.max(l,x);var L=Math.hypot(b-d,w-m);f=Math.min(f,L),h=Math.max(h,L)}var O=(g(u),.3);return Math.abs(l-c)<O&&Math.abs(h-f)<O}(null==t?void 0:t.geometry))return"circle";if("polygon"===(null==t||null===(e=t.geometry)||void 0===e||null===(e=e.type)||void 0===e?void 0:e.toLowerCase())){var r,n=null===(r=t.geometry)||void 0===r?void 0:r.coordinates,o=n&&Array.from(new Set(n.flat(2)))||null;return 4===(null==o?void 0:o.length)?"square":"polygon"}return null},A=function(t,e,r){var n=r.filter((function(r){var n=Math.abs(r[0]-e[0]),o=Math.abs(r[1]-e[1]);return("up"===t?r[1]<=e[1]&&o>=n:"down"===t?r[1]>e[1]&&o>=n:"left"===t?r[0]<=e[0]&&o<n:r[0]>e[0]&&o<n)&&JSON.stringify(r)!==JSON.stringify(e)}));n.length||n.push(e);var o,i=n.map((function(t){return r=Math.abs(e[0]-t[0]),n=Math.abs(e[1]-t[1]),Math.sqrt(Math.pow(r,2)+Math.pow(n,2));var r,n})),a=n[i.indexOf(Math.min.apply(Math,(o=i,function(t){if(Array.isArray(t))return h(t)}(o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||f(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())))];return r.findIndex((function(t){return JSON.stringify(t)===JSON.stringify(a)}))},_=function(t){return{small:1,medium:1.5,large:2}[t]||1},N=function(t,e,r){var n=t.getBoundingClientRect(),o=n.left,i=n.top,a=e.nativeEvent;return[(a.clientX-o)/r,(a.clientY-i)/r]},T=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){return i.NT.STYLES.includes(t.name)})),e=window.localStorage.getItem("style");return t.find((function(t){return t.name===e}))||t.find((function(t){return"default"===t.name}))}}}]);
//# sourceMappingURL=flood-map-provider.js.map