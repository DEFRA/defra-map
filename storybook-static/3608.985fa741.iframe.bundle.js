"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[3608],{"./node_modules/@arcgis/core/arcade/functions/featuresetbase.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{registerFunctions:()=>pe});var t,Graphic=__webpack_require__("./node_modules/@arcgis/core/Graphic.js"),ArcadeDate=__webpack_require__("./node_modules/@arcgis/core/arcade/ArcadeDate.js"),ArcadePortal=__webpack_require__("./node_modules/@arcgis/core/arcade/ArcadePortal.js"),Dictionary=__webpack_require__("./node_modules/@arcgis/core/arcade/Dictionary.js"),executionError=__webpack_require__("./node_modules/@arcgis/core/arcade/executionError.js"),Feature=__webpack_require__("./node_modules/@arcgis/core/arcade/Feature.js"),featureSetUtils=__webpack_require__("./node_modules/@arcgis/core/arcade/featureSetUtils.js"),ImmutableArray=__webpack_require__("./node_modules/@arcgis/core/arcade/ImmutableArray.js"),languageUtils=__webpack_require__("./node_modules/@arcgis/core/chunks/languageUtils.js"),portalUtils=__webpack_require__("./node_modules/@arcgis/core/arcade/portalUtils.js"),Adapted=__webpack_require__("./node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js"),AttributeFilter=__webpack_require__("./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js"),OrderBy=__webpack_require__("./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js"),Top=__webpack_require__("./node_modules/@arcgis/core/arcade/featureset/actions/Top.js"),Empty=__webpack_require__("./node_modules/@arcgis/core/arcade/featureset/sources/Empty.js"),FeatureLayerMemory=__webpack_require__("./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerMemory.js"),OrderbyClause=__webpack_require__("./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js"),shared=__webpack_require__("./node_modules/@arcgis/core/arcade/featureset/support/shared.js"),sqlUtils=__webpack_require__("./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js"),fieldStats=__webpack_require__("./node_modules/@arcgis/core/arcade/functions/fieldStats.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),WhereClause=__webpack_require__("./node_modules/@arcgis/core/core/sql/WhereClause.js"),FeatureLayer=__webpack_require__("./node_modules/@arcgis/core/layers/FeatureLayer.js"),Field=__webpack_require__("./node_modules/@arcgis/core/layers/support/Field.js"),Portal=__webpack_require__("./node_modules/@arcgis/core/portal/Portal.js"),request=__webpack_require__("./node_modules/@arcgis/core/request.js"),deprecate=__webpack_require__("./node_modules/@arcgis/core/core/deprecate.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),jsonMap=__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js");!function(n){n[n.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",n[n.RTContainment=2]="RTContainment",n[n.RTAttachment=3]="RTAttachment",n[n.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",n[n.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"}(t||(t={}));new jsonMap.J({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"});const i=new jsonMap.J({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"});new jsonMap.J({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});var utils=__webpack_require__("./node_modules/@arcgis/core/rest/utils.js"),tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),reader=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js"),writer=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),Polyline=__webpack_require__("./node_modules/@arcgis/core/geometry/Polyline.js"),NetworkElement=__webpack_require__("./node_modules/@arcgis/core/rest/networks/support/NetworkElement.js");let p=class extends JSONSupport.A{constructor(o){super(o),this.globalId=null,this.associationType=null,this.fromNetworkElement=null,this.toNetworkElement=null,this.geometry=null,this.errorMessage=null,this.percentAlong=null,this.errorCode=null,this.isContentVisible=null,this.status=null}readFromNetworkElement(o,e){return new NetworkElement.A({globalId:e.fromGlobalId,networkSourceId:e.fromNetworkSourceId,terminalId:e.fromTerminalId})}writeFromNetworkElement(o,e){o&&(e.fromGlobalId=o.globalId,e.fromNetworkSourceId=o.networkSourceId,e.fromTerminalId=o.terminalId)}readToNetworkElement(o,e){return new NetworkElement.A({globalId:e.toGlobalId,networkSourceId:e.toNetworkSourceId,terminalId:e.toTerminalId})}writeToNetworkElement(o,e){o&&(e.toGlobalId=o.globalId,e.toNetworkSourceId=o.networkSourceId,e.toTerminalId=o.terminalId)}};(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],p.prototype,"globalId",void 0),(0,tslib_es6._)([(0,property.MZ)({type:i.apiValues,json:{type:i.jsonValues,read:i.read,write:i.write}})],p.prototype,"associationType",void 0),(0,tslib_es6._)([(0,property.MZ)({type:NetworkElement.A,json:{write:{target:{fromGlobalId:{type:String},fromNetworkSourceId:{type:Number},fromTerminalId:{type:Number}}},read:{source:["fromGlobalId","fromNetworkSourceId","fromTerminalId"]}}})],p.prototype,"fromNetworkElement",void 0),(0,tslib_es6._)([(0,reader.w)("fromNetworkElement")],p.prototype,"readFromNetworkElement",null),(0,tslib_es6._)([(0,writer.K)("fromNetworkElement")],p.prototype,"writeFromNetworkElement",null),(0,tslib_es6._)([(0,property.MZ)({type:NetworkElement.A,json:{write:{target:{toGlobalId:{type:String},toNetworkSourceId:{type:Number},toTerminalId:{type:Number}}},read:{source:["toGlobalId","toNetworkSourceId","toTerminalId"]}}})],p.prototype,"toNetworkElement",void 0),(0,tslib_es6._)([(0,reader.w)("toNetworkElement")],p.prototype,"readToNetworkElement",null),(0,tslib_es6._)([(0,writer.K)("toNetworkElement")],p.prototype,"writeToNetworkElement",null),(0,tslib_es6._)([(0,property.MZ)({type:Polyline.A,json:{write:!0}})],p.prototype,"geometry",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],p.prototype,"errorMessage",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],p.prototype,"percentAlong",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],p.prototype,"errorCode",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Boolean,json:{write:!0}})],p.prototype,"isContentVisible",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],p.prototype,"status",void 0),p=(0,tslib_es6._)([(0,subclass.$)("esri.rest.networks.support.Association")],p);const d=p;let QueryAssociationsResult_p=class extends JSONSupport.A{constructor(o){super(o),this.associations=[]}};(0,tslib_es6._)([(0,property.MZ)({type:[d],json:{write:!0}})],QueryAssociationsResult_p.prototype,"associations",void 0),QueryAssociationsResult_p=(0,tslib_es6._)([(0,subclass.$)("esri.rest.networks.support.QueryAssociationsResult")],QueryAssociationsResult_p);const QueryAssociationsResult_c=QueryAssociationsResult_p;function a(e){const{returnDeletes:t,elements:r,gdbVersion:s,moment:n}=e.toJSON();return{returnDeletes:t,elements:JSON.stringify(r.map((e=>({globalId:e.globalId,networkSourceId:e.networkSourceId,terminalId:e.terminalId})))),types:JSON.stringify(e.types.map((e=>i.toJSON(e)))).replaceAll('"connectivity"','"junctionJunctionConnectivity"'),gdbVersion:s,moment:n}}async function queryAssociations_p(o,p,m){const u=(0,utils.Dl)(o),l={...a(p),f:"json"},y=(0,utils.lF)({...u.query,...l}),d=(0,utils.jV)(y,{...m,method:"post"}),f=`${u.path}/associations/query`,{data:g}=await(0,request.A)(f,d),j=QueryAssociationsResult_c.fromJSON(g);return p.types.includes("connectivity")&&(0,deprecate.Lx)(Logger.A.getLogger("esri/rest/networks/support/QueryAssociationsParameters"),"types",{replacement:"Please use 'junction-junction-connectivity' instead of 'connectivity'.",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-rest-networks-support-QueryAssociationsParameters.html#types",version:"4.29",warnOnce:!0}),j}var m,ensureType=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");let n=m=class extends JSONSupport.A{static from(e){return(0,ensureType.PZ)(m,e)}constructor(e){super(e),this.returnDeletes=!1,this.elements=[],this.types=[],this.gdbVersion=null,this.moment=null}};(0,tslib_es6._)([(0,property.MZ)({type:Boolean,json:{write:!0}})],n.prototype,"returnDeletes",void 0),(0,tslib_es6._)([(0,property.MZ)({type:[NetworkElement.A],json:{write:!0}})],n.prototype,"elements",void 0),(0,tslib_es6._)([(0,property.MZ)({type:[i.apiValues],json:{type:i.jsonValues,read:i.read,write:i.write}})],n.prototype,"types",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],n.prototype,"gdbVersion",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Date,json:{type:Number,write:{writer:(e,t)=>{t.moment=e?.getTime()}}}})],n.prototype,"moment",void 0),n=m=(0,tslib_es6._)([(0,subclass.$)("esri.rest.networks.support.QueryAssociationsParameters")],n);const QueryAssociationsParameters_a=n;var guards=__webpack_require__("./node_modules/@arcgis/core/support/guards.js");function re(e,t,n){const i=e.getVariables();if(i.length>0){const a={};for(const e of i)a[e]=t.evaluateIdentifier(n,{name:e});e.parameters=a}return e}function oe(e,t,n=null){for(const i in e)if(i.toLowerCase()===t.toLowerCase())return e[i];return n}function se(e){if(null===e)return null;const t={type:oe(e,"type",""),name:oe(e,"name","")};if("range"===t.type)t.range=oe(e,"range",[]);else{t.codedValues=[];for(const n of oe(e,"codedValues",[]))t.codedValues.push({name:oe(n,"name",""),code:oe(n,"code",null)})}return t}function le(e){if(null===e)return null;const t={},n=oe(e,"wkt");null!==n&&(t.wkt=n);const i=oe(e,"wkid");return null!==i&&(t.wkid=i),t}function fe(e){if(null===e)return null;const t={hasZ:oe(e,"hasz",!1),hasM:oe(e,"hasm",!1)},n=oe(e,"spatialreference");null!=n&&(t.spatialReference=le(n));const i=oe(e,"x",null);if(null!==i)return t.x=i,t.y=oe(e,"y",null),t.hasZ&&(t.z=oe(e,"z",null)),t.hasM&&(t.m=oe(e,"m",null)),t;const a=oe(e,"rings",null);if(null!==a)return t.rings=a,t;const r=oe(e,"paths",null);if(null!==r)return t.paths=r,t;const o=oe(e,"points",null);if(null!==o)return t.points=o,t;for(const s of["xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"]){const n=oe(e,s,null);null!==n&&(t[s]=n)}return t}function ce(e){return"utc"===e?.toLowerCase()?"UTC":"unknown"===e?.toLowerCase()?"Unknown":e}async function me(t,n,i,o,s,l,d){const u=await t.getFeatureSetInfo();if(null===(u?.layerId??null))return null;if(!s.layerIdLookup.get(u.layerId))return null;const c=t.serviceUrl().replace(/\/FeatureServer/i,"/UtilityNetworkServer"),m=[];switch(i){case"connected":m.push("connectivity"),m.push("junction-edge-from-connectivity"),m.push("junction-edge-to-connectivity"),m.push("junction-edge-midspan-connectivity"),m.push("junction-junction-connectivity");break;case"container":case"content":m.push("containment");break;case"structure":case"attached":m.push("attachment");break;case"junctionedge":m.push("junction-edge-from-connectivity"),m.push("junction-edge-to-connectivity");break;case"midspan":m.push("junction-edge-midspan-connectivity");break;default:throw new executionError.D$(l,executionError.TX.InvalidParameter,d)}let p=null,y=!1;if(null!==o&&""!==o&&void 0!==o){for(const e of s.terminals)e.terminalName===o&&(p=e.terminalId);null===p&&(y=!0)}const w=[];if(!y){const a=new NetworkElement.A({globalId:n.field(t.globalIdField),networkSourceId:s.layerIdLookup.get(u.layerId).sourceId,...p?{terminalId:p}:""}),r=await queryAssociations_p(c,new QueryAssociationsParameters_a({types:m,elements:[a]}));let o=0;for(const t of r.associations){let n=null,r="",l="";if(t.fromNetworkElement?.globalId===a.globalId?(n=t.toNetworkElement,l="to"):t.toNetworkElement?.globalId===a.globalId&&(n=t.fromNetworkElement,l="from"),!n)continue;switch(i){case"attached":if("attachment"!==t.associationType)continue;if("to"!==l)continue;break;case"structure":if("attachment"!==t.associationType)continue;if("from"!==l)continue;break;case"container":if("containment"!==t.associationType)continue;if("from"!==l)continue;break;case"content":if("containment"!==t.associationType)continue;if("to"!==l)continue;break;case"connected":break;case"junctionedge":"junction-edge-to-connectivity"===t.associationType?r="to":"junction-edge-from-connectivity"===t.associationType&&(r="from");break;case"midspan":if("junction-edge-midspan-connectivity"!==t.associationType)continue}const f=s.sourceIdLookup.get(n.networkSourceId)?.className??"";w.push(new Graphic.default({geometry:null,attributes:{objectId:o++,globalId:n.globalId,percentAlong:t.percentAlong??0,isContentVisible:t.isContentVisible?0:1,className:f,side:r}}))}}const h=new FeatureLayer.default({source:w,geometryType:null,objectIdField:"objectId",globalIdField:"globalId",fields:[new Field.A({name:"objectId",alias:"objectId",type:"oid"}),new Field.A({name:"globalId",alias:"globalId",type:"global-id"}),new Field.A({name:"percentAlong",alias:"percentAlong",type:"double"}),new Field.A({name:"side",alias:"side",type:"string"}),new Field.A({name:"isContentVisible",alias:"isContentVisible",type:"integer"}),new Field.A({name:"className",alias:"className",type:"string"})]});return(0,featureSetUtils.constructFeatureSet)(h)}function pe(e){"async"===e.mode&&(e.functions.timezone=function(n,o){return e.standardFunctionAsync(n,o,(async(e,s,l)=>{if((0,languageUtils.D)(l,1,2,n,o),(0,languageUtils.k)(l[0]))return"Unknown";if((0,languageUtils.j)(l[0]))return"Unknown";if((0,languageUtils.p)(l[0])){if(await l[0].load(),1===l.length||null===l[1])return l[0].datesInUnknownTimezone?ce("unknown"):ce(l[0].dateFieldsTimeZone);if(!(l[1]instanceof Dictionary.A)||!1===l[1].hasField("type"))throw new executionError.D$(n,executionError.TX.InvalidParameter,o);const e=l[1].field("type");if(!1===(0,guards.Kg)(e))throw new executionError.D$(n,executionError.TX.InvalidParameter,o);switch((0,languageUtils.f)(e).toLowerCase()){case"preferredtimezone":return ce(l[0].preferredTimeZone);case"editfieldsinfo":return ce(l[0].editFieldsInfo?.timeZone??null);case"timeinfo":return ce(l[0].timeInfo?.timeZone??null);case"field":if(l[1].hasField("fieldname")&&(0,guards.Kg)(l[1].field("fieldname")))return ce(l[0].fieldTimeZone((0,languageUtils.f)(l[1].field("fieldname"))))}throw new executionError.D$(n,executionError.TX.InvalidParameter,o)}const f=(0,languageUtils.h)(l[0],(0,languageUtils.K)(n));if(null===f)return null;const d=f.timeZone;return"system"===d?ArcadeDate.lY.systemTimeZoneCanonicalName:"utc"===d.toLowerCase()?"UTC":"unknown"===d.toLowerCase()?"Unknown":d}))},e.functions.sqltimestamp=function(t,n){return e.standardFunctionAsync(t,n,(async(e,i,o)=>{(0,languageUtils.D)(o,1,3,t,n);const s=o[0];if((0,languageUtils.g)(s)){if(1===o.length)return s.toSQLWithKeyword();if(2===o.length)return s.changeTimeZone((0,languageUtils.f)(o[1])).toSQLWithKeyword();throw new executionError.D$(t,executionError.TX.InvalidParameter,n)}if((0,languageUtils.j)(s))return s.toSQLWithKeyword();if((0,languageUtils.p)(s)){if(3!==o.length)throw new executionError.D$(t,executionError.TX.InvalidParameter,n);await s.load();const e=(0,languageUtils.f)(o[1]);if((0,languageUtils.j)(o[2]))return o[2].toSQLWithKeyword();if(!1===(0,languageUtils.g)(o[2]))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);const i=s.fieldTimeZone(e);return null==i?o[2].toSQLWithKeyword():o[2].changeTimeZone(i).toSQLWithKeyword()}throw new executionError.D$(t,executionError.TX.InvalidParameter,n)}))},e.signatures.push({name:"sqltimestamp",min:2,max:4}),e.functions.featuresetbyid=function(t,n){return e.standardFunctionAsync(t,n,((e,i,o)=>{if((0,languageUtils.D)(o,2,4,t,n),(0,languageUtils.o)(o[0])){const e=(0,languageUtils.f)(o[1]);let i=(0,languageUtils.J)(o[2],null);const s=(0,languageUtils.e)((0,languageUtils.J)(o[3],!0));if(null===i&&(i=["*"]),!1===(0,guards.cy)(i))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);return o[0].featureSetById(e,s,i)}throw new executionError.D$(t,executionError.TX.InvalidParameter,n)}))},e.signatures.push({name:"featuresetbyid",min:2,max:4}),e.functions.getfeatureset=function(t,n){return e.standardFunctionAsync(t,n,(async(e,i,o)=>{if((0,languageUtils.D)(o,1,2,t,n),(0,languageUtils.n)(o[0])){let e=(0,languageUtils.J)(o[1],"datasource");return null===e&&(e="datasource"),e=(0,languageUtils.f)(e).toLowerCase(),(0,featureSetUtils.convertToFeatureSet)(o[0].fullSchema(),e,t.lrucache,t.interceptor,t.spatialReference??null)}throw new executionError.D$(t,executionError.TX.InvalidParameter,n)}))},e.signatures.push({name:"getfeatureset",min:1,max:2}),e.functions.featuresetbyportalitem=function(t,i){return e.standardFunctionAsync(t,i,((e,o,s)=>{if((0,languageUtils.D)(s,2,5,t,i),null===s[0])throw new executionError.D$(t,executionError.TX.PortalRequired,i);if(s[0]instanceof ArcadePortal.A){const e=(0,languageUtils.f)(s[1]),n=(0,languageUtils.f)(s[2]);let o=(0,languageUtils.J)(s[3],null);const f=(0,languageUtils.e)((0,languageUtils.J)(s[4],!0));if(null===o&&(o=["*"]),!1===(0,guards.cy)(o))throw new executionError.D$(t,executionError.TX.InvalidParameter,i);let d;return d=t.services?.portal?t.services.portal:Portal.A.getDefault(),d=(0,portalUtils.R)(s[0],d),(0,featureSetUtils.constructFeatureSetFromPortalItem)(e,n,t.spatialReference??null,o,f,d,t.lrucache,t.interceptor)}if(!1===(0,guards.Kg)(s[0]))throw new executionError.D$(t,executionError.TX.PortalRequired,i);const f=(0,languageUtils.f)(s[0]),d=(0,languageUtils.f)(s[1]);let u=(0,languageUtils.J)(s[2],null);const c=(0,languageUtils.e)((0,languageUtils.J)(s[3],!0));if(null===u&&(u=["*"]),!1===(0,guards.cy)(u))throw new executionError.D$(t,executionError.TX.InvalidParameter,i);return(0,featureSetUtils.constructFeatureSetFromPortalItem)(f,d,t.spatialReference??null,u,c,t.services?.portal??Portal.A.getDefault(),t.lrucache,t.interceptor)}))},e.signatures.push({name:"featuresetbyportalitem",min:2,max:5}),e.functions.featuresetbyname=function(t,n){return e.standardFunctionAsync(t,n,((e,i,o)=>{if((0,languageUtils.D)(o,2,4,t,n),(0,languageUtils.o)(o[0])){const e=(0,languageUtils.f)(o[1]);let i=(0,languageUtils.J)(o[2],null);const s=(0,languageUtils.e)((0,languageUtils.J)(o[3],!0));if(null===i&&(i=["*"]),!1===(0,guards.cy)(i))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);return o[0].featureSetByName(e,s,i)}throw new executionError.D$(t,executionError.TX.InvalidParameter,n)}))},e.signatures.push({name:"featuresetbyname",min:2,max:4}),e.functions.featureset=function(t,n){return e.standardFunction(t,n,((e,o,s)=>{(0,languageUtils.D)(s,1,1,t,n);const l={layerDefinition:{geometryType:"",objectIdField:"",globalIdField:"",typeIdField:"",hasM:!1,hasZ:!1,fields:[]},featureSet:{geometryType:"",features:[]}};if((0,guards.Kg)(s[0])){const e=JSON.parse(s[0]);void 0!==e.layerDefinition?(l.layerDefinition=e.layerDefinition,l.featureSet=e.featureSet,e.layerDefinition.spatialReference&&(l.layerDefinition.spatialReference=e.layerDefinition.spatialReference)):(l.featureSet.features=e.features,l.featureSet.geometryType=e.geometryType,l.layerDefinition.geometryType=l.featureSet.geometryType,l.layerDefinition.objectIdField=e.objectIdFieldName??"",l.layerDefinition.typeIdField=e.typeIdFieldName,l.layerDefinition.globalIdField=e.globalIdFieldName,l.layerDefinition.fields=e.fields,e.spatialReference&&(l.layerDefinition.spatialReference=e.spatialReference))}else{if(!(s[0]instanceof Dictionary.A))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);{const e=JSON.parse(s[0].castToText(!0)),i=oe(e,"layerdefinition");if(null!==i){l.layerDefinition.geometryType=oe(i,"geometrytype",""),l.featureSet.geometryType=l.layerDefinition.geometryType,l.layerDefinition.globalIdField=oe(i,"globalidfield",""),l.layerDefinition.objectIdField=oe(i,"objectidfield",""),l.layerDefinition.typeIdField=oe(i,"typeidfield",""),l.layerDefinition.hasZ=!0===oe(i,"hasz",!1),l.layerDefinition.hasM=!0===oe(i,"hasm",!1);const t=oe(i,"spatialreference");t&&(l.layerDefinition.spatialReference=le(t));const n=[];for(const e of oe(i,"fields",[])){const t={name:oe(e,"name",""),alias:oe(e,"alias",""),type:oe(e,"type",""),nullable:oe(e,"nullable",!0),editable:oe(e,"editable",!0),length:oe(e,"length",null),domain:se(oe(e,"domain"))};n.push(t)}l.layerDefinition.fields=n;const a=oe(e,"featureset");if(a){const e={};for(const t of n)e[t.name.toLowerCase()]=t.name;for(const t of oe(a,"features",[])){const n={},i=oe(t,"attributes",{});for(const t in i)n[e[t.toLowerCase()]]=i[t];l.featureSet.features.push({attributes:n,geometry:fe(oe(t,"geometry"))})}}}else{l.layerDefinition.hasZ=!0===oe(e,"hasz",!1),l.layerDefinition.hasM=!0===oe(e,"hasm",!1),l.layerDefinition.geometryType=oe(e,"geometrytype",""),l.featureSet.geometryType=l.layerDefinition.geometryType,l.layerDefinition.objectIdField=oe(e,"objectidfieldname",""),l.layerDefinition.typeIdField=oe(e,"typeidfieldname","");const i=oe(e,"spatialreference");i&&(l.layerDefinition.spatialReference=le(i));const o=[],s=oe(e,"fields",null);if(!(0,guards.cy)(s))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);for(const e of s){const t={name:oe(e,"name",""),alias:oe(e,"alias",""),type:oe(e,"type",""),nullable:oe(e,"nullable",!0),editable:oe(e,"editable",!0),length:oe(e,"length",null),domain:se(oe(e,"domain"))};o.push(t)}l.layerDefinition.fields=o;const f={};for(const e of o)f[e.name.toLowerCase()]=e.name;let d=oe(e,"features",null);if((0,guards.cy)(d))for(const e of d){const t={},n=oe(e,"attributes",{});for(const e in n)t[f[e.toLowerCase()]]=n[e];l.featureSet.features.push({attributes:t,geometry:fe(oe(e,"geometry",null))})}else d=null,l.featureSet.features=d}}}if(!1===function ue(e){return!!e.layerDefinition&&!!e.featureSet&&!1!==function de(e,t){for(const n of t)if(n===e)return!0;return!1}(e.layerDefinition.geometryType,["",null,"esriGeometryNull","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","esriGeometryEnvelope"])&&!1!==(0,guards.cy)(e.layerDefinition.fields)&&!1!==(0,guards.cy)(e.featureSet.features)}(l))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);return l.layerDefinition.geometryType||(l.layerDefinition.geometryType="esriGeometryNull"),FeatureLayerMemory.A.create(l,t.spatialReference)}))},e.signatures.push({name:"featureset",min:1,max:1}),e.functions.filter=function(t,n){return e.standardFunctionAsync(t,n,(async(i,o,s)=>{if((0,languageUtils.D)(s,2,2,t,n),(0,guards.cy)(s[0])||(0,languageUtils.m)(s[0])){const e=[];let i,o=s[0];if(o instanceof ImmutableArray.A&&(o=o.toArray()),!(0,languageUtils.i)(s[1]))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);i=s[1].createFunction(t);for(const t of o){const n=i(t);(0,promiseUtils.$X)(n)?!0===await n&&e.push(t):!0===n&&e.push(t)}return e}if((0,languageUtils.p)(s[0])){const n=await s[0].load(),i=WhereClause.default.create(s[1],{fieldsIndex:n.getFieldsIndex(),timeZone:n.dateFieldsTimeZoneDefaultUTC}),a=i.getVariables();if(a.length>0){const n={};for(const i of a)n[i]=e.evaluateIdentifier(t,{name:i});i.parameters=n}return new AttributeFilter.A({parentfeatureset:s[0],whereclause:i})}throw new executionError.D$(t,executionError.TX.InvalidParameter,n)}))},e.signatures.push({name:"filter",min:2,max:2}),e.functions.orderby=function(t,n){return e.standardFunctionAsync(t,n,(async(e,i,o)=>{if((0,languageUtils.D)(o,2,2,t,n),(0,languageUtils.p)(o[0])){const e=new OrderbyClause.A(o[1]);return new OrderBy.A({parentfeatureset:o[0],orderbyclause:e})}throw new executionError.D$(t,executionError.TX.InvalidParameter,n)}))},e.signatures.push({name:"orderby",min:2,max:2}),e.functions.top=function(t,n){return e.standardFunctionAsync(t,n,(async(e,i,o)=>{if((0,languageUtils.D)(o,2,2,t,n),(0,languageUtils.p)(o[0]))return new Top.A({parentfeatureset:o[0],topnum:o[1]});if((0,guards.cy)(o[0]))return(0,languageUtils.t)(o[1])>=o[0].length?o[0].slice():o[0].slice(0,(0,languageUtils.t)(o[1]));if((0,languageUtils.m)(o[0]))return(0,languageUtils.t)(o[1])>=o[0].length()?o[0].slice():o[0].slice(0,(0,languageUtils.t)(o[1]));throw new executionError.D$(t,executionError.TX.InvalidParameter,n)}))},e.signatures.push({name:"top",min:2,max:2}),e.functions.first=function(t,n){return e.standardFunctionAsync(t,n,(async(e,i,a)=>{if((0,languageUtils.D)(a,1,1,t,n),(0,languageUtils.p)(a[0])){const n=await a[0].first(e.abortSignal);if(null!==n){const e=Feature.A.createFromGraphicLikeObject(n.geometry,n.attributes,a[0],t.timeZone);return e._underlyingGraphic=n,e}return n}return(0,guards.cy)(a[0])?0===a[0].length?null:a[0][0]:(0,languageUtils.m)(a[0])?0===a[0].length()?null:a[0].get(0):null}))},e.signatures.push({name:"first",min:1,max:1}),e.functions.attachments=function(t,n){return e.standardFunctionAsync(t,n,(async(e,o,s)=>{(0,languageUtils.D)(s,1,2,t,n);const l={minsize:-1,maxsize:-1,types:null,returnMetadata:!1};if(s.length>1)if(s[1]instanceof Dictionary.A){if(s[1].hasField("minsize")&&(l.minsize=(0,languageUtils.t)(s[1].field("minsize"))),s[1].hasField("metadata")&&(l.returnMetadata=(0,languageUtils.e)(s[1].field("metadata"))),s[1].hasField("maxsize")&&(l.maxsize=(0,languageUtils.t)(s[1].field("maxsize"))),s[1].hasField("types")){const e=(0,languageUtils.$)(s[1].field("types"),!1);e.length>0&&(l.types=e)}}else if(null!==s[1])throw new executionError.D$(t,executionError.TX.InvalidParameter,n);if((0,languageUtils.n)(s[0])){const e=s[0]._layer;let n;if((0,languageUtils.p)(e))n=e;else{if(null==e||!(0,shared.eB)(e))return[];n=(0,featureSetUtils.constructFeatureSet)(e,t.spatialReference,["*"],!0,t.lrucache,t.interceptor)}return await n.load(),n.queryAttachments(s[0].field(n.objectIdField),l.minsize,l.maxsize,l.types,l.returnMetadata)}if(null===s[0])return[];throw new executionError.D$(t,executionError.TX.InvalidParameter,n)}))},e.signatures.push({name:"attachments",min:1,max:2}),e.functions.featuresetbyrelationshipname=function(t,n){return e.standardFunctionAsync(t,n,(async(e,i,o)=>{(0,languageUtils.D)(o,2,4,t,n);const s=o[0],l=(0,languageUtils.f)(o[1]);let c=(0,languageUtils.J)(o[2],null);const m=(0,languageUtils.e)((0,languageUtils.J)(o[3],!0));if(null===c&&(c=["*"]),!1===(0,guards.cy)(c))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);if(null===o[0])return null;if(!(0,languageUtils.n)(o[0]))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);const y=s._layer;let w;if((0,languageUtils.p)(y))w=y;else{if(null==y||!(0,shared.eB)(y))return null;w=(0,featureSetUtils.constructFeatureSet)(y,t.spatialReference,["*"],!0,t.lrucache,t.interceptor)}w=await w.load();const g=w.relationshipMetaData().filter((e=>e.name===l));if(0===g.length)return null;if(void 0!==g[0].relationshipTableId&&null!==g[0].relationshipTableId&&g[0].relationshipTableId>-1)return(0,featureSetUtils.constructFeatureSetFromRelationship)(w,g[0],s.field(w.objectIdField),w.spatialReference,c,m,t.lrucache,t.interceptor);let F=w.serviceUrl();if(!F)return null;F="/"===F.charAt(F.length-1)?F+g[0].relatedTableId.toString():F+"/"+g[0].relatedTableId.toString();const b=await(0,featureSetUtils.constructFeatureSetFromUrl)(F,w.spatialReference,c,m,t.lrucache,t.interceptor);await b.load();let T=b.relationshipMetaData();if(T=T.filter((e=>e.id===g[0].id)),!1===s.hasField(g[0].keyField)||null===s.field(g[0].keyField)){const e=await w.getFeatureByObjectId(s.field(w.objectIdField),[g[0].keyField]);if(e){const t=WhereClause.default.create(T[0].keyField+"= @id",{fieldsIndex:b.getFieldsIndex(),timeZone:b.dateFieldsTimeZoneDefaultUTC});return t.parameters={id:e.attributes[g[0].keyField]},b.filter(t)}return new Empty.A({parentfeatureset:b})}const N=WhereClause.default.create(T[0].keyField+"= @id",{fieldsIndex:b.getFieldsIndex(),timeZone:b.dateFieldsTimeZoneDefaultUTC});return N.parameters={id:s.field(g[0].keyField)},b.filter(N)}))},e.signatures.push({name:"featuresetbyrelationshipname",min:2,max:4}),e.functions.featuresetbyassociation=function(t,n){return e.standardFunctionAsync(t,n,(async(e,i,o)=>{(0,languageUtils.D)(o,2,3,t,n);const s=o[0],l=(0,languageUtils.f)((0,languageUtils.J)(o[1],"")).toLowerCase(),d=(0,guards.Kg)(o[2])?(0,languageUtils.f)(o[2]):null;if(null===o[0])return null;if(!(0,languageUtils.n)(o[0]))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);let u=s._layer;if(u instanceof FeatureLayer.default&&(u=(0,featureSetUtils.constructFeatureSet)(u,t.spatialReference,["*"],!0,t.lrucache,t.interceptor)),null===u)return null;if(!1===(0,languageUtils.p)(u))return null;await u.load();const m=u.serviceUrl(),y=await(0,featureSetUtils.constructAssociationMetaDataFeatureSetFromUrl)(m,t.spatialReference,!0);if(y.unVersion>=8)return await me(u,s,l,d,y,t,n);const w=y.associations;let g=null,F=null,b=!1;if(null!==d&&""!==d&&void 0!==d){for(const e of y.terminals)e.terminalName===d&&(F=e.terminalId);null===F&&(b=!0)}const T=w.getFieldsIndex(),x=T.get("TOGLOBALID").name,N=T.get("FROMGLOBALID").name,A=T.get("TOTERMINALID").name,v=T.get("FROMTERMINALID").name,S=T.get("FROMNETWORKSOURCEID").name,j=T.get("TONETWORKSOURCEID").name,U=T.get("ASSOCIATIONTYPE").name,M=T.get("ISCONTENTVISIBLE").name,R=T.get("OBJECTID").name;for(const t of u.fields)if("global-id"===t.type){g=s.field(t.name);break}let O=null,z=new Adapted.Gr(new Field.A({name:"percentalong",alias:"percentalong",type:"double"}),WhereClause.default.create("0",{fieldsIndex:w.getFieldsIndex(),timeZone:w.dateFieldsTimeZoneDefaultUTC})),W=new Adapted.Gr(new Field.A({name:"side",alias:"side",type:"string"}),WhereClause.default.create("''",{fieldsIndex:w.getFieldsIndex(),timeZone:w.dateFieldsTimeZoneDefaultUTC}));const H="globalid",V="globalId",_={};for(const t in y.lkp)_[t]=y.lkp[t].sourceId;const K=new Adapted.bV(new Field.A({name:"classname",alias:"classname",type:"string"}),null,_);let J="";switch(l){case"midspan":{J=`((${x}='${g}') OR ( ${N}='${g}')) AND (${U} IN (5))`,K.codefield=WhereClause.default.create(`CASE WHEN (${x}='${g}') THEN ${S} ELSE ${j} END`,{fieldsIndex:w.getFieldsIndex(),timeZone:w.dateFieldsTimeZoneDefaultUTC});const e=(0,shared.ke)(Adapted.a.findField(w.fields,N));e.name=H,e.alias=H,O=new Adapted.Gr(e,WhereClause.default.create(`CASE WHEN (${N}='${g}') THEN ${x} ELSE ${N} END`,{fieldsIndex:w.getFieldsIndex(),timeZone:w.dateFieldsTimeZoneDefaultUTC})),z=y.unVersion>=4?new Adapted.IO(Adapted.a.findField(w.fields,T.get("PERCENTALONG").name)):new Adapted.Gr(new Field.A({name:"percentalong",alias:"percentalong",type:"double"}),WhereClause.default.create("0",{fieldsIndex:w.getFieldsIndex(),timeZone:w.dateFieldsTimeZoneDefaultUTC}));break}case"junctionedge":{J=`((${x}='${g}') OR ( ${N}='${g}')) AND (${U} IN (4,6))`,K.codefield=WhereClause.default.create(`CASE WHEN (${x}='${g}') THEN ${S} ELSE ${j} END`,{fieldsIndex:w.getFieldsIndex(),timeZone:w.dateFieldsTimeZoneDefaultUTC});const e=(0,shared.ke)(Adapted.a.findField(w.fields,N));e.name=H,e.alias=H,O=new Adapted.Gr(e,WhereClause.default.create(`CASE WHEN (${N}='${g}') THEN ${x} ELSE ${N} END`,{fieldsIndex:w.getFieldsIndex(),timeZone:w.dateFieldsTimeZoneDefaultUTC})),W=new Adapted.Gr(new Field.A({name:"side",alias:"side",type:"string"}),WhereClause.default.create(`CASE WHEN (${U}=4) THEN 'from' ELSE 'to' END`,{fieldsIndex:w.getFieldsIndex(),timeZone:w.dateFieldsTimeZoneDefaultUTC}));break}case"connected":{let e=`${x}='@T'`,t=`${N}='@T'`;null!==F&&(e+=` AND ${A}=@A`,t+=` AND ${v}=@A`),J="(("+e+") OR ("+t+"))",J=(0,languageUtils.W)(J,"@T",g??""),e=(0,languageUtils.W)(e,"@T",g??""),null!==F&&(e=(0,languageUtils.W)(e,"@A",F.toString()),J=(0,languageUtils.W)(J,"@A",F.toString())),K.codefield=WhereClause.default.create("CASE WHEN "+e+` THEN ${S} ELSE ${j} END`,{fieldsIndex:w.getFieldsIndex(),timeZone:w.dateFieldsTimeZoneDefaultUTC});const n=(0,shared.ke)(Adapted.a.findField(w.fields,N));n.name=H,n.alias=H,O=new Adapted.Gr(n,WhereClause.default.create("CASE WHEN "+e+` THEN ${N} ELSE ${x} END`,{fieldsIndex:w.getFieldsIndex(),timeZone:w.dateFieldsTimeZoneDefaultUTC}));break}case"container":J=`${x}='${g}' AND ${U} = 2`,null!==F&&(J+=` AND ${A} = `+F.toString()),K.codefield=S,J="( "+J+" )",O=new Adapted.p8(Adapted.a.findField(w.fields,N),H,H);break;case"content":J=`(${N}='${g}' AND ${U} = 2)`,null!==F&&(J+=` AND ${v} = `+F.toString()),K.codefield=j,J="( "+J+" )",O=new Adapted.p8(Adapted.a.findField(w.fields,x),H,H);break;case"structure":J=`(${x}='${g}' AND ${U} = 3)`,null!==F&&(J+=` AND ${A} = `+F.toString()),K.codefield=S,J="( "+J+" )",O=new Adapted.p8(Adapted.a.findField(w.fields,N),H,V);break;case"attached":J=`(${N}='${g}' AND ${U} = 3)`,null!==F&&(J+=` AND ${v} = `+F.toString()),K.codefield=j,J="( "+J+" )",O=new Adapted.p8(Adapted.a.findField(w.fields,x),H,V);break;default:throw new executionError.D$(t,executionError.TX.InvalidParameter,n)}return b&&(J="1 <> 1"),new Adapted.a({parentfeatureset:w,adaptedFields:[new Adapted.IO(Adapted.a.findField(w.fields,R)),new Adapted.IO(Adapted.a.findField(w.fields,M)),O,W,K,z],extraFilter:J?WhereClause.default.create(J,{fieldsIndex:w.getFieldsIndex(),timeZone:w.dateFieldsTimeZoneDefaultUTC}):null})}))},e.signatures.push({name:"featuresetbyassociation",min:2,max:6}),e.functions.groupby=function(t,n){return e.standardFunctionAsync(t,n,(async(o,s,l)=>{if((0,languageUtils.D)(l,3,3,t,n),!(0,languageUtils.p)(l[0]))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);const f=await l[0].load(),d=[],u=[];let c=!1,m=[];if((0,guards.Kg)(l[1]))m.push(l[1]);else if(l[1]instanceof Dictionary.A)m.push(l[1]);else if((0,guards.cy)(l[1]))m=l[1];else{if(!(0,languageUtils.m)(l[1]))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);m=l[1].toArray()}for(const e of m)if((0,guards.Kg)(e)){const t=WhereClause.default.create((0,languageUtils.f)(e),{fieldsIndex:f.getFieldsIndex(),timeZone:f.dateFieldsTimeZoneDefaultUTC}),n=!0===(0,sqlUtils.DA)(t)?(0,languageUtils.f)(e):"%%%%FIELDNAME";d.push({name:n,expression:t}),"%%%%FIELDNAME"===n&&(c=!0)}else{if(!(e instanceof Dictionary.A))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);{const i=e.hasField("name")?e.field("name"):"%%%%FIELDNAME",o=e.hasField("expression")?e.field("expression"):"";if("%%%%FIELDNAME"===i&&(c=!0),!i)throw new executionError.D$(t,executionError.TX.InvalidParameter,n);d.push({name:i,expression:WhereClause.default.create(o||i,{fieldsIndex:f.getFieldsIndex(),timeZone:f.dateFieldsTimeZoneDefaultUTC})})}}if(m=[],(0,guards.Kg)(l[2]))m.push(l[2]);else if((0,guards.cy)(l[2]))m=l[2];else if((0,languageUtils.m)(l[2]))m=l[2].toArray();else{if(!(l[2]instanceof Dictionary.A))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);m.push(l[2])}for(const e of m){if(!(e instanceof Dictionary.A))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);{const i=e.hasField("name")?e.field("name"):"",o=e.hasField("statistic")?e.field("statistic"):"",s=e.hasField("expression")?e.field("expression"):"";if(!i||!o||!s)throw new executionError.D$(t,executionError.TX.InvalidParameter,n);u.push({name:i,statistic:o.toLowerCase(),expression:WhereClause.default.create(s,{fieldsIndex:f.getFieldsIndex(),timeZone:f.dateFieldsTimeZoneDefaultUTC})})}}if(c){const e={};for(const n of f.fields)e[n.name.toLowerCase()]=1;for(const n of d)"%%%%FIELDNAME"!==n.name&&(e[n.name.toLowerCase()]=1);for(const n of u)"%%%%FIELDNAME"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of d)if("%%%%FIELDNAME"===n.name){for(;1===e["field_"+t.toString()];)t++;e["field_"+t.toString()]=1,n.name="FIELD_"+t.toString()}}for(const n of d)re(n.expression,e,t);for(const n of u)re(n.expression,e,t);return l[0].groupby(d,u)}))},e.signatures.push({name:"groupby",min:3,max:3}),e.functions.distinct=function(t,n){return e.standardFunctionAsync(t,n,(async(o,s,l)=>{if((0,languageUtils.p)(l[0])){(0,languageUtils.D)(l,2,2,t,n);const o=await l[0].load(),s=[];let f=[];if((0,guards.Kg)(l[1]))f.push(l[1]);else if(l[1]instanceof Dictionary.A)f.push(l[1]);else if((0,guards.cy)(l[1]))f=l[1];else{if(!(0,languageUtils.m)(l[1]))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);f=l[1].toArray()}let d=!1;for(const e of f)if((0,guards.Kg)(e)){const t=WhereClause.default.create((0,languageUtils.f)(e),{fieldsIndex:o.getFieldsIndex(),timeZone:o.dateFieldsTimeZoneDefaultUTC}),n=!0===(0,sqlUtils.DA)(t)?(0,languageUtils.f)(e):"%%%%FIELDNAME";s.push({name:n,expression:t}),"%%%%FIELDNAME"===n&&(d=!0)}else{if(!(e instanceof Dictionary.A))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);{const i=e.hasField("name")?e.field("name"):"%%%%FIELDNAME",l=e.hasField("expression")?e.field("expression"):"";if("%%%%FIELDNAME"===i&&(d=!0),!i)throw new executionError.D$(t,executionError.TX.InvalidParameter,n);s.push({name:i,expression:WhereClause.default.create(l||i,{fieldsIndex:o.getFieldsIndex(),timeZone:o.dateFieldsTimeZoneDefaultUTC})})}}if(d){const e={};for(const n of o.fields)e[n.name.toLowerCase()]=1;for(const n of s)"%%%%FIELDNAME"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of s)if("%%%%FIELDNAME"===n.name){for(;1===e["field_"+t.toString()];)t++;e["field_"+t.toString()]=1,n.name="FIELD_"+t.toString()}}for(const n of s)re(n.expression,e,t);return l[0].groupby(s,[])}return function ae(e){if(1===e.length){if((0,guards.cy)(e[0]))return(0,fieldStats.t)("distinct",e[0],-1);if((0,languageUtils.m)(e[0]))return(0,fieldStats.t)("distinct",e[0].toArray(),-1)}return(0,fieldStats.t)("distinct",e,-1)}(l)}))},e.functions.getfeaturesetinfo=function(t,n){return e.standardFunctionAsync(t,n,(async(e,a,r)=>{if((0,languageUtils.D)(r,1,1,t,n),!(0,languageUtils.p)(r[0]))return null;const o=await r[0].getFeatureSetInfo();return o?Dictionary.A.convertObjectToArcadeDictionary({layerId:o.layerId,layerName:o.layerName,itemId:o.itemId,serviceLayerUrl:o.serviceLayerUrl,webMapLayerId:o.webMapLayerId??null,webMapLayerTitle:o.webMapLayerTitle??null,className:null,objectClassId:null},(0,languageUtils.K)(t),!1,!1):null}))},e.signatures.push({name:"getfeaturesetinfo",min:1,max:1}),e.functions.filterbysubtypecode=function(t,n){return e.standardFunctionAsync(t,n,(async(e,i,o)=>{if((0,languageUtils.D)(o,2,2,t,n),(0,languageUtils.p)(o[0])){const e=await o[0].load(),i=o[1];if(!(0,guards.Fq)(i))throw new executionError.D$(t,executionError.TX.InvalidParameter,n);if(e.subtypeField){const t=WhereClause.default.create(`${e.subtypeField}= ${o[1]}`,{fieldsIndex:e.getFieldsIndex(),timeZone:e.dateFieldsTimeZoneDefaultUTC});return new AttributeFilter.A({parentfeatureset:o[0],whereclause:t})}if(null===e.typeIdField||""===e.typeIdField)throw new executionError.D$(t,executionError.TX.FeatureSetDoesNotHaveSubtypes,n);const s=WhereClause.default.create(`${e.typeIdField}= ${o[1]}`,{fieldsIndex:e.getFieldsIndex(),timeZone:e.dateFieldsTimeZoneDefaultUTC});return new AttributeFilter.A({parentfeatureset:o[0],whereclause:s})}throw new executionError.D$(t,executionError.TX.InvalidParameter,n)}))},e.signatures.push({name:"filterbysubtypecode",min:2,max:2}))}},"./node_modules/@arcgis/core/arcade/portalUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>l});var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/portal/Portal.js");function l(l,t){return null===l?t:new _portal_Portal_js__WEBPACK_IMPORTED_MODULE_0__.A({url:l.field("url")})}},"./node_modules/@arcgis/core/rest/networks/support/NetworkElement.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>p});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));let s=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__.A{constructor(o){super(o),this.assetGroupCode=null,this.assetTypeCode=null,this.globalId=null,this.networkSourceId=null,this.objectId=null,this.positionFrom=null,this.positionTo=null,this.terminalId=null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.MZ)({type:Number,json:{write:!0}})],s.prototype,"assetGroupCode",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.MZ)({type:Number,json:{write:!0}})],s.prototype,"assetTypeCode",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.MZ)({type:String,json:{write:!0}})],s.prototype,"globalId",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.MZ)({type:Number,json:{write:!0}})],s.prototype,"networkSourceId",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.MZ)({type:Number,json:{write:!0}})],s.prototype,"objectId",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.MZ)({type:Number,json:{write:!0}})],s.prototype,"positionFrom",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.MZ)({type:Number,json:{write:!0}})],s.prototype,"positionTo",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.MZ)({type:Number,json:{write:!0}})],s.prototype,"terminalId",void 0),s=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.$)("esri.rest.networks.support.NetworkElement")],s);const p=s},"./node_modules/@arcgis/core/rest/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Dl:()=>f,jV:()=>i,lF:()=>s});__webpack_require__("./node_modules/@arcgis/core/config.js"),__webpack_require__("./node_modules/@arcgis/core/kernel.js");var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js");__webpack_require__("./node_modules/@arcgis/core/support/apiKeyUtils.js");function i(r,t){return t?{...t,query:{...r??{},...t.query}}:{query:r}}function f(r){return"string"==typeof r?(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.An)(r):(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.o8)(r)}function s(r,t,o){const n={};for(const e in r){if("declaredClass"===e)continue;const i=r[e];if(null!=i&&"function"!=typeof i)if(Array.isArray(i))n[e]=i.map((r=>s(r)));else if("object"==typeof i)if(i.toJSON){const r=i.toJSON(o?.[e]);n[e]=t?r:JSON.stringify(r)}else n[e]=t?i:JSON.stringify(i);else n[e]=i}return n}}}]);