/*! For license information please see flood-map-geocode.js.LICENSE.txt */
"use strict";(self.webpackChunkdefra=self.webpackChunkdefra||[]).push([[163],{74:function(t,r,e){e.d(r,{Gf:function(){return f},NU:function(){return c},cJ:function(){return h},g5:function(){return l},n1:function(){return s},nv:function(){return p},tR:function(){return d},wi:function(){return u},zX:function(){return n},zx:function(){return a}});var n=6371008.8,o={centimeters:100*n,centimetres:100*n,degrees:360/(2*Math.PI),feet:3.28084*n,inches:39.37*n,kilometers:n/1e3,kilometres:n/1e3,meters:n,metres:n,miles:n/1609.344,millimeters:1e3*n,millimetres:1e3*n,nauticalmiles:n/1852,radians:1,yards:1.0936*n};function i(t,r,e={}){const n={type:"Feature"};return(0===e.id||e.id)&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.properties=r||{},n.geometry=t,n}function a(t,r,e={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!y(t[0])||!y(t[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:t},r,e)}function s(t,r,e={}){for(const r of t){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let t=0;t<r[r.length-1].length;t++)if(r[r.length-1][t]!==r[0][t])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:t},r,e)}function u(t,r,e={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:t},r,e)}function c(t,r,e={}){return i({type:"MultiLineString",coordinates:t},r,e)}function l(t,r,e={}){return i({type:"MultiPolygon",coordinates:t},r,e)}function h(t,r="kilometers"){const e=o[r];if(!e)throw new Error(r+" units is invalid");return t*e}function f(t,r="kilometers"){const e=o[r];if(!e)throw new Error(r+" units is invalid");return t/e}function p(t){return t%(2*Math.PI)*180/Math.PI}function d(t){return t%360*Math.PI/180}function y(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}},475:function(t,r,e){e.r(r);var n=e(676),o=e(839),i=e(485);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function s(){s=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,r,e){t[r]=e.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function h(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{h({},"")}catch(t){h=function(t,r,e){return t[r]=e}}function f(t,r,e,n){var i=r&&r.prototype instanceof w?r:w,a=Object.create(i.prototype),s=new R(n||[]);return o(a,"_invoke",{value:A(t,e,s)}),a}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var d="suspendedStart",y="suspendedYield",m="executing",g="completed",v={};function w(){}function b(){}function N(){}var _={};h(_,u,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(P([])));x&&x!==e&&n.call(x,u)&&(_=x);var S=N.prototype=w.prototype=Object.create(_);function M(t){["next","throw","return"].forEach((function(r){h(t,r,(function(t){return this._invoke(r,t)}))}))}function L(t,r){function e(o,i,s,u){var c=p(t[o],t,i);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==a(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,s,u)}),(function(t){e("throw",t,s,u)})):r.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return e("throw",t,s,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new r((function(r,o){e(t,n,r,o)}))}return i=i?i.then(o,o):o()}})}function A(r,e,n){var o=d;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var c=p(r,e,n);if("normal"===c.type){if(o=n.done?g:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=g,n.method="throw",n.arg=c.arg)}}}function T(r,e){var n=e.method,o=r.iterator[n];if(o===t)return e.delegate=null,"throw"===n&&r.iterator.return&&(e.method="return",e.arg=t,T(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=p(o,r.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var a=i.arg;return a?a.done?(e[r.resultName]=a.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,v):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(r){if(r||""===r){var e=r[u];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,i=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(a(r)+" is not iterable")}return b.prototype=N,o(S,"constructor",{value:N,configurable:!0}),o(N,"constructor",{value:b,configurable:!0}),b.displayName=h(N,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,N):(t.__proto__=N,h(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},r.awrap=function(t){return{__await:t}},M(L.prototype),h(L.prototype,c,(function(){return this})),r.AsyncIterator=L,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new L(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},M(S),h(S,l,"Generator"),h(S,u,(function(){return this})),h(S,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=P,R.prototype={constructor:R,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(G),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function o(n,o){return s.type="throw",s.arg=r,e.next=n,o&&(e.method="next",e.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),v}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={iterator:P(r),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=t),v}},r}function u(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function c(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l(n.key),n)}}function l(t){var r=function(t){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=a(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(r)?r:r+""}var h=function(){return t=function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t};!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.transformGeocodeRequest=r},r=[{key:"getNearest",value:(e=s().mark((function t(r,e){var a,u,c,l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("WSG84"!==(0,o.qo)(e)){t.next=10;break}t.prev=1,a=new i.B7(e[1],e[0]).toOsGrid(),e=[a.easting,a.northing],t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(1),console.log(t.t0),t.abrupt("return",null);case 10:return u=(u=n.KM).replace("{easting}",Math.round(e[0])).replace("{northing}",Math.round(e[1])),t.t1=fetch,t.next=15,this.transformGeocodeRequest(u);case 15:return t.t2=t.sent,t.next=18,(0,t.t1)(t.t2);case 18:return c=t.sent,t.next=21,c.json();case 21:return l=t.sent,t.abrupt("return",l.results?(void 0,void 0,void 0,void 0,s=(r=l.results[0].GAZETTEER_ENTRY).NAME1,h=r.POPULATED_PLACE,f=r.COUNTY_UNITARY,p=r.REGION,"".concat(s).concat(h?", "+h:"").concat(f?", "+f:"",", ").concat(p)):null);case 23:case"end":return t.stop()}var r,s,h,f,p}),t,this,[[1,6]])})),a=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){u(i,n,o,a,s,"next",t)}function s(t){u(i,n,o,a,s,"throw",t)}a(void 0)}))},function(t,r){return a.apply(this,arguments)})}],r&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,a}();r.default=h},485:function(t,r,e){e.d(r,{B7:function(){return v},Ay:function(){return g}});let n=" ";class o{static get separator(){return n}static set separator(t){n=t}static parse(t){if(!isNaN(parseFloat(t))&&isFinite(t))return Number(t);const r=String(t).trim().replace(/^-/,"").replace(/[NSEW]$/i,"").split(/[^0-9.,]+/);if(""==r[r.length-1]&&r.splice(r.length-1),""==r)return NaN;let e=null;switch(r.length){case 3:e=r[0]/1+r[1]/60+r[2]/3600;break;case 2:e=r[0]/1+r[1]/60;break;case 1:e=r[0];break;default:return NaN}return/^-|[WS]$/i.test(t.trim())&&(e=-e),Number(e)}static toDms(t,r="d",e=void 0){if(isNaN(t))return null;if("string"==typeof t&&""==t.trim())return null;if("boolean"==typeof t)return null;if(t==1/0)return null;if(null==t)return null;if(void 0===e)switch(r){case"d":case"deg":e=4;break;case"dm":case"deg+min":e=2;break;case"dms":case"deg+min+sec":e=0;break;default:r="d",e=4}t=Math.abs(t);let n=null,i=null,a=null,s=null;switch(r){default:case"d":case"deg":i=t.toFixed(e),i<100&&(i="0"+i),i<10&&(i="0"+i),n=i+"°";break;case"dm":case"deg+min":i=Math.floor(t),a=(60*t%60).toFixed(e),60==a&&(a=(0).toFixed(e),i++),i=("000"+i).slice(-3),a<10&&(a="0"+a),n=i+"°"+o.separator+a+"′";break;case"dms":case"deg+min+sec":i=Math.floor(t),a=Math.floor(3600*t/60)%60,s=(3600*t%60).toFixed(e),60==s&&(s=(0).toFixed(e),a++),60==a&&(a=0,i++),i=("000"+i).slice(-3),a=("00"+a).slice(-2),s<10&&(s="0"+s),n=i+"°"+o.separator+a+"′"+o.separator+s+"″"}return n}static toLat(t,r,e){const n=o.toDms(o.wrap90(t),r,e);return null===n?"–":n.slice(1)+o.separator+(t<0?"S":"N")}static toLon(t,r,e){const n=o.toDms(o.wrap180(t),r,e);return null===n?"–":n+o.separator+(t<0?"W":"E")}static toBrng(t,r,e){const n=o.toDms(o.wrap360(t),r,e);return null===n?"–":n.replace("360","0")}static fromLocale(t){const r=123456.789.toLocaleString(),e={thousands:r.slice(3,4),decimal:r.slice(7,8)};return t.replace(e.thousands,"⁜").replace(e.decimal,".").replace("⁜",",")}static toLocale(t){const r=123456.789.toLocaleString(),e={thousands:r.slice(3,4),decimal:r.slice(7,8)};return t.replace(/,([0-9])/,"⁜$1").replace(".",e.decimal).replace("⁜",e.thousands)}static compassPoint(t,r=3){if(![1,2,3].includes(Number(r)))throw new RangeError(`invalid precision ‘${r}’`);t=o.wrap360(t);const e=4*2**(r-1);return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(t*e/360)%e*16/e]}static wrap90(t){if(-90<=t&&t<=90)return t;const r=t;return 1*Math.abs(((r-90)%360+360)%360-180)-90}static wrap180(t){if(-180<=t&&t<=180)return t;const r=360;return((360*t/r-180)%r+r)%r-180}static wrap360(t){if(0<=t&&t<360)return t;const r=360;return(360*t/r%r+r)%r}}Number.prototype.toRadians=function(){return this*Math.PI/180},Number.prototype.toDegrees=function(){return 180*this/Math.PI};var i=o;class a{constructor(t,r,e){if(isNaN(t)||isNaN(r)||isNaN(e))throw new TypeError(`invalid vector [${t},${r},${e}]`);this.x=Number(t),this.y=Number(r),this.z=Number(e)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}plus(t){if(!(t instanceof a))throw new TypeError("v is not Vector3d object");return new a(this.x+t.x,this.y+t.y,this.z+t.z)}minus(t){if(!(t instanceof a))throw new TypeError("v is not Vector3d object");return new a(this.x-t.x,this.y-t.y,this.z-t.z)}times(t){if(isNaN(t))throw new TypeError(`invalid scalar value ‘${t}’`);return new a(this.x*t,this.y*t,this.z*t)}dividedBy(t){if(isNaN(t))throw new TypeError(`invalid scalar value ‘${t}’`);return new a(this.x/t,this.y/t,this.z/t)}dot(t){if(!(t instanceof a))throw new TypeError("v is not Vector3d object");return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){if(!(t instanceof a))throw new TypeError("v is not Vector3d object");const r=this.y*t.z-this.z*t.y,e=this.z*t.x-this.x*t.z,n=this.x*t.y-this.y*t.x;return new a(r,e,n)}negate(){return new a(-this.x,-this.y,-this.z)}unit(){const t=this.length;if(1==t)return this;if(0==t)return this;const r=this.x/t,e=this.y/t,n=this.z/t;return new a(r,e,n)}angleTo(t,r=void 0){if(!(t instanceof a))throw new TypeError("v is not Vector3d object");if(!(r instanceof a||null==r))throw new TypeError("n is not Vector3d object");const e=null==r||this.cross(t).dot(r)>=0?1:-1,n=this.cross(t).length*e,o=this.dot(t);return Math.atan2(n,o)}rotateAround(t,r){if(!(t instanceof a))throw new TypeError("axis is not Vector3d object");const e=r.toRadians(),n=this.unit(),o=t.unit(),i=Math.sin(e),s=Math.cos(e),u=1-s,c=o.x,l=o.y,h=o.z,f=[[u*c*c+s,u*c*l-i*h,u*c*h+i*l],[u*c*l+i*h,u*l*l+s,u*l*h-i*c],[u*c*h-i*l,u*l*h+i*c,u*h*h+s]],p=[f[0][0]*n.x+f[0][1]*n.y+f[0][2]*n.z,f[1][0]*n.x+f[1][1]*n.y+f[1][2]*n.z,f[2][0]*n.x+f[2][1]*n.y+f[2][2]*n.z];return new a(p[0],p[1],p[2])}toString(t=3){return`[${this.x.toFixed(t)},${this.y.toFixed(t)},${this.z.toFixed(t)}]`}}Number.prototype.toRadians=function(){return this*Math.PI/180},Number.prototype.toDegrees=function(){return 180*this/Math.PI};var s=a;const u={WGS84:{a:6378137,b:6356752.314245,f:1/298.257223563}},c={WGS84:{ellipsoid:u.WGS84}};Object.freeze(u.WGS84),Object.freeze(c.WGS84);class l{constructor(t,r,e=0){if(isNaN(t)||null==t)throw new TypeError(`invalid lat ‘${t}’`);if(isNaN(r)||null==r)throw new TypeError(`invalid lon ‘${r}’`);if(isNaN(e)||null==e)throw new TypeError(`invalid height ‘${e}’`);this._lat=i.wrap90(Number(t)),this._lon=i.wrap180(Number(r)),this._height=Number(e)}get lat(){return this._lat}get latitude(){return this._lat}set lat(t){if(this._lat=isNaN(t)?i.wrap90(i.parse(t)):i.wrap90(Number(t)),isNaN(this._lat))throw new TypeError(`invalid lat ‘${t}’`)}set latitude(t){if(this._lat=isNaN(t)?i.wrap90(i.parse(t)):i.wrap90(Number(t)),isNaN(this._lat))throw new TypeError(`invalid latitude ‘${t}’`)}get lon(){return this._lon}get lng(){return this._lon}get longitude(){return this._lon}set lon(t){if(this._lon=isNaN(t)?i.wrap180(i.parse(t)):i.wrap180(Number(t)),isNaN(this._lon))throw new TypeError(`invalid lon ‘${t}’`)}set lng(t){if(this._lon=isNaN(t)?i.wrap180(i.parse(t)):i.wrap180(Number(t)),isNaN(this._lon))throw new TypeError(`invalid lng ‘${t}’`)}set longitude(t){if(this._lon=isNaN(t)?i.wrap180(i.parse(t)):i.wrap180(Number(t)),isNaN(this._lon))throw new TypeError(`invalid longitude ‘${t}’`)}get height(){return this._height}set height(t){if(this._height=Number(t),isNaN(this._height))throw new TypeError(`invalid height ‘${t}’`)}get datum(){return this._datum}set datum(t){this._datum=t}static get ellipsoids(){return u}static get datums(){return c}static parse(...t){if(0==t.length)throw new TypeError("invalid (empty) point");let r,e,n;if("object"==typeof t[0]&&(1==t.length||!isNaN(parseFloat(t[1])))){const o=t[0];if("Point"==o.type&&Array.isArray(o.coordinates)?([e,r,n]=o.coordinates,n=n||0):(null!=o.latitude&&(r=o.latitude),null!=o.lat&&(r=o.lat),null!=o.longitude&&(e=o.longitude),null!=o.lng&&(e=o.lng),null!=o.lon&&(e=o.lon),null!=o.height&&(n=o.height),r=i.wrap90(i.parse(r)),e=i.wrap180(i.parse(e))),null!=t[1]&&(n=t[1]),isNaN(r)||isNaN(e))throw new TypeError(`invalid point ‘${JSON.stringify(t[0])}’`)}if("string"==typeof t[0]&&2==t[0].split(",").length&&([r,e]=t[0].split(","),r=i.wrap90(i.parse(r)),e=i.wrap180(i.parse(e)),n=t[1]||0,isNaN(r)||isNaN(e)))throw new TypeError(`invalid point ‘${t[0]}’`);if(null==r&&null==e&&([r,e]=t,r=i.wrap90(i.parse(r)),e=i.wrap180(i.parse(e)),n=t[2]||0,isNaN(r)||isNaN(e)))throw new TypeError(`invalid point ‘${t.toString()}’`);return new this(r,e,n)}toCartesian(){const t=this.datum?this.datum.ellipsoid:this.referenceFrame?this.referenceFrame.ellipsoid:u.WGS84,r=this.lat.toRadians(),e=this.lon.toRadians(),n=this.height,{a:o,f:i}=t,a=Math.sin(r),s=Math.cos(r),c=Math.sin(e),l=Math.cos(e),f=2*i-i*i,p=o/Math.sqrt(1-f*a*a);return new h((p+n)*s*l,(p+n)*s*c,(p*(1-f)+n)*a)}equals(t){if(!(t instanceof l))throw new TypeError(`invalid point ‘${t}’`);return!(Math.abs(this.lat-t.lat)>Number.EPSILON||Math.abs(this.lon-t.lon)>Number.EPSILON||Math.abs(this.height-t.height)>Number.EPSILON||this.datum!=t.datum||this.referenceFrame!=t.referenceFrame||this.epoch!=t.epoch)}toString(t="d",r=void 0,e=null){if(!["d","dm","dms","n"].includes(t))throw new RangeError(`invalid format ‘${t}’`);const n=(this.height>=0?" +":" ")+this.height.toFixed(e)+"m";return"n"==t?(null==r&&(r=4),`${this.lat.toFixed(r)}, ${this.lon.toFixed(r)}${null==e?"":n}`):`${i.toLat(this.lat,t,r)}, ${i.toLon(this.lon,t,r)}${null==e?"":n}`}}class h extends s{constructor(t,r,e){super(t,r,e)}toLatLon(t=u.WGS84){if(!t||!t.a)throw new TypeError(`invalid ellipsoid ‘${t}’`);const{x:r,y:e,z:n}=this,{a:o,b:i,f:a}=t,s=2*a-a*a,c=s/(1-s),h=Math.sqrt(r*r+e*e),f=i*n/(o*h)*(1+c*i/Math.sqrt(h*h+n*n)),p=f/Math.sqrt(1+f*f),d=p/f,y=isNaN(d)?0:Math.atan2(n+c*i*p*p*p,h-s*o*d*d*d),m=Math.atan2(e,r),g=Math.sin(y),v=h*Math.cos(y)+n*g-o*o/(o/Math.sqrt(1-s*g*g));return new l(y.toDegrees(),m.toDegrees(),v)}toString(t=0){return`[${this.x.toFixed(t)},${this.y.toFixed(t)},${this.z.toFixed(t)}]`}}const f={WGS84:{a:6378137,b:6356752.314245,f:1/298.257223563},Airy1830:{a:6377563.396,b:6356256.909,f:1/299.3249646},AiryModified:{a:6377340.189,b:6356034.448,f:1/299.3249646},Bessel1841:{a:6377397.155,b:6356078.962818,f:1/299.1528128},Clarke1866:{a:6378206.4,b:6356583.8,f:1/294.978698214},Clarke1880IGN:{a:6378249.2,b:6356515,f:1/293.466021294},GRS80:{a:6378137,b:6356752.31414,f:1/298.257222101},Intl1924:{a:6378388,b:6356911.946,f:1/297},WGS72:{a:6378135,b:6356750.5,f:1/298.26}},p={ED50:{ellipsoid:f.Intl1924,transform:[89.5,93.8,123.1,-1.2,0,0,.156]},ETRS89:{ellipsoid:f.GRS80,transform:[0,0,0,0,0,0,0]},Irl1975:{ellipsoid:f.AiryModified,transform:[-482.53,130.596,-564.557,-8.15,1.042,.214,.631]},NAD27:{ellipsoid:f.Clarke1866,transform:[8,-160,-176,0,0,0,0]},NAD83:{ellipsoid:f.GRS80,transform:[.9956,-1.9103,-.5215,-62e-5,.025915,.009426,.011599]},NTF:{ellipsoid:f.Clarke1880IGN,transform:[168,60,-320,0,0,0,0]},OSGB36:{ellipsoid:f.Airy1830,transform:[-446.448,125.157,-542.06,20.4894,-.1502,-.247,-.8421]},Potsdam:{ellipsoid:f.Bessel1841,transform:[-582,-105,-414,-8.3,1.04,.35,-3.08]},TokyoJapan:{ellipsoid:f.Bessel1841,transform:[148,-507,-685,0,0,0,0]},WGS72:{ellipsoid:f.WGS72,transform:[0,0,-4.5,-.22,0,0,.554]},WGS84:{ellipsoid:f.WGS84,transform:[0,0,0,0,0,0,0]}};Object.keys(f).forEach((t=>Object.freeze(f[t]))),Object.keys(p).forEach((t=>{Object.freeze(p[t]),Object.freeze(p[t].transform)}));class d extends l{constructor(t,r,e=0,n=p.WGS84){if(!n||null==n.ellipsoid)throw new TypeError(`unrecognised datum ‘${n}’`);super(t,r,e),this._datum=n}get datum(){return this._datum}static get ellipsoids(){return f}static get datums(){return p}static parse(...t){let r=p.WGS84;if((4==t.length||3==t.length&&"object"==typeof t[2])&&(r=t.pop()),!r||null==r.ellipsoid)throw new TypeError(`unrecognised datum ‘${r}’`);const e=super.parse(...t);return e._datum=r,e}convertDatum(t){if(!t||null==t.ellipsoid)throw new TypeError(`unrecognised datum ‘${t}’`);return this.toCartesian().convertDatum(t).toLatLon()}toCartesian(){const t=super.toCartesian();return new y(t.x,t.y,t.z,this.datum)}}class y extends h{constructor(t,r,e,n=void 0){if(n&&null==n.ellipsoid)throw new TypeError(`unrecognised datum ‘${n}’`);super(t,r,e),n&&(this._datum=n)}get datum(){return this._datum}set datum(t){if(!t||null==t.ellipsoid)throw new TypeError(`unrecognised datum ‘${t}’`);this._datum=t}toLatLon(t=void 0){t&&(console.info("datum parameter to Cartesian_Datum.toLatLon is deprecated: set datum before calling toLatLon()"),this.datum=t);const r=this.datum||p.WGS84;if(!r||null==r.ellipsoid)throw new TypeError(`unrecognised datum ‘${r}’`);const e=super.toLatLon(r.ellipsoid);return new d(e.lat,e.lon,e.height,this.datum)}convertDatum(t){if(!t||null==t.ellipsoid)throw new TypeError(`unrecognised datum ‘${t}’`);if(!this.datum)throw new TypeError("cartesian coordinate has no datum");let r=null,e=null;null!=this.datum&&this.datum!=p.WGS84||(r=this,e=t.transform),t==p.WGS84&&(r=this,e=this.datum.transform.map((t=>-t))),null==e&&(r=this.convertDatum(p.WGS84),e=t.transform);const n=r.applyTransform(e);return n.datum=t,n}applyTransform(t){const{x:r,y:e,z:n}=this,o=t[0],i=t[1],a=t[2],s=t[3]/1e6+1,u=(t[4]/3600).toRadians(),c=(t[5]/3600).toRadians(),l=(t[6]/3600).toRadians();return new y(o+r*s-e*l+n*c,i+r*l+e*s-n*u,a-r*c+e*u+n*s)}}const m={trueOrigin:{lat:49,lon:-2},falseOrigin:{easting:-4e5,northing:1e5},scaleFactor:.9996012717,ellipsoid:d.ellipsoids.Airy1830};class g{constructor(t,r){if(this.easting=Number(t),this.northing=Number(r),isNaN(t)||this.easting<0||this.easting>7e5)throw new RangeError(`invalid easting ‘${t}’`);if(isNaN(r)||this.northing<0||this.northing>13e5)throw new RangeError(`invalid northing ‘${r}’`)}toLatLon(t=d.datums.WGS84){const{easting:r,northing:e}=this,{a:n,b:o}=m.ellipsoid,i=m.trueOrigin.lat.toRadians(),a=m.trueOrigin.lon.toRadians(),s=-m.falseOrigin.easting,u=-m.falseOrigin.northing,c=m.scaleFactor,l=1-o*o/(n*n),h=(n-o)/(n+o),f=h*h,p=h*h*h;let y=i,g=0;do{y=(e-u-g)/(n*c)+y,g=o*c*((1+h+5/4*f+5/4*p)*(y-i)-(3*h+3*h*h+21/8*p)*Math.sin(y-i)*Math.cos(y+i)+(15/8*f+15/8*p)*Math.sin(2*(y-i))*Math.cos(2*(y+i))-35/24*p*Math.sin(3*(y-i))*Math.cos(3*(y+i)))}while(Math.abs(e-u-g)>=1e-5);const w=Math.cos(y),b=Math.sin(y),N=n*c/Math.sqrt(1-l*b*b),_=n*c*(1-l)/Math.pow(1-l*b*b,1.5),E=N/_-1,x=Math.tan(y),S=x*x,M=S*S,L=1/w,A=N*N*N,T=A*N*N,O=r-s,G=O*O,R=G*O,P=G*G,k=R*G;y=y-x/(2*_*N)*G+x/(24*_*A)*(5+3*S+E-9*S*E)*P-x/(720*_*T)*(61+90*S+45*M)*(P*G);const j=a+L/N*O-L/(6*A)*(N/_+2*S)*R+L/(120*T)*(5+28*S+24*M)*k-L/(T*N*N*5040)*(61+662*S+1320*M+M*S*720)*(k*G);let $=new v(y.toDegrees(),j.toDegrees(),0,d.datums.OSGB36);return t!=d.datums.OSGB36&&($=$.convertDatum(t),$=new v($.lat,$.lon,$.height,$.datum)),$}static parse(t){let r=(t=String(t).trim()).match(/^(\d+),\s*(\d+)$/);if(r)return new g(r[1],r[2]);if(r=t.match(/^[HNST][ABCDEFGHJKLMNOPQRSTUVWXYZ]\s*[0-9]+\s*[0-9]+$/i),!r)throw new Error(`invalid grid reference ‘${t}’`);let e=t.toUpperCase().charCodeAt(0)-"A".charCodeAt(0),n=t.toUpperCase().charCodeAt(1)-"A".charCodeAt(0);e>7&&e--,n>7&&n--;const o=(e-2)%5*5+n%5,i=19-5*Math.floor(e/5)-Math.floor(n/5);let a=t.slice(2).trim().split(/\s+/);if(1==a.length&&(a=[a[0].slice(0,a[0].length/2),a[0].slice(a[0].length/2)]),a[0].length!=a[1].length)throw new Error(`invalid grid reference ‘${t}’`);a[0]=a[0].padEnd(5,"0"),a[1]=a[1].padEnd(5,"0");const s=o+a[0],u=i+a[1];return new g(s,u)}toString(t=10){if(![0,2,4,6,8,10,12,14,16].includes(Number(t)))throw new RangeError(`invalid precision ‘${t}’`);let{easting:r,northing:e}=this;if(0==t){const t={useGrouping:!1,minimumIntegerDigits:6,maximumFractionDigits:3};return`${r.toLocaleString("en",t)},${e.toLocaleString("en",t)}`}const n=Math.floor(r/1e5),o=Math.floor(e/1e5);let i=19-o-(19-o)%5+Math.floor((n+10)/5),a=5*(19-o)%25+n%5;i>7&&i++,a>7&&a++;const s=String.fromCharCode(i+"A".charCodeAt(0),a+"A".charCodeAt(0));return r=Math.floor(r%1e5/Math.pow(10,5-t/2)),e=Math.floor(e%1e5/Math.pow(10,5-t/2)),r=r.toString().padStart(t/2,"0"),e=e.toString().padStart(t/2,"0"),`${s} ${r} ${e}`}}class v extends d{toOsGrid(){const t=this.datum==d.datums.OSGB36?this:this.convertDatum(d.datums.OSGB36),r=t.lat.toRadians(),e=t.lon.toRadians(),{a:n,b:o}=m.ellipsoid,i=m.trueOrigin.lat.toRadians(),a=m.trueOrigin.lon.toRadians(),s=-m.falseOrigin.easting,u=-m.falseOrigin.northing,c=m.scaleFactor,l=1-o*o/(n*n),h=(n-o)/(n+o),f=h*h,p=h*h*h,y=Math.cos(r),v=Math.sin(r),w=n*c/Math.sqrt(1-l*v*v),b=n*c*(1-l)/Math.pow(1-l*v*v,1.5),N=w/b-1,_=o*c*((1+h+5/4*f+5/4*p)*(r-i)-(3*h+3*h*h+21/8*p)*Math.sin(r-i)*Math.cos(r+i)+(15/8*f+15/8*p)*Math.sin(2*(r-i))*Math.cos(2*(r+i))-35/24*p*Math.sin(3*(r-i))*Math.cos(3*(r+i))),E=y*y*y,x=E*y*y,S=Math.tan(r)*Math.tan(r),M=S*S,L=e-a,A=L*L,T=A*L,O=T*L,G=O*L;let R=_+u+w/2*v*y*A+w/24*v*E*(5-S+9*N)*O+w/720*v*x*(61-58*S+M)*(G*L),P=s+w*y*L+w/6*E*(w/b-S)*T+w/120*x*(5-18*S+M+14*N-58*S*N)*G;R=Number(R.toFixed(3)),P=Number(P.toFixed(3));try{return new g(P,R)}catch(r){throw new Error(`${r.message} from (${t.lat.toFixed(6)},${t.lon.toFixed(6)}).toOsGrid()`)}}convertDatum(t){const r=super.convertDatum(t);return new v(r.lat,r.lon,r.height,r.datum)}}},625:function(t,r,e){function n(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return[...t.geometry.coordinates];if("Point"===t.type)return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function o(t){return"Feature"===t.type?t.geometry:t}e.d(r,{bg:function(){return o},uG:function(){return n}})},628:function(t,r,e){e.d(r,{I:function(){return i}});var n=e(625),o=e(74);function i(t,r,e={}){var i=(0,n.uG)(t),a=(0,n.uG)(r),s=(0,o.tR)(a[1]-i[1]),u=(0,o.tR)(a[0]-i[0]),c=(0,o.tR)(i[1]),l=(0,o.tR)(a[1]),h=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(c)*Math.cos(l);return(0,o.cJ)(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),e.units)}},676:function(t){t.exports=JSON.parse('{"k":"https://api.os.uk/search/names/v1/find?query={query}&fq=local_type:postcode%20local_type:hamlet%20local_type:village%20local_type:town%20local_type:city%20local_type:other_settlement&maxresults={maxresults}","KM":"https://api.os.uk/search/names/v1/nearest?point={easting},{northing}&radius=1000&fq=local_type:Airfield%20local_type:Airport%20local_type:Bus_Station%20local_type:Chemical_Works%20local_type:City%20local_type:Coach_Station%20local_type:Electricity_Distribution%20local_type:Electricity_Production%20local_type:Further_Education%20local_type:Gas_Distribution_or_Storage%20local_type:Hamlet%20local_type:Harbour%20local_type:Helicopter_Station%20local_type:Heliport%20local_type:Higher_or_University_Education%20local_type:Hill_Or_Mountain%20local_type:Hospice%20local_type:Hospital%20local_type:Medical_Care_Accommodation%20local_type:Named_Road%20local_type:Non_State_Primary_Education%20local_type:Non_State_Secondary_Education%20local_type:Other_Settlement%20local_type:Passenger_Ferry_Terminal%20local_type:Port_Consisting_of_Docks_and_Nautical_Berthing%20local_type:Postcode%20local_type:Primary_Education%20local_type:Railway_Station%20local_type:Road_User_Services%20local_type:Secondary_Education%20local_type:Section_Of_Named_Road%20local_type:Section_Of_Numbered_Road%20local_type:Special_Needs_Education%20local_type:Suburban_Area%20local_type:Town%20local_type:Urban_Greenspace%20local_type:Vehicular_Ferry_Terminal%20local_type:Vehicular_Rail_Terminal%20local_type:Village%20local_type:Waterfall%20","SW":500}')},839:function(t,r,e){e.d(r,{BS:function(){return g},CK:function(){return N},Ig:function(){return p},Ox:function(){return v},X_:function(){return x},Yf:function(){return f},ZM:function(){return y},cj:function(){return E},dN:function(){return w},fC:function(){return S},fY:function(){return m},gd:function(){return M},mG:function(){return _},mK:function(){return d},qo:function(){return h},zw:function(){return b}});var n=e(628),o=e(74),i=e(566);function a(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;u=!1}else for(;!(u=(n=i.call(e)).done)&&(s.push(n.value),s.length!==r);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,r)||s(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,r){if(t){if("string"==typeof t)return u(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,r):void 0}}function u(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}var c=function(t){var r=.621371;return t<800?"".concat(t," metres"):t<5e3?(t/1e3*r).toFixed(1)+" miles":Math.round(t/1e3*r)+" miles"},l=function(t){return(t.closest("[data-fm-main]")||document.body).getBoundingClientRect()},h=function(t){if(3===t.length)return"BNG";var r=a(t,2),e=r[0],n=r[1];return e>=-180&&e<=180&&n>=-90&&n<=90?"WSG84":e>180&&n>90?"BNG":"Unknown"},f=function(t,r){var e;if(t[0]>1e3){var i=Math.abs(t[0]-r[0]),a=Math.abs(t[1]-r[1]);e=Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}else{var s=new o.zx(t),u=new o.zx(r);e=(0,n.I)(s,u,{units:"metres"})}return Math.round(e)},p=function(t,r){var e;if(t){var n=l(t),o=t.getBoundingClientRect(),i=o.x||o.left,a=o.y||o.top,s=n.x||n.left,u=n.y||n.top;e={top:(a-u)/r,left:(i-s)/r,right:(n.width-o.width-(i-s))/r,bottom:(n.height-o.height-(a-u))/r}}return Object.values(e).every((function(t){return t>=0}))&&e},d=function(t,r){var e;if(t){var n=l(t),o=t.getBoundingClientRect();e=[[((o.x||o.left)-(n.x||n.left)+10)/r,((o.y||o.top)-(n.y||n.top)+o.height-10)/r],[(o.width+((o.x||o.left)-(n.x||n.left))-10)/r,((o.y||o.top)-(n.y||n.top)+10)/r]]}return e},y=function(t,r){var e=l(t),n=t.getBoundingClientRect(),o=((n.x||n.left)-(e.x||e.left))/r,i=((n.y||n.top)-(e.y||e.top))/r;return[o+n.width/2/r,i+n.height/2/r]},m=function(t,r,e){var n=e||{},o=n.featuresTotal,i=n.isFeaturesInMap,a=n.isPixelFeaturesAtPixel,s=n.isPixelFeaturesInMap,u="";o?u="".concat(o," feature").concat(1===o?"":"s"," in this area. "):a?u="Data visible at the center coordinate. ":s?u="No data visible at the center coordinate. ":i&&(u="No feature data in this area. ");var l=t?"approximate centre ".concat(t,", "):"",h="covering ".concat(function(t){var r=f([t[0],t[1]],[t[2],t[1]]),e=f([t[0],t[1]],[t[0],t[3]]);return"".concat(c(r)," by ").concat(c(e))}(r)),p=t?"":"Use ALT plus I to find closest place";return"".concat(l).concat(h,". ").concat(u).concat(p)},g=function(t,r,e,n,o){var i,a,s,u,l=o.center,h=o.bounds,p=o.zoom,d=o.isMaxZoom,y=o.isMinZoom,g=o.features,v=o.label,w=o.selectedId,b=null;if(v)b=v;else if(w)i=null==g?void 0:g.featuresInViewport,a=w,s=i.length,b=(u=i.findIndex((function(t){return t.id===a})))>=0&&"".concat(s," feature").concat(1!==s?"s":""," in this area. ").concat(i[u].name,". ").concat(u+1," of ").concat(s," highlighted.");else if("DATA"===t)b="Map change: new data. Use ALT plus I to get new details";else if(r){var N=function(t,r,e,n,o,i){var a=JSON.stringify(t)===JSON.stringify(o),s=r===i,u=e?" (Maximum zoom reached)":"",l=n?" (Minimum zoom reached)":"",h="";return!t||!r||a&&s||(h=a||s?a?"Zoomed ".concat(i>r?"in":"out").concat(u).concat(l,": "):"Map move: ".concat(function(t,r){t=t.map((function(t){return t>1e3?Math.round(t):Math.round(1e5*t)/1e5})),r=r.map((function(t){return t>1e3?Math.round(t):Math.round(1e5*t)/1e5}));var e=[t[0],t[1]],n=[t[0],r[1]],o=[t[0],t[1]],i=[r[0],t[1]],a=f(e,n),s=f(o,i),u=function(t,r){return[t[0]<r[0]&&"east",t[0]>r[0]&&"west",t[1]<r[1]&&"north",t[1]>r[1]&&"south"].filter((function(t){return t&&"string"==typeof t}))}(t,r),l=u.filter((function(t){return["east","west"].includes(t)})).join(""),h=u.filter((function(t){return["north","south"].includes(t)})).join(""),p=l?"".concat(l," ").concat(c(s)):"",d=h?"".concat(h," ").concat(c(a)):"";return"".concat(d+(l&&h?", ":"")+p)}(t,o),", "):"New area".concat(u).concat(l,": ")),h}(n.center,n.zoom,d,y,l,p),_=m(e,h,g);b="".concat(N).concat(N?"f":"F","ocus area ").concat(_)}else b="";return b},v=function(t,r,e,n){var o;return t||(o="RESET"===r?e:n),o},w=function(t,r){var e,n=i.NT["MAX_BOUNDS_".concat(r)],o=null==t?void 0:t.split(",");return Array.isArray(o)&&3===(null===(e=o)||void 0===e?void 0:e.length)&&(o=!(o=o.slice(0,2).map((function(t){return parseFloat(t)}))).some(isNaN)&&o)&&("27700"===r?o.filter((function(t){return t>=0})).length:o[0]>n[0]&&o[0]<n[2]&&o[1]>n[1]&&o[1]<n[3])?o:null},b=function(t){var r=null==t?void 0:t.split(",");if(!Array.isArray(r)||3!==(null==r?void 0:r.length))return null;var e=parseFloat(r[2]);return e.isNaN?null:e},N=function(t,r){var e=t.code.slice(-1);return r.length>=e?r[e-1].id:""},_=function(t){var r;if(function(t){var r,e=null==t||null===(r=t.coordinates)||void 0===r?void 0:r[0];if(65!==(null==e?void 0:e.length))return!1;for(var n=a(e[0],2),o=n[0],i=n[1],s=a(e[32],2),u=[(o+s[0])/2,(i+s[1])/2],c=1/0,l=-1/0,f=1/0,p=-1/0,d=0;d<64;d++){var y=a(e[d],2),m=y[0],g=y[1],v=a(e[(d+1)%64],2),w=v[0],b=v[1],N=Math.hypot(m-u[0],g-u[1]);c=Math.min(c,N),l=Math.max(l,N);var _=Math.hypot(w-m,b-g);f=Math.min(f,_),p=Math.max(p,_)}var E=(h(u),.3);return Math.abs(l-c)<E&&Math.abs(p-f)<E}(null==t?void 0:t.geometry))return"circle";if("polygon"===(null==t||null===(r=t.geometry)||void 0===r||null===(r=r.type)||void 0===r?void 0:r.toLowerCase())){var e,n=null===(e=t.geometry)||void 0===e?void 0:e.coordinates,o=n&&Array.from(new Set(n.flat(2)))||null;return 4===(null==o?void 0:o.length)?"square":"polygon"}return null},E=function(t,r,e){var n=e.filter((function(e){var n=Math.abs(e[0]-r[0]),o=Math.abs(e[1]-r[1]);return("up"===t?e[1]<=r[1]&&o>=n:"down"===t?e[1]>r[1]&&o>=n:"left"===t?e[0]<=r[0]&&o<n:e[0]>r[0]&&o<n)&&JSON.stringify(e)!==JSON.stringify(r)}));n.length||n.push(r);var o,i=n.map((function(t){return e=Math.abs(r[0]-t[0]),n=Math.abs(r[1]-t[1]),Math.sqrt(Math.pow(e,2)+Math.pow(n,2));var e,n})),a=n[i.indexOf(Math.min.apply(Math,(o=i,function(t){if(Array.isArray(t))return u(t)}(o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||s(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())))];return e.findIndex((function(t){return JSON.stringify(t)===JSON.stringify(a)}))},x=function(t){return{small:1,medium:1.5,large:2}[t]||1},S=function(t,r,e){var n=t.getBoundingClientRect(),o=n.left,i=n.top,a=r.nativeEvent;return[(a.clientX-o)/e,(a.clientY-i)/e]},M=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){return i.NT.STYLES.includes(t.name)})),r=window.localStorage.getItem("style");return t.find((function(t){return t.name===r}))||t.find((function(t){return"default"===t.name}))}},876:function(t,r,e){e.r(r);var n=e(485),o=e(676);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var r=function(t){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var e=r.call(t,"string");if("object"!=i(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(r)?r:r+""}function u(){u=function(){return r};var t,r={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function h(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{h({},"")}catch(t){h=function(t,r,e){return t[r]=e}}function f(t,r,e,n){var i=r&&r.prototype instanceof w?r:w,a=Object.create(i.prototype),s=new R(n||[]);return o(a,"_invoke",{value:A(t,e,s)}),a}function p(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var d="suspendedStart",y="suspendedYield",m="executing",g="completed",v={};function w(){}function b(){}function N(){}var _={};h(_,s,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(P([])));x&&x!==e&&n.call(x,s)&&(_=x);var S=N.prototype=w.prototype=Object.create(_);function M(t){["next","throw","return"].forEach((function(r){h(t,r,(function(t){return this._invoke(r,t)}))}))}function L(t,r){function e(o,a,s,u){var c=p(t[o],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==i(h)&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,s,u)}),(function(t){e("throw",t,s,u)})):r.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return e("throw",t,s,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new r((function(r,o){e(t,n,r,o)}))}return a=a?a.then(o,o):o()}})}function A(r,e,n){var o=d;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var c=p(r,e,n);if("normal"===c.type){if(o=n.done?g:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=g,n.method="throw",n.arg=c.arg)}}}function T(r,e){var n=e.method,o=r.iterator[n];if(o===t)return e.delegate=null,"throw"===n&&r.iterator.return&&(e.method="return",e.arg=t,T(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=p(o,r.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var a=i.arg;return a?a.done?(e[r.resultName]=a.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,v):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(r){if(r||""===r){var e=r[s];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,a=function e(){for(;++o<r.length;)if(n.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(i(r)+" is not iterable")}return b.prototype=N,o(S,"constructor",{value:N,configurable:!0}),o(N,"constructor",{value:b,configurable:!0}),b.displayName=h(N,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,N):(t.__proto__=N,h(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},r.awrap=function(t){return{__await:t}},M(L.prototype),h(L.prototype,c,(function(){return this})),r.AsyncIterator=L,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new L(f(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},M(S),h(S,l,"Generator"),h(S,s,(function(){return this})),h(S,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=P,R.prototype={constructor:R,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(G),!r)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function o(n,o){return s.type="throw",s.arg=r,e.next=n,o&&(e.method="next",e.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),v},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),v}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={iterator:P(r),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=t),v}},r}function c(t,r,e,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void e(t)}s.done?r(u):Promise.resolve(u).then(n,o)}function l(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){c(i,n,o,a,s,"next",t)}function s(t){c(i,n,o,a,s,"throw",t)}a(void 0)}))}}function h(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return f(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}var p=function(t){return t.filter((function(t){return"england"===t.GAZETTEER_ENTRY.COUNTRY.toLowerCase()}))},d=function(t){return Array.from(new Map(t.map((function(t){return[t.GAZETTEER_ENTRY.ID,t]}))).values())},y=function(t,r){var e=r.toLowerCase().replace(/,/g,"").split(" ");return t.filter((function(t){return e.some((function(r){return t.GAZETTEER_ENTRY.NAME1.toLowerCase().includes(r)}))}))},m=function(t,r){r=r.replace(/,/g,"");var e=h(new Set([r].concat(h(r.trim().split(/[stn]+/))))).join("|"),n=new RegExp("(".concat(e,")"),"i","g","gi");return{__html:t.replace(n,"<mark>$1</mark>")}},g=function(t,r){var e=r.ID,n=r.NAME1,o=r.COUNTY_UNITARY,i=r.DISTRICT_BOROUGH,a=r.POSTCODE_DISTRICT,s=r.LOCAL_TYPE,u="".concat(["City","Postcode"].includes(s)?"":a+", ").concat("City"!==s?o||i:""),c="".concat(n).concat(u?", "+u:"");return{id:e,text:"".concat(n).concat(u?", "+u:""),marked:m(c,t)}},v=function(){var t=l(u().mark((function t(r,e){var n,i,a,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",[]);case 2:return n=(n=o.k).replace("{query}",encodeURI(r)).replace("{maxresults}",(u=(u=r).replace(/\s/g,""),/^(([A-Z]{1,2}\d[A-Z\d]?|ASCN|STHL|TDCU|BBND|[BFS]IQQ|PCRN|TKCA) ?\d[A-Z]{2}|BFPO ?\d{1,4}|(KY\d|MSR|VG|AI)[ -]?\d{4}|[A-Z]{2} ?\d{2}|GE ?CX|GIR ?0A{2}|SAN ?TA1)$/i.test(u)?1:100)),i=[],t.prev=5,t.t0=fetch,t.next=9,e(n);case 9:return t.t1=t.sent,t.next=12,(0,t.t0)(t.t1);case 12:return a=t.sent,t.next=15,a.json();case 15:if(!(s=t.sent).error&&0!==s.header.totalresults){t.next=18;break}return t.abrupt("return",[]);case 18:i=y(s.results,r),i=d(i),i=(i=p(i)).slice(0,8),t.next=27;break;case 24:t.prev=24,t.t2=t.catch(5),console.log(t.t2);case 27:return t.abrupt("return",i);case 28:case"end":return t.stop()}var u}),t,null,[[5,24]])})));return function(r,e){return t.apply(this,arguments)}}(),w=function(){return t=function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t};!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.transformGeocodeRequest=r},r=[{key:"suggest",value:(i=l(u().mark((function t(r){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",[]);case 2:return t.next=4,v(r,this.transformGeocodeRequest);case 4:return e=t.sent,t.abrupt("return",e.map((function(t){return g(r,t.GAZETTEER_ENTRY)})));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"find",value:(e=l(u().mark((function t(r){var e;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,v(r,this.transformGeocodeRequest);case 4:return e=t.sent,t.abrupt("return",e.length?(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,a=(i=e[0].GAZETTEER_ENTRY).ID,s=i.NAME1,u=i.MBR_XMIN,c=i.MBR_YMIN,l=i.MBR_XMAX,h=i.MBR_YMAX,f=i.GEOMETRY_X,p=i.GEOMETRY_Y,{id:a,text:s,bounds:u?[new n.Ay(u,c).toLatLon().lon,new n.Ay(u,c).toLatLon().lat,new n.Ay(l,h).toLatLon().lon,new n.Ay(l,h).toLatLon().lat].map((function(t){return Math.round(1e6*t)/1e6})):[new n.Ay(f-o.SW,p-o.SW).toLatLon().lon,new n.Ay(f-o.SW,p-o.SW).toLatLon().lat,new n.Ay(f+o.SW,p+o.SW).toLatLon().lon,new n.Ay(f+o.SW,p+o.SW).toLatLon().lat].map((function(t){return Math.round(1e6*t)/1e6})),center:f?[new n.Ay(f,p).toLatLon().lon,new n.Ay(f,p).toLatLon().lat].map((function(t){return Math.round(1e6*t)/1e6})):null}):null);case 6:case"end":return t.stop()}var i,a,s,u,c,l,h,f,p}),t,this)}))),function(t){return e.apply(this,arguments)})}],r&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,e,i}();r.default=w}}]);
//# sourceMappingURL=flood-map-geocode.js.map