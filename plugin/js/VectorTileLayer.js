"use strict";(self.webpackChunkdefraMap=self.webpackChunkdefraMap||[]).push([[4401],{69296:function(t,e,i){var r;i.d(e,{u:function(){return r}}),function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"}(r||(r={}))},99680:function(t,e,i){i.d(e,{q:function(){return n}});var r=i(85408);class n{constructor(t,e){this._storage=new r.F,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),e&&this._storage.registerRemoveFunc("",e)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,e,i=1){this._storage.put(this,t,e,i,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}}},85408:function(t,e,i){i.d(e,{Cn:function(){return s},F:function(){return u},Mn:function(){return l},Ti:function(){return n},k2:function(){return o}});var r=i(7187);const n=-3,s=n-1;var o,a;(a=o||(o={}))[a.ALL=0]="ALL",a[a.SOME=1]="SOME";class l{constructor(t,e,i){this.name=t,this._storage=e,this.id=c+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(t){return this._storage.getSize(this,t)}resetHitRate(){this._hit=this._miss=0}put(t,e,i,r=0){this._storage.put(this,t,e,i,r)}pop(t){const e=this._storage.pop(this,t);return void 0===e?++this._miss:++this._hit,e}get(t){const e=this._storage.get(this,t);return void 0===e?++this._miss:++this._hit,e}peek(t){return this._storage.peek(this,t)}updateSize(t,e,i){this._storage.updateSize(this,t,e,i)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class u{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new r.A,this._users=new r.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,e){const i=this._db.get(t.id+e);return i?.size??0}put(t,e,i,r,a){e=t.id+e;const l=this._db.get(e);if(l&&(this._size-=l.size,t.size-=l.size,this._db.delete(e),l.entry!==i&&this._notifyRemove(e,l.entry,l.size,o.ALL)),r>this._maxSize)return void this._notifyRemove(e,i,r,o.ALL);if(void 0===i)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return console.warn(`Refusing to cache entry with size ${r} for key ${e}`),void this._notifyRemove(e,i,0,o.ALL);const u=1+Math.max(a,s)-n;this._db.set(e,new h(i,r,u)),this._size+=r,t.size+=r,this._checkSize()}updateSize(t,e,i,r){e=t.id+e;const n=this._db.get(e);if(n&&n.entry===i){for(this._size-=n.size,t.size-=n.size;r>this._maxSize;){const t=this._notifyRemove(e,i,r,o.SOME);if(!(null!=t&&t>0))return void this._db.delete(e);r=t}n.size=r,this._size+=r,t.size+=r,this._checkSize()}}pop(t,e){e=t.id+e;const i=this._db.get(e);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(e),++this._hit,i.entry;++this._miss}get(t,e){e=t.id+e;const i=this._db.get(e);if(void 0!==i)return this._db.delete(e),i.lives=i.lifetime,this._db.set(e,i),++this._hit,i.entry;++this._miss}peek(t,e){const i=this._db.get(t.id+e);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},i=new Array;this._db.forEach(((t,r)=>{const n=t.lifetime;i[n]=(i[n]||0)+t.size,this._users.forAll((i=>{const{id:n,name:s}=i;if(r.startsWith(n)){const i=e[s]||0;e[s]=i+t.size}}))}));const r={};this._users.forAll((t=>{const i=t.name;if("hitRate"in t&&"number"==typeof t.hitRate&&!isNaN(t.hitRate)&&t.hitRate>0){const n=e[i]||0;e[i]=n,r[i]=Math.round(100*t.hitRate)+"%"}else r[i]="0%"}));const s=Object.keys(e);s.sort(((t,i)=>e[i]-e[t])),s.forEach((i=>t[i]=Math.round(e[i]/2**20)+"MB / "+r[i]));for(let e=i.length-1;e>=0;--e){const r=i[e];r&&(t["Priority "+(e+n-1)]=Math.round(r/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){const e=t.id;this._db.forEach(((t,i)=>{i.startsWith(e)&&(this._size-=t.size,this._db.delete(i),this._notifyRemove(i,t.entry,t.size,o.ALL))})),t.size=0}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,t.size,o.ALL))),this._users.forAll((t=>t.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,i,r){let n;return this._removeFuncs.some((s=>{if(t.startsWith(s[0])){const t=s[1](e,r,i);return"number"==typeof t&&(n=t),!0}return!1})),n}_checkSize(){this._users.forAll((t=>this._checkSizeLimits(t))),this._checkSizeLimits()}_checkSizeLimits(t){const e=t??this;if(e.maxSize<0||e.size<=e.maxSize)return;const i=t?.id;let r=!0;for(;r;){r=!1;for(const[n,s]of this._db)if(0===s.lifetime&&(!i||n.startsWith(i))){if(this._purgeItem(n,s,t),e.size<=.9*e.maxSize)return;r||=this._db.has(n)}}for(const[r,n]of this._db)if((!i||r.startsWith(i))&&(this._purgeItem(r,n,t),e.size<=.9*e.maxSize))return}_purgeItem(t,e,i=this._users.find((e=>t.startsWith(e.id)))){if(this._db.delete(t),e.lives<=1){this._size-=e.size,i&&(i.size-=e.size);const r=this._notifyRemove(t,e.entry,e.size,o.SOME);null!=r&&r>0&&(this._size+=r,i&&(i.size+=r),e.lives=e.lifetime,e.size=r,this._db.set(t,e))}else--e.lives,this._db.set(t,e)}}let c=0;class h{constructor(t,e,i){this.entry=t,this.size=e,this.lifetime=i,this.lives=i}}},77793:function(t,e,i){i.d(e,{P:function(){return E},L:function(){return A}});var r=i(53804),n=i(83525),s=i(90194),o=i(21609),a=i(72977);class l{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(a.AU),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const e=new l,i=this._originStores[a.Gr.DEFAULTS];i&&i.forEach(((t,i)=>{e.set(i,(0,o.o8)(t),a.Gr.DEFAULTS)}));for(let i=a.Gr.SERVICE;i<a.AU;i++){const r=this._originStores[i];r&&r.forEach(((r,n)=>{t&&t.has(n)||e.set(n,(0,o.o8)(r),i)}))}return e}get(t,e){const i=void 0===e?this._values:this._originStores[e];return i?i.get(t):void 0}keys(t){const e=null==t?this._values:this._originStores[t];return e?[...e.keys()]:[]}set(t,e,i=a.Gr.USER){let r=this._originStores[i];if(r||(r=new Map,this._originStores[i]=r),r.set(t,e),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const r=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,i),r!==e}return!1}delete(t,e=a.Gr.USER){const i=this._originStores[e];if(!i)return;const r=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===e){this._values.delete(t);for(let i=e-1;i>=0;i--){const e=this._originStores[i];if(e&&e.has(t)){this._values.set(t,e.get(t)),this._propertyOriginMap.set(t,i);break}}}return r}has(t,e){const i=void 0===e?this._values:this._originStores[e];return!!i&&i.has(t)}revert(t,e){for(;e>0&&!this.has(t,e);)--e;const i=this._originStores[e],r=i?.get(t),n=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,e),n!==r}originOf(t){return this._propertyOriginMap.get(t)||a.Gr.DEFAULTS}forEach(t){this._values.forEach(t)}}var u=i(97354),c=i(63693),h=i(65953);const p=t=>{let e=class extends t{constructor(...t){super(...t);const e=(0,c.oY)(this),i=e.store,r=new l;e.store=r,(0,s.k)(e,i,r)}read(t,e){(0,u.L)(this,t,e)}getAtOrigin(t,e){const i=f(this),r=(0,a.aB)(e);if("string"==typeof t)return i.get(t,r);const n={};return t.forEach((t=>{n[t]=i.get(t,r)})),n}originOf(t){return(0,a.OL)(this.originIdOf(t))}originIdOf(t){return f(this).originOf(t)}revert(t,e){const i=f(this),r=(0,a.aB)(e),n=(0,c.oY)(this);let s;s="string"==typeof t?"*"===t?i.keys(r):[t]:t,s.forEach((t=>{n.invalidate(t),i.revert(t,r),n.commit(t)}))}};return e=(0,r._)([(0,h.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function f(t){return(0,c.oY)(t).store}let y=class extends(p(n.A)){};y=(0,r._)([(0,h.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],y);var _=i(62664),d=i(99495);const m=t=>{let e=class extends t{constructor(...t){super(...t)}clear(t,e="user"){return g(this).delete(t,(0,a.aB)(e))}write(t,e){return(0,d.M)(this,t=t||{},e),t}setAtOrigin(t,e,i){(0,c.oY)(this).setAtOrigin(t,e,(0,a.aB)(i))}removeOrigin(t){const e=g(this),i=(0,a.aB)(t),r=e.keys(i);for(const t of r)e.originOf(t)===i&&e.set(t,e.get(t,i),a.Gr.USER)}updateOrigin(t,e){const i=g(this),r=(0,a.aB)(e),n=(0,_.Jt)(this,t);for(let e=r+1;e<a.AU;++e)i.delete(t,e);i.set(t,n,r)}toJSON(t){return this.write({},t)}};return e=(0,r._)([(0,h.$)("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function g(t){return(0,c.oY)(t).store}const E=t=>{let e=class extends(m(p(t))){constructor(...t){super(...t)}};return e=(0,r._)([(0,h.$)("esri.core.MultiOriginJSONSupport")],e),e};let A=class extends(E(n.A)){};A=(0,r._)([(0,h.$)("esri.core.MultiOriginJSONSupport")],A)},64786:function(t,e,i){i.d(e,{K:function(){return r}});const r=["operational-layers","basemap","ground"]},75505:function(t,e,i){i.d(e,{$:function(){return d},IB:function(){return s},N2:function(){return m},QP:function(){return N},RH:function(){return E},Vl:function(){return w},Ws:function(){return A},ZD:function(){return g},_L:function(){return v},bJ:function(){return S},e$:function(){return I},f6:function(){return L},pW:function(){return T},pf:function(){return O}});var r=i(52874),n=(i(33400),i(41546));function s(t){return"r"in t&&"g"in t&&"b"in t}function o(t){return"h"in t&&"s"in t&&"v"in t}function a(t){return"l"in t&&"a"in t&&"b"in t}function l(t){return"l"in t&&"c"in t&&"h"in t}const u=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],c=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function h(t,e){const i=[];let r,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const s=t.length,o=t[0].length;let a=0;for(r=0;r<s;r++){for(a=0,n=0;n<o;n++)a+=t[r][n]*e[n];i.push(a)}return i}function p(t){const e=[t.r/255,t.g/255,t.b/255].map((t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4)),i=h(u,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function f(t){const e=h(c,[t.x/100,t.y/100,t.z/100]).map((t=>{const e=t<=.0031308?12.92*t:1.055*t**(1/2.4)-.055;return Math.min(1,Math.max(e,0))}));return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function y(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map((t=>t>(6/29)**3?t**(1/3):1/3*(29/6)**2*t+4/29));return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function _(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map((t=>t>6/29?t**3:3*(6/29)**2*(t-4/29)));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function d(t){return s(t)?t:l(t)?function(t){return f(_(function(t){const e=t.l,i=t.c,r=t.h;return{l:e,a:i*Math.cos(r),b:i*Math.sin(r)}}(t)))}(t):a(t)?function(t){return f(_(t))}(t):function(t){return"x"in t&&"y"in t&&"z"in t}(t)?f(t):o(t)?function(t){const e=(t.h+360)%360/60,i=t.s/100,r=t.v/100*255,n=r*i,s=n*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-n),o.g=Math.round(o.g+r-n),o.b=Math.round(o.b+r-n),o}(t):t}function m(t){return o(t)?t:function(t){const e=t.r,i=t.g,r=t.b,n=Math.max(e,i,r),s=n-Math.min(e,i,r);let o=n,a=0===s?0:n===e?(i-r)/s%6:n===i?(r-e)/s+2:(e-i)/s+4,l=0===s?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}(d(t))}function g(t){return a(t)?t:function(t){return y(p(t))}(d(t))}function E(t){return l(t)?t:function(t){return function(t){const e=t.l,i=t.a,r=t.b,n=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i);return s=s>0?s:s+2*Math.PI,{l:e,c:n,h:s}}(y(p(t)))}(d(t))}function A(t,e){const{r:i,g:n,b:s}=e?.ignoreAlpha?t:function(t){let{r:e,g:i,b:n,a:s}=t;return s<1&&(e=Math.round(s*e+255*(1-s)),i=Math.round(s*i+255*(1-s)),n=Math.round(s*n+255*(1-s))),new r.A({r:e,g:i,b:n})}(t);return.2126*i+.7152*n+.0722*s}var T,R;function S(t,e=T.High){return A(t,{ignoreAlpha:!0})>e?new r.A([0,0,0,t.a]):new r.A([255,255,255,t.a])}function I(t,e){const i=g(t);i.l*=1-e;const r=d(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function v(t,e){const i=t.clone();return i.a*=e,i}function w(t,e){const i=m(t);i.s*=e;const r=d(i),n=t.clone();return n.setColor(r),n.a=t.a,n}function N(t){return r.A.toUnitRGBA(t)}function O(t){return(0,n.fA)(t[0],t[1],t[2],t.length>3?t[3]:1)}function L(t,e){const i=r.A.toUnitRGBA(t);return i[3]*=e,i}(R=T||(T={}))[R.Low=160]="Low",R[R.High=225]="High"},72139:function(t,e,i){var r,n,s;i.d(e,{O3:function(){return l},Ox:function(){return u},bR:function(){return o},dC:function(){return r}}),(s=r||(r={}))[s.Unknown=0]="Unknown",s[s.Point=1]="Point",s[s.LineString=2]="LineString",s[s.Polygon=3]="Polygon";class o{constructor(t,e){this.x=t,this.y=e}clone(){return new o(this.x,this.y)}equals(t,e){return t===this.x&&e===this.y}isEqual(t){return t.x===this.x&&t.y===this.y}setCoords(t,e){return this.x=t,this.y=e,this}normalize(){const t=this.x,e=this.y,i=Math.sqrt(t*t+e*e);return this.x/=i,this.y/=i,this}rightPerpendicular(){const t=this.x;return this.x=this.y,this.y=-t,this}leftPerpendicular(){const t=this.x;return this.x=-this.y,this.y=t,this}move(t,e){return this.x+=t,this.y+=e,this}assign(t){return this.x=t.x,this.y=t.y,this}assignAdd(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}assignSub(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}rotate(t,e){const i=this.x,r=this.y;return this.x=i*t-r*e,this.y=i*e+r*t,this}scale(t){return this.x*=t,this.y*=t,this}length(){const t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}sub(t){return this.x-=t.x,this.y-=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}static distance(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}static add(t,e){return new o(t.x+e.x,t.y+e.y)}static sub(t,e){return new o(t.x-e.x,t.y-e.y)}}class a{constructor(t,e,i){this.ratio=t,this.x=e,this.y=i}}class l{constructor(t,e,i,r=8,n=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=r,this._pixelMargin=n,this._tileSize=512*r,this._dz=t,this._yPos=e,this._xPos=i}setPixelMargin(t){t!==this._pixelMargin&&(this._pixelMargin=t,this.setExtent(this._extent))}setExtent(t){this._extent=t,this._finalRatio=this._tileSize/t*(1<<this._dz);let e=this._pixelRatio*this._pixelMargin;e/=this._finalRatio;const i=t>>this._dz;e>i&&(e=i),this._margin=e,this._xmin=i*this._xPos-e,this._ymin=i*this._yPos-e,this._xmax=this._xmin+i+2*e,this._ymax=this._ymin+i+2*e}reset(t){this._type=t,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(t,e){this._pushLine(),this._prevIsIn=this._isIn(t,e),this._moveTo(t,e,this._prevIsIn),this._prevPt=new o(t,e),this._firstPt=new o(t,e),this._dist=0}lineTo(t,e){const i=this._isIn(t,e),r=new o(t,e),n=o.distance(this._prevPt,r);let s,l,u,c,h,p,f,y;if(i)this._prevIsIn?this._lineTo(t,e,!0):(s=this._prevPt,l=r,u=this._intersect(l,s),this._start=this._dist+n*(1-this._r),this._lineTo(u.x,u.y,!0),this._lineTo(l.x,l.y,!0));else if(this._prevIsIn)l=this._prevPt,s=r,u=this._intersect(l,s),this._lineTo(u.x,u.y,!0),this._lineTo(s.x,s.y,!1);else{const t=this._prevPt,e=r;if(t.x<=this._xmin&&e.x<=this._xmin||t.x>=this._xmax&&e.x>=this._xmax||t.y<=this._ymin&&e.y<=this._ymin||t.y>=this._ymax&&e.y>=this._ymax)this._lineTo(e.x,e.y,!1);else{const i=[];if((t.x<this._xmin&&e.x>this._xmin||t.x>this._xmin&&e.x<this._xmin)&&(c=(this._xmin-t.x)/(e.x-t.x),y=t.y+c*(e.y-t.y),y<=this._ymin?p=!1:y>=this._ymax?p=!0:i.push(new a(c,this._xmin,y))),(t.x<this._xmax&&e.x>this._xmax||t.x>this._xmax&&e.x<this._xmax)&&(c=(this._xmax-t.x)/(e.x-t.x),y=t.y+c*(e.y-t.y),y<=this._ymin?p=!1:y>=this._ymax?p=!0:i.push(new a(c,this._xmax,y))),(t.y<this._ymin&&e.y>this._ymin||t.y>this._ymin&&e.y<this._ymin)&&(c=(this._ymin-t.y)/(e.y-t.y),f=t.x+c*(e.x-t.x),f<=this._xmin?h=!1:f>=this._xmax?h=!0:i.push(new a(c,f,this._ymin))),(t.y<this._ymax&&e.y>this._ymax||t.y>this._ymax&&e.y<this._ymax)&&(c=(this._ymax-t.y)/(e.y-t.y),f=t.x+c*(e.x-t.x),f<=this._xmin?h=!1:f>=this._xmax?h=!0:i.push(new a(c,f,this._ymax))),0===i.length)h?p?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):p?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(i.length>1&&i[0].ratio>i[1].ratio)this._start=this._dist+n*i[1].ratio,this._lineTo(i[1].x,i[1].y,!0),this._lineTo(i[0].x,i[0].y,!0);else{this._start=this._dist+n*i[0].ratio;for(let t=0;t<i.length;t++)this._lineTo(i[t].x,i[t].y,!0)}this._lineTo(e.x,e.y,!1)}}this._dist+=n,this._prevIsIn=i,this._prevPt=r}close(){if(this._line.length>2){const t=this._firstPt,e=this._prevPt;t.x===e.x&&t.y===e.y||this.lineTo(t.x,t.y);const i=this._line;let r=i.length;for(;r>=4&&(i[0].x===i[1].x&&i[0].x===i[r-2].x||i[0].y===i[1].y&&i[0].y===i[r-2].y);)i.pop(),i[0].x=i[r-2].x,i[0].y=i[r-2].y,--r}}result(t=!0){return this._pushLine(),0===this._lines.length?null:(this._type===r.Polygon&&t&&c.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==r.LineString)throw new Error("Only valid for lines");this._pushLine();const t=this._lines,e=t.length;if(0===e)return null;const i=[];for(let r=0;r<e;r++)i.push({line:t[r],start:this._starts[r]||0});return i}_isIn(t,e){return t>=this._xmin&&t<=this._xmax&&e>=this._ymin&&e<=this._ymax}_intersect(t,e){let i,r,n;if(e.x>=this._xmin&&e.x<=this._xmax)r=e.y<=this._ymin?this._ymin:this._ymax,n=(r-t.y)/(e.y-t.y),i=t.x+n*(e.x-t.x);else if(e.y>=this._ymin&&e.y<=this._ymax)i=e.x<=this._xmin?this._xmin:this._xmax,n=(i-t.x)/(e.x-t.x),r=t.y+n*(e.y-t.y);else{r=e.y<=this._ymin?this._ymin:this._ymax,i=e.x<=this._xmin?this._xmin:this._xmax;const s=(i-t.x)/(e.x-t.x),o=(r-t.y)/(e.y-t.y);s<o?(n=s,r=t.y+s*(e.y-t.y)):(n=o,i=t.x+o*(e.x-t.x))}return this._r=n,new o(i,r)}_pushLine(){this._line&&(this._type===r.Point?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===r.LineString?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===r.Polygon&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(t,e,i){this._type!==r.Polygon?i&&(t=Math.round((t-(this._xmin+this._margin))*this._finalRatio),e=Math.round((e-(this._ymin+this._margin))*this._finalRatio),this._line.push(new o(t,e))):(i||(t<this._xmin&&(t=this._xmin),t>this._xmax&&(t=this._xmax),e<this._ymin&&(e=this._ymin),e>this._ymax&&(e=this._ymax)),t=Math.round((t-(this._xmin+this._margin))*this._finalRatio),e=Math.round((e-(this._ymin+this._margin))*this._finalRatio),this._line.push(new o(t,e)),this._isH=!1,this._isV=!1)}_lineTo(t,e,i){let n,s;if(this._type!==r.Polygon)if(i){if(t=Math.round((t-(this._xmin+this._margin))*this._finalRatio),e=Math.round((e-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(n=this._line[this._line.length-1],n.equals(t,e)))return;this._line.push(new o(t,e))}else this._line&&this._line.length>0&&this._pushLine();else if(i||(t<this._xmin&&(t=this._xmin),t>this._xmax&&(t=this._xmax),e<this._ymin&&(e=this._ymin),e>this._ymax&&(e=this._ymax)),t=Math.round((t-(this._xmin+this._margin))*this._finalRatio),e=Math.round((e-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){n=this._line[this._line.length-1];const i=n.x===t,r=n.y===e;if(i&&r)return;this._isH&&i||this._isV&&r?(n.x=t,n.y=e,s=this._line[this._line.length-2],s.x===t&&s.y===e?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(s=this._line[this._line.length-2],this._isH=s.x===t,this._isV=s.y===e)):(this._isH=s.x===t,this._isV=s.y===e)):(this._line.push(new o(t,e)),this._isH=i,this._isV=r)}else this._line.push(new o(t,e))}}class u{setExtent(t){this._ratio=4096===t?1:4096/t}get validateTessellation(){return this._ratio<1}reset(t){this._lines=[],this._line=null}moveTo(t,e){this._line&&this._lines.push(this._line),this._line=[];const i=this._ratio;this._line.push(new o(t*i,e*i))}lineTo(t,e){const i=this._ratio;this._line.push(new o(t*i,e*i))}close(){const t=this._line;t&&!t[0].isEqual(t[t.length-1])&&t.push(t[0])}result(){return this._line&&this._lines.push(this._line),0===this._lines.length?null:this._lines}}!function(t){t[t.sideLeft=0]="sideLeft",t[t.sideRight=1]="sideRight",t[t.sideTop=2]="sideTop",t[t.sideBottom=3]="sideBottom"}(n||(n={}));class c{static simplify(t,e,i){if(!i)return;const r=-e,s=t+e,o=-e,a=t+e,l=[],u=[],h=i.length;for(let t=0;t<h;++t){const e=i[t];if(!e||e.length<2)continue;let c,h=e[0];const p=e.length;for(let i=1;i<p;++i)c=e[i],h.x===c.x&&(h.x<=r&&(h.y>c.y?(l.push(t),l.push(i),l.push(n.sideLeft),l.push(-1)):(u.push(t),u.push(i),u.push(n.sideLeft),u.push(-1))),h.x>=s&&(h.y<c.y?(l.push(t),l.push(i),l.push(n.sideRight),l.push(-1)):(u.push(t),u.push(i),u.push(n.sideRight),u.push(-1)))),h.y===c.y&&(h.y<=o&&(h.x<c.x?(l.push(t),l.push(i),l.push(n.sideTop),l.push(-1)):(u.push(t),u.push(i),u.push(n.sideTop),u.push(-1))),h.y>=a&&(h.x>c.x?(l.push(t),l.push(i),l.push(n.sideBottom),l.push(-1)):(u.push(t),u.push(i),u.push(n.sideBottom),u.push(-1)))),h=c}if(0===l.length||0===u.length)return;c.fillParent(i,u,l),c.fillParent(i,l,u);const p=[];c.calcDeltas(p,u,l),c.calcDeltas(p,l,u),c.addDeltas(p,i)}static fillParent(t,e,i){const r=i.length,s=e.length;for(let o=0;o<s;o+=4){const s=e[o],a=e[o+1],l=e[o+2],u=t[s][a-1],c=t[s][a];let p=8092,f=-1;for(let e=0;e<r;e+=4){if(i[e+2]!==l)continue;const r=i[e],s=i[e+1],o=t[r][s-1],a=t[r][s];switch(l){case n.sideLeft:case n.sideRight:if(h(u.y,o.y,a.y)&&h(c.y,o.y,a.y)){const t=Math.abs(a.y-o.y);t<p&&(p=t,f=e)}break;case n.sideTop:case n.sideBottom:if(h(u.x,o.x,a.x)&&h(c.x,o.x,a.x)){const t=Math.abs(a.x-o.x);t<p&&(p=t,f=e)}}}e[o+3]=f}}static calcDeltas(t,e,i){const r=e.length;for(let n=0;n<r;n+=4){const r=[],s=c.calcDelta(n,e,i,r);t.push(e[n]),t.push(e[n+1]),t.push(e[n+2]),t.push(s)}}static calcDelta(t,e,i,r){const n=e[t+3];if(-1===n)return 0;const s=r.length;return s>1&&r[s-2]===n?0:(r.push(n),c.calcDelta(n,i,e,r)+1)}static addDeltas(t,e){const i=t.length;let r=0;for(let e=0;e<i;e+=4){const i=t[e+3];i>r&&(r=i)}for(let s=0;s<i;s+=4){const i=e[t[s]],o=t[s+1],a=r-t[s+3];switch(t[s+2]){case n.sideLeft:i[o-1].x-=a,i[o].x-=a,1===o&&(i[i.length-1].x-=a),o===i.length-1&&(i[0].x-=a);break;case n.sideRight:i[o-1].x+=a,i[o].x+=a,1===o&&(i[i.length-1].x+=a),o===i.length-1&&(i[0].x+=a);break;case n.sideTop:i[o-1].y-=a,i[o].y-=a,1===o&&(i[i.length-1].y-=a),o===i.length-1&&(i[0].y-=a);break;case n.sideBottom:i[o-1].y+=a,i[o].y+=a,1===o&&(i[i.length-1].y+=a),o===i.length-1&&(i[0].y+=a)}}}}const h=(t,e,i)=>t>=e&&t<=i||t>=i&&t<=e},47940:function(t,e,i){i.r(e),i.d(e,{default:function(){return ot}});var r=i(53804),n=i(93040),s=i(77472),o=i(39819),a=i(21609),l=i(77793),u=i(60539),c=i(90683),h=i(23502),p=(i(58941),i(40633)),f=i(47332),y=i(65953),_=i(81392),d=i(91484),m=i(57165),g=i(20833),E=i(30607),A=i(78933),T=i(74927),R=i(1615),S=i(88243),I=i(92078),v=i(61380),w=i(18195);let N=null;var O=i(24540);class L{constructor(t,e){this._spriteSource=t,this._maxTextureSize=e,this.devicePixelRatio=1,this._spriteImageFormat="png",this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded","url"===t.type&&t.spriteFormat&&(this._spriteImageFormat=t.spriteFormat),t.pixelRatio&&(this.devicePixelRatio=t.pixelRatio),this.baseURL=t.spriteUrl}get spriteNames(){const t=[];for(const e in this._spritesData)t.push(e);return t.sort(),t}getSpriteInfo(t){return this._spritesData?this._spritesData[t]:null}async load(t){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(t),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}async _loadSprites(t){this._isRetina=this.devicePixelRatio>1.15;const{width:e,height:i,data:r,json:n}=await this._getSpriteData(this._spriteSource,t),s=Object.keys(n);if(!s||0===s.length||!r)return this._spritesData=this.image=null,void(this.width=this.height=0);this._spritesData=n,this.width=e,this.height=i;const a=Math.max(this._maxTextureSize,4096);if(e>a||i>a){const t=`Sprite resource for style ${this.baseURL} is bigger than the maximum allowed of ${a} pixels}`;throw p.A.getLogger("esri.layers.support.SpriteSource").error(t),new o.A("SpriteSource",t)}let l;for(let t=0;t<r.length;t+=4)l=r[t+3]/255,r[t]=r[t]*l,r[t+1]=r[t+1]*l,r[t+2]=r[t+2]*l;this.image=r}async _getSpriteData(t,e){if("image"===t.type){let e,i;if(this.devicePixelRatio<1.15){if(!t.spriteSource1x)throw new o.A("SpriteSource","no image data provided for low resolution sprites!");e=t.spriteSource1x.image,i=t.spriteSource1x.json}else{if(!t.spriteSource2x)throw new o.A("SpriteSource","no image data provided for high resolution sprites!");e=t.spriteSource2x.image,i=t.spriteSource2x.json}return"width"in e&&"height"in e&&"data"in e&&((0,O.mw)(e.data)||(0,O.UR)(e.data))?{width:e.width,height:e.height,data:new Uint8Array(e.data),json:i}:{...x(e),json:i}}const i=(0,c.An)(this.baseURL),r=i.query?"?"+(0,c.x0)(i.query):"",s=this._isRetina?"@2x":"",a=`${i.path}${s}.${this._spriteImageFormat}${r}`,l=`${i.path}${s}.json${r}`,[u,h]=await Promise.all([(0,n.A)(l,e),(0,n.A)(a,{responseType:"image",...e})]);return{...x(h.data),json:u.data}}}function x(t){const e=document.createElement("canvas"),i=e.getContext("2d");e.width=t.width,e.height=t.height,i.drawImage(t,0,0,t.width,t.height);const r=i.getImageData(0,0,t.width,t.height);return{width:t.width,height:t.height,data:new Uint8Array(r.data)}}var b=i(76226),D=i(6053),P=i(57652),M=i(1644),C=i(36008);class U{constructor(t){this.url=t}destroy(){this._tileIndexPromise=null}async fetchTileIndex(){return this._tileIndexPromise||(this._tileIndexPromise=(0,n.A)(this.url).then((t=>t.data.index))),this._tileIndexPromise}async dataKey(t,e){const i=await this.fetchTileIndex();return(0,u.Te)(e),this._getIndexedDataKey(i,t)}_getIndexedDataKey(t,e){const i=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return null;let r=e;for(;0!==r.level;)r=new C.A(r.level-1,r.row>>1,r.col>>1,r.world),i.push(r);let n,s,o=t,a=i.pop();if(1===o)return a;for(;i.length;)if(n=i.pop(),s=(1&n.col)+((1&n.row)<<1),o){if(0===o[s]){a=null;break}if(1===o[s]){a=n;break}a=n,o=o[s]}return a}}var G=i(95929);class B{constructor(t,e){this._tilemap=t,this._tileIndexUrl=e}destroy(){this._tilemap=(0,G.pR)(this._tilemap),this._tileIndexPromise=null}async fetchTileIndex(t){return this._tileIndexPromise||(this._tileIndexPromise=(0,n.A)(this._tileIndexUrl,{query:{...t?.query}}).then((t=>t.data.index))),this._tileIndexPromise}dataKey(t,e){const{level:i,row:r,col:n}=t,s=new C.A(t);return this._tilemap.fetchAvailabilityUpsample(i,r,n,s,e).then((()=>(s.world=t.world,s))).catch((t=>{if((0,u.zf)(t))throw t;return null}))}}var F=i(25738);class z{constructor(t){this._tileUrl=t,this._promise=null,this._abortController=null,this._abortOptions=[]}getData(t){(null==this._promise||(0,u.G4)(this._abortController?.signal))&&(this._promise=this._makeRequest(this._tileUrl));const e=this._abortOptions;return e.push(t),(0,u.u7)(t,(()=>{e.every((t=>(0,u.G4)(t)))&&this._abortController.abort()})),this._promise.then((t=>(0,a.o8)(t)))}async _makeRequest(t){this._abortController=new AbortController;const{data:e}=await(0,n.A)(t,{responseType:"array-buffer",signal:this._abortController.signal});return e}}const H=new Map;function k(t,e){return(0,F.tE)(H,t,(()=>new z(t))).getData(e).finally((()=>H.delete(t)))}class V{constructor(t,e,i){this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.initialExtent=null,this.name=t,this.sourceUrl=e;const r=(0,c.An)(this.sourceUrl),n=(0,a.o8)(i),s=n.tiles;if(r)for(let t=0;t<s.length;t++){const e=(0,c.An)(s[t]);e&&((0,c.oP)(e.path)||(e.path=(0,c.fj)(r.path,e.path)),s[t]=(0,c.a6)(e.path,{...r.query,...e.query}))}this.tileServers=s;const o=i.capabilities&&i.capabilities.split(",").map((t=>t.toLowerCase().trim())),l=!0===i?.exportTilesAllowed,u=!0===o?.includes("tilemap"),h=l&&i.hasOwnProperty("maxExportTilesCount")?i.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:l,supportsTileMap:u},exportTiles:l?{maxExportTilesCount:+h}:null},this.tileInfo=b.default.fromJSON(n.tileInfo);const p=i.tileMap?(0,c.a6)((0,c.fj)(r.path,i.tileMap),r.query??{}):null;u?(this.type="vector-tile",this.tilemap=new B(new D.d({layer:{parsedUrl:r,tileInfo:this.tileInfo},minLOD:n.minLOD??this.tileInfo.lods[0].level,maxLOD:n.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}),p)):p&&(this.tilemap=new U(p)),this.fullExtent=d.default.fromJSON(i.fullExtent),this.initialExtent=d.default.fromJSON(i.initialExtent)}destroy(){this.tilemap?.destroy()}async getRefKey(t,e){return await(this.tilemap?.dataKey(t,e))??t}requestTile(t,e,i,r){return function(t,e,i,r,n){const s=(0,c.An)(t),o=s.query;if(o)for(const[t,n]of Object.entries(o))switch(n){case"{x}":o[t]=r.toString();break;case"{y}":o[t]=i.toString();break;case"{z}":o[t]=e.toString()}const a=s.path;return k((0,c.a6)(a.replaceAll(/\{z\}/gi,e.toString()).replaceAll(/\{y\}/gi,i.toString()).replaceAll(/\{x\}/gi,r.toString()),{...s.query}),n)}(this.tileServers[e%this.tileServers.length],t,e,i,r)}isCompatibleWith(t){const e=this.tileInfo,i=t.tileInfo;if(!e.spatialReference.equals(i.spatialReference))return!1;if(!e.origin.equals(i.origin))return!1;if(Math.round(e.dpi)!==Math.round(i.dpi))return!1;const r=e.lods,n=i.lods,s=Math.min(r.length,n.length);for(let t=0;t<s;t++){const e=r[t],i=n[t];if(e.level!==i.level||Math.round(e.scale)!==Math.round(i.scale))return!1}return!0}}function $(...t){let e;for(const i of t)if(null!=i)if((0,c.BQ)(i)){if(e){const t=e.split("://")[0];e=t+":"+i.trim()}}else e=(0,c.oP)(i)?i:(0,c.fj)(e,i);return e?(0,c.UC)(e):void 0}async function Y(t,e,i,r,s){let o,a,l;if((0,u.Te)(s),"string"==typeof i){const t=(0,c.S8)(i);l=await(0,n.A)(t,{...s,responseType:"json",query:{f:"json",...s?.query}}),l.ssl&&(o&&(o=o.replace(/^http:/i,"https:")),a&&(a=a.replace(/^http:/i,"https:"))),o=t,a=t}else null!=i&&(l={data:i},o=i.jsonUrl||null,a=r);const h=l?.data;if(j(h))return t.styleUrl=o||null,async function(t,e,i,r){const n=i?(0,c.nM)(i):(0,c.gd)();t.styleBase=n,t.style=e,e["sprite-format"]&&"webp"===e["sprite-format"].toLowerCase()&&(t.spriteFormat="webp");const s=[];if(e.sources&&e.sources.esri){const i=e.sources.esri;i.url?await Y(t,"esri",$(n,i.url),void 0,r):s.push(Y(t,"esri",i,n,r))}for(const i of Object.keys(e.sources))"esri"!==i&&"vector"===e.sources[i].type&&(e.sources[i].url?s.push(Y(t,i,$(n,e.sources[i].url),void 0,r)):e.sources[i].tiles&&s.push(Y(t,i,e.sources[i],n,r)));await Promise.all(s)}(t,h,a,s);if(!j(h))return t.sourceUrl?Z(t,h,a,!1,e,s):(t.sourceUrl=o||null,Z(t,h,a,!0,e,s));throw new Error("You must specify the URL or the JSON for a service or for a style.")}function W(t){return"object"==typeof t&&!!t&&"tilejson"in t&&null!=t.tilejson}function j(t){return!!t&&"sources"in t&&!!t.sources}async function Z(t,e,i,r,n,s){const o=i?(0,c.UC)(i)+"/":(0,c.gd)(),l=function(t){const e=512;if(function(t){return t.hasOwnProperty("tileInfo")}(t)){const i=t?.tileInfo;return null!=i&&(null==i.rows&&(i.rows=e),null==i.cols&&(i.cols=e)),t}const i={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100,latestWkid:3857}};let r=null;if(W(t)){const{bounds:e}=t;if(e){const t=(0,M.Gh)({x:e[0],y:e[1],spatialReference:(0,a.o8)(P.KK)}),i=(0,M.Gh)({x:e[2],y:e[3],spatialReference:(0,a.o8)(P.KK)});r={xmin:t.x,ymin:t.y,xmax:i.x,ymax:i.y,spatialReference:(0,a.o8)(P.ch)}}}null===r&&(r=i);let n=78271.51696400007,s=295828763.7957775;const o=[],l=t.hasOwnProperty("maxzoom")&&null!=t.maxzoom?+t.maxzoom:22;for(let t=0;t<=l;t++)o.push({level:t,scale:s,resolution:n}),n/=2,s/=2;return{capabilities:"TilesOnly",initialExtent:r,fullExtent:i,minScale:0,maxScale:0,tiles:t.tiles,tileInfo:{rows:e,cols:e,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:o,spatialReference:(0,a.o8)(P.ch)}}}(e),u=new V(n,(0,c.a6)(o,s?.query??{}),l);if(!r&&t.primarySourceName in t.sourceNameToSource){const e=t.sourceNameToSource[t.primarySourceName];if(!e.isCompatibleWith(u))return;null!=u.fullExtent&&(null!=e.fullExtent?e.fullExtent.union(u.fullExtent):e.fullExtent=u.fullExtent.clone()),e.tileInfo&&u.tileInfo&&e.tileInfo.lods.length<u.tileInfo.lods.length&&(e.tileInfo=u.tileInfo)}if(r&&(t.sourceBase=o,t.source=e,t.validatedSource=l,t.primarySourceName=n),t.sourceNameToSource[n]=u,!W(t)&&"defaultStyles"in e&&!t.style){if(null==e.defaultStyles)throw new Error;return"string"==typeof e.defaultStyles?Y(t,"",$(o,e.defaultStyles,"root.json"),void 0,s):Y(t,"",e.defaultStyles,$(o,"root.json"),s)}}var K=i(28993),q=i(34020),X=i(60534),Q=i(45532),J=i(44431);const tt=1e-6;function et(t,e){if(t===e)return!0;if(null==t&&null!=e)return!1;if(null!=t&&null==e)return!1;if(null==t||null==e)return!1;if(!t.spatialReference.equals(e.spatialReference)||t.dpi!==e.dpi)return!1;const i=t.origin,r=e.origin;if(Math.abs(i.x-r.x)>=tt||Math.abs(i.y-r.y)>=tt)return!1;let n,s;t.lods[0].scale>e.lods[0].scale?(n=t,s=e):(s=t,n=e);for(let t=n.lods[0].scale;t>=s.lods[s.lods.length-1].scale-tt;t/=2)if(Math.abs(t-s.lods[0].scale)<tt)return!0;return!1}function it(t,e){if(t===e)return t;if(null==t&&null!=e)return e;if(null!=t&&null==e)return t;if(null==t||null==e)return null;const i=t.size[0],r=t.format,n=t.dpi,s=new Q.default({x:t.origin.x,y:t.origin.y}),o=t.spatialReference,a=t.lods[0].scale>e.lods[0].scale?t.lods[0]:e.lods[0],l=t.lods[t.lods.length-1].scale<=e.lods[e.lods.length-1].scale?t.lods[t.lods.length-1]:e.lods[e.lods.length-1],u=a.scale,c=a.resolution,h=l.scale,p=[];let f=u,y=c,_=0;for(;f>h;)p.push(new J.A({level:_,resolution:y,scale:f})),_++,f/=2,y/=2;return new b.default({size:[i,i],dpi:n,format:r||"pbf",origin:s,lods:p,spatialReference:o})}var rt=i(82790),nt=i(2746);let st=class extends((0,R.dM)((0,w.j)((0,A.f)((0,T.b)((0,I.q)((0,v.A)((0,S.d)((0,E.p)((0,l.P)(g.A)))))))))){constructor(...t){super(...t),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.style=null,this.tilemapCache=null,this.type="vector-tile",this.url=null,this.path=null}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}destroy(){if(this.sourceNameToSource)for(const t of Object.values(this.sourceNameToSource))t?.destroy();this.primarySource?.destroy(),this._spriteSourceMap.clear()}async prefetchResources(t){await this.loadSpriteSource(globalThis.devicePixelRatio||1,t)}load(t){const e=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},t).catch(u.QP).then((async()=>{if(!this.portalItem?.id)return;const e=`${this.portalItem.itemCdnUrl}/resources/styles/root.json`;(await(0,n.A)(e,{...t,query:{f:"json",...this.customParameters,token:this.apiKey}})).data&&this.read({url:e},(0,K.v)(this.portalItem,"portal-item"))})).catch(u.QP).then((()=>this._loadStyle(t)));return this.addResolvingPromise(e),Promise.resolve(this)}get attributionDataUrl(){const t=this.currentStyleInfo,e=t?.serviceUrl&&(0,c.An)(t.serviceUrl);if(!e)return null;const i=this._getDefaultAttribution(e.path);return i?(0,c.a6)(i,{...this.customParameters,token:this.apiKey}):null}get capabilities(){const t=this.primarySource;return t?t.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){return this.primarySource?.fullExtent||null}get initialExtent(){return this.primarySource?.initialExtent||null}get parsedUrl(){return this.serviceUrl?(0,c.An)(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo?.serviceUrl||null}get spatialReference(){return this.tileInfo?.spatialReference??null}get styleUrl(){return this.currentStyleInfo?.styleUrl||null}writeStyleUrl(t,e){t&&(0,c.BQ)(t)&&(t=`https:${t}`);const i=(0,q.py)(t);e.styleUrl=(0,X.e)(t,i)}get tileInfo(){const t=[];for(const e in this.sourceNameToSource)t.push(this.sourceNameToSource[e]);let e=this.primarySource?.tileInfo||new b.default;if(t.length>1)for(let i=0;i<t.length;i++)et(e,t[i].tileInfo)&&(e=it(e,t[i].tileInfo));return e}readTilemapCache(t,e){const i=e.capabilities?.includes("Tilemap");return i?new D.d({layer:this}):null}readVersion(t,e){return e.version?parseFloat(e.version):parseFloat(e.currentVersion)}async loadSpriteSource(t=1,e){if(!this._spriteSourceMap.has(t)){const i=(0,nt.C)().maxTextureSize,r=this.currentStyleInfo?.spriteUrl?(0,c.a6)(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null,n=new L({type:"url",spriteUrl:r,pixelRatio:t,spriteFormat:this.currentStyleInfo?.spriteFormat},i);await n.load(e),this._spriteSourceMap.set(t,n)}return this._spriteSourceMap.get(t)}async setSpriteSource(t,e){if(!t)return null;const i=(0,nt.C)().maxTextureSize,r=t.spriteUrl,n=r?(0,c.a6)(r,{...this.customParameters,token:this.apiKey}):null;if(!n&&"url"===t.type)return null;const s=new L(t,i);try{await s.load(e);const i=t.pixelRatio||1;return this._spriteSourceMap.clear(),this._spriteSourceMap.set(i,s),n&&this.currentStyleInfo&&(this.currentStyleInfo.spriteUrl=n),this.emit("spriteSource-change",{spriteSource:s}),s}catch(t){(0,u.QP)(t)}return null}async loadStyle(t,e){const i=t||this.style||this.url;return this._loadingTask&&"string"==typeof i&&this.url===i||(this._loadingTask?.abort(),this._loadingTask=(0,s.UT)((t=>(this._spriteSourceMap.clear(),this._getSourceAndStyle(i,{signal:t}))),e)),this._loadingTask.promise}getStyleLayerId(t){return this.styleRepository.getStyleLayerId(t)}getStyleLayerIndex(t){return this.styleRepository.getStyleLayerIndex(t)}getPaintProperties(t){return(0,a.o8)(this.styleRepository?.getPaintProperties(t))}setPaintProperties(t,e){const i=this.styleRepository.isPainterDataDriven(t);this.styleRepository.setPaintProperties(t,e);const r=this.styleRepository.isPainterDataDriven(t);this.emit("paint-change",{layer:t,paint:e,isDataDriven:i||r})}getStyleLayer(t){return(0,a.o8)(this.styleRepository.getStyleLayer(t))}setStyleLayer(t,e){this.styleRepository.setStyleLayer(t,e),this.emit("style-layer-change",{layer:t,index:e})}deleteStyleLayer(t){this.styleRepository.deleteStyleLayer(t),this.emit("delete-style-layer",{layer:t})}getLayoutProperties(t){return(0,a.o8)(this.styleRepository.getLayoutProperties(t))}setLayoutProperties(t,e){this.styleRepository.setLayoutProperties(t,e),this.emit("layout-change",{layer:t,layout:e})}setStyleLayerVisibility(t,e){this.styleRepository.setStyleLayerVisibility(t,e),this.emit("style-layer-visibility-change",{layer:t,visibility:e})}getStyleLayerVisibility(t){return this.styleRepository.getStyleLayerVisibility(t)}write(t,e){return e?.origin&&!this.styleUrl?(e.messages&&e.messages.push(new o.A("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(t,e)}getTileUrl(t,e,i){return null}async _getSourceAndStyle(t,e){if(!t)throw new Error("invalid style!");const i=await async function(t,e){const i={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[r,n]="string"==typeof t?[t,null]:[null,t.jsonUrl];return await Y(i,"esri",t,n,e),{layerDefinition:i.validatedSource,url:r,serviceUrl:i.sourceUrl,style:i.style,styleUrl:i.styleUrl,spriteUrl:i.style.sprite&&$(i.styleBase,i.style.sprite),spriteFormat:i.spriteFormat,glyphsUrl:i.style.glyphs&&$(i.styleBase,i.style.glyphs),sourceNameToSource:i.sourceNameToSource,primarySourceName:i.primarySourceName}}(t,{...e,query:{...this.customParameters,token:this.apiKey}});"webp"===i.spriteFormat&&(await function(t){if(N)return N;const e={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return N=new Promise((t=>{const i=new Image;i.onload=()=>{i.onload=i.onerror=null,t(i.width>0&&i.height>0)},i.onerror=()=>{i.onload=i.onerror=null,t(!1)},i.src="data:image/webp;base64,"+e.lossy})),N}()||(i.spriteFormat="png")),this._set("currentStyleInfo",{...i}),"string"==typeof t?(this.url=t,this.style=null):(this.url=null,this.style=t),this._set("sourceNameToSource",i.sourceNameToSource),this._set("primarySource",i.sourceNameToSource[i.primarySourceName]),this._set("styleRepository",new rt.A(i.style)),this.read(i.layerDefinition,{origin:"service"}),this.emit("load-style")}_getDefaultAttribution(t){const e=t.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^/]+)?\/arcgis\/rest\/services\/([^/]+(\/[^/]+)*)\/vectortileserver/i),i=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2","World_Hillshade_v2"];if(!e)return;const r=e[2]&&e[2].toLowerCase();if(!r)return;const n=e[1]||"";for(const t of i)if(t.toLowerCase().includes(r))return(0,c.S8)(`//static.arcgis.com/attribution/Vector${n}/${t}`)}async _loadStyle(t){return this._loadingTask?.promise??this.loadStyle(null,t)}};(0,r._)([(0,h.MZ)({readOnly:!0})],st.prototype,"attributionDataUrl",null),(0,r._)([(0,h.MZ)({type:["show","hide"]})],st.prototype,"listMode",void 0),(0,r._)([(0,h.MZ)({json:{read:!0,write:!0}})],st.prototype,"blendMode",void 0),(0,r._)([(0,h.MZ)({readOnly:!0,json:{read:!1}})],st.prototype,"capabilities",null),(0,r._)([(0,h.MZ)({readOnly:!0})],st.prototype,"currentStyleInfo",void 0),(0,r._)([(0,h.MZ)({json:{read:!1},readOnly:!0,type:d.default})],st.prototype,"fullExtent",null),(0,r._)([(0,h.MZ)({json:{read:!1},readOnly:!0,type:d.default})],st.prototype,"initialExtent",null),(0,r._)([(0,h.MZ)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],st.prototype,"isReference",void 0),(0,r._)([(0,h.MZ)({type:["VectorTileLayer"]})],st.prototype,"operationalLayerType",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],st.prototype,"parsedUrl",null),(0,r._)([(0,h.MZ)()],st.prototype,"style",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],st.prototype,"serviceUrl",null),(0,r._)([(0,h.MZ)({type:m.A,readOnly:!0})],st.prototype,"spatialReference",null),(0,r._)([(0,h.MZ)({readOnly:!0})],st.prototype,"styleRepository",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],st.prototype,"sourceNameToSource",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],st.prototype,"primarySource",void 0),(0,r._)([(0,h.MZ)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],st.prototype,"styleUrl",null),(0,r._)([(0,_.K)(["portal-item","web-document"],"styleUrl")],st.prototype,"writeStyleUrl",null),(0,r._)([(0,h.MZ)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:b.default})],st.prototype,"tileInfo",null),(0,r._)([(0,h.MZ)()],st.prototype,"tilemapCache",void 0),(0,r._)([(0,f.w)("service","tilemapCache",["capabilities","tileInfo"])],st.prototype,"readTilemapCache",null),(0,r._)([(0,h.MZ)({json:{read:!1},readOnly:!0,value:"vector-tile"})],st.prototype,"type",void 0),(0,r._)([(0,h.MZ)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],st.prototype,"url",void 0),(0,r._)([(0,h.MZ)({readOnly:!0})],st.prototype,"version",void 0),(0,r._)([(0,f.w)("version",["version","currentVersion"])],st.prototype,"readVersion",null),(0,r._)([(0,h.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],st.prototype,"path",void 0),st=(0,r._)([(0,y.$)("esri.layers.VectorTileLayer")],st);const ot=st},30607:function(t,e,i){i.d(e,{p:function(){return o}});var r=i(53804),n=i(23502),s=(i(58941),i(40633),i(13798),i(65953));const o=t=>{let e=class extends t{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(t){null!=t?this._override("apiKey",t):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,r._)([(0,n.MZ)({type:String})],e.prototype,"apiKey",null),e=(0,r._)([(0,s.$)("esri.layers.mixins.APIKeyMixin")],e),e}},78933:function(t,e,i){i.d(e,{f:function(){return h}});var r=i(53804),n=(i(50917),i(23502)),s=(i(58941),i(40633),i(13798),i(47332)),o=i(65953),a=i(76226),l=i(10402),u=i(6053),c=i(57165);const h=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(t,e){return null!=e.minLOD&&null!=e.maxLOD?t:0}readMaxScale(t,e){return null!=e.minLOD&&null!=e.maxLOD?t:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(t,e,i){const r=e.capabilities?.includes("Tilemap");let{minLOD:n,maxLOD:s,minScale:o,maxScale:c}=e;if(null==n&&null==s&&0!==o&&0!==c){const t=t=>Math.round(1e4*t)/1e4;o=t(o||e.tileInfo.lods[0].scale),c=t(c||e.tileInfo.lods[e.tileInfo.lods.length-1].scale);for(const i of e.tileInfo.lods){const e=t(i.scale);n=e>=o?i.level:n,s=e>=c?i.level:s}}if(r)return new u.d({layer:this,minLOD:n,maxLOD:s});if(e.tileInfo){const t=new a.default;return t.read(e.tileInfo,i),new l.A(t,n,s)}return null}};return(0,r._)([(0,n.MZ)({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),(0,r._)([(0,n.MZ)()],e.prototype,"minScale",void 0),(0,r._)([(0,s.w)("service","minScale")],e.prototype,"readMinScale",null),(0,r._)([(0,n.MZ)()],e.prototype,"maxScale",void 0),(0,r._)([(0,s.w)("service","maxScale")],e.prototype,"readMaxScale",null),(0,r._)([(0,n.MZ)({type:c.A})],e.prototype,"spatialReference",void 0),(0,r._)([(0,n.MZ)({readOnly:!0})],e.prototype,"supportsBlankTile",null),(0,r._)([(0,n.MZ)({type:a.default})],e.prototype,"tileInfo",void 0),(0,r._)([(0,n.MZ)()],e.prototype,"tilemapCache",void 0),(0,r._)([(0,s.w)("service","tilemapCache",["capabilities","tileInfo"])],e.prototype,"readTilemapCache",null),(0,r._)([(0,n.MZ)()],e.prototype,"version",void 0),e=(0,r._)([(0,o.$)("esri.layers.mixins.ArcGISCachedService")],e),e}},74927:function(t,e,i){i.d(e,{b:function(){return l}});var r=i(53804),n=i(40633),s=i(23502),o=(i(58941),i(13798),i(65953)),a=i(93389);const l=t=>{let e=class extends t{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const t=(0,a.qg)(this.url);if(null!=t&&t.title)return t.title}return this._get("title")||""}set title(t){this._set("title",t)}set url(t){this._set("url",(0,a.Jf)(t,n.A.getLogger(this)))}};return(0,r._)([(0,s.MZ)()],e.prototype,"title",null),(0,r._)([(0,s.MZ)({type:String})],e.prototype,"url",null),e=(0,r._)([(0,o.$)("esri.layers.mixins.ArcGISService")],e),e}},88243:function(t,e,i){i.d(e,{d:function(){return o}});var r=i(53804),n=i(23502),s=(i(58941),i(40633),i(13798),i(65953));const o=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return(0,r._)([(0,n.MZ)({type:Object,json:{write:{overridePolicy:t=>({enabled:!!(t&&Object.keys(t).length>0)})}}})],e.prototype,"customParameters",void 0),e=(0,r._)([(0,s.$)("esri.layers.mixins.CustomParametersMixin")],e),e}},92078:function(t,e,i){i.d(e,{q:function(){return A}});var r=i(53804),n=i(30580),s=i(39819),o=i(90683),a=i(23502),l=i(67888),u=(i(13798),i(58941),i(47332)),c=i(65953),h=i(81392),p=i(64786),f=i(97354),y=i(99495);const _={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},d={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},m={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},g={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":_,"web-map/basemap":d,"web-map/tables":m,"link-chart/operational-layers":{..._,LinkChartLayer:!0},"link-chart/basemap":d,"link-chart/tables":m,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};var E=i(7010);const A=t=>{let e=class extends t{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(t,e,i){return"Group Layer"===i?.portalItem?.type?void 0:t}writeListMode(t,e,i,r){(r&&"ground"===r.layerContainerType||t&&(0,y.R)(this,i,{},r))&&(e[i]=t)}writeOperationalLayerType(t,e,i,r){t&&"tables"!==r?.layerContainerType&&(e.layerType=t)}writeTitle(t,e){e.title=t??"Layer"}readTimeExtent(t){return t?n.A.fromArray(t):null}writeTimeExtent(t,e,i,r){t&&"tables"!==r.layerContainerType&&(t.isEmpty?r?.messages&&r.messages.push(new s.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):e[i]=t.toArray())}read(t,e){e&&(e.layer=this),(0,f.t)(this,t,(e=>super.read(t,e)),e)}write(t,e){if(!this.persistenceEnabled&&!e?.ignorePersistenceEnabled)return null;if(e?.origin){const t=`${e.origin}/${e.layerContainerType||"operational-layers"}`,i=g[t];let r=!!i?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===t&&(r=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===t&&(r=!1),!r)return e.messages?.push(new s.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${t}'`,{layer:this})),null}const i=super.write(t,{...e,layer:this}),r=!!e&&!!e.messages&&!!e.messages.filter((t=>t instanceof s.A&&"web-document-write:property-required"===t.name)).length;return(0,o.w8)(i?.url)?(e?.messages?.push(new s.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&r?null:i}beforeSave(){}};return(0,r._)([(0,a.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),(0,r._)([(0,u.w)("id",["id"])],e.prototype,"readId",null),(0,r._)([(0,a.MZ)(E.C1)],e.prototype,"listMode",void 0),(0,r._)([(0,h.K)("listMode")],e.prototype,"writeListMode",null),(0,r._)([(0,a.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:p.K}}}}})],e.prototype,"operationalLayerType",void 0),(0,r._)([(0,h.K)("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),(0,r._)([(0,a.MZ)(E.ke)],e.prototype,"opacity",void 0),(0,r._)([(0,a.MZ)({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),(0,r._)([(0,a.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),(0,r._)([(0,h.K)("title"),(0,h.K)(["web-scene"],"title")],e.prototype,"writeTitle",null),(0,r._)([(0,a.MZ)({type:n.A,json:{origins:{"web-scene":{write:{layerContainerTypes:p.K}}}}})],e.prototype,"visibilityTimeExtent",void 0),(0,r._)([(0,u.w)("visibilityTimeExtent")],e.prototype,"readTimeExtent",null),(0,r._)([(0,h.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[l.jz,l.Uv]]}})],e.prototype,"writeTimeExtent",null),(0,r._)([(0,a.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:p.K}}},name:"visibility",write:!0}})],e.prototype,"visible",void 0),e=(0,r._)([(0,c.$)("esri.layers.mixins.OperationalLayer")],e),e}},61380:function(t,e,i){i.d(e,{A:function(){return R}});var r=i(53804),n=i(25591),s=i(7156),o=i(93040),a=i(77472),l=i(39819),u=i(40633),c=i(95929),h=i(60539),p=i(90683),f=i(23502),y=(i(58941),i(13798),i(47332)),_=i(65953),d=i(81392),m=i(11432),g=i(51432),E=i(43173),A=i(85956),T=i(29606);const R=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,c.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(t){t!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",t))}readPortalItem(t,e,i){if(e.itemId)return new E.default({id:e.itemId,portal:i?.portal})}writePortalItem(t,e){t?.id&&(e.itemId=t.id)}async loadFromPortal(t,e){if(this.portalItem?.id)try{const{load:r}=await i.e(1536).then(i.bind(i,58615));return(0,h.Te)(e),await r({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap},e)}catch(t){throw(0,h.zf)(t)||u.A.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${t}`),t}}async finishLoadEditablePortalLayer(t){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(t).catch((t=>((0,h.QP)(t),!0))))}async setUserPrivileges(t,e){if(!n.default.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(e);if(this.url)try{const{features:{edit:i,fullEdit:r},content:{updateItem:n}}=await this._fetchUserPrivileges(t,e);this._set("userHasEditingPrivileges",i),this._set("userHasFullEditingPrivileges",r),this._set("userHasUpdateItemPrivileges",n)}catch(t){(0,h.QP)(t)}}async _fetchUserPrivileges(t,e){let i=this.portalItem;if(!t||!i||!i.loaded||i.sourceUrl)return this._fetchFallbackUserPrivileges(e);const r=t===i.id;if(r&&i.portal.user)return(0,T.It)(i);let n,o;if(r)n=i.portal.url;else try{n=await(0,m.wI)(this.url,e)}catch(t){(0,h.QP)(t)}if(!n||!(0,p.b8)(n,i.portal.url))return this._fetchFallbackUserPrivileges(e);try{const t=null!=e?e.signal:null;o=await(s.id?.getCredential(`${n}/sharing`,{prompt:!1,signal:t}))}catch(t){(0,h.QP)(t)}if(!o)return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}};try{if(r?await i.reload():(i=new E.default({id:t,portal:{url:n}}),await i.load(e)),i.portal.user)return(0,T.It)(i)}catch(t){(0,h.QP)(t)}return{features:{edit:!0,fullEdit:!1},content:{updateItem:!1}}}async _fetchFallbackUserPrivileges(t){let e=!0;try{e=await this._fetchUserHasEditingPrivileges(t)}catch(t){(0,h.QP)(t)}return{features:{edit:e,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(t){const e=this.url?s.id?.findCredential(this.url):null;if(!e)return!0;const i=S.credential===e?S.user:await this._fetchEditingUser(t);return S.credential=e,S.user=i,null==i?.privileges||i.privileges.includes("features:user:edit")}async _fetchEditingUser(t){const e=this.portalItem?.portal?.user;if(e)return e;const i=s.id?.findServerInfo(this.url??"");if(!i?.owningSystemUrl)return null;const r=`${i.owningSystemUrl}/sharing/rest`,n=g.A.getDefault();if(n&&n.loaded&&(0,p.S8)(n.restUrl)===(0,p.S8)(r))return n.user;const l=`${r}/community/self`,u=null!=t?t.signal:null,c=await(0,a.Ke)((0,o.A)(l,{authMode:"no-prompt",query:{f:"json"},signal:u}));return c.ok?A.A.fromJSON(c.value.data):null}read(t,e){e&&(e.layer=this),super.read(t,e)}write(t,e){const i=e?.portal,r=this.portalItem?.id&&(this.portalItem.portal||g.A.getDefault());return i&&r&&!(0,p.ut)(r.restUrl,i.restUrl)?(e.messages&&e.messages.push(new l.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...e,layer:this})}};return(0,r._)([(0,f.MZ)({type:E.default})],e.prototype,"portalItem",null),(0,r._)([(0,y.w)("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),(0,r._)([(0,d.K)("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),(0,r._)([(0,f.MZ)({clonable:!1})],e.prototype,"resourceReferences",void 0),(0,r._)([(0,f.MZ)({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),(0,r._)([(0,f.MZ)({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),(0,r._)([(0,f.MZ)({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=(0,r._)([(0,_.$)("esri.layers.mixins.PortalLayer")],e),e},S={credential:null,user:null}},44431:function(t,e,i){i.d(e,{A:function(){return c}});var r,n=i(53804),s=i(30905),o=i(23502),a=i(67888),l=(i(13798),i(58941),i(65953));let u=r=class extends s.oY{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new r({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};(0,n._)([(0,o.MZ)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],u.prototype,"cols",void 0),(0,n._)([(0,o.MZ)({type:a.jz,json:{write:!0}})],u.prototype,"level",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"levelValue",void 0),(0,n._)([(0,o.MZ)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],u.prototype,"origin",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],u.prototype,"resolution",void 0),(0,n._)([(0,o.MZ)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],u.prototype,"rows",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],u.prototype,"scale",void 0),u=r=(0,n._)([(0,l.$)("esri.layers.support.LOD")],u);const c=u},76226:function(t,e,i){i.r(e),i.d(e,{default:function(){return I}});var r,n=i(53804),s=i(73037),o=i(30905),a=i(62938),l=i(23502),u=i(67888),c=(i(13798),i(58941),i(47332)),h=i(65953),p=i(81392),f=i(45532),y=i(57165),_=i(87416),d=i(57652),m=i(1644),g=i(44431),E=i(29679);const A=new s.J({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let T=r=class extends o.oY{static create(t={}){const{resolutionFactor:e=1,scales:i,size:n=256,spatialReference:s=y.A.WebMercator,numLODs:o=24}=t;if(!(0,d.fn)(s)){const t=[];if(i)for(let e=0;e<i.length;e++){const r=i[e];t.push(new g.A({level:e,scale:r,resolution:r}))}else{let e=5e-4;for(let i=o-1;i>=0;i--)t.unshift(new g.A({level:i,scale:e,resolution:e})),e*=2}return new r({dpi:96,lods:t,origin:new f.default(0,0,s),size:[n,n],spatialReference:s})}const l=(0,d.Vp)(s),u=t.origin?new f.default({x:t.origin.x,y:t.origin.y,spatialReference:s}):new f.default(l?{x:l.origin[0],y:l.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),c=1/(39.37*(0,a.GA)(s)*96),h=[];if(i)for(let t=0;t<i.length;t++){const e=i[t],r=e*c;h.push(new g.A({level:t,scale:e,resolution:r}))}else{let t=(0,d.EA)(s)?512/n*591657527.5917094:256/n*591657527.591555;const i=Math.ceil(o/e);h.push(new g.A({level:0,scale:t,resolution:t*c}));for(let r=1;r<i;r++){const i=t/2**e,n=i*c;h.push(new g.A({level:r,scale:i,resolution:n})),t=i}}return new r({dpi:96,lods:h,origin:u,size:[n,n],spatialReference:s})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=(0,d.Vp)(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return f.default.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const r=[],n=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach((t=>{r.push(t.scale),e=t.scale>e?t.scale:e,i=t.scale<i?t.scale:i,n[t.level]=t}))),this._set("scales",r),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),r=i+1;return e[i]/(e[i]/e[r])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let r=0;for(;r<i;r++){const i=e[r],n=e[r+1];if(i<=t)return r;if(n===t)return r+1;if(i>t&&n<t)return r+Math.log(i/t)/Math.log(i/n)}return r}tileAt(t,e,i,r){const n=this.lodAt(t);if(!n)return null;let s,o;if("number"==typeof e)s=e,o=i;else if((0,d.aI)(e.spatialReference,this.spatialReference))s=e.x,o=e.y,r=i;else{const t=(0,m.Cv)(e,this.spatialReference);if(null==t)return null;s=t.x,o=t.y,r=i}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return r||(r=new E.U(null,0,0,0,(0,_.vt)())),r.level=t,r.row=Math.floor((this.origin.y-o)/l+.001),r.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(t,e=r.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===r.ExtrapolateOptions.POWER_OF_TWO){const e=this.lods[this.lods.length-1];e.level<t.level&&(i=e)}if(!i)return;const n=t.level-i.level,s=i.resolution*this.size[0]/2**n,o=i.resolution*this.size[1]/2**n;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=(0,_.vt)()),t.extent[0]=this.origin.x+t.col*s,t.extent[1]=this.origin.y-(t.row+1)*o,t.extent[2]=t.extent[0]+s,t.extent[3]=t.extent[1]+o}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||-1===e.parentLevel||(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),0))}getTileBounds(t,e){const i=this.lodAt(e.level);if(null==i)return null;const{resolution:r}=i,n=r*this.size[0],s=r*this.size[1];return t[0]=this.origin.x+e.col*n,t[1]=this.origin.y-(e.row+1)*s,t[2]=t[0]+n,t[3]=t[1]+s,t}lodAt(t){return this._levelToLOD?.[t]??null}clone(){return r.fromJSON(this.write({}))}getCompatibleForVTL(t){if(this.size[0]!==this.size[1]||256===this.size[0]&&512===t)return null;const e=(512===this.size[0]&&256===t?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===t&&0===e)return this;const i=[],n=this.lods.length-e;for(let t=0;t<n;t++){const r=t+e,{scale:n,resolution:s}=r>=0?this.lods[r]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new g.A({level:t,scale:n,resolution:s}))}return new r({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const r=t[i];this._upsampleLevels[r.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/r.resolution:0},e=r}}};var R,S;(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],T.prototype,"compressionQuality",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],T.prototype,"dpi",void 0),(0,n._)([(0,l.MZ)({type:String,json:{read:A.read,write:A.write,origins:{"web-scene":{read:!1,write:!1}}}})],T.prototype,"format",void 0),(0,n._)([(0,l.MZ)({readOnly:!0})],T.prototype,"isWrappable",null),(0,n._)([(0,l.MZ)({type:f.default,json:{write:!0}})],T.prototype,"origin",void 0),(0,n._)([(0,c.w)("origin")],T.prototype,"readOrigin",null),(0,n._)([(0,l.MZ)({type:[g.A],value:null,json:{write:!0}})],T.prototype,"lods",null),(0,n._)([(0,l.MZ)({readOnly:!0})],T.prototype,"scales",void 0),(0,n._)([(0,l.MZ)({cast:t=>Array.isArray(t)?t:"number"==typeof t?[t,t]:[256,256]})],T.prototype,"size",void 0),(0,n._)([(0,c.w)("size",["rows","cols"])],T.prototype,"readSize",null),(0,n._)([(0,p.K)("size",{cols:{type:u.jz},rows:{type:u.jz}})],T.prototype,"writeSize",null),(0,n._)([(0,l.MZ)({type:y.A,json:{write:!0}})],T.prototype,"spatialReference",void 0),T=r=(0,n._)([(0,h.$)("esri.layers.support.TileInfo")],T),R=T||(T={}),(S=R.ExtrapolateOptions||(R.ExtrapolateOptions={}))[S.NONE=0]="NONE",S[S.POWER_OF_TWO=1]="POWER_OF_TWO";const I=T},10402:function(t,e,i){i.d(e,{A:function(){return s}});var r=i(39819),n=i(60539);class s{constructor(t,e=0,i=t.lods[t.lods.length-1].level){this.tileInfo=t,this.minLOD=e,this.maxLOD=i,t.lodAt(e)||(this.minLOD=t.lods[0].level),t.lodAt(i)||(this.maxLOD=t.lods[t.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(t,e,i){const r=this.tileInfo?.lodAt(t);return!r||t<this.minLOD||t>this.maxLOD?"unavailable":r.cols&&r.rows?i>=r.cols[0]&&i<=r.cols[1]&&e>=r.rows[0]&&e<=r.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(t,e,i,s){await(0,n.NO)(s);const o=this.getAvailability(t,e,i);if("unavailable"===o)throw new r.A("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i});return o}async fetchAvailabilityUpsample(t,e,i,r,s){await(0,n.NO)(s),r.level=t,r.row=e,r.col=i;const o=this.tileInfo;return o.updateTileInfo(r),this.fetchAvailability(t,e,i,s).catch((t=>{if((0,n.zf)(t))throw t;if(o.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r,s);throw t}))}}},29679:function(t,e,i){i.d(e,{U:function(){return r}});class r{constructor(t,e,i,r,n=void 0){this.id=t,this.level=e,this.row=i,this.col=r,this.extent=n}}},6053:function(t,e,i){i.d(e,{d:function(){return S}});var r,n=i(53804),s=i(93040),o=i(83525),a=i(69296),l=i(39819),u=i(61226),c=(i(58941),i(99680)),h=i(7187),p=i(60539),f=i(28181),y=i(74087),_=i(90683),d=i(23502),m=(i(40633),i(13798),i(65953)),g=i(29679),E=i(21609),A=i(24540);class T{constructor(t){!function(t){if(!t?.location)throw new l.A("tilemap:missing-location","Location missing from tilemap response");if(!1===t.valid)throw new l.A("tilemap:invalid","Tilemap response was marked as invalid");if(!t.data)throw new l.A("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(t.data))throw new l.A("tilemap:data-mismatch","Data must be an array of numbers");if(t.data.length!==t.location.width*t.location.height)throw new l.A("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}(t);const{location:e,data:i}=t;this.location=Object.freeze((0,E.o8)(e));const r=this.location.width,n=this.location.height;let s=!0,o=!0;const a=function(t,e=!1){return t<=A.y9?e?new Array(t).fill(0):new Array(t):new Uint32Array(t)}(Math.ceil(r*n/32));let u=0;for(let t=0;t<i.length;t++){const e=t%32;i[t]?(o=!1,a[u]|=1<<e):s=!1,31===e&&++u}o?(this._availability="unavailable",this.byteSize=40):s?(this._availability="available",this.byteSize=40):(this._availability=a,this.byteSize=40+(0,A.Ek)(a))}getAvailability(t,e){if("unavailable"===this._availability||"available"===this._availability)return this._availability;const i=(t-this.location.top)*this.location.width+(e-this.location.left),r=i%32,n=i>>5,s=this._availability;return n<0||n>s.length?"unknown":s[n]&1<<r?"available":"unavailable"}static fromDefinition(t,e){const i=t.service.request||s.A,{row:r,col:n,width:o,height:a}=t,u={query:{f:"json"}};return e=e?{...u,...e}:u,i(function(t){let e;if(t.service.tileServers?.length){const i=t.service.tileServers;e=`${i&&i.length?i[t.row%i.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}else e=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;const i=t.service.query;return i&&(e=`${e}?${i}`),e}(t),e).then((t=>t.data)).catch((t=>{if(422===t?.details?.httpStatus)return{location:{top:r,left:n,width:o,height:a},valid:!0,data:new Array(o*a).fill(0)};throw t})).then((t=>{if(t.location&&(t.location.top!==r||t.location.left!==n||t.location.width!==o||t.location.height!==a))throw new l.A("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:r,left:n,width:o,height:a}});return T.fromJSON(t)}))}static fromJSON(t){return Object.freeze(new T(t))}}function R(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}let S=r=class extends o.A{constructor(t){super(t),this._pendingTilemapRequests={},this.request=s.A,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new c.q(2*a.u.MEGABYTES),this.addHandles((0,f.watch)((()=>{const{layer:t}=this;return[t?.parsedUrl,t?.tileServers,t?.apiKey,t?.customParameters]}),(()=>this._initializeTilemapDefinition()),f.Vh))}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}getAvailability(t,e,i){if(!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD)return"unavailable";const r=this._tilemapFromCache(t,e,i,this._tmpTilemapDefinition);return r?r.getAvailability(e,i):"unknown"}fetchAvailability(t,e,i,r){return!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD?Promise.reject(new l.A("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i})):this._fetchTilemap(t,e,i,r).catch((t=>t)).then((r=>{if(r instanceof T){const n=r.getAvailability(e,i);if("unavailable"===n)throw new l.A("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:i});return n}if((0,p.zf)(r))throw r;return"unknown"}))}fetchAvailabilityUpsample(t,e,i,r,n){r.level=t,r.row=e,r.col=i;const s=this.layer.tileInfo;s.updateTileInfo(r);const o=this.fetchAvailability(t,e,i,n).catch((t=>{if((0,p.zf)(t))throw t;if(s.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r,n);throw t}));return this._fetchAvailabilityUpsamplePrefetch(r.id,t,e,i,n,o),o}async _fetchAvailabilityUpsamplePrefetch(t,e,i,n,s,o){if(!this._prefetchingEnabled||null==t)return;const a=`prefetch-${t}`;if(this.hasHandles(a))return;const l=new AbortController;o.then((()=>l.abort()),(()=>l.abort()));let c=!1;const h=(0,u.hA)((()=>{c||(c=!0,l.abort())}));if(this.addHandles(h,a),await(0,y.md)(10,l.signal).catch((()=>{})),c||(c=!0,this.removeHandles(a)),(0,p.G4)(l))return;const f=new g.U(t,e,i,n),_={...s,signal:l.signal},d=this.layer.tileInfo;for(let t=0;r._prefetches.length<r._maxPrefetch&&d.upsampleTile(f);++t){const t=this.fetchAvailability(f.level,f.row,f.col,_);r._prefetches.push(t);const e=()=>{r._prefetches.removeUnordered(t)};t.then(e,e)}}_fetchTilemap(t,e,i,r){if(!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD)return Promise.reject(new l.A("tilemap-cache:level-unavailable",`Level ${t} is unavailable in the service`));const n=this._tmpTilemapDefinition,s=this._tilemapFromCache(t,e,i,n);if(s)return Promise.resolve(s);const o=r?.signal;return r={...r,signal:null},new Promise(((t,e)=>{(0,p.u7)(o,(()=>e((0,p.NK)())));const i=R(n);let s=this._pendingTilemapRequests[i];if(!s){s=T.fromDefinition(n,r).then((t=>(this._tilemapCache.put(i,t,t.byteSize),t)));const t=()=>{delete this._pendingTilemapRequests[i]};this._pendingTilemapRequests[i]=s,s.then(t,t)}s.then(t,e)}))}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:t,apiKey:e,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:t.path,query:(0,_.x0)({...t.query,...i,token:e??t.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(t,e,i,r){r.level=t,r.row=e-e%this.size,r.col=i-i%this.size;const n=R(r);return this._tilemapCache.get(n)}get test(){}};S._maxPrefetch=4,S._prefetches=new h.A({initialSize:r._maxPrefetch}),(0,n._)([(0,d.MZ)({constructOnly:!0})],S.prototype,"layer",void 0),(0,n._)([(0,d.MZ)({constructOnly:!0})],S.prototype,"minLOD",void 0),(0,n._)([(0,d.MZ)({constructOnly:!0})],S.prototype,"maxLOD",void 0),(0,n._)([(0,d.MZ)({constructOnly:!0})],S.prototype,"request",void 0),(0,n._)([(0,d.MZ)({constructOnly:!0})],S.prototype,"size",void 0),S=r=(0,n._)([(0,m.$)("esri.layers.support.TilemapCache")],S)},7010:function(t,e,i){i.d(e,{C1:function(){return S},Fm:function(){return E},Ih:function(){return g},M6:function(){return c},OZ:function(){return p},PY:function(){return u},Qo:function(){return _},Yj:function(){return y},fV:function(){return f},hG:function(){return R},hn:function(){return T},id:function(){return A},kF:function(){return h},ke:function(){return m}});var r=i(64786),n=i(91484),s=i(57165),o=i(60534),a=i(6422),l=i(59798);const u={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:r.K}}},c={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},h={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:r.K}}},p={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:o.w}}},f={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:r.K}}},y={value:null,type:a.A,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:r.K}}};function _(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const d={write:{enabled:!0,layerContainerTypes:r.K},read:!0},m={type:Number,json:{origins:{"web-document":d,"portal-item":{write:!0}}}},g={...m,json:{...m.json,origins:{"web-document":{...d,write:{enabled:!0,layerContainerTypes:r.K,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&"service"!==i.origin||!e.drawingInfo||void 0===e.drawingInfo.transparency?e.layerDefinition?.drawingInfo&&void 0!==e.layerDefinition.drawingInfo.transparency?(0,l.D)(e.layerDefinition.drawingInfo.transparency):void 0:(0,l.D)(e.drawingInfo.transparency)}}},E={type:n.default,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=n.default.fromJSON(t);return null!=e.spatialReference&&"object"==typeof e.spatialReference&&(i.spatialReference=s.A.fromJSON(e.spatialReference)),i}}}},read:!1}},A={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},T={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:r.K}}},name:"layerDefinition.minScale",write:!0}},R={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:r.K}}},name:"layerDefinition.maxScale",write:!0}},S={json:{write:{ignoreOrigin:!0,layerContainerTypes:r.K},origins:{"web-map":{read:!1,write:!1}}}}},28993:function(t,e,i){i.d(e,{m:function(){return o},v:function(){return s}});var r=i(90683),n=i(51432);function s(t,e){return{...a(t,e),readResourcePaths:[]}}function o(t,e,i){const n=(0,r.An)(t.itemUrl);return{...a(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:n?{rootPath:n.path,writtenUrls:[]}:null,resources:i?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function a(t,e){return{origin:e,url:(0,r.An)(t.itemUrl),portal:t.portal||n.A.getDefault(),portalItem:t}}},29606:function(t,e,i){i.d(e,{It:function(){return p},LG:function(){return o},OM:function(){return u},Y:function(){return a},bK:function(){return l},mm:function(){return h},sQ:function(){return c}});var r=i(46157),n=i(57165),s=i(1644);function o(t,e){if(!a(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function a(t,e){return!!t.typeKeywords?.includes(e)}function l(t){return a(t,h.HOSTED_SERVICE)}function u(t,e){const i=t.typeKeywords;if(i){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}async function c(t){const e=t.clone().normalize();let i;if(e.length>1)for(const t of e)i?t.width>i.width&&(i=t):i=t;else i=e[0];return async function(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return(0,s.ci)(t);const i=n.A.WGS84;return await(0,r.initializeProjection)(e,i),(0,r.project)(t,i)}(i)}const h={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function p(t){const{portal:e,isOrgItem:i,itemControl:r}=t,n=e.user?.privileges;let s=!n||n.includes("features:user:edit"),o=!!i&&!!n?.includes("features:user:fullEdit");const a="update"===r||"admin"===r;return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}},33389:function(t,e,i){var r,n,s,o,a,l,u,c,h,p,f,y,_,d,m,g,E,A,T,R,S,I,v,w,N,O,L,x,b,D,P,M,C,U,G,B,F,z,H,k,V,$,Y,W,j,Z,K,q,X,Q,J,tt,et,it,rt,nt,st,ot,at,lt,ut;i.d(e,{$2:function(){return a},C1:function(){return s},JO:function(){return n},M1:function(){return I},O$:function(){return st},Q1:function(){return Z},TZ:function(){return g},WE:function(){return x},Y:function(){return u},YI:function(){return q},bj:function(){return c},e_:function(){return j},f0:function(){return nt},fu:function(){return f},g7:function(){return h},ip:function(){return K},mU:function(){return b},oF:function(){return R},uQ:function(){return S},uT:function(){return B},vG:function(){return at},wd:function(){return k},xR:function(){return r},xn:function(){return E},xw:function(){return N},yS:function(){return F}}),function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"}(r||(r={})),function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"}(n||(n={})),function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"}(s||(s={})),function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"}(o||(o={})),function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"}(a||(a={})),function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"}(l||(l={})),function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"}(u||(u={})),function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"}(c||(c={})),function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"}(h||(h={})),function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"}(p||(p={})),function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"}(f||(f={})),function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"}(y||(y={})),function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"}(_||(_={})),function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"}(d||(d={})),function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"}(m||(m={})),function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"}(g||(g={})),function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"}(E||(E={})),function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"}(A||(A={})),function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"}(T||(T={})),function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"}(R||(R={})),function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks"}(S||(S={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"}(I||(I={})),function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"}(v||(v={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(w||(w={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"}(N||(N={})),function(t){t.Fast="Fast",t.Accurate="Accurate"}(O||(O={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(L||(L={})),function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"}(x||(x={})),function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"}(b||(b={})),function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"}(D||(D={})),function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"}(P||(P={})),function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"}(M||(M={})),function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AloneLine=1]="AloneLine"}(C||(C={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"}(U||(U={})),function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"}(G||(G={})),function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"}(B||(B={})),function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"}(F||(F={})),function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"}(z||(z={})),function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"}(H||(H={})),function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"}(k||(k={})),function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"}(V||(V={})),function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}($||($={})),function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"}(Y||(Y={})),function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"}(W||(W={})),function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"}(j||(j={})),function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"}(Z||(Z={})),function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"}(K||(K={})),function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"}(q||(q={})),function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"}(X||(X={})),function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"}(Q||(Q={})),function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"}(J||(J={})),function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"}(tt||(tt={})),function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(et||(et={})),function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"}(it||(it={})),function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"}(rt||(rt={})),function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(nt||(nt={})),function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"}(st||(st={})),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"}(ot||(ot={})),function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"}(at||(at={})),function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"}(lt||(lt={})),function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"}(ut||(ut={}))},7056:function(t,e,i){i.d(e,{GW:function(){return d},IU:function(){return A},Jo:function(){return o},MG:function(){return s},Wh:function(){return p},cP:function(){return I},os:function(){return c},p6:function(){return _},pJ:function(){return a},ru:function(){return R},s3:function(){return T},w4:function(){return S},wV:function(){return y},yM:function(){return v},z0:function(){return f}});var r=i(38441),n=i(72139);const s=Number.POSITIVE_INFINITY,o=Math.PI,a=2*o,l=128/o,u=256/360,c=o/180,h=1/Math.LN2;function p(t,e){return(t%=e)>=0?t:t+e}function f(t){return p(t*l,256)}function y(t){return p(t*u,256)}function _(t){return Math.log(t)*h}function d(t,e,i){return t*(1-i)+e*i}const m=8,g=14,E=16;function A(t){return m+Math.max((t-g)*E,0)}function T(t,e,i){let r,n,s,o=0;for(const a of i){r=a.length;for(let i=1;i<r;++i)n=a[i-1],s=a[i],n.y>e!=s.y>e&&((s.x-n.x)*(e-n.y)-(s.y-n.y)*(t-n.x)>0?o++:o--)}return 0!==o}function R(t,e,i,n){let s,o,a,l;const u=n*n;for(const n of i){const i=n.length;if(!(i<2)){s=n[0].x,o=n[0].y;for(let c=1;c<i;++c){if(a=n[c].x,l=n[c].y,(0,r.Ng)(t,e,s,o,a,l)<u)return!0;s=a,o=l}}}return!1}function S(t,e,i,r,n,s,o){const a=Math.max(r,Math.min(e,s))-e,l=Math.max(n,Math.min(i,o))-i;return a*a+l*l<=t*t}function I(t,e){if(0===e||Number.isNaN(e))return t;const i=[],r=new n.bR(0,0),s=new n.bR(0,0),o=new n.bR(0,0);for(let a=0;a<t.length;a++){const l=t[a],u=[];for(let t=0;t<l.length;t++){const i=l[t-1],a=l[t],c=l[t+1];0===t?r.setCoords(0,0):r.assignSub(a,i).normalize().rightPerpendicular(),t===l.length-1?s.setCoords(0,0):s.assignSub(c,a).normalize().rightPerpendicular(),o.assignAdd(r,s).normalize();const h=o.x*s.x+o.y*s.y;0!==h&&o.scale(1/h),u.push(n.bR.add(a,o.scale(e)))}i.push(u)}return i}function v(t,e,i,r){const s=new n.bR(t[0],t[1]);if(s.scale(r),"viewport"===e){const t=-i*(Math.PI/180),e=Math.cos(t),r=Math.sin(t);s.rotate(e,r)}return s}},38048:function(t,e,i){i.d(e,{A:function(){return r}}),i(58941);class r{constructor(t){this._array=[],this._stride=t}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return new Uint32Array(this._array).buffer}static i1616to32(t,e){return 65535&t|e<<16}static i8888to32(t,e,i,r){return 255&t|(255&e)<<8|(255&i)<<16|r<<24}static i8816to32(t,e,i){return 255&t|(255&e)<<8|i<<16}}},42111:function(t,e,i){var r,n,s;i.d(e,{$q:function(){return s},NP:function(){return r},kh:function(){return n}}),function(t){t[t.FILL=1]="FILL",t[t.LINE=2]="LINE",t[t.SYMBOL=3]="SYMBOL",t[t.CIRCLE=4]="CIRCLE"}(r||(r={})),function(t){t[t.BACKGROUND=0]="BACKGROUND",t[t.FILL=1]="FILL",t[t.OUTLINE=2]="OUTLINE",t[t.LINE=3]="LINE",t[t.ICON=4]="ICON",t[t.CIRCLE=5]="CIRCLE",t[t.TEXT=6]="TEXT",t[t.TILEINFO=7]="TILEINFO"}(n||(n={})),function(t){t[t.PAINTER_CHANGED=0]="PAINTER_CHANGED",t[t.LAYOUT_CHANGED=1]="LAYOUT_CHANGED",t[t.LAYER_CHANGED=2]="LAYER_CHANGED",t[t.LAYER_REMOVED=3]="LAYER_REMOVED",t[t.SPRITES_CHANGED=4]="SPRITES_CHANGED"}(s||(s={}))},5367:function(t,e,i){i.d(e,{$u:function(){return y},Cq:function(){return c},Dc:function(){return r},I5:function(){return o},KI:function(){return l},Ms:function(){return u},O6:function(){return a},bv:function(){return n},kt:function(){return s},v9:function(){return h}});var r,n,s,o,a,l,u,c,h,p,f=i(33389);(p=r||(r={}))[p.BACKGROUND=0]="BACKGROUND",p[p.FILL=1]="FILL",p[p.LINE=2]="LINE",p[p.SYMBOL=3]="SYMBOL",p[p.CIRCLE=4]="CIRCLE",function(t){t[t.VISIBLE=0]="VISIBLE",t[t.NONE=1]="NONE"}(n||(n={})),function(t){t[t.POINT=0]="POINT",t[t.LINE=1]="LINE",t[t.LINE_CENTER=2]="LINE_CENTER"}(s||(s={})),function(t){t[t.MAP=0]="MAP",t[t.VIEWPORT=1]="VIEWPORT",t[t.AUTO=2]="AUTO"}(o||(o={})),function(t){t[t.AUTO=0]="AUTO",t[t.LEFT=1]="LEFT",t[t.CENTER=2]="CENTER",t[t.RIGHT=3]="RIGHT"}(a||(a={})),function(t){t[t.CENTER=0]="CENTER",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.TOP=3]="TOP",t[t.BOTTOM=4]="BOTTOM",t[t.TOP_LEFT=5]="TOP_LEFT",t[t.TOP_RIGHT=6]="TOP_RIGHT",t[t.BOTTOM_LEFT=7]="BOTTOM_LEFT",t[t.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(l||(l={})),function(t){t[t.NONE=0]="NONE",t[t.UPPERCASE=1]="UPPERCASE",t[t.LOWERCASE=2]="LOWERCASE"}(u||(u={})),function(t){t[t.MAP=0]="MAP",t[t.VIEWPORT=1]="VIEWPORT"}(c||(c={})),function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(h||(h={}));class y{}y.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:n.VISIBLE}},y.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:n.VISIBLE}},y.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:n.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:f.xR.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:f.JO.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},y.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:n.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:s.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:l.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:o.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:l.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:a.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:o.AUTO},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:u.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[h.HORIZONTAL]}},y.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:n.VISIBLE}},y.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},y.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:c.MAP}},y.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:c.MAP},"line-width":{type:"number",minimum:0,default:1}},y.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:c.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:c.MAP}},y.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},y.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:c.MAP}}},36583:function(t,e,i){i.d(e,{lf:function(){return bt},L:function(){return Ct},A4:function(){return Dt},aR:function(){return Ut},e4:function(){return Lt},tU:function(){return Pt},V1:function(){return Mt},uU:function(){return Gt}});var r,n,s=i(87416),o=i(42111),a=i(7056),l=i(38048);!function(t){t[t.R8_SIGNED=0]="R8_SIGNED",t[t.R8_UNSIGNED=1]="R8_UNSIGNED",t[t.R16_SIGNED=2]="R16_SIGNED",t[t.R16_UNSIGNED=3]="R16_UNSIGNED",t[t.R8G8_SIGNED=4]="R8G8_SIGNED",t[t.R8G8_UNSIGNED=5]="R8G8_UNSIGNED",t[t.R16G16_SIGNED=6]="R16G16_SIGNED",t[t.R16G16_UNSIGNED=7]="R16G16_UNSIGNED",t[t.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED",t[t.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED",t[t.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR",t[t.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY",t[t.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"}(r||(r={})),function(t){t[t.UNIFORM=0]="UNIFORM",t[t.DATA_DRIVEN=1]="DATA_DRIVEN",t[t.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN",t[t.UNUSED=3]="UNUSED"}(n||(n={}));var u=i(85456),c=i(3817);class h{constructor(t){this._locations=new Map,this._key=t}get key(){return this._key}get type(){return 7&this._key}defines(){return[]}getStride(){return this._layoutInfo||this._buildAttributesInfo(),this._stride}getAttributeLocations(){return 0===this._locations.size&&this._buildAttributesInfo(),this._locations}getLayoutInfo(){return this._layoutInfo||this._buildAttributesInfo(),this._layoutInfo}getEncodingInfos(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}getUniforms(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}getShaderHeader(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}getShaderMain(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}setDataUniforms(t,e,i,r,n){const s=this.getUniforms();for(const o of s){const{name:s,type:a,getValue:l}=o,u=l(i,e,r,n);if(null!==u)switch(a){case"float":t.setUniform1f(s,u);break;case"vec2":t.setUniform2fv(s,u);break;case"vec4":t.setUniform4fv(s,u)}}}encodeAttributes(t,e,i,n){const s=this.attributesInfo(),o=this.getEncodingInfos(),a=[];let l=0,u=0;for(const c of Object.keys(o)){const h=o[c],{type:p,precisionFactor:f,isLayout:y}=s[c],_=y?i.getLayoutProperty(c):i.getPaintProperty(c),d=_.interpolator?.getInterpolationRange(e);let m=0;for(const i of h){const{offset:s,bufferElementsToAdd:o}=i;if(o>0){for(let t=0;t<o;t++)a.push(0);l+=u,u=i.bufferElementsToAdd}const c=n??_.getValue(d?d[m]:e,t);switch(p){case r.R8_SIGNED:case r.R8_UNSIGNED:a[l]|=this._encodeByte(c*(f||1),8*s);break;case r.R16_SIGNED:case r.R16_UNSIGNED:a[l]|=this._encodeShort(c*(f||1),8*s);break;case r.R8G8_SIGNED:case r.R8G8_UNSIGNED:a[l]|=this._encodeByte(c*(f||1),8*s),a[l]|=this._encodeByte(c*(f||1),8*s+8);break;case r.R16G16_SIGNED:case r.R16G16_UNSIGNED:a[l]|=this._encodeShort(c*(f||1),8*s),a[l]|=this._encodeShort(c*(f||1),8*s+16);break;case r.R8G8B8A8_SIGNED:case r.R8G8B8A8_UNSIGNED:a[l]|=this._encodeByte(c*(f||1),8*s),a[l]|=this._encodeByte(c*(f||1),8*s+8),a[l]|=this._encodeByte(c*(f||1),8*s+16),a[l]|=this._encodeByte(c*(f||1),8*s+24);break;case r.R8G8B8A8_COLOR:a[l]=this._encodeColor(c);break;case r.R16G16B16A16_DASHARRAY:case r.R16G16B16A16_PATTERN:this._encodePattern(l,a,c);break;default:throw new Error("Unsupported encoding type")}m++}}return a}getAtributeState(t){let e=0;const i=3+2*t;return e|=this._bit(i),e|=this._bit(i+1)<<1,e}_buildAttributesInfo(){const t=[],e={},i={};let r=-1;const s=this.attributesInfo(),o=this.attributes();let a=-1;for(const l of o){a++;const o=this.getAtributeState(a);if(o===n.UNIFORM||o===n.UNUSED)continue;const u=s[l],c=[];e[l]=c;const p=u.type;for(let e=0;e<o;e++){const{dataType:e,bytesPerElement:n,count:s,normalized:o}=h._encodingInfo[p],a=n*s,l=`${e}-${!0===o}`;let u=i[l],f=0;if(!u||u.count+s>4)r++,u={dataIndex:r,count:0,offset:0},4!==s&&(i[l]=u),t.push({location:-1,name:"a_data_"+r,count:s,type:e,normalized:o}),f=Math.ceil(Math.max(a/4,1));else{const e=t[u.dataIndex];e.count+=s,f=Math.ceil(Math.max(e.count*n/4,1))-Math.ceil(Math.max(u.offset/4,1))}c.push({dataIndex:u.dataIndex,offset:u.offset,bufferElementsToAdd:f}),u.offset+=a,u.count+=s}}for(const e of t)switch(e.type){case u.pe.BYTE:case u.pe.UNSIGNED_BYTE:e.count=4;break;case u.pe.SHORT:case u.pe.UNSIGNED_SHORT:e.count+=e.count%2}this._buildVertexBufferLayout(t);let l=0;const c=this._layoutInfo.geometry;for(const t of c)this._locations.set(t.name,l++);const p=this._layoutInfo.opacity;if(p)for(const t of p)this._locations.set(t.name,l++);this._buildShaderInfo(t,e),this._propertyEncodingInfo=e}_buildVertexBufferLayout(t){const e={},i=this.geometryInfo();let r=i[0].stride;if(0===t.length)e.geometry=i;else{const n=[];let s=r;for(const e of t)r+=p(e.type)*e.count;for(const t of i)n.push(new c._(t.name,t.count,t.type,t.offset,r,t.normalized));for(const e of t)n.push(new c._(e.name,e.count,e.type,s,r,e.normalized)),s+=p(e.type)*e.count;e.geometry=n}this.opacityInfo()&&(e.opacity=this.opacityInfo()),this._layoutInfo=e,this._stride=r}_buildShaderInfo(t,e){let i="\n",s="\n";const o=[];for(const e of t)i+=`attribute ${this._getType(e.count)} ${e.name};\n`;const a=this.attributes(),l=this.attributesInfo();let u=-1;for(const t of a){u++;const{name:a,type:c,precisionFactor:p,isLayout:y}=l[t],_=p&&1!==p?" * "+1/p:"",{bytesPerElement:d,count:m}=h._encodingInfo[c],g=t=>`a_data_${t.dataIndex}${f(m,t.offset,d)}`;switch(this.getAtributeState(u)){case n.UNIFORM:{const e=this._getType(m),n=`u_${a}`;o.push({name:n,type:e,getValue:(e,i,n,s)=>{const o=y?e.getLayoutValue(t,i):e.getPaintValue(t,i);if(c===r.R16G16B16A16_DASHARRAY){const t=e.getDashKey(o,e.getLayoutValue("line-cap",i)),r=s.getMosaicItemPosition(t,!1);if(null==r)return null;const{tl:n,br:a}=r;return[n[0],a[1],a[0],n[1]]}if(c===r.R16G16B16A16_PATTERN){const e=s.getMosaicItemPosition(o,!t.includes("line-"));if(null==e)return null;const{tl:i,br:r}=e;return[i[0],r[1],r[0],i[1]]}if(c===r.R8G8B8A8_COLOR){const t=o[3];return[t*o[0],t*o[1],t*o[2],t]}return o}}),i+=`uniform ${e} ${n};\n`,s+=`${e} ${a} = ${n};\n`}break;case n.DATA_DRIVEN:{const i=g(e[t][0]);s+=`${this._getType(m)} ${a} = ${i}${_};\n`}break;case n.INTERPOLATED_DATA_DRIVEN:{const r=`u_t_${a}`;o.push({name:r,type:"float",getValue:(e,i,r,n)=>(y?e.getLayoutProperty(t):e.getPaintProperty(t)).interpolator.interpolationUniformValue(r,i)}),i+=`uniform float ${r};\n`;const n=g(e[t][0]),l=g(e[t][1]);s+=`${this._getType(m)} ${a} = mix(${n}${_}, ${l}${_}, ${r});\n`}}}this._shaderHeader=i,this._shaderMain=s,this._uniforms=o}_bit(t){return(this._key&1<<t)>>t}_getType(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw new Error("Invalid count")}_encodeColor(t){const e=255*t[3];return l.A.i8888to32(t[0]*e,t[1]*e,t[2]*e,e)}_encodePattern(t,e,i){if(!i?.rect)return;const r=i.rect,n=i.width,s=i.height;e[t]=this._encodeShort(r.x+2,0),e[t]|=this._encodeShort(r.y+2+s,16),e[t+1]=this._encodeShort(r.x+2+n,0),e[t+1]|=this._encodeShort(r.y+2,16)}_encodeByte(t,e){return(255&t)<<e}_encodeShort(t,e){return(65535&t)<<e}}h._encodingInfo={[r.R8_SIGNED]:{dataType:u.pe.BYTE,bytesPerElement:1,count:1,normalized:!1},[r.R8_UNSIGNED]:{dataType:u.pe.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[r.R16_SIGNED]:{dataType:u.pe.SHORT,bytesPerElement:2,count:1,normalized:!1},[r.R16_UNSIGNED]:{dataType:u.pe.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[r.R8G8_SIGNED]:{dataType:u.pe.BYTE,bytesPerElement:1,count:2,normalized:!1},[r.R8G8_UNSIGNED]:{dataType:u.pe.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[r.R16G16_SIGNED]:{dataType:u.pe.SHORT,bytesPerElement:2,count:2,normalized:!1},[r.R16G16_UNSIGNED]:{dataType:u.pe.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[r.R8G8B8A8_SIGNED]:{dataType:u.pe.BYTE,bytesPerElement:1,count:4,normalized:!1},[r.R8G8B8A8_UNSIGNED]:{dataType:u.pe.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},[r.R8G8B8A8_COLOR]:{dataType:u.pe.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[r.R16G16B16A16_DASHARRAY]:{dataType:u.pe.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[r.R16G16B16A16_PATTERN]:{dataType:u.pe.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const p=t=>{switch(t){case u.pe.FLOAT:case u.pe.INT:case u.pe.UNSIGNED_INT:return 4;case u.pe.SHORT:case u.pe.UNSIGNED_SHORT:case u.pe.HALF_FLOAT:return 2;case u.pe.BYTE:case u.pe.UNSIGNED_BYTE:return 1}},f=(t,e,i)=>{const r=e/i;if(1===t)switch(r){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===t)switch(r){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===t)switch(r){case 0:return".xyz";case 1:return".yzw"}return""};class y extends h{constructor(t){super(t)}geometryInfo(){return y.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return y.ATTRIBUTES}attributesInfo(){return y.ATTRIBUTES_INFO}}y.ATTRIBUTES=[],y.GEOMETRY_LAYOUT=[new c._("a_pos",2,u.pe.BYTE,0,2)],y.ATTRIBUTES_INFO={};class _ extends h{constructor(t){super(t)}geometryInfo(){return _.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return _.ATTRIBUTES}attributesInfo(){return _.ATTRIBUTES_INFO}}_.ATTRIBUTES=["circle-radius","circle-color","circle-opacity","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","circle-blur"],_.GEOMETRY_LAYOUT=[new c._("a_pos",2,u.pe.SHORT,0,4)],_.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:r.R8_UNSIGNED},"circle-color":{name:"color",type:r.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:r.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:r.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:r.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:r.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:r.R8_UNSIGNED,precisionFactor:32}};class d extends h{constructor(t){super(t)}geometryInfo(){return d.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return d.ATTRIBUTES}attributesInfo(){return d.ATTRIBUTES_INFO}}d.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"],d.GEOMETRY_LAYOUT=[new c._("a_pos",2,u.pe.SHORT,0,4)],d.ATTRIBUTES_INFO={"fill-color":{name:"color",type:r.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:r.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:r.R16G16B16A16_PATTERN,isOptional:!0}};class m extends h{constructor(t,e){super(t),this._usefillColor=e}geometryInfo(){return m.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return this._usefillColor?m.ATTRIBUTES_FILL:m.ATTRIBUTES_OUTLINE}attributesInfo(){return this._usefillColor?m.ATTRIBUTES_INFO_FILL:m.ATTRIBUTES_INFO_OUTLINE}}m.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"],m.ATTRIBUTES_FILL=["fill-color","fill-opacity"],m.GEOMETRY_LAYOUT=[new c._("a_pos",2,u.pe.SHORT,0,8),new c._("a_offset",2,u.pe.BYTE,4,8),new c._("a_xnormal",2,u.pe.BYTE,6,8)],m.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:r.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:r.R8_UNSIGNED,precisionFactor:100}},m.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:r.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:r.R8_UNSIGNED,precisionFactor:100}};class g extends h{constructor(t){super(t)}geometryInfo(){return g.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return g.ATTRIBUTES}attributesInfo(){return g.ATTRIBUTES_INFO}}g.ATTRIBUTES=["line-blur","line-color","line-gap-width","line-offset","line-opacity","line-width","line-pattern","line-dasharray"],g.GEOMETRY_LAYOUT=[new c._("a_pos",2,u.pe.SHORT,0,16),new c._("a_extrude_offset",4,u.pe.BYTE,4,16),new c._("a_dir_normal",4,u.pe.BYTE,8,16),new c._("a_accumulatedDistance",2,u.pe.UNSIGNED_SHORT,12,16)],g.ATTRIBUTES_INFO={"line-width":{name:"width",type:r.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:r.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:r.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:r.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:r.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:r.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:r.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:r.R16G16B16A16_DASHARRAY,isOptional:!0}};const E=[new c._("a_pos",2,u.pe.SHORT,0,16),new c._("a_vertexOffset",2,u.pe.SHORT,4,16),new c._("a_texAngleRange",4,u.pe.UNSIGNED_BYTE,8,16),new c._("a_levelInfo",4,u.pe.UNSIGNED_BYTE,12,16)],A=[new c._("a_opacityInfo",1,u.pe.UNSIGNED_BYTE,0,1)];class T extends h{constructor(t){super(t)}geometryInfo(){return E}opacityInfo(){return A}attributes(){return T.ATTRIBUTES}attributesInfo(){return T.ATTRIBUTES_INFO}}T.ATTRIBUTES=["icon-color","icon-opacity","icon-halo-blur","icon-halo-color","icon-halo-width","icon-size"],T.ATTRIBUTES_INFO={"icon-color":{name:"color",type:r.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:r.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:r.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:r.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:r.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:r.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};class R extends h{constructor(t){super(t)}geometryInfo(){return E}opacityInfo(){return A}attributes(){return R.ATTRIBUTES}attributesInfo(){return R.ATTRIBUTES_INFO}}R.ATTRIBUTES=["text-color","text-opacity","text-halo-blur","text-halo-color","text-halo-width","text-size"],R.ATTRIBUTES_INFO={"text-color":{name:"color",type:r.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:r.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:r.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:r.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:r.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:r.R8_UNSIGNED,isLayout:!0}};var S=i(52874),I=i(75505),v=i(72139),w=i(94738);const N={kind:"null"},O={kind:"number"},L={kind:"string"},x={kind:"boolean"},b={kind:"color"},D={kind:"object"},P={kind:"value"};function M(t,e){return{kind:"array",itemType:t,n:e}}const C=[N,O,L,x,b,D,M(P)];function U(t){if("array"===t.kind){const e=U(t.itemType);return"number"==typeof t.n?`array<${e}, ${t.n}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}function G(t){if(null===t)return N;if("string"==typeof t)return L;if("boolean"==typeof t)return x;if("number"==typeof t)return O;if(t instanceof S.A)return b;if(Array.isArray(t)){let e;for(const i of t){const t=G(i);if(e){if(e!==t){e=P;break}}else e=t}return M(e||P,t.length)}return"object"==typeof t?D:P}function B(t,e){if("array"===e.kind)return"array"===t.kind&&(0===t.n&&"value"===t.itemType.kind||B(t.itemType,e.itemType))&&("number"!=typeof e.n||e.n===t.n);if("value"===e.kind)for(const e of C)if(B(t,e))return!0;return e.kind===t.kind}function F(t){if(null===t)return"";const e=typeof t;return"string"===e?t:"number"===e||"boolean"===e?String(t):t instanceof S.A?t.toString():JSON.stringify(t)}class z{constructor(t){this._parent=t,this._vars={}}add(t,e){this._vars[t]=e}get(t){return this._vars[t]?this._vars[t]:this._parent?this._parent.get(t):null}}class H{constructor(){this.type=P}static parse(t){if(t.length>1)throw new Error('"id" does not expect arguments');return new H}evaluate(t,e){return t?.id}}class k{constructor(){this.type=L}static parse(t){if(t.length>1)throw new Error('"geometry-type" does not expect arguments');return new k}evaluate(t,e){if(!t)return null;switch(t.type){case v.dC.Point:return"Point";case v.dC.LineString:return"LineString";case v.dC.Polygon:return"Polygon";default:return null}}}class V{constructor(){this.type=D}static parse(t){if(t.length>1)throw new Error('"properties" does not expect arguments');return new V}evaluate(t,e){return t?.values}}class ${constructor(){this.type=O}static parse(t){if(t.length>1)throw new Error('"zoom" does not expect arguments');return new $}evaluate(t,e){return e}}class Y{constructor(t,e,i){this._lhs=t,this._rhs=e,this._compare=i,this.type=x}static parse(t,e,i){if(3!==t.length&&4!==t.length)throw new Error(`"${t[0]}" expects 2 or 3 arguments`);if(4===t.length)throw new Error(`"${t[0]}" collator not supported`);return new Y(Rt(t[1],e),Rt(t[2],e),i)}evaluate(t,e){return this._compare(this._lhs.evaluate(t,e),this._rhs.evaluate(t,e))}}class W{constructor(t){this._arg=t,this.type=x}static parse(t,e){if(2!==t.length)throw new Error('"!" expects 1 argument');return new W(Rt(t[1],e))}evaluate(t,e){return!this._arg.evaluate(t,e)}}class j{constructor(t){this._args=t,this.type=x}static parse(t,e){const i=[];for(let r=1;r<t.length;r++)i.push(Rt(t[r],e));return new j(i)}evaluate(t,e){for(const i of this._args)if(!i.evaluate(t,e))return!1;return!0}}class Z{constructor(t){this._args=t,this.type=x}static parse(t,e){const i=[];for(let r=1;r<t.length;r++)i.push(Rt(t[r],e));return new Z(i)}evaluate(t,e){for(const i of this._args)if(i.evaluate(t,e))return!0;return!1}}class K{constructor(t){this._args=t,this.type=x}static parse(t,e){const i=[];for(let r=1;r<t.length;r++)i.push(Rt(t[r],e));return new K(i)}evaluate(t,e){for(const i of this._args)if(i.evaluate(t,e))return!1;return!0}}class q{constructor(t,e,i){this.type=t,this._args=e,this._fallback=i}static parse(t,e,i){if(t.length<4)throw new Error('"case" expects at least 3 arguments');if(t.length%2==1)throw new Error('"case" expects an odd number of arguments');let r;const n=[];for(let s=1;s<t.length-1;s+=2){const o=Rt(t[s],e),a=Rt(t[s+1],e,i);r||(r=a.type),n.push({condition:o,output:a})}const s=Rt(t[t.length-1],e,i);return r||(r=s.type),new q(r,n,s)}evaluate(t,e){for(const i of this._args)if(i.condition.evaluate(t,e))return i.output.evaluate(t,e);return this._fallback.evaluate(t,e)}}class X{constructor(t,e){this.type=t,this._args=e}static parse(t,e){if(t.length<2)throw new Error('"coalesce" expects at least 1 argument');let i;const r=[];for(let n=1;n<t.length;n++){const s=Rt(t[n],e);i||(i=s.type),r.push(s)}return new X(i,r)}evaluate(t,e){for(const i of this._args){const r=i.evaluate(t,e);if(null!==r)return r}return null}}class Q{constructor(t,e,i,r,n){this.type=t,this._input=e,this._labels=i,this._outputs=r,this._fallback=n}static parse(t,e){if(t.length<3)throw new Error('"match" expects at least 3 arguments');if(t.length%2==0)throw new Error('"case" expects an even number of arguments');let i;const r=Rt(t[1],e),n=[],s={};let o;for(let r=2;r<t.length-1;r+=2){let a=t[r];Array.isArray(a)||(a=[a]);for(const t of a){const e=typeof t;if("string"!==e&&"number"!==e)throw new Error('"match" requires string or number literal as labels');if(o){if(e!==o)throw new Error('"match" requires labels to have the same type')}else o=e;s[t]=n.length}const l=Rt(t[r+1],e);i||(i=l.type),n.push(l)}return new Q(i,r,s,n,Rt(t[t.length-1],e))}evaluate(t,e){const i=this._input.evaluate(t,e);return(this._outputs[this._labels[i]]||this._fallback).evaluate(t,e)}}class J{constructor(t,e,i,r,n){this._operator=t,this.type=e,this.interpolation=i,this.input=r,this._stops=n}static parse(t,e,i){const r=t[0];if(t.length<5)throw new Error(`"${r}" expects at least 4 arguments`);const n=t[1];if(!Array.isArray(n)||0===n.length)throw new Error(`"${n}" is not a valid interpolation`);switch(n[0]){case"linear":if(1!==n.length)throw new Error("Linear interpolation cannot have parameters");break;case"exponential":if(2!==n.length||"number"!=typeof n[1])throw new Error("Exponential interpolation requires one numeric argument");break;case"cubic-bezier":if(5!==n.length)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(let t=1;t<5;t++){const e=n[t];if("number"!=typeof e||e<0||e>1)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1")}break;default:throw new Error(`"${t[0]}" unknown interpolation type "${n[0]}"`)}if(t.length%2!=1)throw new Error(`"${r}" expects an even number of arguments`);const s=Rt(t[2],e,O);let o;"interpolate-hcl"===r||"interpolate-lab"===r?o=b:i&&"value"!==i.kind&&(o=i);const a=[];for(let i=3;i<t.length;i+=2){const n=t[i];if("number"!=typeof n)throw new Error(`"${r}" requires stop inputs as literal numbers`);if(a.length&&a[a.length-1][0]>=n)throw new Error(`"${r}" requires strictly ascending stop inputs`);const s=Rt(t[i+1],e,o);o||(o=s.type),a.push([n,s])}if(o&&o!==b&&o!==O&&("array"!==o.kind||o.itemType!==O))throw new Error(`"${r}" cannot interpolate type ${U(o)}`);return new J(r,o,n,s,a)}evaluate(t,e){const i=this._stops;if(1===i.length)return i[0][1].evaluate(t,e);const r=this.input.evaluate(t,e);if(r<=i[0][0])return i[0][1].evaluate(t,e);if(r>=i[i.length-1][0])return i[i.length-1][1].evaluate(t,e);let n=0;for(;++n<i.length&&!(r<i[n][0]););const s=i[n-1][0],o=i[n][0],l=J.interpolationRatio(this.interpolation,r,s,o),u=i[n-1][1].evaluate(t,e),c=i[n][1].evaluate(t,e);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(u)&&Array.isArray(c))return u.map(((t,e)=>(0,a.GW)(t,c[e],l)));if("color"===this.type.kind&&u instanceof S.A&&c instanceof S.A){const t=new S.A(u),e=new S.A(c);return new S.A([(0,a.GW)(t.r,e.r,l),(0,a.GW)(t.g,e.g,l),(0,a.GW)(t.b,e.b,l),(0,a.GW)(t.a,e.a,l)])}if("number"===this.type.kind&&"number"==typeof u&&"number"==typeof c)return(0,a.GW)(u,c,l);throw new Error(`"${this._operator}" cannot interpolate type ${U(this.type)}`)}if("interpolate-hcl"===this._operator){const t=(0,I.RH)(u),e=(0,I.RH)(c),i=e.h-t.h,r=(0,I.$)({h:t.h+l*(i>180||i<-180?i-360*Math.round(i/360):i),c:(0,a.GW)(t.c,e.c,l),l:(0,a.GW)(t.l,e.l,l)});return new S.A({a:(0,a.GW)(u.a,c.a,l),...r})}if("interpolate-lab"===this._operator){const t=(0,I.ZD)(u),e=(0,I.ZD)(c),i=(0,I.$)({l:(0,a.GW)(t.l,e.l,l),a:(0,a.GW)(t.a,e.a,l),b:(0,a.GW)(t.b,e.b,l)});return new S.A({a:(0,a.GW)(u.a,c.a,l),...i})}throw new Error(`Unexpected operator "${this._operator}"`)}interpolationUniformValue(t,e){const i=this._stops;if(1===i.length)return 0;if(t>=i[i.length-1][0])return 0;let r=0;for(;++r<i.length&&!(t<i[r][0]););const n=i[r-1][0],s=i[r][0];return J.interpolationRatio(this.interpolation,e,n,s)}getInterpolationRange(t){const e=this._stops;if(1===e.length){const t=e[0][0];return[t,t]}const i=e[e.length-1][0];if(t>=i)return[i,i];let r=0;for(;++r<e.length&&!(t<e[r][0]););return[e[r-1][0],e[r][0]]}static interpolationRatio(t,e,i,r){let n=0;return"linear"===t[0]?n=J._exponentialInterpolationRatio(e,1,i,r):"exponential"===t[0]?n=J._exponentialInterpolationRatio(e,t[1],i,r):"cubic-bezier"===t[0]&&(n=(0,w.gb)(t[1],t[2],t[3],t[4])(J._exponentialInterpolationRatio(e,1,i,r),1e-5)),n<0?n=0:n>1&&(n=1),n}static _exponentialInterpolationRatio(t,e,i,r){const n=r-i;if(0===n)return 0;const s=t-i;return 1===e?s/n:(e**s-1)/(e**n-1)}}class tt{constructor(t,e,i){this.type=t,this._input=e,this._stops=i}static parse(t,e){if(t.length<5)throw new Error('"step" expects at least 4 arguments');if(t.length%2!=1)throw new Error('"step" expects an even number of arguments');const i=Rt(t[1],e,O);let r;const n=[];n.push([-1/0,Rt(t[2],e)]);for(let i=3;i<t.length;i+=2){const s=t[i];if("number"!=typeof s)throw new Error('"step" requires stop inputs as literal numbers');if(n.length&&n[n.length-1][0]>=s)throw new Error('"step" requires strictly ascending stop inputs');const o=Rt(t[i+1],e);r||(r=o.type),n.push([s,o])}return new tt(r,i,n)}evaluate(t,e){const i=this._stops;if(1===i.length)return i[0][1].evaluate(t,e);const r=this._input.evaluate(t,e);let n=0;for(;++n<i.length&&!(r<i[n][0]););return this._stops[n-1][1].evaluate(t,e)}}class et{constructor(t,e){this.type=t,this._output=e}static parse(t,e,i){if(t.length<4)throw new Error('"let" expects at least 3 arguments');if(t.length%2==1)throw new Error('"let" expects an odd number of arguments');const r=new z(e);for(let i=1;i<t.length-1;i+=2){const n=t[i];if("string"!=typeof n)throw new Error(`"let" requires a string to define variable names - found ${n}`);r.add(n,Rt(t[i+1],e))}const n=Rt(t[t.length-1],r,i);return new et(n.type,n)}evaluate(t,e){return this._output.evaluate(t,e)}}class it{constructor(t,e){this.type=t,this.output=e}static parse(t,e,i){if(2!==t.length||"string"!=typeof t[1])throw new Error('"var" requires just one literal string argument');const r=e.get(t[1]);if(!r)throw new Error(`${t[1]} must be defined before being used in a "var" expression`);return new it(i||P,r)}evaluate(t,e){return this.output.evaluate(t,e)}}class rt{constructor(t,e,i){this.type=t,this._index=e,this._array=i}static parse(t,e){if(3!==t.length)throw new Error('"at" expects 2 arguments');const i=Rt(t[1],e,O),r=Rt(t[2],e);return new rt(r.type.itemType,i,r)}evaluate(t,e){const i=this._index.evaluate(t,e),r=this._array.evaluate(t,e);if(i<0||i>=r.length)throw new Error('"at" index out of bounds');if(i!==Math.floor(i))throw new Error('"at" index must be an integer');return r[i]}}class nt{constructor(t,e){this._key=t,this._obj=e,this.type=P}static parse(t,e){let i,r;switch(t.length){case 2:return i=Rt(t[1],e),new nt(i);case 3:return i=Rt(t[1],e),r=Rt(t[2],e),new nt(i,r);default:throw new Error('"get" expects 1 or 2 arguments')}}evaluate(t,e){const i=this._key.evaluate(t,e);return this._obj?this._obj.evaluate(t,e)[i]:t?.values[i]}}class st{constructor(t,e){this._key=t,this._obj=e,this.type=x}static parse(t,e){let i,r;switch(t.length){case 2:return i=Rt(t[1],e),new st(i);case 3:return i=Rt(t[1],e),r=Rt(t[2],e),new st(i,r);default:throw new Error('"has" expects 1 or 2 arguments')}}evaluate(t,e){const i=this._key.evaluate(t,e);return this._obj?i in this._obj.evaluate(t,e):!!t?.values[i]}}class ot{constructor(t,e){this._key=t,this._vals=e,this.type=x}static parse(t,e){if(3!==t.length)throw new Error('"in" expects 2 arguments');return new ot(Rt(t[1],e),Rt(t[2],e))}evaluate(t,e){const i=this._key.evaluate(t,e);return this._vals.evaluate(t,e).includes(i)}}class at{constructor(t,e,i){this._item=t,this._array=e,this._from=i,this.type=O}static parse(t,e){if(t.length<3||t.length>4)throw new Error('"index-of" expects 3 or 4 arguments');const i=Rt(t[1],e),r=Rt(t[2],e);if(4===t.length){const n=Rt(t[3],e,O);return new at(i,r,n)}return new at(i,r)}evaluate(t,e){const i=this._item.evaluate(t,e),r=this._array.evaluate(t,e);if(this._from){const n=this._from.evaluate(t,e);if(n!==Math.floor(n))throw new Error('"index-of" index must be an integer');return r.indexOf(i,n)}return r.indexOf(i)}}class lt{constructor(t){this._arg=t,this.type=O}static parse(t,e){if(2!==t.length)throw new Error('"length" expects 2 arguments');const i=Rt(t[1],e);return new lt(i)}evaluate(t,e){const i=this._arg.evaluate(t,e);if("string"==typeof i)return i.length;if(Array.isArray(i))return i.length;throw new Error('"length" expects string or array')}}class ut{constructor(t,e,i,r){this.type=t,this._array=e,this._from=i,this._to=r}static parse(t,e){if(t.length<3||t.length>4)throw new Error('"slice" expects 2 or 3 arguments');const i=Rt(t[1],e),r=Rt(t[2],e,O);if(r.type!==O)throw new Error('"slice" index must return a number');if(4===t.length){const n=Rt(t[3],e,O);if(n.type!==O)throw new Error('"slice" index must return a number');return new ut(i.type,i,r,n)}return new ut(i.type,i,r)}evaluate(t,e){const i=this._array.evaluate(t,e);if(!Array.isArray(i)&&"string"!=typeof i)throw new Error('"slice" input must be an array or a string');const r=this._from.evaluate(t,e);if(r<0||r>=i.length)throw new Error('"slice" index out of bounds');if(r!==Math.floor(r))throw new Error('"slice" index must be an integer');if(this._to){const n=this._to.evaluate(t,e);if(n<0||n>=i.length)throw new Error('"slice" index out of bounds');if(n!==Math.floor(n))throw new Error('"slice" index must be an integer');return i.slice(r,n)}return i.slice(r)}}class ct{constructor(){this.type=x}static parse(t){if(1!==t.length)throw new Error('"has-id" expects no arguments');return new ct}evaluate(t,e){return void 0!==t?.id}}class ht{constructor(t,e){this._args=t,this._calculate=e,this.type=O}static parse(t,e,i){const r=t.slice(1).map((t=>Rt(t,e)));return new ht(r,i)}evaluate(t,e){let i;return this._args&&(i=this._args.map((i=>i.evaluate(t,e)))),this._calculate(i)}}class pt{constructor(t,e){this._args=t,this._calculate=e,this.type=O}static parse(t,e){const i=t.slice(1).map((t=>Rt(t,e)));return new pt(i,pt.ops[t[0]])}evaluate(t,e){let i;return this._args&&(i=this._args.map((i=>i.evaluate(t,e)))),this._calculate(i)}}pt.ops={abs:t=>Math.abs(t[0]),acos:t=>Math.acos(t[0]),asin:t=>Math.asin(t[0]),atan:t=>Math.atan(t[0]),ceil:t=>Math.ceil(t[0]),cos:t=>Math.cos(t[0]),e:()=>Math.E,floor:t=>Math.floor(t[0]),ln:t=>Math.log(t[0]),ln2:()=>Math.LN2,log10:t=>Math.log(t[0])/Math.LN10,log2:t=>Math.log(t[0])/Math.LN2,max:t=>Math.max(...t),min:t=>Math.min(...t),pi:()=>Math.PI,round:t=>Math.round(t[0]),sin:t=>Math.sin(t[0]),sqrt:t=>Math.sqrt(t[0]),tan:t=>Math.tan(t[0])};class ft{constructor(t){this._args=t,this.type=L}static parse(t,e){return new ft(t.slice(1).map((t=>Rt(t,e))))}evaluate(t,e){return this._args.map((i=>i.evaluate(t,e))).join("")}}class yt{constructor(t,e){this._arg=t,this._calculate=e,this.type=L}static parse(t,e){if(2!==t.length)throw new Error(`${t[0]} expects 1 argument`);const i=Rt(t[1],e);return new yt(i,yt.ops[t[0]])}evaluate(t,e){return this._calculate(this._arg.evaluate(t,e))}}yt.ops={downcase:t=>t.toLowerCase(),upcase:t=>t.toUpperCase()};class _t{constructor(t){this._args=t,this.type=b}static parse(t,e){if(4!==t.length)throw new Error('"rgb" expects 3 arguments');const i=t.slice(1).map((t=>Rt(t,e)));return new _t(i)}evaluate(t,e){const i=this._validate(this._args[0].evaluate(t,e)),r=this._validate(this._args[1].evaluate(t,e)),n=this._validate(this._args[2].evaluate(t,e));return new S.A({r:i,g:r,b:n})}_validate(t){if("number"!=typeof t||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}}class dt{constructor(t){this._args=t,this.type=b}static parse(t,e){if(5!==t.length)throw new Error('"rgba" expects 4 arguments');const i=t.slice(1).map((t=>Rt(t,e)));return new dt(i)}evaluate(t,e){const i=this._validate(this._args[0].evaluate(t,e)),r=this._validate(this._args[1].evaluate(t,e)),n=this._validate(this._args[2].evaluate(t,e)),s=this._validateAlpha(this._args[3].evaluate(t,e));return new S.A({r:i,g:r,b:n,a:s})}_validate(t){if("number"!=typeof t||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}_validateAlpha(t){if("number"!=typeof t||t<0||t>1)throw new Error(`${t}: invalid alpha color component`);return t}}class mt{constructor(t){this._color=t,this.type=M(O,4)}static parse(t,e){if(2!==t.length)throw new Error('"to-rgba" expects 1 argument');const i=Rt(t[1],e);return new mt(i)}evaluate(t,e){return new S.A(this._color.evaluate(t,e)).toRgba()}}class gt{constructor(t,e){this.type=t,this._args=e}static parse(t,e){const i=t[0];if(t.length<2)throw new Error(`${i} expects at least one argument`);let r,n=1;if("array"===i){if(t.length>2){switch(t[1]){case"string":r=L;break;case"number":r=O;break;case"boolean":r=x;break;default:throw new Error('"array" type argument must be string, number or boolean')}n++}else r=P;let e;if(t.length>3){if(e=t[2],null!==e&&("number"!=typeof e||e<0||e!==Math.floor(e)))throw new Error('"array" length argument must be a positive integer literal');n++}r=M(r,e)}else switch(i){case"string":r=L;break;case"number":r=O;break;case"boolean":r=x;break;case"object":r=D}const s=[];for(;n<t.length;n++){const i=Rt(t[n],e);s.push(i)}return new gt(r,s)}evaluate(t,e){let i;for(const r of this._args){const n=r.evaluate(t,e);if(i=G(n),B(i,this.type))return n}throw new Error(`Expected ${U(this.type)} but got ${U(i)}`)}}class Et{constructor(t,e){this.type=t,this._args=e}static parse(t,e){const i=t[0],r=Et.types[i];if(r===x||r===L){if(2!==t.length)throw new Error(`${i} expects one argument`)}else if(t.length<2)throw new Error(`${i} expects at least one argument`);const n=[];for(let i=1;i<t.length;i++){const r=Rt(t[i],e);n.push(r)}return new Et(r,n)}evaluate(t,e){if(this.type===x)return Boolean(this._args[0].evaluate(t,e));if(this.type===L)return F(this._args[0].evaluate(t,e));if(this.type===O){for(const i of this._args){const r=Number(i.evaluate(t,e));if(!isNaN(r))return r}return null}if(this.type===b){for(const i of this._args)try{const r=Et.toColor(i.evaluate(t,e));if(r instanceof S.A)return r}catch{}return null}}static toBoolean(t){return Boolean(t)}static toString(t){return F(t)}static toNumber(t){const e=Number(t);if(isNaN(e))throw new Error(`"${t}" is not a number`);return e}static toColor(t){if(t instanceof S.A)return t;if("string"==typeof t){const e=S.A.fromString(t);if(e)return e;throw new Error(`"${t}" is not a color`)}if(Array.isArray(t))return S.A.fromArray(t);throw new Error(`"${t}" is not a color`)}}Et.types={"to-boolean":x,"to-color":b,"to-number":O,"to-string":L};class At{constructor(t){this._val=t,this.type=G(t)}static parse(t){if(2!==t.length)throw new Error('"literal" expects 1 argument');return new At(t[1])}evaluate(t,e){return this._val}}class Tt{constructor(t){this._arg=t,this.type=L}static parse(t,e){if(2!==t.length)throw new Error('"typeof" expects 1 argument');return new Tt(Rt(t[1],e))}evaluate(t,e){return U(G(this._arg.evaluate(t,e)))}}function Rt(t,e,i){const r=typeof t;if("string"===r||"boolean"===r||"number"===r||null===t){if(i)switch(i.kind){case"string":"string"!==r&&(t=Et.toString(t));break;case"number":"number"!==r&&(t=Et.toNumber(t));break;case"color":t=Et.toColor(t)}t=["literal",t]}if(!Array.isArray(t)||0===t.length)throw new Error("Expression must be a non empty array");const n=t[0];if("string"!=typeof n)throw new Error("First element of expression must be a string");const s=St[n];if(void 0===s)throw new Error(`Invalid expression operator "${n}"`);if(!s)throw new Error(`Unimplemented expression operator "${n}"`);return s.parse(t,e,i)}const St={array:gt,boolean:gt,collator:null,format:null,image:null,literal:At,number:gt,"number-format":null,object:gt,string:gt,"to-boolean":Et,"to-color":Et,"to-number":Et,"to-string":Et,typeof:Tt,accumulated:null,"feature-state":null,"geometry-type":k,id:H,"line-progress":null,properties:V,at:rt,get:nt,has:st,in:ot,"index-of":at,length:lt,slice:ut,"!":W,"!=":class extends Y{static parse(t,e){return Y.parse(t,e,((t,e)=>t!==e))}},"<":class extends Y{static parse(t,e){return Y.parse(t,e,((t,e)=>t<e))}},"<=":class extends Y{static parse(t,e){return Y.parse(t,e,((t,e)=>t<=e))}},"==":class extends Y{static parse(t,e){return Y.parse(t,e,((t,e)=>t===e))}},">":class extends Y{static parse(t,e){return Y.parse(t,e,((t,e)=>t>e))}},">=":class extends Y{static parse(t,e){return Y.parse(t,e,((t,e)=>t>=e))}},all:j,any:Z,case:q,coalesce:X,match:Q,within:null,interpolate:J,"interpolate-hcl":J,"interpolate-lab":J,step:tt,let:et,var:it,concat:ft,downcase:yt,"is-supported-script":null,"resolved-locale":null,upcase:yt,rgb:_t,rgba:dt,"to-rgba":mt,"-":class extends ht{static parse(t,e){switch(t.length){case 2:return ht.parse(t,e,(t=>-t[0]));case 3:return ht.parse(t,e,(t=>t[0]-t[1]));default:throw new Error('"-" expects 1 or 2 arguments')}}},"*":class extends ht{static parse(t,e){return ht.parse(t,e,(t=>{let e=1;for(const i of t)e*=i;return e}))}},"/":class extends ht{static parse(t,e){if(3===t.length)return ht.parse(t,e,(t=>t[0]/t[1]));throw new Error('"/" expects 2 arguments')}},"%":class extends ht{static parse(t,e){if(3===t.length)return ht.parse(t,e,(t=>t[0]%t[1]));throw new Error('"%" expects 2 arguments')}},"^":class extends ht{static parse(t,e){if(3===t.length)return ht.parse(t,e,(t=>t[0]**t[1]));throw new Error('"^" expects 1 or 2 arguments')}},"+":class extends ht{static parse(t,e){return ht.parse(t,e,(t=>{let e=0;for(const i of t)e+=i;return e}))}},abs:pt,acos:pt,asin:pt,atan:pt,ceil:pt,cos:pt,e:pt,floor:pt,ln:pt,ln2:pt,log10:pt,log2:pt,max:pt,min:pt,pi:pt,round:pt,sin:pt,sqrt:pt,tan:pt,zoom:$,"heatmap-density":null,"has-id":ct,none:K};class It{constructor(t){this._expression=t}filter(t,e){if(!this._expression)return!0;try{return this._expression.evaluate(t,e)}catch(t){return console.log(t.message),!0}}static createFilter(t){if(!t)return null;this.isLegacyFilter(t)&&(t=this.convertLegacyFilter(t));try{const e=Rt(t,null,x);return new It(e)}catch(t){return console.log(t.message),null}}static isLegacyFilter(t){if(!Array.isArray(t))return!0;if(0===t.length)return!0;switch(t[0]){case"==":case"!=":case">":case"<":case">=":case"<=":return 3===t.length&&"string"==typeof t[1]&&!Array.isArray(t[2]);case"in":return t.length>=3&&"string"==typeof t[1]&&!Array.isArray(t[2]);case"!in":case"none":case"!has":return!0;case"any":case"all":for(let e=1;e<t.length;e++)if(this.isLegacyFilter(t[e]))return!0;return!1;case"has":return 2===t.length&&("$id"===t[1]||"$type"===t[1]);default:return!1}}static convertLegacyFilter(t){if(!Array.isArray(t)||0===t.length)return!0;const e=t[0];if(1===t.length)return"any"!==e;switch(e){case"==":return It.convertComparison("==",t[1],t[2]);case"!=":return It.negate(It.convertComparison("==",t[1],t[2]));case">":case"<":case">=":case"<=":return It.convertComparison(e,t[1],t[2]);case"in":return It.convertIn(t[1],t.slice(2));case"!in":return It.negate(It.convertIn(t[1],t.slice(2)));case"any":case"all":case"none":return It.convertCombining(e,t.slice(1));case"has":return It.convertHas(t[1]);case"!has":return It.negate(It.convertHas(t[1]));default:throw new Error("Unexpected legacy filter.")}}static convertComparison(t,e,i){switch(e){case"$type":return[t,["geometry-type"],i];case"$id":return[t,["id"],i];default:return[t,["get",e],i]}}static convertIn(t,e){switch(t){case"$type":return["in",["geometry-type"],["literal",e]];case"$id":return["in",["id"],["literal",e]];default:return["in",["get",t],["literal",e]]}}static convertHas(t){switch(t){case"$type":return!0;case"$id":return["has-id"];default:return["has",t]}}static convertCombining(t,e){return[t].concat(e.map(this.convertLegacyFilter))}static negate(t){return["!",t]}}var vt=i(5367);class wt{constructor(t,e){let i;switch(this.isDataDriven=!1,this.interpolator=null,t.type){case"number":case"color":i=!0;break;case"array":i="number"===t.value;break;default:i=!1}if(null==e&&(e=t.default),Array.isArray(e)&&e.length>0&&St[e[0]]){const i={number:O,color:b,string:L,boolean:x,enum:L};try{const r=Rt(e,null,"array"===t.type?M(i[t.value]||P,t.length):i[t.type]);this.getValue=this._buildExpression(r,t),this.isDataDriven=!0,r instanceof J&&r.input instanceof $&&(this.interpolator=r)}catch(e){console.log(e.message),this.getValue=this._buildSimple(t.default)}return}i&&"interval"===e.type&&(i=!1);const r=e?.stops&&e.stops.length>0;if(r)for(const i of e.stops)i[1]=this._validate(i[1],t);if(this.isDataDriven=!!e&&!!e.property,this.isDataDriven)if(void 0!==e.default&&(e.default=this._validate(e.default,t)),r)switch(e.type){case"identity":this.getValue=this._buildIdentity(e,t);break;case"categorical":this.getValue=this._buildCategorical(e,t);break;default:this.getValue=i?this._buildInterpolate(e,t):this._buildInterval(e,t)}else this.getValue=this._buildIdentity(e,t);else r?this.getValue=i?this._buildZoomInterpolate(e):this._buildZoomInterval(e):(e=this._validate(e,t),this.getValue=this._buildSimple(e))}_validate(t,e){if("number"===e.type){if(null!=e.minimum&&t<e.minimum)return e.minimum;if(null!=e.maximum&&t>e.maximum)return e.maximum}else"color"===e.type?t=wt._parseColor(t):"enum"===e.type?"string"==typeof t&&(t=e.values.indexOf(t)):"array"===e.type&&"enum"===e.value?t=t.map((t=>"string"==typeof t?e.values.indexOf(t):t)):"string"===e.type&&(t=F(t));return t}_buildSimple(t){return()=>t}_buildExpression(t,e){return(i,r)=>{try{const n=t.evaluate(r,i);return void 0===n?e.default:this._validate(n,e)}catch(t){return console.log(t.message),e.default}}}_buildIdentity(t,e){return(i,r)=>{let n;return r&&(n=r.values[t.property]),void 0!==n&&(n=this._validate(n,e)),null!=n?n:void 0!==t.default?t.default:e.default}}_buildCategorical(t,e){return(i,r)=>{let n;return r&&(n=r.values[t.property]),n=this._categorical(n,t.stops),void 0!==n?n:void 0!==t.default?t.default:e.default}}_buildInterval(t,e){return(i,r)=>{let n;return r&&(n=r.values[t.property]),"number"==typeof n?this._interval(n,t.stops):void 0!==t.default?t.default:e.default}}_buildInterpolate(t,e){return(i,r)=>{let n;return r&&(n=r.values[t.property]),"number"==typeof n?this._interpolate(n,t.stops,t.base||1):void 0!==t.default?t.default:e.default}}_buildZoomInterpolate(t){return e=>this._interpolate(e,t.stops,t.base||1)}_buildZoomInterval(t){return e=>this._interval(e,t.stops)}_categorical(t,e){const i=e.length;for(let r=0;r<i;r++)if(e[r][0]===t)return e[r][1]}_interval(t,e){const i=e.length;let r=0;for(let n=0;n<i&&e[n][0]<=t;n++)r=n;return e[r][1]}_interpolate(t,e,i){let r,n;const s=e.length;for(let i=0;i<s;i++){const s=e[i];if(!(s[0]<=t)){n=s;break}r=s}if(r&&n){const e=n[0]-r[0],s=t-r[0],o=1===i?s/e:(i**s-1)/(i**e-1);if(Array.isArray(r[1])){const t=r[1],e=n[1],i=[];for(let r=0;r<t.length;r++)i.push((0,a.GW)(t[r],e[r],o));return i}return(0,a.GW)(r[1],n[1],o)}return r?r[1]:n?n[1]:void 0}static _isEmpty(t){for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}static _parseColor(t){return Array.isArray(t)?t:("string"==typeof t&&(t=new S.A(t)),t instanceof S.A&&!this._isEmpty(t)?S.A.toUnitRGBA(t):void 0)}}var Nt,Ot=i(39686);!function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"}(Nt||(Nt={}));class Lt{constructor(t,e,i,r,n,s){this.layer=t,this.feature=e,this.bounds=i,this.normalizationRatio=r,this.normalizationOffsetX=n,this.normalizationOffsetY=s}}class xt{constructor(t,e,i,r){switch(this.type=t,this.typeName=e.type,this.id=e.id,this.source=e.source,this.sourceLayer=e["source-layer"],this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.filter=e.filter,this.layout=e.layout,this.paint=e.paint,this.z=i,this.uid=r,t){case vt.Dc.BACKGROUND:this._layoutDefinition=vt.$u.backgroundLayoutDefinition,this._paintDefinition=vt.$u.backgroundPaintDefinition;break;case vt.Dc.FILL:this._layoutDefinition=vt.$u.fillLayoutDefinition,this._paintDefinition=vt.$u.fillPaintDefinition;break;case vt.Dc.LINE:this._layoutDefinition=vt.$u.lineLayoutDefinition,this._paintDefinition=vt.$u.linePaintDefinition;break;case vt.Dc.SYMBOL:this._layoutDefinition=vt.$u.symbolLayoutDefinition,this._paintDefinition=vt.$u.symbolPaintDefinition;break;case vt.Dc.CIRCLE:this._layoutDefinition=vt.$u.circleLayoutDefinition,this._paintDefinition=vt.$u.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=It.createFilter(this.filter)}getLayoutProperty(t){return this._layoutProperties[t]}getPaintProperty(t){return this._paintProperties[t]}getLayoutValue(t,e,i){let r;const n=this._layoutProperties[t];return n&&(r=n.getValue(e,i)),void 0===r&&(r=this._layoutDefinition[t].default),r}getPaintValue(t,e,i){let r;const n=this._paintProperties[t];return n&&(r=n.getValue(e,i)),void 0===r&&(r=this._paintDefinition[t].default),r}isPainterDataDriven(){const t=this._paintProperties;if(t)for(const e in t)if(t[e].isDataDriven)return!0;return!1}isIntersectingFeature(t,e,i,r,n,s,o){return!1}getFeatureInflatedBounds(t,e,i,r){return null}_parseLayout(t){const e={};for(const i in t){const r=this._layoutDefinition[i];r&&(e[i]=new wt(r,t[i]))}return e}_parsePaint(t){const e={};for(const i in t){const r=this._paintDefinition[i];r&&(e[i]=new wt(r,t[i]))}return e}computeAttributesKey(t,e,i,r){let n=0,s=0;for(const t of e){let e=3;if(!t||t!==r){const r=i[t],{isLayout:n,isOptional:s}=r,o=n?this.getLayoutProperty(t):this.getPaintProperty(t);e=o?.interpolator?2:o?.isDataDriven?1:s&&!o?3:0}s|=e<<n,n+=2}return s<<3|t}}class bt extends xt{constructor(t,e,i,r){super(t,e,i,r),this.backgroundMaterial=new y(this.computeAttributesKey(o.kh.BACKGROUND,y.ATTRIBUTES,y.ATTRIBUTES_INFO))}}class Dt extends xt{constructor(t,e,i,r){super(t,e,i,r);const n=this.getPaintProperty("fill-color"),s=this.getPaintProperty("fill-opacity"),a=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=n?.isDataDriven,this.hasDataDrivenOpacity=s?.isDataDriven,this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||a?.isDataDriven;const l=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!l,this.hasDataDrivenOutlineColor=l?.isDataDriven,this.hasDataDrivenOutline=l?l.isDataDriven:!!n&&n.isDataDriven,this.hasDataDrivenOutline=(l?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity,this.fillMaterial=new d(this.computeAttributesKey(o.kh.FILL,d.ATTRIBUTES,d.ATTRIBUTES_INFO)),this.outlineMaterial=new m(this.computeAttributesKey(o.kh.OUTLINE,this.outlineUsesFillColor?m.ATTRIBUTES_FILL:m.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?m.ATTRIBUTES_INFO_FILL:m.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}getFeatureInflatedBounds(t,e,i,r){const n=Bt(t);if(!n)return null;const s=this.getPaintValue("fill-translate",e,t),o=r*Math.max(s[0],s[1]);return n[0]-=o,n[2]-=o,n[1]+=o,n[3]+=o,n}isIntersectingFeature(t,e,i,r,n,s,o){const l=r.getGeometry();if(!l)return!1;const u=8/o.normalizationRatio;t=t/o.normalizationRatio+o.normalizationOffsetX,e=e/o.normalizationRatio+o.normalizationOffsetY;const c=(0,a.yM)(this.getPaintValue("fill-translate",n,r),this.getPaintValue("fill-translate-anchor",n,r),s,8);return t-=u*c.x,e-=u*c.y,!!(0,a.s3)(t,e,l)||(0,a.ru)(t,e,l,u*i)}}class Pt extends xt{constructor(t,e,i,r){super(t,e,i,r);const n=this.getPaintProperty("line-pattern");if(this.lineMaterial=new g(this.computeAttributesKey(o.kh.LINE,g.ATTRIBUTES,g.ATTRIBUTES_INFO,n?"line-dasharray":"")),this.hasDataDrivenLine=this.getPaintProperty("line-blur")?.isDataDriven||this.getPaintProperty("line-color")?.isDataDriven||this.getPaintProperty("line-gap-width")?.isDataDriven||this.getPaintProperty("line-offset")?.isDataDriven||this.getPaintProperty("line-opacity")?.isDataDriven||this.getPaintProperty("line-pattern")?.isDataDriven||this.getPaintProperty("line-dasharray")?.isDataDriven||this.getLayoutProperty("line-cap")?.isDataDriven||this.getPaintProperty("line-width")?.isDataDriven,this.canUseThinTessellation=!1,!this.hasDataDrivenLine){const t=this.getPaintProperty("line-width");if(!t||"number"==typeof t&&.5*t<Ot.Gh){const t=this.getPaintProperty("line-offset");(!t||"number"==typeof t&&0===t)&&(this.canUseThinTessellation=!0)}}}getDashKey(t,e){let i;switch(e){case Nt.BUTT:i="Butt";break;case Nt.ROUND:i="Round";break;case Nt.SQUARE:i="Square";break;default:i="Butt"}return`dasharray-[${t.toString()}]-${i}`}getFeatureInflatedBounds(t,e,i,r){const n=Bt(t);if(!n)return null;const s=this.getPaintValue("line-translate",e,t),o=r*Math.max(s[0],s[1]);n[0]-=o,n[2]-=o,n[1]+=o,n[3]+=o;const a=r*Math.abs(this.getPaintValue("line-offset",e,t)||0),l=r*(this.getPaintValue("line-width",e,t)/2);return n[0]-=a+l,n[1]-=a+l,n[2]+=a+l,n[3]+=a+l,n}isIntersectingFeature(t,e,i,r,n,s,o){let l=r.getGeometry();if(!l)return!1;const u=8/o.normalizationRatio;t=t/o.normalizationRatio+o.normalizationOffsetX,e=e/o.normalizationRatio+o.normalizationOffsetY;const c=(0,a.yM)(this.getPaintValue("line-translate",n,r),this.getPaintValue("line-translate-anchor",n,r),s,8);t-=u*c.x,e-=u*c.y;const h=u*this.getPaintValue("line-offset",n,r)||0;0!==h&&(l=(0,a.cP)(l,-h));const p=this.getPaintValue("line-width",n,r);return(0,a.ru)(t,e,l,u*(i+p/2))}}class Mt extends xt{constructor(t,e,i,r){super(t,e,i,r),this.iconMaterial=new T(this.computeAttributesKey(o.kh.ICON,T.ATTRIBUTES,T.ATTRIBUTES_INFO)),this.textMaterial=new R(this.computeAttributesKey(o.kh.TEXT,R.ATTRIBUTES,R.ATTRIBUTES_INFO)),this.hasDataDrivenIcon=this.getPaintProperty("icon-color")?.isDataDriven||this.getPaintProperty("icon-halo-blur")?.isDataDriven||this.getPaintProperty("icon-halo-color")?.isDataDriven||this.getPaintProperty("icon-halo-width")?.isDataDriven||this.getPaintProperty("icon-opacity")?.isDataDriven||this.getLayoutProperty("icon-size")?.isDataDriven,this.hasDataDrivenText=this.getPaintProperty("text-color")?.isDataDriven||this.getPaintProperty("text-halo-blur")?.isDataDriven||this.getPaintProperty("text-halo-color")?.isDataDriven||this.getPaintProperty("text-halo-width")?.isDataDriven||this.getPaintProperty("text-opacity")?.isDataDriven||this.getLayoutProperty("text-size")?.isDataDriven}}class Ct extends xt{constructor(t,e,i,r){super(t,e,i,r),this.circleMaterial=new _(this.computeAttributesKey(o.kh.CIRCLE,_.ATTRIBUTES,_.ATTRIBUTES_INFO))}getFeatureInflatedBounds(t,e,i,r){const n=Bt(t);if(!n)return null;const s=this.getPaintValue("circle-translate",e,t),o=Math.max(s[0],s[1]);n[0]-=o,n[2]-=o,n[1]+=o,n[3]+=o;const a=r*(8*(this.getPaintValue("circle-radius",e,t)+this.getPaintValue("circle-stroke-width",e,t))/2);return n[0]-=a,n[1]-=a,n[2]+=a,n[3]+=a,n}isIntersectingFeature(t,e,i,r,n,s,o){const l=r.getGeometry();if(!l)return!1;const u=8/o.normalizationRatio;t=t/o.normalizationRatio+o.normalizationOffsetX,e=e/o.normalizationRatio+o.normalizationOffsetY,i*=u;const c=(0,a.yM)(this.getPaintValue("circle-translate",n,r),this.getPaintValue("circle-translate-anchor",n,r),s,u),h=u*(this.getPaintValue("circle-radius",n,r)+this.getPaintValue("circle-stroke-width",n,r));let p,f;for(const r of l)if(r)for(const n of r)if(p=n.x+c.x,f=n.y+c.y,Math.sqrt((t-p)*(t-p)+(e-f)*(e-f))-i<=h)return!0;return!1}}class Ut{constructor(t,e,i){let r;this.allowOverlap=t.getLayoutValue("icon-allow-overlap",e),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",e),this.keepUpright=t.getLayoutValue("icon-keep-upright",e),this.optional=t.getLayoutValue("icon-optional",e),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",e),this.rotationAlignment===vt.I5.AUTO&&(this.rotationAlignment=i?vt.I5.MAP:vt.I5.VIEWPORT),r=t.getLayoutProperty("icon-anchor"),r?.isDataDriven?this._anchorProp=r:this.anchor=t.getLayoutValue("icon-anchor",e),r=t.getLayoutProperty("icon-offset"),r?.isDataDriven?this._offsetProp=r:this.offset=t.getLayoutValue("icon-offset",e),r=t.getLayoutProperty("icon-padding"),r?.isDataDriven?this._paddingProp=r:this.padding=t.getLayoutValue("icon-padding",e),r=t.getLayoutProperty("icon-rotate"),r?.isDataDriven?this._rotateProp=r:this.rotate=t.getLayoutValue("icon-rotate",e),r=t.getLayoutProperty("icon-size"),r?.isDataDriven?this._sizeProp=r:this.size=t.getLayoutValue("icon-size",e)}update(t,e){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,e)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,e)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,e)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,e)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,e))}}class Gt{constructor(t,e,i){let r;this.allowOverlap=t.getLayoutValue("text-allow-overlap",e),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",e),this.keepUpright=t.getLayoutValue("text-keep-upright",e),this.optional=t.getLayoutValue("text-optional",e),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",e),this.rotationAlignment===vt.I5.AUTO&&(this.rotationAlignment=i?vt.I5.MAP:vt.I5.VIEWPORT),r=t.getLayoutProperty("text-anchor"),r?.isDataDriven?this._anchorProp=r:this.anchor=t.getLayoutValue("text-anchor",e),r=t.getLayoutProperty("text-justify"),r?.isDataDriven?this._justifyProp=r:this.justify=t.getLayoutValue("text-justify",e),r=t.getLayoutProperty("text-letter-spacing"),r?.isDataDriven?this._letterSpacingProp=r:this.letterSpacing=t.getLayoutValue("text-letter-spacing",e),r=t.getLayoutProperty("text-line-height"),r?.isDataDriven?this._lineHeightProp=r:this.lineHeight=t.getLayoutValue("text-line-height",e),r=t.getLayoutProperty("text-max-angle"),r?.isDataDriven?this._maxAngleProp=r:this.maxAngle=t.getLayoutValue("text-max-angle",e),r=t.getLayoutProperty("text-max-width"),r?.isDataDriven?this._maxWidthProp=r:this.maxWidth=t.getLayoutValue("text-max-width",e),r=t.getLayoutProperty("text-offset"),r?.isDataDriven?this._offsetProp=r:this.offset=t.getLayoutValue("text-offset",e),r=t.getLayoutProperty("text-padding"),r?.isDataDriven?this._paddingProp=r:this.padding=t.getLayoutValue("text-padding",e),r=t.getLayoutProperty("text-rotate"),r?.isDataDriven?this._rotateProp=r:this.rotate=t.getLayoutValue("text-rotate",e),r=t.getLayoutProperty("text-size"),r?.isDataDriven?this._sizeProp=r:this.size=t.getLayoutValue("text-size",e),r=t.getLayoutProperty("text-writing-mode"),r?.isDataDriven?this._writingModeProp=r:this.writingMode=t.getLayoutValue("text-writing-mode",e)}update(t,e){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,e)),this._justifyProp&&(this.justify=this._justifyProp.getValue(t,e)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(t,e)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(t,e)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(t,e)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(t,e)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,e)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,e)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,e)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,e)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(t,e))}}function Bt(t){const e=t?.getGeometry();if(null==e)return null;let i=1/0,r=1/0,n=-1/0,o=-1/0;for(const t of e)if(t)for(const e of t)i=Math.min(i,e.x),r=Math.min(r,e.y),n=Math.max(n,e.x),o=Math.max(o,e.y);return(0,s.fA)(i,r,n,o)}},82790:function(t,e,i){i.d(e,{A:function(){return s}});var r=i(5367),n=i(36583);class s{constructor(t){if(this._style=t,this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,t.layers||(t.layers=[]),this.version=parseFloat(t.version),this.layers=t.layers.map(((t,e,i)=>this._create(t,e,i))).filter((t=>!!t)),this.layers)for(let t=0;t<this.layers.length;t++){const e=this.layers[t];this._layerByName[e.id]=e,this._uidToLayer.set(e.uid,e),e.type===r.Dc.BACKGROUND&&this.backgroundBucketIds.push(e.id)}this._identifyRefLayers()}isPainterDataDriven(t){const e=this._layerByName[t];return!!e&&e.isPainterDataDriven()}getStyleLayerId(t){return t>=this.layers.length?null:this.layers[t].id}getStyleLayerByUID(t){return this._uidToLayer.get(t)??null}getStyleLayerIndex(t){const e=this._layerByName[t];return e?this.layers.indexOf(e):-1}setStyleLayer(t,e){if(!t?.id)return;const i=this._style;null!=e&&e>=this.layers.length&&(e=this.layers.length-1);let r,n=!0;const o=this._layerByName[t.id];if(o){const a=this.layers.indexOf(o);e||(e=a),e===a?(n=!1,r=s._recreateLayer(t,o),this.layers[e]=r,i.layers[e]=t):(this.layers.splice(a,1),i.layers.splice(a,1),r=this._create(t,e,this.layers),this.layers.splice(e,0,r),i.layers.splice(e,0,t))}else r=this._create(t,e,this.layers),!e||e>=this.layers.length?(this.layers.push(r),i.layers.push(t)):(this.layers.splice(e,0,r),i.layers.splice(e,0,t));this._layerByName[t.id]=r,this._uidToLayer.set(r.uid,r),n&&this._recomputeZValues(),this._identifyRefLayers()}getStyleLayer(t){const e=this._layerByName[t];return e?{type:e.typeName,id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter,layout:e.layout,paint:e.paint}:null}deleteStyleLayer(t){const e=this._layerByName[t];if(e){delete this._layerByName[t],this._uidToLayer.delete(e.uid);const i=this.layers.indexOf(e);this.layers.splice(i,1),this._style.layers.splice(i,1),this._recomputeZValues(),this._identifyRefLayers()}}getLayerById(t){return this._layerByName[t]}getLayoutProperties(t){const e=this._layerByName[t];return e?e.layout:null}getPaintProperties(t){const e=this._layerByName[t];return e?e.paint:null}setPaintProperties(t,e){const i=this._layerByName[t];if(!i)return;const r={type:i.typeName,id:i.id,source:i.source,"source-layer":i.sourceLayer,minzoom:i.minzoom,maxzoom:i.maxzoom,filter:i.filter,layout:i.layout,paint:e},n=s._recreateLayer(r,i),o=this.layers.indexOf(i);this.layers[o]=n,this._style.layers[o].paint=e,this._layerByName[i.id]=n,this._uidToLayer.set(i.uid,n)}setLayoutProperties(t,e){const i=this._layerByName[t];if(!i)return;const r={type:i.typeName,id:i.id,source:i.source,"source-layer":i.sourceLayer,minzoom:i.minzoom,maxzoom:i.maxzoom,filter:i.filter,layout:e,paint:i.paint},n=s._recreateLayer(r,i),o=this.layers.indexOf(i);this.layers[o]=n,this._style.layers[o].layout=e,this._layerByName[i.id]=n,this._uidToLayer.set(i.uid,n)}setStyleLayerVisibility(t,e){const i=this._layerByName[t];if(!i)return;const r=i.layout||{};r.visibility=e;const n={type:i.typeName,id:i.id,source:i.source,"source-layer":i.sourceLayer,minzoom:i.minzoom,maxzoom:i.maxzoom,filter:i.filter,layout:r,paint:i.paint},o=s._recreateLayer(n,i),a=this.layers.indexOf(i);this.layers[a]=o,this._style.layers[a].layout=r,this._layerByName[i.id]=o,this._uidToLayer.set(i.uid,o)}getStyleLayerVisibility(t){const e=this._layerByName[t];if(!e)return"none";const i=e.layout;return i?.visibility??"visible"}_recomputeZValues(){const t=this.layers,e=1/(t.length+1);for(let i=0;i<t.length;i++)t[i].z=1-(1+i)*e}_identifyRefLayers(){const t=[],e=[];let i=0;for(const n of this.layers){const s=n.layout;if(n.type===r.Dc.FILL){const e=n;let r=n.source+"|"+n.sourceLayer;r+="|"+(s?.visibility??""),r+="|"+n.minzoom,r+="|"+n.maxzoom,r+="|"+JSON.stringify(n.filter),(e.hasDataDrivenFill||e.hasDataDrivenOutline)&&(r+="|"+i),t.push({key:r,layer:n})}else if(n.type===r.Dc.LINE){const t=n,r=n.paint,o=null!=r&&(null!=r["line-pattern"]||null!=r["line-dasharray"]);let a=n.source+"|"+n.sourceLayer;a+="|"+(s?.visibility??""),a+="|"+n.minzoom,a+="|"+n.maxzoom,a+="|"+JSON.stringify(n.filter),a+="|"+(void 0!==s?s["line-cap"]:""),a+="|"+(void 0!==s?s["line-join"]:""),(t.hasDataDrivenLine||o)&&(a+="|"+i),e.push({key:a,layer:n})}++i}this._assignRefLayers(t),this._assignRefLayers(e)}_assignRefLayers(t){let e,i;t.sort(((t,e)=>t.key<e.key?-1:t.key>e.key?1:0));const n=t.length;for(let s=0;s<n;s++){const o=t[s];if(o.key===e)o.layer.refLayerId=i;else if(e=o.key,i=o.layer.id,o.layer.type===r.Dc.FILL){if(!o.layer.getPaintProperty("fill-outline-color"))for(let r=s+1;r<n;r++){const n=t[r];if(n.key!==e)break;if(n.layer.getPaintProperty("fill-outline-color")){t[s]=n,t[r]=o,i=n.layer.id;break}}}else if(o.layer.type===r.Dc.LINE){let r=o.layer;for(let a=s+1;a<n;a++){const n=t[a];if(n.key!==e)break;const l=n.layer;(r.canUseThinTessellation&&!l.canUseThinTessellation||!r.canUseThinTessellation&&(l.getPaintProperty("line-pattern")||l.getPaintProperty("line-dasharray")))&&(r=l,t[s]=n,t[a]=o,i=n.layer.id)}}}}_create(t,e,i){const s=1-(1+e)*(1/(i.length+1)),o=this._runningId++;switch(t.type){case"background":return new n.lf(r.Dc.BACKGROUND,t,s,o);case"fill":return new n.A4(r.Dc.FILL,t,s,o);case"line":return new n.tU(r.Dc.LINE,t,s,o);case"symbol":return new n.V1(r.Dc.SYMBOL,t,s,o);case"raster":return console.warn(`Unsupported vector tile raster layer ${t.id}`),null;case"circle":return new n.L(r.Dc.CIRCLE,t,s,o)}return null}static _recreateLayer(t,e){switch(t.type){case"background":return new n.lf(r.Dc.BACKGROUND,t,e.z,e.uid);case"fill":return new n.A4(r.Dc.FILL,t,e.z,e.uid);case"line":return new n.tU(r.Dc.LINE,t,e.z,e.uid);case"symbol":return new n.V1(r.Dc.SYMBOL,t,e.z,e.uid);case"raster":return console.warn(`Unsupported vector tile raster layer ${t.id}`),null;case"circle":return new n.L(r.Dc.CIRCLE,t,e.z,e.uid)}return null}}},39686:function(t,e,i){i.d(e,{$U:function(){return P},C2:function(){return u},CQ:function(){return n},CR:function(){return T},C_:function(){return C},Cp:function(){return R},DY:function(){return a},GR:function(){return q},Gh:function(){return O},LY:function(){return w},O5:function(){return $},Pq:function(){return c},Qb:function(){return k},Sr:function(){return E},TB:function(){return K},V3:function(){return x},Vl:function(){return Z},Xh:function(){return j},YS:function(){return p},YV:function(){return s},_M:function(){return b},_x:function(){return Y},cp:function(){return X},dV:function(){return I},eG:function(){return l},eI:function(){return W},fq:function(){return z},fy:function(){return L},g0:function(){return N},hM:function(){return U},ie:function(){return D},ju:function(){return o},lL:function(){return d},mg:function(){return M},n9:function(){return g},nM:function(){return _},nW:function(){return F},p:function(){return G},qM:function(){return r},r1:function(){return V},sn:function(){return m},uM:function(){return f},ue:function(){return h},vN:function(){return S},vd:function(){return A},yA:function(){return B},yv:function(){return H},z2:function(){return y}});const r=1e-30,n=512,s=16777216,o=8,a=29,l=24,u=4,c=0,h=0,p=0,f=1,y=2,_=3,d=4,m=5,g=6,E=12,A=5,T=6,R=5,S=6;var I,v;(v=I||(I={}))[v.FilterFlags=0]="FilterFlags",v[v.Animation=1]="Animation",v[v.GPGPU=2]="GPGPU",v[v.VV=3]="VV",v[v.DD0=4]="DD0",v[v.DD1=5]="DD1",v[v.DD2=6]="DD2";const w=8,N=w<<1,O=1.05,L=3,x=1,b=3,D=3,P=5,M=6,C=1.15,U=2,G=128,B=256-2*U,F=2,z=10,H=1024,k=128,V=4,$=1,Y=1<<20,W=.75,j=10,Z=.75,K=256,q=32,X=512},36008:function(t,e,i){i.d(e,{A:function(){return n}});var r=i(56996);class n{static getId(t,e,i,r){return"object"==typeof t?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${e}/${i}/${r}`}constructor(t,e,i,r){this.set(t,e,i,r)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,e=4095&this.col,i=63&this.level;return(3&this.world)<<30|e<<22|t<<8|i}acquire(t,e,i,r){this.set(t,e,i,r)}contains(t){const e=t.level-this.level;return e>=0&&this.row===t.row>>e&&this.col===t.col>>e&&this.world===t.world}containsChild(t){const e=t.level-this.level;return e>0&&this.row===t.row>>e&&this.col===t.col>>e&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new n(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,e,i,r){if(null==t)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof t)this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if("string"==typeof t){const[e,i,r,n]=t.split("/");this.level=parseFloat(e),this.row=parseFloat(i),this.col=parseFloat(r),this.world=parseFloat(n)}else this.level=+t,this.row=+e,this.col=+i,this.world=+r||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new n(this.level-1,this.row>>1,this.col>>1,this.world)}getNeighborId(t,e){return`${this.level}/${this.row+e}/${this.col+t}/${this.world}`}getChildKeys(){const t=this.level+1,e=this.row<<1,i=this.col<<1,r=this.world;return[new n(t,e,i,r),new n(t,e,i+1,r),new n(t,e+1,i,r),new n(t,e+1,i+1,r)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}n.pool=new r.A(n,null,null,25,50)},94738:function(t,e,i){function r(t,e,i,r){const n=3*t,s=3*(i-t)-n,o=1-n-s,a=3*e,l=3*(r-e)-a,u=1-a-l;function c(t){return((o*t+s)*t+n)*t}function h(t){return(3*o*t+2*s)*t+n}return function(t,e=1e-6){return function(t){return((u*t+l)*t+a)*t}(function(t,e){let i,r,n,s,o,a;for(n=t,a=0;a<8;a++){if(s=c(n)-t,Math.abs(s)<e)return n;if(o=h(n),Math.abs(o)<1e-6)break;n-=s/o}if(i=0,r=1,n=t,n<i)return i;if(n>r)return r;for(;i<r;){if(s=c(n),Math.abs(s-t)<e)return n;t>s?i=n:r=n,n=.5*(r-i)+i}return n}(t,e))}}i.d(e,{Z0:function(){return s},gb:function(){return r},qg:function(){return o}});const n=/^cubic-bezier\((.*)\)/,s={};function o(t){let e=s[t]||null;if(!e){const i=n.exec(t);if(i){const t=i[1].split(",").map((t=>parseFloat(t.trim())));4!==t.length||t.some((t=>isNaN(t)))||(e=r.apply(r,t))}}return e}s.ease=r(.25,.1,.25,1),s.linear=r(0,0,1,1),s.easeIn=s["ease-in"]=r(.42,0,1,1),s.easeOut=s["ease-out"]=r(0,0,.58,1),s.easeInOut=s["ease-in-out"]=r(.42,0,.58,1)},3817:function(t,e,i){i.d(e,{_:function(){return r}});class r{constructor(t,e,i,r,n,s=!1,o=0){this.name=t,this.count=e,this.type=i,this.offset=r,this.stride=n,this.normalized=s,this.divisor=o}}},2746:function(t,e,i){i.d(e,{C:function(){return s}});var r=i(6764);let n;function s(){return n||(n=function(){const t=new o,e=function(t){if("undefined"==typeof WebGL2RenderingContext)return null;const e=document.createElement("canvas");if(!e)return null;let i=(0,r.q)(e,{failIfMajorPerformanceCaveat:!0});if(null==i&&(i=(0,r.q)(e),null!=i&&(t.majorPerformanceCaveat=!0)),null==i)return i;t.available=!0,t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return n&&(t.supportsHighPrecisionFragment=n.precision>0),i}(t);return null==e||(t.supportsColorBufferFloat=null!==e.getExtension("EXT_color_buffer_float"),t.supportsColorBufferFloatBlend=null!==e.getExtension("EXT_float_blend"),t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||null!==e.getExtension("EXT_color_buffer_half_float")),t}()),n}class o{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}},6764:function(t,e,i){function r(t,e={}){return t.getContext("webgl2",e)||null}i.d(e,{q:function(){return r}})},85456:function(t,e,i){var r,n,s,o,a,l,u,c,h,p,f,y,_,d,m,g,E,A,T,R;i.d(e,{Ab:function(){return d},Ac:function(){return u},Ap:function(){return _},CQ:function(){return O},Cj:function(){return f},Co:function(){return T},H0:function(){return m},Hr:function(){return w},MT:function(){return h},NZ:function(){return a},Nm:function(){return v},R:function(){return R},Tb:function(){return o},WR:function(){return n},Y7:function(){return l},_U:function(){return A},dn:function(){return s},eA:function(){return p},hn:function(){return r},ld:function(){return g},nI:function(){return N},pF:function(){return y},pe:function(){return c},sS:function(){return D},tx:function(){return P},vt:function(){return I},xM:function(){return S},xV:function(){return L},yQ:function(){return E}}),function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"}(r||(r={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(n||(n={})),function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(s||(s={})),function(t){t[t.ADD=32774]="ADD",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.SUBTRACT=32778]="SUBTRACT",t[t.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(o||(o={})),function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(a||(a={})),function(t){t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(l||(l={})),function(t){t[t.CW=2304]="CW",t[t.CCW=2305]="CCW"}(u||(u={})),function(t){t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=5131]="HALF_FLOAT"}(c||(c={})),function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"}(h||(h={})),function(t){t[t.ZERO=0]="ZERO",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP"}(p||(p={})),function(t){t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(f||(f={})),function(t){t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(y||(y={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(_||(_={})),function(t){t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.RED=6403]="RED",t[t.RG=33319]="RG",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER"}(d||(d={})),function(t){t[t.RGBA4=32854]="RGBA4",t[t.R16F=33325]="R16F",t[t.RG16F=33327]="RG16F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.R32F=33326]="R32F",t[t.RG32F=33328]="RG32F",t[t.RGBA32F=34836]="RGBA32F",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB5_A1=32855]="RGB5_A1",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.RGB16F=34843]="RGB16F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGB565=36194]="RGB565",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2=32857]="RGB10_A2",t[t.RGB10_A2UI=36975]="RGB10_A2UI"}(m||(m={})),function(t){t[t.FLOAT=5126]="FLOAT",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.INT=5124]="INT",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(g||(g={})),function(t){t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(E||(E={})),function(t){t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_READ=35045]="STATIC_READ",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.STREAM_COPY=35042]="STREAM_COPY"}(A||(A={})),function(t){t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER"}(T||(T={})),function(t){t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(R||(R={}));const S=33984;var I,v,w;!function(t){t[t.Texture=0]="Texture",t[t.BufferObject=1]="BufferObject",t[t.VertexArrayObject=2]="VertexArrayObject",t[t.Shader=3]="Shader",t[t.Program=4]="Program",t[t.FramebufferObject=5]="FramebufferObject",t[t.Renderbuffer=6]="Renderbuffer",t[t.TransformFeedback=7]="TransformFeedback",t[t.Sync=8]="Sync",t[t.UNCOUNTED=9]="UNCOUNTED",t[t.LinesOfCode=9]="LinesOfCode",t[t.Uniform=10]="Uniform",t[t.COUNT=11]="COUNT"}(I||(I={})),function(t){t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(v||(v={})),function(t){t[t.NONE=0]="NONE",t[t.BACK=1029]="BACK"}(w||(w={}));const N=33306;var O,L,x,b,D,P,M;!function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"}(O||(O={})),function(t){t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(L||(L={})),function(t){t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS"}(x||(x={})),function(t){t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED"}(b||(b={})),function(t){t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED"}(D||(D={})),function(t){t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(P||(P={})),function(t){t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(M||(M={}))}}]);
//# sourceMappingURL=VectorTileLayer.js.map