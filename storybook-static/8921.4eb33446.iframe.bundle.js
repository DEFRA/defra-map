"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[8921],{"./node_modules/@arcgis/core/core/sql/AggregateFunctions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>m,s:()=>u});var _DateOnly_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/sql/DateOnly.js"),_errorSupport_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/sql/errorSupport.js"),_SqlTimestampOffset_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/sql/SqlTimestampOffset.js"),_TimeOnly_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/sql/TimeOnly.js"),luxon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/luxon/src/luxon.js");function u(n,e){const a=o[n.toLowerCase()];if(null==a)throw new _errorSupport_js__WEBPACK_IMPORTED_MODULE_1__.L8(_errorSupport_js__WEBPACK_IMPORTED_MODULE_1__.Z7.FunctionNotRecognized);if(e.length<a.minParams||e.length>a.maxParams)throw new _errorSupport_js__WEBPACK_IMPORTED_MODULE_1__.L8(_errorSupport_js__WEBPACK_IMPORTED_MODULE_1__.Z7.InvalidParameterCount,{name:n.toUpperCase()});return a.evaluate(e)}function m(n,l){const t=o[n.toLowerCase()];return null!=t&&l>=t.minParams&&l<=t.maxParams}const o={min:{minParams:1,maxParams:1,evaluate:n=>f(n[0],"min")},max:{minParams:1,maxParams:1,evaluate:n=>f(n[0],"max")},avg:{minParams:1,maxParams:1,evaluate:n=>i(n[0])},sum:{minParams:1,maxParams:1,evaluate:n=>function c(n){if(null===n)return null;let e=0;for(let a=0;a<n.length;a++){const r=n[a];if(null!==r){if(!s(r))throw new _errorSupport_js__WEBPACK_IMPORTED_MODULE_1__.L8(_errorSupport_js__WEBPACK_IMPORTED_MODULE_1__.Z7.InvalidValueForAggregateFunction);e+=r}}return e}(n[0])},stddev:{minParams:1,maxParams:1,evaluate:n=>function g(n){if(null===n)return null;const l=P(n);return null===l?null:Math.sqrt(l)}(n[0])},count:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:n[0].length},var:{minParams:1,maxParams:1,evaluate:n=>P(n[0])}};function i(n){if(null===n)return null;let e=0,a=0;for(let r=0;r<n.length;r++){const u=n[r];if(null!==u){if(!s(u))throw new _errorSupport_js__WEBPACK_IMPORTED_MODULE_1__.L8(_errorSupport_js__WEBPACK_IMPORTED_MODULE_1__.Z7.InvalidValueForAggregateFunction);a++,e+=u}}return 0===a?null:e/n.length}function s(n){return"number"==typeof n}function f(l,t){if(null===l)return null;let u=null,m=null;for(const o of l){let l=o;l=_DateOnly_js__WEBPACK_IMPORTED_MODULE_0__.n.isDateOnly(o)||_TimeOnly_js__WEBPACK_IMPORTED_MODULE_3__.k.isTimeOnly(o)?o.toNumber():luxon__WEBPACK_IMPORTED_MODULE_4__.c9.isDateTime(o)?o.toMillis():_SqlTimestampOffset_js__WEBPACK_IMPORTED_MODULE_2__.g.isTimestampOffset(o)?o.toMilliseconds():o,(null===u||"max"===t&&null!==m&&null!==l&&m<=l||"min"===t&&null!==m&&null!==l&&m>=l)&&(u=o,m=l)}return u}function P(n){if(null===n)return null;if(0===(n=n.filter((n=>null!==n))).length)return null;const e=i(n);if(null===e)return null;let a=0;for(const r of n){if(!s(r))throw new _errorSupport_js__WEBPACK_IMPORTED_MODULE_1__.L8(_errorSupport_js__WEBPACK_IMPORTED_MODULE_1__.Z7.InvalidValueForAggregateFunction);a+=(e-r)**2}return a/(n.length-1)}},"./node_modules/@arcgis/core/core/sql/SqlTimestampOffset.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>i});var luxon__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/luxon/src/luxon.js");function e(t){return Number.isNaN(t)||0===t?t:Math.trunc(t)}const r="esri.core.sql.SqlTimeStampOffset";class i{constructor(t){this._timeStampOffset=t,this.declaredRootClass=r,this._date=null}static isTimestampOffset(t){return"object"==typeof t&&null!=t&&"declaredRootClass"in t&&t.declaredRootClass===r}toDateTime(){return this._date??=luxon__WEBPACK_IMPORTED_MODULE_0__.c9.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return e(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return e(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return i.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(e){return new i(luxon__WEBPACK_IMPORTED_MODULE_0__.c9.fromJSDate(e).toISO({includeOffset:!0}))}static fromDateTime(t){return new i(t.toISO({includeOffset:!0}))}static fromParts(t,e,r=0,o=0,a=0,s=0,n=0,m=!1,u=0,f=0){const S=`${t.toString().padStart(4,"0")}-${e.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}`;let d="";s<10&&(d="0");let l=`${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${d+s.toString()}`;0!==n&&(l+="."+n.toString().padStart(3,"0"));const c=`${m?"-":"+"}${u.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`;return new i(S+"T"+l+c)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let t=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return t&&(t=t.replace(".000","")),t}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(t){const e=this.toDateTime().plus(t);return i.fromDateTime(e)}}},"./node_modules/@arcgis/core/core/sql/WhereClause.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>WhereClause_D});var has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),AggregateFunctions=__webpack_require__("./node_modules/@arcgis/core/core/sql/AggregateFunctions.js"),DateOnly=__webpack_require__("./node_modules/@arcgis/core/core/sql/DateOnly.js"),errorSupport=__webpack_require__("./node_modules/@arcgis/core/core/sql/errorSupport.js");function r(r){if(null!==r.precision||null!==r.secondary)throw new errorSupport.L8(errorSupport.Z7.PrimarySecondaryQualifiers)}function s(e,t){if(t.includes(".")){const r=t.split(".");e.second=parseFloat(r[0]),e.millis=parseInt(r[1],10)}else e.second=parseFloat(t)}const l="esri.core.sql.SqlInterval";class SqlInterval_a{constructor(){this.declaredRootClass=l,this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static isInterval(e){return"object"==typeof e&&null!=e&&"declaredRootClass"in e&&e.declaredRootClass===l}static createFromMilliseconds(e){const t=new SqlInterval_a;return t.second=e/1e3,t}static createFromValueAndQualifier(l,o,n){let i=null;const p=new SqlInterval_a;if(p.op="-"===n?"-":"+","interval-period"===o.type){r(o);const a=new RegExp("^[0-9]{1,}$");if("year"===o.period||"month"===o.period)throw new errorSupport.L8(errorSupport.Z7.YearMonthIntervals);if("second"===o.period){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(l))throw new errorSupport.L8(errorSupport.Z7.IllegalInterval);s(p,l)}else{if(!a.test(l))throw new errorSupport.L8(errorSupport.Z7.IllegalInterval);p[o.period]=parseFloat(l)}}else{if(r(o.start),r(o.end),"year"===o.start.period||"month"===o.start.period||"year"===o.end.period||"month"===o.end.period)throw new errorSupport.L8(errorSupport.Z7.YearMonthIntervals);switch(o.start.period){case"day":switch(o.end.period){case"hour":if(i=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!i.test(l))throw new errorSupport.L8(errorSupport.Z7.IllegalInterval);p[o.start.period]=parseFloat(l.split(" ")[0]),p[o.end.period]=parseFloat(l.split(" ")[1]);break;case"minute":if(i=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!i.test(l))throw new errorSupport.L8(errorSupport.Z7.IllegalInterval);{p[o.start.period]=parseFloat(l.split(" ")[0]);const e=l.split(" ")[1].split(":");p.hour=parseFloat(e[0]),p.minute=parseFloat(e[1])}break;case"second":if(i=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!i.test(l))throw new errorSupport.L8(errorSupport.Z7.IllegalInterval);{p[o.start.period]=parseFloat(l.split(" ")[0]);const e=l.split(" ")[1].split(":");p.hour=parseFloat(e[0]),p.minute=parseFloat(e[1]),s(p,e[2])}break;default:throw new errorSupport.L8(errorSupport.Z7.IllegalInterval)}break;case"hour":switch(o.end.period){case"minute":if(i=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!i.test(l))throw new errorSupport.L8(errorSupport.Z7.IllegalInterval);p.hour=parseFloat(l.split(":")[0]),p.minute=parseFloat(l.split(":")[1]);break;case"second":if(i=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!i.test(l))throw new errorSupport.L8(errorSupport.Z7.IllegalInterval);{const e=l.split(":");p.hour=parseFloat(e[0]),p.minute=parseFloat(e[1]),s(p,e[2])}break;default:throw new errorSupport.L8(errorSupport.Z7.IllegalInterval)}break;case"minute":if("second"!==o.end.period)throw new errorSupport.L8(errorSupport.Z7.IllegalInterval);if(i=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!i.test(l))throw new errorSupport.L8(errorSupport.Z7.IllegalInterval);{const e=l.split(":");p.minute=parseFloat(e[0]),s(p,e[1])}break;default:throw new errorSupport.L8(errorSupport.Z7.IllegalInterval)}}return p}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}var SqlTimestampOffset=__webpack_require__("./node_modules/@arcgis/core/core/sql/SqlTimestampOffset.js"),TimeOnly=__webpack_require__("./node_modules/@arcgis/core/core/sql/TimeOnly.js"),UnknownTimeZone=__webpack_require__("./node_modules/@arcgis/core/core/sql/UnknownTimeZone.js"),luxon=__webpack_require__("./node_modules/luxon/src/luxon.js");const d=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,m=/^(\d{1,2}):(\d{1,2})$/,I=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,f=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,c=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,w=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,h=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function T(n,e){if(e instanceof luxon.bo)return e===UnknownTimeZone.GB.instance?luxon.c9.fromMillis(n.getTime(),{zone:UnknownTimeZone.GB.instance}):luxon.c9.fromJSDate(n,{zone:e});switch(e){case"system":case"local":case null:return luxon.c9.fromJSDate(n);default:return"unknown"===e?.toLowerCase()?luxon.c9.fromMillis(n.getTime(),{zone:UnknownTimeZone.GB.instance}):luxon.c9.fromJSDate(n,{zone:e})}}function v(n){return SqlInterval_a.isInterval(n)}function y(n){return luxon.c9.isDateTime(n)}function S(e){return DateOnly.n.isDateOnly(e)}function x(n){return TimeOnly.k.isTimeOnly(n)}function j(n){return SqlTimestampOffset.g.isTimestampOffset(n)}function O(n){let r=d.exec(n);if(null!==r){const[,n,a,i]=r,o=TimeOnly.k.fromParts(parseInt(n,10),parseInt(a,10),parseInt(i,10),0);if(null!==o)return o;throw new errorSupport.L8(errorSupport.Z7.InvalidTime)}if(r=m.exec(n),null!==r){const[,n,a]=r,i=TimeOnly.k.fromParts(parseInt(n,10),parseInt(a,10),0,0);if(null!==i)return i;throw new errorSupport.L8(errorSupport.Z7.InvalidTime)}if(r=I.exec(n),null!==r){const[,n,a,i,o]=r,l=TimeOnly.k.fromParts(parseInt(n,10),parseInt(a,10),parseInt(i,10),parseInt(o,10));if(null!==l)return l;throw new errorSupport.L8(errorSupport.Z7.InvalidTime)}throw new errorSupport.L8(errorSupport.Z7.InvalidTime)}function sqlDateParsingUtils_D(n,r,s=!1){let i=u.exec(n);if(null!==i){const[,n,a,s,l,d,m,I]=i,f=luxon.c9.fromObject({year:parseInt(n,10),month:parseInt(a,10),day:parseInt(s,10),hour:parseInt(l,10),minute:parseInt(d,10),second:parseInt(m,10),millisecond:I?parseInt(I.replace(".",""),10):0},{zone:(0,UnknownTimeZone.Qo)(r)});if(!1===f.isValid)throw new errorSupport.L8(errorSupport.Z7.InvalidTimeStamp);return f}if(i=c.exec(n),null!==i){const[,n,r,s,o,l,p,d,m,I,f]=i,u=SqlTimestampOffset.g.fromParts(parseInt(n,10),parseInt(r,10),parseInt(s,10),parseInt(o,10),parseInt(l,10),parseInt(p,10),d?parseInt(d.replace(".",""),10):0,"-"===m,parseInt(I,10),parseInt(f,10));if(!1===u.isValid)throw new errorSupport.L8(errorSupport.Z7.InvalidTimeStamp);return u}if(i=w.exec(n),null!==i){const[,n,r,s,o,l,p,d,m]=i,I=SqlTimestampOffset.g.fromParts(parseInt(n,10),parseInt(r,10),parseInt(s,10),parseInt(o,10),parseInt(l,10),0,0,"-"===p,parseInt(d,10),parseInt(m,10));if(!1===I.isValid)throw new errorSupport.L8(errorSupport.Z7.InvalidTimeStamp);return I}if(i=h.exec(n),null!==i){const[,n,a,s,l,d]=i,m=luxon.c9.fromObject({year:parseInt(n,10),month:parseInt(a,10),day:parseInt(s,10),hour:parseInt(l,10),minute:parseInt(d,10),second:0},{zone:(0,UnknownTimeZone.Qo)(r)});if(!1===m.isValid)throw new errorSupport.L8(errorSupport.Z7.InvalidTimeStamp);return m}if(i=f.exec(n),null!==i){const[,n,a,s]=i,l=luxon.c9.fromObject({year:parseInt(n,10),month:parseInt(a,10),day:parseInt(s,10),hour:0,minute:0,second:0},{zone:(0,UnknownTimeZone.Qo)(r)});if(!1===l.isValid)throw new errorSupport.L8(errorSupport.Z7.InvalidTimeStamp);return l}throw new errorSupport.L8(errorSupport.Z7.InvalidTimeStamp)}function $(r,a){const s=f.exec(r);if(null===s)try{return sqlDateParsingUtils_D(r,a)}catch{throw new errorSupport.L8(errorSupport.Z7.InvalidDate)}const[,i,o,l]=s,p=DateOnly.n.fromParts(parseInt(i,10),parseInt(o,10),parseInt(l,10));if(null===p)throw new errorSupport.L8(errorSupport.Z7.InvalidDate);return p}var mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),string=__webpack_require__("./node_modules/@arcgis/core/core/string.js"),guards=__webpack_require__("./node_modules/@arcgis/core/support/guards.js");function sqlCompareUtils_h(r){return!!y(r)||!!j(r)}function sqlCompareUtils_O(r){return!!(y(r)||S(r)||j(r)||x(r))}function sqlCompareUtils_v(o){if(y(o))return o.toMillis();if(S(o))return o.toNumber();if(j(o))return o.toMilliseconds();throw new errorSupport.L8(errorSupport.Z7.InvalidDataType)}function sqlCompareUtils_I(l,w,m,p){if(null==l||null==w)return null;if((0,guards.Et)(l)){if((0,guards.Et)(w))return sqlCompareUtils_T(l,w,m);if((0,guards.Kg)(w))return function D(r,e,t){const n=parseFloat(e);if(!isNaN(n))return sqlCompareUtils_T(r,n,t);const i=r.toString();switch(t){case"<>":return i!==e;case"=":return i===e;case">":return i>e;case"<":return i<e;case">=":return i>=e;case"<=":return i<=e}}(l,w,m);if(sqlCompareUtils_O(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if(S(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}else if((0,guards.Kg)(l)){if((0,guards.Et)(w))return function M(r,e,t){const n=parseFloat(r);if(!isNaN(n))return sqlCompareUtils_T(n,e,t);const i=e.toString();switch(t){case"<>":return r!==i;case"=":return r===i;case">":return r>i;case"<":return r<i;case">=":return r>=i;case"<=":return r<=i}}(l,w,m);if((0,guards.Kg)(w))return function z(r,e,t){switch(t){case"<>":return r!==e;case"=":return r===e;case">":return r>e;case"<":return r<e;case">=":return r>=e;case"<=":return r<=e}}(l,w,m);if(y(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if(S(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if(x(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if(j(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}else if(y(l)){if(sqlCompareUtils_h(w)){if((0,UnknownTimeZone.Y4)(l.zone)){if(luxon.c9.isDateTime(w)&&!(0,UnknownTimeZone.Y4)(w.zone))return sqlCompareUtils_j(l,w,m);if(SqlTimestampOffset.g.isTimestampOffset(w))return sqlCompareUtils_j(l,w,m)}else if(luxon.c9.isDateTime(w)&&(0,UnknownTimeZone.Y4)(w.zone)){if(!(0,UnknownTimeZone.Y4)(l.zone))return sqlCompareUtils_j(l,w,m);if(SqlTimestampOffset.g.isTimestampOffset(l))return sqlCompareUtils_j(l,w,m)}return sqlCompareUtils_T(sqlCompareUtils_v(l),sqlCompareUtils_v(w),m)}if((0,guards.Kg)(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if(S(w))return function N(r,e,t){const n=e.toDateTimeLuxon(r.zone);return sqlCompareUtils_T((r=r.startOf("day")).toMillis(),n.toMillis(),t)}(l,w,m);if(x(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if((0,guards.Et)(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}else if(S(l)){if(j(w))return function b(r,e,t){const n=r.toDateTimeLuxon(e.toDateTime().zone);return e=e.startOfDay(),sqlCompareUtils_T(n.toMillis(),e.toMilliseconds(),t)}(l,w,m);if(y(w))return function sqlCompareUtils_x(r,e,t){const n=r.toDateTimeLuxon(e.zone);return e=e.startOf("day"),sqlCompareUtils_T(n.toMillis(),e.toMillis(),t)}(l,w,m);if((0,guards.Kg)(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if(S(w))return sqlCompareUtils_T(l.toNumber(),w.toNumber(),m);if(x(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if((0,guards.Et)(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}else if(x(l)){if(x(w))return sqlCompareUtils_T(l.toNumber(),w.toNumber(),m);if((0,guards.Kg)(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if((0,guards.Et)(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if(S(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if(sqlCompareUtils_h(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}else if(j(l)){if(sqlCompareUtils_h(w))return luxon.c9.isDateTime(w)&&(0,UnknownTimeZone.Y4)(w.zone)?sqlCompareUtils_j(l,w,m):sqlCompareUtils_T(sqlCompareUtils_v(l),sqlCompareUtils_v(w),m);if((0,guards.Kg)(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if(S(w))return function sqlCompareUtils_y(r,e,t){const n=e.toDateTimeLuxon(r.toDateTime().zone);return sqlCompareUtils_T((r=r.startOfDay()).toMilliseconds(),n.toMillis(),t)}(l,w,m);if(x(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);if((0,guards.Et)(w))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}switch(m){case"<>":return l!==w;case"=":return l===w;case">":return l>w;case"<":return l<w;case">=":return l>=w;case"<=":return l<=w}}function sqlCompareUtils_T(r,e,t){switch(t){case"<>":return r!==e;case"=":return r===e;case">":return r>e;case"<":return r<e;case">=":return r>=e;case"<=":return r<=e}}function sqlCompareUtils_j(r,e,t){SqlTimestampOffset.g.isTimestampOffset(r)&&(r=r.toDateTime()),SqlTimestampOffset.g.isTimestampOffset(e)&&(e=e.toDateTime());const n=g(r),i=g(e);switch(t){case"<>":return n!==i;case"=":return n===i;case">":return n>i;case"<":return n<i;case">=":return n>=i;case"<=":return n<=i}}function g(r){return 321408e5*r.year+26784e5*r.month+864e5*r.day+36e5*r.hour+6e4*r.minute+1e3*r.second+r.millisecond}function StandardizedFunctions_p(a,n,e){const l=StandardizedFunctions_T[a.toLowerCase()];if(null==l)throw new errorSupport.L8(errorSupport.Z7.FunctionNotRecognized);if(n.length<l.minParams||n.length>l.maxParams)throw new errorSupport.L8(errorSupport.Z7.InvalidParameterCount,{name:a.toUpperCase()});return l.evaluate(n,e)}function StandardizedFunctions_M(a){return!((0,guards.$P)(a)||S(a)||y(a)||x(a)||j(a))}function StandardizedFunctions_x(a){return S(a)||x(a)?a.toString():j(a)?a.toSQLValue():y(a)?0===a.millisecond?a.toFormat("yyyy-LL-dd HH:mm:ss"):a.toSQL({includeOffset:!1}):(0,guards.$P)(a)?StandardizedFunctions_x(luxon.c9.fromJSDate(a)):a.toString()}const StandardizedFunctions_T={extract:{minParams:2,maxParams:2,evaluate:([a,n])=>{if(null==n)return null;if((0,guards.$P)(n))switch(a.toUpperCase()){case"SECOND":return n.getSeconds();case"MINUTE":return n.getMinutes();case"HOUR":return n.getHours();case"DAY":return n.getDate();case"MONTH":return n.getMonth()+1;case"YEAR":return n.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0}else if(y(n))switch(a.toUpperCase()){case"SECOND":return n.second;case"MINUTE":return n.minute;case"HOUR":return n.hour;case"DAY":return n.day;case"MONTH":return n.month;case"YEAR":return n.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new errorSupport.L8(errorSupport.Z7.InvalidFunctionParameters,{function:"EXTRACT"})}else if(S(n))switch(a.toUpperCase()){case"DAY":return n.day;case"MONTH":return n.month;case"YEAR":return n.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new errorSupport.L8(errorSupport.Z7.InvalidFunctionParameters,{function:"EXTRACT"})}else if(x(n))switch(a.toUpperCase()){case"SECOND":return n.second;case"MINUTE":return n.minute;case"HOUR":return n.hour}else if(j(n))switch(a.toUpperCase()){case"SECOND":return n.second;case"MINUTE":return n.minute;case"HOUR":return n.hour;case"DAY":return n.day;case"MONTH":return n.month;case"YEAR":return n.year;case"TIMEZONE_HOUR":return n.timezoneOffsetHour;case"TIMEZONE_MINUTE":return n.timezoneOffsetMinutes}throw new errorSupport.L8(errorSupport.Z7.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:a=>{if(2===a.length){const[n,e]=a;return null==n||null==e?null:n.toString().substring(e-1)}if(3===a.length){const[n,e,t]=a;return null==n||null==e||null==t?null:t<=0?"":n.toString().substring(e-1,e+t-1)}}},position:{minParams:2,maxParams:2,evaluate:([a,n])=>null==a||null==n?null:n.indexOf(a)+1},trim:{minParams:2,maxParams:3,evaluate:a=>{const e=3===a.length,l=e?a[1]:" ",u=e?a[2]:a[1];if(null==l||null==u)return null;const s=`(${(0,string.Cj)(l)})`;switch(a[0]){case"BOTH":return u.replaceAll(new RegExp(`^${s}*|${s}*$`,"g"),"");case"LEADING":return u.replaceAll(new RegExp(`^${s}*`,"g"),"");case"TRAILING":return u.replaceAll(new RegExp(`${s}*$`,"g"),"")}throw new errorSupport.L8(errorSupport.Z7.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.abs(a[0])},ceiling:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.ceil(a[0])},floor:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.floor(a[0])},log:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])},log10:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sin(a[0])},cos:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.cos(a[0])},tan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.tan(a[0])},asin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.asin(a[0])},acos:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.acos(a[0])},atan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.atan(a[0])},sign:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0]>0?1:a[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]**a[1]},mod:{minParams:2,maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]%a[1]},round:{minParams:1,maxParams:2,evaluate:a=>{const n=a[0],e=2===a.length?10**a[1]:1;return null==n?null:Math.round(n*e)/e}},truncate:{minParams:1,maxParams:2,evaluate:n=>null==n[0]?null:1===n.length||0===n[1]?Math.trunc(n[0]):(0,mathUtils.pF)("trunc",n[0],-Number(n[1]))},char_length:{minParams:1,maxParams:1,evaluate:a=>(0,guards.Kg)(a[0])?a[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:a=>{let n="";for(let e=0;e<a.length;e++){if(null==a[e])return null;n+=a[e].toString()}return n}},lower:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:a=>{for(const n of a)if(null!==n)return n;return null}},cosh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.cosh(a[0])},sinh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sinh(a[0])},tanh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.tanh(a[0])},nullif:{minParams:2,maxParams:2,evaluate:(a,n)=>sqlCompareUtils_I(a[0],a[1],"=")?null:a[0]},cast:{minParams:2,maxParams:2,evaluate:(a,n)=>{const e=a[0],l=a[1];if(null===e)return null;switch(l.type){case"integer":{if(!StandardizedFunctions_M(e))throw new errorSupport.L8(errorSupport.Z7.CannotCastValue);const a=parseInt(e,10);if(isNaN(a))throw new errorSupport.L8(errorSupport.Z7.CannotCastValue);return a}case"smallint":{if(!StandardizedFunctions_M(e))throw new errorSupport.L8(errorSupport.Z7.CannotCastValue);const a=parseInt(e,10);if(isNaN(a))throw new errorSupport.L8(errorSupport.Z7.CannotCastValue);if(a>32767||a<-32767)throw new errorSupport.L8(errorSupport.Z7.CannotCastValue);return a}case"float":case"real":{if(!StandardizedFunctions_M(e))throw new errorSupport.L8(errorSupport.Z7.CannotCastValue);const a=parseFloat(e);if(isNaN(a))throw new errorSupport.L8(errorSupport.Z7.CannotCastValue);return a}case"time":return function StandardizedFunctions_N(a){if((0,guards.$P)(a))return TimeOnly.k.fromDateJS(a);if(y(a))return TimeOnly.k.fromDateTime(a);if(S(a))throw new errorSupport.L8(errorSupport.Z7.CannotCastValue);if(x(a))return a;if(j(a))return TimeOnly.k.fromSqlTimeStampOffset(a);if((0,guards.Kg)(a))return O(a);throw new errorSupport.L8(errorSupport.Z7.CannotCastValue)}(e);case"date":return function E(a){if((0,guards.$P)(a))return DateOnly.n.fromDateJS(a);if(y(a))return DateOnly.n.fromParts(a.year,a.month,a.day);if(S(a))return a;if(x(a))throw new errorSupport.L8(errorSupport.Z7.CannotCastValue);if(j(a)&&null===DateOnly.n.fromParts(a.year,a.month,a.day))throw new errorSupport.L8(errorSupport.Z7.CannotCastValue);if((0,guards.Kg)(a)){const n=DateOnly.n.fromReader(a);if(null!==n&&n.isValid)return n}throw new errorSupport.L8(errorSupport.Z7.CannotCastValue)}(e);case"timestamp":return function StandardizedFunctions_v(a,n,e){if((0,guards.$P)(a))return T(a,n);if(y(a))return a;if(S(a))return a.toDateTimeLuxon("unknown");if(x(a))throw new errorSupport.L8(errorSupport.Z7.CannotCastValue);if(j(a))return a;if((0,guards.Kg)(a))return sqlDateParsingUtils_D(a,"unknown",e);throw new errorSupport.L8(errorSupport.Z7.CannotCastValue)}(e,n,!0===l.withtimezone);case"varchar":{const a=StandardizedFunctions_x(e);if(a.length>l.size)throw new errorSupport.L8(errorSupport.Z7.CannotCastValue);return a}default:throw new errorSupport.L8(errorSupport.Z7.InvalidDataType)}}}};function sqlArithmeticUtils_d(l,d,sn,un){if("||"===l)return StandardizedFunctions_p("concat",[d,sn],un);if(null===d||null===sn)return null;if((0,guards.Et)(d)){if((0,guards.Et)(sn))return sqlArithmeticUtils_f(d,sn,l);if(v(sn))return function sqlArithmeticUtils_M(e,i,t){switch(t){case"+":return SqlInterval_a.createFromMilliseconds(e+i.valueInMilliseconds());case"-":return SqlInterval_a.createFromMilliseconds(e-i.valueInMilliseconds());case"*":return SqlInterval_a.createFromMilliseconds(e*i.valueInMilliseconds());case"/":return SqlInterval_a.createFromMilliseconds(e/i.valueInMilliseconds())}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(x(sn))return function sqlArithmeticUtils_S(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(S(sn))return function U(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(j(sn))return function sqlArithmeticUtils_N(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(y(sn))return function sqlArithmeticUtils_j(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if((0,guards.Kg)(sn))return function sqlArithmeticUtils_g(e,i,t){const o=parseFloat(i);if(isNaN(o))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);return sqlArithmeticUtils_f(e,o,t)}(d,sn,l);throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}if(S(d)){if((0,guards.Et)(sn))return function sqlArithmeticUtils_x(e,i,t){const o=1e3*i*24*60*60;switch(t){case"+":return e.plus("milliseconds",o);case"-":return e.plus("milliseconds",-1*o)}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(v(sn))return function sqlArithmeticUtils_T(e,i,t){switch(t){case"+":return e.plus("milliseconds",i.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*i.valueInMilliseconds())}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(x(sn))return function sqlArithmeticUtils_E(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(S(sn))return function B(e,i,t){if("-"===t)return e.toDateTimeLuxon("UTC").diff(i.toDateTimeLuxon("UTC")).as("days");throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(j(sn))return function A(e,i,t){if("-"===t)return e.toDateTimeLuxon(i.toDateTime().zone).diff(i.toDateTime()).as("days");throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(y(sn))return function k(e,i,t){if("-"===t)return e.toDateTimeLuxon(i.zone).diff(i).as("days");throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if((0,guards.Kg)(sn))return function _(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}if(x(d)){if((0,guards.Et)(sn))return function L(e,i,t){const o=1e3*i*24*60*60;switch(t){case"+":return e.plus("milliseconds",o);case"-":return e.plus("milliseconds",-1*o)}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(v(sn))return function sqlArithmeticUtils_p(e,i,t){switch(t){case"+":return e.plus("milliseconds",i.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*i.valueInMilliseconds())}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(x(sn))return function W(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(S(sn))return function R(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(j(sn))return function V(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(y(sn))return function Q(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if((0,guards.Kg)(sn))return function nn(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}if(v(d)){if((0,guards.Et)(sn))return function sqlArithmeticUtils_m(e,i,t){switch(t){case"+":return SqlInterval_a.createFromMilliseconds(e.valueInMilliseconds()+i);case"-":return SqlInterval_a.createFromMilliseconds(e.valueInMilliseconds()-i);case"*":return SqlInterval_a.createFromMilliseconds(e.valueInMilliseconds()*i);case"/":return SqlInterval_a.createFromMilliseconds(e.valueInMilliseconds()/i)}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(v(sn))return function sqlArithmeticUtils_O(e,i,t){switch(t){case"+":return SqlInterval_a.createFromMilliseconds(e.valueInMilliseconds()+i.valueInMilliseconds());case"-":return SqlInterval_a.createFromMilliseconds(e.valueInMilliseconds()-i.valueInMilliseconds());case"*":return SqlInterval_a.createFromMilliseconds(e.valueInMilliseconds()*i.valueInMilliseconds());case"/":return SqlInterval_a.createFromMilliseconds(e.valueInMilliseconds()/i.valueInMilliseconds())}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(x(sn))return function sqlArithmeticUtils_v(e,i,t){if("+"===t)return i.plus("milliseconds",e.valueInMilliseconds());throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(S(sn))return function sqlArithmeticUtils_I(e,i,t){if("+"===t)return i.plus("milliseconds",e.valueInMilliseconds());throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(j(sn))return function sqlArithmeticUtils_h(e,i,t){if("+"===t)return i.addMilliseconds(e.valueInMilliseconds());throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(y(sn))return function sqlArithmeticUtils_w(e,i,t){switch(t){case"+":return i.plus({milliseconds:e.valueInMilliseconds()});case"-":return e.valueInMilliseconds()-i.toMillis()}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if((0,guards.Kg)(sn))return function P(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}if(y(d)){if((0,guards.Et)(sn))return function sqlArithmeticUtils_y(e,i,t){const o=1e3*i*24*60*60;switch(t){case"+":return e.plus({milliseconds:o});case"-":return e.minus({milliseconds:o})}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(v(sn))return function sqlArithmeticUtils_D(e,i,t){switch(t){case"+":return e.plus({milliseconds:i.valueInMilliseconds()});case"-":return e.minus({milliseconds:i.valueInMilliseconds()})}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(x(sn))return function sqlArithmeticUtils_$(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(S(sn))return function Y(e,i,t){if("-"===t)return e.diff(i.toDateTimeLuxon(e.zone)).as("days");throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(j(sn))return function Z(e,i,t){if("-"===t)return e.diff(i.toDateTime()).as("days");throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(y(sn))return function X(e,i,t){if("-"===t)return e.diff(i).as("days");throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if((0,guards.Kg)(sn))return function rn(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}if(j(d)){if((0,guards.Et)(sn))return function sqlArithmeticUtils_z(e,i,t){const o=1e3*i*24*60*60;switch(t){case"+":return e.addMilliseconds(o);case"-":return e.addMilliseconds(-1*o)}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(v(sn))return function F(e,i,t){switch(t){case"+":return e.addMilliseconds(i.valueInMilliseconds());case"-":return e.addMilliseconds(-1*i.valueInMilliseconds())}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(x(sn))return function G(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(S(sn))return function H(e,i,t){if("-"===t)return e.toDateTime().diff(i.toDateTimeLuxon(e.toDateTime().zone)).as("days");throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(j(sn))return function K(e,i,t){if("-"===t)return e.toDateTime().diff(i.toDateTime()).as("days");throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if(y(sn))return function J(e,i,t){if("-"===t)return e.toDateTime().diff(i).as("days");throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);if((0,guards.Kg)(sn))return function en(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}if((0,guards.Kg)(d)){if((0,guards.Et)(sn))return function q(e,i,t){const o=parseFloat(e);if(isNaN(o))throw new errorSupport.L8(errorSupport.Z7.InvalidOperator);return sqlArithmeticUtils_f(o,i,t)}(d,sn,l);if(v(sn))return function sqlArithmeticUtils_b(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(x(sn))return function tn(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(S(sn))return function on(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(j(sn))return function ln(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if(y(sn))return function an(e,i,t){throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}();if((0,guards.Kg)(sn))return function C(e,i,t){if("+"===t)return e+i;throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}(d,sn,l);throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}function sqlArithmeticUtils_f(e,i,t){switch(t){case"+":return e+i;case"-":return e-i;case"*":return e*i;case"/":return e/i}throw new errorSupport.L8(errorSupport.Z7.InvalidOperator)}function t(n,r,e,o){var u=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(u,t.prototype),u.expected=r,u.found=e,u.location=o,u.name="SyntaxError",u}function WhereGrammar_r(n,t,r){return r=r||" ",n.length>t?n:(t-=n.length,n+(r+=r.repeat(t)).slice(0,t))}function e(n,r){var e,o={},u=(r=void 0!==r?r:{}).grammarSource,i={start:uu},a=uu,c="!",s="=",f=">=",l=">",p="<=",v="<>",d="!=",y="||",h="@",g="'",A="N'",m="''",C=".",b="null",E="true",L="false",T="in",w="is",x="like",N="escape",I="not",R="and",O="or",F="between",S="from",M="for",$="substring",U="extract",_="trim",D="position",H="timestamp",P="date",j="time",Z="leading",k="trailing",z="both",G="cast",B="as",q="integer",V="int",W="smallint",Y="float",K="real",X="varchar",J="to",Q="interval",nn="year",tn="timezone_hour",rn="timezone_minute",en="month",on="day",un="hour",an="minute",cn="second",sn="case",fn="end",ln="when",pn="then",vn="else",dn=",",yn="(",hn=")",gn="`",An=/^[<-=]/,mn=/^[+\-]/,Cn=/^[*\/]/,bn=/^[A-Za-z_\x80-\uFFFF]/,En=/^[A-Za-z0-9_]/,Ln=/^[A-Za-z0-9_.\x80-\uFFFF]/,Tn=/^["]/,wn=/^[^']/,xn=/^[0-9]/,Nn=/^[eE]/,In=/^[ \t\n\r]/,Rn=/^[^`]/,On=Xo("!",!1),Fn=Xo("=",!1),Sn=Xo(">=",!1),Mn=Xo(">",!1),$n=Xo("<=",!1),Un=Xo("<>",!1),_n=Jo([["<","="]],!1,!1),Dn=Xo("!=",!1),Hn=Jo(["+","-"],!1,!1),Pn=Xo("||",!1),jn=Jo(["*","/"],!1,!1),Zn=Jo([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),kn=Jo([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),zn=Jo([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),Gn=Jo(['"'],!1,!1),Bn=Xo("@",!1),qn=Xo("'",!1),Vn=Xo("N'",!1),Wn=Xo("''",!1),Yn=Jo(["'"],!0,!1),Kn=Xo(".",!1),Xn=Jo([["0","9"]],!1,!1),Jn=Jo(["e","E"],!1,!1),Qn=Xo("NULL",!0),nt=Xo("TRUE",!0),tt=Xo("FALSE",!0),rt=Xo("IN",!0),et=Xo("IS",!0),ot=Xo("LIKE",!0),ut=Xo("ESCAPE",!0),it=Xo("NOT",!0),at=Xo("AND",!0),ct=Xo("OR",!0),st=Xo("BETWEEN",!0),ft=Xo("FROM",!0),lt=Xo("FOR",!0),pt=Xo("SUBSTRING",!0),vt=Xo("EXTRACT",!0),dt=Xo("TRIM",!0),yt=Xo("POSITION",!0),ht=Xo("TIMESTAMP",!0),gt=Xo("DATE",!0),At=Xo("TIME",!0),mt=Xo("LEADING",!0),Ct=Xo("TRAILING",!0),bt=Xo("BOTH",!0),Et=Xo("CAST",!0),Lt=Xo("AS",!0),Tt=Xo("INTEGER",!0),wt=Xo("INT",!0),xt=Xo("SMALLINT",!0),Nt=Xo("FLOAT",!0),It=Xo("REAL",!0),Rt=Xo("VARCHAR",!0),Ot=Xo("TO",!0),Ft=Xo("INTERVAL",!0),St=Xo("YEAR",!0),Mt=Xo("TIMEZONE_HOUR",!0),$t=Xo("TIMEZONE_MINUTE",!0),Ut=Xo("MONTH",!0),_t=Xo("DAY",!0),Dt=Xo("HOUR",!0),Ht=Xo("MINUTE",!0),Pt=Xo("SECOND",!0),jt=Xo("CASE",!0),Zt=Xo("END",!0),kt=Xo("WHEN",!0),zt=Xo("THEN",!0),Gt=Xo("ELSE",!0),Bt=Xo(",",!1),qt=Xo("(",!1),Vt=Xo(")",!1),Wt=Jo([" ","\t","\n","\r"],!1,!1),Yt=Xo("`",!1),Kt=Jo(["`"],!0,!1),Xt=function(n){return n},Jt=function(n){return{type:"expression-list",location:Yo(),value:n}},Qt=function(n,t,r){return{op:t,expr:r,location:Yo()}},nr=function(n,t){return wa(n,t)},tr=function(n,t,r){return{op:t,expr:r,location:Yo()}},rr=function(n,t){return wa(n,t)},er=function(n){return function Ea(n,t,r){return{type:"unary-expression",location:r,operator:n,expr:t}}("NOT",n,Yo())},or=function(n,t){return""==t||null==t||null==t?n:"arithmetic"==t.type?wa(n,t.tail):La(t.op,n,t.right,t.escape,Yo())},ur=function(n,t){return{op:n,expr:t,location:Yo()}},ir=function(n){return{type:"arithmetic",tail:n}},ar=function(n,t){return{op:n+"NOT",right:t}},cr=function(n,t){return{op:n,right:t}},sr=function(n,t,r){return Ta(Yo(),t,r)},fr=function(n,t){return{op:"NOT"+n,right:t}},lr=function(n,t,r){return Ta(Yo(),t,r)},pr=function(n,t){return{op:n,right:t}},vr=function(n){return n[0]+" "+n[2]},dr=function(n){return n[0]+" "+n[2]},yr=function(n,t,r){return{op:n,right:t,escape:r.value}},hr=function(n,t){return{op:n,right:t,escape:""}},gr=function(n,t){return{op:n,right:t}},Ar=function(n,t){return{op:n,right:t}},mr=function(n,t,r){return{op:t,expr:r,location:Yo()}},Cr=function(n,t){return wa(n,t)},br=function(n,t,r){return{op:t,expr:r,location:Yo()}},Er=function(n,t){return wa(n,t)},Lr=function(n){return n.paren=!0,n},Tr=function(n){return/^CURRENT_DATE$/i.test(n)?{type:"current-time",location:Yo(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(n)?{type:"current-time",location:Yo(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(n)?{type:"current-time",location:Yo(),mode:"time"}:/^CURRENT_USER$/i.test(n)?{type:"current-user",location:Yo()}:{type:"column-reference",location:Yo(),table:"",column:n}},wr=function(n){return{type:"column-reference",location:Yo(),table:"",column:n,delimited:!0}},xr=function(n){return n},Nr=function(n,t){return n+t.join("")},Ir=function(n,t){return n+t.join("")},Rr=function(n){return n},Or=function(n){return n.join("")},Fr=function(){return'"'},Sr=function(n){return{type:"parameter",location:Yo(),value:n[1]}},Mr=function(n,t){return Ta(Yo(),n,t)},$r=function(n,t){return Ta(Yo(),n,t)},Ur=function(n){return{type:"function",location:Yo(),name:"extract",args:n}},_r=function(n,t,r){return Ta(Yo(),n,t,...r?[r]:[])},Dr=function(n,t,r){return Ta(Yo(),n,t,r)},Hr=function(n){return{type:"function",location:Yo(),name:"substring",args:n}},Pr=function(n,t){return Ta(Yo(),n,t)},jr=function(n,t){return Ta(Yo(),n,t)},Zr=function(n){return{type:"function",location:Yo(),name:"cast",args:n}},kr=function(){return{type:"data-type",location:Yo(),value:{type:"integer"}}},zr=function(){return{type:"data-type",location:Yo(),value:{type:"smallint"}}},Gr=function(){return{type:"data-type",location:Yo(),value:{type:"float"}}},Br=function(){return{type:"data-type",location:Yo(),value:{type:"real"}}},qr=function(){return{type:"data-type",location:Yo(),value:{type:"date"}}},Vr=function(){return{type:"data-type",location:Yo(),value:{type:"timestamp"}}},Wr=function(){return{type:"data-type",location:Yo(),value:{type:"time"}}},Yr=function(n){return{type:"data-type",location:Yo(),value:{type:"varchar",size:parseInt(n)}}},Kr=function(n,t,r){return Ta(Yo(),n,t,r)},Xr=function(n,t){return Ta(Yo(),n,t)},Jr=function(n){return{type:"function",location:Yo(),name:"trim",args:n}},Qr=function(n){return{type:"string",location:Yo(),value:n??"BOTH"}},ne=function(n,t){return Ta(Yo(),n,t)},te=function(n,t){return Ta(Yo(),n,t)},re=function(n){return{type:"function",location:Yo(),name:"position",args:n}},ee=function(n,t){return{type:"function",location:Yo(),name:n,args:t}},oe=function(n){return{type:"string",location:Yo(),value:n}},ue=function(n){return"string"===n.type&&function xa(n){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(n)&&Ko("Timestamp literal is invalid")}(n.value),{type:"timestamp",location:Yo(),value:n.value}},ie=function(n){return"string"===n.type&&function Na(n){!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(n)&&Ko("Time literal is invalid")}(n.value),{type:"time",location:Yo(),value:n.value}},ae=function(n,t,r){return{type:"interval",location:Yo(),value:t,qualifier:r,op:n}},ce=function(n,t){return{type:"interval",location:Yo(),value:n,qualifier:t,op:""}},se=function(n,t){return{type:"interval-qualifier",location:Yo(),start:n,end:t}},fe=function(n,t){return{type:"interval-period",location:Yo(),period:n.value,precision:t,secondary:null}},le=function(n){return{type:"interval-period",location:Yo(),period:n.value,precision:null,secondary:null}},pe=function(n){return{type:"interval-period",location:Yo(),period:n.value,precision:null,secondary:null}},ve=function(n,t){return{type:"interval-period",location:Yo(),period:"second",precision:n,secondary:t}},de=function(n){return{type:"interval-period",location:Yo(),period:"second",precision:n,secondary:null}},ye=function(){return{type:"interval-period",location:Yo(),period:"second",precision:null,secondary:null}},he=function(n,t){return{type:"interval-period",location:Yo(),period:n.value,precision:t,secondary:null}},ge=function(n){return{type:"interval-period",location:Yo(),period:n.value,precision:null,secondary:null}},Ae=function(n,t){return{type:"interval-period",location:Yo(),period:"second",precision:n,secondary:t}},me=function(n){return{type:"interval-period",location:Yo(),period:"second",precision:n,secondary:null}},Ce=function(){return{type:"interval-period",location:Yo(),period:"second",precision:null,secondary:null}},be=function(){return{type:"string",location:Yo(),value:"day"}},Ee=function(){return{type:"string",location:Yo(),value:"hour"}},Le=function(){return{type:"string",location:Yo(),value:"minute"}},Te=function(){return{type:"string",location:Yo(),value:"month"}},we=function(){return{type:"string",location:Yo(),value:"year"}},xe=function(n){return parseFloat(n)},Ne=function(n){return parseFloat(n)},Ie=function(n){return"string"===n.type&&function Ia(n){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(n)&&Ko("Date literal is invalid")}(n.value),{type:"date",location:Yo(),value:n.value}},Re=function(){return{type:"null",location:Yo(),value:null}},Oe=function(){return{type:"boolean",location:Yo(),value:!0}},Fe=function(){return{type:"boolean",location:Yo(),value:!1}},Se=function(){return"'"},Me=function(n){return{type:"string",location:Yo(),value:n.join("")}},$e=function(n,t){return{type:"case-expression",location:Yo(),format:"simple",operand:n,clauses:t,else:null,elseLocation:null}},Ue=function(n,t,r){return{type:"case-expression",location:Yo(),format:"simple",operand:n,clauses:t,else:r.value,elseLocation:r.location}},_e=function(n){return{type:"case-expression",location:Yo(),format:"searched",clauses:n,else:null,elseLocation:null}},De=function(n,t){return{type:"case-expression",location:Yo(),format:"searched",clauses:n,else:t.value,elseLocation:t.location}},He=function(n,t){return{type:"when-clause",location:Yo(),operand:n,value:t}},Pe=function(n,t){return{type:"when-clause",location:Yo(),operand:n,value:t}},je=function(n){return{type:"else-clause",location:Yo(),value:n}},Ze=function(n){return{type:"number",location:Yo(),value:n}},ke=function(n,t,r){return parseFloat(n+t+r)},ze=function(n,t){return parseFloat(n+t)},Ge=function(n,t){return parseFloat(n+t)},Be=function(n){return parseFloat(n)},qe=function(n,t){return n[0]+t},Ve=function(n){return"."+(null!=n?n:"")},We=function(n,t){return n+t},Ye=function(n){return n.join("")},Ke=function(n,t){return"e"+(null===t?"":t)},Xe=function(){return"IN"},Je=function(){return"IS"},Qe=function(){return"LIKE"},no=function(){return"ESCAPE"},to=function(){return"NOT"},ro=function(){return"AND"},eo=function(){return"OR"},oo=function(){return"BETWEEN"},uo=function(){return"FROM"},io=function(){return"FOR"},ao=function(){return"SUBSTRING"},co=function(){return"EXTRACT"},so=function(){return"TRIM"},fo=function(){return"POSITION"},lo=function(){return"TIMESTAMP"},po=function(){return"DATE"},vo=function(){return"TIME"},yo=function(){return"LEADING"},ho=function(){return"TRAILING"},go=function(){return"BOTH"},Ao=function(){return"CAST"},mo=function(){return"AS"},Co=function(){return"INTEGER"},bo=function(){return"INT"},Eo=function(){return"SMALLINT"},Lo=function(){return"FLOAT"},To=function(){return"REAL"},wo=function(){return"VARCHAR"},xo=function(){return"TO"},No=function(){return"INTERVAL"},Io=function(){return"YEAR"},Ro=function(){return"TIMEZONE_HOUR"},Oo=function(){return"TIMEZONE_MINUTE"},Fo=function(){return"MONTH"},So=function(){return"DAY"},Mo=function(){return"HOUR"},$o=function(){return"MINUTE"},Uo=function(){return"SECOND"},_o=function(){return"CASE"},Do=function(){return"END"},Ho=function(){return"WHEN"},Po=function(){return"THEN"},jo=function(){return"ELSE"},Zo=function(n){return n},ko=function(n){return n.join("")},zo=0|r.peg$currPos,Go=zo,Bo=[{line:1,column:1}],qo=zo,Vo=r.peg$maxFailExpected||[],Wo=0|r.peg$silentFails;if(r.startRule){if(!(r.startRule in i))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=i[r.startRule]}function Yo(){return tu(Go,zo)}function Ko(n,t){throw eu(n,t=void 0!==t?t:tu(Go,zo))}function Xo(n,t){return{type:"literal",text:n,ignoreCase:t}}function Jo(n,t,r){return{type:"class",parts:n,inverted:t,ignoreCase:r}}function nu(t){var r,e=Bo[t];if(e)return e;if(t>=Bo.length)r=Bo.length-1;else for(r=t;!Bo[--r];);for(e={line:(e=Bo[r]).line,column:e.column};r<t;)10===n.charCodeAt(r)?(e.line++,e.column=1):e.column++,r++;return Bo[t]=e,e}function tu(n,t,r){var e=nu(n),o=nu(t);return{source:u,start:{offset:n,line:e.line,column:e.column},end:{offset:t,line:o.line,column:o.column}}}function ru(n){zo<qo||(zo>qo&&(qo=zo,Vo=[]),Vo.push(n))}function eu(n,r){return new t(n,null,null,r)}function uu(){var n,t;return n=zo,ma(),(t=au())!==o?(ma(),Go=n,n=Xt(t)):(zo=n,n=o),n}function iu(){var n,t,r,e,u,i;if(n=zo,ga()!==o){for(ma(),t=[],r=au();r!==o;)t.push(r),r=zo,e=zo,u=ma(),(i=ha())!==o?e=u=[u,i,ma()]:(zo=e,e=o),e!==o&&(e=au())===o?(zo=r,r=o):r=e;r=ma(),(e=Aa())!==o?(Go=n,n=Jt(t)):(zo=n,n=o)}else zo=n,n=o;return n}function au(){var n,t,r,e,u,i;if(n=zo,(t=cu())!==o){for(r=[],e=zo,ma(),(u=Mi())!==o?(ma(),(i=cu())!==o?(Go=e,e=Qt(t,u,i)):(zo=e,e=o)):(zo=e,e=o);e!==o;)r.push(e),e=zo,ma(),(u=Mi())!==o?(ma(),(i=cu())!==o?(Go=e,e=Qt(t,u,i)):(zo=e,e=o)):(zo=e,e=o);Go=n,n=nr(t,r)}else zo=n,n=o;return n}function cu(){var n,t,r,e,u,i;if(n=zo,(t=su())!==o){for(r=[],e=zo,ma(),(u=Si())!==o?(ma(),(i=su())!==o?(Go=e,e=tr(t,u,i)):(zo=e,e=o)):(zo=e,e=o);e!==o;)r.push(e),e=zo,ma(),(u=Si())!==o?(ma(),(i=su())!==o?(Go=e,e=tr(t,u,i)):(zo=e,e=o)):(zo=e,e=o);Go=n,n=rr(t,r)}else zo=n,n=o;return n}function su(){var t,r,e,u,i;return t=zo,(r=Fi())===o&&(r=zo,33===n.charCodeAt(zo)?(e=c,zo++):(e=o,0===Wo&&ru(On)),e!==o?(u=zo,Wo++,61===n.charCodeAt(zo)?(i=s,zo++):(i=o,0===Wo&&ru(Fn)),Wo--,i===o?u=void 0:(zo=u,u=o),u!==o?r=e=[e,u]:(zo=r,r=o)):(zo=r,r=o)),r!==o?(e=ma(),(u=su())!==o?(Go=t,t=er(u)):(zo=t,t=o)):(zo=t,t=o),t===o&&(t=function fu(){var n,t,r,e;return n=zo,(t=Cu())!==o?(r=zo,ma(),(e=function lu(){var n;return(n=function pu(){var n,t,r,e,u;if(n=zo,t=[],r=zo,ma(),(e=vu())!==o?(ma(),(u=Cu())!==o?(Go=r,r=ur(e,u)):(zo=r,r=o)):(zo=r,r=o),r!==o)for(;r!==o;)t.push(r),r=zo,ma(),(e=vu())!==o?(ma(),(u=Cu())!==o?(Go=r,r=ur(e,u)):(zo=r,r=o)):(zo=r,r=o);else t=o;return t!==o&&(Go=n,t=ir(t)),t}())===o&&(n=function mu(){var n,t,r;return n=zo,(t=gu())!==o?(ma(),(r=iu())!==o?(Go=n,n=gr(t,r)):(zo=n,n=o)):(zo=n,n=o),n===o&&(n=zo,(t=gu())!==o?(ma(),(r=Hu())!==o?(Go=n,n=Ar(t,r)):(zo=n,n=o)):(zo=n,n=o)),n}())===o&&(n=function yu(){var n,t,r,e,u,i,a,c;return n=zo,(t=Fi())!==o?(ma(),(r=$i())!==o?(e=ma(),u=zo,(i=Cu())!==o?(ma(),(a=Si())!==o?(ma(),(c=Cu())!==o?(Go=u,u=sr(r,i,c)):(zo=u,u=o)):(zo=u,u=o)):(zo=u,u=o),u!==o?(Go=n,n=fr(r,u)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o),n===o&&(n=zo,(t=$i())!==o?(ma(),r=zo,(e=Cu())!==o?(u=ma(),(i=Si())!==o?(ma(),(a=Cu())!==o?(Go=r,r=lr(t,e,a)):(zo=r,r=o)):(zo=r,r=o)):(zo=r,r=o),r!==o?(Go=n,n=pr(t,r)):(zo=n,n=o)):(zo=n,n=o)),n}())===o&&(n=function du(){var n,t,r,e;return n=zo,(t=Ii())!==o?(ma(),(r=Fi())!==o?(ma(),(e=Cu())!==o?(Go=n,n=ar(t,e)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o),n===o&&(n=zo,(t=Ii())!==o?(ma(),(r=Cu())!==o?(Go=n,n=cr(t,r)):(zo=n,n=o)):(zo=n,n=o)),n}())===o&&(n=function Au(){var n,t,r,e;return n=zo,(t=hu())!==o?(ma(),(r=ci())!==o?(ma(),Oi()!==o?(ma(),(e=si())!==o?(Go=n,n=yr(t,r,e)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o),n===o&&(n=zo,(t=hu())!==o?(ma(),(r=ci())!==o?(Go=n,n=hr(t,r)):(zo=n,n=o)):(zo=n,n=o)),n}()),n}())!==o?r=e:(zo=r,r=o),r===o&&(r=null),Go=n,n=or(t,r)):(zo=n,n=o),n}()),t}function vu(){var t;return n.substr(zo,2)===f?(t=f,zo+=2):(t=o,0===Wo&&ru(Sn)),t===o&&(62===n.charCodeAt(zo)?(t=l,zo++):(t=o,0===Wo&&ru(Mn)),t===o&&(n.substr(zo,2)===p?(t=p,zo+=2):(t=o,0===Wo&&ru($n)),t===o&&(n.substr(zo,2)===v?(t=v,zo+=2):(t=o,0===Wo&&ru(Un)),t===o&&(t=n.charAt(zo),An.test(t)?zo++:(t=o,0===Wo&&ru(_n)),t===o&&(n.substr(zo,2)===d?(t=d,zo+=2):(t=o,0===Wo&&ru(Dn))))))),t}function hu(){var n,t,r,e,u;return n=zo,t=zo,(r=Fi())!==o?(e=ma(),(u=Ri())!==o?t=r=[r,e,u]:(zo=t,t=o)):(zo=t,t=o),t!==o&&(Go=n,t=vr(t)),(n=t)===o&&(n=Ri()),n}function gu(){var n,t,r,e,u;return n=zo,t=zo,(r=Fi())!==o?(e=ma(),(u=Ni())!==o?t=r=[r,e,u]:(zo=t,t=o)):(zo=t,t=o),t!==o&&(Go=n,t=dr(t)),(n=t)===o&&(n=Ni()),n}function Cu(){var n,t,r,e,u,i;if(n=zo,(t=Eu())!==o){for(r=[],e=zo,ma(),(u=bu())!==o?(ma(),(i=Eu())!==o?(Go=e,e=mr(t,u,i)):(zo=e,e=o)):(zo=e,e=o);e!==o;)r.push(e),e=zo,ma(),(u=bu())!==o?(ma(),(i=Eu())!==o?(Go=e,e=mr(t,u,i)):(zo=e,e=o)):(zo=e,e=o);Go=n,n=Cr(t,r)}else zo=n,n=o;return n}function bu(){var t;return t=n.charAt(zo),mn.test(t)?zo++:(t=o,0===Wo&&ru(Hn)),t===o&&(n.substr(zo,2)===y?(t=y,zo+=2):(t=o,0===Wo&&ru(Pn))),t}function Eu(){var n,t,r,e,u,i;if(n=zo,(t=Tu())!==o){for(r=[],e=zo,ma(),(u=Lu())!==o?(ma(),(i=Tu())!==o?(Go=e,e=br(t,u,i)):(zo=e,e=o)):(zo=e,e=o);e!==o;)r.push(e),e=zo,ma(),(u=Lu())!==o?(ma(),(i=Tu())!==o?(Go=e,e=br(t,u,i)):(zo=e,e=o)):(zo=e,e=o);Go=n,n=Er(t,r)}else zo=n,n=o;return n}function Lu(){var t;return t=n.charAt(zo),Cn.test(t)?zo++:(t=o,0===Wo&&ru(jn)),t}function Tu(){var n,t;return(n=function Wu(){var n;return(n=si())===o&&(n=function hi(){var n,t,r,e;return n=zo,(t=function gi(){var n,t,r,e;return n=zo,(t=Ai())!==o&&(r=mi())!==o&&(e=Ci())!==o?(Go=n,n=ke(t,r,e)):(zo=n,n=o),n===o&&(n=zo,(t=Ai())!==o&&(r=mi())!==o?(Go=n,n=ze(t,r)):(zo=n,n=o),n===o&&(n=zo,(t=Ai())!==o&&(r=Ci())!==o?(Go=n,n=Ge(t,r)):(zo=n,n=o),n===o&&(n=zo,(t=Ai())!==o&&(Go=n,t=Be(t)),n=t))),n}())!==o?(r=zo,Wo++,e=Ru(),Wo--,e===o?r=void 0:(zo=r,r=o),r!==o?(Go=n,n=Ze(t)):(zo=n,n=o)):(zo=n,n=o),n}())===o&&(n=function ai(){var n,t;return n=zo,(t=wi())!==o&&(Go=n,t=Oe()),(n=t)===o&&(n=zo,(t=xi())!==o&&(Go=n,t=Fe()),n=t),n}())===o&&(n=function ii(){var n,t;return n=zo,(t=Ti())!==o&&(Go=n,t=Re()),t}())===o&&(n=function ui(){var n,t;return n=zo,ki()!==o?(ma(),(t=ci())!==o?(Go=n,n=Ie(t)):(zo=n,n=o)):(zo=n,n=o),n}())===o&&(n=function Yu(){var n,t;return n=zo,Zi()!==o?(ma(),(t=ci())!==o?(Go=n,n=ue(t)):(zo=n,n=o)):(zo=n,n=o),n}())===o&&(n=Xu())===o&&(n=function Ku(){var n,t;return n=zo,zi()!==o?(ma(),(t=ci())!==o?(Go=n,n=ie(t)):(zo=n,n=o)):(zo=n,n=o),n}()),n}())===o&&(n=function Pu(){var n,t,r,e;return n=zo,Hi()!==o?(ma(),t=zo,ga()!==o?(ma(),(r=Vu())!==o?(ma(),Ui()!==o?(ma(),(e=au())!==o?(ma(),Aa()!==o?(Go=t,t=Mr(r,e)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o),t===o&&(t=zo,ga()!==o?(ma(),(r=Vu())!==o?(ma(),ha()!==o?(ma(),(e=au())!==o?(ma(),Aa()!==o?(Go=t,t=$r(r,e)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)),t!==o?(Go=n,n=Ur(t)):(zo=n,n=o)):(zo=n,n=o),n}())===o&&(n=function ju(){var n,t,r,e,u,i,a;return n=zo,Di()!==o?(ma(),t=zo,ga()!==o?(ma(),(r=au())!==o?(ma(),Ui()!==o?(ma(),(e=au())!==o?(ma(),u=zo,_i()!==o?(i=ma(),(a=au())!==o?(ma(),u=a):(zo=u,u=o)):(zo=u,u=o),u===o&&(u=null),Aa()!==o?(Go=t,t=_r(r,e,u)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o),t===o&&(t=zo,ga()!==o?(ma(),(r=au())!==o?(ma(),ha()!==o?(ma(),(e=au())!==o?(ma(),(u=ha())!==o?(ma(),(i=au())!==o&&(a=Aa())!==o?(Go=t,t=Dr(r,e,i)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)),t!==o?(Go=n,n=Hr(t)):(zo=n,n=o)):(zo=n,n=o),n}())===o&&(n=function zu(){var n,t,r,e,u;return n=zo,Pi()!==o?(ma(),t=zo,ga()!==o?(ma(),r=Gu(),ma(),(e=au())!==o?(ma(),Ui()!==o?(ma(),(u=au())!==o?(ma(),Aa()!==o?(Go=t,t=Kr(r,e,u)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o),t===o&&(t=zo,ga()!==o?(ma(),r=Gu(),ma(),(e=au())!==o?(ma(),Aa()!==o?(Go=t,t=Xr(r,e)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)),t!==o?(Go=n,n=Jr(t)):(zo=n,n=o)):(zo=n,n=o),n}())===o&&(n=function Bu(){var n,t,r,e;return n=zo,ji()!==o?(ma(),t=zo,ga()!==o?(ma(),(r=au())!==o?(ma(),Ni()!==o?(ma(),(e=au())!==o?(ma(),Aa()!==o?(Go=t,t=ne(r,e)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o),t===o&&(t=zo,ga()!==o?(ma(),(r=au())!==o?(ma(),ha()!==o?(ma(),(e=au())!==o?(ma(),Aa()!==o?(Go=t,t=te(r,e)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)),t!==o?(Go=n,n=re(t)):(zo=n,n=o)):(zo=n,n=o),n}())===o&&(n=function Zu(){var n,t,r,e;return n=zo,Vi()!==o?(ma(),t=zo,ga()!==o?(ma(),(r=au())!==o?(ma(),Wi()!==o?(ma(),(e=ku())!==o?(ma(),Aa()!==o?(Go=t,t=Pr(r,e)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o),t===o&&(t=zo,ga()!==o?(ma(),(r=au())!==o?(ma(),ha()!==o?(ma(),(e=ku())!==o?(ma(),Aa()!==o?(Go=t,t=jr(r,e)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)),t!==o?(Go=n,n=Zr(t)):(zo=n,n=o)):(zo=n,n=o),n}())===o&&(n=function qu(){var n,t,r,e;return n=zo,t=zo,Wo++,r=Hi(),Wo--,r===o?t=void 0:(zo=t,t=o),t!==o&&(r=ba())!==o?(ma(),(e=iu())!==o?(Go=n,n=ee(r,e)):(zo=n,n=o)):(zo=n,n=o),n}())===o&&(n=function fi(){var n;return(n=function li(){var n,t,r,e,u;if(n=zo,la()!==o)if(ma(),(t=au())!==o){for(ma(),r=[],e=zo,(u=di())!==o?(ma(),e=u):(zo=e,e=o);e!==o;)r.push(e),e=zo,(u=di())!==o?(ma(),e=u):(zo=e,e=o);(e=pa())!==o?(Go=n,n=$e(t,r)):(zo=n,n=o)}else zo=n,n=o;else zo=n,n=o;if(n===o)if(n=zo,la()!==o)if(ma(),(t=au())!==o){for(ma(),r=[],e=zo,(u=di())!==o?(ma(),e=u):(zo=e,e=o);e!==o;)r.push(e),e=zo,(u=di())!==o?(ma(),e=u):(zo=e,e=o);(e=yi())!==o?(u=ma(),pa()!==o?(Go=n,n=Ue(t,r,e)):(zo=n,n=o)):(zo=n,n=o)}else zo=n,n=o;else zo=n,n=o;return n}())===o&&(n=function pi(){var n,t,r,e;if(n=zo,la()!==o){for(ma(),t=[],r=zo,(e=vi())!==o?(ma(),r=e):(zo=r,r=o);r!==o;)t.push(r),r=zo,(e=vi())!==o?(ma(),r=e):(zo=r,r=o);(r=pa())!==o?(Go=n,n=_e(t)):(zo=n,n=o)}else zo=n,n=o;if(n===o)if(n=zo,la()!==o){for(ma(),t=[],r=zo,(e=vi())!==o?(ma(),r=e):(zo=r,r=o);r!==o;)t.push(r),r=zo,(e=vi())!==o?(ma(),r=e):(zo=r,r=o);(r=yi())!==o?(e=ma(),pa()!==o?(Go=n,n=De(t,r)):(zo=n,n=o)):(zo=n,n=o)}else zo=n,n=o;return n}()),n}())===o&&(n=function wu(){var n,t;return n=zo,(t=function xu(){var n,t;return n=zo,(t=function Nu(){var n,t,r,e;if(n=zo,(t=Ru())!==o){for(r=[],e=Fu();e!==o;)r.push(e),e=Fu();Go=n,n=Nr(t,r)}else zo=n,n=o;return n}())!==o&&(Go=n,t=xr(t)),t}())!==o&&(Go=n,t=Tr(t)),(n=t)===o&&(n=zo,(t=function Su(){var n,t;return n=zo,Du()!==o?(t=function Mu(){var n,t,r;for(n=zo,t=[],r=$u();r!==o;)t.push(r),r=$u();return Go=n,Or(t)}(),Du()!==o?(Go=n,n=Rr(t)):(zo=n,n=o)):(zo=n,n=o),n}())!==o&&(Go=n,t=wr(t)),n=t),n}())===o&&(n=Hu())===o&&(n=zo,ga()!==o?(ma(),(t=au())!==o?(ma(),Aa()!==o?(Go=n,n=Lr(t)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)),n}function Iu(){var n,t,r,e;if(n=zo,(t=Ru())!==o){for(r=[],e=Ou();e!==o;)r.push(e),e=Ou();Go=n,n=Ir(t,r)}else zo=n,n=o;return n}function Ru(){var t;return t=n.charAt(zo),bn.test(t)?zo++:(t=o,0===Wo&&ru(Zn)),t}function Ou(){var t;return t=n.charAt(zo),En.test(t)?zo++:(t=o,0===Wo&&ru(kn)),t}function Fu(){var t;return t=n.charAt(zo),Ln.test(t)?zo++:(t=o,0===Wo&&ru(zn)),t}function $u(){var n;return(n=_u())===o&&(n=function Uu(){var n;return n=zo,Du()!==o&&Du()!==o?(Go=n,n=Fr()):(zo=n,n=o),n}()),n}function _u(){var t;return t=n.charAt(zo),Ln.test(t)?zo++:(t=o,0===Wo&&ru(zn)),t}function Du(){var t;return t=n.charAt(zo),Tn.test(t)?zo++:(t=o,0===Wo&&ru(Gn)),t}function Hu(){var t,r,e,u;return t=zo,r=zo,64===n.charCodeAt(zo)?(e=h,zo++):(e=o,0===Wo&&ru(Bn)),e!==o&&(u=Iu())!==o?r=e=[e,u]:(zo=r,r=o),r!==o&&(Go=t,r=Sr(r)),r}function ku(){var n,t,r;return n=zo,(t=Yi())===o&&(t=Ki()),t!==o&&(Go=n,t=kr()),(n=t)===o&&(n=zo,(t=Xi())!==o&&(Go=n,t=zr()),(n=t)===o&&(n=zo,(t=Ji())!==o&&(Go=n,t=Gr()),(n=t)===o&&(n=zo,(t=Qi())!==o&&(Go=n,t=Br()),(n=t)===o&&(n=zo,(t=ki())!==o&&(Go=n,t=qr()),(n=t)===o&&(n=zo,(t=Zi())!==o&&(Go=n,t=Vr()),(n=t)===o&&(n=zo,(t=zi())!==o&&(Go=n,t=Wr()),(n=t)===o&&(n=zo,(t=na())!==o?(ma(),ga()!==o?(ma(),(r=bi())!==o?(ma(),Aa()!==o?(Go=n,n=Yr(r)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)))))))),n}function Gu(){var n,t;return n=zo,(t=Gi())===o&&(t=Bi())===o&&(t=qi()),t===o&&(t=null),Go=n,Qr(t)}function Vu(){var n,t;return n=zo,(t=ea())===o&&(t=ia())===o&&(t=aa())===o&&(t=ca())===o&&(t=sa())===o&&(t=fa())===o&&(t=oa())===o&&(t=ua()),t!==o&&(Go=n,t=oe(t)),t}function Xu(){var t,r,e,u;return t=zo,ra()!==o?(ma(),r=n.charAt(zo),mn.test(r)?zo++:(r=o,0===Wo&&ru(Hn)),r!==o?(ma(),(e=ci())!==o?(ma(),(u=Ju())!==o?(Go=t,t=ae(r,e,u)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o),t===o&&(t=zo,ra()!==o?(ma(),(r=ci())!==o?(ma(),(e=Ju())!==o?(Go=t,t=ce(r,e)):(zo=t,t=o)):(zo=t,t=o)):(zo=t,t=o)),t}function Ju(){var n,t,r;return n=zo,(t=function Qu(){var n,t,r;return n=zo,(t=ri())!==o?(ma(),ga()!==o?(ma(),(r=oi())!==o?(ma(),Aa()!==o?(Go=n,n=fe(t,r)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o),n===o&&(n=zo,(t=ri())!==o&&(Go=n,t=le(t)),n=t),n}())!==o?(ma(),ta()!==o?(ma(),(r=function ni(){var n,t,r,e;return n=zo,(t=ri())!==o&&(Go=n,t=pe(t)),(n=t)===o&&(n=zo,(t=fa())!==o?(ma(),ga()!==o?(ma(),(r=oi())!==o?(ma(),ha()!==o?(ma(),(e=ei())!==o?(ma(),Aa()!==o?(Go=n,n=ve(r,e)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o),n===o&&(n=zo,(t=fa())!==o?(ma(),ga()!==o?(ma(),(r=oi())!==o?(ma(),Aa()!==o?(Go=n,n=de(r)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o),n===o&&(n=zo,(t=fa())!==o&&(Go=n,t=ye()),n=t))),n}())!==o?(Go=n,n=se(t,r)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o),n===o&&(n=function ti(){var n,t,r,e;return n=zo,(t=ri())!==o?(ma(),ga()!==o?(ma(),(r=ei())!==o?(ma(),Aa()!==o?(Go=n,n=he(t,r)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o),n===o&&(n=zo,(t=ri())!==o&&(Go=n,t=ge(t)),(n=t)===o&&(n=zo,(t=fa())!==o?(ma(),ga()!==o?(ma(),(r=oi())!==o?(ma(),ha()!==o?(ma(),(e=ei())!==o?(ma(),Aa()!==o?(Go=n,n=Ae(r,e)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o),n===o&&(n=zo,(t=fa())!==o?(ma(),ga()!==o?(ma(),(r=ei())!==o?(ma(),Aa()!==o?(Go=n,n=me(r)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o),n===o&&(n=zo,(t=fa())!==o&&(Go=n,t=Ce()),n=t)))),n}()),n}function ri(){var n,t;return n=zo,(t=aa())!==o&&(Go=n,t=be()),(n=t)===o&&(n=zo,(t=ca())!==o&&(Go=n,t=Ee()),(n=t)===o&&(n=zo,(t=sa())!==o&&(Go=n,t=Le()),(n=t)===o&&(n=zo,(t=ia())!==o&&(Go=n,t=Te()),(n=t)===o&&(n=zo,(t=ea())!==o&&(Go=n,t=we()),n=t)))),n}function ei(){var n,t;return n=zo,(t=bi())!==o&&(Go=n,t=xe(t)),t}function oi(){var n,t;return n=zo,(t=bi())!==o&&(Go=n,t=Ne(t)),t}function ci(){var n;return(n=si())===o&&(n=Hu()),n}function si(){var t,r,e,u,i;if(t=zo,39===n.charCodeAt(zo)?(r=g,zo++):(r=o,0===Wo&&ru(qn)),r===o&&(n.substr(zo,2)===A?(r=A,zo+=2):(r=o,0===Wo&&ru(Vn))),r!==o){for(e=[],u=zo,n.substr(zo,2)===m?(i=m,zo+=2):(i=o,0===Wo&&ru(Wn)),i!==o&&(Go=u,i=Se()),(u=i)===o&&(u=n.charAt(zo),wn.test(u)?zo++:(u=o,0===Wo&&ru(Yn)));u!==o;)e.push(u),u=zo,n.substr(zo,2)===m?(i=m,zo+=2):(i=o,0===Wo&&ru(Wn)),i!==o&&(Go=u,i=Se()),(u=i)===o&&(u=n.charAt(zo),wn.test(u)?zo++:(u=o,0===Wo&&ru(Yn)));39===n.charCodeAt(zo)?(u=g,zo++):(u=o,0===Wo&&ru(qn)),u!==o?(Go=t,t=Me(e)):(zo=t,t=o)}else zo=t,t=o;return t}function vi(){var n,t,r;return n=zo,va()!==o?(ma(),(t=au())!==o?(ma(),da()!==o?(ma(),(r=au())!==o?(Go=n,n=He(t,r)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o),n}function di(){var n,t,r;return n=zo,va()!==o?(ma(),(t=au())!==o?(ma(),da()!==o?(ma(),(r=au())!==o?(Go=n,n=Pe(t,r)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o)):(zo=n,n=o),n}function yi(){var n,t;return n=zo,ya()!==o?(ma(),(t=au())!==o?(Go=n,n=je(t)):(zo=n,n=o)):(zo=n,n=o),n}function Ai(){var t,r,e;return(t=bi())===o&&(t=zo,r=n.charAt(zo),mn.test(r)?zo++:(r=o,0===Wo&&ru(Hn)),r!==o&&(e=bi())!==o?(Go=t,t=qe(r,e)):(zo=t,t=o)),t}function mi(){var t,r,e;return t=zo,46===n.charCodeAt(zo)?(r=C,zo++):(r=o,0===Wo&&ru(Kn)),r!==o?((e=bi())===o&&(e=null),Go=t,t=Ve(e)):(zo=t,t=o),t}function Ci(){var n,t,r;return n=zo,(t=Li())!==o&&(r=bi())!==o?(Go=n,n=We(t,r)):(zo=n,n=o),n}function bi(){var n,t,r;if(n=zo,t=[],(r=Ei())!==o)for(;r!==o;)t.push(r),r=Ei();else t=o;return t!==o&&(Go=n,t=Ye(t)),t}function Ei(){var t;return t=n.charAt(zo),xn.test(t)?zo++:(t=o,0===Wo&&ru(Xn)),t}function Li(){var t,r,e;return t=zo,r=n.charAt(zo),Nn.test(r)?zo++:(r=o,0===Wo&&ru(Jn)),r!==o?(e=n.charAt(zo),mn.test(e)?zo++:(e=o,0===Wo&&ru(Hn)),e===o&&(e=null),Go=t,t=Ke(r,e)):(zo=t,t=o),t}function Ti(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===b?zo+=4:(r=o,0===Wo&&ru(Qn)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?t=r=[r,e]:(zo=t,t=o)):(zo=t,t=o),t}function wi(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===E?zo+=4:(r=o,0===Wo&&ru(nt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?t=r=[r,e]:(zo=t,t=o)):(zo=t,t=o),t}function xi(){var t,r,e,u;return t=zo,(r=n.substr(zo,5)).toLowerCase()===L?zo+=5:(r=o,0===Wo&&ru(tt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?t=r=[r,e]:(zo=t,t=o)):(zo=t,t=o),t}function Ni(){var t,r,e,u;return t=zo,(r=n.substr(zo,2)).toLowerCase()===T?zo+=2:(r=o,0===Wo&&ru(rt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Xe()):(zo=t,t=o)):(zo=t,t=o),t}function Ii(){var t,r,e,u;return t=zo,(r=n.substr(zo,2)).toLowerCase()===w?zo+=2:(r=o,0===Wo&&ru(et)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Je()):(zo=t,t=o)):(zo=t,t=o),t}function Ri(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===x?zo+=4:(r=o,0===Wo&&ru(ot)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Qe()):(zo=t,t=o)):(zo=t,t=o),t}function Oi(){var t,r,e,u;return t=zo,(r=n.substr(zo,6)).toLowerCase()===N?zo+=6:(r=o,0===Wo&&ru(ut)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=no()):(zo=t,t=o)):(zo=t,t=o),t}function Fi(){var t,r,e,u;return t=zo,(r=n.substr(zo,3)).toLowerCase()===I?zo+=3:(r=o,0===Wo&&ru(it)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=to()):(zo=t,t=o)):(zo=t,t=o),t}function Si(){var t,r,e,u;return t=zo,(r=n.substr(zo,3)).toLowerCase()===R?zo+=3:(r=o,0===Wo&&ru(at)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=ro()):(zo=t,t=o)):(zo=t,t=o),t}function Mi(){var t,r,e,u;return t=zo,(r=n.substr(zo,2)).toLowerCase()===O?zo+=2:(r=o,0===Wo&&ru(ct)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=eo()):(zo=t,t=o)):(zo=t,t=o),t}function $i(){var t,r,e,u;return t=zo,(r=n.substr(zo,7)).toLowerCase()===F?zo+=7:(r=o,0===Wo&&ru(st)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=oo()):(zo=t,t=o)):(zo=t,t=o),t}function Ui(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===S?zo+=4:(r=o,0===Wo&&ru(ft)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=uo()):(zo=t,t=o)):(zo=t,t=o),t}function _i(){var t,r,e,u;return t=zo,(r=n.substr(zo,3)).toLowerCase()===M?zo+=3:(r=o,0===Wo&&ru(lt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=io()):(zo=t,t=o)):(zo=t,t=o),t}function Di(){var t,r,e,u;return t=zo,(r=n.substr(zo,9)).toLowerCase()===$?zo+=9:(r=o,0===Wo&&ru(pt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=ao()):(zo=t,t=o)):(zo=t,t=o),t}function Hi(){var t,r,e,u;return t=zo,(r=n.substr(zo,7)).toLowerCase()===U?zo+=7:(r=o,0===Wo&&ru(vt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=co()):(zo=t,t=o)):(zo=t,t=o),t}function Pi(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===_?zo+=4:(r=o,0===Wo&&ru(dt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=so()):(zo=t,t=o)):(zo=t,t=o),t}function ji(){var t,r,e,u;return t=zo,(r=n.substr(zo,8)).toLowerCase()===D?zo+=8:(r=o,0===Wo&&ru(yt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=fo()):(zo=t,t=o)):(zo=t,t=o),t}function Zi(){var t,r,e,u;return t=zo,(r=n.substr(zo,9)).toLowerCase()===H?zo+=9:(r=o,0===Wo&&ru(ht)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=lo()):(zo=t,t=o)):(zo=t,t=o),t}function ki(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===P?zo+=4:(r=o,0===Wo&&ru(gt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=po()):(zo=t,t=o)):(zo=t,t=o),t}function zi(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===j?zo+=4:(r=o,0===Wo&&ru(At)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=vo()):(zo=t,t=o)):(zo=t,t=o),t}function Gi(){var t,r,e,u;return t=zo,(r=n.substr(zo,7)).toLowerCase()===Z?zo+=7:(r=o,0===Wo&&ru(mt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=yo()):(zo=t,t=o)):(zo=t,t=o),t}function Bi(){var t,r,e,u;return t=zo,(r=n.substr(zo,8)).toLowerCase()===k?zo+=8:(r=o,0===Wo&&ru(Ct)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=ho()):(zo=t,t=o)):(zo=t,t=o),t}function qi(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===z?zo+=4:(r=o,0===Wo&&ru(bt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=go()):(zo=t,t=o)):(zo=t,t=o),t}function Vi(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===G?zo+=4:(r=o,0===Wo&&ru(Et)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Ao()):(zo=t,t=o)):(zo=t,t=o),t}function Wi(){var t,r,e,u;return t=zo,(r=n.substr(zo,2)).toLowerCase()===B?zo+=2:(r=o,0===Wo&&ru(Lt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=mo()):(zo=t,t=o)):(zo=t,t=o),t}function Yi(){var t,r,e,u;return t=zo,(r=n.substr(zo,7)).toLowerCase()===q?zo+=7:(r=o,0===Wo&&ru(Tt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Co()):(zo=t,t=o)):(zo=t,t=o),t}function Ki(){var t,r,e,u;return t=zo,(r=n.substr(zo,3)).toLowerCase()===V?zo+=3:(r=o,0===Wo&&ru(wt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=bo()):(zo=t,t=o)):(zo=t,t=o),t}function Xi(){var t,r,e,u;return t=zo,(r=n.substr(zo,8)).toLowerCase()===W?zo+=8:(r=o,0===Wo&&ru(xt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Eo()):(zo=t,t=o)):(zo=t,t=o),t}function Ji(){var t,r,e,u;return t=zo,(r=n.substr(zo,5)).toLowerCase()===Y?zo+=5:(r=o,0===Wo&&ru(Nt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Lo()):(zo=t,t=o)):(zo=t,t=o),t}function Qi(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===K?zo+=4:(r=o,0===Wo&&ru(It)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=To()):(zo=t,t=o)):(zo=t,t=o),t}function na(){var t,r,e,u;return t=zo,(r=n.substr(zo,7)).toLowerCase()===X?zo+=7:(r=o,0===Wo&&ru(Rt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=wo()):(zo=t,t=o)):(zo=t,t=o),t}function ta(){var t,r,e,u;return t=zo,(r=n.substr(zo,2)).toLowerCase()===J?zo+=2:(r=o,0===Wo&&ru(Ot)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=xo()):(zo=t,t=o)):(zo=t,t=o),t}function ra(){var t,r,e,u;return t=zo,(r=n.substr(zo,8)).toLowerCase()===Q?zo+=8:(r=o,0===Wo&&ru(Ft)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=No()):(zo=t,t=o)):(zo=t,t=o),t}function ea(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===nn?zo+=4:(r=o,0===Wo&&ru(St)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Io()):(zo=t,t=o)):(zo=t,t=o),t}function oa(){var t,r,e,u;return t=zo,(r=n.substr(zo,13)).toLowerCase()===tn?zo+=13:(r=o,0===Wo&&ru(Mt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Ro()):(zo=t,t=o)):(zo=t,t=o),t}function ua(){var t,r,e,u;return t=zo,(r=n.substr(zo,15)).toLowerCase()===rn?zo+=15:(r=o,0===Wo&&ru($t)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Oo()):(zo=t,t=o)):(zo=t,t=o),t}function ia(){var t,r,e,u;return t=zo,(r=n.substr(zo,5)).toLowerCase()===en?zo+=5:(r=o,0===Wo&&ru(Ut)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Fo()):(zo=t,t=o)):(zo=t,t=o),t}function aa(){var t,r,e,u;return t=zo,(r=n.substr(zo,3)).toLowerCase()===on?zo+=3:(r=o,0===Wo&&ru(_t)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=So()):(zo=t,t=o)):(zo=t,t=o),t}function ca(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===un?zo+=4:(r=o,0===Wo&&ru(Dt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Mo()):(zo=t,t=o)):(zo=t,t=o),t}function sa(){var t,r,e,u;return t=zo,(r=n.substr(zo,6)).toLowerCase()===an?zo+=6:(r=o,0===Wo&&ru(Ht)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=$o()):(zo=t,t=o)):(zo=t,t=o),t}function fa(){var t,r,e,u;return t=zo,(r=n.substr(zo,6)).toLowerCase()===cn?zo+=6:(r=o,0===Wo&&ru(Pt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Uo()):(zo=t,t=o)):(zo=t,t=o),t}function la(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===sn?zo+=4:(r=o,0===Wo&&ru(jt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=_o()):(zo=t,t=o)):(zo=t,t=o),t}function pa(){var t,r,e,u;return t=zo,(r=n.substr(zo,3)).toLowerCase()===fn?zo+=3:(r=o,0===Wo&&ru(Zt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Do()):(zo=t,t=o)):(zo=t,t=o),t}function va(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===ln?zo+=4:(r=o,0===Wo&&ru(kt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Ho()):(zo=t,t=o)):(zo=t,t=o),t}function da(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===pn?zo+=4:(r=o,0===Wo&&ru(zt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=Po()):(zo=t,t=o)):(zo=t,t=o),t}function ya(){var t,r,e,u;return t=zo,(r=n.substr(zo,4)).toLowerCase()===vn?zo+=4:(r=o,0===Wo&&ru(Gt)),r!==o?(e=zo,Wo++,u=Ou(),Wo--,u===o?e=void 0:(zo=e,e=o),e!==o?(Go=t,t=jo()):(zo=t,t=o)):(zo=t,t=o),t}function ha(){var t;return 44===n.charCodeAt(zo)?(t=dn,zo++):(t=o,0===Wo&&ru(Bt)),t}function ga(){var t;return 40===n.charCodeAt(zo)?(t=yn,zo++):(t=o,0===Wo&&ru(qt)),t}function Aa(){var t;return 41===n.charCodeAt(zo)?(t=hn,zo++):(t=o,0===Wo&&ru(Vt)),t}function ma(){var n,t;for(n=[],t=Ca();t!==o;)n.push(t),t=Ca();return n}function Ca(){var t;return t=n.charAt(zo),In.test(t)?zo++:(t=o,0===Wo&&ru(Wt)),t}function ba(){var t,r,e,u;if(t=zo,(r=Iu())!==o&&(Go=t,r=Zo(r)),(t=r)===o)if(t=zo,96===n.charCodeAt(zo)?(r=gn,zo++):(r=o,0===Wo&&ru(Yt)),r!==o){if(e=[],u=n.charAt(zo),Rn.test(u)?zo++:(u=o,0===Wo&&ru(Kt)),u!==o)for(;u!==o;)e.push(u),u=n.charAt(zo),Rn.test(u)?zo++:(u=o,0===Wo&&ru(Kt));else e=o;e!==o?(96===n.charCodeAt(zo)?(u=gn,zo++):(u=o,0===Wo&&ru(Yt)),u!==o?(Go=t,t=ko(e)):(zo=t,t=o)):(zo=t,t=o)}else zo=t,t=o;return t}function La(n,t,r,e,o){const u={type:"binary-expression",location:o,operator:n,left:t,right:r};return void 0!==e&&(u.escape=e),u}function Ta(n,...t){return{type:"expression-list",location:n,value:t}}function wa(n,t){let r=n;for(const{op:e,expr:o,location:{end:u}}of t)r=La(e,r,o,void 0,{...r.location,end:u});return r}if(e=a(),r.peg$library)return{peg$result:e,peg$currPos:zo,peg$FAILED:o,peg$maxFailExpected:Vo,peg$maxFailPos:qo};if(e!==o&&zo===n.length)return e;throw e!==o&&zo<n.length&&ru({type:"end"}),function ou(n,r,e){return new t(t.buildMessage(n,r),n,r,e)}(Vo,qo<n.length?n.charAt(qo):null,qo<n.length?tu(qo,qo+1):tu(qo,qo))}(function n(n,t){function r(){this.constructor=n}r.prototype=t.prototype,n.prototype=new r})(t,Error),t.prototype.format=function(n){var t="Error: "+this.message;if(this.location){var e,o=null;for(e=0;e<n.length;e++)if(n[e].source===this.location.source){o=n[e].text.split(/\r\n|\n|\r/g);break}var u=this.location.start,i=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(u):u,a=this.location.source+":"+i.line+":"+i.column;if(o){var c=this.location.end,s=WhereGrammar_r("",i.line.toString().length," "),f=o[u.line-1],l=(u.line===c.line?c.column:f.length+1)-u.column||1;t+="\n --\x3e "+a+"\n"+s+" |\n"+i.line+" | "+f+"\n"+s+" | "+WhereGrammar_r("",u.column-1," ")+WhereGrammar_r("",l,"^")}else t+="\n at "+a}return t},t.buildMessage=function(n,t){var r={literal:function(n){return'"'+o(n.text)+'"'},class:function(n){var t=n.parts.map((function(n){return Array.isArray(n)?u(n[0])+"-"+u(n[1]):u(n)}));return"["+(n.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(n){return n.description}};function e(n){return n.charCodeAt(0).toString(16).toUpperCase()}function o(n){return n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(n){return"\\x0"+e(n)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(n){return"\\x"+e(n)}))}function u(n){return n.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(n){return"\\x0"+e(n)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(n){return"\\x"+e(n)}))}function i(n){return r[n.type](n)}return"Expected "+function a(n){var t,r,e=n.map(i);if(e.sort(),e.length>0){for(t=1,r=1;t<e.length;t++)e[t-1]!==e[t]&&(e[r]=e[t],r++);e.length=r}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(n)+" but "+function c(n){return n?'"'+o(n)+'"':"end of input"}(t)+" found."};class WhereGrammar_o{static parse(n){return e(n)}}function WhereGrammar_u(n,t){if(null!=n)switch(t(n),n.type){case"when-clause":WhereGrammar_u(n.operand,t),WhereGrammar_u(n.value,t);break;case"case-expression":for(const r of n.clauses)WhereGrammar_u(r,t);"simple"===n.format&&WhereGrammar_u(n.operand,t),null!==n.else&&WhereGrammar_u(n.else,t);break;case"expression-list":for(const r of n.value)WhereGrammar_u(r,t);break;case"unary-expression":WhereGrammar_u(n.expr,t);break;case"binary-expression":WhereGrammar_u(n.left,t),WhereGrammar_u(n.right,t);break;case"function":WhereGrammar_u(n.args,t);break;case"interval":WhereGrammar_u(n.value,t),WhereGrammar_u(n.qualifier,t);break;case"interval-qualifier":WhereGrammar_u(n.start,t),WhereGrammar_u(n.end,t)}}const WhereClause_O=new Set(["current_timestamp","current_date","current_time"]);class WhereClause_F{static makeBool(e){return WhereClause_Z(e)}static featureValue(e,t,r,a){return WhereClause_R(e,t,r,a)}static equalsNull(e){return null===e}static applyLike(e,t,r){return WhereClause_L(e,t,r)}static ensureArray(e){return WhereClause_x(e)}static applyIn(e,t,r){return WhereClause_U(e,t)}static currentTimestamp(e){return T(new Date,e)}static currentDate(e){return DateOnly.n.fromNow(e)}static currentTime(e){const t=T(new Date,e);return TimeOnly.k.fromDateTime(t)}static makeSqlInterval(e,t,r){return SqlInterval_a.createFromValueAndQualifier(e,t,r)}static convertInterval(e){return SqlInterval_a.isInterval(e)?e.valueInMilliseconds():e}static compare(e,t,r,a){return sqlCompareUtils_I(t,r,e)}static calculate(e,t,r,a){return sqlArithmeticUtils_d(e,t,r,a)}static evaluateTime(e){return O(e)}static evaluateTimestamp(e,t,r){return sqlDateParsingUtils_D(e,t,r)}static evaluateDate(e,t){return $(e,t)}static evaluateFunction(e,t,r){return StandardizedFunctions_p(e,t,r)}static lookup(e,t){const r=t[e];return void 0===r?null:r}static between(e,t,r){return null==e||null==t[0]||null==t[1]?null:sqlCompareUtils_I(e,t[0],">=")&&sqlCompareUtils_I(e,t[1],"<=")}static notbetween(e,t,r){return null==e||null==t[0]||null==t[1]?null:sqlCompareUtils_I(e,t[0],"<")||sqlCompareUtils_I(e,t[1],">")}static ternaryNot(e){return WhereClause_b(e)}static ternaryAnd(e,t){return WhereClause_A(e,t)}static ternaryOr(e,t){return WhereClause_E(e,t)}}class WhereClause_D{constructor(e,t,r="UTC",a=null){this.fieldsIndex=t,this.timeZone=r,this.currentUser=a,this.parameters={},this._hasDateFunctions=void 0,this.parseTree=WhereGrammar_o.parse(e);const{isStandardized:s,isAggregate:i,currentUserRequired:n,referencedFieldNames:o}=this._extractExpressionInfo(t);this._referencedFieldNames=o,this.isStandardized=s,this.isAggregate=i,this.currentUserRequired=n}static convertValueToStorageFormat(e,t=null){if(null===t)return(0,guards.$P)(e)?e.getTime():y(e)?e.toMillis():j(e)?e.toStorageFormat():x(e)?e.toStorageString():S(e)?e.toStorageFormat():e;switch(t){case"date":return(0,guards.$P)(e)?e.getTime():y(e)?e.toMillis():j(e)?e.toMilliseconds():S(e)?e.toNumber():e;case"date-only":return(0,guards.$P)(e)?DateOnly.n.fromDateJS(e).toString():j(e)?DateOnly.n.fromSqlTimeStampOffset(e).toString():y(e)?DateOnly.n.fromDateTime(e).toString():e;case"time-only":return(0,guards.$P)(e)?TimeOnly.k.fromDateJS(e).toStorageString():y(e)?TimeOnly.k.fromDateTime(e).toStorageString():j(e)?TimeOnly.k.fromSqlTimeStampOffset(e).toStorageString():x(e)?e.toStorageString():e;case"timestamp-offset":if((0,guards.$P)(e))return SqlTimestampOffset.g.fromJSDate(e).toStorageFormat();if(y(e))return SqlTimestampOffset.g.fromDateTime(e).toStorageFormat();if(j(e))return e.toStorageFormat()}return e}static create(e,t={}){return new WhereClause_D(e,t.fieldsIndex,t.timeZone??void 0,t.currentUser)}get fieldNames(){return this._referencedFieldNames}testSet(e,t=WhereClause_C,r=this.currentUser){return!!this._evaluateNode(this.parseTree,null,t,e,r)}calculateValue(e,t=WhereClause_C,r=this.currentUser){const a=this._evaluateNode(this.parseTree,e,t,null,r);return SqlInterval_a.isInterval(a)?a.valueInMilliseconds()/864e5:a}calculateValueCompiled(e,t=WhereClause_C,r=this.currentUser){return null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone,r??null):(0,has.A)("esri-csp-restrictions")?this.calculateValue(e,t):(this._compileMe(),this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone,r??null))}testFeature(e,t=WhereClause_C,r=this.currentUser){return!!this._evaluateNode(this.parseTree,e,t,null,r)}testFeatureCompiled(e,t=WhereClause_C,r=this.currentUser){return null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone,r??null):(0,has.A)("esri-csp-restrictions")?this.testFeature(e,t):(this._compileMe(),!!this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone,r??null))}get hasDateFunctions(){return null!=this._hasDateFunctions||(this._hasDateFunctions=!1,WhereGrammar_u(this.parseTree,(e=>{"current-time"===e.type?this._hasDateFunctions=!0:"function"===e.type&&(this._hasDateFunctions=this._hasDateFunctions||WhereClause_O.has(e.name.toLowerCase()))}))),this._hasDateFunctions}getFunctions(){const e=new Set;return WhereGrammar_u(this.parseTree,(t=>{"function"===t.type&&e.add(t.name.toLowerCase())})),Array.from(e)}getExpressions(){const e=new Map;return WhereGrammar_u(this.parseTree,(t=>{if("function"===t.type){const r=t.name.toLowerCase(),a=t.args.value[0];if("column-reference"===a.type){const t=a.column,s=`${r}-${t}`;e.has(s)||e.set(s,{aggregateType:r,field:t})}}})),[...e.values()]}getVariables(){const e=new Set;return WhereGrammar_u(this.parseTree,(t=>{"parameter"===t.type&&e.add(t.value.toLowerCase())})),Array.from(e)}_compileMe(){const e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone","currentUser",e).bind(WhereClause_F)}_extractExpressionInfo(t){const r=[],a=new Set;let s=!0,i=!1,n=!1;return WhereGrammar_u(this.parseTree,(o=>{switch(o.type){case"column-reference":{const e=t?.get(o.column);let s,i;e?s=i=e.name??"":(i=o.column,s=i.toLowerCase()),a.has(s)||(a.add(s),r.push(i)),o.column=i;break}case"current-user":n=!0;break;case"function":{const{name:t,args:r}=o,a=r.value.length;s&&(s=function StandardizedFunctions_g(a,n){const e=StandardizedFunctions_T[a.toLowerCase()];return null!=e&&n>=e.minParams&&n<=e.maxParams}(t,a)),!1===i&&(i=(0,AggregateFunctions.M)(t,a));break}}})),{referencedFieldNames:Array.from(r),isStandardized:s,isAggregate:i,currentUserRequired:n}}evaluateNodeToJavaScript(e){switch(e.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+","+JSON.stringify(e.op)+")";case"case-expression":{let t="";if("simple"===e.format){const r=this.evaluateNodeToJavaScript(e.operand);t="( ";for(let a=0;a<e.clauses.length;a++)t+=" (this.compare('=',"+r+","+this.evaluateNodeToJavaScript(e.clauses[a].operand)+") ? ("+this.evaluateNodeToJavaScript(e.clauses[a].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}else{t="( ";for(let r=0;r<e.clauses.length;r++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[r].operand)+")===true ? ("+this.evaluateNodeToJavaScript(e.clauses[r].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}return t}case"parameter":return"this.lookup("+JSON.stringify(e.value.toLowerCase())+",lookups)";case"expression-list":{let t="[";for(const r of e.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(r);return t+="]",t}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case"binary-expression":switch(e.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"IS":if("null"!==e.right.type)throw new errorSupport.L8(errorSupport.Z7.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case"ISNOT":if("null"!==e.right.type)throw new errorSupport.L8(errorSupport.Z7.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"), timeZone)";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"), timeZone))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"*":case"-":case"+":case"/":case"||":return"this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";default:throw new errorSupport.L8(errorSupport.Z7.UnsupportedOperator,{operator:e.operator})}case"null":case"boolean":case"string":case"number":return JSON.stringify(e.value);case"time":return"this.evaluateTime("+JSON.stringify(e.value)+")";case"date":return"this.evaluateDate("+JSON.stringify(e.value)+", 'unknown')";case"timestamp":return"this.evaluateTimestamp("+JSON.stringify(e.value)+", 'unknown')";case"current-time":return"date"===e.mode?"this.currentDate(timeZone)":"time"===e.mode?"this.currentTime(timeZone)":"this.currentTimestamp(timeZone)";case"current-user":return"currentUser";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(e.column)+",fieldsIndex,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+", timeZone)"}throw new errorSupport.L8(errorSupport.Z7.UnsupportedSyntax,{node:e.type})}_evaluateNode(r,o,u,l,c){let h;switch(r.type){case"interval":{const e=this._evaluateNode(r.value,o,u,l,c);return SqlInterval_a.createFromValueAndQualifier(e,r.qualifier,r.op)}case"case-expression":if("simple"===r.format){const e=this._evaluateNode(r.operand,o,u,l,c);for(let t=0;t<r.clauses.length;t++)if(sqlCompareUtils_I(e,this._evaluateNode(r.clauses[t].operand,o,u,l,c),"=",this.timeZone))return this._evaluateNode(r.clauses[t].value,o,u,l,c);if(null!==r.else)return this._evaluateNode(r.else,o,u,l,c)}else{for(let e=0;e<r.clauses.length;e++)if(WhereClause_Z(this._evaluateNode(r.clauses[e].operand,o,u,l,c)))return this._evaluateNode(r.clauses[e].value,o,u,l,c);if(null!==r.else)return this._evaluateNode(r.else,o,u,l,c)}return null;case"parameter":return h=this.parameters[r.value.toLowerCase()],(0,guards.$P)(h)?luxon.c9.fromJSDate(h):null!=h&&"object"==typeof h&&"toDateTime"in h?h.toDateTime():h;case"expression-list":{const e=[];for(const t of r.value)e.push(this._evaluateNode(t,o,u,l,c));return e}case"unary-expression":return WhereClause_b(this._evaluateNode(r.expr,o,u,l,c));case"binary-expression":switch(r.operator){case"AND":return WhereClause_A(this._evaluateNode(r.left,o,u,l,c),this._evaluateNode(r.right,o,u,l,c));case"OR":return WhereClause_E(this._evaluateNode(r.left,o,u,l,c),this._evaluateNode(r.right,o,u,l,c));case"IS":if("null"!==r.right.type)throw new errorSupport.L8(errorSupport.Z7.UnsupportedIsRhs);return null===this._evaluateNode(r.left,o,u,l,c);case"ISNOT":if("null"!==r.right.type)throw new errorSupport.L8(errorSupport.Z7.UnsupportedIsRhs);return null!==this._evaluateNode(r.left,o,u,l,c);case"IN":{const e=WhereClause_x(this._evaluateNode(r.right,o,u,l,c));return WhereClause_U(this._evaluateNode(r.left,o,u,l,c),e,this.timeZone)}case"NOT IN":{const e=WhereClause_x(this._evaluateNode(r.right,o,u,l,c));return WhereClause_b(WhereClause_U(this._evaluateNode(r.left,o,u,l,c),e,this.timeZone))}case"BETWEEN":{const e=this._evaluateNode(r.left,o,u,l,c),t=this._evaluateNode(r.right,o,u,l,c);return null==e||null==t[0]||null==t[1]?null:sqlCompareUtils_I(e,t[0],">=",this.timeZone)&&sqlCompareUtils_I(e,t[1],"<=",this.timeZone)}case"NOTBETWEEN":{const e=this._evaluateNode(r.left,o,u,l,c),t=this._evaluateNode(r.right,o,u,l,c);return null==e||null==t[0]||null==t[1]?null:sqlCompareUtils_I(e,t[0],"<",this.timeZone)||sqlCompareUtils_I(e,t[1],">",this.timeZone)}case"LIKE":return WhereClause_L(this._evaluateNode(r.left,o,u,l,c),this._evaluateNode(r.right,o,u,l,c),r.escape);case"NOT LIKE":return WhereClause_b(WhereClause_L(this._evaluateNode(r.left,o,u,l,c),this._evaluateNode(r.right,o,u,l,c),r.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return sqlCompareUtils_I(this._evaluateNode(r.left,o,u,l,c),this._evaluateNode(r.right,o,u,l,c),r.operator,this.timeZone);case"-":case"+":case"*":case"/":case"||":return sqlArithmeticUtils_d(r.operator,this._evaluateNode(r.left,o,u,l,c),this._evaluateNode(r.right,o,u,l,c),this.timeZone)}case"null":case"boolean":case"string":case"number":return r.value;case"date":return r.parsedValue??=$(r.value,"unknown"),r.parsedValue;case"timestamp":return r.parsedValue??=sqlDateParsingUtils_D(r.value,"unknown"),r.parsedValue;case"time":return O(r.value);case"current-time":return"date"===r.mode?WhereClause_F.currentDate(this.timeZone):"time"===r.mode?WhereClause_F.currentTime(this.timeZone):WhereClause_F.currentTimestamp(this.timeZone);case"current-user":return c??null;case"column-reference":return WhereClause_R(o,r.column,this.fieldsIndex,u);case"data-type":return r.value;case"function":{if(this.isAggregate&&(0,AggregateFunctions.M)(r.name,r.args.value.length)){const e=[];for(const t of r.args?.value||[]){const r=[];for(const e of l||[])r.push(this._evaluateNode(t,e,u,null,c));e.push(r)}return(0,AggregateFunctions.s)(r.name,e)}const a=this._evaluateNode(r.args,o,u,l,c);return StandardizedFunctions_p(r.name,a,this.timeZone)}}throw new errorSupport.L8(errorSupport.Z7.UnsupportedSyntax,{node:r.type})}}function WhereClause_Z(e){return!0===e}function WhereClause_x(e){return Array.isArray(e)?e:[e]}function WhereClause_b(e){return null!==e?!0!==e:null}function WhereClause_A(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function WhereClause_E(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function WhereClause_U(e,t,r){if(null==e)return null;let a=!1;for(const s of t)if(null==s)a=null;else{if(e===s){a=!0;break}if(sqlCompareUtils_O(e)&&sqlCompareUtils_O(s)&&(a=sqlCompareUtils_I(e,s,"="),a))break}return a}const WhereClause_k="-[]/{}()*+?.\\^$|";var WhereClause_V;function WhereClause_L(e,t,r){return null==e?null:function WhereClause_q(e,t){const r=t;let a="",s=WhereClause_V.Normal;for(let i=0;i<e.length;i++){const t=e.charAt(i);switch(s){case WhereClause_V.Normal:t===r?s=WhereClause_V.Escaped:WhereClause_k.includes(t)?a+="\\"+t:a+="%"===t?".*":"_"===t?".":t;break;case WhereClause_V.Escaped:WhereClause_k.includes(t)?a+="\\"+t:a+=t,s=WhereClause_V.Normal}}return new RegExp("^"+a+"$","m")}(t,r).test(e)}function WhereClause_R(e,t,a,s){if("getAttributeSQL"in s)return s.getAttributeSQL(e,t);const i=s.getAttribute(e,t),n=a?.get(t);return null==i||"esriFieldTypeDate"!==n?.type&&"date"!==n?.type?null==i||"esriFieldTypeDateOnly"!==n?.type&&"date-only"!==n?.type?null==i||"esriFieldTypeTimeOnly"!==n?.type&&"time-only"!==n?.type?null==i||"esriFieldTypeTimestampOffset"!==n?.type&&"timestamp-offset"!==n?.type?i:new SqlTimestampOffset.g(i):TimeOnly.k.fromReader(i):DateOnly.n.fromReader(i):T(new Date(i),a?.getLuxonTimeZone(n.name)??luxon.mQ.utcInstance)}!function(e){e[e.Normal=0]="Normal",e[e.Escaped=1]="Escaped"}(WhereClause_V||(WhereClause_V={}));const WhereClause_C={getAttribute:(e,t)=>(function WhereClause_j(e){return e&&"object"==typeof e.attributes}(e)?e.attributes:e)[t]}},"./node_modules/@arcgis/core/core/sql/errorSupport.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L8:()=>n,Z7:()=>a});var a,e,_string_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/string.js");(e=a||(a={})).InvalidFunctionParameters="InvalidFunctionParameters",e.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",e.UnsupportedSqlFunction="UnsupportedSqlFunction",e.UnsupportedOperator="UnsupportedOperator",e.UnsupportedSyntax="UnsupportedSyntax",e.UnsupportedIsRhs="UnsupportedIsRhs",e.UnsupportedIsLhs="UnsupportedIsLhs",e.InvalidDataType="InvalidDataType",e.CannotCastValue="CannotCastValue",e.FunctionNotRecognized="FunctionNotRecognized",e.InvalidTime="InvalidTime",e.InvalidParameterCount="InvalidParameterCount",e.InvalidTimeStamp="InvalidTimeStamp",e.InvalidDate="InvalidDate",e.InvalidOperator="InvalidOperator",e.IllegalInterval="IllegalInterval",e.YearMonthIntervals="YearMonthIntervals",e.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",e.MissingStatisticParameters="MissingStatisticParameters";const t={[a.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[a.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[a.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[a.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[a.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[a.UnsupportedOperator]:"Unsupported operator - {operator}",[a.UnsupportedSyntax]:"Unsupported syntax - {node}",[a.UnsupportedSqlFunction]:"Sql function not found = {function}",[a.InvalidDataType]:"Invalid sql data type",[a.InvalidDate]:"Invalid date encountered",[a.InvalidOperator]:"Invalid operator encountered",[a.InvalidTime]:"Invalid time encountered",[a.IllegalInterval]:"Illegal interval",[a.FunctionNotRecognized]:"Function not recognized",[a.InvalidTimeStamp]:"Invalid timestamp encountered",[a.InvalidParameterCount]:"Invalid parameter count for call to {name}",[a.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[a.YearMonthIntervals]:"Year-Month Intervals not supported",[a.CannotCastValue]:"Cannot cast value to the required data type"};class n extends Error{constructor(a,r){super((0,_string_js__WEBPACK_IMPORTED_MODULE_0__.HC)(t[a],r)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,n)}}}}]);