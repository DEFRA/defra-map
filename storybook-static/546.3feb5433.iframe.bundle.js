"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[546],{"./node_modules/@arcgis/core/core/memoryEstimations.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Qf:()=>i,Qh:()=>u,RS:()=>n,ez:()=>a,i5:()=>y,lM:()=>e,qK:()=>s});var _typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/typedArrayUtil.js");const n=16;function e(r){if(!r)return 0;let t=s;for(const n in r)r.hasOwnProperty(n)&&(t+=f(r[n],!1));return t}function u(r){if(!r)return 0;if("number"==typeof r[0])return i(r);if(Array.isArray(r))return function o(r){const t=r.length;if(0===t||"number"==typeof r[0])return c(r,8);let n=a;for(let e=0;e<t;e++)n+=f(r[e]);return n}(r);let t=s;for(const n in r)r.hasOwnProperty(n)&&(t+=f(r[n]));return t}function f(r,e=!0){switch(typeof r){case"object":return e?u(r):s;case"string":return function t(r){return 32+r.length}(r);case"number":return n;case"boolean":return 4;default:return 8}}function i(...t){return t.reduce(((t,e)=>t+(e?(0,_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__.iu)(e)?e.byteLength+y:Array.isArray(e)?c(e,n):0:0)),0)}function c(r,t){return a+r.length*t}const s=32,a=16,y=145},"./node_modules/@arcgis/core/core/uuid.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AG:()=>e,lk:()=>n,vD:()=>o,yS:()=>r});const t="randomUUID"in crypto;function n(){if(t)return crypto.randomUUID();const n=crypto.getRandomValues(new Uint16Array(8));n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;const r=t=>n[t].toString(16).padStart(4,"0");return r(0)+r(1)+"-"+r(2)+"-"+r(3)+"-"+r(4)+"-"+r(5)+r(6)+r(7)}function r(){return`{${n().toUpperCase()}}`}function o(){return`{${n()}}`}function e(t){const n=t.toUpperCase();return"{"!==t[0]?`{${n}}`:n}},"./node_modules/@arcgis/core/layers/support/FieldsIndex.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Z});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/core/MapUtils.js"),_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/sql/UnknownTimeZone.js"),_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldUtils.js"),_time_constants_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/time/constants.js"),_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/time/timeZoneUtils.js"),luxon__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/luxon/src/luxon.js");const T=new Map;class Z{static fromJSON(e){return new Z(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new Z(e.fields??[],S(e))}static fromLayerJSON(e){return new Z(e.fields??[],S(e))}constructor(e=[],i){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const t=[];for(const s of this.fields){const e=s?.name,i=M(e);if(e&&i){const n=w(e);this._fieldsMap.set(e,s),this._fieldsMap.set(n,s),this._normalizedFieldsMap.set(i,s),t.push(`${n}:${s.type}:${this._timeZoneByFieldName?.get(e)}`),(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.vE)(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.WA)(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.te)(s)||(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.Xz)(s)||(s.editable=null==s.editable||!!s.editable,s.nullable=null==s.nullable||!!s.nullable)}}t.sort(),this.uid=t.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.te)(e)||(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.Xz)(e)||e.nullable||void 0!==(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(w(e))??this._normalizedFieldsMap.get(M(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(i){const s=this.get(i&&"string"!=typeof i?i.name:i);return s?this._timeZoneByFieldName?this._timeZoneByFieldName.get(s.name):"date"===s.type||"esriFieldTypeDate"===s.type?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.A("getTimeZone:no-timezone-information",`no time zone information for field '${s.name}'`)),_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.n$):N.has(s.type)?_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.L5:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.L5?_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_3__.GB.instance:i===_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.n$?luxon__WEBPACK_IMPORTED_MODULE_7__.mQ.utcInstance:(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_8__.tE)(T,i,(()=>luxon__WEBPACK_IMPORTED_MODULE_7__.oh.create(i))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__.A.isSerializable(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function w(e){return e.trim().toLowerCase()}function M(e){return(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.rS)(e)?.toLowerCase()??""}const N=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function S(e){const i=new Map;if(!e.fields)return i;const t=!0===e.datesInUnknownTimezone,{timeInfo:s,editFieldsInfo:n}=e,r=(s?"startField"in s?s.startField:s.startTimeField:"")??"",l=(s?"endField"in s?s.endField:s.endTimeField:"")??"",o=function g(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_6__.ZS)(e.dateFieldsTimeReference):null,d=n?function y(e){return"timeZone"in e}(n)?n.timeZone??o:n.dateFieldsTimeReference?(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_6__.ZS)(n.dateFieldsTimeReference):o??_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.n$:null,a=s?function _(e){return"timeZone"in e}(s)?s.timeZone??o:s.timeReference?(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_6__.ZS)(s.timeReference):o:null,m=new Map([[w(n?.creationDateField??""),d],[w(n?.editDateField??""),d],[w(r),a],[w(l),a]]);for(const{name:u,type:f}of e.fields)if(N.has(f))i.set(u,_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.L5);else if("date"!==f&&"esriFieldTypeDate"!==f)i.set(u,null);else if(t)i.set(u,_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.L5);else{const e=m.get(w(u??""))??o;i.set(u,e)}return i}},"./node_modules/@arcgis/core/support/arcadeUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Dictionary:()=>Dictionary.A,Voxel:()=>c,arcade:()=>arcade.h,arcadeFeature:()=>Feature.A,convertFeatureLayerToFeatureSet:()=>W,convertJsonToArcade:()=>Y,convertMapToFeatureSetCollection:()=>X,convertServiceUrlToWorkspace:()=>Q,createExecContext:()=>V,createFeature:()=>O,createFunction:()=>J,createSyntaxTree:()=>k,dependsOnView:()=>B,enableFeatureSetOperations:()=>ne,enableGeometryOperations:()=>ee,evalSyntaxTree:()=>q,executeAsyncFunction:()=>L,executeFunction:()=>G,extractFieldNames:()=>U,getArcadeType:()=>z,getViewInfo:()=>K,hasGeometryFunctions:()=>le,hasGeometryOperations:()=>se,hasVariable:()=>H,loadScriptDependencies:()=>_,updateExecContext:()=>Z});var arcade=__webpack_require__("./node_modules/@arcgis/core/chunks/arcade.js"),ArcadeDate=__webpack_require__("./node_modules/@arcgis/core/arcade/ArcadeDate.js"),arcadeEnvironment=__webpack_require__("./node_modules/@arcgis/core/arcade/arcadeEnvironment.js"),Dictionary=__webpack_require__("./node_modules/@arcgis/core/arcade/Dictionary.js"),Feature=__webpack_require__("./node_modules/@arcgis/core/arcade/Feature.js"),languageUtils=__webpack_require__("./node_modules/@arcgis/core/chunks/languageUtils.js"),executionError=__webpack_require__("./node_modules/@arcgis/core/arcade/executionError.js"),ImmutableArray=__webpack_require__("./node_modules/@arcgis/core/arcade/ImmutableArray.js"),guards=__webpack_require__("./node_modules/@arcgis/core/support/guards.js");const n="Voxel.Position",a="Voxel.LocalTime";class c{constructor(t,e){this._graphic=t,this._timeZone=e,this.arcadeDeclaredClass="esri.arcade.Voxel",this._layer=t.layer}getPosition(){return void 0!==this._position?this._position:this._position=function l(t){const s=t.getAttribute(n);if("string"!=typeof s)throw new executionError.D$(null,executionError.TX.InvalidParameter,null);const o=JSON.parse(s);if(!Array.isArray(o)||"number"!=typeof o[0]||"number"!=typeof o[1]||"number"!=typeof o[2])throw new executionError.D$(null,executionError.TX.InvalidParameter,null);return new ImmutableArray.A(o)}(this._graphic)}getLocalTime(){return void 0!==this._localTime?this._localTime:this._localTime=function u(r,s){const n=r.getAttribute(a);if(null==n)return null;if(!(0,guards.$P)(n))throw new executionError.D$(null,executionError.TX.InvalidParameter,null);return ArcadeDate.lY.dateJSAndZoneToArcadeDate(n,s)}(this._graphic,this._timeZone??"system")}keys(){return this._layer.fields.map((t=>t.name)).sort()}hasField(t){return this._layer.fieldsIndex.has(t)}field(t){const r=this._layer.fieldsIndex?.get(t)?.name;if(null==r)throw new executionError.D$(null,executionError.TX.FieldNotFound,null,{key:t});switch(r){case n:return this.getPosition();case a:return this.getLocalTime()}return this._graphic.attributes[r]??null}castToText(t=!1){const e={...this._graphic.attributes};e[n]=this.getPosition(),a in e&&(e[a]=this.getLocalTime());for(const i of Object.keys(e))this._layer.fieldsIndex?.has(i)||delete e[i];return(0,languageUtils.c)(e,{useNumbersForDates:t})}}var lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),DateOnly=__webpack_require__("./node_modules/@arcgis/core/core/sql/DateOnly.js"),TimeOnly=__webpack_require__("./node_modules/@arcgis/core/core/sql/TimeOnly.js"),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),Multipoint=__webpack_require__("./node_modules/@arcgis/core/geometry/Multipoint.js"),Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js"),Polyline=__webpack_require__("./node_modules/@arcgis/core/geometry/Polyline.js");const M={vars:{$feature:"any",$view:"any"},spatialReference:null};function T(e){return e.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function z(e){return null==e?null:(0,guards.cy)(e)||(0,languageUtils.m)(e)?"array":(0,languageUtils.g)(e)?"date":(0,guards.Kg)(e)?"text":(0,guards.Lm)(e)?"boolean":(0,guards.Et)(e)?"number":e instanceof Dictionary.A?"dictionary":(0,languageUtils.n)(e)?"feature":e instanceof Point.default?"point":e instanceof Polygon.A?"polygon":e instanceof Polyline.A?"polyline":e instanceof Multipoint.A?"multipoint":e instanceof Extent.default?"extent":e instanceof DateOnly.n?"dateOnly":e instanceof TimeOnly.k?"time":(0,languageUtils.p)(e)?"featureSet":(0,languageUtils.o)(e)?"featureSetCollection":null}function k(n){if(!n)return null;try{return(0,arcade.p)(n)}catch(r){}return null}function J(e,r){const t="string"==typeof e?k(e):e;if(!t)return null;try{return r=r||(0,lang.o8)(M),(0,arcade.c)(t,r)}catch(o){}return null}function V(e,n,r){return{vars:{$feature:null==e?new Feature.A:Feature.A.createFromGraphic(e,r),$view:n?.view},spatialReference:n?.sr,timeZone:r??null}}function O(e,n,r){return Feature.A.createFromGraphicLikeObject(n,e,r,null)}function Z(e,n){null!=e.vars&&(e.vars.$feature=n)}function q(e,n){let t;try{t=(0,arcade.e)(e,n)}catch(o){t=null}return t}function G(e,n){let r;try{r=e?e(n):null}catch(t){r=null}return r}function L(e,n){try{return e?e(n):Promise.resolve(null)}catch(r){return Promise.resolve(null)}}const N=new Set(["$feature","$aggregatedFeatures","$voxel"].map((e=>(0,arcadeEnvironment.X)(e))));function U(e,n){if(!e)return[];const r="string"==typeof e?k(e):e;if(!r)return[];const o=(0,arcade.a)(r).filter((({varId:e})=>N.has(e))).map((({memberNamePattern:e})=>e)).flatMap((e=>{if(e.includes("*")){if(null==n)return[];const r=new RegExp(`^${e.split(/\*+/).map(T).join(".*")}$`,"i");return n.filter((e=>r.test(e)))}return e.toLowerCase()}));return[...new Set(o.sort())]}function B(e){return(0,arcade.r)(e,"$view")}function H(e,n){return!!e&&(0,arcade.r)(e,n)}function K(e){if(!e||null==e.spatialReference&&(null==e.scale||null==e.viewingMode))return;let n,r;const{timeProperties:t,timeZone:o}=e;if(null!=t){const{currentStart:e,currentEnd:a}=t;null!=o?(n=null!=e?ArcadeDate.lY.dateJSAndZoneToArcadeDate(e,o):null,r=null!=a?ArcadeDate.lY.dateJSAndZoneToArcadeDate(a,o):null):(n=null!=e?ArcadeDate.lY.dateJSToArcadeDate(e):null,r=null!=a?ArcadeDate.lY.dateJSToArcadeDate(a):null)}return{view:e.viewingMode&&null!=e.scale?new Dictionary.A({viewingMode:e.viewingMode,scale:e.scale,timeProperties:null!=n||null!=r?new Dictionary.A({currentStart:n,currentEnd:r,startIncluded:!0,endIncluded:!0}):null}):null,sr:e.spatialReference}}function Q({url:e,spatialReference:n,lrucache:r,interceptor:t}){const o=(0,arcade.f)();return o?o.createFeatureSetCollectionFromService(e,n,r,t):null}function W({layer:e,spatialReference:n,outFields:r,returnGeometry:t,lrucache:o,interceptor:a}){if(null===e)return null;const i=(0,arcade.f)();return i?i.constructFeatureSet(e,n,r,t??!0,o,a):null}function X(e){if(null===e?.map)return null;const n=(0,arcade.f)();return n?n.createFeatureSetCollectionFromMap(e.map,e.spatialReference,e.lrucache,e.interceptor):null}function Y(e,n){return Dictionary.A.convertJsonToArcade(e,n)}function _(e,n,r=[]){return(0,arcade.l)(e,n,r)}function ee(){return(0,arcade.b)()}function ne(){return(0,arcade.d)()}function ae(e,n){if(!e)return!1;if("string"==typeof e)return n(e);const r=e;if(function re(e){return"type"in e&&("class-breaks"===e.type||"dictionary"===e.type||"dot-density"===e.type||"pie-chart"===e.type||"simple"===e.type||"unique-value"===e.type)}(r)){if("dot-density"===r.type){const e=r.attributes?.some((e=>n(e.valueExpression)));if(e)return e}const e=r.visualVariables,t=!!e&&e.some((e=>{let r=n(e.valueExpression);return"size"===e.type&&(ce(e.minSize)&&(r=r||n(e.minSize.valueExpression)),ce(e.maxSize)&&(r=r||n(e.maxSize.valueExpression))),r}));return!(!("valueExpression"in r)||!n(r.valueExpression))||t}if(function te(e){return"esri.layers.support.LabelClass"===e.declaredClass}(r)){const e=r.labelExpressionInfo?.expression;return!(!e||!n(e))||!1}return!!function oe(e){return"esri.PopupTemplate"===e.declaredClass}(r)&&(!!r.expressionInfos&&r.expressionInfos.some((e=>n(e.expression)))||Array.isArray(r.content)&&r.content.some((e=>"expression"===e.type&&n(e.expressionInfo?.expression))))}function ie(e){const n=k(e);return!!n&&(0,arcade.s)(n)}function le(e){return ae(e,ie)}function ue(e){const n=k(e);return!!n&&(0,arcade.g)(n)}function se(e){return ae(e,ue)}function ce(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}}}]);