"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[9790],{"./node_modules/@arcgis/core/chunks/HUDMaterial.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>V,b:()=>E,c:()=>U});var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js"),_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js"),_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js"),_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/Ellipsoid.js"),_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_hud_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_hud_HUD_glsl_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_hud_HUDOcclusionPass_glsl_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_hud_HUDVisibility_glsl_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDVisibility.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4BindUniform.js"),_views_3d_webgl_engine_core_shaderModules_Float4DrawUniform_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4DrawUniform.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js"),_views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js"),_views_3d_webgl_engine_core_shaderModules_Texture2DBindUniform_js__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DBindUniform.js"),_views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js"),_views_3d_webgl_engine_lib_OITPass_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OITPass.js"),_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),_views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/ShaderBuilder.js"),_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("./node_modules/@arcgis/core/webscene/support/AlphaCutoff.js");function E(o){const i=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_28__.N5,E=o.signedDistanceFieldEnabled;i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUD_glsl_js__WEBPACK_IMPORTED_MODULE_8__.Q,o),i.vertex.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_5__.rA,o);const{occlusionPass:H,output:V,oitPass:_}=o;if(H)return i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUDOcclusionPass_glsl_js__WEBPACK_IMPORTED_MODULE_9__.I,o),i;const{vertex:I,fragment:q}=i;i.include(_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_15__.Y6),i.include(_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_12__.A,o),i.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_6__.g,o),i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUDVisibility_glsl_js__WEBPACK_IMPORTED_MODULE_10__.y),q.include(_views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_14__.W),q.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_13__.a),i.varyings.add("vcolor","vec4"),i.varyings.add("vtc","vec2"),i.varyings.add("vsize","vec2");const k=V===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.V.Highlight,G=k&&o.occlusionTestEnabled;G&&i.varyings.add("voccluded","float"),I.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_18__.I("viewport",(e=>e.camera.fullViewport)),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_17__.G("screenOffset",((o,i)=>(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__.hZ)(R,2*o.screenOffset[0]*i.camera.pixelRatio,2*o.screenOffset[1]*i.camera.pixelRatio))),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_17__.G("anchorPosition",(e=>U(e))),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_20__.E("materialColor",(e=>e.color)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_22__.m("materialRotation",(e=>e.rotation))),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_16__.Nz)(I),E&&(I.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_20__.E("outlineColor",(e=>e.outlineColor))),q.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_20__.E("outlineColor",(e=>M(e)?e.outlineColor:_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__.uY)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_22__.m("outlineSize",(e=>M(e)?e.outlineSize:0)))),o.horizonCullingEnabled&&I.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4DrawUniform_js__WEBPACK_IMPORTED_MODULE_19__.V("pointDistanceSphere",((e,o)=>{const i=o.camera.eye,r=e.origin;return(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__.fA)(r[0]-i[0],r[1]-i[1],r[2]-i[2],_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_3__.$O.radius)}))),o.pixelSnappingEnabled&&I.include(_views_3d_webgl_engine_core_shaderLibrary_hud_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_7__.K),o.hasScreenSizePerspective&&((0,_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_15__.pM)(I),(0,_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_15__.OH)(I)),o.debugDrawLabelBorder&&i.varyings.add("debugBorderCoords","vec4"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_27__.r.UV0,"vec2"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_27__.r.COLOR,"vec4"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_27__.r.SIZE,"vec2"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_27__.r.ROTATION,"float"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_27__.r.FEATUREATTRIBUTE,"vec4"),I.code.add(o.horizonCullingEnabled?_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`bool behindHorizon(vec3 posModel) {
vec3 camToEarthCenter = pointDistanceSphere.xyz - localOrigin;
vec3 camToPos = pointDistanceSphere.xyz + posModel;
float earthRadius = pointDistanceSphere.w;
float a = dot(camToPos, camToPos);
float b = dot(camToPos, camToEarthCenter);
float c = dot(camToEarthCenter, camToEarthCenter) - earthRadius * earthRadius;
return  b > 0.0 && b < a && b * b  > a * c;
}`:_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`bool behindHorizon(vec3 posModel) { return false; }`),I.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      forwardObjectAndLayerIdColor();

      if (rejectBySlice(projectAux.posModel)) {
        // Project outside of clip plane
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
        return;
      }

      if (behindHorizon(projectAux.posModel)) {
        // Project outside of clip plane
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
        return;
      }

      vec2 inputSize;
      ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(o.hasScreenSizePerspective,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
          inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);
          vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);`,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
          inputSize = size;
          vec2 screenOffsetScaled = screenOffset;`)}
      ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(o.vvSize,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`inputSize *= vvScale(featureAttribute).xx;`)}

      vec2 combinedSize = inputSize * pixelRatio;
      vec4 quadOffset = vec4(0.0);

      ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(o.occlusionTestEnabled,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
      bool visible = testHUDVisibility(posProj);
      if (!visible) {
        vtc = vec2(0.0);
        ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(o.debugDrawLabelBorder,"debugBorderCoords = vec4(0.5, 0.5, 1.5 / combinedSize);")}
        return;
      }`)}
      ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(G,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`voccluded = visible ? 0.0 : 1.0;`)}
    `);const N=_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
      vec2 uv01 = floor(uv0);
      vec2 uv = uv0 - uv01;
      quadOffset.xy = (uv01 - anchorPosition) * 2.0 * combinedSize;

      ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(o.hasRotation,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
          float angle = radians(materialRotation + rotation);
          float cosAngle = cos(angle);
          float sinAngle = sin(angle);
          mat2 rotate = mat2(cosAngle, -sinAngle, sinAngle,  cosAngle);

          quadOffset.xy = rotate * quadOffset.xy;
        `)}

      quadOffset.xy = (quadOffset.xy + screenOffsetScaled) / viewport.zw * posProj.w;
  `,Z=o.pixelSnappingEnabled?E?_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;`:_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`posProj += quadOffset;
if (inputSize.x == size.x) {
posProj = alignToPixelOrigin(posProj, viewport.zw);
}`:_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`posProj += quadOffset;`;I.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
    ${N}
    ${o.vvColor?"vcolor = interpolateVVColor(featureAttribute.y) * materialColor;":"vcolor = color / 255.0 * materialColor;"}

    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(V===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.V.ObjectAndLayerIdColor,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`vcolor.a = 1.0;`)}

    bool alphaDiscard = vcolor.a < ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_29__.Q)};
    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(E,`alphaDiscard = alphaDiscard && outlineColor.a < ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_29__.Q)};`)}
    if (alphaDiscard) {
      // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent
      gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
      return;
    } else {
      ${Z}
      gl_Position = posProj;
    }

    vtc = uv;

    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(o.debugDrawLabelBorder,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`debugBorderCoords = vec4(uv01, 1.5 / combinedSize);`)}
    vsize = inputSize;
  `),q.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_25__.N("tex",(e=>e.texture))),o.occludedFragmentFade&&(q.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DBindUniform_js__WEBPACK_IMPORTED_MODULE_24__.x("depthMap",(e=>e.mainDepth))),q.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_21__.U("occludedOpacity",(e=>e.hudOccludedFragmentOpacity))));const J=o.debugDrawLabelBorder?_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`(isBorder > 0.0 ? 0.0 : ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_29__.Q)})`:_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_29__.Q),K=_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(o.debugDrawLabelBorder,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));`)}

    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(o.sampleSignedDistanceFieldTexelCenter,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
      float txSize = float(textureSize(tex, 0).x);
      float texelSize = 1.0 / txSize;

      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel
      vec2 scaleFactor = (vsize - txSize) * texelSize;
      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;`,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`vec2 samplePos = vtc;`)}

    ${E?_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
      vec4 fillPixelColor = vcolor;

      // Get distance and map it into [-0.5, 0.5]
      float d = rgbaTofloat(texture(tex, samplePos)) - 0.5;

      // Distance in output units (i.e. pixels)
      float dist = d * vsize.x;

      // Create smooth transition from the icon into its outline
      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);
      fillPixelColor.a *= fillAlphaFactor;

      if (outlineSize > 0.25) {
        vec4 outlinePixelColor = outlineColor;
        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);

        // Create smooth transition around outline
        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);
        outlinePixelColor.a *= outlineAlphaFactor;

        if (
          outlineAlphaFactor + fillAlphaFactor < ${J} ||
          fillPixelColor.a + outlinePixelColor.a < ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_29__.Q)}
        ) {
          discard;
        }

        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)
        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);
        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +
          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);

        ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(!k,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`fragColor = vec4(compositeColor, compositeAlpha);`)}
      } else {
        if (fillAlphaFactor < ${J}) {
          discard;
        }

        ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(!k,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`fragColor = premultiplyAlpha(fillPixelColor);`)}
      }

      // visualize SDF:
      // fragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);
      `:_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
          vec4 texColor = texture(tex, vtc, -0.5);
          if (texColor.a < ${J}) {
            discard;
          }
          ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(!k,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`fragColor = texColor * premultiplyAlpha(vcolor);`)}
          `}

    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(o.occludedFragmentFade&&!k,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
        float zSample = texelFetch(depthMap, ivec2(gl_FragCoord.xy), 0).x;
        if (zSample < gl_FragCoord.z) {
          fragColor *= occludedOpacity;
        }
        `)}

    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(!k&&o.debugDrawLabelBorder,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`fragColor = mix(fragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder * 0.5);`)}
  `;switch(V){case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.V.Color:case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.V.ColorEmission:i.outputs.add("fragColor","vec4",0),V===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.V.ColorEmission&&i.outputs.add("fragEmission","vec4",1),_===_views_3d_webgl_engine_lib_OITPass_js__WEBPACK_IMPORTED_MODULE_26__.Y.ColorAlpha&&i.outputs.add("fragAlpha","float",V===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.V.ColorEmission?2:1),q.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
        ${K}
        ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(_===_views_3d_webgl_engine_lib_OITPass_js__WEBPACK_IMPORTED_MODULE_26__.Y.FrontFace,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`fragColor.rgb /= fragColor.a;`)}
        ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(V===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.V.ColorEmission,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`fragEmission = vec4(0.0);`)}
        ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(_===_views_3d_webgl_engine_lib_OITPass_js__WEBPACK_IMPORTED_MODULE_26__.Y.ColorAlpha,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`fragAlpha = fragColor.a;`)}`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.V.ObjectAndLayerIdColor:q.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
        ${K}
        outputObjectAndLayerIdColor();`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__.V.Highlight:i.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_11__.Q,o),q.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`
        ${K}
        outputHighlight(${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(G,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`voccluded == 1.0`,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.H`false`)});`)}return i}function M(e){return e.outlineColor[3]>0&&e.outlineSize>0}function U(e){return e.textureIsSignedDistanceField?function H(o,i,r){(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__.hZ)(r,o[0]*(i[2]-i[0])+i[0],o[1]*(i[3]-i[1])+i[1])}(e.anchorPosition,e.distanceFieldBoundingBox,R):(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__.C)(R,e.anchorPosition),R}const R=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__.vt)(),V=Object.freeze(Object.defineProperty({__proto__:null,build:E,calculateAnchorPosition:U},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/geometry/projection/projectVectorToPoint.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>t});var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js"),_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js"));function t(r,e,t){return!!(0,_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_2__.F)(r,e,i,t.spatialReference)&&(t.x=i[0],t.y=i[1],t.z=i[2],!0)}const i=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.vt)()},"./node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>t});var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),_webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js");function t(e,t=0){const n=e.stride;return Array.from(e.fields.keys()).map((s=>{const i=e.fields.get(s),u=i.constructor.ElementCount,f=o(i.constructor.ElementType),c=i.offset,m=i.optional?.glNormalized??!1;return new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__._(s,u,f,c,n,m,t)}))}function o(e){const r=n[e];if(r)return r;throw new Error("BufferType not supported in WebGL")}const n={u8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.UNSIGNED_BYTE,u16:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.UNSIGNED_SHORT,u32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.UNSIGNED_INT,i8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.BYTE,i16:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.SHORT,i32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.INT,f32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.FLOAT}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>i});var _AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl.js"),_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js"),_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js");function i(i,t){const{vertex:s,fragment:p}=i;i.include(_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_1__.Z,t),s.include(_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__.K),s.main.add(_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_2__.H`vec4 posProjCenter;
if (dot(position, position) > 0.0) {
ProjectHUDAux projectAux;
vec4 posProj = projectPositionHUD(projectAux);
posProjCenter = alignToPixelCenter(posProj, viewport.zw);
forwardViewPosDepth(projectAux.posView);
vec3 vpos = projectAux.posModel;
if (rejectBySlice(vpos)) {
posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
}
} else {
posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
}
gl_Position = posProjCenter;
gl_PointSize = 1.0;`),p.main.add(_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_2__.H`fragColor = vec4(1);
if(discardByTerrainDepth()) {
fragColor.g = 0.5;
}`)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/effects/RenderPlugin.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cc:()=>o,RW:()=>u});var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js");const t={required:[]};_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__.V.Depth;class n extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__.A{precompile(e){return!!this.acquireTechniques(e)}consumes(){return t}get usedMemory(){return 0}get isDecoration(){return!1}get running(){return!1}modify(e){}get numGeometries(){return 0}get hasOccludees(){return!1}get hasEmissions(){return!1}forEachGeometry(e){}queryRenderOccludedState(e){return!1}}class u extends n{}class o extends n{}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexArrayObject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>r});var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/VertexArrayObject.js");class r extends _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_0__.Z{}},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/HUDMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>ae});var mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),mat3=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js"),mat3f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f64.js"),mat4=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js"),mat4f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js"),vec32=__webpack_require__("./node_modules/@arcgis/core/chunks/vec32.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js");function mat4_t(t){return function n(n){return n instanceof Float32Array&&n.length>=16}(t)||function r(n){return Array.isArray(n)&&n.length>=16}(t)}var aaBoundingRect=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),BufferView=__webpack_require__("./node_modules/@arcgis/core/geometry/support/buffer/BufferView.js"),FastSymbolUpdates=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/support/FastSymbolUpdates.js"),debugFlags=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/debugFlags.js"),InterleavedLayout=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js"),ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),HUD_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl.js"),olidUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/effects/geometry/olidUtils.js"),GLTextureMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLTextureMaterial.js"),Material=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),screenSizePerspectiveUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/screenSizePerspectiveUtils.js"),Util=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");class c{constructor(){this.scale=0,this.factor=0,this.minScaleFactor=0}}var bufferWriterUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/bufferWriterUtils.js"),MaterialUtil=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js"),HUDMaterial_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/HUDMaterial.glsl.js"),ReloadableShaderModule=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js"),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),OITPass=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OITPass.js"),OrderIndependentTransparency=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");class h extends ShaderTechnique.w{constructor(e,r){super(e,r,new ReloadableShaderModule.$(HUDMaterial_glsl.H,(()=>__webpack_require__.e(8451).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterial.glsl.js"))))),this.primitiveType=r.occlusionPass?enums.WR.POINTS:enums.WR.TRIANGLES}initializePipeline(s){const{oitPass:o,hasPolygonOffset:n,draped:a,output:h,depthTestEnabled:T,occlusionPass:g}=s,j=o===OITPass.Y.NONE,b=o===OITPass.Y.ColorAlpha,O=h===ShaderOutput.V.Highlight,P=T&&!a&&!b&&!g&&!O;return(0,renderState.Ey)({blending:(0,ShaderOutput.RN)(h)?j?renderState.Os:(0,OrderIndependentTransparency.ez)(o):null,depthTest:T&&!a?{func:enums.MT.LEQUAL}:null,depthWrite:P?renderState.Uy:null,drawBuffers:(0,OrderIndependentTransparency.m6)(o,h),colorWrite:renderState.kn,polygonOffset:n?f:null})}}const f={factor:0,units:-4};var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),TextureCoordinateAttribute_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js"),Emissions_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/Emissions.glsl.js"),ShaderTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),DefaultTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js");class HUDMaterialTechniqueConfiguration_r extends DefaultTechniqueConfiguration.E{constructor(e){super(),this.spherical=e,this.screenCenterOffsetUnitsEnabled=!1,this.occlusionTestEnabled=!0,this.signedDistanceFieldEnabled=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.vvSize=!1,this.vvColor=!1,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.hasRotation=!1,this.debugDrawLabelBorder=!1,this.hasPolygonOffset=!1,this.depthTestEnabled=!0,this.pixelSnappingEnabled=!0,this.draped=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.occlusionPass=!1,this.occludedFragmentFade=!1,this.objectAndLayerIdColorInstanced=!1,this.horizonCullingEnabled=!0,this.isFocused=!0,this.textureCoordinateType=TextureCoordinateAttribute_glsl.I.None,this.emissionSource=Emissions_glsl.ZX.None,this.discardInvisibleFragments=!0,this.hasVvInstancing=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"screenCenterOffsetUnitsEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"occlusionTestEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"signedDistanceFieldEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"sampleSignedDistanceFieldTexelCenter",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"vvSize",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"vvColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasVerticalOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasScreenSizePerspective",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasRotation",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"debugDrawLabelBorder",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasPolygonOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"depthTestEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"pixelSnappingEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"draped",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"terrainDepthTest",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"cullAboveTerrain",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"occlusionPass",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"occludedFragmentFade",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"horizonCullingEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"isFocused",void 0);var AlphaCutoff=__webpack_require__("./node_modules/@arcgis/core/webscene/support/AlphaCutoff.js");class ae extends Material.im{constructor(e,t){super(e,De),this.produces=new Map([[RenderSlot.N.HUD_MATERIAL,e=>(0,ShaderOutput.Mb)(e)&&!this.parameters.drawAsLabel],[RenderSlot.N.LABEL_MATERIAL,e=>(0,ShaderOutput.Mb)(e)&&this.parameters.drawAsLabel],[RenderSlot.N.OCCLUSION_PIXELS,()=>this.parameters.occlusionTest],[RenderSlot.N.DRAPED_MATERIAL,e=>this.parameters.draped&&(0,ShaderOutput.Mb)(e)]]),this._visible=!0,this._configuration=new HUDMaterialTechniqueConfiguration_r(t)}getConfiguration(e,t){return this._configuration.output=e,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVerticalOffset=!!this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this._configuration.screenCenterOffsetUnitsEnabled="screen"===this.parameters.centerOffsetUnits,this._configuration.hasPolygonOffset=this.parameters.polygonOffset,this._configuration.draped=this.parameters.draped,this._configuration.occlusionTestEnabled=this.parameters.occlusionTest,this._configuration.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled,this._configuration.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField,this._configuration.sampleSignedDistanceFieldTexelCenter=this.parameters.sampleSignedDistanceFieldTexelCenter,this._configuration.hasRotation=this.parameters.hasRotation,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.occlusionPass=t.slot===RenderSlot.N.OCCLUSION_PIXELS,this._configuration.occludedFragmentFade=this.parameters.occludedFragmentFade,this._configuration.horizonCullingEnabled=this.parameters.horizonCullingEnabled,this._configuration.isFocused=this.parameters.isFocused,this._configuration.depthTestEnabled=this.parameters.depthEnabled||t.slot===RenderSlot.N.OCCLUSION_PIXELS,(0,ShaderOutput.RN)(e)&&(this._configuration.debugDrawLabelBorder=!!debugFlags.b.LABELS_SHOW_BORDER),this._configuration.oitPass=t.oitPass,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration}intersect(e,t,i,a,o,n){const{options:{selectionMode:c,hud:l,excludeLabels:S},point:T,camera:b}=i,{parameters:A}=this;if(!c||!l||S&&A.isLabel||!e.visible||!T)return;const{scaleX:E,scaleY:_}=this._getScreenScale(e,b.pixelRatio);(0,mat3.z0)(Te,t),e.attributes.has(VertexAttribute.r.FEATUREATTRIBUTE)&&function le(e){const t=e[0],s=e[1],i=e[2],r=e[3],a=e[4],o=e[5],n=e[6],c=e[7],l=e[8],f=1/Math.sqrt(t*t+s*s+i*i),h=1/Math.sqrt(r*r+a*a+o*o),p=1/Math.sqrt(n*n+c*c+l*l);return e[0]=t*f,e[1]=s*f,e[2]=i*f,e[3]=r*h,e[4]=a*h,e[5]=o*h,e[6]=n*p,e[7]=c*p,e[8]=l*p,e}(Te);const I=e.attributes.get(VertexAttribute.r.POSITION),R=e.attributes.get(VertexAttribute.r.SIZE),x=e.attributes.get(VertexAttribute.r.NORMAL),C=e.attributes.get(VertexAttribute.r.ROTATION),P=e.attributes.get(VertexAttribute.r.CENTEROFFSETANDDISTANCE);(0,Util.vA)(I.size>=3);const D=(0,HUDMaterial_glsl.c)(A),y="screen"===this.parameters.centerOffsetUnits;for(let s=0;s<I.data.length/I.size;s++){const e=s*I.size;(0,vec32.i)(pe,I.data[e],I.data[e+1],I.data[e+2]),(0,vec32.t)(pe,pe,t),(0,vec32.t)(pe,pe,b.viewMatrix);const a=s*P.size;if((0,vec32.i)(Ae,P.data[a],P.data[a+1],P.data[a+2]),!y&&(pe[0]+=Ae[0],pe[1]+=Ae[1],0!==Ae[2])){const e=Ae[2];(0,vec32.n)(Ae,pe),(0,vec32.d)(pe,pe,(0,vec32.h)(Ae,Ae,e))}const o=s*x.size;if((0,vec32.i)(ue,x.data[o],x.data[o+1],x.data[o+2]),ce(ue,Te,b,Ie),this._applyVerticalOffsetTransformationView(pe,Ie,b,he),b.applyProjection(pe,me),me[0]>-1){y&&(Ae[0]||Ae[1])&&(me[0]+=Ae[0]*b.pixelRatio,0!==Ae[1]&&(me[1]+=(0,screenSizePerspectiveUtils.m0)(Ae[1],he.factorAlignment)*b.pixelRatio),b.unapplyProjection(me,pe)),me[0]+=this.parameters.screenOffset[0]*b.pixelRatio,me[1]+=this.parameters.screenOffset[1]*b.pixelRatio,me[0]=Math.floor(me[0]),me[1]=Math.floor(me[1]);const e=s*R.size;Ce[0]=R.data[e],Ce[1]=R.data[e+1],(0,screenSizePerspectiveUtils.MD)(Ce,he.factor,Ce);const t=Re*b.pixelRatio;let a=0;A.textureIsSignedDistanceField&&(a=Math.min(A.outlineSize,.5*Ce[0])*b.pixelRatio/2),Ce[0]*=E,Ce[1]*=_;const o=s*C.size,c=A.rotation+C.data[o];if(fe(T,me[0],me[1],Ce,t,a,c,A,D)){const e=i.ray;if((0,vec32.t)(ge,pe,(0,mat4.B8)(ve,b.viewMatrix)),me[0]=T[0],me[1]=T[1],b.unprojectFromRenderScreen(me,pe)){const t=(0,vec3f64.vt)();(0,vec32.c)(t,e.direction);const s=1/(0,vec32.l)(t);(0,vec32.h)(t,t,s),n((0,vec32.j)(e.origin,pe)*s,t,-1,!0,1,ge)}}}}}intersectDraped(e,t,s,i,r,a){const o=e.attributes.get(VertexAttribute.r.POSITION),n=e.attributes.get(VertexAttribute.r.SIZE),c=e.attributes.get(VertexAttribute.r.ROTATION),l=this.parameters,f=(0,HUDMaterial_glsl.c)(l),{scaleX:h,scaleY:p}=this._getScreenScale(e,e.screenToWorldRatio),u=xe*e.screenToWorldRatio;for(let m=0;m<o.data.length/o.size;m++){const t=m*o.size,s=o.data[t],d=o.data[t+1],g=m*n.size;Ce[0]=n.data[g],Ce[1]=n.data[g+1];let O=0;l.textureIsSignedDistanceField&&(O=Math.min(l.outlineSize,.5*Ce[0])*e.screenToWorldRatio/2),Ce[0]*=h,Ce[1]*=p;const S=m*c.size,T=l.rotation+c.data[S];fe(i,s,d,Ce,u,O,T,l,f)&&r(a.dist,a.normal,-1,!1)}}createBufferWriter(){return new je}_updateScaleInfo(e,t,s){const i=this.parameters;null!=i.screenSizePerspective?(0,screenSizePerspectiveUtils.cJ)(s,t,i.screenSizePerspective,e.factor):(e.factor.scale=1,e.factor.factor=0,e.factor.minScaleFactor=0),null!=i.screenSizePerspectiveAlignment?(0,screenSizePerspectiveUtils.cJ)(s,t,i.screenSizePerspectiveAlignment,e.factorAlignment):(e.factorAlignment.factor=e.factor.factor,e.factorAlignment.scale=e.factor.scale,e.factorAlignment.minScaleFactor=e.factor.minScaleFactor)}applyShaderOffsetsView(e,t,s,i,r,a,o){const n=ce(t,s,r,Ie);return this._applyVerticalGroundOffsetView(e,n,r,o),this._applyVerticalOffsetTransformationView(o,n,r,a),this._applyPolygonOffsetView(o,n,i[3],r,o),this._applyCenterOffsetView(o,i,o),o}applyShaderOffsetsNDC(e,t,s,i,r){return this._applyCenterOffsetNDC(e,t,s,i),null!=r&&(0,vec32.c)(r,i),this._applyPolygonOffsetNDC(i,t,s,i),i}_applyPolygonOffsetView(t,s,i,r,a){const o=r.aboveGround?1:-1;let n=Math.sign(i);0===n&&(n=o);const c=o*n;if(this.parameters.shaderPolygonOffset<=0)return(0,vec32.c)(a,t);const l=(0,mathUtils.qE)(Math.abs(s.cosAngle),.01,1),f=1-Math.sqrt(1-l*l)/l/r.viewport[2];return(0,vec32.h)(a,t,c>0?f:1/f),a}_applyVerticalGroundOffsetView(e,t,s,i){const r=(0,vec32.l)(e),a=s.aboveGround?1:-1,o=s.computeRenderPixelSizeAtDist(r)*HUD_glsl.R,n=(0,vec32.h)(pe,t.normal,a*o);return(0,vec32.g)(i,e,n),i}_applyVerticalOffsetTransformationView(e,t,s,i){const r=this.parameters;if(!r.verticalOffset?.screenLength){if(r.screenSizePerspective||r.screenSizePerspectiveAlignment){const s=(0,vec32.l)(e);this._updateScaleInfo(i,s,t.cosAngle)}else i.factor.scale=1,i.factorAlignment.scale=1;return e}const a=(0,vec32.l)(e),o=r.screenSizePerspectiveAlignment??r.screenSizePerspective,n=(0,MaterialUtil.kE)(s,a,r.verticalOffset,t.cosAngle,o);return this._updateScaleInfo(i,a,t.cosAngle),(0,vec32.h)(t.normal,t.normal,n),(0,vec32.g)(e,e,t.normal)}_applyCenterOffsetView(e,t,s){const i="screen"!==this.parameters.centerOffsetUnits;return s!==e&&(0,vec32.c)(s,e),i&&(s[0]+=t[0],s[1]+=t[1],t[2]&&((0,vec32.n)(ue,s),(0,vec32.g)(s,s,(0,vec32.h)(ue,ue,t[2])))),s}_applyCenterOffsetNDC(e,t,s,i){const r="screen"!==this.parameters.centerOffsetUnits;return i!==e&&(0,vec32.c)(i,e),r||(i[0]+=t[0]/s.fullWidth*2,i[1]+=t[1]/s.fullHeight*2),i}_applyPolygonOffsetNDC(e,t,s,i){const r=this.parameters.shaderPolygonOffset;if(e!==i&&(0,vec32.c)(i,e),r){const e=s.aboveGround?1:-1,a=e*Math.sign(t[3]);i[2]-=(a||e)*r}return i}set visible(e){this._visible=e}get visible(){const{color:e,outlineSize:t,outlineColor:s}=this.parameters,i=e[3]>=AlphaCutoff.Q||t>=AlphaCutoff.Q&&s[3]>=AlphaCutoff.Q;return this._visible&&i}createGLMaterial(e){return new oe(e)}calculateRelativeScreenBounds(e,t,s=(0,aaBoundingRect.vt)()){return function ne(e,t,s,i){i[0]=e.anchorPosition[0]*-t[0]+e.screenOffset[0]*s,i[1]=e.anchorPosition[1]*-t[1]+e.screenOffset[1]*s}(this.parameters,e,t,s),s[2]=s[0]+e[0],s[3]=s[1]+e[1],s}_getScreenScale(e,t){const s=e.attributes.get(VertexAttribute.r.FEATUREATTRIBUTE);if(null==s)return{scaleX:t,scaleY:t};const i=(0,vec4f64.ci)(s.data,_e);return(0,FastSymbolUpdates.VC)(Ee,this.parameters,i),{scaleX:Ee[0]*t,scaleY:Ee[1]*t}}}class oe extends GLTextureMaterial.m8{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.getTechnique(h,e)}}function ce(e,t,i,r){return mat4_t(t)&&(t=(0,mat3.z0)(be,t)),(0,vec32.q)(r.normal,e,t),(0,vec32.t)(r.normal,r.normal,i.viewInverseTransposeMatrix),r.cosAngle=(0,vec32.f)(de,Pe),r}function fe(e,s,i,r,a,c,l,f,h){let p=s-a-r[0]*h[0],u=p+r[0]+2*a,m=i-a-r[1]*h[1],d=m+r[1]+2*a;const g=f.distanceFieldBoundingBox;return f.textureIsSignedDistanceField&&null!=g&&(p+=r[0]*g[0],m+=r[1]*g[1],u-=r[0]*(1-g[2]),d-=r[1]*(1-g[3]),p-=c,u+=c,m-=c,d+=c),(0,vec2.hZ)(Se,s,i),(0,vec2.e$)(Oe,e,Se,(0,mathUtils.kU)(l)),Oe[0]>p&&Oe[0]<u&&Oe[1]>m&&Oe[1]<d}const he=new class t{constructor(){this.factor=new c,this.factorAlignment=new c}},pe=(0,vec3f64.vt)(),ue=(0,vec3f64.vt)(),me=(0,vec4f64.vt)(),de=(0,vec3f64.vt)(),ge=(0,vec3f64.vt)(),Oe=(0,vec2f64.vt)(),Se=(0,vec2f64.vt)(),Te=(0,mat3f64.vt)(),be=(0,mat3f64.vt)(),ve=(0,mat4f64.vt)(),Ae=(0,vec3f64.vt)(),Ee=(0,vec3f64.vt)(),_e=(0,vec4f64.vt)(),Ie={normal:de,cosAngle:0},Re=1,xe=2,Ce=[0,0],Pe=(0,vec3f64.fA)(0,0,1);class De extends GLTextureMaterial.NV{constructor(){super(...arguments),this.renderOccluded=Material.m$.Occlude,this.isDecoration=!1,this.color=(0,vec4f64.CN)(1,1,1,1),this.polygonOffset=!1,this.anchorPosition=(0,vec2f64.fA)(.5,.5),this.screenOffset=[0,0],this.shaderPolygonOffset=1e-5,this.textureIsSignedDistanceField=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.outlineColor=(0,vec4f64.CN)(1,1,1,1),this.outlineSize=0,this.distanceFieldBoundingBox=(0,vec4f64.vt)(),this.rotation=0,this.hasRotation=!1,this.vvSizeEnabled=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.hasSlicePlane=!1,this.pixelSnappingEnabled=!0,this.occlusionTest=!0,this.occludedFragmentFade=!1,this.horizonCullingEnabled=!1,this.centerOffsetUnits="world",this.drawAsLabel=!1,this.depthEnabled=!0,this.isFocused=!0,this.focusEffect="none",this.draped=!1,this.isLabel=!1}}const ye=(0,InterleavedLayout.BP)().vec3f(VertexAttribute.r.POSITION).vec3f(VertexAttribute.r.NORMAL).vec2f(VertexAttribute.r.UV0).vec4u8(VertexAttribute.r.COLOR).vec2f(VertexAttribute.r.SIZE).f32(VertexAttribute.r.ROTATION).vec4f(VertexAttribute.r.CENTEROFFSETANDDISTANCE).vec4f(VertexAttribute.r.FEATUREATTRIBUTE),Fe=ye.clone().vec4u8(VertexAttribute.r.OBJECTANDLAYERIDCOLOR);class je{constructor(){this.vertexBufferLayout=(0,olidUtils.E)()?Fe:ye}elementCount(e){return 6*e.get(VertexAttribute.r.POSITION).indices.length}write(e,t,s,i,r,a){(0,bufferWriterUtils.Hk)(s.get(VertexAttribute.r.POSITION),e,r.position,a,6),(0,bufferWriterUtils.p1)(s.get(VertexAttribute.r.NORMAL),t,r.normal,a,6);const o=s.get(VertexAttribute.r.UV0)?.data;let n=0,c=0,l=1,f=1;o&&o.length>=4&&(n=o[0],c=o[1],l=o[2],f=o[3]),l=Math.min(1.99999,l+1),f=Math.min(1.99999,f+1);let h=s.get(VertexAttribute.r.POSITION).indices.length,p=a;const u=r.uv0;for(let O=0;O<h;++O)u.set(p,0,n),u.set(p,1,c),p++,u.set(p,0,l),u.set(p,1,c),p++,u.set(p,0,l),u.set(p,1,f),p++,u.set(p,0,l),u.set(p,1,f),p++,u.set(p,0,n),u.set(p,1,f),p++,u.set(p,0,n),u.set(p,1,c),p++;(0,bufferWriterUtils.tb)(s.get(VertexAttribute.r.COLOR),4,r.color,a,6);const{data:m,indices:d}=s.get(VertexAttribute.r.SIZE);h=d.length;const g=r.size;p=a;for(let O=0;O<h;++O){const e=m[2*d[O]],t=m[2*d[O]+1];for(let s=0;s<6;++s)g.set(p,0,e),g.set(p,1,t),p++}if((0,bufferWriterUtils.uO)(s.get(VertexAttribute.r.ROTATION),r.rotation,a,6),s.get(VertexAttribute.r.CENTEROFFSETANDDISTANCE)?(0,bufferWriterUtils.Ut)(s.get(VertexAttribute.r.CENTEROFFSETANDDISTANCE),r.centerOffsetAndDistance,a,6):(0,bufferWriterUtils.Pq)(r.centerOffsetAndDistance,a,6*h),s.get(VertexAttribute.r.FEATUREATTRIBUTE)?(0,bufferWriterUtils.Ut)(s.get(VertexAttribute.r.FEATUREATTRIBUTE),r.featureAttribute,a,6):(0,bufferWriterUtils.Pq)(r.featureAttribute,a,6*h),null!=i){const e=s.get(VertexAttribute.r.POSITION)?.indices;if(e){const t=e.length,s=r.getField(VertexAttribute.r.OBJECTANDLAYERIDCOLOR,BufferView.XP);(0,bufferWriterUtils.tH)(i,s,t,a,6)}}}}},"./node_modules/@arcgis/core/views/3d/webgl/RenderCamera.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>it});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),mat4=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js"),mat4f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js"),vec32=__webpack_require__("./node_modules/@arcgis/core/chunks/vec32.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js"),vec42=__webpack_require__("./node_modules/@arcgis/core/chunks/vec42.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js"),frustum=__webpack_require__("./node_modules/@arcgis/core/geometry/support/frustum.js"),ray=__webpack_require__("./node_modules/@arcgis/core/geometry/support/ray.js"),vector=__webpack_require__("./node_modules/@arcgis/core/geometry/support/vector.js"),ViewingMode=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js");var rendererUtils_r,rendererUtils_t,$;__webpack_require__("./node_modules/@arcgis/core/core/PooledArray.js");!function(e){e[e.Default=0]="Default",e[e.Screenshot=1]="Screenshot",e[e.ObjectAndLayerID=2]="ObjectAndLayerID"}(rendererUtils_r||(rendererUtils_r={})),function(e){e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT"}(rendererUtils_t||(rendererUtils_t={}));let tt=$=class extends Accessor.A{constructor(t){super(t),this._ray=(0,ray.vt)(),this._viewport=(0,vec4f64.fA)(0,0,1,1),this._padding=(0,vec4f64.fA)(0,0,0,0),this._fov=55/180*Math.PI,this._nearFar=(0,vec2f64.fA)(1,1e3),this._viewDirty=!0,this._viewMatrix=(0,mat4f64.vt)(),this._viewProjectionDirty=!0,this._viewProjectionMatrix=(0,mat4f64.vt)(),this._viewInverseTransposeMatrixDirty=!0,this._viewInverseTransposeMatrix=(0,mat4f64.vt)(),this._frustumDirty=!0,this._frustum=(0,frustum.vt)(),this._fullViewport=(0,vec4f64.vt)(),this._pixelRatio=1,this.row=0,this.column=0,this._rows=1,this._columns=1,this._center=(0,vec3f64.vt)(),this._up=(0,vec3f64.vt)(),this.relativeElevation=0}get pixelRatio(){return this._pixelRatio}set pixelRatio(t){this._pixelRatio=t>0?t:1}get rows(){return this._rows}set rows(t){this._rows=Math.max(1,t)}get columns(){return this._columns}set columns(t){this._columns=Math.max(1,t)}get eye(){return this._ray.origin}set eye(t){this._compareAndSetView(t,this._ray.origin)}get center(){return this._center}set center(t){this._compareAndSetView(t,this._center,"_center")}get ray(){return(0,vec32.d)(this._ray.direction,this.center,this.eye),this._ray}get up(){return this._up}set up(t){this._compareAndSetView(t,this._up,"_up")}get viewMatrix(){return this._ensureViewClean(),this._viewMatrix}set viewMatrix(t){(0,mat4.C)(this._viewMatrix,t),this.notifyChange("_viewMatrix"),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get viewForward(){return this._ensureViewClean(),(0,vec32.i)((0,vec3f64.vt)(),-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10])}get viewUp(){return this._ensureViewClean(),(0,vec32.i)((0,vec3f64.vt)(),this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9])}get viewRight(){return this._ensureViewClean(),(0,vec32.i)((0,vec3f64.vt)(),this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8])}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(t){this._nearFar[0]!==t&&(this._nearFar[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get far(){return this._nearFar[1]}set far(t){this._nearFar[1]!==t&&(this._nearFar[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get viewport(){return this._viewport}set viewport(t){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]}get screenViewport(){if(1===this.pixelRatio)return this._viewport;const t=(0,vec42.b)((0,vec4f64.vt)(),this._viewport,1/this.pixelRatio),i=this._get("screenViewport");return i&&(0,vec42.e)(t,i)?i:t}get screenPadding(){if(1===this.pixelRatio)return this._padding;const t=(0,vec42.b)((0,vec4f64.vt)(),this._padding,1/this.pixelRatio),i=this._get("screenPadding");return i&&(0,vec42.e)(t,i)?i:t}get x(){return this._viewport[0]}set x(t){t+=this._padding[rendererUtils_t.LEFT],this._viewport[0]!==t&&(this._viewport[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get y(){return this._viewport[1]}set y(t){t+=this._padding[rendererUtils_t.BOTTOM],this._viewport[1]!==t&&(this._viewport[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get width(){return this._viewport[2]}set width(t){this._viewport[2]!==t&&(this._viewport[2]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get height(){return this._viewport[3]}set height(t){this._viewport[3]!==t&&(this._viewport[3]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get fullWidth(){return this._viewport[2]+this._padding[rendererUtils_t.RIGHT]+this._padding[rendererUtils_t.LEFT]}set fullWidth(t){this.width=t-(this._padding[rendererUtils_t.RIGHT]+this._padding[rendererUtils_t.LEFT])}get fullHeight(){return this._viewport[3]+this._padding[rendererUtils_t.TOP]+this._padding[rendererUtils_t.BOTTOM]}set fullHeight(t){this.height=t-(this._padding[rendererUtils_t.TOP]+this._padding[rendererUtils_t.BOTTOM])}get fullViewport(){return this._fullViewport[0]=this._viewport[0]-this._padding[rendererUtils_t.LEFT],this._fullViewport[1]=this._viewport[1]-this._padding[rendererUtils_t.BOTTOM],this._fullViewport[2]=this.fullWidth,this._fullViewport[3]=this.fullHeight,this._fullViewport}get _aspect(){return this.width/this.height}get padding(){return this._padding}set padding(t){(0,vec42.a)(this._padding,t)||(this._viewport[0]+=t[rendererUtils_t.LEFT]-this._padding[rendererUtils_t.LEFT],this._viewport[1]+=t[rendererUtils_t.BOTTOM]-this._padding[rendererUtils_t.BOTTOM],this._viewport[2]-=t[rendererUtils_t.RIGHT]+t[rendererUtils_t.LEFT]-(this._padding[rendererUtils_t.RIGHT]+this._padding[rendererUtils_t.LEFT]),this._viewport[3]-=t[rendererUtils_t.TOP]+t[rendererUtils_t.BOTTOM]-(this._padding[rendererUtils_t.TOP]+this._padding[rendererUtils_t.BOTTOM]),(0,vec42.c)(this._padding,t),this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_padding"),this.notifyChange("_viewport"))}get viewProjectionMatrix(){return this._viewProjectionDirty&&((0,mat4.lw)(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1),this._viewProjectionMatrix}get projectionMatrix(){return this._projectionMatrixInternal}get inverseProjectionMatrix(){return(0,mat4.B8)((0,mat4f64.vt)(),this.projectionMatrix)||this._get("inverseProjectionMatrix")||(0,mat4f64.vt)()}get fov(){return this._fov}set fov(t){this._fov=t,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovX(){return function n(t,a,n){return 2*Math.atan(a*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}(this._fov,this.width,this.height)}set fovX(t){this._fov=function fov_t(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/a)}(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovY(){return function r(t,a,n){return 2*Math.atan(n*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}(this._fov,this.width,this.height)}set fovY(t){this._fov=function a(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/n)}(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get distance(){return(0,vec32.j)(this.center,this.eye)}get frustum(){return this._recomputeFrustum(),this._frustum}get viewInverseTransposeMatrix(){return(this._viewInverseTransposeMatrixDirty||this._viewDirty)&&((0,mat4.B8)(this._viewInverseTransposeMatrix,this.viewMatrix),(0,mat4.mg)(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),this._viewInverseTransposeMatrix}depthNDCToWorld(t){const{near:i,far:e}=this;return 2*i*e/(e+i-t*(e-i))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return null!=this.relativeElevation&&this.relativeElevation>=0}get _projectionMatrixInternal(){const t=this.width,i=this.height,e=this.near*Math.tan(this.fovY/2)*2,r=e*this._aspect,s=e/this.rows,o=r/this.columns,n=-r/2+this.column*o,h=n+o,a=-e/2+this.row*s,p=a+s,u=(0,mat4.$h)((0,mat4f64.vt)(),n*(1+2*this._padding[rendererUtils_t.LEFT]/t),h*(1+2*this._padding[rendererUtils_t.RIGHT]/t),a*(1+2*this._padding[rendererUtils_t.BOTTOM]/i),p*(1+2*this._padding[rendererUtils_t.TOP]/i),this.near,this.far),l=this._get("projectionMatrix");return l&&(0,mat4.aI)(l,u)?l:u}copyFrom(t){(0,vec32.c)(this._ray.origin,t.eye),this.center=t.center,this.up=t.up,(0,vec42.c)(this._viewport,t.viewport),this.notifyChange("_viewport"),(0,vec42.c)(this._padding,t.padding),this.notifyChange("_padding"),(0,vec2.C)(this._nearFar,t.nearFar),this.notifyChange("_nearFar"),this._fov=t.fov,this.row=t.row,this.column=t.column,this.rows=t.rows,this.columns=t.columns,this.relativeElevation=t.relativeElevation;const i=t;return this._viewDirty=i._viewDirty,this._viewDirty||((0,mat4.C)(this._viewMatrix,t.viewMatrix),this.notifyChange("_viewMatrix")),this._viewProjectionDirty=!0,this._frustumDirty=i._frustumDirty,this._frustumDirty||((0,frustum.C)(this._frustum,t.frustum),this._frustumDirty=!1),i._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:((0,mat4.C)(this._viewInverseTransposeMatrix,t.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),(0,vec42.c)(this._fullViewport,t.fullViewport),this.pixelRatio=t.pixelRatio,this}copyViewFrom(t){this.eye=t.eye,this.center=t.center,this.up=t.up,this.fov=t.fov}clone(){return(new $).copyFrom(this)}equals(t){return(0,vec32.p)(this.eye,t.eye)&&(0,vec32.p)(this.center,t.center)&&(0,vec32.p)(this.up,t.up)&&(0,vec42.a)(this._viewport,t.viewport)&&(0,vec42.a)(this._padding,t.padding)&&(0,vec2.t2)(this.nearFar,t.nearFar)&&this._fov===t.fov&&this.pixelRatio===t.pixelRatio&&this.relativeElevation===t.relativeElevation&&this.row===t.row&&this.column===t.column&&this.rows===t.rows&&this.columns===t.columns}almostEquals(t){const i=Math.max(1,1/this.pixelRatio,1/t.pixelRatio);if(Math.abs(t.fov-this._fov)>=.001||(0,vec42.d)(t.screenPadding,this.screenPadding)>=i||(0,vec42.d)(this.screenViewport,t.screenViewport)>=i||this.row!==t.row||this.column!==t.column||this.rows!==t.rows||this.columns!==t.columns)return!1;(0,vec32.a)(st,t.eye,t.center),(0,vec32.a)(ot,this.eye,this.center);const e=(0,vec32.f)(st,ot),r=(0,vec32.z)(st),s=(0,vec32.z)(ot),o=5e-4;return e*e>=(1-1e-10)*r*s&&(0,vec32.y)(t.eye,this.eye)<Math.max(r,s)*o*o}computeRenderPixelSizeAt(t){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(t))}computeRenderPixelSizeAtDist(t){return t*this.perRenderPixelRatio}computeScreenPixelSizeAt(t){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(t))}_viewDirectionDistance(t){return Math.abs((0,vector.gr)(this.viewForward,(0,vec32.d)(st,t,this.eye)))}computeScreenPixelSizeAtDist(t){return t*this.perScreenPixelRatio}computeDistanceFromRadius(t,i){return t/Math.tan(Math.min(this.fovX,this.fovY)/(2*(i||1)))}getScreenCenter(t=(0,screenUtils.gs)()){return t[0]=(this.padding[rendererUtils_t.LEFT]+this.width/2)/this.pixelRatio,t[1]=(this.padding[rendererUtils_t.TOP]+this.height/2)/this.pixelRatio,t}getRenderCenter(t,i=.5,e=.5){return t[0]=this.padding[rendererUtils_t.LEFT]+this.width*i,t[1]=this.padding[rendererUtils_t.BOTTOM]+this.height*e,t[2]=.5,t}setGLViewport(t){const i=this.viewport,e=this.padding;t.setViewport(i[0]-e[3],i[1]-e[2],i[2]+e[1]+e[3],i[3]+e[0]+e[2])}applyProjection(t,i){t!==et&&(0,vec32.c)(et,t),et[3]=1,(0,vec42.t)(et,et,this.projectionMatrix);const e=Math.abs(et[3]);(0,vec32.h)(et,et,1/e);const s=this.fullViewport;i[0]=(0,mathUtils.Cc)(0,s[0]+s[2],.5+.5*et[0]),i[1]=(0,mathUtils.Cc)(0,s[1]+s[3],.5+.5*et[1]),i[2]=.5*(et[2]+1),i[3]=e}unapplyProjection(t,i){const e=this.fullViewport;et[0]=(t[0]/(e[0]+e[2])*2-1)*t[3],et[1]=(t[1]/(e[1]+e[3])*2-1)*t[3],et[2]=(2*t[2]-1)*t[3],et[3]=t[3],null!=this.inverseProjectionMatrix&&((0,vec42.t)(et,et,this.inverseProjectionMatrix),i[0]=et[0],i[1]=et[1],i[2]=et[2])}projectToScreen(t,i){return this.projectToRenderScreen(t,nt),this.renderToScreen(nt,i),i}projectToRenderScreen(t,i){if(et[0]=t[0],et[1]=t[1],et[2]=t[2],et[3]=1,(0,vec42.t)(et,et,this.viewProjectionMatrix),0===et[3])return null;const e=et;(0,vec32.h)(e,e,1/Math.abs(et[3]));const s=this.fullViewport,o=(0,mathUtils.Cc)(0,s[0]+s[2],.5+.5*e[0]),n=(0,mathUtils.Cc)(0,s[1]+s[3],.5+.5*e[1]);return"x"in i?(i.x=o,i.y=n):(i[0]=o,i[1]=n,i.length>2&&(i[2]=.5*(e[2]+1))),i}unprojectFromScreen(t,i){return this.unprojectFromRenderScreen(this.screenToRender(t,nt),i)}unprojectFromRenderScreen(t,i){if((0,mat4.lw)(rt,this.projectionMatrix,this.viewMatrix),!(0,mat4.B8)(rt,rt))return null;const e=this.fullViewport;return et[0]=2*(t[0]-e[0])/e[2]-1,et[1]=2*(t[1]-e[1])/e[3]-1,et[2]=2*t[2]-1,et[3]=1,(0,vec42.t)(et,et,rt),0===et[3]?null:(i[0]=et[0]/et[3],i[1]=et[1]/et[3],i[2]=et[2]/et[3],i)}constrainWindowSize(t,i,e,r){const s=t*this.pixelRatio,o=i*this.pixelRatio,n=Math.max(s-e/2,0),h=Math.max(this.fullHeight-o-r/2,0),a=-Math.min(s-e/2,0),p=-Math.min(this.fullHeight-o-r/2,0),u=e-a- -Math.min(this.fullWidth-s-e/2,0),l=r-p- -Math.min(o-r/2,0);return[Math.round(n),Math.round(h),Math.round(u),Math.round(l)]}computeUp(t){t===ViewingMode.RT.Global?this._computeUpGlobal():this._computeUpLocal()}screenToRender(t,i){const e=t[0]*this.pixelRatio,r=this.fullHeight-t[1]*this.pixelRatio;return i[0]=e,i[1]=r,i}renderToScreen(t,i){const e=t[0]/this.pixelRatio,r=(this.fullHeight-t[1])/this.pixelRatio;i[0]=e,i[1]=r}_computeUpGlobal(){(0,vec32.d)(st,this.center,this.eye);const t=(0,vec32.l)(this.center);t<1?((0,vec32.i)(this._up,0,0,1),this._markViewDirty(),this.notifyChange("_up")):Math.abs((0,vec32.f)(st,this.center))>.9999*(0,vec32.l)(st)*t||((0,vec32.e)(this._up,st,this.center),(0,vec32.e)(this._up,this._up,st),(0,vec32.n)(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_computeUpLocal(){(0,vec32.o)(st,this.eye,this.center),Math.abs(st[2])<=.9999&&((0,vec32.h)(st,st,st[2]),(0,vec32.i)(this._up,-st[0],-st[1],1-st[2]),(0,vec32.n)(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_compareAndSetView(t,i,r=""){"number"==typeof t[0]&&isFinite(t[0])&&"number"==typeof t[1]&&isFinite(t[1])&&"number"==typeof t[2]&&isFinite(t[2])?(0,vec32.p)(t,i)||((0,vec32.c)(i,t),this._markViewDirty(),r.length&&this.notifyChange(r)):Logger.A.getLogger("esri.views.3d.webgl-engine.lib.RenderCamera").warn("RenderCamera vector contains invalid number, ignoring value")}_markViewDirty(){this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0}_recomputeFrustum(){this._frustumDirty&&((0,frustum.ui)(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&((0,mat4.t5)(this._viewMatrix,this.eye,this.center,this.up),this.notifyChange("_viewMatrix"),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}};(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"_viewport",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"_padding",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"_fov",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"_nearFar",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"_viewDirty",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"_viewMatrix",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"_pixelRatio",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"pixelRatio",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"row",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"column",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"_rows",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"rows",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"_columns",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"columns",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"eye",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"center",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"_center",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"up",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"_up",void 0),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"viewMatrix",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],tt.prototype,"viewForward",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],tt.prototype,"viewUp",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],tt.prototype,"viewRight",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],tt.prototype,"nearFar",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"near",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"far",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"viewport",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],tt.prototype,"screenViewport",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],tt.prototype,"screenPadding",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"x",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"y",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"width",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"height",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"fullWidth",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"fullHeight",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],tt.prototype,"_aspect",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"padding",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],tt.prototype,"projectionMatrix",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],tt.prototype,"inverseProjectionMatrix",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"fov",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"fovX",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"fovY",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"viewInverseTransposeMatrix",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],tt.prototype,"_projectionMatrixInternal",null),(0,tslib_es6._)([(0,property.MZ)()],tt.prototype,"relativeElevation",void 0),tt=$=(0,tslib_es6._)([(0,subclass.$)("esri.views.3d.webgl.RenderCamera")],tt);const it=tt,et=(0,vec4f64.vt)(),rt=(0,mat4f64.vt)(),st=(0,vec3f64.vt)(),ot=(0,vec3f64.vt)(),nt=(0,screenUtils.r_)()},"./node_modules/@arcgis/core/views/webgl/BufferObject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>E});var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js")),_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/typedArrayUtil.js"),_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/checkWebGLError.js"),_enums_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js");const h=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__.A.getLogger("esri.views.webgl.BufferObject");class E{static createIndex(t,e,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.ELEMENT_ARRAY_BUFFER,e,i)}static createVertex(t,e,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.ARRAY_BUFFER,e,i)}static createUniform(t,e,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.UNIFORM_BUFFER,e,i)}static createPixelPack(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__._U.STREAM_READ,i){const s=new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.PIXEL_PACK_BUFFER,e);return i&&s.setSize(i),s}static createPixelUnpack(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__._U.STREAM_DRAW,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.PIXEL_UNPACK_BUFFER,e,i)}static createTransformFeedback(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__._U.STATIC_DRAW,i){const s=new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.TRANSFORM_FEEDBACK_BUFFER,e);return s.setSize(i),s}constructor(t,e,i,s){this._context=t,this.bufferType=e,this.usage=i,this._glName=null,this._size=-1,this._indexType=void 0,t.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_5__.vt.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__.Y2)(this._context.gl),s&&this.setData(s)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get usedMemory(){if(this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.ELEMENT_ARRAY_BUFFER){if(this._indexType===_enums_js__WEBPACK_IMPORTED_MODULE_5__.pe.UNSIGNED_INT)return 4*this._size;if(this._indexType===_enums_js__WEBPACK_IMPORTED_MODULE_5__.pe.UNSIGNED_SHORT)return 2*this._size}return this._size}get _isVAOAware(){return this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.ELEMENT_ARRAY_BUFFER||this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.ARRAY_BUFFER}dispose(){this._context?.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_5__.vt.BufferObject,this),this._context=null):this._glName&&h().warn("Leaked WebGL buffer object")}setSize(t,e=null){if(this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.ELEMENT_ARRAY_BUFFER&&null!=e)switch(this._indexType=e,e){case _enums_js__WEBPACK_IMPORTED_MODULE_5__.pe.UNSIGNED_SHORT:t*=2;break;case _enums_js__WEBPACK_IMPORTED_MODULE_5__.pe.UNSIGNED_INT:t*=4}this._setBufferData(t)}setData(t){if(!t)return;let e=t.byteLength;this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.ELEMENT_ARRAY_BUFFER&&((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__.mg)(t)?this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__.pe.UNSIGNED_BYTE:(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__.jq)(t)?(e/=2,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__.pe.UNSIGNED_SHORT):(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__.XJ)(t)&&(e/=4,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__.pe.UNSIGNED_INT)),this._setBufferData(e,t)}_setBufferData(t,e=null){this._size=t;const i=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const s=this._context.gl;null!=e?s.bufferData(this.bufferType,e,this.usage):s.bufferData(this.bufferType,t,this.usage),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__.Y2)(s),this._isVAOAware&&this._context.bindVAO(i)}setSubData(t,e,i,s){if(!t)return;const r=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const{gl:_}=this._context;_.bufferSubData(this.bufferType,e*t.BYTES_PER_ELEMENT,t,i,s-i),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__.Y2)(_),this._isVAOAware&&this._context.bindVAO(r)}getSubData(t,e=0,i,s){if(i<0||s<0)return;const r=function o(e){return(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.Xj)(e)}(t)?t.BYTES_PER_ELEMENT:1;if(r*((i??0)+(s??0))>t.byteLength)return;e+r*(s??0)>this.usedMemory&&h().warn("Potential problem getting subdata: requested data exceeds buffer size!");const n=this._context.gl;this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.TRANSFORM_FEEDBACK_BUFFER?(this._context.bindBuffer(this,_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.TRANSFORM_FEEDBACK_BUFFER),n.getBufferSubData(_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.TRANSFORM_FEEDBACK_BUFFER,e,t,i,s),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.TRANSFORM_FEEDBACK_BUFFER)):(this._context.bindBuffer(this,_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.COPY_READ_BUFFER),n.getBufferSubData(_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.COPY_READ_BUFFER,e,t,i,s),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__.NZ.COPY_READ_BUFFER))}async getSubDataAsync(t,e=0,i,s){await this._context.clientWaitAsync(),this.getSubData(t,e,i,s)}}},"./node_modules/@arcgis/core/views/webgl/VertexArrayObject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>o});var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/memoryEstimations.js"),_enums_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),_Util_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Util.js");const n=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__.A.getLogger("esri.views.webgl.VertexArrayObject");let o=class{constructor(e,t,i,r,s=null){this._context=e,this._locations=t,this._layout=i,this._buffers=r,this._indexBuffer=s,this._glName=null,this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Array.from(this._buffers.values()).reduce(((e,t)=>e+t.usedMemory),null!=this._indexBuffer?this._indexBuffer.usedMemory:0)}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return this.byteSize+(this._buffers.size+(this._indexBuffer?1:0))*_core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__.i5}get cachedMemory(){return this.usedMemory}dispose(){this._context?(this._context.getBoundVAO()===this&&this._context.bindVAO(null),this._buffers.forEach((e=>e.dispose())),this._buffers.clear(),this._indexBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.WD)(this._indexBuffer),this.disposeVAOOnly()):(this._glName||this._buffers.size>0)&&n().warn("Leaked WebGL VAO")}disposeVAOOnly(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_2__.vt.VertexArrayObject,this)),this._context=null}initialize(){if(this._initialized)return;const{gl:e}=this._context,t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t,this._context.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_2__.vt.VertexArrayObject,this),this._initialized=!0}bind(){this.initialize(),this._context.gl.bindVertexArray(this.glName)}_bindLayout(){const{_buffers:e,_layout:t,_indexBuffer:i}=this;e||n().error("Vertex buffer dictionary is empty!");const r=this._context.gl;this._buffers.forEach(((e,i)=>{const r=t.get(i);r?(0,_Util_js__WEBPACK_IMPORTED_MODULE_3__.yu)(this._context,this._locations,e,r):n().error("Vertex element descriptor is empty!")})),null!=i&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i.glName)}unbind(){this.initialize(),this._context.gl.bindVertexArray(null)}}},"./node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>t});class t{constructor(t,s,i,h,o,e=!1,r=0){this.name=t,this.count=s,this.type=i,this.offset=h,this.stride=o,this.normalized=e,this.divisor=r}}}}]);
//# sourceMappingURL=9790.a03bf01d.iframe.bundle.js.map