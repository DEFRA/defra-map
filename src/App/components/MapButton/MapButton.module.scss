@use '../../../scss/tools/index' as tools;

// ===================================================
// Component: ButtonWrapper
// ===================================================

// 1. Base styles
.dm-c-button-wrapper {
    position: relative;
}

.dm-c-button-wrapper .dm-c-panel {
    position: absolute;
    right: calc(100% + var(--divider-gap));
    top: 0;
}

// ===================================================
// Component: MapButton
// ===================================================

// 1. Base styles
.dm-c-map-button {
    @include tools.border-focus-base(
        // $is-inset: true,
        $type: button
    );

    & {
        display: flex;
        justify-content: center;
        align-items: center;

        padding-left: var(--button-padding);
        padding-right: var(--button-padding);

        pointer-events: auto;
        color: var(--foreground-color);
        background-color: var(--button-background-color);

        width: max-content;
        min-height: var(--button-size);
        min-width: var(--button-size);

        user-select: none;
        cursor: pointer;
    }
}

.dm-c-map-button svg {
    pointer-events: none;
    width: var(--icon-size);
    height: var(--icon-size);

    flex-shrink: 0;
}

.dm-c-map-button svg + span {
    margin-left: var(--button-icon-label-offset);

    white-space: nowrap;
}

@media (hover: hover) and (pointer: fine) {
    .dm-c-map-button:hover {
        @media (prefers-reduced-motion: no-preference) {
            transition: background-color var(--duration) ease;
        }

        & {
            background-color: var(--button-hover-color);
        }
    }
}

// 2. Elements

// 3. Modifiers

.dm-c-map-button--with-label {
    padding-left: var(--label-button-padding);
    padding-right: var(--label-button-padding);
}

.dm-c-map-button--primary {
    color: var(--background-color);
    background-color: var(--primary-button-color);
    box-shadow: var(--primary-button-box-shadow);
    span {
        white-space: nowrap;
        padding: 0px var(--button-icon-label-offset);
    }
    svg + span {
        padding-left: 0;
    }
}

@media (hover: hover) and (pointer: fine) {
    .dm-c-map-button--primary:hover {
        background-color: var(--primary-button-hover-color);
    }
}

.dm-c-map-button--primary::before {
    box-shadow: none;
}

.dm-c-map-button--tertiary {
    border: 1px solid var(--tertiary-button-border-color);
    box-shadow: var(--tertiary-button-box-shadow);
    span {
        white-space: nowrap;
        padding: 0px 5px;
    }
    svg + span {
        padding-left: 0;
    }
}

.dm-c-map-button--tertiary::before {
    box-shadow: none;
}

.dm-o-app__right {
    .dm-c-button-wrapper--group-start,
    .dm-c-button-wrapper--group-middle {
        margin-bottom: calc(-1 * var(--divider-gap));
    }
    .dm-c-button-wrapper--group-start .dm-c-map-button {
        @include tools.border-focus-corner-override($corners: 'top');
    }
    .dm-c-button-wrapper--group-end .dm-c-map-button {
        margin-top: 0;
        @include tools.border-focus-corner-override($corners: 'bottom');
    }
}

.dm-o-app__top {
    .dm-c-button-wrapper--group-start,
    .dm-c-button-wrapper--group-middle {
        margin-right: calc(-1 * var(--divider-gap));
    }
    .dm-c-button-wrapper--group-start .dm-c-map-button {
        @include tools.border-focus-corner-override($corners: 'left');
    }
    .dm-c-button-wrapper--group-end .dm-c-map-button {
        @include tools.border-focus-corner-override($corners: 'right');
    }
}

// 4. State styles
.dm-c-map-button[aria-disabled="true"]:not(.dm-c-map-button--primary, .dm-c-map-button--tertiary) {
    svg, span {
        opacity: var(--disabled-button-opacity);
    }
}

.dm-c-map-button {
    &--primary[aria-disabled="true"], &--tertiary[aria-disabled="true"] {
        opacity: var(--disabled-button-opacity);
    }
}

.dm-o-app__actions .dm-c-map-button[aria-pressed="true"] {
    color: var(--pressed-button-foreground-color);
    border-color: var(--pressed-button-border-color);
    background-color: var(--pressed-button-background-color);
}

// 5. Responsive tweaks