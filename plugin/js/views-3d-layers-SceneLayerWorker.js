"use strict";(self.webpackChunkdefraMap=self.webpackChunkdefraMap||[]).push([[5404],{90599:function(t,n,e){e.d(n,{N:function(){return m},a:function(){return p},b:function(){return A},c:function(){return g},f:function(){return _},g:function(){return w},j:function(){return O},k:function(){return M},l:function(){return b},m:function(){return E},n:function(){return F},p:function(){return P},w:function(){return v}}),e(58941),e(40633);var r=e(15774),o=e(73364),i=e(20551),a=e(32501),c=e(33400),u=e(41546),s=e(8527),f=e(72485),l=e(79578),h=e(29531),d=e(50973);const m=g();function g(){return(0,u.vt)()}const b=c.e,y=c.e;function p(t,n){return(0,c.c)(n,t)}function M(t,n){return(0,u.fA)(t[0],t[1],t[2],n)}function v(t){return t}function A(t){return t[3]}function w(t){return t}function _(t,n,e,r){return(0,u.fA)(t,n,e,r)}function I(t,n,e){if(null==n)return!1;if(!T(t,n,C))return!1;let{t0:r,t1:o}=C;if((r<0||o<r&&o>0)&&(r=o),r<0)return!1;if(e){const{origin:t,direction:o}=n;e[0]=t[0]+o[0]*r,e[1]=t[1]+o[1]*r,e[2]=t[2]+o[2]*r}return!0}function E(t,n,e){const r=(0,l.Cr)(n,e);if(!T(t,r,C))return[];const{origin:o,direction:c}=r,{t0:u,t1:f}=C,h=n=>{const e=(0,a.vt)();return(0,i.r)(e,o,c,n),P(t,e,e)};return Math.abs(u-f)<(0,s.FD)()?[h(u)]:[h(u),h(f)]}const C={t0:0,t1:0};function T(t,n,e){const{origin:r,direction:o}=n,i=S;i[0]=r[0]-t[0],i[1]=r[1]-t[1],i[2]=r[2]-t[2];const a=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(0===a)return!1;const c=2*(o[0]*i[0]+o[1]*i[1]+o[2]*i[2]),u=c*c-4*a*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(u<0)return!1;const s=Math.sqrt(u);return e.t0=(-c-s)/(2*a),e.t1=(-c+s)/(2*a),!0}const S=(0,a.vt)();function O(t,n){return I(t,n,null)}function N(t,n,e){const r=d.rq.get(),a=d.Rc.get();(0,i.b)(r,n.origin,n.direction);const c=A(t);(0,i.b)(e,r,n.origin),(0,i.j)(e,e,1/(0,i.l)(e)*c);const u=R(t,n.origin),s=(0,h.g7)(n.origin,e);return(0,o.$0)(a,s+u,r),(0,i.h)(e,e,a),e}function P(t,n,e){const r=(0,i.f)(d.rq.get(),n,t),o=(0,i.j)(d.rq.get(),r,t[3]/(0,i.l)(r));return(0,i.g)(e,o,t)}function R(t,n){const e=(0,i.f)(d.rq.get(),n,t),o=(0,i.l)(e),a=A(t),c=a+Math.abs(a-o);return(0,r.XM)(a/c)}const x=(0,a.vt)();function U(t,n,e,o){const a=(0,i.f)(x,n,t);switch(e){case f._.X:{const t=(0,r.jU)(a,x)[2];return(0,i.s)(o,-Math.sin(t),Math.cos(t),0)}case f._.Y:{const t=(0,r.jU)(a,x),n=t[1],e=t[2],c=Math.sin(n);return(0,i.s)(o,-c*Math.cos(e),-c*Math.sin(e),Math.cos(n))}case f._.Z:return(0,i.n)(o,a);default:return}}function L(t,n){const e=(0,i.f)(j,n,t);return(0,i.l)(e)-t[3]}function F(t,n){const e=(0,i.a)(t,n),r=A(t);return e<=r*r}const j=(0,a.vt)(),z=g();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:m,altitudeAt:L,angleToSilhouette:R,axisAt:U,clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,n,e){return I(t,n,e)?e:((0,l.oC)(n,t,e),P(t,e,e))},closestPointOnSilhouette:N,containsPoint:F,copy:p,create:g,distanceToSilhouette:function(t,n){const e=(0,i.f)(d.rq.get(),n,t),r=(0,i.q)(e),o=t[3]*t[3];return Math.sqrt(Math.abs(r-o))},elevate:function(t,n,e){return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e[3]=t[3]+n,e},equals:y,exactEquals:b,fromCenterAndRadius:M,fromRadius:function(t,n){return t[0]=t[1]=t[2]=0,t[3]=n,t},fromValues:_,getCenter:w,getRadius:A,intersectLine:E,intersectRay:I,intersectRayClosestSilhouette:function(t,n,e){if(I(t,n,e))return e;const r=N(t,n,d.rq.get());return(0,i.g)(e,n.origin,(0,i.j)(d.rq.get(),n.direction,(0,i.p)(n.origin,r)/(0,i.l)(n.direction))),e},intersectsRay:O,projectPoint:P,setAltitudeAt:function(t,n,e,r){const o=L(t,n),a=U(t,n,f._.Z,j),c=(0,i.j)(j,a,e-o);return(0,i.g)(r,n,c)},setExtent:function(t,n,e){return t!==e&&p(t,e),e},tmpSphere:z,union:function(t,n,e=(0,u.vt)()){const r=(0,i.p)(t,n),o=t[3],a=n[3];return r+a<o?((0,c.c)(e,t),e):r+o<a?((0,c.c)(e,n),e):((0,i.o)(e,t,n,(r+a-o)/(2*r)),e[3]=(r+o+a)/2,e)},wrap:v},Symbol.toStringTag,{value:"Module"}))},62693:function(t,n,e){function r(t,n,e){o(t.typedBuffer,n.typedBuffer,e,t.typedBufferStride,n.typedBufferStride)}function o(t,n,e,r=3,o=r){if(t.length/r!==Math.ceil(n.length/o))return t;const i=t.length/r,a=e[0],c=e[1],u=e[2],s=e[4],f=e[5],l=e[6],h=e[8],d=e[9],m=e[10],g=e[12],b=e[13],y=e[14];let p=0,M=0;for(let e=0;e<i;e++){const e=n[p],i=n[p+1],v=n[p+2];t[M]=a*e+s*i+h*v+g,t[M+1]=c*e+f*i+d*v+b,t[M+2]=u*e+l*i+m*v+y,p+=o,M+=r}return t}function i(t,n,e){a(t.typedBuffer,n.typedBuffer,e,t.typedBufferStride,n.typedBufferStride)}function a(t,n,e,r=3,o=r){if(t.length/r!==Math.ceil(n.length/o))return;const i=t.length/r,a=e[0],c=e[1],u=e[2],s=e[3],f=e[4],l=e[5],h=e[6],d=e[7],m=e[8];let g=0,b=0;for(let e=0;e<i;e++){const e=n[g],i=n[g+1],y=n[g+2];t[b]=a*e+s*i+h*y,t[b+1]=c*e+f*i+d*y,t[b+2]=u*e+l*i+m*y,g+=o,b+=r}}function c(t,n,e){u(t.typedBuffer,n.typedBuffer,e,t.typedBufferStride,n.typedBufferStride)}function u(t,n,e,r=3,o=r){const i=Math.min(t.length/r,n.length/o);let a=0,c=0;for(let u=0;u<i;u++)t[c]=e*n[a],t[c+1]=e*n[a+1],t[c+2]=e*n[a+2],a+=o,c+=r;return t}function s(t,n,e,r=3,o=r){const i=t.length/r;if(i!==Math.ceil(n.length/o))return t;let a=0,c=0;for(let u=0;u<i;u++)t[c]=n[a]+e[0],t[c+1]=n[a+1]+e[1],t[c+2]=n[a+2]+e[2],a+=o,c+=r;return t}function f(t,n){l(t.typedBuffer,n.typedBuffer,t.typedBufferStride,n.typedBufferStride)}function l(t,n,e=3,r=e){const o=Math.min(t.length/e,n.length/r);let i=0,a=0;for(let c=0;c<o;c++){const o=n[i],c=n[i+1],u=n[i+2],s=o*o+c*c+u*u;if(s>0){const n=1/Math.sqrt(s);t[a]=n*o,t[a+1]=n*c,t[a+2]=n*u}i+=r,a+=e}}e.d(n,{a:function(){return o},b:function(){return s},c:function(){return i},d:function(){return r},e:function(){return f},f:function(){return c},n:function(){return l},s:function(){return u},t:function(){return a}}),e(58941),e(40633),Object.freeze(Object.defineProperty({__proto__:null,normalize:l,normalizeView:f,scale:u,scaleView:c,shiftRight:function(t,n,e){const r=Math.min(t.count,n.count),o=t.typedBuffer,i=t.typedBufferStride,a=n.typedBuffer,c=n.typedBufferStride;let u=0,s=0;for(let t=0;t<r;t++)o[s]=a[u]>>e,o[s+1]=a[u+1]>>e,o[s+2]=a[u+2]>>e,u+=c,s+=i},transformMat3:a,transformMat3View:i,transformMat4:o,transformMat4View:r,translate:s},Symbol.toStringTag,{value:"Module"}))},89736:function(t,n,e){e.d(n,{I:function(){return o}});var r=e(29601);class o{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*i);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,i));t++)this._items.push(this._allocator())}}const i=1024},5161:function(t,n,e){e.d(n,{T:function(){return i},U:function(){return o}});var r=e(15774);function o(t,n,e=0){const o=(0,r.qE)(t,0,u);for(let t=0;t<4;t++)n[e+t]=Math.floor(256*s(o*a[t]))}function i(t,n=0){let e=0;for(let r=0;r<4;r++)e+=t[n+r]*c[r];return e}const a=[1,256,65536,16777216],c=[1/256,1/65536,1/16777216,1/4294967296],u=i(new Uint8ClampedArray([255,255,255,255]));function s(t){return t-Math.floor(t)}},87725:function(t,n,e){function r(){return[1,0,0,0,1,0,0,0,1]}function o(t,n,e,r,o,i,a,c,u){return[t,n,e,r,o,i,a,c,u]}e.d(n,{fA:function(){return o},vt:function(){return r},zK:function(){return i}});const i=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},create:r,createView:function(t,n){return new Float64Array(t,n,9)},fromValues:o},Symbol.toStringTag,{value:"Module"}))},39714:function(t,n,e){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function i(t,n,e,r,o,i,a,c,u,s,f,l,h,d,m,g){return[t,n,e,r,o,i,a,c,u,s,f,l,h,d,m,g]}e.d(n,{fA:function(){return i},o8:function(){return o},vt:function(){return r},zK:function(){return a}});const a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:a,clone:o,create:r,createView:function(t,n){return new Float64Array(t,n,16)},fromValues:i},Symbol.toStringTag,{value:"Module"}))},61769:function(t,n,e){function r(){return[0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3]]}e.d(n,{o8:function(){return o},vt:function(){return r},zK:function(){return i}});const i=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:o,create:r,createView:function(t,n){return new Float64Array(t,n,4)},fromValues:function(t,n,e,r){return[t,n,e,r]}},Symbol.toStringTag,{value:"Module"}))},44705:function(t,n,e){e.d(n,{B8:function(){return u},D_:function(){return a},Ge:function(){return p},I0:function(){return b},KC:function(){return s},Oe:function(){return m},Tl:function(){return l},dR:function(){return y},e$:function(){return h},hZ:function(){return i},hs:function(){return d},kN:function(){return g},lw:function(){return f},mg:function(){return c},z0:function(){return o}});var r=e(8527);function o(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t}function i(t,n,e,r,o,i,a,c,u,s){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=i,t[5]=a,t[6]=c,t[7]=u,t[8]=s,t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function c(t,n){if(t===n){const e=n[1],r=n[2],o=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=o}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t}function u(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],a=n[4],c=n[5],u=n[6],s=n[7],f=n[8],l=f*a-c*s,h=-f*i+c*u,d=s*i-a*u;let m=e*l+r*h+o*d;return m?(m=1/m,t[0]=l*m,t[1]=(-f*r+o*s)*m,t[2]=(c*r-o*a)*m,t[3]=h*m,t[4]=(f*e-o*u)*m,t[5]=(-c*e+o*i)*m,t[6]=d*m,t[7]=(-s*e+r*u)*m,t[8]=(a*e-r*i)*m,t):null}function s(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],a=n[4],c=n[5],u=n[6],s=n[7],f=n[8];return t[0]=a*f-c*s,t[1]=o*s-r*f,t[2]=r*c-o*a,t[3]=c*u-i*f,t[4]=e*f-o*u,t[5]=o*i-e*c,t[6]=i*s-a*u,t[7]=r*u-e*s,t[8]=e*a-r*i,t}function f(t,n,e){const r=n[0],o=n[1],i=n[2],a=n[3],c=n[4],u=n[5],s=n[6],f=n[7],l=n[8],h=e[0],d=e[1],m=e[2],g=e[3],b=e[4],y=e[5],p=e[6],M=e[7],v=e[8];return t[0]=h*r+d*a+m*s,t[1]=h*o+d*c+m*f,t[2]=h*i+d*u+m*l,t[3]=g*r+b*a+y*s,t[4]=g*o+b*c+y*f,t[5]=g*i+b*u+y*l,t[6]=p*r+M*a+v*s,t[7]=p*o+M*c+v*f,t[8]=p*i+M*u+v*l,t}function l(t,n,e){const r=n[0],o=n[1],i=n[2],a=n[3],c=n[4],u=n[5],s=n[6],f=n[7],l=n[8],h=e[0],d=e[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=a,t[4]=c,t[5]=u,t[6]=h*r+d*a+s,t[7]=h*o+d*c+f,t[8]=h*i+d*u+l,t}function h(t,n,e){const r=n[0],o=n[1],i=n[2],a=n[3],c=n[4],u=n[5],s=n[6],f=n[7],l=n[8],h=Math.sin(e),d=Math.cos(e);return t[0]=d*r+h*a,t[1]=d*o+h*c,t[2]=d*i+h*u,t[3]=d*a-h*r,t[4]=d*c-h*o,t[5]=d*u-h*i,t[6]=s,t[7]=f,t[8]=l,t}function d(t,n,e){const r=e[0],o=e[1],i=e[2];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=o*n[3],t[4]=o*n[4],t[5]=o*n[5],t[6]=i*n[6],t[7]=i*n[7],t[8]=i*n[8],t}function m(t,n,e){const r=e[0],o=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=o*n[3],t[4]=o*n[4],t[5]=o*n[5],t}function g(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t}function b(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],a=e+e,c=r+r,u=o+o,s=e*a,f=r*a,l=r*c,h=o*a,d=o*c,m=o*u,g=i*a,b=i*c,y=i*u;return t[0]=1-l-m,t[3]=f-y,t[6]=h+b,t[1]=f+y,t[4]=1-s-m,t[7]=d-g,t[2]=h-b,t[5]=d+g,t[8]=1-s-l,t}function y(t,n){const e=n[0],r=n[1],o=n[2],i=n[4],a=n[5],c=n[6],u=n[8],s=n[9],f=n[10],l=f*a-c*s,h=-f*i+c*u,d=s*i-a*u,m=e*l+r*h+o*d;if(!m)return null;const g=1/m;return t[0]=l*g,t[1]=(-f*r+o*s)*g,t[2]=(c*r-o*a)*g,t[3]=h*g,t[4]=(f*e-o*u)*g,t[5]=(-c*e+o*i)*g,t[6]=d*g,t[7]=(-s*e+r*u)*g,t[8]=(a*e-r*i)*g,t}function p(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],a=n[4],c=n[5],u=n[6],s=n[7],f=n[8],l=n[9],h=n[10],d=n[11],m=n[12],g=n[13],b=n[14],y=n[15],p=e*c-r*a,M=e*u-o*a,v=e*s-i*a,A=r*u-o*c,w=r*s-i*c,_=o*s-i*u,I=f*g-l*m,E=f*b-h*m,C=f*y-d*m,T=l*b-h*g,S=l*y-d*g,O=h*y-d*b;let N=p*O-M*S+v*T+A*C-w*E+_*I;return N?(N=1/N,t[0]=(c*O-u*S+s*T)*N,t[1]=(u*C-a*O-s*E)*N,t[2]=(a*S-c*C+s*I)*N,t[3]=(o*S-r*O-i*T)*N,t[4]=(e*O-o*C+i*E)*N,t[5]=(r*C-e*S-i*I)*N,t[6]=(g*_-b*w+y*A)*N,t[7]=(b*v-m*_-y*M)*N,t[8]=(m*w-g*v+y*p)*N,t):null}function M(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t}const v=f,A=M;Object.freeze(Object.defineProperty({__proto__:null,add:function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t},adjoint:s,copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},determinant:function(t){const n=t[0],e=t[1],r=t[2],o=t[3],i=t[4],a=t[5],c=t[6],u=t[7],s=t[8];return n*(s*i-a*u)+e*(-s*o+a*c)+r*(u*o-i*c)},equals:function(t,n){const e=t[0],o=t[1],i=t[2],a=t[3],c=t[4],u=t[5],s=t[6],f=t[7],l=t[8],h=n[0],d=n[1],m=n[2],g=n[3],b=n[4],y=n[5],p=n[6],M=n[7],v=n[8],A=(0,r.FD)();return Math.abs(e-h)<=A*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(o-d)<=A*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-m)<=A*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(a-g)<=A*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(c-b)<=A*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(u-y)<=A*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(s-p)<=A*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(f-M)<=A*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(l-v)<=A*Math.max(1,Math.abs(l),Math.abs(v))},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)},fromMat2d:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},fromMat4:o,fromQuat:b,fromRotation:function(t,n){const e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromTranslation:g,identity:a,invert:u,isOrthoNormal:function(t){const n=(0,r.FD)(),e=t[0],o=t[1],i=t[2],a=t[3],c=t[4],u=t[5],s=t[6],f=t[7],l=t[8];return Math.abs(1-(e*e+a*a+s*s))<=n&&Math.abs(1-(o*o+c*c+f*f))<=n&&Math.abs(1-(i*i+u*u+l*l))<=n},mul:v,multiply:f,multiplyScalar:function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t},multiplyScalarAndAdd:function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t},normalFromMat4:p,normalFromMat4Legacy:y,projection:function(t,n,e){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},rotate:h,scale:d,scaleByVec2:m,set:i,str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},sub:A,subtract:M,translate:l,transpose:c},Symbol.toStringTag,{value:"Module"}))},32237:function(t,n,e){e.d(n,{A6:function(){return b},B8:function(){return d},Xd:function(){return f},Xr:function(){return m},Yc:function(){return P},hZ:function(){return p},lw:function(){return l},t2:function(){return O},x8:function(){return s}});var r=e(87725),o=e(61769),i=e(32501),a=e(8527),c=e(20551),u=e(33400);function s(t,n,e){e*=.5;const r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function f(t,n){const e=2*Math.acos(n[3]),r=Math.sin(e/2);return r>(0,a.FD)()?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0),e}function l(t,n,e){const r=n[0],o=n[1],i=n[2],a=n[3],c=e[0],u=e[1],s=e[2],f=e[3];return t[0]=r*f+a*c+o*s-i*u,t[1]=o*f+a*u+i*c-r*s,t[2]=i*f+a*s+r*u-o*c,t[3]=a*f-r*c-o*u-i*s,t}function h(t,n,e,r){const o=n[0],i=n[1],c=n[2],u=n[3];let s,f,l,h,d,m=e[0],g=e[1],b=e[2],y=e[3];return f=o*m+i*g+c*b+u*y,f<0&&(f=-f,m=-m,g=-g,b=-b,y=-y),1-f>(0,a.FD)()?(s=Math.acos(f),l=Math.sin(s),h=Math.sin((1-r)*s)/l,d=Math.sin(r*s)/l):(h=1-r,d=r),t[0]=h*o+d*m,t[1]=h*i+d*g,t[2]=h*c+d*b,t[3]=h*u+d*y,t}function d(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],a=e*e+r*r+o*o+i*i,c=a?1/a:0;return t[0]=-e*c,t[1]=-r*c,t[2]=-o*c,t[3]=i*c,t}function m(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function g(t,n){const e=n[0]+n[4]+n[8];let r;if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{let e=0;n[4]>n[0]&&(e=1),n[8]>n[3*e+e]&&(e=2);const o=(e+1)%3,i=(e+2)%3;r=Math.sqrt(n[3*e+e]-n[3*o+o]-n[3*i+i]+1),t[e]=.5*r,r=.5/r,t[3]=(n[3*o+i]-n[3*i+o])*r,t[o]=(n[3*o+e]+n[3*e+o])*r,t[i]=(n[3*i+e]+n[3*e+i])*r}return t}function b(t,n,e,r){const o=.5*Math.PI/180;n*=o,e*=o,r*=o;const i=Math.sin(n),a=Math.cos(n),c=Math.sin(e),u=Math.cos(e),s=Math.sin(r),f=Math.cos(r);return t[0]=i*u*f-a*c*s,t[1]=a*c*f+i*u*s,t[2]=a*u*s-i*c*f,t[3]=a*u*f+i*c*s,t}const y=u.c,p=u.s,M=u.f,v=l,A=u.b,w=u.g,_=u.l,I=u.i,E=I,C=u.j,T=C,S=u.n,O=u.a,N=u.e;function P(t,n,e){const r=(0,c.m)(n,e);return r<-.999999?((0,c.b)(R,x,n),(0,c.H)(R)<1e-6&&(0,c.b)(R,U,n),(0,c.n)(R,R),s(t,R,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):((0,c.b)(R,n,e),t[0]=R[0],t[1]=R[1],t[2]=R[2],t[3]=1+r,S(t,t))}const R=(0,i.vt)(),x=(0,i.fA)(1,0,0),U=(0,i.fA)(0,1,0),L=(0,o.vt)(),F=(0,o.vt)(),j=(0,r.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:M,calculateW:function(t,n){const e=n[0],r=n[1],o=n[2];return t[0]=e,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-o*o)),t},conjugate:m,copy:y,dot:w,equals:N,exactEquals:O,fromEuler:b,fromMat3:g,getAxisAngle:f,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},invert:d,len:E,length:I,lerp:_,mul:v,multiply:l,normalize:S,random:function(t){const n=a.Ov,e=n(),r=n(),o=n(),i=Math.sqrt(1-e),c=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=c*Math.sin(2*Math.PI*o),t[3]=c*Math.cos(2*Math.PI*o),t},rotateX:function(t,n,e){e*=.5;const r=n[0],o=n[1],i=n[2],a=n[3],c=Math.sin(e),u=Math.cos(e);return t[0]=r*u+a*c,t[1]=o*u+i*c,t[2]=i*u-o*c,t[3]=a*u-r*c,t},rotateY:function(t,n,e){e*=.5;const r=n[0],o=n[1],i=n[2],a=n[3],c=Math.sin(e),u=Math.cos(e);return t[0]=r*u-i*c,t[1]=o*u+a*c,t[2]=i*u+r*c,t[3]=a*u-o*c,t},rotateZ:function(t,n,e){e*=.5;const r=n[0],o=n[1],i=n[2],a=n[3],c=Math.sin(e),u=Math.cos(e);return t[0]=r*u+o*c,t[1]=o*u-r*c,t[2]=i*u+a*c,t[3]=a*u-i*c,t},rotationTo:P,scale:A,set:p,setAxes:function(t,n,e,r){const o=j;return o[0]=e[0],o[3]=e[1],o[6]=e[2],o[1]=r[0],o[4]=r[1],o[7]=r[2],o[2]=-n[0],o[5]=-n[1],o[8]=-n[2],S(t,g(t,o))},setAxisAngle:s,slerp:h,sqlerp:function(t,n,e,r,o,i){return h(L,n,o,i),h(F,e,r,i),h(t,L,F,2*i*(1-i)),t},sqrLen:T,squaredLength:C,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}},Symbol.toStringTag,{value:"Module"}))},7456:function(t,n,e){e.d(n,{l:function(){return s}});var r=e(15774),o=e(73364),i=e(32501),a=e(46098),c=e(61441),u=e(57652);function s(t,n,e,r){if(null==t||null==r)return!1;const i=(0,c.Qk)(t,c.Wv),s=(0,c.Qk)(r,c.zp);if(i===s&&!f(s)&&(i!==c.rz.UNKNOWN||(0,u.aI)(t,r)))return(0,o.kN)(e,n),!0;if(f(s)){const t=c.w5[i][c.rz.LON_LAT],r=c.w5[c.rz.LON_LAT][s];return null!=t&&null!=r&&(t(n,0,h,0),r(h,0,d,0),(0,a.y)(l*h[0],l*h[1],e),e[12]=d[0],e[13]=d[1],e[14]=d[2],!0)}if(!(s!==c.rz.WEB_MERCATOR&&s!==c.rz.PLATE_CARREE&&s!==c.rz.WGS84&&s!==c.rz.CGCS2000||i!==c.rz.WGS84&&i!==c.rz.SPHERICAL_ECEF&&i!==c.rz.WEB_MERCATOR&&i!==c.rz.CGCS2000)){const t=c.w5[i][c.rz.LON_LAT],r=c.w5[c.rz.LON_LAT][s];return null!=t&&null!=r&&(t(n,0,h,0),r(h,0,d,0),i===c.rz.SPHERICAL_ECEF?(0,a.C)(l*h[0],l*h[1],e):(0,o.D_)(e),e[12]=d[0],e[13]=d[1],e[14]=d[2],!0)}return!1}function f(t){return t===c.rz.SPHERICAL_ECEF||t===c.rz.SPHERICAL_MARS_PCPF||t===c.rz.SPHERICAL_MOON_PCPF}const l=(0,r.kU)(1),h=(0,i.vt)(),d=(0,i.vt)()},46098:function(t,n,e){e.d(n,{C:function(){return i},y:function(){return o}});var r=e(73364);function o(t,n,e){const r=Math.sin(t),o=Math.cos(t),i=Math.sin(n),a=Math.cos(n),c=e;return c[0]=-r,c[4]=-i*o,c[8]=a*o,c[12]=0,c[1]=o,c[5]=-i*r,c[9]=a*r,c[13]=0,c[2]=0,c[6]=a,c[10]=i,c[14]=0,c[3]=0,c[7]=0,c[11]=0,c[15]=1,c}function i(t,n,e){return o(t,n,e),(0,r.mg)(e,e),e}},56763:function(t,n,e){e.d(n,{W:function(){return c},g:function(){return a}});var r=e(32501),o=e(46157),i=e(57617);function a(t,n,e,r){if((0,o.canProjectWithoutEngine)(t.spatialReference,e)){u[0]=t.x,u[1]=t.y;const o=t.z;return u[2]=o??r??0,(0,i.projectBuffer)(u,t.spatialReference,0,n,e,0,1)}const a=(0,o.tryProjectWithZConversion)(t,e);return!!a&&(n[0]=a?.x,n[1]=a?.y,n[2]=a?.z??r??0,!0)}async function c(t,n,e,r,i){return await(0,o.initializeProjection)(t.spatialReference,e,null,i),a(t,n,e,r)}const u=(0,r.vt)()},68734:function(t,n,e){e.d(n,{F:function(){return i}}),e(46157);var r=e(57165),o=e(56763);function i(t,n,e,r,i){return!(null==n||null==r||t.length<2)&&(a.x=t[0],a.y=t[1],a.z=t[2],a.spatialReference=n,(0,o.g)(a,e,r,i))}const a=(0,e(46460).T)(0,0,0,r.A.WGS84)},96611:function(t,n,e){e.d(n,{Y0:function(){return s},lO:function(){return f}});var r=e(61714),o=e(57165),i=e(57652);const a=new o.A(r.fv),c=new o.A(r.FY),u=new o.A(r.LJ),s=new o.A(r.Ro);function f(t){const n=l.get(t);if(n)return n;let e=a;if(t)if(t===c)e=c;else if(t===u)e=u;else{const n=t.wkid,r=t.latestWkid;if(null!=n||null!=r)(0,i.tl)(n)||(0,i.tl)(r)?e=c:((0,i.ZL)(n)||(0,i.ZL)(r))&&(e=u);else{const n=t.wkt2??t.wkt;if(n){const t=n.toUpperCase();t===h?e=c:t===d&&(e=u)}}}return l.set(t,e),e}const l=new Map,h=c.wkt.toUpperCase(),d=u.wkt.toUpperCase()},50240:function(t,n,e){e.d(n,{Ns:function(){return u},jh:function(){return o},l5:function(){return a},s:function(){return c},xm:function(){return i}});var r=e(24540);function o(t,n=!1){return t<=r.y9?n?new Array(t).fill(0):new Array(t):new Float64Array(t)}function i(t){return((0,r.cy)(t)?t.length:t.byteLength/8)<=r.y9?Array.from(t):new Float64Array(t)}function a(t,n,e){return Array.isArray(t)?t.slice(n,n+e):t.subarray(n,n+e)}function c(t,n){for(let e=0;e<n.length;++e)t[e]=n[e];return t}function u(t){return Array.isArray(t)?new Float64Array(t):t}},65907:function(t,n,e){e.d(n,{A:function(){return f}});var r=e(53804),o=e(75743),i=e(30905),a=e(23502),c=(e(58941),e(40633),e(13798),e(74376)),u=e(65953);let s=class extends((0,o.O)(i.oY)){constructor(t){super(t),this.type="georeferenced",this.origin=null}};(0,r._)([(0,c.e)({georeferenced:"georeferenced"},{readOnly:!0})],s.prototype,"type",void 0),(0,r._)([(0,a.MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],s.prototype,"origin",void 0),s=(0,r._)([(0,u.$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],s);const f=s},20460:function(t,n,e){e.d(n,{A:function(){return l}});var r=e(53804),o=e(75743),i=e(30905),a=e(23502),c=(e(58941),e(40633),e(13798),e(74376)),u=e(65953),s=e(32501);let f=class extends((0,o.O)(i.oY)){constructor(t){super(t),this.type="local",this.origin=(0,s.vt)()}};(0,r._)([(0,c.e)({local:"local"},{readOnly:!0})],f.prototype,"type",void 0),(0,r._)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"origin",void 0),f=(0,r._)([(0,u.$)("esri.geometry.support.MeshLocalVertexSpace")],f);const l=f},5596:function(t,n,e){e.d(n,{C:function(){return l},Cr:function(){return g},Io:function(){return L},LV:function(){return f},O_:function(){return m},Qj:function(){return h},T7:function(){return O},Tj:function(){return P},U5:function(){return T},Ui:function(){return S},Z1:function(){return U},_I:function(){return x},b6:function(){return R},ci:function(){return y},fA:function(){return d},gv:function(){return N},lU:function(){return b},mN:function(){return F},mP:function(){return I},mR:function(){return C},vt:function(){return s},ze:function(){return E}});var r=e(15774),o=e(20551),i=e(32501),a=(e(33400),e(29531)),c=e(50973),u=e(76185);function s(t=z){return[t[0],t[1],t[2],t[3]]}function f(t=z[0],n=z[1],e=z[2],r=z[3]){return d(t,n,e,r,c.Km.get())}function l(t,n){return d(n[0],n[1],n[2],n[3],t)}function h(t){return t}function d(t,n,e,r,o=s()){return o[0]=t,o[1]=n,o[2]=e,o[3]=r,o}function m(t,n,e){const r=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],o=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function g(t,n,e,r=s()){const o=e[0]-n[0],i=e[1]-n[1],a=e[2]-n[2],c=t[0]-n[0],u=t[1]-n[1],f=t[2]-n[2],l=i*f-a*u,h=a*c-o*f,d=o*u-i*c,m=l*l+h*h+d*d,g=Math.abs(m-1)>1e-5&&m>1e-12?1/Math.sqrt(m):1;return r[0]=l*g,r[1]=h*g,r[2]=d*g,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function b(t,n,e,r=0,i=Math.floor(e*(1/3)),a=Math.floor(e*(2/3))){if(e<3)return!1;n(M,r);let c=i,u=!1;for(;c<e-1&&!u;)n(v,c),c++,u=!(0,o.e)(M,v);if(!u)return!1;for(c=Math.max(c,a),u=!1;c<e&&!u;)n(A,c),c++,(0,o.f)(w,M,v),(0,o.n)(w,w),(0,o.f)(_,v,A),(0,o.n)(_,_),u=!(0,o.e)(M,A)&&!(0,o.e)(v,A)&&Math.abs((0,o.m)(w,_))<p;return u?(g(M,v,A,t),!0):(0!==r||1!==i||2!==a)&&b(t,n,e,0,1,2)}function y(t,n,e=!0){const r=n.length/3;return b(t,((t,e)=>(0,o.s)(t,n[3*e+0],n[3*e+1],n[3*e+2])),e?r-1:r)}const p=.99619469809,M=(0,i.vt)(),v=(0,i.vt)(),A=(0,i.vt)(),w=(0,i.vt)(),_=(0,i.vt)();function I(t,n,e){return n!==t&&l(t,n),t[3]=-(0,o.m)(t,e),t}function E(t,n){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n}function C(t,n,e,r){return(0,o.b)(A,n,t),m(e,A,r)}function T(t,n,e,r){return j(t,n,(0,o.f)(c.rq.get(),e,n),V,r)}function S(t,n,e){return null!=n&&j(t,n.origin,n.direction,q,e)}function O(t,n,e){return j(t,n.origin,n.vector,D.NONE,e)}function N(t,n,e){return j(t,n.origin,n.vector,D.CLAMP,e)}function P(t,n){return F(t,n)>=0}function R(t,n){const e=(0,o.m)(t,n.ray.direction),r=-F(t,n.ray.origin);if(e>-1e-6&&e<1e-6)return r>0;const i=r/e;return e>0?i<n.c1&&(n.c1=i):i>n.c0&&(n.c0=i),n.c0<=n.c1}function x(t,n,e){const r=(0,o.j)(c.rq.get(),t,-t[3]),i=function(t,n,e){const r=(0,o.j)(c.rq.get(),t,(0,o.m)(t,n));return(0,o.f)(e,n,r),e}(t,(0,o.f)(c.rq.get(),n,r),c.rq.get());return(0,o.g)(e,i,r),e}function U(t,n,e,r){const i=t,s=c.rq.get(),f=c.rq.get();(0,u.VV)(i,s,f);const l=(0,o.f)(c.rq.get(),e,n),h=(0,a.gr)(s,l),d=(0,a.gr)(f,l),m=(0,a.gr)(i,l);return(0,o.s)(r,h,d,m)}function L(t,n){return Math.abs(F(t,n))}function F(t,n){return(0,o.m)(t,n)+t[3]}function j(t,n,e,i,a){const c=(0,o.m)(t,e);if(0===c)return!1;let u=-((0,o.m)(t,n)+t[3])/c;return i&D.CLAMP&&(u=(0,r.qE)(u,0,1)),!(!(i&D.INFINITE_MIN)&&u<0||!(i&D.INFINITE_MAX)&&u>1||((0,o.g)(a,n,(0,o.j)(a,e,u)),0))}const z=[0,0,1,0];var D,B;(B=D||(D={}))[B.NONE=0]="NONE",B[B.CLAMP=1]="CLAMP",B[B.INFINITE_MIN=4]="INFINITE_MIN",B[B.INFINITE_MAX=8]="INFINITE_MAX";const V=D.INFINITE_MIN|D.INFINITE_MAX,q=D.INFINITE_MAX},79578:function(t,n,e){e.d(n,{C:function(){return f},Cr:function(){return l},LV:function(){return s},kb:function(){return h},oC:function(){return d},vt:function(){return c}}),e(50659);var r=e(89736),o=e(20551),i=e(32501),a=e(50973);function c(t){return t?u((0,i.o8)(t.origin),(0,i.o8)(t.direction)):u((0,i.vt)(),(0,i.vt)())}function u(t,n){return{origin:t,direction:n}}function s(t,n){const e=m.get();return e.origin=t,e.direction=n,e}function f(t,n=c()){return function(t,n,e=c()){return(0,o.c)(e.origin,t),(0,o.c)(e.direction,n),e}(t.origin,t.direction,n)}function l(t,n,e=c()){return(0,o.c)(e.origin,t),(0,o.f)(e.direction,n,t),e}function h(t,n){const e=(0,o.b)(a.rq.get(),(0,o.n)(a.rq.get(),t.direction),(0,o.f)(a.rq.get(),n,t.origin));return(0,o.m)(e,e)}function d(t,n,e){const r=(0,o.m)(t.direction,(0,o.f)(e,n,t.origin));return(0,o.g)(e,t.origin,(0,o.j)(e,t.direction,r)),e}const m=new r.I((()=>c()));(0,i.vt)()},29531:function(t,n,e){e.d(n,{_I:function(){return a},g7:function(){return u},gr:function(){return c}});var r=e(15774),o=e(20551),i=e(32501);function a(t,n,e){const r=(0,o.m)(t,n)/(0,o.m)(t,t);return(0,o.j)(e,t,r)}function c(t,n){return(0,o.m)(t,n)/(0,o.l)(t)}function u(t,n){const e=(0,o.m)(t,n)/((0,o.l)(t)*(0,o.l)(n));return-(0,r.XM)(e)}(0,i.vt)(),(0,i.vt)()},50973:function(t,n,e){e.d(n,{Rc:function(){return m},J8:function(){return g},oG:function(){return l},rq:function(){return h},Km:function(){return d}}),e(58941);var r=e(29601),o=e(87725),i=e(39714),a=e(61769),c=e(1932),u=e(32501),s=e(41546);class f{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new f(c.vt)}static createVec3f64(){return new f(u.vt)}static createVec4f64(){return new f(s.vt)}static createMat3f64(){return new f(o.vt)}static createMat4f64(){return new f(i.vt)}static createQuatf64(){return new f(a.vt)}get test(){}}const l=f.createVec2f64(),h=f.createVec3f64(),d=f.createVec4f64(),m=(f.createMat3f64(),f.createMat4f64()),g=f.createQuatf64()},46460:function(t,n,e){function r(t,n,e,r){return{x:t,y:n,z:e,hasZ:null!=e,hasM:!1,spatialReference:r,type:"point"}}function o(t,n,e,r,o){t.x=n,t.y=e,t.z=r,t.hasZ=null!=r,t.spatialReference=o}e.d(n,{J:function(){return o},T:function(){return r}})},90525:function(t,n,e){e.r(n),e.d(n,{destroyContext:function(){return C},dracoDecompressPointCloudData:function(){return v},filterObbsForModifications:function(){return A},filterObbsForModificationsSync:function(){return R},initialize:function(){return L},interpretObbModificationResults:function(){return P},process:function(){return M},project:function(){return I},setLegacySchema:function(){return _},setModifications:function(){return w},setModificationsSync:function(){return O},test:function(){return j},transformNormals:function(){return E}});var r,o,i=e(15774),a=e(57165),c=e(50240),u=e(65907),s=e(20460),f=e(62693);!function(t){t[t.None=0]="None",t[t.Int16=1]="Int16",t[t.Int32=2]="Int32"}(r||(r={})),function(t){t[t.Replace=0]="Replace",t[t.Outside=1]="Outside",t[t.Inside=2]="Inside",t[t.Finished=3]="Finished"}(o||(o={}));var l=e(53216);function h(t){return(0,l.s)(`esri/libs/i3s/${t}`)}let d;var m,g,b,y,p;async function M(t){S=await F();const n=[t.geometryBuffer];return{result:N(S,t,n),transferList:n}}async function v(t){S=await F();const n=[t.geometryBuffer],{geometryBuffer:e}=t,r=e.byteLength,o=S._malloc(r),i=new Uint8Array(S.HEAPU8.buffer,o,r);i.set(new Uint8Array(e));const a=S.dracoDecompressPointCloudData(o,i.byteLength);if(S._free(o),a.error.length>0)throw new Error(`i3s.wasm: ${a.error}`);const c=a.featureIds?.length>0?a.featureIds.slice():null,u=a.positions.slice();return c&&n.push(c.buffer),n.push(u.buffer),{result:{positions:u,featureIds:c},transferList:n}}async function A(t){await F(),R(t);const n={buffer:t.buffer};return{result:n,transferList:[n.buffer]}}async function w(t){await F(),O(t)}async function _(t){S=await F(),S.setLegacySchema(t.context,t.jsonSchema)}async function I(t){const{localMatrix:n,origin:r,positions:o,vertexSpace:i,localMode:f}=t,l=a.A.fromJSON(t.inSpatialReference),h=a.A.fromJSON(t.outSpatialReference);let d;const[{projectBuffer:m},{initializeProjection:g}]=await Promise.all([Promise.resolve().then(e.bind(e,57617)),Promise.resolve().then(e.bind(e,46157))]);await g(l,h);const b=[0,0,0];if(!m(r,l,0,b,h,0,1))throw new Error("Failed to project");if("georeferenced"===i.type&&null==i.origin){if(d=new Float64Array(o.length),!m(o,l,0,d,h,0,d.length/3))throw new Error("Failed to project")}else{const t="georeferenced"===i.type?u.A.fromJSON(i):s.A.fromJSON(i),{project:r}=await e.e(7210).then(e.bind(e,83614)),a=r({positions:o,transform:n?{localMatrix:n}:void 0,vertexSpace:t,inSpatialReference:l,outSpatialReference:h,localMode:f});if(!a)throw new Error("Failed to project");d=(0,c.Ns)(a)}const y=d.length,[p,M,v]=b;for(let t=0;t<y;t+=3)d[t]-=p,d[t+1]-=M,d[t+2]-=v;return{result:{projected:d,original:o,projectedOrigin:b},transferList:[d.buffer,o.buffer]}}async function E({normalMatrix:t,normals:n}){const e=new Float32Array(n.length);return(0,f.t)(e,n,t),(0,i.or)(t)&&(0,f.n)(e,e),{result:{transformed:e,original:n},transferList:[e.buffer,n.buffer]}}function C(t){x(t)}let T,S;function O(t){if(!S)return;const n=t.modifications,e=S._malloc(8*n.length),r=new Float64Array(S.HEAPU8.buffer,e,n.length);for(let t=0;t<n.length;++t)r[t]=n[t];S.setModifications(t.context,e,n.length,t.isGeodetic),S._free(e)}function N(t,n,e){const{context:o,globalTrafo:i,mbs:a,obbData:c,elevationOffset:u,geometryBuffer:s,geometryDescriptor:f,indexToVertexProjector:l,vertexToRenderProjector:h}=n,d=t._malloc(s.byteLength),m=t._malloc(33*Float64Array.BYTES_PER_ELEMENT),g=new Uint8Array(t.HEAPU8.buffer,d,s.byteLength);g.set(new Uint8Array(s));const b=new Float64Array(t.HEAPU8.buffer,m,33);U(b,[NaN,NaN,NaN]);let y=b.byteOffset+3*b.BYTES_PER_ELEMENT,p=new Float64Array(b.buffer,y);U(p,i),y+=16*b.BYTES_PER_ELEMENT,p=new Float64Array(b.buffer,y),U(p,a),y+=4*b.BYTES_PER_ELEMENT,c&&(p=new Float64Array(b.buffer,y),U(p,c));const M=f,v={isDraco:!1,isLegacy:!1,color:n.layouts.some((t=>t.some((t=>"color"===t.name)))),normal:n.needNormals&&n.layouts.some((t=>t.some((t=>"normalCompressed"===t.name)))),uv0:n.layouts.some((t=>t.some((t=>"uv0"===t.name)))),uvRegion:n.layouts.some((t=>t.some((t=>"uvRegion"===t.name)))),featureIndex:M.featureIndex},A=t.process(o,!!n.obbData,d,g.byteLength,M,v,m,u,l,h,n.normalReferenceFrame);if(t._free(m),t._free(d),A.error.length>0)throw new Error(`i3s.wasm: ${A.error}`);if(A.discarded)return null;const w=A.componentOffsets.length>0?A.componentOffsets.slice():null,_=A.featureIds.length>0?A.featureIds.slice():null,I=A.anchorIds.length>0?Array.from(A.anchorIds):null,E=A.anchors.length>0?Array.from(A.anchors):null,C=A.interleavedVertedData.slice().buffer,T=A.indicesType===r.Int16?new Uint16Array(A.indices.buffer,A.indices.byteOffset,A.indices.byteLength/2).slice():new Uint32Array(A.indices.buffer,A.indices.byteOffset,A.indices.byteLength/4).slice(),S=A.positions.slice(),O=A.positionIndicesType===r.Int16?new Uint16Array(A.positionIndices.buffer,A.positionIndices.byteOffset,A.positionIndices.byteLength/2).slice():new Uint32Array(A.positionIndices.buffer,A.positionIndices.byteOffset,A.positionIndices.byteLength/4).slice(),N={layout:n.layouts[0],interleavedVertexData:C,indices:T,hasColors:A.hasColors,hasModifications:A.hasModifications,positionData:{data:S,indices:O}};return _&&e.push(_.buffer),w&&e.push(w.buffer),e.push(C),e.push(T.buffer),e.push(S.buffer),e.push(O.buffer),{componentOffsets:w,featureIds:_,anchorIds:I,anchors:E,transformedGeometry:N,obb:A.obb,globalTrafo:i}}function P(t){return 0===t?g.Unmodified:1===t?g.PotentiallyModified:2===t?g.Culled:g.Unknown}function R(t){if(!S)return;const{context:n,buffer:e}=t,r=S._malloc(e.byteLength),o=e.byteLength/Float64Array.BYTES_PER_ELEMENT,i=new Float64Array(S.HEAPU8.buffer,r,o),a=new Float64Array(e);i.set(a),S.filterOBBs(n,r,o),a.set(i),S._free(r)}function x(t){S&&0===S.destroy(t)&&(S=null)}function U(t,n){for(let e=0;e<n.length;++e)t[e]=n[e]}async function L(){S||await F()}function F(){return S?Promise.resolve(S):(T||(T=(d||(d=new Promise((t=>e.e(1845).then(e.bind(e,47805)).then((t=>t.i)).then((({default:n})=>{const e=n({locateFile:h,onRuntimeInitialized:()=>t(e)});delete e.then})))).catch((t=>{throw t}))),d).then((t=>(S=t,T=null,S)))),T)}e(41546),e(90599),e(41185),function(t){t[t.Unmodified=0]="Unmodified",t[t.Culled=1]="Culled",t[t.NotChecked=2]="NotChecked"}(m||(m={})),function(t){t[t.Unmodified=0]="Unmodified",t[t.PotentiallyModified=1]="PotentiallyModified",t[t.Culled=2]="Culled",t[t.Unknown=3]="Unknown",t[t.NotChecked=4]="NotChecked"}(g||(g={})),function(t){t[t.Unknown=0]="Unknown",t[t.Uncached=1]="Uncached",t[t.Cached=2]="Cached"}(b||(b={})),function(t){t[t.None=0]="None",t[t.MaxScreenThreshold=1]="MaxScreenThreshold",t[t.ScreenSpaceRelative=2]="ScreenSpaceRelative",t[t.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",t[t.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(y||(y={})),function(t){t[t.Hole=0]="Hole",t[t.Leaf=1]="Leaf"}(p||(p={}));const j={transform:(t,n)=>S&&N(S,t,n),destroy:x}},33188:function(t,n,e){e.d(n,{MA:function(){return h},m0:function(){return y},wH:function(){return g}});var r=e(39819),o=e(21609),i=e(40633),a=e(40131),c=e(65839);const u=()=>i.A.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function s(t,n,e){let o="",i=0;for(;i<e;){const a=t[n+i];if(a<128)o+=String.fromCharCode(a),i++;else if(a>=192&&a<224){if(i+1>=e)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");const c=(31&a)<<6|63&t[n+i+1];o+=String.fromCharCode(c),i+=2}else if(a>=224&&a<240){if(i+2>=e)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const c=(15&a)<<12|(63&t[n+i+1])<<6|63&t[n+i+2];o+=String.fromCharCode(c),i+=3}else{if(!(a>=240&&a<248))throw new r.A("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(i+3>=e)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const c=(7&a)<<18|(63&t[n+i+1])<<12|(63&t[n+i+2])<<6|63&t[n+i+3];if(c>=65536){const t=55296+(c-65536>>10),n=56320+(1023&c);o+=String.fromCharCode(t,n)}else o+=String.fromCharCode(c);i+=4}}}return o}function f(t,n){const e={byteOffset:0,byteCount:0,fields:Object.create(null)};let r=0;for(let o=0;o<n.length;o++){const i=n[o],a=i.valueType||i.type,c=M[a];e.fields[i.property]=c(t,r),r+=p[a].BYTES_PER_ELEMENT}return e.byteCount=r,e}function l(t,n,e){const o=[];let i,a,c=0;for(a=0;a<t;a+=1){if(i=n[a],i>0){if(o.push(s(e,c,i-1)),0!==e[c+i-1])throw new r.A("string-array-error","Invalid string array: missing null termination.")}else o.push(null);c+=i}return o}function h(t,n){return new(0,p[n.valueType])(t,n.byteOffset,n.count*n.valuesPerElement)}function d(t,n,e){const i=null!=n.header?f(t,n.header):{byteOffset:0,byteCount:0,fields:{count:e}},a={header:i,byteOffset:i.byteCount,byteCount:0,entries:Object.create(null)};let c=i.byteCount;for(let t=0;t<n.ordering.length;t++){const e=n.ordering[t],u=(0,o.o8)(n[e]);if(u.count=i.fields.count??0,"String"===u.valueType){if(u.byteOffset=c,u.byteCount=i.fields[e+"ByteCount"],"UTF-8"!==u.encoding)throw new r.A("unsupported-encoding","Unsupported String encoding.",{encoding:u.encoding});if(u.timeEncoding&&"ECMA_ISO8601"!==u.timeEncoding)throw new r.A("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:u.timeEncoding})}else{if(!v(u.valueType))throw new r.A("unsupported-value-type","Unsupported binary valueType",{valueType:u.valueType});{const t=A(u.valueType);c+=c%t!=0?t-c%t:0,u.byteOffset=c,u.byteCount=t*u.valuesPerElement*u.count}}c+=u.byteCount??0,a.entries[e]=u}return a.byteCount=c-a.byteOffset,a}function m(t,n,e){if(n!==t&&u().error(`Invalid ${e} buffer size\n expected: ${t}, actual: ${n})`),n<t)throw new r.A("buffer-too-small","Binary buffer is too small",{expectedSize:t,actualSize:n})}function g(t,n){const e=f(t,n&&n.header);let r=e.byteCount;const o={isDraco:!1,header:e,byteOffset:e.byteCount,byteCount:0,vertexAttributes:{}},i=e.fields,a=null!=i.vertexCount?i.vertexCount:i.count;for(const t of n.ordering){if(!n.vertexAttributes[t])continue;const e={...n.vertexAttributes[t],byteOffset:r,count:a},i=b[t]||"_"+t;o.vertexAttributes[i]=e,r+=A(e.valueType)*e.valuesPerElement*a}const c=i.faceCount;if(n.faces&&c){o.faces={};for(const t of n.ordering){if(!n.faces[t])continue;const e={...n.faces[t],byteOffset:r,count:c};o.faces[t]=e,r+=A(e.valueType)*e.valuesPerElement*c}}const u=i.featureCount;if(n.featureAttributes&&n.featureAttributeOrder&&u){o.featureAttributes={};for(const t of n.featureAttributeOrder){if(!n.featureAttributes[t])continue;const e={...n.featureAttributes[t],byteOffset:r,count:u};o.featureAttributes[t]=e,r+=("UInt64"===e.valueType?8:A(e.valueType))*e.valuesPerElement*u}}return m(r,t.byteLength,"geometry"),o.byteCount=r-o.byteOffset,o}const b={position:c.r.POSITION,normal:c.r.NORMAL,color:c.r.COLOR,uv0:c.r.UV0,region:c.r.UVREGION};function y(t,n,e){if("lepcc-rgb"===t.encoding)return(0,a.mb)(n);if("lepcc-intensity"===t.encoding)return(0,a.Ax)(n);if(null!=t.encoding&&""!==t.encoding)throw new r.A("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");t["attributeByteCounts "]&&!t.attributeByteCounts&&(u().warn("Warning: Trailing space in 'attributeByteCounts '."),t.attributeByteCounts=t["attributeByteCounts "]),"ObjectIds"===t.ordering[0]&&t.hasOwnProperty("objectIds")&&(u().warn("Warning: Case error in objectIds"),t.ordering[0]="objectIds");const o=d(n,t,e);m(o.byteOffset+o.byteCount,n.byteLength,"attribute");const i=o.entries.attributeValues||o.entries.objectIds;if(i){if("String"===i.valueType){const t=o.entries.attributeByteCounts,e=h(n,t),r=function(t,n){return new Uint8Array(t,n.byteOffset,n.byteCount)}(n,i);return i.timeEncoding?function(t,n,e){return l(t,n,e).map((t=>{const n=t?Date.parse(t):null;return null==n||Number.isNaN(n)?null:n}))}(t.count,e,r):l(t.count,e,r)}return h(n,i)}throw new r.A("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const p={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},M={Float32:(t,n)=>new DataView(t,0).getFloat32(n,!0),Float64:(t,n)=>new DataView(t,0).getFloat64(n,!0),UInt8:(t,n)=>new DataView(t,0).getUint8(n),Int8:(t,n)=>new DataView(t,0).getInt8(n),UInt16:(t,n)=>new DataView(t,0).getUint16(n,!0),Int16:(t,n)=>new DataView(t,0).getInt16(n,!0),UInt32:(t,n)=>new DataView(t,0).getUint32(n,!0),Int32:(t,n)=>new DataView(t,0).getInt32(n,!0)};function v(t){return p.hasOwnProperty(t)}function A(t){return v(t)?p[t].BYTES_PER_ELEMENT:0}},41185:function(t,n,e){e.d(n,{Q7:function(){return y},s1:function(){return d}}),e(50917);var r=e(93040),o=(e(50659),e(39819),e(58941),e(24540)),i=(e(73364),e(39714)),a=(e(20551),e(32501)),c=(e(46157),e(96611),e(68734),e(87416)),u=(e(90599),e(7926),e(33188));e(61714),e(7456);var s,f,l=e(26586),h=(e(9933),e(89765));async function d(t,n,e,o,i,a,c,s){const f=[];for(const r of n)if(r&&i.includes(r.name)){const n=`${t}/nodes/${e}/attributes/${r.key}/0`;f.push({url:n,storageInfo:r})}const l=await Promise.allSettled(f.map((t=>(0,r.A)(t.url,{responseType:"array-buffer",query:{...c,token:a},signal:s?.signal}).then((n=>(0,u.m0)(t.storageInfo,n.data)))))),h=[];for(const t of o){const n={};for(let e=0;e<l.length;e++){const r=l[e];if("fulfilled"===r.status){const o=r.value;n[f[e].storageInfo.name]=b(o,t)}}h.push(n)}return h}e(57165),(0,c.vt)(),(f=s||(s={}))[f.OUTSIDE=0]="OUTSIDE",f[f.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",f[f.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",f[f.INSIDE=3]="INSIDE";const m=-32768,g=-(2**31);function b(t,n){if(!t)return null;const e=t[n];return(0,o.IY)(t)?e===m?null:e:(0,o._G)(t)?e===g?null:e:e!=e?null:e}function y(t){null!=t&&(t[3]=-1)}(0,l.CC)({color:[0,0,0,0],opacity:0}),(0,a.vt)(),(0,a.vt)(),(0,a.vt)(),(0,a.vt)(),(0,a.vt)(),(0,a.vt)(),(0,a.vt)(),(0,a.vt)(),(0,c.vt)(),(0,c.vt)(),new h.ab,(0,a.vt)(),new Array(72),(0,i.vt)()},40131:function(t,n,e){e.d(n,{Ax:function(){return y},Me:function(){return s},mb:function(){return m}});var r=e(39819);const o=!0,i={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function a(t,n,e){return{identifier:String.fromCharCode.apply(null,new Uint8Array(t,e+i.identifierOffset,i.identifierLength)),version:n.getUint16(e+i.versionOffset,o),checksum:n.getUint32(e+i.checksumOffset,o)}}const c={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function u(t,n){return{sizeLo:t.getUint32(n+c.sizeLo,o),sizeHi:t.getUint32(n+c.sizeHi,o),minX:t.getFloat64(n+c.minX,o),minY:t.getFloat64(n+c.minY,o),minZ:t.getFloat64(n+c.minZ,o),maxX:t.getFloat64(n+c.maxX,o),maxY:t.getFloat64(n+c.maxY,o),maxZ:t.getFloat64(n+c.maxZ,o),errorX:t.getFloat64(n+c.errorX,o),errorY:t.getFloat64(n+c.errorY,o),errorZ:t.getFloat64(n+c.errorZ,o),count:t.getUint32(n+c.count,o),reserved:t.getUint32(n+c.reserved,o)}}function s(t){const n=new DataView(t,0);let e=0;const{identifier:o,version:s}=a(t,n,e);if(e+=i.byteCount,"LEPCC     "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(s>1)throw new r.A("lepcc-decode-error","Unknown version");const l=u(n,e);if(e+=c.byteCount,l.sizeHi*2**32+l.sizeLo!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const h=new Float64Array(3*l.count),d=[],m=[],g=[],b=[];if(e=f(t,e,d),e=f(t,e,m),e=f(t,e,g),e=f(t,e,b),e!==t.byteLength)throw new r.A("lepcc-decode-error","Bad length");let y=0,p=0;for(let t=0;t<d.length;t++){p+=d[t];let n=0;for(let e=0;e<m[t];e++){n+=g[y];const t=b[y];h[3*y]=Math.min(l.maxX,l.minX+2*l.errorX*n),h[3*y+1]=Math.min(l.maxY,l.minY+2*l.errorY*p),h[3*y+2]=Math.min(l.maxZ,l.minZ+2*l.errorZ*t),y++}}return{errorX:l.errorX,errorY:l.errorY,errorZ:l.errorZ,result:h}}function f(t,n,e){const r=[];n=l(t,n,r);const o=[];for(let i=0;i<r.length;i++){o.length=0,n=l(t,n,o);for(let t=0;t<o.length;t++)e.push(o[t]+r[i])}return n}function l(t,n,e){const i=new DataView(t,n),a=i.getUint8(0),c=31&a,u=!!(32&a),s=(192&a)>>6;let f=0;if(0===s)f=i.getUint32(1,o),n+=5;else if(1===s)f=i.getUint16(1,o),n+=3;else{if(2!==s)throw new r.A("lepcc-decode-error","Bad count type");f=i.getUint8(1),n+=2}if(u)throw new r.A("lepcc-decode-error","LUT not implemented");const l=Math.ceil(f*c/8),h=new Uint8Array(t,n,l);let d=0,m=0,g=0;const b=-1>>>32-c;for(let t=0;t<f;t++){for(;m<c;)d|=h[g]<<m,m+=8,g+=1;e[t]=d&b,d>>>=c,m-=c,m+c>32&&(d|=h[g-1]>>8-m)}return n+g}const h={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function d(t,n){return{sizeLo:t.getUint32(n+h.sizeLo,o),sizeHi:t.getUint32(n+h.sizeHi,o),count:t.getUint32(n+h.count,o),colorMapCount:t.getUint16(n+h.colorMapCount,o),lookupMethod:t.getUint8(n+h.lookupMethod),compressionMethod:t.getUint8(n+h.compressionMethod)}}function m(t){const n=new DataView(t,0);let e=0;const{identifier:o,version:c}=a(t,n,e);if(e+=i.byteCount,"ClusterRGB"!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(c>1)throw new r.A("lepcc-decode-error","Unknown version");const u=d(n,e);if(e+=h.byteCount,u.sizeHi*2**32+u.sizeLo!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");if((2===u.lookupMethod||1===u.lookupMethod)&&0===u.compressionMethod){if(3*u.colorMapCount+u.count+e!==t.byteLength||u.colorMapCount>256)throw new r.A("lepcc-decode-error","Bad count");const n=new Uint8Array(t,e,3*u.colorMapCount),o=new Uint8Array(t,e+3*u.colorMapCount,u.count),i=new Uint8Array(3*u.count);for(let t=0;t<u.count;t++){const e=o[t];i[3*t]=n[3*e],i[3*t+1]=n[3*e+1],i[3*t+2]=n[3*e+2]}return i}if(0===u.lookupMethod&&0===u.compressionMethod){if(3*u.count+e!==t.byteLength||0!==u.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");return new Uint8Array(t,e).slice()}if(u.lookupMethod<=2&&1===u.compressionMethod){if(e+3!==t.byteLength||1!==u.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");const o=n.getUint8(e),i=n.getUint8(e+1),a=n.getUint8(e+2),c=new Uint8Array(3*u.count);for(let t=0;t<u.count;t++)c[3*t]=o,c[3*t+1]=i,c[3*t+2]=a;return c}throw new r.A("lepcc-decode-error","Bad method "+u.lookupMethod+","+u.compressionMethod)}const g={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function b(t,n){return{sizeLo:t.getUint32(n+g.sizeLo,o),sizeHi:t.getUint32(n+g.sizeHi,o),count:t.getUint32(n+g.count,o),scaleFactor:t.getUint16(n+g.scaleFactor,o),bitsPerPoint:t.getUint8(n+g.bitsPerPoint),reserved:t.getUint8(n+g.reserved)}}function y(t){const n=new DataView(t,0);let e=0;const{identifier:o,version:c}=a(t,n,e);if(e+=i.byteCount,"Intensity "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(c>1)throw new r.A("lepcc-decode-error","Unknown version");const u=b(n,e);if(e+=g.byteCount,u.sizeHi*2**32+u.sizeLo!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const s=new Uint16Array(u.count);if(8===u.bitsPerPoint){if(u.count+e!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const n=new Uint8Array(t,e,u.count);for(let t=0;t<u.count;t++)s[t]=n[t]*u.scaleFactor}else if(16===u.bitsPerPoint){if(2*u.count+e!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const n=new Uint16Array(t,e,u.count);for(let t=0;t<u.count;t++)s[t]=n[t]*u.scaleFactor}else{const n=[];if(l(t,e,n)!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");for(let t=0;t<u.count;t++)s[t]=n[t]*u.scaleFactor}return s}},26586:function(t,n,e){e.d(n,{Cc:function(){return d},CC:function(){return m},RF:function(){return h}});var r,o,i,a,c=e(52874),u=(e(58941),e(13520)),s=e(41546),f=e(33753),l=(e(82547),e(5161),e(77222),e(27264),e(52766),e(41356),e(65312));function h(t){return t&&t.enabled&&("extrude"===t.type||function(t){return"fill"===t.type}(t))&&null!=t.edges}function d(t,n){return function(t,n){if(null==t)return null;const e=null!=t.color?(0,s.ci)(c.A.toUnitRGBA(t.color)):(0,s.fA)(0,0,0,0),r=(0,u.Lz)(t.size),o=(0,u.Lz)(t.extensionLength);switch(t.type){case"solid":return m({color:e,size:r,extensionLength:o,...n});case"sketch":return function(t){return{...b,...t,type:i.Sketch}}({color:e,size:r,extensionLength:o,...n});default:return}}(function(t){return t&&t.enabled&&t.edges||null}(t),n)}function m(t){return{...g,...t,type:i.Solid}}e(54516),l.n,e(39506),e(40075),e(65839),(o=r||(r={}))[o.Uniform=0]="Uniform",o[o.Varying=1]="Varying",o[o.COUNT=2]="COUNT",e(11377),e(90576),e(4435),e(82598),e(14543),e(31190),e(78567),e(70340),function(t){t[t.Solid=0]="Solid",t[t.Sketch=1]="Sketch",t[t.Mixed=2]="Mixed",t[t.COUNT=3]="COUNT"}(i||(i={})),function(t){t[t.REGULAR=0]="REGULAR",t[t.SILHOUETTE=1]="SILHOUETTE"}(a||(a={}));const g={color:(0,s.fA)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:f.x.OPAQUE,hasSlicePlane:!1},b={color:(0,s.fA)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:f.x.OPAQUE,hasSlicePlane:!1}},9933:function(t,n,e){e.d(n,{Eb:function(){return a},_j:function(){return c},k5:function(){return r}});var r,o,i=e(15774);function a(t){switch(t){case"multiply":default:return r.Multiply;case"ignore":return r.Ignore;case"replace":return r.Replace;case"tint":return r.Tint}}function c(t,n,e){if(null==t||n===r.Ignore)return e[0]=255,e[1]=255,e[2]=255,void(e[3]=255);const o=(0,i.qE)(Math.round(t[3]*s),0,s),a=0===o||n===r.Tint?0:n===r.Replace?f:l;e[0]=(0,i.qE)(Math.round(t[0]*u),0,u),e[1]=(0,i.qE)(Math.round(t[1]*u),0,u),e[2]=(0,i.qE)(Math.round(t[2]*u),0,u),e[3]=o+a}(o=r||(r={}))[o.Multiply=1]="Multiply",o[o.Ignore=2]="Ignore",o[o.Replace=3]="Replace",o[o.Tint=4]="Tint";const u=255,s=85,f=s,l=2*s},76185:function(t,n,e){e.d(n,{VV:function(){return c},hG:function(){return i},wp:function(){return a}}),e(15774);var r=e(20551),o=e(32501);function i(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,e,r))}function a(t,n){const e=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),o=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),i=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return(0,r.s)(t,e,o,i),t}function c(t,n,e){Math.abs(t[0])>Math.abs(t[1])?(0,r.s)(n,0,1,0):(0,r.s)(n,1,0,0),(0,r.b)(e,t,n),(0,r.b)(n,e,t),(0,r.n)(e,e),(0,r.n)(n,n)}(0,o.vt)(),(0,o.vt)(),(0,o.vt)(),(0,o.vt)(),(0,o.vt)()},89765:function(t,n,e){e.d(n,{ab:function(){return vt},gm:function(){return Nt}});var r=e(44705),o=e(87725),i=e(39714),a=e(32237),c=e(61769),u=e(20551),s=e(32501),f=e(33400),l=e(41546),h=e(61714),d=e(96611),m=e(7456),g=e(57617),b=e(61441),y=e(5596),p=e(57652),M=e(50973),v=e(65420),A=e(1932),w=e(14905);const _=1e-6,I=(0,s.vt)(),E=(0,s.vt)();function C(t,n,e,r,o,i,a,c,u,s){return function(t,n,e){let r=pt(t.maxVert[0],t.minVert[0]),o=0;for(let n=1;n<7;++n){const e=pt(t.maxVert[n],t.minVert[n]);e>r&&(r=e,o=n)}mt(n,t.minVert[o]),mt(e,t.maxVert[o])}(t,r,o),pt(r,o)<_?1:(ht(a,r,o),bt(a,a),function(t,n,e,r){const{data:o,size:i}=t;let a=Number.NEGATIVE_INFINITY,c=0;for(let t=0;t<o.length;t+=i){F[0]=o[t]-n[0],F[1]=o[t+1]-n[1],F[2]=o[t+2]-n[2];const r=e[0]*F[0]+e[1]*F[1]+e[2]*F[2],i=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],u=F[0]*F[0]+F[1]*F[1]+F[2]*F[2]-r*r/i;u>a&&(a=u,c=t)}return mt(r,o,c),a}(n,r,a,i)<_?2:(ht(c,o,i),bt(c,c),ht(u,i,r),bt(u,u),gt(e,c,a),bt(e,e),k(n,e,a,c,u,s),0))}const T=(0,s.vt)(),S=(0,s.vt)(),O=(0,s.vt)(),N=(0,s.vt)(),P=(0,s.vt)(),R=(0,s.vt)(),x=(0,s.vt)(),U=(0,s.vt)();function L(t,n,e,r,o,i,a,c,u){(function(t,n,e,r,o){!function(t,n,e,r,o){const{data:i,size:a}=t;mt(r,i),mt(o,r),e[0]=Mt(Y,n),e[1]=e[0];for(let t=a;t<i.length;t+=a){const a=i[t]*n[0]+i[t+1]*n[1]+i[t+2]*n[2];a<e[0]&&(e[0]=a,mt(r,i,t)),a>e[1]&&(e[1]=a,mt(o,i,t))}}(t,n,j,o,r);const i=Mt(e,n);j[1]-_<=i&&(r[0]=void 0),j[0]+_>=i&&(o[0]=void 0)})(t,n,e,T,S),void 0!==T[0]&&(ht(O,T,e),bt(O,O),ht(N,T,r),bt(N,N),ht(P,T,o),bt(P,P),gt(R,N,i),bt(R,R),gt(x,P,a),bt(x,x),gt(U,O,c),bt(U,U),k(t,R,i,N,O,u),k(t,x,a,P,N,u),k(t,U,c,O,P,u)),void 0!==S[0]&&(ht(O,S,e),bt(O,O),ht(N,S,r),bt(N,N),ht(P,S,o),bt(P,P),gt(R,N,i),bt(R,R),gt(x,P,a),bt(x,x),gt(U,O,c),bt(U,U),k(t,R,i,N,O,u),k(t,x,a,P,N,u),k(t,U,c,O,P,u))}const F=[0,0,0],j=(0,A.vt)(),z=(0,s.vt)(),D=(0,s.vt)(),B=(0,s.vt)(),V=(0,s.vt)(),q=(0,s.vt)(),H=(0,s.vt)();function k(t,n,e,r,o,i){if(yt(n)<_)return;gt(z,e,n),gt(D,r,n),gt(B,o,n),X(t,n,j),q[1]=j[0],V[1]=j[1],H[1]=V[1]-q[1];const a=[e,r,o],c=[z,D,B];for(let e=0;e<3;++e){X(t,a[e],j),q[0]=j[0],V[0]=j[1],X(t,c[e],j),q[2]=j[0],V[2]=j[1],H[0]=V[0]-q[0],H[2]=V[2]-q[2];const r=ft(H);r<i.quality&&(mt(i.b0,a[e]),mt(i.b1,n),mt(i.b2,c[e]),i.quality=r)}}const Y=(0,s.vt)();function X(t,n,e){const{data:r,size:o}=t;e[0]=Number.POSITIVE_INFINITY,e[1]=Number.NEGATIVE_INFINITY;for(let t=0;t<r.length;t+=o){const o=r[t]*n[0]+r[t+1]*n[1]+r[t+2]*n[2];e[0]=Math.min(e[0],o),e[1]=Math.max(e[1],o)}}function G(t,n,e){e.center=t,e.halfSize=(0,u.j)(n,n,.5),e.quaternion=c.zK}const Z=(0,s.vt)(),Q=(0,s.vt)(),W=(0,s.vt)(),$=(0,s.vt)(),K=(0,s.vt)(),J=(0,s.vt)();function tt(t,n,e){mt(Z,n),Math.abs(n[0])>Math.abs(n[1])&&Math.abs(n[0])>Math.abs(n[2])?Z[0]=0:Math.abs(n[1])>Math.abs(n[2])?Z[1]=0:Z[2]=0,yt(Z)<_&&(Z[0]=Z[1]=Z[2]=1),gt(Q,n,Z),bt(Q,Q),gt(W,n,Q),bt(W,W),nt(t,n,Q,W,$,K),ht(J,K,$),ct(n,Q,W,$,K,J,e)}function nt(t,n,e,r,o,i){X(t,n,j),o[0]=j[0],i[0]=j[1],X(t,e,j),o[1]=j[0],i[1]=j[1],X(t,r,j),o[2]=j[0],i[2]=j[1]}const et=(0,s.vt)(),rt=(0,s.vt)(),ot=(0,s.vt)(),it=(0,o.fA)(1,0,0,0,1,0,0,0,1),at=(0,c.vt)();function ct(t,n,e,r,o,i,a){it[0]=t[0],it[1]=t[1],it[2]=t[2],it[3]=n[0],it[4]=n[1],it[5]=n[2],it[6]=e[0],it[7]=e[1],it[8]=e[2],a.quaternion=function(t,n){const e=n[0]+n[4]+n[8];if(e>0){let r=Math.sqrt(e+1);t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r}else{let e=0;n[4]>n[0]&&(e=1),n[8]>n[3*e+e]&&(e=2);const r=(e+1)%3,o=(e+2)%3;let i=Math.sqrt(n[3*e+e]-n[3*r+r]-n[3*o+o]+1);t[e]=.5*i,i=.5/i,t[3]=(n[3*r+o]-n[3*o+r])*i,t[r]=(n[3*r+e]+n[3*e+r])*i,t[o]=(n[3*o+e]+n[3*e+o])*i}return t}(at,it),lt(et,r,o),dt(et,et,.5),dt(rt,t,et[0]),dt(ot,n,et[1]),lt(rt,rt,ot),dt(ot,e,et[2]),a.center=(0,u.g)(rt,rt,ot),a.halfSize=(0,u.j)(et,i,.5)}class ut{constructor(t){this.minVert=new Array(7),this.maxVert=new Array(7),this.buffer=new ArrayBuffer(448);let n=0;this.minProj=new Float64Array(this.buffer,n,7),n+=56,this.maxProj=new Float64Array(this.buffer,n,7),n+=56;for(let t=0;t<7;++t)this.minVert[t]=new Float64Array(this.buffer,n,3),n+=24;for(let t=0;t<7;++t)this.maxVert[t]=new Float64Array(this.buffer,n,3),n+=24;for(let t=0;t<7;++t)this.minProj[t]=Number.POSITIVE_INFINITY,this.maxProj[t]=Number.NEGATIVE_INFINITY;const e=new Array(7),r=new Array(7),{data:o,size:i}=t;for(let t=0;t<o.length;t+=i){let n=o[t];n<this.minProj[0]&&(this.minProj[0]=n,e[0]=t),n>this.maxProj[0]&&(this.maxProj[0]=n,r[0]=t),n=o[t+1],n<this.minProj[1]&&(this.minProj[1]=n,e[1]=t),n>this.maxProj[1]&&(this.maxProj[1]=n,r[1]=t),n=o[t+2],n<this.minProj[2]&&(this.minProj[2]=n,e[2]=t),n>this.maxProj[2]&&(this.maxProj[2]=n,r[2]=t),n=o[t]+o[t+1]+o[t+2],n<this.minProj[3]&&(this.minProj[3]=n,e[3]=t),n>this.maxProj[3]&&(this.maxProj[3]=n,r[3]=t),n=o[t]+o[t+1]-o[t+2],n<this.minProj[4]&&(this.minProj[4]=n,e[4]=t),n>this.maxProj[4]&&(this.maxProj[4]=n,r[4]=t),n=o[t]-o[t+1]+o[t+2],n<this.minProj[5]&&(this.minProj[5]=n,e[5]=t),n>this.maxProj[5]&&(this.maxProj[5]=n,r[5]=t),n=o[t]-o[t+1]-o[t+2],n<this.minProj[6]&&(this.minProj[6]=n,e[6]=t),n>this.maxProj[6]&&(this.maxProj[6]=n,r[6]=t)}for(let t=0;t<7;++t){let n=e[t];mt(this.minVert[t],o,n),n=r[t],mt(this.maxVert[t],o,n)}}}class st{constructor(){this.b0=(0,s.fA)(1,0,0),this.b1=(0,s.fA)(0,1,0),this.b2=(0,s.fA)(0,0,1),this.quality=0}}function ft(t){return t[0]*t[1]+t[0]*t[2]+t[1]*t[2]}function lt(t,n,e){t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2]}function ht(t,n,e){t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2]}function dt(t,n,e){t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e}function mt(t,n,e=0){t[0]=n[e],t[1]=n[e+1],t[2]=n[e+2]}function gt(t,n,e){const r=n[0],o=n[1],i=n[2],a=e[0],c=e[1],u=e[2];t[0]=o*u-i*c,t[1]=i*a-r*u,t[2]=r*c-o*a}function bt(t,n){const e=n[0]*n[0]+n[1]*n[1]+n[2]*n[2];if(e>0){const r=1/Math.sqrt(e);t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r}}function yt(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function pt(t,n){const e=n[0]-t[0],r=n[1]-t[1],o=n[2]-t[2];return e*e+r*r+o*o}function Mt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}class vt{constructor(t=s.uY,n=kt,e=c.zK){this._data=[t[0],t[1],t[2],n[0],n[1],n[2],e[0],e[1],e[2],e[3]]}clone(){const t=new vt;return t._data=this._data.slice(),t}invalidate(){this._data[3]=-1}get isValid(){return this._data[3]>=0}static fromData(t){const n=new vt;return n._data=t.slice(),n}static fromJSON(t){return new vt(t.center,t.halfSize,t.quaternion)}copy(t){this._data=t.data.slice()}get center(){return(0,u.s)(M.rq.get(),this._data[0],this._data[1],this._data[2])}get centerX(){return this._data[0]}get centerY(){return this._data[1]}get centerZ(){return this._data[2]}getCenter(t){return t[0]=this._data[0],t[1]=this._data[1],t[2]=this._data[2],t}set center(t){this._data[0]=t[0],this._data[1]=t[1],this._data[2]=t[2]}setCenter(t,n,e){this._data[0]=t,this._data[1]=n,this._data[2]=e}get halfSize(){return(0,u.s)(M.rq.get(),this._data[3],this._data[4],this._data[5])}get halfSizeX(){return this._data[3]}get halfSizeY(){return this._data[4]}get halfSizeZ(){return this._data[5]}getHalfSize(t){return t[0]=this._data[3],t[1]=this._data[4],t[2]=this._data[5],t}set halfSize(t){this._data[3]=t[0],this._data[4]=t[1],this._data[5]=t[2]}get quaternion(){return(0,a.hZ)(M.J8.get(),this._data[6],this._data[7],this._data[8],this._data[9])}getQuaternion(t){return t[0]=this._data[6],t[1]=this._data[7],t[2]=this._data[8],t[3]=this._data[9],t}set quaternion(t){this._data[6]=t[0],this._data[7]=t[1],this._data[8]=t[2],this._data[9]=t[3]}get data(){return this._data}getCorners(t){const n=At,e=this._data;n[0]=e[6],n[1]=e[7],n[2]=e[8],n[3]=e[9];for(let r=0;r<8;++r){const o=t[r];o[0]=(1&r?-1:1)*e[3],o[1]=(2&r?-1:1)*e[4],o[2]=(4&r?-1:1)*e[5],(0,u.u)(o,o,n),o[0]+=e[0],o[1]+=e[1],o[2]+=e[2]}}doesIntersectFrustumConservativeApproximation(t){return this.intersectPlane(t[0])<=0&&this.intersectPlane(t[1])<=0&&this.intersectPlane(t[2])<=0&&this.intersectPlane(t[3])<=0&&this.intersectPlane(t[4])<=0&&this.intersectPlane(t[5])<=0}get radius(){const t=this._data[3],n=this._data[4],e=this._data[5];return Math.sqrt(t*t+n*n+e*e)}intersectSphere(t){It[0]=this._data[0]-t[0],It[1]=this._data[1]-t[1],It[2]=this._data[2]-t[2];const n=this.getQuaternion(wt);return(0,a.Xr)(At,n),(0,u.u)(It,It,At),(0,u.v)(It,It),Et[0]=Math.min(It[0],this._data[3]),Et[1]=Math.min(It[1],this._data[4]),Et[2]=Math.min(It[2],this._data[5]),(0,u.w)(Et,It)<t[3]*t[3]}intersectSphereWithMBS(t,n=this.radius){const e=this._data;It[0]=e[0]-t[0],It[1]=e[1]-t[1],It[2]=e[2]-t[2];const r=t[3],o=r+n;return!((0,u.x)(It)>o*o)&&(At[0]=-e[6],At[1]=-e[7],At[2]=-e[8],At[3]=e[9],(0,u.u)(It,It,At),(0,u.v)(It,It),Et[0]=Math.min(It[0],e[3]),Et[1]=Math.min(It[1],e[4]),Et[2]=Math.min(It[2],e[5]),(0,u.w)(Et,It)<r*r)}intersectPlane(t){const n=t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3],e=this.projectedRadius((0,y.Qj)(t));return n>e?1:n<-e?-1:0}intersectRay(t,n,e=0){const r=this._data,o=At;o[0]=-r[6],o[1]=-r[7],o[2]=-r[8],o[3]=r[9],It[0]=t[0]-r[0],It[1]=t[1]-r[1],It[2]=t[2]-r[2];const i=(0,u.u)(It,It,At),a=(0,u.u)(Et,n,At);let c=-1/0,s=1/0;const f=this.getHalfSize(jt);for(let t=0;t<3;t++){const n=i[t],r=a[t],o=f[t]+e;if(Math.abs(r)>1e-6){const t=(o-n)/r,e=(-o-n)/r;c=Math.max(c,Math.min(t,e)),s=Math.min(s,Math.max(t,e))}else if(n>o||n<-o)return!1}return c<=s}projectedArea(t,n,e,o){const i=this.getQuaternion(wt);(0,a.Xr)(At,i),It[0]=t[0]-this._data[0],It[1]=t[1]-this._data[1],It[2]=t[2]-this._data[2],(0,u.u)(It,It,At);const c=this.getHalfSize(jt),s=It[0]<-c[0]?-1:It[0]>c[0]?1:0,l=It[1]<-c[1]?-1:It[1]>c[1]?1:0,h=It[2]<-c[2]?-1:It[2]>c[2]?1:0,d=Math.abs(s)+Math.abs(l)+Math.abs(h);if(0===d)return 1/0;const m=1===d?4:6,g=6*(s+3*l+9*h+13);(0,r.I0)(zt,i),(0,r.hs)(zt,zt,c);const b=this.getCenter(Lt);for(let t=0;t<m;t++){const e=Ot[g+t];(0,u.s)(It,((1&e)<<1)-1,(2&e)-1,((4&e)>>1)-1),(0,u.t)(It,It,zt),(0,u.g)(Ct,b,It),Ct[3]=1,(0,f.t)(Ct,Ct,n);const r=1/Math.max(1e-6,Ct[3]);St[2*t]=Ct[0]*r,St[2*t+1]=Ct[1]*r}const y=2*m-2;let p=St[0]*(St[3]-St[y+1])+St[y]*(St[1]-St[y-1]);for(let t=2;t<y;t+=2)p+=St[t]*(St[t+3]-St[t-1]);return Math.abs(p)*e*o*.125}projectedRadius(t){const n=this.getQuaternion(wt);return(0,a.Xr)(At,n),(0,u.u)(It,t,At),Math.abs(It[0]*this._data[3])+Math.abs(It[1]*this._data[4])+Math.abs(It[2]*this._data[5])}minimumDistancePlane(t){return t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3]-this.projectedRadius((0,y.Qj)(t))}maximumDistancePlane(t){return t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3]+this.projectedRadius((0,y.Qj)(t))}toAaBoundingBox(t){const n=this.getQuaternion(wt),e=(0,r.I0)(zt,n),o=this._data[3]*Math.abs(e[0])+this._data[4]*Math.abs(e[3])+this._data[5]*Math.abs(e[6]),i=this._data[3]*Math.abs(e[1])+this._data[4]*Math.abs(e[4])+this._data[5]*Math.abs(e[7]),a=this._data[3]*Math.abs(e[2])+this._data[4]*Math.abs(e[5])+this._data[5]*Math.abs(e[8]);t[0]=this._data[0]-o,t[1]=this._data[1]-i,t[2]=this._data[2]-a,t[3]=this._data[0]+o,t[4]=this._data[1]+i,t[5]=this._data[2]+a}transform(t,n,e,r=0,o=(0,d.lO)(e),i=(0,d.lO)(n),c=(0,b.jd)(n,i)){if(e===o)n.isGeographic?function(t,n,e,r,o=(0,d.lO)(e)){const i=(0,h.tO)(e),c=1+Math.max(0,r)/(i.radius+t.centerZ);t.getCenter(Ut),Ut[2]+=r,(0,g.projectBuffer)(Ut,e,0,Ut,o,0,1),n.center=Ut;const s=t.getQuaternion(wt);n.quaternion=s,(0,a.Xr)(At,s),(0,u.s)(Vt,0,0,1),(0,u.u)(Vt,Vt,At);const f=t.getHalfSize(jt);(0,u.s)(Vt,f[0]*Math.abs(Vt[0]),f[1]*Math.abs(Vt[1]),f[2]*Math.abs(Vt[2])),(0,u.j)(Vt,Vt,i.inverseFlattening),(0,u.g)(Vt,f,Vt),n.halfSize=(0,u.j)(Vt,Vt,c)}(this,t,n,r,i):function(t,n,e,r,o=(0,d.lO)(e),i=(0,b.jd)(e,o)){t.getCorners(Bt),t.getCenter(Ut),Ut[2]+=r,(0,m.l)(e,Ut,Dt,o),n.setCenter(Dt[12],Dt[13],Dt[14]);const c=2*Math.sqrt(1+Dt[0]+Dt[5]+Dt[10]);At[0]=(Dt[6]-Dt[9])/c,At[1]=(Dt[8]-Dt[2])/c,At[2]=(Dt[1]-Dt[4])/c,At[3]=.25*c;const s=t.getQuaternion(wt);n.quaternion=(0,a.lw)(At,At,s),(0,a.Xr)(At,At),(0,u.s)(qt,0,0,0);const f=n.getCenter(Ft);for(const t of Bt)t[2]+=r,i(t,0,t,0),(0,u.z)(Vt,t,f),(0,u.u)(Vt,Vt,At),(0,u.v)(Vt,Vt),(0,u.C)(qt,qt,Vt);n.halfSize=qt}(this,t,n,r,i,c);else if(n.isWGS84&&(e.isWebMercator||(0,p.r1)(e)))!function(t,n,e,r,o){n.getCenter(Lt),Lt[2]+=o;const i=(0,d.lO)(e);(0,g.projectBuffer)(Lt,t,0,Lt,i,0,1),Pt(i,n,Lt,e,r)}(n,this,e,t,r);else if(n.isWebMercator&&(0,p.r1)(e))!function(t,n,e,r,o){n.getCenter(Lt),Lt[2]+=o,Pt(t,n,Lt,e,r)}(n,this,e,t,r);else{const o=this.getCenter(Lt);o[2]+=r,(0,g.projectBuffer)(o,n,0,o,e,0,1),t.center=o,this!==t&&(t.quaternion=this.getQuaternion(wt),t.halfSize=this.getHalfSize(jt))}}}const At=(0,c.vt)(),wt=(0,c.vt)(),_t=(0,c.vt)(),It=(0,s.vt)(),Et=(0,s.vt)(),Ct=(0,l.vt)();function Tt(t,n=new vt){return function(t,n){const{data:e,size:r}=t,o=e.length/r;if(o<=0)return;const i=new ut(t);lt(I,i.minProj,i.maxProj),dt(I,I,.5),ht(E,i.maxProj,i.minProj);const a=ft(E),c=new st;c.quality=a,o<14&&(t=new w.K(new Float64Array(i.buffer,112,42),3));const u=(0,s.vt)(),f=(0,s.vt)(),l=(0,s.vt)(),h=(0,s.vt)(),d=(0,s.vt)(),m=(0,s.vt)(),g=(0,s.vt)();switch(C(i,t,g,u,f,l,h,d,m,c)){case 1:return void G(I,E,n);case 2:return void tt(t,h,n)}L(t,g,u,f,l,h,d,m,c),nt(t,c.b0,c.b1,c.b2,$,K);const b=(0,s.vt)();ht(b,K,$),c.quality=ft(b),c.quality<a?ct(c.b0,c.b1,c.b2,$,K,b,n):G(I,E,n)}(t,n),n}const St=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],Ot=(()=>{const t=new Int8Array(162);let n=0;const e=e=>{for(let r=0;r<e.length;r++)t[n+r]=e[r];n+=6};return e([6,2,3,1,5,4]),e([0,2,3,1,5,4]),e([0,2,3,7,5,4]),e([0,1,3,2,6,4]),e([0,1,3,2,0,0]),e([0,1,5,7,3,2]),e([0,1,3,7,6,4]),e([0,1,3,7,6,2]),e([0,1,5,7,6,2]),e([0,1,5,4,6,2]),e([0,1,5,4,0,0]),e([0,1,3,7,5,4]),e([0,2,6,4,0,0]),e([0,0,0,0,0,0]),e([1,3,7,5,0,0]),e([2,3,7,6,4,0]),e([2,3,7,6,0,0]),e([2,3,1,5,7,6]),e([0,1,5,7,6,2]),e([0,1,5,7,6,4]),e([0,1,3,7,6,4]),e([4,5,7,6,2,0]),e([4,5,7,6,0,0]),e([4,5,1,3,7,6]),e([0,2,3,7,5,4]),e([6,2,3,7,5,4]),e([6,2,3,1,5,4]),t})();function Nt(t,n,e,r,o){const i=t.getQuaternion(wt);o.quaternion=i,(0,a.Xr)(At,i);const c=t.getCenter(Lt),f=t.getHalfSize(jt);if(r===v.RT.Global){(0,u.u)(Vt,c,At),(0,u.v)(qt,Vt),(0,u.y)(Ht,qt,f),(0,u.z)(Ht,qt,Ht);const r=(0,u.l)(Ht);(0,u.g)(Ht,qt,f);const i=(0,u.l)(Ht);if(r<e)o.center=c,(0,u.s)(Vt,e,e,e),o.halfSize=(0,u.g)(Vt,f,Vt);else{const a=i>0?1+n/i:1,c=r>0?1+e/r:1,s=(c+a)/2,l=(c-a)/2;(0,u.j)(Ht,qt,l),o.halfSize=(0,u.r)(Ht,Ht,f,s),(0,u.j)(Ht,qt,s),(0,u.r)(Ht,Ht,f,l),(0,u.A)(Vt,Vt),(0,u.B)(Vt,Ht,Vt);const h=t.getQuaternion(_t);o.center=(0,u.u)(Vt,Vt,h)}}else{o.center=(0,u.r)(Vt,c,s.Cb,(e+n)/2);const t=(0,u.u)(Vt,s.Cb,At);(0,u.v)(t,t),o.halfSize=(0,u.r)(qt,f,t,(e-n)/2)}return o}function Pt(t,n,e,o,i){const a=n.getQuaternion(wt),c=(0,r.I0)(zt,a),u=n.getHalfSize(jt);for(let t=0;t<8;++t){for(let n=0;n<3;++n)Ut[n]=u[n]*(t&1<<n?-1:1);for(let n=0;n<3;++n){let r=e[n];for(let t=0;t<3;++t)r+=Ut[t]*c[3*t+n];Rt[3*t+n]=r}}(0,g.projectBuffer)(Rt,t,0,Rt,o,0,8),Tt(xt,i)}const Rt=new Array(24),xt=new w.K(Rt,3),Ut=(0,s.vt)(),Lt=(0,s.vt)(),Ft=(0,s.vt)(),jt=(0,s.vt)(),zt=(0,o.vt)(),Dt=(0,i.vt)(),Bt=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],Vt=(0,s.vt)(),qt=(0,s.vt)(),Ht=(0,s.vt)(),kt=(0,s.fA)(-1,-1,-1)},77222:function(t,n,e){e.d(n,{A:function(){return i}});var r=e(9933),o=e(39506);function i(t){t.vertex.code.add(o.H`
    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {
      float symbolAlpha = 0.0;

      const float maxTint = 85.0;
      const float maxReplace = 170.0;
      const float scaleAlpha = 3.0;

      if (symbolColor.a > maxReplace) {
        colorMixMode = ${o.H.int(r.k5.Multiply)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);
      } else if (symbolColor.a > maxTint) {
        colorMixMode = ${o.H.int(r.k5.Replace)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);
      } else if (symbolColor.a > 0.0) {
        colorMixMode = ${o.H.int(r.k5.Tint)};
        symbolAlpha = scaleAlpha * symbolColor.a;
      } else {
        colorMixMode = ${o.H.int(r.k5.Multiply)};
        symbolAlpha = 0.0;
      }

      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);
    }
  `)}},27264:function(t,n,e){var r;function o(t){return i(t)||t===r.Depth||t===r.Normal||t===r.ObjectAndLayerIdColor}function i(t){return t===r.Shadow||t===r.ShadowHighlight||t===r.ShadowExcludeHighlight||t===r.ViewshedShadow}function a(t){return m(t)||t===r.Normal}function c(t){return t===r.Highlight||t===r.ObjectAndLayerIdColor}function u(t){return t===r.Color||c(t)}function s(t){return t===r.Color}function f(t){return s(t)||t===r.ObjectAndLayerIdColor}function l(t){return s(t)||t===r.Highlight}function h(t){return l(t)||g(t)}function d(t){return s(t)||c(t)}function m(t){return d(t)||g(t)}function g(t){return t===r.Depth}e.d(n,{MO:function(){return m},PJ:function(){return i},V:function(){return r},XY:function(){return a},_o:function(){return s},aD:function(){return h},cb:function(){return o},dX:function(){return d},eh:function(){return g},i3:function(){return u},u5:function(){return c},zW:function(){return f}}),function(t){t[t.Color=0]="Color",t[t.Depth=1]="Depth",t[t.Normal=2]="Normal",t[t.Shadow=3]="Shadow",t[t.ShadowHighlight=4]="ShadowHighlight",t[t.ShadowExcludeHighlight=5]="ShadowExcludeHighlight",t[t.ViewshedShadow=6]="ViewshedShadow",t[t.Highlight=7]="Highlight",t[t.ObjectAndLayerIdColor=8]="ObjectAndLayerIdColor",t[t.COUNT=9]="COUNT"}(r||(r={}))},11377:function(t,n,e){e.d(n,{W:function(){return r},Y:function(){return u}});var r,o,i=e(82547),a=e(39506),c=e(65839);function u(t,n){switch(n.normalType){case r.Compressed:t.attributes.add(c.r.NORMALCOMPRESSED,"vec2"),t.vertex.code.add(a.H`vec3 decompressNormal(vec2 normal) {
float z = 1.0 - abs(normal.x) - abs(normal.y);
return vec3(normal + sign(normal) * min(z, 0.0), z);
}
vec3 normalModel() {
return decompressNormal(normalCompressed);
}`);break;case r.Attribute:t.attributes.add(c.r.NORMAL,"vec3"),t.vertex.code.add(a.H`vec3 normalModel() {
return normal;
}`);break;case r.ScreenDerivative:t.fragment.code.add(a.H`vec3 screenDerivativeNormal(vec3 positionView) {
return normalize(cross(dFdx(positionView), dFdy(positionView)));
}`);break;default:(0,i.Xb)(n.normalType);case r.COUNT:case r.Ground:}}(o=r||(r={}))[o.Attribute=0]="Attribute",o[o.Compressed=1]="Compressed",o[o.Ground=2]="Ground",o[o.ScreenDerivative=3]="ScreenDerivative",o[o.COUNT=4]="COUNT"},90576:function(t,n,e){e.d(n,{u:function(){return o}});var r=e(39506);function o({code:t},n){n.doublePrecisionRequiresObfuscation?t.add(r.H`vec3 dpPlusFrc(vec3 a, vec3 b) {
return mix(a, a + b, vec3(notEqual(b, vec3(0))));
}
vec3 dpMinusFrc(vec3 a, vec3 b) {
return mix(vec3(0), a - b, vec3(notEqual(a, b)));
}
vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = dpPlusFrc(hiA, hiB);
vec3 e = dpMinusFrc(t1, hiA);
vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;
return t1 + t2;
}`):t.add(r.H`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = hiA + hiB;
vec3 e = t1 - hiA;
vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;
return t1 + t2;
}`)}},52766:function(t,n,e){e.d(n,{W:function(){return o}});var r=e(39506);function o(t){t.code.add(r.H`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}
const vec4 RGBA_2_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgba2float(vec4 rgba) {
return dot(rgba, RGBA_2_FLOAT_FACTORS);
}`)}},4435:function(t,n,e){e.d(n,{W:function(){return i}});var r=e(65312),o=e(54516);class i extends r.n{constructor(t,n){super(t,"vec3",o.c.Draw,((e,r,o,i)=>e.setUniform3fv(t,n(r,o,i))))}}},82598:function(t,n,e){e.d(n,{t:function(){return i}});var r=e(65312),o=e(54516);class i extends r.n{constructor(t,n){super(t,"vec3",o.c.Pass,((e,r,o)=>e.setUniform3fv(t,n(r,o))))}}},41356:function(t,n,e){var r=e(65312);e(54516),r.n},14543:function(t,n,e){e.d(n,{m:function(){return i}});var r=e(65312),o=e(54516);class i extends r.n{constructor(t,n){super(t,"float",o.c.Pass,((e,r,o)=>e.setUniform1f(t,n(r,o))))}}},31190:function(t,n,e){e.d(n,{h:function(){return i}});var r=e(65312),o=e(54516);class i extends r.n{constructor(t,n){super(t,"mat3",o.c.Draw,((e,r,o)=>e.setUniformMatrix3fv(t,n(r,o))))}}},78567:function(t,n,e){e.d(n,{k:function(){return i}});var r=e(65312),o=e(54516);class i extends r.n{constructor(t,n){super(t,"mat3",o.c.Pass,((e,r,o)=>e.setUniformMatrix3fv(t,n(r,o))))}}},70340:function(t,n,e){e.d(n,{X:function(){return i}});var r=e(65312),o=e(54516);class i extends r.n{constructor(t,n){super(t,"mat4",o.c.Pass,((e,r,o)=>e.setUniformMatrix4fv(t,n(r,o))))}}},40075:function(t,n,e){e.d(n,{o:function(){return i}});var r=e(65312),o=e(54516);class i extends r.n{constructor(t,n){super(t,"sampler2D",o.c.Draw,((e,r,o)=>e.bindTexture(t,n(r,o))))}}},65312:function(t,n,e){e.d(n,{n:function(){return o}});var r=e(54516);class o{constructor(t,n,e,o,i=null){if(this.name=t,this.type=n,this.arraySize=i,this.bind={[r.c.Pass]:null,[r.c.Draw]:null},o)switch(e){case r.c.Pass:this.bind[r.c.Pass]=o;break;case r.c.Draw:this.bind[r.c.Draw]=o}}equals(t){return this.type===t.type&&this.name===t.name&&this.arraySize===t.arraySize}}},39506:function(t,n,e){e.d(n,{H:function(){return o},Y:function(){return r}});const r=class{};function o(t,...n){let e="";for(let r=0;r<n.length;r++)e+=t[r]+n[r];return e+=t[t.length-1],e}var i;(i=o||(o={})).int=function(t){return Math.round(t).toString()},i.float=function(t){return t.toPrecision(8)}},54516:function(t,n,e){var r;e.d(n,{c:function(){return r}}),function(t){t[t.Pass=0]="Pass",t[t.Draw=1]="Draw"}(r||(r={}))},14905:function(t,n,e){e.d(n,{K:function(){return r},n:function(){return o}});class r{constructor(t,n,e=n){this.data=t,this.size=n,this.stride=e}}class o extends r{constructor(t,n,e,r=!1,o=e){super(t,e,o),this.indices=n,this.exclusive=r}}},65839:function(t,n,e){var r;function o(t){return t===r.POSITION}e.d(n,{b:function(){return o},r:function(){return r}}),function(t){t.POSITION="position",t.NORMAL="normal",t.NORMALCOMPRESSED="normalCompressed",t.UV0="uv0",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.TANGENT="tangent",t.OFFSET="offset",t.PERSPECTIVEDIVIDE="perspectiveDivide",t.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",t.LENGTH="length",t.PREVPOSITION="prevPosition",t.NEXTPOSITION="nextPosition",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.INSTANCEMODELORIGINHI="instanceModelOriginHi",t.INSTANCEMODELORIGINLO="instanceModelOriginLo",t.INSTANCEMODEL="instanceModel",t.INSTANCEMODELNORMAL="instanceModelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMAL2COMPRESSED="normal2Compressed",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.EXTRUDE="extrude",t.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",t.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(r||(r={}))},33753:function(t,n,e){var r;e.d(n,{x:function(){return r}}),function(t){t[t.INVISIBLE=0]="INVISIBLE",t[t.TRANSPARENT=1]="TRANSPARENT",t[t.OPAQUE=2]="OPAQUE"}(r||(r={}))},65420:function(t,n,e){var r;e.d(n,{RT:function(){return r}}),function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"}(r||(r={}))}}]);
//# sourceMappingURL=views-3d-layers-SceneLayerWorker.js.map