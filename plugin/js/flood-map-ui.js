"use strict";(self.webpackChunkdefraMap=self.webpackChunkdefraMap||[]).push([[8835],{61801:function(e,t,n){n.r(t),n.d(t,{default:function(){return Xa}});var a,r,i,l,o,s,c,u,d,m,p,f={},h=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,y=Array.isArray;function v(e,t){for(var n in t)e[n]=t[n];return e}function b(e){var t=e.parentNode;t&&t.removeChild(e)}function g(e,t,n){var r,i,l,o={};for(l in t)"key"==l?r=t[l]:"ref"==l?i=t[l]:o[l]=t[l];if(arguments.length>2&&(o.children=arguments.length>3?a.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(l in e.defaultProps)void 0===o[l]&&(o[l]=e.defaultProps[l]);return E(e,o,r,i,null)}function E(e,t,n,a,l){var o={type:e,props:t,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==l?++i:l,__i:-1,__u:0};return null==l&&null!=r.vnode&&r.vnode(o),o}function w(){return{current:null}}function M(e){return e.children}function N(e,t){this.props=e,this.context=t}function O(e,t){if(null==t)return e.__?O(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?O(e):null}function k(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return k(e)}}function S(e){(!e.__d&&(e.__d=!0)&&l.push(e)&&!P.__r++||o!==r.debounceRendering)&&((o=r.debounceRendering)||s)(P)}function P(){var e,t,n,a,i,o,s,u;for(l.sort(c);e=l.shift();)e.__d&&(t=l.length,a=void 0,o=(i=(n=e).__v).__e,s=[],u=[],n.__P&&((a=v({},i)).__v=i.__v+1,r.vnode&&r.vnode(a),$(n.__P,a,i,n.__n,n.__P.namespaceURI,32&i.__u?[o]:null,s,null==o?O(i):o,!!(32&i.__u),u),a.__v=i.__v,a.__.__k[a.__i]=a,I(s,a,u),a.__e!=o&&k(a)),l.length>t&&l.sort(c));P.__r=0}function x(e,t,n,a,r,i,l,o,s,c,u){var d,m,p,_,y,v=a&&a.__k||h,b=t.length;for(n.__d=s,T(n,t,v),s=n.__d,d=0;d<b;d++)null!=(p=n.__k[d])&&"boolean"!=typeof p&&"function"!=typeof p&&(m=-1===p.__i?f:v[p.__i]||f,p.__i=d,$(e,p,m,r,i,l,o,s,c,u),_=p.__e,p.ref&&m.ref!=p.ref&&(m.ref&&z(m.ref,null,p),u.push(p.ref,p.__c||_,p)),null==y&&null!=_&&(y=_),65536&p.__u||m.__k===p.__k?s=L(p,s,e):"function"==typeof p.type&&void 0!==p.__d?s=p.__d:_&&(s=_.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=s,n.__e=y}function T(e,t,n){var a,r,i,l,o,s=t.length,c=n.length,u=c,d=0;for(e.__k=[],a=0;a<s;a++)l=a+d,null!=(r=e.__k[a]=null==(r=t[a])||"boolean"==typeof r||"function"==typeof r?null:"string"==typeof r||"number"==typeof r||"bigint"==typeof r||r.constructor==String?E(null,r,null,null,null):y(r)?E(M,{children:r},null,null,null):void 0===r.constructor&&r.__b>0?E(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)?(r.__=e,r.__b=e.__b+1,o=C(r,n,l,u),r.__i=o,i=null,-1!==o&&(u--,(i=n[o])&&(i.__u|=131072)),null==i||null===i.__v?(-1==o&&d--,"function"!=typeof r.type&&(r.__u|=65536)):o!==l&&(o==l-1?d=o-l:o==l+1?d++:o>l?u>s-l?d+=o-l:d--:o<l&&d++,o!==a+d&&(r.__u|=65536))):(i=n[l])&&null==i.key&&i.__e&&0==(131072&i.__u)&&(i.__e==e.__d&&(e.__d=O(i)),U(i,i,!1),n[l]=null,u--);if(u)for(a=0;a<c;a++)null!=(i=n[a])&&0==(131072&i.__u)&&(i.__e==e.__d&&(e.__d=O(i)),U(i,i))}function L(e,t,n){var a,r;if("function"==typeof e.type){for(a=e.__k,r=0;a&&r<a.length;r++)a[r]&&(a[r].__=e,t=L(a[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=O(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function R(e,t){return t=t||[],null==e||"boolean"==typeof e||(y(e)?e.some((function(e){R(e,t)})):t.push(e)),t}function C(e,t,n,a){var r=e.key,i=e.type,l=n-1,o=n+1,s=t[n];if(null===s||s&&r==s.key&&i===s.type&&0==(131072&s.__u))return n;if(a>(null!=s&&0==(131072&s.__u)?1:0))for(;l>=0||o<t.length;){if(l>=0){if((s=t[l])&&0==(131072&s.__u)&&r==s.key&&i===s.type)return l;l--}if(o<t.length){if((s=t[o])&&0==(131072&s.__u)&&r==s.key&&i===s.type)return o;o++}}return-1}function j(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||_.test(t)?n:n+"px"}function D(e,t,n,a,r){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof a&&(e.style.cssText=a=""),a)for(t in a)n&&t in n||j(e.style,t,"");if(n)for(t in n)a&&n[t]===a[t]||j(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?a?n.u=a.u:(n.u=u,e.addEventListener(t,i?m:d,i)):e.removeEventListener(t,i?m:d,i);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function A(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=u++;else if(t.t<n.u)return;return n(r.event?r.event(t):t)}}}function $(e,t,n,a,i,l,o,s,c,u){var d,m,p,f,h,_,b,g,E,w,O,k,S,P,T,L,R=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),l=[s=t.__e=n.__e]),(d=r.__b)&&d(t);e:if("function"==typeof R)try{if(g=t.props,E="prototype"in R&&R.prototype.render,w=(d=R.contextType)&&a[d.__c],O=d?w?w.props.value:d.__:a,n.__c?b=(m=t.__c=n.__c).__=m.__E:(E?t.__c=m=new R(g,O):(t.__c=m=new N(g,O),m.constructor=R,m.render=H),w&&w.sub(m),m.props=g,m.state||(m.state={}),m.context=O,m.__n=a,p=m.__d=!0,m.__h=[],m._sb=[]),E&&null==m.__s&&(m.__s=m.state),E&&null!=R.getDerivedStateFromProps&&(m.__s==m.state&&(m.__s=v({},m.__s)),v(m.__s,R.getDerivedStateFromProps(g,m.__s))),f=m.props,h=m.state,m.__v=t,p)E&&null==R.getDerivedStateFromProps&&null!=m.componentWillMount&&m.componentWillMount(),E&&null!=m.componentDidMount&&m.__h.push(m.componentDidMount);else{if(E&&null==R.getDerivedStateFromProps&&g!==f&&null!=m.componentWillReceiveProps&&m.componentWillReceiveProps(g,O),!m.__e&&(null!=m.shouldComponentUpdate&&!1===m.shouldComponentUpdate(g,m.__s,O)||t.__v===n.__v)){for(t.__v!==n.__v&&(m.props=g,m.state=m.__s,m.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),k=0;k<m._sb.length;k++)m.__h.push(m._sb[k]);m._sb=[],m.__h.length&&o.push(m);break e}null!=m.componentWillUpdate&&m.componentWillUpdate(g,m.__s,O),E&&null!=m.componentDidUpdate&&m.__h.push((function(){m.componentDidUpdate(f,h,_)}))}if(m.context=O,m.props=g,m.__P=e,m.__e=!1,S=r.__r,P=0,E){for(m.state=m.__s,m.__d=!1,S&&S(t),d=m.render(m.props,m.state,m.context),T=0;T<m._sb.length;T++)m.__h.push(m._sb[T]);m._sb=[]}else do{m.__d=!1,S&&S(t),d=m.render(m.props,m.state,m.context),m.state=m.__s}while(m.__d&&++P<25);m.state=m.__s,null!=m.getChildContext&&(a=v(v({},a),m.getChildContext())),E&&!p&&null!=m.getSnapshotBeforeUpdate&&(_=m.getSnapshotBeforeUpdate(f,h)),x(e,y(L=null!=d&&d.type===M&&null==d.key?d.props.children:d)?L:[L],t,n,a,i,l,o,s,c,u),m.base=t.__e,t.__u&=-161,m.__h.length&&o.push(m),b&&(m.__E=m.__=null)}catch(e){if(t.__v=null,c||null!=l){for(t.__u|=c?160:32;s&&8===s.nodeType&&s.nextSibling;)s=s.nextSibling;l[l.indexOf(s)]=null,t.__e=s}else t.__e=n.__e,t.__k=n.__k;r.__e(e,t,n)}else null==l&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=F(n.__e,t,n,a,i,l,o,c,u);(d=r.diffed)&&d(t)}function I(e,t,n){t.__d=void 0;for(var a=0;a<n.length;a++)z(n[a],n[++a],n[++a]);r.__c&&r.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){r.__e(e,t.__v)}}))}function F(e,t,n,r,i,l,o,s,c){var u,d,m,p,h,_,v,g=n.props,E=t.props,w=t.type;if("svg"===w?i="http://www.w3.org/2000/svg":"math"===w?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=l)for(u=0;u<l.length;u++)if((h=l[u])&&"setAttribute"in h==!!w&&(w?h.localName===w:3===h.nodeType)){e=h,l[u]=null;break}if(null==e){if(null===w)return document.createTextNode(E);e=document.createElementNS(i,w,E.is&&E),l=null,s=!1}if(null===w)g===E||s&&e.data===E||(e.data=E);else{if(l=l&&a.call(e.childNodes),g=n.props||f,!s&&null!=l)for(g={},u=0;u<e.attributes.length;u++)g[(h=e.attributes[u]).name]=h.value;for(u in g)if(h=g[u],"children"==u);else if("dangerouslySetInnerHTML"==u)m=h;else if("key"!==u&&!(u in E)){if("value"==u&&"defaultValue"in E||"checked"==u&&"defaultChecked"in E)continue;D(e,u,null,h,i)}for(u in E)h=E[u],"children"==u?p=h:"dangerouslySetInnerHTML"==u?d=h:"value"==u?_=h:"checked"==u?v=h:"key"===u||s&&"function"!=typeof h||g[u]===h||D(e,u,h,g[u],i);if(d)s||m&&(d.__html===m.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(m&&(e.innerHTML=""),x(e,y(p)?p:[p],t,n,r,"foreignObject"===w?"http://www.w3.org/1999/xhtml":i,l,o,l?l[0]:n.__k&&O(n,0),s,c),null!=l)for(u=l.length;u--;)null!=l[u]&&b(l[u]);s||(u="value",void 0!==_&&(_!==e[u]||"progress"===w&&!_||"option"===w&&_!==g[u])&&D(e,u,_,g[u],i),u="checked",void 0!==v&&v!==e[u]&&D(e,u,v,g[u],i))}return e}function z(e,t,n){try{if("function"==typeof e){var a="function"==typeof e.__u;a&&e.__u(),a&&null==t||(e.__u=e(t))}else e.current=t}catch(e){r.__e(e,n)}}function U(e,t,n){var a,i;if(r.unmount&&r.unmount(e),(a=e.ref)&&(a.current&&a.current!==e.__e||z(a,null,t)),null!=(a=e.__c)){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(e){r.__e(e,t)}a.base=a.__P=null}if(a=e.__k)for(i=0;i<a.length;i++)a[i]&&U(a[i],t,n||"function"!=typeof e.type);n||null==e.__e||b(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function H(e,t,n){return this.constructor(e,n)}function B(e,t,n){var i,l,o,s;r.__&&r.__(e,t),l=(i="function"==typeof n)?null:n&&n.__k||t.__k,o=[],s=[],$(t,e=(!i&&n||t).__k=g(M,null,[e]),l||f,f,t.namespaceURI,!i&&n?[n]:l?null:t.firstChild?a.call(t.childNodes):null,o,!i&&n?n:l?l.__e:t.firstChild,i,s),I(o,e,s)}function G(e,t){B(e,t,G)}function W(e,t,n){var r,i,l,o,s=v({},e.props);for(l in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),t)"key"==l?r=t[l]:"ref"==l?i=t[l]:s[l]=void 0===t[l]&&void 0!==o?o[l]:t[l];return arguments.length>2&&(s.children=arguments.length>3?a.call(arguments,2):n),E(e.type,s,r||e.key,i||e.ref,null)}function V(e,t){var n={__c:t="__cC"+p++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,a;return this.getChildContext||(n=[],(a={})[t]=this,this.getChildContext=function(){return a},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,S(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}a=h.slice,r={__e:function(e,t,n,a){for(var r,i,l;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&null!=i.getDerivedStateFromError&&(r.setState(i.getDerivedStateFromError(e)),l=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,a||{}),l=r.__d),l)return r.__E=r}catch(t){e=t}throw e}},i=0,N.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=v({},this.state),"function"==typeof e&&(e=e(v({},n),this.props)),e&&v(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),S(this))},N.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),S(this))},N.prototype.render=M,l=[],s="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=function(e,t){return e.__v.__b-t.__v.__b},P.__r=0,u=0,d=A(!1),m=A(!0),p=0;var q,Z,K,Y,X=0,J=[],Q=r,ee=Q.__b,te=Q.__r,ne=Q.diffed,ae=Q.__c,re=Q.unmount,ie=Q.__;function le(e,t){Q.__h&&Q.__h(Z,e,X||t),X=0;var n=Z.__H||(Z.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function oe(e){return X=1,se(Ne,e)}function se(e,t,n){var a=le(q++,2);if(a.t=e,!a.__c&&(a.__=[n?n(t):Ne(void 0,t),function(e){var t=a.__N?a.__N[0]:a.__[0],n=a.t(t,e);t!==n&&(a.__N=[n,a.__[1]],a.__c.setState({}))}],a.__c=Z,!Z.u)){var r=function(e,t,n){if(!a.__c.__H)return!0;var r=a.__c.__H.__.filter((function(e){return!!e.__c}));if(r.every((function(e){return!e.__N})))return!i||i.call(this,e,t,n);var l=!1;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(l=!0)}})),!(!l&&a.__c.props===e)&&(!i||i.call(this,e,t,n))};Z.u=!0;var i=Z.shouldComponentUpdate,l=Z.componentWillUpdate;Z.componentWillUpdate=function(e,t,n){if(this.__e){var a=i;i=void 0,r(e,t,n),i=a}l&&l.call(this,e,t,n)},Z.shouldComponentUpdate=r}return a.__N||a.__}function ce(e,t){var n=le(q++,3);!Q.__s&&Me(n.__H,t)&&(n.__=e,n.i=t,Z.__H.__h.push(n))}function ue(e,t){var n=le(q++,4);!Q.__s&&Me(n.__H,t)&&(n.__=e,n.i=t,Z.__h.push(n))}function de(e){return X=5,pe((function(){return{current:e}}),[])}function me(e,t,n){X=6,ue((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))}function pe(e,t){var n=le(q++,7);return Me(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function fe(e,t){return X=8,pe((function(){return e}),t)}function he(e){var t=Z.context[e.__c],n=le(q++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(Z)),t.props.value):e.__}function _e(e,t){Q.useDebugValue&&Q.useDebugValue(t?t(e):e)}function ye(){var e=le(q++,11);if(!e.__){for(var t=Z.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function ve(){for(var e;e=J.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ee),e.__H.__h.forEach(we),e.__H.__h=[]}catch(t){e.__H.__h=[],Q.__e(t,e.__v)}}Q.__b=function(e){Z=null,ee&&ee(e)},Q.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ie&&ie(e,t)},Q.__r=function(e){te&&te(e),q=0;var t=(Z=e.__c).__H;t&&(K===Z?(t.__h=[],Z.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0}))):(t.__h.forEach(Ee),t.__h.forEach(we),t.__h=[],q=0)),K=Z},Q.diffed=function(e){ne&&ne(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==J.push(t)&&Y===Q.requestAnimationFrame||((Y=Q.requestAnimationFrame)||ge)(ve)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.i=void 0}))),K=Z=null},Q.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Ee),e.__h=e.__h.filter((function(e){return!e.__||we(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Q.__e(n,e.__v)}})),ae&&ae(e,t)},Q.unmount=function(e){re&&re(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Ee(e)}catch(e){t=e}})),n.__H=void 0,t&&Q.__e(t,n.__v))};var be="function"==typeof requestAnimationFrame;function ge(e){var t,n=function(){clearTimeout(a),be&&cancelAnimationFrame(t),setTimeout(e)},a=setTimeout(n,100);be&&(t=requestAnimationFrame(n))}function Ee(e){var t=Z,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Z=t}function we(e){var t=Z;e.__c=e.__(),Z=t}function Me(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function Ne(e,t){return"function"==typeof t?t(e):t}function Oe(e,t){for(var n in t)e[n]=t[n];return e}function ke(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var a in t)if("__source"!==a&&e[a]!==t[a])return!0;return!1}function Se(e,t){this.props=e,this.context=t}(Se.prototype=new N).isPureReactComponent=!0,Se.prototype.shouldComponentUpdate=function(e,t){return ke(this.props,e)||ke(this.state,t)};var Pe=r.__b;r.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Pe&&Pe(e)};var xe="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911,Te=function(e,t){return null==e?null:R(R(e).map(t))},Le={map:Te,forEach:Te,count:function(e){return e?R(e).length:0},only:function(e){var t=R(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:R},Re=r.__e;r.__e=function(e,t,n,a){if(e.then)for(var r,i=t;i=i.__;)if((r=i.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);Re(e,t,n,a)};var Ce=r.unmount;function je(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=Oe({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return je(e,t,n)}))),e}function De(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return De(e,t,n)})),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function Ae(){this.__u=0,this.t=null,this.__b=null}function $e(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Ie(){this.u=null,this.o=null}r.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Ce&&Ce(e)},(Ae.prototype=new N).__c=function(e,t){var n=t.__c,a=this;null==a.t&&(a.t=[]),a.t.push(n);var r=$e(a.__v),i=!1,l=function(){i||(i=!0,n.__R=null,r?r(o):o())};n.__R=l;var o=function(){if(! --a.__u){if(a.state.__a){var e=a.state.__a;a.__v.__k[0]=De(e,e.__c.__P,e.__c.__O)}var t;for(a.setState({__a:a.__b=null});t=a.t.pop();)t.forceUpdate()}};a.__u++||32&t.__u||a.setState({__a:a.__b=a.__v.__k[0]}),e.then(l,l)},Ae.prototype.componentWillUnmount=function(){this.t=[]},Ae.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),a=this.__v.__k[0].__c;this.__v.__k[0]=je(this.__b,n,a.__O=a.__P)}this.__b=null}var r=t.__a&&g(M,null,e.fallback);return r&&(r.__u&=-33),[g(M,null,t.__a?null:e.children),r]};var Fe=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function ze(e){return this.getChildContext=function(){return e.context},e.children}function Ue(e){var t=this,n=e.i;t.componentWillUnmount=function(){B(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),B(g(ze,{context:t.context},e.__v),t.l)}function He(e,t){var n=g(Ue,{__v:e,i:t});return n.containerInfo=t,n}(Ie.prototype=new N).__a=function(e){var t=this,n=$e(t.__v),a=t.o.get(e);return a[0]++,function(r){var i=function(){t.props.revealOrder?(a.push(r),Fe(t,e,a)):r()};n?n(i):i()}},Ie.prototype.render=function(e){this.u=null,this.o=new Map;var t=R(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Ie.prototype.componentDidUpdate=Ie.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){Fe(e,n,t)}))};var Be="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Ge=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,We=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Ve=/[A-Z0-9]/g,qe="undefined"!=typeof document,Ze=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};function Ke(e,t,n){return null==t.__k&&(t.textContent=""),B(e,t),"function"==typeof n&&n(),e?e.__c:null}N.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(N.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Ye=r.event;function Xe(){}function Je(){return this.cancelBubble}function Qe(){return this.defaultPrevented}r.event=function(e){return Ye&&(e=Ye(e)),e.persist=Xe,e.isPropagationStopped=Je,e.isDefaultPrevented=Qe,e.nativeEvent=e};var et,tt={enumerable:!1,configurable:!0,get:function(){return this.class}},nt=r.vnode;r.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,a={};for(var r in t){var i=t[r];if(!("value"===r&&"defaultValue"in t&&null==i||qe&&"children"===r&&"noscript"===n||"class"===r||"className"===r)){var l=r.toLowerCase();"defaultValue"===r&&"value"in t&&null==t.value?r="value":"download"===r&&!0===i?i="":"translate"===l&&"no"===i?i=!1:"ondoubleclick"===l?r="ondblclick":"onchange"!==l||"input"!==n&&"textarea"!==n||Ze(t.type)?"onfocus"===l?r="onfocusin":"onblur"===l?r="onfocusout":We.test(r)?r=l:-1===n.indexOf("-")&&Ge.test(r)?r=r.replace(Ve,"-$&").toLowerCase():null===i&&(i=void 0):l=r="oninput","oninput"===l&&a[r=l]&&(r="oninputCapture"),a[r]=i}}"select"==n&&a.multiple&&Array.isArray(a.value)&&(a.value=R(t.children).forEach((function(e){e.props.selected=-1!=a.value.indexOf(e.props.value)}))),"select"==n&&null!=a.defaultValue&&(a.value=R(t.children).forEach((function(e){e.props.selected=a.multiple?-1!=a.defaultValue.indexOf(e.props.value):a.defaultValue==e.props.value}))),t.class&&!t.className?(a.class=t.class,Object.defineProperty(a,"className",tt)):(t.className&&!t.class||t.class&&t.className)&&(a.class=a.className=t.className),e.props=a}(e),e.$$typeof=Be,nt&&nt(e)};var at=r.__r;r.__r=function(e){at&&at(e),et=e.__c};var rt=r.diffed;r.diffed=function(e){rt&&rt(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value),et=null};var it={ReactCurrentDispatcher:{current:{readContext:function(e){return et.__n[e.__c].props.value},useCallback:fe,useContext:he,useDebugValue:_e,useDeferredValue:ct,useEffect:ce,useId:ye,useImperativeHandle:me,useInsertionEffect:dt,useLayoutEffect:ue,useMemo:pe,useReducer:se,useRef:de,useState:oe,useSyncExternalStore:mt,useTransition:ut}}};function lt(e){return!!e&&e.$$typeof===Be}function ot(e){return!!e.__k&&(B(null,e),!0)}function st(e){e()}function ct(e){return e}function ut(){return[!1,st]}var dt=ue;function mt(e,t){var n=t(),a=oe({h:{__:n,v:t}}),r=a[0].h,i=a[1];return ue((function(){r.__=n,r.v=t,pt(r)&&i({h:r})}),[e,n,t]),ce((function(){return pt(r)&&i({h:r}),e((function(){pt(r)&&i({h:r})}))}),[e]),n}function pt(e){var t,n,a=e.v,r=e.__;try{var i=a();return!((t=r)===(n=i)&&(0!==t||1/t==1/n)||t!=t&&n!=n)}catch(e){return!0}}var ft={useState:oe,useId:ye,useReducer:se,useEffect:ce,useLayoutEffect:ue,useInsertionEffect:dt,useTransition:ut,useDeferredValue:ct,useSyncExternalStore:mt,startTransition:st,useRef:de,useImperativeHandle:me,useMemo:pe,useCallback:fe,useContext:he,useDebugValue:_e,version:"17.0.2",Children:Le,render:Ke,hydrate:function(e,t,n){return G(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:ot,createPortal:He,createElement:g,createContext:V,createFactory:function(e){return g.bind(null,e)},cloneElement:function(e){return lt(e)?W.apply(null,arguments):e},createRef:w,Fragment:M,isValidElement:lt,isElement:lt,isFragment:function(e){return lt(e)&&e.type===M},isMemo:function(e){return!!e&&!!e.displayName&&("string"==typeof e.displayName||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")},findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:N,PureComponent:Se,memo:function(e,t){function n(e){var n=this.props.ref,a=n==e.ref;return!a&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!a:ke(this.props,e)}function a(t){return this.shouldComponentUpdate=n,g(e,t)}return a.displayName="Memo("+(e.displayName||e.name)+")",a.prototype.isReactComponent=!0,a.__f=!0,a},forwardRef:function(e){function t(t){var n=Oe({},t);return delete n.ref,e(n,t.ref||null)}return t.$$typeof=xe,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t},flushSync:function(e,t){return e(t)},unstable_batchedUpdates:function(e,t){return e(t)},StrictMode:M,Suspense:Ae,SuspenseList:Ie,lazy:function(e){var t,n,a;function r(r){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){a=e})),a)throw a;if(!n)throw t;return g(n,r)}return r.displayName="Lazy",r.__f=!0,r},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:it};var ht=n(42566),_t=n(87899),yt=n(35384);const vt=(e,t)=>{var n;if(!e)return;const a=new URLSearchParams(window.location.search);t=t||(null===(n=a.get("seg"))||void 0===n?void 0:n.split(","));const r=[];for(let n=0;n<e.length;n++){var i,l,o,s,c;const a=e[n],u=!(null===(i=a.parentIds)||void 0===i||!i.length),d=null===(l=a.parentIds)||void 0===l?void 0:l.some((e=>r.includes(e))),m=null===(o=a.items.find((e=>{var n;return null===(n=t)||void 0===n?void 0:n.includes(null==e?void 0:e.id)})))||void 0===o?void 0:o.id,p=(null===(s=a.items.find((e=>e.isSelected)))||void 0===s?void 0:s.id)||(null===(c=a.items[0])||void 0===c?void 0:c.id);u&&!d||r.push(m||p)}return r},bt=(e,t,n)=>{var a;if(!e)return;const r=new URLSearchParams(window.location.search);n=n||vt(t);const i=(null===(a=r.get("lyr"))||void 0===a?void 0:a.split(","))||[];let l=[];for(let t=0;t<e.length;t++){const n=e[t],a=n.items.filter((e=>e.id&&e.isSelected)).map((e=>e.id)),o=n.items.filter((e=>i.includes(e.id))).map((e=>e.id));l=l.concat(r.has("lyr")?o:a)}return[...new Set(l)]},gt=(e,t,n,a,r)=>{let i=e.filter((e=>(e.minZoom?e.minZoom<=a:e&&e.maxZoom?e.maxZoom>a:e)&&(e.parentIds?e.parentIds.some((e=>t.includes(e))):e)));if(!r){const e=[];let t=[];i.forEach((a=>{var r;const i=null===(r=a.items.find((e=>n.includes(e.id))))||void 0===r?void 0:r.id;a.items.forEach((r=>{var l;("radio"===(null==a?void 0:a.type)?r.id===i:n.includes(r.id))&&(r.fill||r.icon||null!==(l=r.items)&&void 0!==l&&l.length)&&("ramp"===r.display?e.push(r):r.items?t=t.concat(r.items):t.push(r))}))})),i=e.concat([{items:t}]).filter((e=>e.items.length))}return i};function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){var a,r,i;a=e,r=t,i=n[t],r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r),r in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Mt=(e,t)=>{var n;switch(t.type){case"CONTAINER_READY":return wt(wt({},e),{},{isContainerReady:!0});case"SET_SEARCH":return wt(wt({},e),{},{search:t.data});case"SET_INFO":return wt(wt({},e),{},{info:t.data,activePanel:t.data?"INFO":"INFO"!==e.activePanel?e.activePanel:null,hasViewportLabel:!1});case"SET_DRAW":return wt(wt({},e),{},{queryPolygon:t.data,targetMarker:null});case"SET_SELECTED":return wt(wt({},e),{},{featureId:t.featureId,targetMarker:t.targetMarker,activePanel:Object.hasOwn(t,"activePanel")?t.activePanel:e.activePanel,activePanelHasFocus:t.activePanelHasFocus||e.activePanelHasFocus,hash:Date.now()});case"ERROR":return wt(wt({},e),{},{error:{label:t.label,message:t.message},activePanel:"ERROR",hasViewportLabel:!1});case"OPEN":return wt(wt({},e),{},{activePanel:t.data,activePanelHasFocus:!0,hasViewportLabel:!1,featureId:"INFO"===t.data?e.featureId:""});case"CLOSE":return wt(wt({},e),{},{featureId:null,targetMarker:null,activePanel:null});case"SET_IS_MOBILE":return wt(wt({},e),{},{isMobile:t.value});case"SET_IS_DESKTOP":return wt(wt({},e),{},{isDesktop:t.value,isFixed:(null===(n=e.legend)||void 0===n||null===(n=n.position)||void 0===n?void 0:n.includes("fixed"))&&t.value});case"SET_IS_KEYBOARD":return wt(wt({},e),{},{isKeyboard:t.value});case"SET_MODE":return wt(wt({},e),{},{mode:t.value,query:Object.hasOwn(t,"query")?t.query:e.query,isFrameVisible:Object.hasOwn(t,"isFrameVisible")?t.isFrameVisible:e.isFrameVisible,activePanel:"draw"!==e.mode&&"frame"===t.value?"HELP":null,featureId:null,targetMarker:null});case"TOGGLE_SEGMENTS":return wt(wt({},e),{},{segments:t.segments,layers:t.layers,featureId:null,targetMarker:null});case"TOGGLE_LAYERS":return wt(wt({},e),{},{layers:t.layers});case"TOGGLE_VIEWPORT_LABEL":{const n=t.data&&(!e.isMobile||!e.activePanel||"LEGEND"===e.activePanel);return wt(wt({},e),{},{hasViewportLabel:n})}default:return e}};function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){var a,r,i;a=e,r=t,i=n[t],r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r),r in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const kt=V(),St=({options:e,app:t,children:n})=>{const[a,r]=se(Mt,(e=>{const{legend:t,search:n,info:a,queryPolygon:r}=e,{featureId:i,targetMarker:l}=(e=>{var t,n;const a=ht.W0.params.featureId,r=(0,yt.ww)(a)?(0,yt.qn)(a):null==e?void 0:e.featureId,i=ht.W0.params.targetMarker;let l=null===(t=(0,yt.qn)(i))||void 0===t?void 0:t.split(",");return l=3===(null===(n=l)||void 0===n?void 0:n.length)?{coord:[parseFloat(l[0]),parseFloat(l[1])],hasData:"true"===l[2]}:null,{featureId:r,targetMarker:l||(null!=e&&e.featureId||null==e||!e.markerCoord?null:{coord:null==e?void 0:e.markerCoord,hasData:null==e?void 0:e.hasData})}})(a);let o;return a&&(i||l)?o="INFO":null!=t&&t.isVisible&&(o=["compact","inset"].includes(null==t?void 0:t.display)?"LEGEND":"KEY"),{isContainerReady:!1,search:n,legend:t,info:a,queryPolygon:r,segments:t?vt(t.segments):null,layers:null!=t&&t.key?bt(t.key,t.segments):null,featureId:i,targetMarker:i?null:l,pointerQuery:null,activePanel:o,activePanelHasFocus:!1,hasViewportLabel:!1,mode:"default",isFrameVisible:!1,query:null,hash:null}})(e)),i=pe((()=>Ot(Ot(Ot({},t),a),{},{options:e,dispatch:r})));return ft.createElement(kt.Provider,{value:i},n)};let Pt=" ";class xt{static get separator(){return Pt}static set separator(e){Pt=e}static parse(e){if(!isNaN(parseFloat(e))&&isFinite(e))return Number(e);const t=String(e).trim().replace(/^-/,"").replace(/[NSEW]$/i,"").split(/[^0-9.,]+/);if(""==t[t.length-1]&&t.splice(t.length-1),""==t)return NaN;let n=null;switch(t.length){case 3:n=t[0]/1+t[1]/60+t[2]/3600;break;case 2:n=t[0]/1+t[1]/60;break;case 1:n=t[0];break;default:return NaN}return/^-|[WS]$/i.test(e.trim())&&(n=-n),Number(n)}static toDms(e,t="d",n=void 0){if(isNaN(e))return null;if("string"==typeof e&&""==e.trim())return null;if("boolean"==typeof e)return null;if(e==1/0)return null;if(null==e)return null;if(void 0===n)switch(t){case"d":case"deg":n=4;break;case"dm":case"deg+min":n=2;break;case"dms":case"deg+min+sec":n=0;break;default:t="d",n=4}e=Math.abs(e);let a=null,r=null,i=null,l=null;switch(t){default:case"d":case"deg":r=e.toFixed(n),r<100&&(r="0"+r),r<10&&(r="0"+r),a=r+"°";break;case"dm":case"deg+min":r=Math.floor(e),i=(60*e%60).toFixed(n),60==i&&(i=(0).toFixed(n),r++),r=("000"+r).slice(-3),i<10&&(i="0"+i),a=r+"°"+xt.separator+i+"′";break;case"dms":case"deg+min+sec":r=Math.floor(e),i=Math.floor(3600*e/60)%60,l=(3600*e%60).toFixed(n),60==l&&(l=(0).toFixed(n),i++),60==i&&(i=0,r++),r=("000"+r).slice(-3),i=("00"+i).slice(-2),l<10&&(l="0"+l),a=r+"°"+xt.separator+i+"′"+xt.separator+l+"″"}return a}static toLat(e,t,n){const a=xt.toDms(xt.wrap90(e),t,n);return null===a?"–":a.slice(1)+xt.separator+(e<0?"S":"N")}static toLon(e,t,n){const a=xt.toDms(xt.wrap180(e),t,n);return null===a?"–":a+xt.separator+(e<0?"W":"E")}static toBrng(e,t,n){const a=xt.toDms(xt.wrap360(e),t,n);return null===a?"–":a.replace("360","0")}static fromLocale(e){const t=123456.789.toLocaleString(),n={thousands:t.slice(3,4),decimal:t.slice(7,8)};return e.replace(n.thousands,"⁜").replace(n.decimal,".").replace("⁜",",")}static toLocale(e){const t=123456.789.toLocaleString(),n={thousands:t.slice(3,4),decimal:t.slice(7,8)};return e.replace(/,([0-9])/,"⁜$1").replace(".",n.decimal).replace("⁜",n.thousands)}static compassPoint(e,t=3){if(![1,2,3].includes(Number(t)))throw new RangeError(`invalid precision ‘${t}’`);e=xt.wrap360(e);const n=4*2**(t-1);return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(e*n/360)%n*16/n]}static wrap90(e){if(-90<=e&&e<=90)return e;const t=e;return 1*Math.abs(((t-90)%360+360)%360-180)-90}static wrap180(e){if(-180<=e&&e<=180)return e;const t=360;return((360*e/t-180)%t+t)%t-180}static wrap360(e){if(0<=e&&e<360)return e;const t=360;return(360*e/t%t+t)%t}}Number.prototype.toRadians=function(){return this*Math.PI/180},Number.prototype.toDegrees=function(){return 180*this/Math.PI};var Tt=xt;const Lt=Math.PI;class Rt{constructor(e,t){if(isNaN(e))throw new TypeError(`invalid lat ‘${e}’`);if(isNaN(t))throw new TypeError(`invalid lon ‘${t}’`);this._lat=Tt.wrap90(Number(e)),this._lon=Tt.wrap180(Number(t))}get lat(){return this._lat}get latitude(){return this._lat}set lat(e){if(this._lat=isNaN(e)?Tt.wrap90(Tt.parse(e)):Tt.wrap90(Number(e)),isNaN(this._lat))throw new TypeError(`invalid lat ‘${e}’`)}set latitude(e){if(this._lat=isNaN(e)?Tt.wrap90(Tt.parse(e)):Tt.wrap90(Number(e)),isNaN(this._lat))throw new TypeError(`invalid latitude ‘${e}’`)}get lon(){return this._lon}get lng(){return this._lon}get longitude(){return this._lon}set lon(e){if(this._lon=isNaN(e)?Tt.wrap180(Tt.parse(e)):Tt.wrap180(Number(e)),isNaN(this._lon))throw new TypeError(`invalid lon ‘${e}’`)}set lng(e){if(this._lon=isNaN(e)?Tt.wrap180(Tt.parse(e)):Tt.wrap180(Number(e)),isNaN(this._lon))throw new TypeError(`invalid lng ‘${e}’`)}set longitude(e){if(this._lon=isNaN(e)?Tt.wrap180(Tt.parse(e)):Tt.wrap180(Number(e)),isNaN(this._lon))throw new TypeError(`invalid longitude ‘${e}’`)}static get metresToKm(){return.001}static get metresToMiles(){return 1/1609.344}static get metresToNauticalMiles(){return 1/1852}static parse(...e){if(0==e.length)throw new TypeError("invalid (empty) point");if(null===e[0]||null===e[1])throw new TypeError("invalid (null) point");let t,n;if(2==e.length&&([t,n]=e,t=Tt.wrap90(Tt.parse(t)),n=Tt.wrap180(Tt.parse(n)),isNaN(t)||isNaN(n)))throw new TypeError(`invalid point ‘${e.toString()}’`);if(1==e.length&&"string"==typeof e[0]&&([t,n]=e[0].split(","),t=Tt.wrap90(Tt.parse(t)),n=Tt.wrap180(Tt.parse(n)),isNaN(t)||isNaN(n)))throw new TypeError(`invalid point ‘${e[0]}’`);if(1==e.length&&"object"==typeof e[0]){const a=e[0];if("Point"==a.type&&Array.isArray(a.coordinates)?[n,t]=a.coordinates:(null!=a.latitude&&(t=a.latitude),null!=a.lat&&(t=a.lat),null!=a.longitude&&(n=a.longitude),null!=a.lng&&(n=a.lng),null!=a.lon&&(n=a.lon),t=Tt.wrap90(Tt.parse(t)),n=Tt.wrap180(Tt.parse(n))),isNaN(t)||isNaN(n))throw new TypeError(`invalid point ‘${JSON.stringify(e[0])}’`)}if(isNaN(t)||isNaN(n))throw new TypeError(`invalid point ‘${e.toString()}’`);return new Rt(t,n)}distanceTo(e,t=6371e3){if(e instanceof Rt||(e=Rt.parse(e)),isNaN(t))throw new TypeError(`invalid radius ‘${t}’`);const n=t,a=this.lat.toRadians(),r=this.lon.toRadians(),i=e.lat.toRadians(),l=i-a,o=e.lon.toRadians()-r,s=Math.sin(l/2)*Math.sin(l/2)+Math.cos(a)*Math.cos(i)*Math.sin(o/2)*Math.sin(o/2);return n*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}initialBearingTo(e){if(e instanceof Rt||(e=Rt.parse(e)),this.equals(e))return NaN;const t=this.lat.toRadians(),n=e.lat.toRadians(),a=(e.lon-this.lon).toRadians(),r=Math.cos(t)*Math.sin(n)-Math.sin(t)*Math.cos(n)*Math.cos(a),i=Math.sin(a)*Math.cos(n),l=Math.atan2(i,r).toDegrees();return Tt.wrap360(l)}finalBearingTo(e){e instanceof Rt||(e=Rt.parse(e));const t=e.initialBearingTo(this)+180;return Tt.wrap360(t)}midpointTo(e){e instanceof Rt||(e=Rt.parse(e));const t=this.lat.toRadians(),n=this.lon.toRadians(),a=e.lat.toRadians(),r=(e.lon-this.lon).toRadians(),i=Math.cos(t),l=Math.sin(t),o={x:i+Math.cos(a)*Math.cos(r),y:0+Math.cos(a)*Math.sin(r),z:l+Math.sin(a)},s=Math.atan2(o.z,Math.sqrt(o.x*o.x+o.y*o.y)),c=n+Math.atan2(o.y,o.x),u=s.toDegrees(),d=c.toDegrees();return new Rt(u,d)}intermediatePointTo(e,t){if(e instanceof Rt||(e=Rt.parse(e)),this.equals(e))return new Rt(this.lat,this.lon);const n=this.lat.toRadians(),a=this.lon.toRadians(),r=e.lat.toRadians(),i=e.lon.toRadians(),l=r-n,o=i-a,s=Math.sin(l/2)*Math.sin(l/2)+Math.cos(n)*Math.cos(r)*Math.sin(o/2)*Math.sin(o/2),c=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),u=Math.sin((1-t)*c)/Math.sin(c),d=Math.sin(t*c)/Math.sin(c),m=u*Math.cos(n)*Math.cos(a)+d*Math.cos(r)*Math.cos(i),p=u*Math.cos(n)*Math.sin(a)+d*Math.cos(r)*Math.sin(i),f=u*Math.sin(n)+d*Math.sin(r),h=Math.atan2(f,Math.sqrt(m*m+p*p)),_=Math.atan2(p,m),y=h.toDegrees(),v=_.toDegrees();return new Rt(y,v)}destinationPoint(e,t,n=6371e3){const a=e/n,r=Number(t).toRadians(),i=this.lat.toRadians(),l=this.lon.toRadians(),o=Math.sin(i)*Math.cos(a)+Math.cos(i)*Math.sin(a)*Math.cos(r),s=Math.asin(o),c=Math.sin(r)*Math.sin(a)*Math.cos(i),u=Math.cos(a)-Math.sin(i)*o,d=l+Math.atan2(c,u),m=s.toDegrees(),p=d.toDegrees();return new Rt(m,p)}static intersection(e,t,n,a){if(e instanceof Rt||(e=Rt.parse(e)),n instanceof Rt||(n=Rt.parse(n)),isNaN(t))throw new TypeError(`invalid brng1 ‘${t}’`);if(isNaN(a))throw new TypeError(`invalid brng2 ‘${a}’`);const r=e.lat.toRadians(),i=e.lon.toRadians(),l=n.lat.toRadians(),o=n.lon.toRadians(),s=Number(t).toRadians(),c=Number(a).toRadians(),u=l-r,d=o-i,m=2*Math.asin(Math.sqrt(Math.sin(u/2)*Math.sin(u/2)+Math.cos(r)*Math.cos(l)*Math.sin(d/2)*Math.sin(d/2)));if(Math.abs(m)<Number.EPSILON)return new Rt(e.lat,e.lon);const p=(Math.sin(l)-Math.sin(r)*Math.cos(m))/(Math.sin(m)*Math.cos(r)),f=(Math.sin(r)-Math.sin(l)*Math.cos(m))/(Math.sin(m)*Math.cos(l)),h=Math.acos(Math.min(Math.max(p,-1),1)),_=Math.acos(Math.min(Math.max(f,-1),1)),y=s-(Math.sin(o-i)>0?h:2*Lt-h),v=(Math.sin(o-i)>0?2*Lt-_:_)-c;if(0==Math.sin(y)&&0==Math.sin(v))return null;if(Math.sin(y)*Math.sin(v)<0)return null;const b=-Math.cos(y)*Math.cos(v)+Math.sin(y)*Math.sin(v)*Math.cos(m),g=Math.atan2(Math.sin(m)*Math.sin(y)*Math.sin(v),Math.cos(v)+Math.cos(y)*b),E=Math.asin(Math.min(Math.max(Math.sin(r)*Math.cos(g)+Math.cos(r)*Math.sin(g)*Math.cos(s),-1),1)),w=i+Math.atan2(Math.sin(s)*Math.sin(g)*Math.cos(r),Math.cos(g)-Math.sin(r)*Math.sin(E)),M=E.toDegrees(),N=w.toDegrees();return new Rt(M,N)}crossTrackDistanceTo(e,t,n=6371e3){e instanceof Rt||(e=Rt.parse(e)),t instanceof Rt||(t=Rt.parse(t));const a=n;if(this.equals(e))return 0;const r=e.distanceTo(this,a)/a,i=e.initialBearingTo(this).toRadians(),l=e.initialBearingTo(t).toRadians();return Math.asin(Math.sin(r)*Math.sin(i-l))*a}alongTrackDistanceTo(e,t,n=6371e3){e instanceof Rt||(e=Rt.parse(e)),t instanceof Rt||(t=Rt.parse(t));const a=n;if(this.equals(e))return 0;const r=e.distanceTo(this,a)/a,i=e.initialBearingTo(this).toRadians(),l=e.initialBearingTo(t).toRadians(),o=Math.asin(Math.sin(r)*Math.sin(i-l));return Math.acos(Math.cos(r)/Math.abs(Math.cos(o)))*Math.sign(Math.cos(l-i))*a}maxLatitude(e){const t=Number(e).toRadians(),n=this.lat.toRadians();return Math.acos(Math.abs(Math.sin(t)*Math.cos(n))).toDegrees()}static crossingParallels(e,t,n){if(e.equals(t))return null;const a=Number(n).toRadians(),r=e.lat.toRadians(),i=e.lon.toRadians(),l=t.lat.toRadians(),o=t.lon.toRadians()-i,s=Math.sin(r)*Math.cos(l)*Math.cos(a)*Math.sin(o),c=Math.sin(r)*Math.cos(l)*Math.cos(a)*Math.cos(o)-Math.cos(r)*Math.sin(l)*Math.cos(a),u=Math.cos(r)*Math.cos(l)*Math.sin(a)*Math.sin(o);if(u*u>s*s+c*c)return null;const d=Math.atan2(-c,s),m=Math.acos(u/Math.sqrt(s*s+c*c)),p=i+d+m,f=(i+d-m).toDegrees(),h=p.toDegrees();return{lon1:Tt.wrap180(f),lon2:Tt.wrap180(h)}}rhumbDistanceTo(e,t=6371e3){e instanceof Rt||(e=Rt.parse(e));const n=t,a=this.lat.toRadians(),r=e.lat.toRadians(),i=r-a;let l=Math.abs(e.lon-this.lon).toRadians();Math.abs(l)>Lt&&(l=l>0?-(2*Lt-l):2*Lt+l);const o=Math.log(Math.tan(r/2+Lt/4)/Math.tan(a/2+Lt/4)),s=Math.abs(o)>1e-11?i/o:Math.cos(a);return Math.sqrt(i*i+s*s*l*l)*n}rhumbBearingTo(e){if(e instanceof Rt||(e=Rt.parse(e)),this.equals(e))return NaN;const t=this.lat.toRadians(),n=e.lat.toRadians();let a=(e.lon-this.lon).toRadians();Math.abs(a)>Lt&&(a=a>0?-(2*Lt-a):2*Lt+a);const r=Math.log(Math.tan(n/2+Lt/4)/Math.tan(t/2+Lt/4)),i=Math.atan2(a,r).toDegrees();return Tt.wrap360(i)}rhumbDestinationPoint(e,t,n=6371e3){const a=this.lat.toRadians(),r=this.lon.toRadians(),i=Number(t).toRadians(),l=e/n,o=l*Math.cos(i);let s=a+o;Math.abs(s)>Lt/2&&(s=s>0?Lt-s:-Lt-s);const c=Math.log(Math.tan(s/2+Lt/4)/Math.tan(a/2+Lt/4)),u=Math.abs(c)>1e-11?o/c:Math.cos(a),d=r+l*Math.sin(i)/u,m=s.toDegrees(),p=d.toDegrees();return new Rt(m,p)}rhumbMidpointTo(e){e instanceof Rt||(e=Rt.parse(e));const t=this.lat.toRadians();let n=this.lon.toRadians();const a=e.lat.toRadians(),r=e.lon.toRadians();Math.abs(r-n)>Lt&&(n+=2*Lt);const i=(t+a)/2,l=Math.tan(Lt/4+t/2),o=Math.tan(Lt/4+a/2),s=Math.tan(Lt/4+i/2);let c=((r-n)*Math.log(s)+n*Math.log(o)-r*Math.log(l))/Math.log(o/l);isFinite(c)||(c=(n+r)/2);const u=i.toDegrees(),d=c.toDegrees();return new Rt(u,d)}static areaOf(e,t=6371e3){const n=t,a=e[0].equals(e[e.length-1]);a||e.push(e[0]);const r=e.length-1;let i=0;for(let t=0;t<r;t++){const n=e[t].lat.toRadians(),a=e[t+1].lat.toRadians(),r=(e[t+1].lon-e[t].lon).toRadians();i+=2*Math.atan2(Math.tan(r/2)*(Math.tan(n/2)+Math.tan(a/2)),1+Math.tan(n/2)*Math.tan(a/2))}(function(e){let t=0,n=e[0].initialBearingTo(e[1]);for(let a=0;a<e.length-1;a++){const r=e[a].initialBearingTo(e[a+1]),i=e[a].finalBearingTo(e[a+1]);t+=(r-n+540)%360-180,t+=(i-r+540)%360-180,n=i}return t+=(e[0].initialBearingTo(e[1])-n+540)%360-180,Math.abs(t)<90})(e)&&(i=Math.abs(i)-2*Lt);const l=Math.abs(i*n*n);return a||e.pop(),l}equals(e){return e instanceof Rt||(e=Rt.parse(e)),!(Math.abs(this.lat-e.lat)>Number.EPSILON||Math.abs(this.lon-e.lon)>Number.EPSILON)}toGeoJSON(){return{type:"Point",coordinates:[this.lon,this.lat]}}toString(e="d",t=void 0){if(!["d","dm","dms","n"].includes(e))throw new RangeError(`invalid format ‘${e}’`);return"n"==e?(null==t&&(t=4),`${this.lat.toFixed(t)},${this.lon.toFixed(t)}`):`${Tt.toLat(this.lat,e,t)}, ${Tt.toLon(this.lon,e,t)}`}}const Ct=(e,t)=>{if(!e)return;const n=e.closest(".fm-o-main").getBoundingClientRect(),a=e.getBoundingClientRect();return{top:((a.y||a.top)-(n.y||n.top))/t,left:((a.x||a.left)-(n.x||n.left))/t,right:(n.width-a.width-((a.x||a.left)-(n.x||n.left)))/t,bottom:(n.height-a.height-((a.y||a.top)-(n.y||n.top)))/t}},jt=(e,t)=>{const{offsetTop:n,offsetLeft:a,offsetWidth:r,offsetHeight:i}=e;return[(a+r/2)/t,(n+i/2)/t]},Dt=(e,t)=>{let n;if(e[0]>1e3){const a=Math.abs(e[0]-t[0]),r=Math.abs(e[1]-t[1]);n=Math.sqrt(Math.pow(a,2)+Math.pow(r,2))}else{const a=new Rt(e[1],e[0]),r=new Rt(t[1],t[0]);n=a.distanceTo(r)}return Math.round(n)},At=e=>{let t;return t=e<800?`${e} metres`:e<5e3?(e/1e3*.621371).toFixed(1)+" miles":Math.round(e/1e3*.621371)+" miles",t},$t=e=>{const t=Dt([e[0],e[1]],[e[2],e[1]]),n=Dt([e[0],e[1]],[e[0],e[3]]);return`${At(t)} by ${At(n)}`},It=(e,t,n,a)=>{const{featuresTotal:r,isFeaturesInMap:i,isPixelFeaturesAtPixel:l,isPixelFeaturesInMap:o}=a;let s,c="";return r?c=`${r} feature${1===r?"":"s"} in this view`:l?c="Data at the centre coordinate":o?c="No data at the centre coordinate":i&&(c="No feature data in this area"),s=t[0]>1e3?`easting ${Math.round(t[0])} long ${Math.round(t[1])}`:`lat ${t[1].toFixed(4)} long ${t[0].toFixed(4)}`,`Approximate map centre ${e||s}. Covering ${$t(n)}. ${c}`},Ft=e=>parseFloat(null==e?void 0:e.split(",")[2]),zt=e=>{const t=window.localStorage.getItem("basemap"),n=null==t?void 0:t.split(",")[1],a=null==t?void 0:t.split(",")[0];return(e?"dark":"light")!==n&&["default","dark"].includes(a)&&window.localStorage.removeItem("basemap"),(null==t?void 0:t.split(",")[0])||(e?"dark":"default")},Ut=(e,t,n)=>"PageDown"===e?n===t-1?0:n+1:n>0?n-1:t-1,Ht=(e,t)=>{const n=e.length,a=t<e.length?e[t]:null;return a?`\n        ${n} feature${1!==n?"s":""} in this view. ${a.name}. ${t+1} of ${n} highlighted.\n    `:""},Bt=(e,t)=>{const n=e.code.slice(-1);return(null==t?void 0:t.features.length)>=n?t.features[n-1].id:""};function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(n),!0).forEach((function(t){var a,r,i;a=e,r=t,i=n[t],r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r),r in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Vt=(e,t)=>{switch(t.type){case"UPDATE":{const{oPlace:n,oZoom:a}=e,{bbox:r,centre:i,zoom:l,features:o}=t.detail,s=e.isUserInitiated?null:"RESET"===e.action?n:e.place,c=It(s,i,r,o),u={oBbox:r,oCentre:i,rZoom:l,oZoom:a,oPlace:s},d=!((0,yt.Ft)(e.centre,i)&&(0,yt.Ft)(e.zoom,l)),m="GEOLOC"===e.action,p=!(0,yt.Ft)(e.features,o),f=d||m||p,h=((e,t,n,a,r)=>{const i=JSON.stringify(e)===JSON.stringify(n),l=t===a;if(!e||!t||i&&l)return;let o;return o=i||l?i?`zoomed ${a>t?"in":"out"}, showing ${$t(r)}`:`${((e,t)=>{e=e.map((e=>e>1e3?Math.round(e):Math.round(1e5*e)/1e5)),t=t.map((e=>e>1e3?Math.round(e):Math.round(1e5*e)/1e5));const n=[e[0],e[1]],a=[e[0],t[1]],r=Dt(n,a),i=[e[0],e[1]],l=[t[0],e[1]],o=Dt(i,l),s=e[0]<t[0]?"east":e[0]>t[0]?"west":null,c=e[1]<t[1]?"north":e[1]>t[1]?"south":null;return(c?`${c} ${At(r)}`:"")+(c&&s?", ":"")+(s?`${s} ${At(o)}`:"")})(e,n)}`:"New area",`${o}: Use ALT plus I to get new details`})(e.centre,e.zoom,i,l,r),_=d||m?s?c:h:e.status;return Wt(Wt(Wt({},e),["INIT","GEOLOC"].includes(e.action)&&u),{},{place:s,bbox:r,centre:i,zoom:l,status:_,features:o,isMoving:!1,isFeaturesChange:d||m,isUpdate:f,action:null})}case"UPDATE_PLACE":{const{centre:n,bbox:a,features:r}=e,{place:i}=t,l=It(i,n,a,r);return Wt(Wt({},e),{},{place:i,status:l,isUserInitiated:!1,isStatusVisuallyHidden:!0})}case"MOVE_START":return Wt(Wt({},e),{},{status:"Map move",isMoving:!0,isUpdate:!1,isUserInitiated:t.isUserInitiated,isStatusVisuallyHidden:!0});case"RESET":return Wt(Wt({},e),{},{place:e.oPlace,action:"RESET",isUpdate:!1});case"SEARCH":return Wt(Wt({},e),{},{bbox:t.bbox,centre:t.centre,zoom:t.zoom,place:t.place,action:"SEARCH",isStatusVisuallyHidden:!0,isUpdate:!1,padding:null,timestamp:Date.now()});case"GEOLOC":return Wt(Wt({},e),{},{place:t.place,centre:t.centre,bbox:null,status:"",isStatusVisuallyHidden:!0,action:"GEOLOC",isUpdate:!1});case"ZOOM_IN":return Wt(Wt({},e),{},{action:"ZOOM_IN",isUpdate:!1});case"ZOOM_OUT":return Wt(Wt({},e),{},{action:"ZOOM_OUT",isUpdate:!1});case"SET_BASEMAP":return Wt(Wt({},e),{},{action:"BASEMAP",isUpdate:!1,basemap:t.basemap});case"SET_SIZE":return Wt(Wt({},e),{},{action:"SIZE",isUpdate:!1,padding:null,size:t.size});case"UPDATE_STATUS":return Wt(Wt({},e),{},{status:t.status,isStatusVisuallyHidden:t.isStatusVisuallyHidden});case"CLEAR_STATUS":return Wt(Wt({},e),{},{status:"",isStatusVisuallyHidden:!1});case"CLEAR_FEATURES":return Wt(Wt({},e),{},{features:null});case"SET_PADDING":{const{panel:n,viewport:a,isMobile:r,isAnimate:i}=t;let l=null;const o=null==n?void 0:n.getBoundingClientRect();if((null==o?void 0:o.height)>0){const e=a.getBoundingClientRect(),t=o.bottom-e.top,n=o.right-e.left,i=a.offsetHeight/t>a.offsetWidth/n,s=i?Math.round(o.height)+90:0,c=i?0:Math.round(o.width)+30;l=Wt(Wt(Wt({},r?{bottom:15+o.height}:{}),i&&!r?{top:s}:{}),i||r?{}:{left:c})}return Wt(Wt({},e),{},{isAnimate:i,padding:l})}default:return e}};function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){var a,r,i;a=e,r=t,i=n[t],r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r),r in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Kt=V(),Yt=({options:e,children:t})=>{const[n,a]=se(Vt,(e=>{var t;const{bbox:n,centre:a,zoom:r,place:i}=e,l=new URLSearchParams(window.location.search).get("cz"),o=null===(t=window)||void 0===t?void 0:t.matchMedia("(prefers-color-scheme: dark)").matches;return{bbox:l?null:n||(a&&r?null:ht.W0.map.BBOX),centre:l?(s=l,null==s?void 0:s.split(",").slice(0,2).map((e=>parseFloat(e)))):a||null,zoom:l?Ft(l):r||null,place:l?null:i,oZoom:r,basemap:zt(o),size:window.localStorage.getItem("size"),features:null,status:"",isStatusVisuallyHidden:!0,error:null,action:"INIT",isMoving:!1,isUpdate:!1,isFeaturesChange:!1,isPanZoomChange:!1,isUserInitiated:!1,padding:null,timestamp:Date.now()};var s})(e)),r=pe((()=>Zt(Zt({},n),{},{dispatch:a})));return ft.createElement(Kt.Provider,{value:r},t)},Xt=()=>he(kt);var Jt=n(42325);const{history:Qt}=window,en=e=>{const t=(e,t)=>{Qt.replaceState(e,"",t)},n=fe((n=>{const a=new URLSearchParams(window.location.search);a.delete(e),a.set(e,n);const r=a.toString();t(window.history.state,`${window.location.pathname}?${decodeURIComponent(r)}`)}),[t,e]);return[new URLSearchParams(window.location.search).get(e),n]},tn=()=>he(Kt),nn=(e,t)=>{let n=null;return(...a)=>{window.clearTimeout(n),n=window.setTimeout((()=>{e.apply(null,a)}),t)}};function an({message:e,isVisuallyHidden:t}){return ft.createElement("div",{className:"fm-c-status"+(t||!e?" fm-c-status--visually-hidden":""),"aria-live":"assertive","aria-atomic":!0},ft.createElement("div",{className:"fm-c-status__inner govuk-body-s"},e))}function rn(){return rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rn.apply(this,arguments)}function ln({children:e}){const{provider:t,isContainerReady:n,mode:a,viewportRef:r,paddingBoxRef:i,obscurePanelRef:l,targetMarker:o,isMobile:s}=Xt(),{dispatch:c,padding:u,isAnimate:d}=tn();return ce((()=>{t.map&&t.setPadding(null==o?void 0:o.coord,d)}),[u]),ce((()=>{n&&c({type:"SET_PADDING",panel:null==l?void 0:l.current,viewport:r.current,isMobile:s})}),[n]),ce((()=>{setTimeout((()=>{c({type:"SET_PADDING",panel:l.current,viewport:r.current,isMobile:s,isAnimate:!1})}),0)}),[s]),ce((()=>{["frame","draw"].includes(a)&&c({type:"SET_PADDING",viewport:r.current,isMobile:s,isAnimate:!1})}),[a]),ft.createElement("div",rn({className:"fm-o-padding-box"},u?{style:u}:{},{ref:i}),e)}const on=()=>{const{provider:e,info:t,viewportRef:n,targetMarker:a,isMobile:r,padding:i}=Xt(),{size:l}=tn(),[o,s]=oe(!1);return ce((()=>{if(null==a||!a.coord||!e.map)return;let t=e.getPixel(a.coord);const r="large"===l?2:1;t=t.map((e=>e*r));const{top:i,left:o}=n.current.getBoundingClientRect(),c=document.elementFromPoint(t[0]+o,t[1]+i),u=!(null==c||!c.closest(".fm-c-panel--info"));return s(u),()=>{s(!1)}}),[e.map,r,i,t,a]),[o]};function sn(){const{provider:e,mode:t,targetMarker:n,activePanel:a,viewportRef:r,obscurePanelRef:i,isContainerReady:l,isKeyboard:o,isMobile:s}=Xt(),{dispatch:c,features:u}=tn(),[d]=on(),m=o&&!(n&&"INFO"===a),p=m?null==u?void 0:u.isPixelFeaturesAtPixel:null==n?void 0:n.hasData,f=m?null:null==n?void 0:n.coord,h=m&&"default"===t&&u?"pixel"===(null==u?void 0:u.resultType):!!f;return ce((()=>{e.setTargetMarker(f,p,h)}),[e.map,f,p,h]),ce((()=>{d&&l&&i.current&&c({type:"SET_PADDING",panel:i.current,viewport:r.current,isMobile:s,isAnimate:!0})}),[d]),!f&&h?ft.createElement("div",{className:"fm-c-marker fm-c-marker--target fm-c-marker--visible fm-c-marker--centre"+(p?" fm-c-marker--has-data":""),"aria-label":"Map marker"},ft.createElement("div",{class:"fm-c-marker__inner"},ft.createElement("svg",{width:"69",height:"69",viewBox:"0 0 69 69",fillRule:"evenodd",fill:"none",stroke:"currentColor"},ft.createElement("circle",{cx:"34.5",cy:"34.5",r:"33",strokeWidth:"2"}),ft.createElement("path",{d:"M1.5 34.5H31m3.5-33V31m0 36.5V38m33-3.5H38"})))):null}function cn(){const{frameRef:e,isFrameVisible:t}=Xt();return ft.createElement("div",{className:"fm-c-frame"+(t?" fm-c-frame--visible":""),ref:e})}function un(){return un=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},un.apply(this,arguments)}function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){var a,r,i;a=e,r=t,i=n[t],r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r),r in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pn(){const{isContainerReady:e,provider:t,options:n,parent:a,mode:r,segments:i,layers:l,viewportRef:o,paddingBoxRef:s,frameRef:c,activePanel:u,activeRef:d,featureId:m,targetMarker:p,isKeyboard:f,isDarkMode:h}=Xt();if(!t)return;const{id:_,queryFeature:y,queryPixel:v,minZoom:b,maxZoom:g}=n,E=Xt().dispatch,{bbox:w,centre:M,zoom:N,oCentre:O,oZoom:k,rZoom:S,features:P,basemap:x,size:T,status:L,isStatusVisuallyHidden:R,action:C,timestamp:j,isMoving:D,isUpdate:A}=tn(),$=tn().dispatch,[,I]=en(ht.W0.params.centreZoom),[,F]=en(ht.W0.params.featureId),[,z]=en(ht.W0.params.targetMarker),U=de(null),H=de(-1),B=de([0,0]),G=de(!1),W=e=>{_t.A.dispatch(a,ht.AZ.APP_READY,mn(mn({},e.detail),{},{mode:r,segments:i,layers:l,basemap:x,size:T}))},V=e=>{const t=e.detail.isUserInitiated;$({type:"MOVE_START",isUserInitiated:t}),f&&"INFO"===u&&t&&E({type:"CLOSE"})},q=e=>{$({type:"UPDATE",detail:e.detail})},Z=e=>{const{resultType:t}=e.detail,{items:n,isPixelFeaturesAtPixel:r,coord:i}=e.detail.features,l="feature"===t&&n.length?n[0].id:null;E({type:"SET_SELECTED",featureId:l,targetMarker:"pixel"===t?{coord:i,hasData:r}:null,activePanelHasFocus:!0}),_t.A.dispatch(a,ht.AZ.APP_QUERY,e.detail)},K=e=>{_t.A.dispatch(a,ht.AZ.APP_CHANGE,mn(mn({},e.detail),{},{size:T,mode:r,segments:i,layers:l}))},Y=nn((async e=>{const n=await t.getNearest(e);$({type:"UPDATE_PLACE",place:n})}),300),X=nn((e=>{$({type:"UPDATE_STATUS",status:e,isStatusVisuallyHidden:!0})}),300),J=f&&(null==P?void 0:P.isFeaturesInMap),Q=f&&(null==P?void 0:P.featuresInViewport.length),ee=f&&document.activeElement===o.current,te=["dark","aerial"].includes(x);return ce((()=>(e&&!t.map&&(t.init({target:U.current,paddingBox:s.current,frame:c.current,bbox:w,centre:M,zoom:N,minZoom:b,maxZoom:g,basemap:x,size:T,featureLayers:y||[],pixelLayers:v||[]}),t.addEventListener("load",W),t.addEventListener("update",q),t.addEventListener("mapquery",Z)),document.querySelector("[data-fm-open]")&&(d.current=o.current),()=>{t.removeEventListener("load",W),t.removeEventListener("update",q),t.removeEventListener("mapquery",Z),null==t||t.remove()})),[e]),ce((()=>(t.addEventListener("movestart",V),()=>{t.removeEventListener("movestart",V)})),[f,u]),ce((()=>{switch(t.addEventListener("style",K),C){case"SEARCH":w?t.fitBbox(w):t.setCentre(M,N);break;case"RESET":t.setCentre(O,S);break;case"GEOLOC":t.setCentre(M,k),t.showLocation(M);break;case"ZOOM_IN":t.zoomIn();break;case"ZOOM_OUT":t.zoomOut();break;case"SIZE":window.localStorage.setItem("size",T),t.setSize(T);break;case"BASEMAP":window.localStorage.setItem("basemap",`${x},${h?"dark":"light"}`),t.setBasemap(x)}return()=>{t.removeEventListener("style",K)}}),[j,C,r,x,T]),ce((()=>{A&&I(`${M.toString()},${N}`)}),[A]),ce((()=>{if(!t.map)return;const e=zt(h);$({type:"SET_BASEMAP",basemap:e})}),[h]),ce((()=>{t.selectFeature(m),F(m||"");const e=p?Object.keys(p).map((e=>p[e])).join(","):"";z(e)}),[m,p]),ft.createElement("div",un({id:`${_}-viewport`,className:`fm-o-viewport${"small"!==T?" fm-o-viewport--"+T:""}${te?" fm-o-viewport--dark-basemap":""}${J?" fm-o-viewport--has-padding-box":""}${Q?" fm-o-viewport--padding-box-active":""}${ee?" fm-u-focus-visible":""}`,role:"application","aria-labelledby":`${_}-viewport-label`,onClick:e=>{if("default"!==r||G.current)return;const{layerX:n,layerY:a}=e.nativeEvent,i="large"===T?2:1,l=[n/i,a/i];t.queryPoint(l)},onKeyDown:e=>{var n;if(!e.altKey&&ht.FB.pan[e.key.toUpperCase()]){e.preventDefault();const n=ht.FB[e.shiftKey?"shiftPan":"pan"][e.key.toUpperCase()];t.panBy(n)}if(["+","-","=","_"].includes(e.key)&&(["+","="].includes(e.key)?t.zoomIn():t.zoomOut()),["Enter","Space"].includes(e.key)){var a;if("default"!==r)return;if(H.current>=0&&null!==(a=P.featuresInViewport)&&void 0!==a&&a.length){const e=P.featuresInViewport[H.current].id;t.queryFeature(e)}else if(!D){const e="large"===T?2:1,n=jt(s.current,e);t.queryPoint(n)}}if(y&&["PageDown","PageUp"].includes(e.key)&&(null===(n=P.featuresInViewport)||void 0===n?void 0:n.length)>=1){var i,l;e.preventDefault();const{featuresInViewport:t}=P,n=Ut(e.key,t.length,H.current);H.current=n<t.length?n:0;const a=Ht(t,n),r=(null===(i=t[n])||void 0===i?void 0:i.id)||(null===(l=t[0])||void 0===l?void 0:l.id);E({type:"SET_SELECTED",featureId:r,activePanel:null}),X(a)}},onKeyUp:e=>{if(t.getNearest&&e.altKey&&"I"===e.code.slice(-1)&&($({type:"CLEAR_STATUS"}),Y(M)),e.altKey&&"K"===e.code.slice(-1)&&E({type:"OPEN",data:"KEYBOARD"}),e.altKey&&/^[1-9]$/.test(e.code.slice(-1))){const n=Bt(e,null==P?void 0:P.featuresInViewport);t.queryFeature(n)}["Escape","Esc"].includes(e.key)&&(e.preventDefault(),E({type:"SET_SELECTED",id:null}))},onPointerDown:e=>{B.current=[e.pageX,e.pageY],G.current=!1},onPointerUp:e=>{const t=Math.abs(e.pageX-B.current[0]),n=Math.abs(e.pageY-B.current[1]);G.current=t>=ht.FB.drag||n>=ht.FB.drag}},m?{"aria-activedescendant":`${_}-feature-${m}`}:{},{"aria-owns":`${_}-viewport-features`,tabIndex:"0",ref:o,"data-fm-viewport":!0}),ft.createElement("div",{id:`${_}-map-container`,className:"fm-o-map-container",ref:U}),ft.createElement(ln,null,ft.createElement(sn,null),ft.createElement(cn,null)),ft.createElement("ul",{id:`${_}-viewport-features`,className:"fm-u-visually-hidden",role:"listbox","aria-labelledby":`${_}-viewport-label`},null==P?void 0:P.featuresInViewport.map(((e,t)=>ft.createElement("li",{key:t,id:`${_}-feature-${e.id}`,role:"option","aria-selected":m===e.id,"aria-setsize":"-1",tabIndex:"-1"},e.name)))),pe((()=>ft.createElement(an,{message:L,isVisuallyHidden:R})),[L]))}function fn(){const{options:e,isBack:t,handleExit:n,isDesktop:a}=Xt(),r="inset"!==e.legend.display&&a;return ft.createElement("button",{onClick:n,className:"fm-c-btn fm-c-btn--exit govuk-body-s"},ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:t?"14":"20",height:"20",viewBox:t?"0 0 14 20":"0 0 20 20"},t?r?ft.createElement("path",{d:"M10.193,17.777l-7.778,-7.777l7.778,-7.778l1.414,1.414l-6.364,6.364l6.364,6.363l-1.414,1.414Z",fill:"currentColor",strokeWidth:"0"}):ft.createElement("path",{d:"M3.828 10l8.486 8.485-1.415 1.414L1 10 10.899.101l1.415 1.414L3.828 10z",fill:"currentColor",strokeWidth:"0"}):ft.createElement("path",{d:"M10,8.6L15.6,3L17,4.4L11.4,10L17,15.6L15.6,17L10,11.4L4.4,17L3,15.6L8.6,10L3,4.4L4.4,3L10,8.6Z",fill:"currentColor",strokeWidth:"0"})),ft.createElement("span",{className:"fm-c-btn__label"},t?"Back":"Exit"))}const hn=(e,t,n)=>{ce((()=>{function a(t){e.current&&document.contains(t.target)&&!e.current.contains(t.target)&&n(t)}return document.addEventListener(t,a),()=>{document.removeEventListener(t,a)}}),[e])},_n=(e,t)=>{let n=null!=e&&e.length?`${e.length} result${0!==e.length?"s":""} are available.`:"No results are available.";return n+=null!=e&&e.length&&t>=0?` ${e[t].text}. ${t+1} of ${e.length} is highlighted.`:"",n};function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){var a,r,i;a=e,r=t,i=n[t],r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r),r in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const bn={isVisible:!1,isExpanded:!1,isFocusWithin:!1,isFocusVisibleWithin:!1,selected:-1,suggestions:[],value:"",message:"",status:""},gn=(e,t)=>{switch(t.type){case"EXPAND":return vn(vn({},e),{},{isExpanded:!0,activeRef:t.activeRef});case"COLLAPSE":return vn(vn({},e),{},{isExpanded:!1,activeRef:t.activeRef});case"FOCUS":return vn(vn({},e),{},{isVisible:!0,isFocusWithin:!0,isFocusVisibleWithin:t.isKeyboard,activeRef:null});case"BLUR":return vn(vn({},e),{},{isVisible:!1,isFocusWithin:!1,isFocusVisibleWithin:!1});case"MOUSEENTER":return vn(vn({},e),{},{selected:-1});case"CLICK":return vn(vn({},e),{},{isVisible:!0,isFocusVisibleWithin:t.isKeyboard,activeRef:t.activeRef});case"CHANGE":{const n=t.value;let a=[];return n.length<3&&(a=e.suggestions),vn(vn({},e),{},{suggestions:a,value:n,message:_n(a,-1),isVisible:n.length>=3})}case"ADD_SUGGESTIONS":return vn(vn({},e),{},{suggestions:t.suggestions,message:_n(t.suggestions,-1)});case"HIDE_SUGGESTIONS":return vn(vn({},e),{},{isVisible:!1,message:_n(e.suggestions,-1),selected:-1});case"REVIEW":{let n;return n="ArrowDown"===t.key?e.selected===e.suggestions.length-1?e.selected:e.selected+1:e.selected>0?e.selected-1:-1,vn(vn({},e),{},{isVisible:!0,selected:n,message:_n(e.suggestions,n),status:""})}case"SUBMIT":return vn(vn({},e),{},{isVisible:!1,value:t.value,message:`${e.isVisible?"Collapsed ":""}${e.selected>=0?"Completion selected":""}`,selected:-1});case"CLEAR":return vn(vn({},e),{},{isVisible:!1,value:"",suggestions:[],activeRef:t.activeRef,message:"No suggestions",isFocusVisibleWithin:t.isFocusVisibleWithin});case"CLEAR_STATUS":return vn(vn({},e),{},{status:""});case"UPDATE_STATUS":return vn(vn({},e),{},{status:e.message});default:return e}};function En(){return En=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},En.apply(this,arguments)}function wn({id:e,state:t,dispatch:n,provider:a,updateViewport:r}){const i=de(),{value:l,selected:o}=t,s=nn((async e=>{const t=await a.suggest(e);n({type:"ADD_SUGGESTIONS",suggestions:t}),u()}),350),c=nn((()=>{n({type:"UPDATE_STATUS"})}),500),u=()=>{n({type:"CLEAR_STATUS"}),c()};return ce((()=>{u()}),[t.isVisible]),ce((()=>{u(),setTimeout((()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.scrollIntoView(!1)}),0)}),[o]),ce((()=>{l.length>=3?s(l):u()}),[l]),ft.createElement("div",En({className:"fm-c-search__suggestions"},t.isVisible?{}:{style:{display:"none"}},{onMouseEnter:()=>n({type:"MOUSEENTER"})}),pe((()=>ft.createElement(an,{isVisuallyHidden:!0,message:t.status,cache:(new Date).getTime()})),[t.status]),ft.createElement("ul",{id:`${e}-suggestions`,role:"listbox","aria-labelledby":`${e}-search`,className:"fm-c-search__list"},t.suggestions.map(((e,a)=>ft.createElement("li",{key:e.id,ref:t.selected===a?i:null,className:`fm-c-search-item${t.selected===a?" fm-c-search-item--selected":""} govuk-body-s`,onMouseDown:e=>((e,a)=>{e.preventDefault();const i=t.suggestions[a].text,l=t.suggestions[a].id;n({type:"SUBMIT",value:i}),r(i,l)})(e,a),role:"option","aria-selected":t.selected===a,"aria-posinset":a+1,"aria-setsize":t.suggestions.length,tabIndex:"-1"},ft.createElement("span",{className:"fm-c-search-item__primary",dangerouslySetInnerHTML:e.marked}))))))}class Mn{constructor(e,t,n){if(isNaN(e)||isNaN(t)||isNaN(n))throw new TypeError(`invalid vector [${e},${t},${n}]`);this.x=Number(e),this.y=Number(t),this.z=Number(n)}get length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}plus(e){if(!(e instanceof Mn))throw new TypeError("v is not Vector3d object");return new Mn(this.x+e.x,this.y+e.y,this.z+e.z)}minus(e){if(!(e instanceof Mn))throw new TypeError("v is not Vector3d object");return new Mn(this.x-e.x,this.y-e.y,this.z-e.z)}times(e){if(isNaN(e))throw new TypeError(`invalid scalar value ‘${e}’`);return new Mn(this.x*e,this.y*e,this.z*e)}dividedBy(e){if(isNaN(e))throw new TypeError(`invalid scalar value ‘${e}’`);return new Mn(this.x/e,this.y/e,this.z/e)}dot(e){if(!(e instanceof Mn))throw new TypeError("v is not Vector3d object");return this.x*e.x+this.y*e.y+this.z*e.z}cross(e){if(!(e instanceof Mn))throw new TypeError("v is not Vector3d object");const t=this.y*e.z-this.z*e.y,n=this.z*e.x-this.x*e.z,a=this.x*e.y-this.y*e.x;return new Mn(t,n,a)}negate(){return new Mn(-this.x,-this.y,-this.z)}unit(){const e=this.length;if(1==e)return this;if(0==e)return this;const t=this.x/e,n=this.y/e,a=this.z/e;return new Mn(t,n,a)}angleTo(e,t=void 0){if(!(e instanceof Mn))throw new TypeError("v is not Vector3d object");if(!(t instanceof Mn||null==t))throw new TypeError("n is not Vector3d object");const n=null==t||this.cross(e).dot(t)>=0?1:-1,a=this.cross(e).length*n,r=this.dot(e);return Math.atan2(a,r)}rotateAround(e,t){if(!(e instanceof Mn))throw new TypeError("axis is not Vector3d object");const n=t.toRadians(),a=this.unit(),r=e.unit(),i=Math.sin(n),l=Math.cos(n),o=1-l,s=r.x,c=r.y,u=r.z,d=[[o*s*s+l,o*s*c-i*u,o*s*u+i*c],[o*s*c+i*u,o*c*c+l,o*c*u-i*s],[o*s*u-i*c,o*c*u+i*s,o*u*u+l]],m=[d[0][0]*a.x+d[0][1]*a.y+d[0][2]*a.z,d[1][0]*a.x+d[1][1]*a.y+d[1][2]*a.z,d[2][0]*a.x+d[2][1]*a.y+d[2][2]*a.z];return new Mn(m[0],m[1],m[2])}toString(e=3){return`[${this.x.toFixed(e)},${this.y.toFixed(e)},${this.z.toFixed(e)}]`}}Number.prototype.toRadians=function(){return this*Math.PI/180},Number.prototype.toDegrees=function(){return 180*this/Math.PI};var Nn=Mn;const On={WGS84:{a:6378137,b:6356752.314245,f:1/298.257223563}},kn={WGS84:{ellipsoid:On.WGS84}};Object.freeze(On.WGS84),Object.freeze(kn.WGS84);class Sn{constructor(e,t,n=0){if(isNaN(e)||null==e)throw new TypeError(`invalid lat ‘${e}’`);if(isNaN(t)||null==t)throw new TypeError(`invalid lon ‘${t}’`);if(isNaN(n)||null==n)throw new TypeError(`invalid height ‘${n}’`);this._lat=Tt.wrap90(Number(e)),this._lon=Tt.wrap180(Number(t)),this._height=Number(n)}get lat(){return this._lat}get latitude(){return this._lat}set lat(e){if(this._lat=isNaN(e)?Tt.wrap90(Tt.parse(e)):Tt.wrap90(Number(e)),isNaN(this._lat))throw new TypeError(`invalid lat ‘${e}’`)}set latitude(e){if(this._lat=isNaN(e)?Tt.wrap90(Tt.parse(e)):Tt.wrap90(Number(e)),isNaN(this._lat))throw new TypeError(`invalid latitude ‘${e}’`)}get lon(){return this._lon}get lng(){return this._lon}get longitude(){return this._lon}set lon(e){if(this._lon=isNaN(e)?Tt.wrap180(Tt.parse(e)):Tt.wrap180(Number(e)),isNaN(this._lon))throw new TypeError(`invalid lon ‘${e}’`)}set lng(e){if(this._lon=isNaN(e)?Tt.wrap180(Tt.parse(e)):Tt.wrap180(Number(e)),isNaN(this._lon))throw new TypeError(`invalid lng ‘${e}’`)}set longitude(e){if(this._lon=isNaN(e)?Tt.wrap180(Tt.parse(e)):Tt.wrap180(Number(e)),isNaN(this._lon))throw new TypeError(`invalid longitude ‘${e}’`)}get height(){return this._height}set height(e){if(this._height=Number(e),isNaN(this._height))throw new TypeError(`invalid height ‘${e}’`)}get datum(){return this._datum}set datum(e){this._datum=e}static get ellipsoids(){return On}static get datums(){return kn}static parse(...e){if(0==e.length)throw new TypeError("invalid (empty) point");let t,n,a;if("object"==typeof e[0]&&(1==e.length||!isNaN(parseFloat(e[1])))){const r=e[0];if("Point"==r.type&&Array.isArray(r.coordinates)?([n,t,a]=r.coordinates,a=a||0):(null!=r.latitude&&(t=r.latitude),null!=r.lat&&(t=r.lat),null!=r.longitude&&(n=r.longitude),null!=r.lng&&(n=r.lng),null!=r.lon&&(n=r.lon),null!=r.height&&(a=r.height),t=Tt.wrap90(Tt.parse(t)),n=Tt.wrap180(Tt.parse(n))),null!=e[1]&&(a=e[1]),isNaN(t)||isNaN(n))throw new TypeError(`invalid point ‘${JSON.stringify(e[0])}’`)}if("string"==typeof e[0]&&2==e[0].split(",").length&&([t,n]=e[0].split(","),t=Tt.wrap90(Tt.parse(t)),n=Tt.wrap180(Tt.parse(n)),a=e[1]||0,isNaN(t)||isNaN(n)))throw new TypeError(`invalid point ‘${e[0]}’`);if(null==t&&null==n&&([t,n]=e,t=Tt.wrap90(Tt.parse(t)),n=Tt.wrap180(Tt.parse(n)),a=e[2]||0,isNaN(t)||isNaN(n)))throw new TypeError(`invalid point ‘${e.toString()}’`);return new this(t,n,a)}toCartesian(){const e=this.datum?this.datum.ellipsoid:this.referenceFrame?this.referenceFrame.ellipsoid:On.WGS84,t=this.lat.toRadians(),n=this.lon.toRadians(),a=this.height,{a:r,f:i}=e,l=Math.sin(t),o=Math.cos(t),s=Math.sin(n),c=Math.cos(n),u=2*i-i*i,d=r/Math.sqrt(1-u*l*l);return new Pn((d+a)*o*c,(d+a)*o*s,(d*(1-u)+a)*l)}equals(e){if(!(e instanceof Sn))throw new TypeError(`invalid point ‘${e}’`);return!(Math.abs(this.lat-e.lat)>Number.EPSILON||Math.abs(this.lon-e.lon)>Number.EPSILON||Math.abs(this.height-e.height)>Number.EPSILON||this.datum!=e.datum||this.referenceFrame!=e.referenceFrame||this.epoch!=e.epoch)}toString(e="d",t=void 0,n=null){if(!["d","dm","dms","n"].includes(e))throw new RangeError(`invalid format ‘${e}’`);const a=(this.height>=0?" +":" ")+this.height.toFixed(n)+"m";return"n"==e?(null==t&&(t=4),`${this.lat.toFixed(t)}, ${this.lon.toFixed(t)}${null==n?"":a}`):`${Tt.toLat(this.lat,e,t)}, ${Tt.toLon(this.lon,e,t)}${null==n?"":a}`}}class Pn extends Nn{constructor(e,t,n){super(e,t,n)}toLatLon(e=On.WGS84){if(!e||!e.a)throw new TypeError(`invalid ellipsoid ‘${e}’`);const{x:t,y:n,z:a}=this,{a:r,b:i,f:l}=e,o=2*l-l*l,s=o/(1-o),c=Math.sqrt(t*t+n*n),u=i*a/(r*c)*(1+s*i/Math.sqrt(c*c+a*a)),d=u/Math.sqrt(1+u*u),m=d/u,p=isNaN(m)?0:Math.atan2(a+s*i*d*d*d,c-o*r*m*m*m),f=Math.atan2(n,t),h=Math.sin(p),_=c*Math.cos(p)+a*h-r*r/(r/Math.sqrt(1-o*h*h));return new Sn(p.toDegrees(),f.toDegrees(),_)}toString(e=0){return`[${this.x.toFixed(e)},${this.y.toFixed(e)},${this.z.toFixed(e)}]`}}const xn={WGS84:{a:6378137,b:6356752.314245,f:1/298.257223563},Airy1830:{a:6377563.396,b:6356256.909,f:1/299.3249646},AiryModified:{a:6377340.189,b:6356034.448,f:1/299.3249646},Bessel1841:{a:6377397.155,b:6356078.962818,f:1/299.1528128},Clarke1866:{a:6378206.4,b:6356583.8,f:1/294.978698214},Clarke1880IGN:{a:6378249.2,b:6356515,f:1/293.466021294},GRS80:{a:6378137,b:6356752.31414,f:1/298.257222101},Intl1924:{a:6378388,b:6356911.946,f:1/297},WGS72:{a:6378135,b:6356750.5,f:1/298.26}},Tn={ED50:{ellipsoid:xn.Intl1924,transform:[89.5,93.8,123.1,-1.2,0,0,.156]},ETRS89:{ellipsoid:xn.GRS80,transform:[0,0,0,0,0,0,0]},Irl1975:{ellipsoid:xn.AiryModified,transform:[-482.53,130.596,-564.557,-8.15,1.042,.214,.631]},NAD27:{ellipsoid:xn.Clarke1866,transform:[8,-160,-176,0,0,0,0]},NAD83:{ellipsoid:xn.GRS80,transform:[.9956,-1.9103,-.5215,-62e-5,.025915,.009426,.011599]},NTF:{ellipsoid:xn.Clarke1880IGN,transform:[168,60,-320,0,0,0,0]},OSGB36:{ellipsoid:xn.Airy1830,transform:[-446.448,125.157,-542.06,20.4894,-.1502,-.247,-.8421]},Potsdam:{ellipsoid:xn.Bessel1841,transform:[-582,-105,-414,-8.3,1.04,.35,-3.08]},TokyoJapan:{ellipsoid:xn.Bessel1841,transform:[148,-507,-685,0,0,0,0]},WGS72:{ellipsoid:xn.WGS72,transform:[0,0,-4.5,-.22,0,0,.554]},WGS84:{ellipsoid:xn.WGS84,transform:[0,0,0,0,0,0,0]}};Object.keys(xn).forEach((e=>Object.freeze(xn[e]))),Object.keys(Tn).forEach((e=>{Object.freeze(Tn[e]),Object.freeze(Tn[e].transform)}));class Ln extends Sn{constructor(e,t,n=0,a=Tn.WGS84){if(!a||null==a.ellipsoid)throw new TypeError(`unrecognised datum ‘${a}’`);super(e,t,n),this._datum=a}get datum(){return this._datum}static get ellipsoids(){return xn}static get datums(){return Tn}static parse(...e){let t=Tn.WGS84;if((4==e.length||3==e.length&&"object"==typeof e[2])&&(t=e.pop()),!t||null==t.ellipsoid)throw new TypeError(`unrecognised datum ‘${t}’`);const n=super.parse(...e);return n._datum=t,n}convertDatum(e){if(!e||null==e.ellipsoid)throw new TypeError(`unrecognised datum ‘${e}’`);return this.toCartesian().convertDatum(e).toLatLon()}toCartesian(){const e=super.toCartesian();return new Rn(e.x,e.y,e.z,this.datum)}}class Rn extends Pn{constructor(e,t,n,a=void 0){if(a&&null==a.ellipsoid)throw new TypeError(`unrecognised datum ‘${a}’`);super(e,t,n),a&&(this._datum=a)}get datum(){return this._datum}set datum(e){if(!e||null==e.ellipsoid)throw new TypeError(`unrecognised datum ‘${e}’`);this._datum=e}toLatLon(e=void 0){e&&(console.info("datum parameter to Cartesian_Datum.toLatLon is deprecated: set datum before calling toLatLon()"),this.datum=e);const t=this.datum||Tn.WGS84;if(!t||null==t.ellipsoid)throw new TypeError(`unrecognised datum ‘${t}’`);const n=super.toLatLon(t.ellipsoid);return new Ln(n.lat,n.lon,n.height,this.datum)}convertDatum(e){if(!e||null==e.ellipsoid)throw new TypeError(`unrecognised datum ‘${e}’`);if(!this.datum)throw new TypeError("cartesian coordinate has no datum");let t=null,n=null;null!=this.datum&&this.datum!=Tn.WGS84||(t=this,n=e.transform),e==Tn.WGS84&&(t=this,n=this.datum.transform.map((e=>-e))),null==n&&(t=this.convertDatum(Tn.WGS84),n=e.transform);const a=t.applyTransform(n);return a.datum=e,a}applyTransform(e){const{x:t,y:n,z:a}=this,r=e[0],i=e[1],l=e[2],o=e[3]/1e6+1,s=(e[4]/3600).toRadians(),c=(e[5]/3600).toRadians(),u=(e[6]/3600).toRadians();return new Rn(r+t*o-n*u+a*c,i+t*u+n*o-a*s,l-t*c+n*s+a*o)}}const Cn={trueOrigin:{lat:49,lon:-2},falseOrigin:{easting:-4e5,northing:1e5},scaleFactor:.9996012717,ellipsoid:Ln.ellipsoids.Airy1830};class jn{constructor(e,t){if(this.easting=Number(e),this.northing=Number(t),isNaN(e)||this.easting<0||this.easting>7e5)throw new RangeError(`invalid easting ‘${e}’`);if(isNaN(t)||this.northing<0||this.northing>13e5)throw new RangeError(`invalid northing ‘${t}’`)}toLatLon(e=Ln.datums.WGS84){const{easting:t,northing:n}=this,{a:a,b:r}=Cn.ellipsoid,i=Cn.trueOrigin.lat.toRadians(),l=Cn.trueOrigin.lon.toRadians(),o=-Cn.falseOrigin.easting,s=-Cn.falseOrigin.northing,c=Cn.scaleFactor,u=1-r*r/(a*a),d=(a-r)/(a+r),m=d*d,p=d*d*d;let f=i,h=0;do{f=(n-s-h)/(a*c)+f,h=r*c*((1+d+5/4*m+5/4*p)*(f-i)-(3*d+3*d*d+21/8*p)*Math.sin(f-i)*Math.cos(f+i)+(15/8*m+15/8*p)*Math.sin(2*(f-i))*Math.cos(2*(f+i))-35/24*p*Math.sin(3*(f-i))*Math.cos(3*(f+i)))}while(Math.abs(n-s-h)>=1e-5);const _=Math.cos(f),y=Math.sin(f),v=a*c/Math.sqrt(1-u*y*y),b=a*c*(1-u)/Math.pow(1-u*y*y,1.5),g=v/b-1,E=Math.tan(f),w=E*E,M=w*w,N=1/_,O=v*v*v,k=O*v*v,S=t-o,P=S*S,x=P*S,T=P*P,L=x*P;f=f-E/(2*b*v)*P+E/(24*b*O)*(5+3*w+g-9*w*g)*T-E/(720*b*k)*(61+90*w+45*M)*(T*P);const R=l+N/v*S-N/(6*O)*(v/b+2*w)*x+N/(120*k)*(5+28*w+24*M)*L-N/(k*v*v*5040)*(61+662*w+1320*M+M*w*720)*(L*P);let C=new Dn(f.toDegrees(),R.toDegrees(),0,Ln.datums.OSGB36);return e!=Ln.datums.OSGB36&&(C=C.convertDatum(e),C=new Dn(C.lat,C.lon,C.height,C.datum)),C}static parse(e){let t=(e=String(e).trim()).match(/^(\d+),\s*(\d+)$/);if(t)return new jn(t[1],t[2]);if(t=e.match(/^[HNST][ABCDEFGHJKLMNOPQRSTUVWXYZ]\s*[0-9]+\s*[0-9]+$/i),!t)throw new Error(`invalid grid reference ‘${e}’`);let n=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0),a=e.toUpperCase().charCodeAt(1)-"A".charCodeAt(0);n>7&&n--,a>7&&a--;const r=(n-2)%5*5+a%5,i=19-5*Math.floor(n/5)-Math.floor(a/5);let l=e.slice(2).trim().split(/\s+/);if(1==l.length&&(l=[l[0].slice(0,l[0].length/2),l[0].slice(l[0].length/2)]),l[0].length!=l[1].length)throw new Error(`invalid grid reference ‘${e}’`);l[0]=l[0].padEnd(5,"0"),l[1]=l[1].padEnd(5,"0");const o=r+l[0],s=i+l[1];return new jn(o,s)}toString(e=10){if(![0,2,4,6,8,10,12,14,16].includes(Number(e)))throw new RangeError(`invalid precision ‘${e}’`);let{easting:t,northing:n}=this;if(0==e){const e={useGrouping:!1,minimumIntegerDigits:6,maximumFractionDigits:3};return`${t.toLocaleString("en",e)},${n.toLocaleString("en",e)}`}const a=Math.floor(t/1e5),r=Math.floor(n/1e5);let i=19-r-(19-r)%5+Math.floor((a+10)/5),l=5*(19-r)%25+a%5;i>7&&i++,l>7&&l++;const o=String.fromCharCode(i+"A".charCodeAt(0),l+"A".charCodeAt(0));return t=Math.floor(t%1e5/Math.pow(10,5-e/2)),n=Math.floor(n%1e5/Math.pow(10,5-e/2)),t=t.toString().padStart(e/2,"0"),n=n.toString().padStart(e/2,"0"),`${o} ${t} ${n}`}}class Dn extends Ln{toOsGrid(){const e=this.datum==Ln.datums.OSGB36?this:this.convertDatum(Ln.datums.OSGB36),t=e.lat.toRadians(),n=e.lon.toRadians(),{a:a,b:r}=Cn.ellipsoid,i=Cn.trueOrigin.lat.toRadians(),l=Cn.trueOrigin.lon.toRadians(),o=-Cn.falseOrigin.easting,s=-Cn.falseOrigin.northing,c=Cn.scaleFactor,u=1-r*r/(a*a),d=(a-r)/(a+r),m=d*d,p=d*d*d,f=Math.cos(t),h=Math.sin(t),_=a*c/Math.sqrt(1-u*h*h),y=a*c*(1-u)/Math.pow(1-u*h*h,1.5),v=_/y-1,b=r*c*((1+d+5/4*m+5/4*p)*(t-i)-(3*d+3*d*d+21/8*p)*Math.sin(t-i)*Math.cos(t+i)+(15/8*m+15/8*p)*Math.sin(2*(t-i))*Math.cos(2*(t+i))-35/24*p*Math.sin(3*(t-i))*Math.cos(3*(t+i))),g=f*f*f,E=g*f*f,w=Math.tan(t)*Math.tan(t),M=w*w,N=n-l,O=N*N,k=O*N,S=k*N,P=S*N;let x=b+s+_/2*h*f*O+_/24*h*g*(5-w+9*v)*S+_/720*h*E*(61-58*w+M)*(P*N),T=o+_*f*N+_/6*g*(_/y-w)*k+_/120*E*(5-18*w+M+14*v-58*w*v)*P;x=Number(x.toFixed(3)),T=Number(T.toFixed(3));try{return new jn(T,x)}catch(t){throw new Error(`${t.message} from (${e.lat.toFixed(6)},${e.lon.toFixed(6)}).toOsGrid()`)}}convertDatum(e){const t=super.convertDatum(e);return new Dn(t.lat,t.lon,t.height,t.datum)}}var An=n(93676);const $n=(e,t)=>{t=t.replace(/,/g,"");const n=[...new Set([t,...t.trim().split(/[\s,\t,\n]+/)])].join("|"),a=new RegExp("("+n+")","i","g","gi");return{__html:e.replace(a,"<mark>$1</mark>")}},In=async(e,t)=>{if(!e)return[];let n=An.k;var a;n=n.replace("{query}",encodeURI(e)).replace("{maxresults}",(a=(a=e).replace(/\s/g,""),/^(([A-Z]{1,2}\d[A-Z\d]?|ASCN|STHL|TDCU|BBND|[BFS]IQQ|PCRN|TKCA) ?\d[A-Z]{2}|BFPO ?\d{1,4}|(KY\d|MSR|VG|AI)[ -]?\d{4}|[A-Z]{2} ?\d{2}|GE ?CX|GIR ?0A{2}|SAN ?TA1)$/i.test(a)?1:100));let r=[];try{const a=(await t()).token,i=await fetch(n,{headers:{Authorization:"Bearer "+a}}),l=await i.json();if(l.error||0===l.header.totalresults)return[];r=((e,t)=>{const n=t.toLowerCase().replace(/,/g,"").split(" ");return e.filter((e=>n.some((t=>e.GAZETTEER_ENTRY.NAME1.toLowerCase().includes(t)))))})(l.results,e),r=(e=>Array.from(new Map(e.map((e=>[e.GAZETTEER_ENTRY.ID,e]))).values()))(r),r=(e=>e.filter((e=>"england"===e.GAZETTEER_ENTRY.COUNTRY.toLowerCase())))(r),r=r.slice(0,8)}catch(e){console.log(e)}return r};var Fn=class{constructor(e){this.tokenCallback=e}async suggest(e){return e?(await In(e,this.tokenCallback)).map((t=>((e,{ID:t,NAME1:n,COUNTY_UNITARY:a,DISTRICT_BOROUGH:r,POSTCODE_DISTRICT:i,LOCAL_TYPE:l})=>{const o=`${["City","Postcode"].includes(l)?"":i+", "}${"City"!==l?a||r:""}`;return{id:t,text:`${n}${o?", "+o:""}`,marked:$n(`${n}${o?", "+o:""}`,e)}})(e,t.GAZETTEER_ENTRY))):[]}async find(e){if(!e)return null;const t=await In(e,this.tokenCallback);return t.length?(({ID:e,NAME1:t,MBR_XMIN:n,MBR_YMIN:a,MBR_XMAX:r,MBR_YMAX:i,GEOMETRY_X:l,GEOMETRY_Y:o})=>{const s=n?[new jn(n,a).toLatLon().lon,new jn(n,a).toLatLon().lat,new jn(r,i).toLatLon().lon,new jn(r,i).toLatLon().lat].map((e=>Math.round(1e6*e)/1e6)):[new jn(l-500,o-500).toLatLon().lon,new jn(l-500,o-500).toLatLon().lat,new jn(l+500,o+500).toLatLon().lon,new jn(l+500,o+500).toLatLon().lat].map((e=>Math.round(1e6*e)/1e6)),c=l?[new jn(l,o).toLatLon().lon,new jn(l,o).toLatLon().lat].map((e=>Math.round(1e6*e)/1e6)):null;return{id:e,text:t,bbox:s,centre:c}})(t[0].GAZETTEER_ENTRY):null}},zn=n(93231);function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){var a,r,i;a=e,r=t,i=n[t],r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r),r in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Bn=(e,t)=>{t=t.replace(/,/g,"");const n=[...new Set([t,...t.trim().split(/[\s,\t,\n]+/)])].join("|"),a=new RegExp("("+n+")","i","g","gi");return{__html:e.replace(a,"<mark>$1</mark>")}};var Gn=class{constructor(e){this.tokenCallback=e}async suggest(e){var t;if(!e)return[];const n=(await this.tokenCallback()).token;let a=zn.jE.replace("{token}",n);var r;a=a.replace("{query}",encodeURI(e)).replace("{maxSuggestions}",(r=(r=e).replace(/\s/g,""),/^(([A-Z]{1,2}\d[A-Z\d]?|ASCN|STHL|TDCU|BBND|[BFS]IQQ|PCRN|TKCA) ?\d[A-Z]{2}|BFPO ?\d{1,4}|(KY\d|MSR|VG|AI)[ -]?\d{4}|[A-Z]{2} ?\d{2}|GE ?CX|GIR ?0A{2}|SAN ?TA1)$/i.test(r)?1:8));const i=await fetch(a),l=await i.json();if(l.error||null===(t=l.suggestions)||void 0===t||!t.length)return[];let o=l.suggestions.filter((e=>e.text.toLowerCase().includes("england, gbr")));return o=(e=>e.map((e=>Hn(Hn({},e),{},{text:e.text.replace(", England, GBR","")}))))(o),o.length?o.map((t=>((e,{text:t,magicKey:n})=>({id:n,text:t,marked:Bn(t,e)}))(e,t))):[]}async find(e,t){var n;if(!e)return null;const a=(await this.tokenCallback()).token;let r=zn.IY.replace("{token}",a);r=r.replace("{query}",encodeURI(e)).replace("{maxLocations}",8).replace("{magicKey}",t||"");const i=await fetch(r),l=await i.json();if(l.error||null===(n=l.candidates)||void 0===n||!n.length)return null;const o=l.candidates.filter((e=>"England"===e.attributes.Region));return o.length?(e=>{const{xmin:t,ymin:n,xmax:a,ymax:r}=e.extent,{x:i,y:l}=e.location,o=[t,n,a,r].map((e=>Math.round(1e6*e)/1e6)),s=[i,l].map((e=>Math.round(1e6*e)/1e6)),{PlaceName:c}=e.attributes;return{id:null,text:c,bbox:o,centre:s}})(o[0]):null}};function Wn(){return Wn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wn.apply(this,arguments)}function Vn({instigatorRef:e}){var t;const{isKeyboard:n,isMobile:a,isDesktop:r,options:i,search:l,activeRef:o,activePanel:s,activePanelHasFocus:c,legend:u}=Xt(),d=Xt().dispatch,m=tn().dispatch,{label:p,isAutocomplete:f,tokenCallback:h}=l,_="esri-world-geocoder"===l.provider?new Gn(h):new Fn(h),{id:y}=i,v=de(),b=de(),g=de(),[E,w]=se(gn,bn),M=a?null:u.keyWidth||u.width,N=l.isExpanded&&r,O=async(e,t)=>{const n=await _.find(e,t);if(!n)return;const{bbox:a,centre:r,zoom:i,text:l}=n;m({type:"SEARCH",bbox:a,centre:r,zoom:i,place:l})},k=()=>{d({type:"CLOSE"}),o.current=e.current};return hn(g,"touchstart",(e=>{var t;document.activeElement===g.current&&(g.current.blur(),null!==(t=v.current)&&void 0!==t&&t.contains(e.target)&&setTimeout((()=>g.current.focus()),0))})),ce((()=>{!N&&e&&c&&(o.current=g.current)}),[s]),ft.createElement("div",Wn({id:`${y}-search-form`,className:"fm-c-search"+(N?" fm-c-search--fixed":""),onKeyDown:t=>{["Escape","Esc"].includes(t.key)&&(t.preventDefault(),E.value||E.isVisible?w({type:"HIDE_SUGGESTIONS"}):w({type:"COLLAPSE",activeRef:e})),["ArrowDown","ArrowUp"].includes(t.key)&&E.suggestions.length>=1&&(t.preventDefault(),w({type:"REVIEW",key:t.key}))},onKeyUp:e=>{["Escape","Esc"].includes(e.key)&&(e.preventDefault(),k())}},N?{}:{"aria-labelledby":`${y}-search`,role:"dialog","aria-modal":!0,open:!0},M?{style:{width:M}}:{},{ref:v}),ft.createElement("div",{className:"fm-c-search__control"},ft.createElement("form",{role:"search",className:`fm-c-search__form${E.isFocusWithin?" fm-u-focus-within":""}${E.isFocusVisibleWithin?" fm-u-focus-visible-within":""}`,"aria-controls":`${y}-viewport`,onSubmit:e=>{e.preventDefault();const t=E.selected>=0?E.suggestions[E.selected]:null,n=(null==t?void 0:t.text)||E.value,a=null==t?void 0:t.id;w({type:"SUBMIT",value:n}),O(n,a)}},a?ft.createElement("button",{onClick:k,type:"button",className:"fm-c-btn fm-c-btn--search-back govuk-body-s","aria-label":"Close search"},ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"14",height:"20",viewBox:"0 0 14 20",fillRule:"evenodd",fill:"currentColor"},ft.createElement("path",{d:"M3.828 10l8.486 8.485-1.415 1.414L1 10 10.899.101l1.415 1.414L3.828 10z",strokeWidth:"0"}))):null,ft.createElement("label",{htmlFor:`${y}-search`,className:"fm-u-visually-hidden"},p),ft.createElement("input",Wn({id:`${y}-search`,className:"fm-c-search__input govuk-body-s",role:"combobox",type:"search"},E.value?{}:{"aria-describedby":`${y}-search-hint`},{"aria-owns":"fm-suggestions","aria-autocomplete":"list",autoComplete:"off",placeholder:p,name:`${y}-search`,spellCheck:"false",enterKeyHint:"search"},E.selected>=0?{"aria-activedescendant":`${y}-search-suggestion-${E.selected}`}:{},{value:E.value,onClick:()=>{w({type:"CLICK",isKeyboard:n,activeRef:g})},onChange:e=>{w({type:"CHANGE",value:e.target.value})},onFocus:()=>w({type:"FOCUS",isKeyboard:n}),onBlur:()=>w({type:"BLUR"}),ref:g})),ft.createElement("div",{id:`${y}-search-hint`,style:{display:"none"}},"When search results are available use up and down arrows to review and enter to select.  Touch device users, explore by touch or with swipe gestures."),a&&null!==(t=E.value)&&void 0!==t&&t.length?ft.createElement("button",{className:"fm-c-search__clear","aria-label":"Clear search",type:"button",onClick:()=>{w({type:"CLEAR",activeRef:g,isFocusVisibleWithin:n}),g.current.focus()},ref:b},ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor"},ft.createElement("path",{d:"M10,8.6L15.6,3L17,4.4L11.4,10L17,15.6L15.6,17L10,11.4L4.4,17L3,15.6L8.6,10L3,4.4L4.4,3L10,8.6Z",style:{fill:"currentColor",strokeWidth:"0"}}))):null,a||N?null:ft.createElement("button",{onClick:k,type:"button",className:"fm-c-btn fm-c-btn--search-close govuk-body-s","aria-label":"Close search"},ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor"},ft.createElement("path",{d:"M10,8.6L15.6,3L17,4.4L11.4,10L17,15.6L15.6,17L10,11.4L4.4,17L3,15.6L8.6,10L3,4.4L4.4,3L10,8.6Z",style:{fill:"currentColor",strokeWidth:"0"}}))),N?ft.createElement("button",{className:"fm-c-btn fm-c-btn--search govuk-body-s","aria-label":"Search"},ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",fill:"currentColor"},ft.createElement("path",{d:"M12.084 14.312c-1.117.711-2.444 1.123-3.866 1.123C4.235 15.435 1 12.201 1 8.218S4.235 1 8.218 1s7.217 3.235 7.217 7.218c0 1.422-.412 2.749-1.123 3.866L19 16.773 16.773 19l-4.689-4.688zM8.218 2.818c2.98 0 5.4 2.419 5.4 5.4s-2.42 5.4-5.4 5.4-5.4-2.42-5.4-5.4 2.419-5.4 5.4-5.4z"}))):null)),f?ft.createElement(wn,{id:y,state:E,dispatch:w,provider:_,updateViewport:O}):null)}function qn(){return qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qn.apply(this,arguments)}function Zn({className:e,label:t,isInset:n,isFixed:a,isNotObscure:r,isHideHeading:i,isModal:l,setIsModal:o,isOutsideInteract:s,instigatorRef:c,width:u,maxWidth:d,html:m,children:p}){const{options:f,isMobile:h,dispatch:_,obscurePanelRef:y,activeRef:v,activePanelHasFocus:b}=Xt(),{id:g}=f,E=de(null),w=de(null),[M,N]=oe(!1);s&&hn(E,"click",(()=>{O()}));const O=()=>{o&&o(!1),_({type:"CLOSE"}),y.current=null,v.current=c.current},k=`${g}-panel${e?"-"+e:""}`,S=!a&&c,P=u&&!(h&&n);return ce((()=>{_({type:"CONTAINER_READY"}),y.current=r?E.current:null,null!=c&&c.current&&b&&(v.current=E.current)}),[]),ce((()=>{(0,Jt.hL)()}),[l]),ce((()=>{var e,t,n;const a=null===(e=w.current)||void 0===e?void 0:e.offsetHeight,r=null===(t=w.current)||void 0===t?void 0:t.scrollHeight,i=null===(n=w.current)||void 0===n?void 0:n.querySelector("a, button");N(!i&&a<r)})),ft.createElement("div",qn({id:k,className:`fm-c-panel${e?" fm-c-panel--"+e:""}${n?" fm-c-panel--inset":""}${M?" fm-c-panel--has-body-focus":""}`,"aria-labelledby":`${k}-label`,role:c?"dialog":"region",ref:E,onBlur:e=>{var t,n;!h||null===(t=E.current)||void 0===t||!t.contains(e.target)||null!==(n=E.current)&&void 0!==n&&n.contains(e.relatedTarget)||_({type:"SET_IS_EXPANDED",value:!1})}},c?{open:!0,"aria-modal":l,onKeyDown:e=>{(0,Jt.SD)(e)},onKeyUp:e=>{["Escape","Esc"].includes(e.key)&&(e.preventDefault(),O())},onFocus:e=>{e.currentTarget===e.target&&(0,Jt.hL)()},tabIndex:"-1"}:{},!h&&P?{style:{width:u,maxWidth:d}}:{}),ft.createElement("div",{className:"fm-c-panel__header"+(i?" fm-c-panel__header--collapse":"")},ft.createElement("h2",{id:`${k}-label`,className:i?"fm-u-visually-hidden":"fm-c-panel__heading govuk-heading-s"},t),S?ft.createElement("button",{onClick:O,className:"fm-c-btn fm-c-btn--close-panel govuk-body-s","aria-label":"Close panel"},ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20"},ft.createElement("path",{d:"M10,8.6L15.6,3L17,4.4L11.4,10L17,15.6L15.6,17L10,11.4L4.4,17L3,15.6L8.6,10L3,4.4L4.4,3L10,8.6Z",style:{fill:"currentColor",stroke:"currentColor",strokeWidth:.1}}))):null),ft.createElement("div",qn({className:"fm-c-panel__body",ref:w},M?{tabindex:0}:{}),m?ft.createElement("div",{className:"fm-c-panel__content",dangerouslySetInnerHTML:{__html:m}}):null,p))}function Kn(){return Kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kn.apply(this,arguments)}function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){var a,r,i;a=e,r=t,i=n[t],r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r),r in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jn({id:e,group:t}){const{parent:n,mode:a,segments:r,legend:i,dispatch:l}=Xt(),{basemap:o,size:s}=tn(),c=tn().dispatch,[,u]=en("seg"),{display:d,heading:m,isHidden:p,isDetails:f}=t,[h,_]=oe(t.isExpanded),y=e=>{let t=r.filter((e=>!v.map((e=>e.id)).includes(e)));t.push(e.currentTarget.value),t=vt(i.segments,t);const d=bt(i.key,i.segments,t);l({type:"TOGGLE_SEGMENTS",segments:t,layers:d}),c({type:"CLEAR_FEATURES"}),_t.A.dispatch(n,ht.AZ.APP_CHANGE,{type:"segment",mode:a,basemap:o,size:s,segments:t,layers:d}),u(t.join(","))},v=t.items.map((e=>Xn(Xn({},e),{},{isChecked:r.includes(e.id)}))),b=v.find((e=>e.isChecked)).label;return ft.createElement("div",Kn({className:"fm-c-segments"+(d?" fm-c-segments--"+d:"")},p?{style:{display:"none"}}:{}),f?ft.createElement("button",{className:"fm-c-details govuk-body-s","aria-expanded":h,"aria-controls":`content-${e}`,onClick:()=>{_(!h)}},ft.createElement("span",{className:"fm-c-details__label"},ft.createElement("span",{className:"fm-c-details__label-focus"},m)),ft.createElement("span",{className:"fm-c-details__summary"},ft.createElement("span",{className:"fm-c-details__summary-focus"},b)),ft.createElement("span",{className:"fm-c-details__toggle"},ft.createElement("span",{className:"fm-c-details__toggle-focus"},ft.createElement("span",{className:"fm-c-details__chevron"}),h?"Hide":"Show"))):m?ft.createElement("h3",{id:`segment-${e}`,className:"fm-c-segments__heading govuk-body-s"},m):null,ft.createElement("div",Kn({id:`content-${e}`,className:"fm-c-segments__inner",role:"group"},m?{"aria-labelledby":`segment-${e}`}:{"aria-label":"Segments"}),v.map((t=>ft.createElement(M,{key:t.label.toLowerCase()},["timeline","segmented"].includes(d)?ft.createElement("button",{"aria-pressed":t.isChecked,className:"fm-c-segments__button govuk-body-s",value:t.id,onClick:y},["timeline","segmented"].includes(d)?null:ft.createElement("span",{className:"fm-c-segments__button-icon"}),ft.createElement("span",{className:"fm-c-segments__button-text",dangerouslySetInnerHTML:{__html:t.label}})):ft.createElement("div",{className:"fm-c-segments__item govuk-body-s"},ft.createElement("input",{className:"fm-c-segments__radio",defaultChecked:t.isChecked,id:t.id,name:`group-${e}`,type:"radio",value:t.id,onChange:y}),ft.createElement("label",{className:"fm-c-segments__label",htmlFor:t.id,dangerouslySetInnerHTML:{__html:t.label}})))))))}function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){var a,r,i;a=e,r=t,i=n[t],r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r),r in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ta(){const{segments:e,legend:t}=Xt();if(!t.segments)return;let n=t.segments.filter((t=>t.parentIds?t.parentIds.some((t=>e.includes(t))):t));return n=n.map((e=>{const t=!e.type&&e.heading&&e.collapse&&["expanded","collapse"].includes(e.collapse);return ea(ea({},e),{},{isDetails:t,isExpanded:t&&"expanded"===(null==e?void 0:e.collapse)})})),ft.createElement(ft.Fragment,null,n.map(((e,t)=>ft.createElement(M,{key:`gs${t}`},ft.createElement(Jn,{group:e,id:`s${t}`})))))}function na({id:e,label:t,isExpanded:n,setIsExpanded:a,isRemove:r}){const{activeRef:i}=Xt(),l=de(null);return ft.createElement(ft.Fragment,null,r&&n?null:ft.createElement("button",{className:"fm-c-btn-more","aria-controls":e,"aria-label":t,"aria-expanded":n,ref:l,onClick:()=>{if(a(!n),!r)return;const e=(0,Jt.Pt)(document.activeElement,"prev");i.current=e}},ft.createElement("span",{className:"fm-c-btn-more__chevron"}),t))}const{DOMParser:aa}=window,ra=(e,t,n,a=!1,r=1)=>{const i=e.includes("selected"),l=(new aa).parseFromString(n,"text/html"),o=l.querySelector("svg");o.classList.add("fm-c-symbol"),o.classList.toggle("fm-c-symbol--selected",i),o.classList.toggle("fm-c-symbol--dark",a);const s=o.getAttribute("viewBox"),c=s.split(" ")[2]*r,u=s.split(" ")[3]*r;o.setAttribute("width",c),o.setAttribute("height",u),t&&o.setAttribute("fill",t);const d=o.querySelectorAll('[fill="#0b0c0c" i], [style*="fill:#0b0c0c" i]'),m=o.querySelectorAll('[stroke="#0b0c0c" i], [style*="stroke:#0b0c0c" i]');d.forEach((e=>e.classList.add("fm-c-symbol__ol-fill"))),m.forEach((e=>e.classList.add("fm-c-symbol__ol-stroke")));const p=o.querySelectorAll('[fill="#fff" i], [fill="#ffffff" i], [style*="fill:#fff" i], [style*="fill:#ffffff" i]'),f=o.querySelectorAll('[stroke*="#fff" i], [stroke*="#ffffff" i], [style*="stroke:#fff" i], [style*="stroke:#ffffff" i]');p.forEach((e=>e.classList.add("fm-c-symbol__bg-fill"))),f.forEach((e=>e.classList.add("fm-c-symbol__bg-stroke")));const h=o.querySelectorAll(':not(.fm-c-symbol__ol-fill):not(.fm-c-symbol__bg-fill)[fill], :not(.fm-c-symbol__ol-fill):not(.fm-c-symbol__bg-fill)[style*="fill"]'),_=o.querySelectorAll(':not(.fm-c-symbol__ol-stroke):not(.fm-c-symbol__bg-stroke)[stroke], :not(.fm-c-symbol__ol-stroke):not(.fm-c-symbol__bg-stroke)[style*="stroke"]');return h.forEach((e=>e.classList.add("fm-c-symbol__fg-fill"))),_.forEach((e=>e.classList.add("fm-c-symbol__fg-stroke"))),l.body.innerHTML};function ia({item:e,display:t}){var n;const{basemap:a}=tn(),r=["dark","aerial"].includes(a),[i,l]=oe(null);ce((()=>{e.icon&&fetch(e.icon).then((e=>e.text())).then((t=>l({__html:ra(e.icon,s,t,r)})))}),[e.icon]);const o=null===(n=e.fill)||void 0===n?void 0:n.replace(/\s/g,"").split(",").map((e=>e.includes(":")?e:`default:${e}`)),s=null!=o&&o.length?(o.find((e=>e.includes(a)))||o[0]).split(":")[1]:null;return ft.createElement(ft.Fragment,null,"icon"===t?ft.createElement("div",{className:`fm-c-layers__image fm-c-layers__image--${t}`,dangerouslySetInnerHTML:i}):"fill"===t?ft.createElement("div",{className:`fm-c-layers__image fm-c-layers__image--${t}`},ft.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:s},ft.createElement("path",{d:"M8 8h24v24H8z"}))):"ramp"===t?ft.createElement("div",{className:`fm-c-layers__image fm-c-layers__image--${t}`},ft.createElement("svg",{viewBox:"0 0 5 5",preserveAspectRatio:"none",fill:s,stroke:s,strokeWidth:1},ft.createElement("path",{d:"M0 0h5v5H0z"}))):null)}function la(){return la=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},la.apply(this,arguments)}function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function sa({id:e,group:t,hasSymbols:n,hasInputs:a}){var r;const{parent:i,dispatch:l,mode:o,layers:s,segments:c}=Xt(),{basemap:u,size:d}=tn(),[,m]=en("lyr"),[p,f]=oe("collapse"!==(null==t?void 0:t.collapse)),h=e=>{const t=s,n=t.indexOf(e.currentTarget.value);"false"===e.currentTarget.getAttribute("aria-checked")?t.push(e.currentTarget.value):t.splice(n,1),y(t)},_=e=>{const t=s;w&&t.splice(t.indexOf(w),1),t.push(e.currentTarget.value),y(t)},y=e=>{l({type:"TOGGLE_LAYERS",layers:e}),_t.A.dispatch(i,ht.AZ.APP_CHANGE,{type:"layer",mode:o,basemap:u,size:d,segments:c,layers:e}),m(e.join(","))},v=a?t.layout:"column",b=a&&"column"!==v&&t.heading&&["expanded","collapse"].includes(t.collapse),g="column"===v&&"ramp"===t.display?t.items.length:Math.min(t.items.length,4),E=t.heading||t.label,w=null===(r=t.items.find((e=>null==s?void 0:s.includes(e.id))))||void 0===r?void 0:r.id,N=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(n),!0).forEach((function(t){var a,r,i;a=e,r=t,i=n[t],r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r),r in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},"column"===v?{style:{gridTemplateColumns:t.items.length>=4?`repeat(auto-fit, minmax(${Math.round(250/g)}px, auto))`:"repeat(3, 1fr)"}}:{}),O=t.items.reduce(((e,{label:n,id:a})=>[...e,...("radio"===(null==t?void 0:t.type)?a===w:null==s?void 0:s.includes(a))?[n]:[]]),[]).join(", ").replace(/, ([^,]*)$/,", $1")||"None selected";return ft.createElement("div",{className:`fm-c-layers__group fm-c-layers__group--${v||"row"}${t.numLabels?" fm-c-layers__group--custom-labels":""}`,role:"group","aria-label":E},b?ft.createElement("button",{className:"fm-c-details govuk-body-s","aria-expanded":p,"aria-controls":`content-${e}`,onClick:e=>{f(!p)}},ft.createElement("span",{className:"fm-c-details__label"},ft.createElement("span",{className:"fm-c-details__label-focus"},E)),ft.createElement("span",{className:"fm-c-details__summary"},ft.createElement("span",{className:"fm-c-details__summary-focus"},O)),ft.createElement("span",{className:"fm-c-details__toggle"},ft.createElement("span",{className:"fm-c-details__toggle-focus"},ft.createElement("span",{className:"fm-c-details__chevron"}),p?"Hide":"Show"))):E?ft.createElement("h3",{className:"fm-c-layers__heading govuk-body-s","aria-hidden":"true"},E):null,ft.createElement("div",la({id:`content-${e}`,className:`fm-c-layers__${v||"row"}s`},N),t.items.map(((r,i)=>{var l;const o=t.display||(r.icon?"icon":r.fill?"fill":null),c="radio"===(null==t?void 0:t.type)?(null==r?void 0:r.id)===w:null==s?void 0:s.includes(r.id);return ft.createElement(M,{key:(r.id||r.label).toLowerCase()},ft.createElement("div",{className:`fm-c-layers__item fm-c-layers__item--${o} govuk-body-s`},a&&"radio"===t.type?ft.createElement(ft.Fragment,null,ft.createElement("input",{className:"fm-c-layers__radio",defaultChecked:c,id:r.id,name:`group-${e}`,type:"radio",value:r.id,onChange:_}),ft.createElement("label",{className:"fm-c-layers__label",htmlFor:r.id},n?ft.createElement(ia,{display:o,item:r}):null,ft.createElement("span",{className:"fm-c-layers__text",dangerouslySetInnerHTML:{__html:r.label}}))):a&&r.id?ft.createElement("button",{className:"fm-c-layers__button",role:"switch","aria-checked":c,value:r.id,onClick:h},n?ft.createElement(ia,{display:o,item:r}):null,ft.createElement("span",{className:"fm-c-layers__text",dangerouslySetInnerHTML:{__html:r.label}})):ft.createElement(ft.Fragment,null,n?ft.createElement(ia,{display:o,item:r}):null,ft.createElement("span",{className:t.numLabels&&i%t.numLabels!=0?"fm-u-visually-hidden":"fm-c-layers__text",dangerouslySetInnerHTML:{__html:r.label}}))),n?null===(l=r.items)||void 0===l?void 0:l.map(((e,t)=>{const n=r.display||(e.icon?"icon":"fill");return ft.createElement("div",{key:`${r.label.toLowerCase()}-${t}`,className:`fm-c-layers__item fm-c-layers__item--${n} govuk-body-s`},ft.createElement(ia,{display:n,item:e}),ft.createElement("span",{className:"fm-c-layers__text",dangerouslySetInnerHTML:{__html:e.label}}))})):null)}))))}function ca({hasSymbols:e,hasInputs:t,isExpanded:n,setIsExpanded:a}){var r;const{segments:i,options:l,activeRef:o,layers:s}=Xt();if(null===(r=l.legend)||void 0===r||!r.key)return;const{zoom:c}=tn(),{id:u,legend:d}=l,{display:m,keyDisplay:p}=d;ce((()=>{if(!n)return;const e=o.current,t=(0,Jt.Pt)(e,"next");null==t||t.focus()}),[n]);const f="min"===p&&n?"Fewer layers":"All layers",h="inset"===m&&"min"===p?0:d.key.length,_=gt(d.key,i,s,c,t),y=!t&&!_.length;return ft.createElement("div",{id:`${u}-key`,className:"fm-c-layers"},_.map(((a,r)=>ft.createElement(M,{key:`fl${r}`},n||!n&&r<=h?ft.createElement(sa,{key:`lg${r}`,group:a,id:`l${r}`,display:m,hasSymbols:e,hasInputs:t}):null))),h<_.length-1?ft.createElement("div",{className:"fm-c-layers__more fm-c-layers__more--centre"},ft.createElement(na,{id:`${u}-key`,label:f,isExpanded:n,setIsExpanded:a,isRemove:!0})):null,y?ft.createElement("p",{className:"govuk-body-s govuk-!-margin-bottom-0"},"No features displayed"):null)}function ua(){return ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ua.apply(this,arguments)}function da(){const{provider:e,parent:t,queryPolygon:n,mode:a,segments:r,layers:i,dispatch:l,query:o}=Xt();if(!n)return;const{size:s,basemap:c}=tn();return ft.createElement("div",{className:"fm-c-draw"},ft.createElement("button",ua({className:"fm-c-btn-draw govuk-body-s"},"frame"===a?{"aria-disabled":!0}:{},{onClick:()=>{var a;null!==(a=e.draw)&&void 0!==a&&a.start?e.draw.start():e.initDraw(n,o),l({type:"SET_MODE",value:"frame",query:o,isFrameVisible:!o}),_t.A.dispatch(t,ht.AZ.APP_CHANGE,{type:"mode",mode:"frame",basemap:c,size:s,segments:r,layers:i})}}),o?n.editLabel:n.startLabel))}function ma(){const{options:e,provider:t,activeRef:n}=Xt(),{id:a}=e,{basemaps:r,stylesImagePath:i,getImagePos:l,hasSize:o}=t,{basemap:s,size:c}=tn(),u=tn().dispatch,d=s,m=c,p=de([]),[f,h]=oe(r.indexOf(d)>2||"small"!==c);p.current=r.map(((e,t)=>{var n;return null!==(n=p.current[t])&&void 0!==n?n:w()}));const _=(f?"Fewer":"More")+" styles",y=e=>{n.current=null;const t=e.currentTarget.value;u({type:"SET_BASEMAP",basemap:t})},v=e=>{n.current=null;const t=e.currentTarget.value;u({type:"SET_SIZE",size:t})};return ce((()=>{if(!f)return;const e=p.current.length<3?p.current.length-1:2,t=p.current[e].current;(0,Jt.Pt)(t,"next").focus()}),[f]),ft.createElement("div",{id:"map-styles",className:"fm-c-layers fm-c-layers--style"},ft.createElement("div",{className:"fm-c-layers__group",role:"group","aria-labelledby":`${a}-map-panel-label`},ft.createElement("div",{className:"fm-c-layers__columns"},r.filter(((e,t)=>f?t>=0:t<3)).map(((e,t)=>ft.createElement("div",{key:t,className:"fm-c-layers__item govuk-body-s"},ft.createElement("button",{className:"fm-c-layers__button",value:e,"aria-pressed":d===e,ref:p.current[t],onClick:y},ft.createElement("div",{className:"fm-c-layers__image"},ft.createElement("img",{src:i,draggable:!1,width:"120px",height:"120px",alt:"",style:{objectPosition:l(e)}})),{default:"Default",dark:"Dark",aerial:"Aerial",deuteranopia:"Green-red enhanced",tritanopia:"Blue-yellow enhanced","high-contrast":"High contrast"}[e])))))),o&&f?ft.createElement("div",{className:"fm-c-layers__group",role:"group","aria-labelledby":`${a}-text-sizes`},ft.createElement("div",{id:`${a}-text-sizes`,className:"fm-c-layers__header"},ft.createElement("h3",{className:"fm-c-layers__heading govuk-body-s"},"Text size")),ft.createElement("div",{className:"fm-c-layers__columns"},["small","large"].map(((e,t)=>ft.createElement("div",{key:t,className:"fm-c-layers__item govuk-body-s"},ft.createElement("button",{className:"fm-c-layers__button",value:e,"aria-pressed":m===e,onClick:v},ft.createElement("div",{className:"fm-c-layers__image"},ft.createElement("img",{src:i,draggable:!1,width:"120px",height:"120px",alt:"",style:{objectPosition:l(e)}})),e[0].toUpperCase()+e.slice(1))))))):null,r.length>3||t.hasSize?ft.createElement("div",{className:"fm-c-layers__more fm-c-layers__more--centre"},ft.createElement(na,{id:`${a}-styles`,label:_,isExpanded:f,setIsExpanded:h,isRemove:!0})):null)}function pa(){return ft.createElement("dl",{className:"fm-c-keyboard-list govuk-body-s"},ft.createElement("div",{className:"fm-u-visually-hidden"},ft.createElement("dt",null,"Get location information"),ft.createElement("dd",null,ft.createElement("kbd",null,"Alt")," + ",ft.createElement("kbd",null,"I"))),ft.createElement("div",{className:"fm-c-keyboard-list__item"},ft.createElement("dt",null,"Move in large steps"),ft.createElement("dd",null,ft.createElement("kbd",null,"←"),", ",ft.createElement("kbd",null,"↑"),", ",ft.createElement("kbd",null,"→")," or ",ft.createElement("kbd",null,"↓"))),ft.createElement("div",{className:"fm-c-keyboard-list__item"},ft.createElement("dt",null,"Move in small steps"),ft.createElement("dd",null,ft.createElement("kbd",null,"Shift")," + ",ft.createElement("kbd",null,"←"),", ",ft.createElement("kbd",null,"↑"),", ",ft.createElement("kbd",null,"→")," or ",ft.createElement("kbd",null,"↓"))),ft.createElement("div",{className:"fm-c-keyboard-list__item"},ft.createElement("dt",null,"Adjust zoom level"),ft.createElement("dd",null,ft.createElement("kbd",null,"+")," or ",ft.createElement("kbd",null,"=")," and ",ft.createElement("kbd",null,"-")," or ",ft.createElement("kbd",null,"_"))),ft.createElement("div",{className:"fm-c-keyboard-list__item"},ft.createElement("dt",null,"Select a feature"),ft.createElement("dd",null,ft.createElement("kbd",null,"Page Up")," and ",ft.createElement("kbd",null,"Page Down"))),ft.createElement("div",{className:"fm-c-keyboard-list__item"},ft.createElement("dt",null,"Get feature information"),ft.createElement("dd",null,ft.createElement("kbd",null,"Enter"))))}function fa(){return fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fa.apply(this,arguments)}function ha({legendBtnRef:e}){const{isEditMode:t,isMobile:n,dispatch:a,legend:r,activePanel:i}=Xt();if(r)return ft.createElement("button",fa({onClick:()=>{a({type:"OPEN",data:"LEGEND"})},"aria-label":r.title||"Layers",className:"fm-c-btn fm-c-btn--legend govuk-body-s",ref:e,"aria-expanded":!1},"LEGEND"===i?{style:{display:"none"}}:{}),ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",fill:"currentColor"},ft.createElement("path",{d:"M10 1l10 7-10 7L0 8l10-7zm0 2.441L3.488 8 10 12.559 16.512 8 10 3.441zm8.256 7.338L20 12l-10 7-10-7 1.744-1.221L10 16.559l8.256-5.78z"})),ft.createElement("span",fa({className:"fm-c-btn__label","aria-hidden":!0},n&&t?{style:{display:"none"}}:{}),r.title||"Layers"))}function _a(){return _a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_a.apply(this,arguments)}function ya({keyBtnRef:e}){const{isEditMode:t,isMobile:n,dispatch:a,legend:r,activePanel:i}=Xt();if(r)return ft.createElement("button",_a({onClick:()=>{a({type:"OPEN",data:"KEY"})},"aria-label":"Key",className:"fm-c-btn fm-c-btn--key govuk-body-s",ref:e,"aria-expanded":!1},"KEY"===i?{style:{display:"none"}}:{}),ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",fill:"currentColor"},ft.createElement("circle",{cx:"3.5",cy:"4",r:"1.5"}),ft.createElement("circle",{cx:"3.5",cy:"10",r:"1.5"}),ft.createElement("circle",{cx:"3.5",cy:"16",r:"1.5"}),ft.createElement("path",{d:"M7 4h11M7 10h11M7 16h11",fill:"none",stroke:"currentColor",strokeWidth:"2"})),ft.createElement("span",_a({className:"fm-c-btn__label","aria-hidden":!0},n&&t?{style:{display:"none"}}:{}),"Key"))}function va(){const{provider:e,parent:t,queryPolygon:n,mode:a,segments:r,layers:i,dispatch:l,viewportRef:o,query:s}=Xt(),{size:c,basemap:u}=tn();if(a)return ft.createElement("button",{onClick:()=>{const n=e.draw.finish();l({type:"SET_MODE",value:"default",query:n,isFrameVisible:!1}),_t.A.dispatch(t,ht.AZ.APP_CHANGE,{type:"mode",mode:"default",basemap:u,size:c,segments:r,layers:i}),o.current.focus()},className:"fm-c-btn fm-c-btn--primary govuk-body-s"},s?n.updateLabel:n.addLabel)}function ba(){return ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ba.apply(this,arguments)}function ga({ariaLabelledby:e,searchBtnRef:t}){const{dispatch:n,search:a,activePanel:r}=Xt();if(a)return ft.createElement("button",ba({onClick:()=>{n({type:"OPEN",data:"SEARCH"})},className:"fm-c-btn fm-c-btn--search govuk-body-s","aria-labelledby":e,"aria-expanded":"SEARCH"===r},"SEARCH"===r?{style:{display:"none"}}:{},{ref:t}),ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",fill:"currentColor"},ft.createElement("path",{d:"M12.084 14.312c-1.117.711-2.444 1.123-3.866 1.123C4.235 15.435 1 12.201 1 8.218S4.235 1 8.218 1s7.217 3.235 7.217 7.218c0 1.422-.412 2.749-1.123 3.866L19 16.773 16.773 19l-4.689-4.688zM8.218 2.818c2.98 0 5.4 2.419 5.4 5.4s-2.42 5.4-5.4 5.4-5.4-2.42-5.4-5.4 2.419-5.4 5.4-5.4z"})))}function Ea({ariaLabelledby:e,stylesBtnRef:t}){const{provider:n,dispatch:a}=Xt(),{basemaps:r}=n;return ft.createElement(ft.Fragment,null,(null==r?void 0:r.length)>1?ft.createElement("button",{onPointerDown:e=>{0===e.button&&a({type:"OPEN",data:"STYLE"})},onKeyDown:e=>{["Enter","Space"].includes(e.key)&&a({type:"OPEN",data:"STYLE"})},className:"fm-c-btn fm-c-btn--style govuk-body-s","aria-labelledby":e,ref:t},ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",strokeLinejoin:"round",fill:"none",stroke:"currentColor",strokeWidth:"2"},ft.createElement("path",{d:"M2 18l5-2 6 2 5-2V2l-5 2-6-2-5 2v14z"}),ft.createElement("path",{d:"M7 2v14m6-12v14",strokeLinecap:"round"}))):null)}function wa({id:e,position:t,text:n,cssModifier:a,children:r}){const{isKeyboard:i}=Xt(),[l,o]=oe(!1),[s,c]=oe(!1),u=de(null),d=de(null),m=()=>{u.current&&clearTimeout(u.current),o(!1)},p=()=>{u.current=setTimeout((()=>o(!0)),500)},f=e=>{var t;const n=null===(t=d.current)||void 0===t?void 0:t.contains(document.activeElement);(["Escape","Esc"].includes(e.key)||n)&&m()};return ce((()=>(document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}))),ft.createElement("div",{className:`fm-c-tooltip fm-c-tooltip--${t}${a?" fm-c-tooltip--"+a:""}${l?" fm-c-tooltip--visible":""}${s?" fm-u-focus-within":""}`,onMouseEnter:p,onMouseLeave:m,onMouseDown:m,onFocus:i?p:null,onBlur:m,onKeyDown:e=>{c(!1)},onKeyUp:e=>{c(!0)},ref:d},r,ft.createElement("div",{id:e,className:"fm-c-tooltip__label",role:"tooltip"},ft.createElement("div",{className:"fm-c-tooltip__label-inner govuk-body-s"},n)))}function Ma(){const{options:e}=Xt(),{id:t,maxZoom:n,minZoom:a}=e,{zoom:r,action:i}=tn(),l=tn().dispatch;return ce((()=>{["ZOOM_IN","ZOOM_OUT"].includes(i)&&l({type:"MOVEEND"})}),[i]),ft.createElement("div",{className:"fm-c-zoom"},ft.createElement(wa,{id:`${t}-zoom-in-label`,position:"left",text:"Zoom in"},ft.createElement("button",{onClick:()=>{l({type:"ZOOM_IN"})},className:"fm-c-btn fm-c-btn--zoom-in govuk-body-s","aria-disabled":r>=n,"aria-labelledby":`${t}-zoom-in-label`,"aria-controls":`${t}-viewport`},ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",style:{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}},ft.createElement("rect",{x:"3",y:"9",width:"14",height:"2"}),ft.createElement("rect",{x:"9",y:"3",width:"2",height:"14"})))),ft.createElement(wa,{id:`${t}-zoom-out-label`,position:"left",text:"Zoom out"},ft.createElement("button",{onClick:()=>{l({type:"ZOOM_OUT"})},className:"fm-c-btn fm-c-btn--zoom-out govuk-body-s","aria-disabled":r<=a,"aria-labelledby":`${t}-zoom-out-label`,"aria-controls":`${t}-viewport`,"data-fm-zoom-out-btn":!0},ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",style:{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}},ft.createElement("rect",{x:"3",y:"9",width:"14",height:"2"})))))}function Na(){const{id:e}=Xt().options,{bbox:t,oCentre:n,rZoom:a,centre:r,zoom:i}=tn(),l=tn().dispatch,[o,s]=oe(!1);return ce((()=>{const e=JSON.stringify(n)===JSON.stringify(r);s(n&&r&&a&&i&&!(e&&a===i))}),[t]),ft.createElement("button",{onClick:()=>{o&&l({type:"RESET"})},className:"fm-c-btn fm-c-btn--reset govuk-body-s","aria-label":"Reset map area","aria-disabled":!o,"aria-controls":`${e}-viewport`},ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd"},ft.createElement("path",{d:"M2.054 7.871L5.25 1.407l4 6.928-7.196-.464z"}),ft.createElement("path",{d:"M7.25 4.871A6.46 6.46 0 0 1 10.5 4c3.587 0 6.5 2.913 6.5 6.5S14.087 17 10.5 17 4 14.087 4 10.5",fill:"none",stroke:"currentColor",strokeWidth:"2"})))}const{sessionStorage:Oa}=window;function ka({ariaLabelledby:e}){const{provider:t,options:n}=Xt(),{id:a}=n,r=Xt().dispatch,i=tn().dispatch,l=(e,t)=>{const n=!!Oa.getItem("geoloc");Oa.setItem("geoloc",JSON.stringify({coord:e,place:t})),n||i({type:"GEOLOC",centre:e,place:t})},o=e=>{i({type:"CLEAR_STATUS"}),r({type:"ERROR",label:"Can't get location",message:e.message})};return ft.createElement("button",{onClick:()=>{const e=JSON.parse(Oa.getItem("geoloc"));e?i({type:"GEOLOC",centre:e.coord,place:e.place}):(t.getGeoLocation(l,o),i({type:"UPDATE_STATUS",status:"Getting location",isStatusVisuallyHidden:!1}))},className:"fm-c-btn fm-c-btn--location","aria-labelledby":e,"aria-controls":`${a}-viewport`},ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd"},ft.createElement("g",{fill:"none",stroke:"currentColor",strokeWidth:"2"},ft.createElement("circle",{cx:"10",cy:"10",r:"6"}),ft.createElement("path",{d:"M10 4V1m0 18v-3m6-6h3M1 10h3",strokeLinecap:"butt"})),ft.createElement("circle",{cx:"10",cy:"10",r:"3",fill:"currentColor"})))}function Sa(){const{provider:e}=Xt();if(!e)return;const t=e.attribution;return ft.createElement(ft.Fragment,null,null!=t&&t.logo&&null!=t&&t.label?ft.createElement("img",{className:"fm-c-attribution",alt:t.label,src:t.logo,width:"90",height:"24",style:{pointerEvents:"auto",display:"block"}}):ft.createElement("span",{className:"fm-c-spacer"}))}function Pa(){const{message:e}=Xt().error;return ft.createElement("p",null,e)}function xa(){const{options:e}=Xt(),{id:t}=e;return ft.createElement("div",{id:`${t}-viewport-label`,className:"fm-c-panel fm-c-panel--viewport-label govuk-body-s"},ft.createElement("span",{className:"fm-u-visually-hidden"},"Interactive map. "),ft.createElement("kbd",null,"Alt")," + ",ft.createElement("kbd",null,"K")," ",ft.createElement("span",{className:"fm-u-visually-hidden"},"Show")," keyboard controls",ft.createElement("span",{className:"fm-u-visually-hidden"},"."))}function Ta({cancelBtnRef:e}){const{provider:t,parent:n,segments:a,layers:r,dispatch:i,viewportRef:l}=Xt(),{size:o,basemap:s}=tn();return ft.createElement("button",{onClick:()=>{t.draw.cancel(),i({type:"SET_MODE",value:"default",isFrameVisible:!1}),_t.A.dispatch(n,ht.AZ.APP_CHANGE,{type:"mode",mode:"default",basemap:s,size:o,segments:a,layers:r}),l.current.focus()},"aria-label":"Cancel",className:"fm-c-btn fm-c-btn--secondary govuk-body-s",ref:e},"Cancel")}function La(){return La=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},La.apply(this,arguments)}function Ra(){const{provider:e,mode:t,dispatch:n}=Xt();if(t)return ft.createElement("div",{className:"fm-o-viewport-controls"},ft.createElement("button",La({onClick:()=>{e.draw.edit(),n({type:"SET_MODE",value:"draw",isFrameVisible:!1})},className:"fm-c-btn fm-c-btn--edit govuk-body-s"},"draw"===t?{style:{display:"none"}}:{}),ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",fill:"none",stroke:"currentColor",strokeWidth:"2"},ft.createElement("path",{d:"M16 6v7.996M14 16H6m-2-2.004V6m2-2h8"}),ft.createElement("circle",{cx:"4",cy:"4",r:"2"}),ft.createElement("circle",{cx:"4",cy:"15.996",r:"2"}),ft.createElement("circle",{cx:"16",cy:"4",r:"2"}),ft.createElement("circle",{cx:"16",cy:"15.996",r:"2"})),"Edit shape"),ft.createElement("button",La({onClick:()=>{e.draw.reset(),n({type:"SET_MODE",value:"frame",isFrameVisible:!0})},className:"fm-c-btn fm-c-btn--edit govuk-body-s"},"frame"===t?{style:{display:"none"}}:{}),ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",fill:"none",stroke:"currentColor",strokeWidth:"2"},ft.createElement("rect",{x:"2",y:"2",width:"16",height:"16"})),"Use box"))}function Ca(){const{queryPolygon:e}=Xt();return ft.createElement("button",{className:"fm-c-btn fm-c-btn--primary govuk-body-s"},e.submitLabel)}function ja(){return ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ja.apply(this,arguments)}function Da({instigatorRef:e,focusRef:t,heading:n,body:a}){const{isMobile:r,dispatch:i,options:l,activeRef:o,viewportRef:s,isDesktop:c}=Xt(),{id:u,legend:d}=l,m=de(null),p=r||"inset"!==d.display&&!c;hn(m,"click",(e=>{var t;c||e.target!==(null==s||null===(t=s.current)||void 0===t?void 0:t.querySelector("canvas"))||f()}));const f=()=>{i({type:"CLOSE"}),o.current=null==e?void 0:e.current};ce((()=>{o.current=(null==t?void 0:t.current)||m.current}),[]),ce((()=>{(0,Jt.hL)()}),[p]);const h=`${u}-panel-help`,_=d.width&&!(r&&"inset"===d.display);return ft.createElement("div",ja({id:h,className:"fm-c-panel fm-c-panel--help","aria-labelledby":`${h}-label`,role:p?"dialog":"region"},p?{open:!0,"aria-modal":!0}:{},{ref:m,onBlur:e=>{r&&m.current.contains(e.target)&&!m.current.contains(e.relatedTarget)&&i({type:"SET_IS_EXPANDED",value:!1})},onKeyUp:e=>{["Escape","Esc"].includes(e.key)&&(e.preventDefault(),f())},tabIndex:"-1"},_?{style:{width:d.width}}:{}),ft.createElement("div",{className:"fm-c-panel__header"},ft.createElement("h2",{id:`${h}-label`,className:"fm-c-panel__heading govuk-heading-m"},n),c?null:ft.createElement("button",{onClick:f,className:"fm-c-btn fm-c-btn--close-panel govuk-body-s","aria-label":"Close panel"},ft.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20"},ft.createElement("path",{d:"M10,8.6L15.6,3L17,4.4L11.4,10L17,15.6L15.6,17L10,11.4L4.4,17L3,15.6L8.6,10L3,4.4L4.4,3L10,8.6Z",style:{fill:"currentColor",stroke:"currentColor",strokeWidth:.1}})))),ft.createElement("div",{className:"fm-c-panel__body"},ft.createElement("div",{className:"fm-c-panel__content",dangerouslySetInnerHTML:{__html:a}})))}function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Aa.apply(this,arguments)}function $a({helpBtnRef:e}){const{dispatch:t,activePanel:n}=Xt();return ft.createElement("button",Aa({onClick:()=>{t({type:"OPEN",data:"HELP"})},className:"fm-c-btn fm-c-btn--help govuk-body-s",ref:e,"aria-expanded":!1},"HELP"===n?{style:{display:"none"}}:{}),ft.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd"},ft.createElement("circle",{cx:"10",cy:"10",r:"8.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),ft.createElement("path",{d:"M10.935 11.673H8.708v-.223c0-1.997 2.445-2.651 2.085-3.597-.175-.46-1.57-.837-1.757.843l-2.273-.281c.407-4.359 7.331-3.069 6.405.161-.025.09-.143.502-.625.986-1.252 1.258-1.608 1.111-1.608 2.111zm-2.303.592h2.385v2.104H8.632z"})),"Help")}function Ia(){return Ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ia.apply(this,arguments)}function Fa(){const{dispatch:e,provider:t,options:n,parent:a,info:r,search:i,queryPolygon:l,mode:o,activePanel:s,isPage:c,isMobile:u,isDesktop:d,activeRef:m,viewportRef:p,query:f,error:h}=Xt(),{id:_}=n,y=de(null),v=de(null),b=de(null),g=de(null),E=de(null),w=de(null),M=de(null),[N,O]=oe(),k=ht.W0.container[n.type||ht.NT.CONTAINER_TYPE].CLASS,S=u?"mobile":d?"desktop":"tablet",P=c||n.target?"100%":n.height||ht.W0.container[n.type].HEIGHT,x=n.legend,T="inset"===(null==x?void 0:x.display),L=!T&&d,R=!L&&(!T||T&&N),C=!("inset"===x.display||L&&c),j=["frame","draw"].includes(o),D=x&&!j&&!(d&&!T),A=x&&!j&&!x.display,$=T&&c||!!i||D&&["INFO","KEY"].includes(s)||A&&"KEY"!==s,I=j&&!(d&&!T),F=!j&&c&&!(d&&!T),z=!j&&i&&!(d&&null!=i&&i.isExpanded),U=!j&&("SEARCH"===s||d&&(null==i?void 0:i.isExpanded)),H=!j&&f&&"INFO"!==s;return ce((()=>{_t.A.on(a,ht.AZ.SET_INFO,(t=>{e({type:"SET_INFO",data:t})})),_t.A.on(a,ht.AZ.SET_SELECTED,(t=>{e({type:"SET_SELECTED",id:t})})),_t.A.on(a,ht.AZ.SET_DRAW,(t=>{e({type:"SET_DRAW",data:t})})),r||null!=x&&x.isVisible||e({type:"CONTAINER_READY"})}),[]),ce((()=>{var e;null===(e=m.current)||void 0===e||e.focus(),(0,Jt.ar)(),(0,Jt.hL)()}),[c,s]),ft.createElement(Yt,{options:n},ft.createElement("div",Ia({className:`fm-o-container fm-${S} ${k}${j?" fm-draw":""}`,onKeyDown:Jt.SD,style:{height:P,width:"100%"}},c?{"data-fm-page":n.pageTitle||"Map view"}:{},{"data-fm-container":""}),d&&!T?ft.createElement("div",{className:"fm-o-side"},!j&&c?ft.createElement(fn,null):null,j?ft.createElement(Da,{focusRef:w,heading:l.helpLabel,body:l.html}):ft.createElement(Zn,{className:"legend",label:x.title,width:x.width,isFixed:L,isHideHeading:!C},ft.createElement(da,null),ft.createElement(ta,null),ft.createElement(ca,{hasSymbols:!!x.display,hasInputs:!0,isExpanded:N,setIsExpanded:O}))):null,ft.createElement("div",{className:"fm-o-main"},ft.createElement(pn,null),ft.createElement("div",{className:`fm-o-inner${T?" fm-o-inner--inset":""}${$?" fm-o-inner--offset-top":""}`},ft.createElement("div",{className:"fm-o-top"},ft.createElement("div",{className:"fm-o-top__column"},F?ft.createElement(fn,null):null,!u&&z?ft.createElement(wa,{id:`${_}-search-label`,position:"below",text:"Show search"},ft.createElement(ga,{ariaLabelledby:`${_}-search-label`,searchBtnRef:b})):null,!u&&U?ft.createElement(Vn,{instigatorRef:b}):null,D?ft.createElement(ha,{legendBtnRef:y}):null,A?ft.createElement(ya,{keyBtnRef:v}):null,I?ft.createElement($a,{helpBtnRef:E,label:l.helpLabel}):null),ft.createElement("div",{className:"fm-o-top__column"},ft.createElement(xa,null),j?ft.createElement(Ra,null):null),ft.createElement("div",{className:"fm-o-top__column"},u&&z?ft.createElement(wa,{id:`${_}-search-label`,position:"left",text:"Show search"},ft.createElement(ga,{ariaLabelledby:`${_}-search-label`,searchBtnRef:b})):null,u&&U?ft.createElement(Vn,{instigatorRef:b}):null)),"KEY"!==s||u?null:ft.createElement(Zn,{isInset:!0,isNotObscure:!1,className:"key",label:"Key",width:x.keyWidth||x.width,instigatorRef:v,isModal:N,setIsModal:O},ft.createElement(ca,{hasSymbols:!0,hasInputs:!1,isExpanded:N,setIsExpanded:O})),r&&"INFO"===s&&!u?ft.createElement(Zn,{className:"info",isInset:!0,isNotObscure:!0,label:r.label,width:r.width,html:r.html,instigatorRef:p,isModal:!1}):null,"LEGEND"!==s||u&&T||d&&!T?null:ft.createElement(Zn,{className:"legend",isNotObscure:!1,label:x.title,width:x.width,instigatorRef:y,isInset:T,isModal:R,setIsModal:O,isHideHeading:!C},ft.createElement(da,null),ft.createElement(ta,null),ft.createElement(ca,{hasSymbols:!!x.display,hasInputs:!0,isExpanded:N,setIsExpanded:O})),"HELP"!==s||u&&T||d&&!T?null:ft.createElement(Da,{instigatorRef:E,heading:l.helpLabel,body:l.html}),ft.createElement("div",{className:"fm-o-bottom"},ft.createElement("div",{className:"fm-o-footer"},ft.createElement(Sa,null),j&&!u?ft.createElement("div",{className:"fm-o-actions"},ft.createElement(va,null),ft.createElement(Ta,{cancelBtnRef:w})):null,H&&!u?ft.createElement("div",{className:"fm-o-actions"},ft.createElement(Ca,null)):null,ft.createElement("div",Ia({className:"fm-o-buttons"},"STYLE"===s?{style:{display:"none"}}:{}),n.hasReset?ft.createElement(Na,null):null,n.hasGeoLocation?ft.createElement(wa,{id:`${_}-location-label`,position:"left",text:"Use your location"},ft.createElement(ka,{ariaLabelledby:`${_}-location-label`,provider:t})):null,u?null:ft.createElement(Ma,null),t.basemaps&&Object.keys(null==t?void 0:t.basemaps).length?ft.createElement(wa,{id:`${_}-style-label`,position:"left",cssModifier:"style",text:"Choose map style"},ft.createElement(Ea,{ariaLabelledby:`${_}-style-label`,stylesBtnRef:g})):null)),r&&"INFO"===s&&u?ft.createElement(Zn,{isInset:!0,isNotObscure:!0,className:"info",label:r.label,html:r.html,instigatorRef:p,isModal:!1}):null,"KEY"===s&&u?ft.createElement(Zn,{isInset:!0,isNotObscure:!0,className:"key",label:"Key",instigatorRef:v,isModal:N,setIsModal:O},ft.createElement(ca,{hasSymbols:!0,hasInputs:!1,isExpanded:N,setIsExpanded:O})):null,"LEGEND"===s&&u&&T?ft.createElement(Zn,{className:"legend",isNotObscure:!0,label:x.title,width:x.width,instigatorRef:y,isInset:T,isFixed:L,isModal:R,setIsModal:O,isHideHeading:!C},ft.createElement(da,null),ft.createElement(ta,null),ft.createElement(ca,{hasSymbols:!0,hasInputs:!0,isExpanded:N,setIsExpanded:O})):null,j&&u?ft.createElement("div",{className:"fm-o-actions"},ft.createElement(va,null),ft.createElement(Ta,{cancelBtnRef:w})):null,H&&u?ft.createElement("div",{className:"fm-o-actions"},ft.createElement(Ca,null)):null)),"STYLE"===s?ft.createElement(Zn,{isInset:!0,label:"Map style",instigatorRef:g,width:"400px",isModal:!0},ft.createElement(ma,null)):null,["KEYBOARD","ERROR"].includes(s)?ft.createElement("div",{className:"fm-o-mask",ref:M},"KEYBOARD"===s?ft.createElement(Zn,{isInset:!0,width:"500px",maxWidth:"500px",label:"Keyboard",instigatorRef:p,isOutsideInteract:!0,isModal:!0},ft.createElement(pa,null)):null,"ERROR"===s?ft.createElement(Zn,{isInset:!0,maxWidth:"300px",label:h.label,instigatorRef:p,isOutsideInteract:!0,isModal:!0},ft.createElement(Pa,null)):null):null)))}function za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?za(Object(n),!0).forEach((function(t){var a,r,i;a=e,r=t,i=n[t],r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r),r in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ha=async(e,t,n=!1)=>{const{getNearest:a,reverseGeocodeToken:r}=e,i=await Ba(e),l=await Ga(e,t);let o;return n&&"pixel"===l.resultType&&(o=await a(l.lngLat,r)),Ua(Ua({},i),{},{resultType:l.resultType,coord:l.coord,features:l,place:o})},Ba=async e=>{const{view:t}=e,{xmin:n,ymin:a,xmax:r,ymax:i}=t.extent,l=[n,a,r,i],{x:o,y:s}=t.center,c=[o,s].map((e=>Math.round(e)));return{bbox:l,centre:c,zoom:parseFloat(t.zoom.toFixed(6))}},Ga=async(e,t)=>{const{view:n,pixelLayers:a}=e,r={x:t[0],y:t[1]},i=(await n.hitTest(r)).results.filter((e=>a.some((t=>e.layer.id===t)))),l=i.map((e=>Ua(Ua({},e.graphic.attributes),{},{id:e.graphic.uid,layer:e.layer.id})));let o=n.toMap(r);return o=[o.x,o.y].map((e=>Math.round(e))),{resultType:"pixel",items:l,featuresTotal:null,featuresInViewport:[],isFeaturesInMap:!1,isPixelFeaturesAtPixel:!!l.length,isPixelFeaturesInMap:!!a.length,coord:o}};var Wa=JSON.parse('{"pi":"https://api.os.uk/maps/vector/v1/vts"}');function Va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(n),!0).forEach((function(t){var a,r,i;a=e,r=t,i=n[t],r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r),r in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class Za extends EventTarget{constructor({osTokenCallback:e,esriTokenCallback:t,defaultUrl:n,darkUrl:a,aerialUrl:r,reverseGeocode:i,images:l}){super(),this.srs=27700,this.osTokenCallback=e,this.esriTokenCallback=t,this.defaultUrl=n,this.darkUrl=a,this.aerialUrl=r,this.basemaps=["default","dark","aerial"].filter((e=>this[e+"Url"])),this.images=l,this.stylesImagePath=`${l}/styles.jpg`,this.reverseGeocode=i,this.isUpdate=!0,this.isUserInitiated=!1,this.attribution={logo:`${l}/os-logo.png`,label:"Ordnance Survey logo"}}init(e){window.globalThis&&Promise.all([n.e(2755).then(n.bind(n,25591)),n.e(2755).then(n.bind(n,74614)),n.e(2755).then(n.bind(n,17496)),n.e(2755).then(n.bind(n,91484)),n.e(2755).then(n.bind(n,45532)),n.e(2755).then(n.bind(n,47940)),n.e(2755).then(n.bind(n,57534)),n.e(2755).then(n.bind(n,19702)),n.e(2755).then(n.bind(n,76226)),n.e(2755).then(n.bind(n,28181))]).then((t=>this.addMap(qa({modules:t},e))))}remove(){}async addMap({modules:e,target:t,paddingBox:n,frame:a,bbox:r,centre:i,zoom:l,minZoom:o,maxZoom:s,basemap:c,pixelLayers:u}){const d=e[0].default,m=e[1].default,p=e[2].default,f=e[3].default,h=e[4].default,_=e[5].default,y=e[6].default,v=e[7].default,b=e[8].default,g=e[9].watch;d.apiKey=(await this.esriTokenCallback()).token,d.request.interceptors.push({urls:Wa.pi,before:async e=>{const t=(await this.osTokenCallback()).token;e.requestOptions.headers={Authorization:"Bearer "+t}}});const E=new _({url:"aerial"===(c="dark"!==c||this.basemaps.includes("dark")?c:"dark")?this.defaultUrl:this[c+"Url"],visible:!0}),w=new v,M=new m({layers:[E,w]}),N=r?new f({xmin:r[0],ymin:r[1],xmax:r[2],ymax:r[3]}):null,O=new p({spatialReference:27700,container:t,map:M,zoom:l||null,center:i?new h({x:i[0],y:i[1],spatialReference:27700}):null,extent:N,constraints:{snapToZoom:!1,minZoom:o,maxZoom:s,maxScale:0,lods:b.create({spatialReference:{wkid:27700}}).lods,rotationEnabled:!1},ui:{components:[]},padding:Ct(n,1)}),k=t.querySelector(".esri-view-surface");k.removeAttribute("role"),k.tabIndex=-1,this.map=M,this.view=O,this.baseTileLayer=E,this.graphicsLayer=w,this.pixelLayers=u,this.paddingBox=n,this.frame=a,this.basemap=c,this.isDark=["dark","aerial"].includes(c),this.modules={Map:m,MapView:p,Extent:f,Point:h,VectorTileLayer:_,GraphicsLayer:v,FeatureLayer:y},E.watch("loaded",(()=>(e=>{const{map:t,view:n,modules:a}=e;e.isLoaded=!0,e.dispatchEvent(new CustomEvent("load",{detail:{map:t,view:n,modules:a}}))})(this))),g((()=>[O.stationary]),(([e])=>{e||(e=>{e.dispatchEvent(new CustomEvent("movestart",{detail:{isUserInitiated:e.isUserInitiated}}))})(this)}));const S=nn((()=>{this.isUpdate?(async e=>{const{paddingBox:t}=e,{offsetTop:n,offsetLeft:a,offsetWidth:r,offsetHeight:i}=t,l=[a+r/2,n+i/2];e.isUserInitiated=!1;const o=await Ha(e,l);e.dispatchEvent(new CustomEvent("update",{detail:o}))})(this):this.isUpdate=!0}),300);g((()=>[O.stationary,O.updating]),(([e,t])=>{!t&&e&&S()})),O.on("drag",(e=>{"start"===e.action&&(this.isUserInitiated=!0)})),O.on("mouse-wheel",(e=>{this.isUserInitiated=!0}))}getImagePos(e){return{default:"0 0",dark:"0 -120px",aerial:"0 -240px",deuteranopia:"0 -360px",tritanopia:"0 -480px","high-contrast":"0 -600px",small:"0 -720px",large:"0 -840px"}[e]}getPixel(e){const t=this.view.toScreen({x:e[0],y:e[1]});return[Math.round(t.x),Math.round(t.y)]}panBy(e,t=!0){const{x:n,y:a}=this.view.toScreen(this.view.center),r={x:n+e[0],y:a+e[1]},i=this.view.toMap(r);this.isUserInitiated=t,this.view.goTo({center:i}).catch((e=>console.log(e)))}panTo(e){this.view.goTo({target:{x:e[0],y:e[1]}}).catch((e=>console.log(e)))}zoomIn(){var e;null===(e=this.view.animation)||void 0===e||e.destroy(),this.isUserInitiated=!0,this.view.goTo({zoom:this.view.zoom+1}).catch((e=>console.log(e)))}zoomOut(){var e;null===(e=this.view.animation)||void 0===e||e.destroy(),this.isUserInitiated=!0,this.view.goTo({zoom:this.view.zoom-1}).catch((e=>console.log(e)))}setBasemap(e){e="dark"!==e||this.basemaps.includes("dark")?e:"default",this.basemap=e,this.isDark=["dark","aerial"].includes(e),this.baseTileLayer.loadStyle(this[e+"Url"]).then((()=>{(async e=>{const{size:t,basemap:n,draw:a}=e;(async e=>{const{graphicsLayer:t,targetMarker:n,isDark:a}=e;if(!n)return;const r=n.clone();r.symbol.color=a?"#ffffff":"#0b0c0c",t.remove(n),t.add(r),e.targetMarker=r})(e),null==a||a.reColour(),e.dispatchEvent(new CustomEvent("style",{detail:{type:"basemap",basemap:n,size:t}}))})(this)}))}setPadding(e,t){if(!this.view)return;const{paddingBox:a}=this,r=Ct(a,1);this.view.padding=r,e&&n.e(2755).then(n.bind(n,45532)).then((n=>{this.isUserInitiated=!1;const a=n.default;this.view.goTo({target:new a({x:e[0],y:e[1],spatialReference:27700})},{animation:t}).catch((e=>console.log(e)))}))}setSize(e){}fitBbox(e){n.e(2755).then(n.bind(n,91484)).then((t=>{const n=t.default;this.view.goTo(new n({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]})).catch((e=>console.log(e)))}))}setCentre(e,t){this.view.goTo({center:e,zoom:t}).catch((e=>console.log(e)))}initDraw(e,t){this.removeTargetMarker(),n.e(6162).then(n.bind(n,21355)).then((n=>{const a=n.default;this.draw=new a(this,e,t)}))}setTargetMarker(e,t,a){this.removeTargetMarker(),n.e(2755).then(n.bind(n,59469)).then((n=>{const r=n.default,{map:i,graphicsLayer:l,isDark:o}=this;if(!(i&&e&&a))return;i.reorder(l,99);const s=new r(((e,t,n)=>({geometry:{type:"point",x:e[0],y:e[1],spatialReference:27700},symbol:{type:"simple-marker",path:n?"M34.5.5c18.765 0 34 15.235 34 34s-15.235 34-34 34-34-15.235-34-34 15.235-34 34-34zM34 2.504C16.736 2.769 2.769 16.736 2.504 34H31v1H2.504C2.769 52.264 16.736 66.231 34 66.496V38h1v28.496C52.264 66.231 66.231 52.264 66.496 35H38v-1h28.496C66.231 16.736 52.264 2.769 35 2.504V31h-1V2.504z":"M66.496 35H38v-1h28.496l-.165-2.816 1.989-.205c.139 1.351.199 2.723.175 4.114l-.233 3.445-1.987-.236a32.1 32.1 0 0 0 .22-3.244l.001-.058zM35 2.504V31h-1V1.5h.914l.013-.997.166.002c1.334.023 2.649.123 3.941.296l-.265 1.982a32.38 32.38 0 0 0-3.711-.278c-.019 0-.039-.001-.058-.001zM2.504 35l.04 1.195-1.998.104-.041-2.392.073-1.725 1.996.135-.069 1.625-.001.058H31v1H2.504zm31.905 32.5H34V38h1v28.496c1.108-.016 2.204-.09 3.283-.217l.234 1.986c-1.348.159-2.72.239-4.111.235l.003-1zm33.638-38.563l-1.974.326a31.59 31.59 0 0 0-.863-3.779l1.919-.563c.385 1.308.692 2.649.918 4.016zm-1.558-5.975l-1.881.68c-.442-1.222-.956-2.41-1.537-3.558l1.784-.903c.618 1.22 1.164 2.483 1.634 3.781zm-2.619-5.591l-1.727 1.01a31.99 31.99 0 0 0-2.155-3.222l1.592-1.21c.83 1.091 1.595 2.234 2.29 3.422zm-3.586-5.024l-1.516 1.304a32.24 32.24 0 0 0-2.7-2.783l1.349-1.476c1.014.926 1.972 1.913 2.867 2.955zm-4.429-4.298l-1.258 1.555c-1.004-.812-2.057-1.564-3.156-2.252l1.061-1.695a34.24 34.24 0 0 1 3.353 2.392zm-5.132-3.431l-.956 1.756a31.63 31.63 0 0 0-3.511-1.642l.736-1.86c1.284.508 2.53 1.092 3.731 1.746zm-5.669-2.445l-.621 1.901a31.8 31.8 0 0 0-3.751-.976l.385-1.963c1.36.267 2.691.614 3.987 1.038zM32.868.538l.094 1.998c-1.306.062-2.592.202-3.854.417L28.773.981a34.05 34.05 0 0 1 4.095-.443zm-6.115.85l.455 1.948a31.73 31.73 0 0 0-3.713 1.11l-.689-1.878c1.282-.47 2.599-.865 3.947-1.18zm-5.859 1.949l.802 1.832c-1.189.52-2.341 1.111-3.45 1.767l-1.018-1.721a33.82 33.82 0 0 1 3.666-1.878zm-5.407 2.98l1.12 1.656a32.48 32.48 0 0 0-3.075 2.362l-1.311-1.51c1.036-.9 2.127-1.738 3.266-2.508zm-4.78 3.904l1.4 1.429a32.22 32.22 0 0 0-2.601 2.875l-1.562-1.25a34.48 34.48 0 0 1 2.763-3.054zm-4.001 4.7l1.634 1.154c-.744 1.053-1.426 2.154-2.04 3.296l-1.762-.948c.653-1.213 1.378-2.383 2.168-3.502zm-3.088 5.346l1.815.838c-.539 1.167-1.01 2.373-1.407 3.611l-1.905-.611a33.76 33.76 0 0 1 1.497-3.838zm-2.066 5.818l1.938.494a31.67 31.67 0 0 0-.727 3.807l-1.984-.255c.177-1.376.436-2.726.773-4.046zM.716 38.352l1.987-.225a31.82 31.82 0 0 0 .669 3.818l-1.946.464a33.71 33.71 0 0 1-.71-4.057zm1.25 6.046l1.913-.582c.379 1.244.832 2.456 1.353 3.632l-1.828.811c-.554-1.25-1.035-2.538-1.438-3.861zm2.33 5.718l1.776-.921c.597 1.151 1.262 2.262 1.989 3.327L6.41 53.651c-.773-1.132-1.479-2.312-2.114-3.535zm3.327 5.2l1.58-1.226c.794 1.022 1.648 1.996 2.557 2.915l-1.422 1.407c-.966-.976-1.872-2.01-2.715-3.096zm4.207 4.516l1.335-1.49a32.11 32.11 0 0 0 3.038 2.408l-1.145 1.64c-1.128-.788-2.206-1.643-3.228-2.558zm4.951 3.686l1.045-1.705a32.04 32.04 0 0 0 3.422 1.819l-.83 1.82a34.06 34.06 0 0 1-3.637-1.934zm5.537 2.731l.718-1.867c1.198.461 2.432.851 3.695 1.167l-.484 1.94c-1.343-.335-2.655-.75-3.929-1.24zm5.943 1.678l.365-1.966c1.258.233 2.541.393 3.847.475l-.125 1.996c-1.387-.087-2.751-.257-4.087-.505zm12.294.035l-.354-1.969c1.282-.231 2.539-.539 3.765-.918l.592 1.91c-1.303.404-2.639.731-4.003.977zm5.951-1.647l-.707-1.87a32 32 0 0 0 3.535-1.589l.93 1.771c-1.212.635-2.466 1.2-3.758 1.688zm5.552-2.701l-1.035-1.711c1.109-.671 2.174-1.407 3.19-2.203l1.234 1.575a34.26 34.26 0 0 1-3.389 2.339zm4.971-3.658l-1.326-1.497c.969-.858 1.885-1.773 2.743-2.741l1.496 1.327a34.05 34.05 0 0 1-2.913 2.911zm4.233-4.492l-1.573-1.235c.797-1.015 1.534-2.08 2.205-3.188l1.711 1.036c-.714 1.178-1.496 2.309-2.343 3.387zm3.356-5.181l-1.77-.931c.598-1.139 1.13-2.319 1.59-3.534l1.871.708c-.489 1.292-1.055 2.546-1.691 3.757zm2.361-5.706l-1.91-.592c.38-1.225.688-2.481.92-3.765l1.968.356c-.246 1.364-.574 2.7-.978 4.001z",size:"68px",color:t?"#ffffff":n?"#0b0c0c":"#505a5f",outline:{width:0}}}))(e,o,t));l.add(s),this.isUpdate=!1,this.targetMarker=s}))}removeTargetMarker(){const{graphicsLayer:e,targetMarker:t}=this;t&&(this.isUpdate=!1,e.remove(t),this.targetMarker=null)}selectFeature(e){}async queryFeature(e){}async queryPoint(e){const t=await Ha(this,e),n=await this.getNearest(t.coord);this.dispatchEvent(new CustomEvent("mapquery",{detail:qa(qa({resultType:t.features.resultType},t),{},{place:n})}))}async getNearest(e){const t="esri-world-geocoder"!==this.reverseGeocode,a=t?this.osTokenCallback:this.esriTokenCallback,{getNearest:r}=t?await n.e(2755).then(n.bind(n,85978)):await n.e(2755).then(n.bind(n,90667));return await r(e,a)}getGeoLocation(e,t){navigator.geolocation.getCurrentPosition((async t=>{let n=[t.coords.longitude,t.coords.latitude];n=n.map((e=>parseFloat(e.toFixed(6))));const a=this.getNearest?await this.getNearest(n,4326):null;e(n,a)}),(e=>{console.log(e),t(e)}),{enableHighAccuracy:!1})}showLocation(e){console.log("showLocation")}}var Ka=Za;function Ya(e){var t,n,a;const r=`(max-width: ${e.maxMobile||ht.W0.breakpoints.MAX_MOBILE})`,i=`(min-width: ${e.minDesktop||ht.W0.breakpoints.MIN_DESKTOP})`,l="(prefers-color-scheme: dark)",{type:o,parent:s,target:c,handleExit:u}=e,[d,m]=oe(null===(t=window)||void 0===t?void 0:t.matchMedia(r).matches),[p,f]=oe(null===(n=window)||void 0===n?void 0:n.matchMedia(l).matches),[h,_]=oe(window.matchMedia(i).matches),[y,v]=oe(!!e.isKeyboard),b=de(new Ka(e.provider)),g=de(null),E=de(null),w=de(null),M=de(null),N=de(null),O=e=>m(e.matches),k=e=>_(e.matches),S=e=>f(e.matches);ce((()=>(document.body.classList.remove("fm-js-hidden"),window.matchMedia(r).addEventListener?(window.matchMedia(r).addEventListener("change",O),window.matchMedia(i).addEventListener("change",k),window.matchMedia(l).addEventListener("change",S)):(window.matchMedia(r).addListener(O),window.matchMedia(i).addListener(k),window.matchMedia(l).addListener(S)),_t.A.on(s,ht.AZ.SET_IS_KEYBOARD,(e=>v(e))),()=>{window.removeEventListener("change",O),window.removeEventListener("change",k)})),[]);const P="buttonFirst"===o||"hybrid"===o&&d;return ft.createElement(St,{options:e,app:{provider:b.current,isPage:P,isMobile:d,isDarkMode:p,isDesktop:h,isBack:null===(a=window.history.state)||void 0===a?void 0:a.isBack,isKeyboard:y,parent:s,handleExit:u,viewportRef:g,paddingBoxRef:E,frameRef:w,obscurePanelRef:M,activeRef:N}},c?He(ft.createElement(Fa,null),s):ft.createElement(Fa,null))}function Xa(e,t){const n=(a=e,{render:function(e){Ke(e,a)},unmount:function(){ot(a)}});var a;return n.render(ft.createElement(Ya,t)),n}},93231:function(e){e.exports=JSON.parse('{"IY":"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates?singleLine={query}&magicKey={magicKey}&sourceCountry=UK&category=Populated Place,Postal&maxLocations={maxLocations}&outFields=*&token={token}&f=json","jE":"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/suggest?text={query}&sourceCountry=UK&category=Populated Place,Postal&maxSuggestions={maxSuggestions}&outFields=*&token={token}&f=json","GI":"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/reverseGeocode?location={location}&token={token}&f=json"}')},93676:function(e){e.exports=JSON.parse('{"k":"https://api.os.uk/search/names/v1/find?query={query}&fq=local_type:postcode%20local_type:hamlet%20local_type:village%20local_type:town%20local_type:city%20local_type:other_settlement&maxresults={maxresults}","K":"https://api.os.uk/search/names/v1/nearest?point={easting},{northing}&radius=1000&fq=local_type:Airfield%20local_type:Airport%20local_type:Bus_Station%20local_type:Chemical_Works%20local_type:City%20local_type:Coach_Station%20local_type:Electricity_Distribution%20local_type:Electricity_Production%20local_type:Further_Education%20local_type:Gas_Distribution_or_Storage%20local_type:Hamlet%20local_type:Harbour%20local_type:Helicopter_Station%20local_type:Heliport%20local_type:Higher_or_University_Education%20local_type:Hill_Or_Mountain%20local_type:Hospice%20local_type:Hospital%20local_type:Medical_Care_Accommodation%20local_type:Named_Road%20local_type:Non_State_Primary_Education%20local_type:Non_State_Secondary_Education%20local_type:Other_Settlement%20local_type:Passenger_Ferry_Terminal%20local_type:Port_Consisting_of_Docks_and_Nautical_Berthing%20local_type:Postcode%20local_type:Primary_Education%20local_type:Railway_Station%20local_type:Road_User_Services%20local_type:Secondary_Education%20local_type:Section_Of_Named_Road%20local_type:Section_Of_Numbered_Road%20local_type:Special_Needs_Education%20local_type:Suburban_Area%20local_type:Town%20local_type:Urban_Greenspace%20local_type:Vehicular_Ferry_Terminal%20local_type:Vehicular_Rail_Terminal%20local_type:Village%20local_type:Waterfall%20"}')}}]);
//# sourceMappingURL=flood-map-ui.js.map