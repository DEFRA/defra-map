"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[9005],{"./node_modules/@arcgis/core/arcade/functions/geomasync.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{registerFunctions:()=>T});var ArcadePortal=__webpack_require__("./node_modules/@arcgis/core/arcade/ArcadePortal.js"),Dictionary=__webpack_require__("./node_modules/@arcgis/core/arcade/Dictionary.js"),executionError=__webpack_require__("./node_modules/@arcgis/core/arcade/executionError.js"),kernel=__webpack_require__("./node_modules/@arcgis/core/arcade/kernel.js"),languageUtils=__webpack_require__("./node_modules/@arcgis/core/chunks/languageUtils.js"),portalUtils=__webpack_require__("./node_modules/@arcgis/core/arcade/portalUtils.js"),functions=__webpack_require__("./node_modules/@arcgis/core/arcade/geometry/functions.js"),operatorsWorkerConnection=__webpack_require__("./node_modules/@arcgis/core/arcade/geometry/operatorsWorkerConnection.js"),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),Geometry=__webpack_require__("./node_modules/@arcgis/core/geometry/Geometry.js"),Multipoint=__webpack_require__("./node_modules/@arcgis/core/geometry/Multipoint.js"),Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js"),Polyline=__webpack_require__("./node_modules/@arcgis/core/geometry/Polyline.js"),jsonUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js"),Portal=__webpack_require__("./node_modules/@arcgis/core/portal/Portal.js"),core_kernel=__webpack_require__("./node_modules/@arcgis/core/kernel.js"),request=__webpack_require__("./node_modules/@arcgis/core/request.js");async function utils_r(r,t,s){const u=core_kernel.id?.findCredential(r.restUrl);if(!u)return null;if("loaded"===r.loadStatus&&""===t&&r.user?.sourceJSON&&!1===s)return r.user.sourceJSON;const o={responseType:"json",query:{f:"json"}};if(s&&(o.query.returnUserLicenseTypeExtensions=!0),""===t){const e=await(0,request.A)(r.restUrl+"/community/self",o);if(e.data){const n=e.data;if(n?.username)return n}return null}const i=await(0,request.A)(r.restUrl+"/community/users/"+t,o);if(i.data){const e=i.data;return e.error?null:e}return null}var guards=__webpack_require__("./node_modules/@arcgis/core/support/guards.js");function M(n){if(null==n)return n;switch(typeof n){case"string":case"number":return n;default:throw new executionError.D$(null,executionError.TX.InvalidParameter,null)}}function T(T){"async"===T.mode&&(T.functions.disjoint=function(n,t){return T.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,languageUtils.E)(a),(0,functions.ZL)(a,n,t),null===a[0]||null===a[1]||(0,operatorsWorkerConnection.C)("disjoint",[a[0].toJSON(),a[1].toJSON()]))))},T.functions.intersects=function(n,t){return T.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,languageUtils.E)(a),(0,functions.ZL)(a,n,t),null!==a[0]&&null!==a[1]&&(0,operatorsWorkerConnection.C)("intersects",[a[0].toJSON(),a[1].toJSON()]))))},T.functions.touches=function(n,t){return T.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,languageUtils.E)(a),(0,functions.ZL)(a,n,t),null!==a[0]&&null!==a[1]&&(0,operatorsWorkerConnection.C)("touches",[a[0].toJSON(),a[1].toJSON()]))))},T.functions.crosses=function(n,t){return T.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,languageUtils.E)(a),(0,functions.ZL)(a,n,t),null!==a[0]&&null!==a[1]&&(0,operatorsWorkerConnection.C)("crosses",[a[0].toJSON(),a[1].toJSON()]))))},T.functions.within=function(n,t){return T.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,languageUtils.E)(a),(0,functions.ZL)(a,n,t),null!==a[0]&&null!==a[1]&&(0,operatorsWorkerConnection.C)("within",[a[0].toJSON(),a[1].toJSON()]))))},T.functions.contains=function(n,t){return T.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,languageUtils.E)(a),(0,functions.ZL)(a,n,t),null!==a[0]&&null!==a[1]&&(0,operatorsWorkerConnection.C)("contains",[a[0].toJSON(),a[1].toJSON()]))))},T.functions.overlaps=function(n,t){return T.standardFunctionAsync(n,t,((e,r,a)=>(a=(0,languageUtils.E)(a),(0,functions.ZL)(a,n,t),null!==a[0]&&null!==a[1]&&(0,operatorsWorkerConnection.C)("overlaps",[a[0].toJSON(),a[1].toJSON()]))))},T.functions.equals=function(n,t){return T.standardFunctionAsync(n,t,((e,r,a)=>((0,languageUtils.D)(a,2,2,n,t),a[0]===a[1]||(a[0]instanceof Geometry.A&&a[1]instanceof Geometry.A?(0,operatorsWorkerConnection.C)("equals",[a[0].toJSON(),a[1].toJSON()]):((0,languageUtils.g)(a[0])&&(0,languageUtils.g)(a[1])||!!((0,languageUtils.k)(a[0])&&(0,languageUtils.k)(a[1])||(0,languageUtils.j)(a[0])&&(0,languageUtils.j)(a[1])))&&a[0].equals(a[1])))))},T.functions.relate=function(n,t){return T.standardFunctionAsync(n,t,((a,s,c)=>{if(c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,3,3,n,t),c[0]instanceof Geometry.A&&c[1]instanceof Geometry.A)return(0,operatorsWorkerConnection.C)("relate",[c[0].toJSON(),c[1].toJSON(),(0,languageUtils.f)(c[2])]);if(c[0]instanceof Geometry.A&&null===c[1])return!1;if(c[1]instanceof Geometry.A&&null===c[0])return!1;if(null===c[0]&&null===c[1])return!1;throw new executionError.D$(n,executionError.TX.InvalidParameter,t)}))},T.functions.intersection=function(n,t){return T.standardFunctionAsync(n,t,(async(e,r,a)=>(a=(0,languageUtils.E)(a),(0,functions.ZL)(a,n,t),null===a[0]||null===a[1]?null:(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("intersection",[a[0].toJSON(),a[1].toJSON()])))))},T.functions.union=function(n,t){return T.standardFunctionAsync(n,t,(async(o,s,c)=>{if(0===(c=(0,languageUtils.E)(c)).length)throw new executionError.D$(n,executionError.TX.WrongNumberOfParameters,t);const l=[];if(1===c.length)if((0,guards.cy)(c[0])){for(const a of(0,languageUtils.E)(c[0]))if(null!==a){if(!(a instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);l.push(a.toJSON())}}else{if(!(0,languageUtils.m)(c[0])){if(c[0]instanceof Geometry.A)return(0,languageUtils.u)((0,kernel.Yq)(c[0]),n.spatialReference);if(null===c[0])return null;throw new executionError.D$(n,executionError.TX.InvalidParameter,t)}for(const a of(0,languageUtils.E)(c[0].toArray()))if(null!==a){if(!(a instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);l.push(a.toJSON())}}else for(const a of c)if(null!==a){if(!(a instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);l.push(a.toJSON())}return 0===l.length?null:(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("union",[l]))}))},T.functions.difference=function(n,t){return T.standardFunctionAsync(n,t,(async(e,r,o)=>(o=(0,languageUtils.E)(o),(0,functions.ZL)(o,n,t),null===o[0]?null:null===o[1]?(0,kernel.Yq)(o[0]):(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("difference",[o[0].toJSON(),o[1].toJSON()])))))},T.functions.symmetricdifference=function(n,t){return T.standardFunctionAsync(n,t,(async(e,r,o)=>(o=(0,languageUtils.E)(o),(0,functions.ZL)(o,n,t),null===o[0]&&null===o[1]?null:null===o[0]?(0,kernel.Yq)(o[1]):null===o[1]?(0,kernel.Yq)(o[0]):(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("symmetricDifference",[o[0].toJSON(),o[1].toJSON()])))))},T.functions.clip=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if(c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,2,2,n,t),!(c[1]instanceof Extent.default)&&null!==c[1])throw new executionError.D$(n,executionError.TX.InvalidParameter,t);if(null===c[0])return null;if(!(c[0]instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return null===c[1]?null:(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("clip",[c[0].toJSON(),c[1].toJSON()]))}))},T.functions.cut=function(n,t){return T.standardFunctionAsync(n,t,(async(s,c,l)=>{if(l=(0,languageUtils.E)(l),(0,languageUtils.D)(l,2,2,n,t),!(l[1]instanceof Polyline.A)&&null!==l[1])throw new executionError.D$(n,executionError.TX.InvalidParameter,t);if(null===l[0])return[];if(!(l[0]instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return null===l[1]?[(0,kernel.Yq)(l[0])]:(await(0,operatorsWorkerConnection.C)("cut",[l[0].toJSON(),l[1].toJSON()])).map((n=>(0,jsonUtils.rS)(n)))}))},T.functions.area=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if((0,languageUtils.D)(c,1,2,n,t),c=(0,languageUtils.E)(c),(0,languageUtils.p)(c[0])){const a=await c[0].sumArea(M(c[1]),!1,n.abortSignal);if(n.abortSignal.aborted)throw new executionError.D$(n,executionError.TX.Cancelled,t);return a}let l=c[0];if(((0,guards.cy)(l)||(0,languageUtils.m)(l))&&(l=(0,languageUtils.F)(c[0],n.spatialReference)),null===l)return 0;if(!(l instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return(0,operatorsWorkerConnection.C)("area",[l.toJSON(),M(c[1])])}))},T.functions.areageodetic=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if((0,languageUtils.D)(c,1,2,n,t),c=(0,languageUtils.E)(c),(0,languageUtils.p)(c[0])){const a=await c[0].sumArea(M(c[1]),!0,n.abortSignal);if(n.abortSignal.aborted)throw new executionError.D$(n,executionError.TX.Cancelled,t);return a}let l=c[0];if(((0,guards.cy)(c[0])||(0,languageUtils.m)(c[0]))&&(l=(0,languageUtils.F)(c[0],n.spatialReference)),null===l)return 0;if(!(l instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return(0,operatorsWorkerConnection.C)("geodeticArea",[l.toJSON(),M(c[1])])}))},T.functions.length=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if((0,languageUtils.D)(c,1,2,n,t),c=(0,languageUtils.E)(c),(0,languageUtils.p)(c[0])){const a=await c[0].sumLength(M(c[1]),!1,n.abortSignal);if(n.abortSignal.aborted)throw new executionError.D$(n,executionError.TX.Cancelled,t);return a}let l=c[0];if(((0,guards.cy)(c[0])||(0,languageUtils.m)(c[0]))&&(l=(0,languageUtils.G)(c[0],n.spatialReference)),null===l)return 0;if(!(l instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return(0,operatorsWorkerConnection.C)("length",[l.toJSON(),M(c[1])])}))},T.functions.length3d=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if((0,languageUtils.D)(c,1,2,n,t),null===(c=(0,languageUtils.E)(c))[0])return 0;let l=c[0];if(((0,guards.cy)(c[0])||(0,languageUtils.m)(c[0]))&&(l=(0,languageUtils.G)(c[0],n.spatialReference)),null===l)return 0;if(!(l instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);if(!0===l.hasZ){const{convertFromSpatialReferenceUnit:n,toLengthUnit:t}=await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/arcade/geometry/unitConversion.js")),e=(0,functions.UI)(l);return n(l.spatialReference,t(c[1]),e)}return(0,operatorsWorkerConnection.C)("length",[l.toJSON(),M(c[1])])}))},T.functions.lengthgeodetic=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if((0,languageUtils.D)(c,1,2,n,t),c=(0,languageUtils.E)(c),(0,languageUtils.p)(c[0])){const a=await c[0].sumLength(M(c[1]),!0,n.abortSignal);if(n.abortSignal.aborted)throw new executionError.D$(n,executionError.TX.Cancelled,t);return a}let l=c[0];if(((0,guards.cy)(c[0])||(0,languageUtils.m)(c[0]))&&(l=(0,languageUtils.G)(c[0],n.spatialReference)),null===l)return 0;if(!(l instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return(0,operatorsWorkerConnection.C)("geodeticLength",[l.toJSON(),M(c[1])])}))},T.functions.distance=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,2,3,n,t);let l=c[0];if(((0,guards.cy)(c[0])||(0,languageUtils.m)(c[0]))&&(l=(0,languageUtils.H)(c[0],n.spatialReference)),!(l instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);let u=c[1];if(((0,guards.cy)(c[1])||(0,languageUtils.m)(c[1]))&&(u=(0,languageUtils.H)(c[1],n.spatialReference)),!(u instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return(0,operatorsWorkerConnection.C)("distance",[l.toJSON(),u.toJSON(),M(c[2])])}))},T.functions.distancegeodetic=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,2,3,n,t);const l=c[0];if(!(l instanceof Point.default))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const u=c[1];if(!(u instanceof Point.default))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const f=new Polyline.A({paths:[],spatialReference:l.spatialReference});return f.addPath([l,u]),(0,operatorsWorkerConnection.C)("geodeticLength",[f.toJSON(),M(c[2])])}))},T.functions.densify=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if(c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,2,3,n,t),null===c[0])return null;if(!(c[0]instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const l=(0,languageUtils.t)(c[1]);if(isNaN(l))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);if(l<=0)throw new executionError.D$(n,executionError.TX.InvalidParameter,t);switch(c[0].type){case"polygon":case"polyline":case"extent":return(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("densify",[c[0].toJSON(),l,M(c[2])]));default:return c[0]}}))},T.functions.densifygeodetic=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if(c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,2,3,n,t),null===c[0])return null;if(!(c[0]instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const l=(0,languageUtils.t)(c[1]);if(isNaN(l))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);if(l<=0)throw new executionError.D$(n,executionError.TX.InvalidParameter,t);switch(c[0].type){case"polygon":case"polyline":case"extent":return(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("geodeticDensify",[c[0].toJSON(),l,M(c[2])]));default:return c[0]}}))},T.functions.generalize=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if(c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,2,4,n,t),null===c[0])return null;if(!(c[0]instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const l=(0,languageUtils.t)(c[1]);if(isNaN(l))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const u=(0,languageUtils.e)((0,languageUtils.J)(c[2],!0));return(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("generalize",[c[0].toJSON(),l,M(c[3]),{removeDegenerateParts:u}]))}))},T.functions.buffer=function(n,t){return T.standardFunctionAsync(n,t,(async(s,c,l)=>{if(l=(0,languageUtils.E)(l),(0,languageUtils.D)(l,2,3,n,t),null===l[0])return null;if(!(l[0]instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const u=(0,languageUtils.t)(l[1]);if(isNaN(u))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return 0===u?(0,kernel.Yq)(l[0]):(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("buffer",[l[0].toJSON(),u,M(l[2])]))}))},T.functions.buffergeodetic=function(n,t){return T.standardFunctionAsync(n,t,(async(s,c,l)=>{if(l=(0,languageUtils.E)(l),(0,languageUtils.D)(l,2,3,n,t),null===l[0])return null;if(!(l[0]instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const u=(0,languageUtils.t)(l[1]);if(isNaN(u))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return 0===u?(0,kernel.Yq)(l[0]):(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("geodesicBuffer",[l[0].toJSON(),u,M(l[2])]))}))},T.functions.offset=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if(c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,2,6,n,t),null===c[0])return null;if(!(c[0]instanceof Polygon.A||c[0]instanceof Polyline.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const l=(0,languageUtils.t)(c[1]);if(isNaN(l))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const f=(0,languageUtils.f)(c[3]??"round").toLowerCase();let d;switch(f){case"round":case"bevel":case"miter":case"square":d=f;break;default:d="round"}const w=(0,languageUtils.t)((0,languageUtils.J)(c[4],10));if(isNaN(w))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const m=(0,languageUtils.t)((0,languageUtils.J)(c[5],0));if(isNaN(m))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("offset",[c[0].toJSON(),l,M(c[2]),{joins:d,miterLimit:w,flattenError:m}]))}))},T.functions.rotate=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if(c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,2,3,n,t),null===c[0])return null;if(!(c[0]instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const l=c[0]instanceof Extent.default?Polygon.A.fromExtent(c[0]):c[0],u=(0,languageUtils.t)(c[1]);if(isNaN(u))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);const f=(0,languageUtils.J)(c[2],null);if(null===f){const n="point"===l.type?l:l.extent?.center;return(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("rotate",[l.toJSON(),u,n?.x,n?.y]))}if(f instanceof Point.default)return(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("rotate",[l.toJSON(),u,f.x,f.y]));throw new executionError.D$(n,executionError.TX.InvalidParameter,t)}))},T.functions.centroid=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if(c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,1,2,n,t),null===c[0])return null;const l=(0,languageUtils.f)(c[1]??"geometric").toLowerCase();if("geometric"!==l&&"labelpoint"!==l)throw new executionError.D$(n,executionError.TX.InvalidParameter,t);let d=c[0];if(((0,guards.cy)(c[0])||(0,languageUtils.m)(c[0]))&&(d="geometric"===l?(0,languageUtils.H)(c[0],n.spatialReference):(0,languageUtils.F)(c[0],n.spatialReference),null===d))return null;if(!(d instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return(0,jsonUtils.rS)("geometric"===l?await(0,operatorsWorkerConnection.C)("centroid",[d.toJSON()]):await(0,operatorsWorkerConnection.C)("labelPoint",[d.toJSON()]))}))},T.functions.measuretocoordinate=function(n,t){return T.standardFunctionAsync(n,t,functions.Cd)},T.functions.pointtocoordinate=function(n,t){return T.standardFunctionAsync(n,t,functions.kr)},T.functions.distancetocoordinate=function(n,t){return T.standardFunctionAsync(n,t,functions.Bn)},T.functions.multiparttosinglepart=function(n,t){return T.standardFunctionAsync(n,t,(async(s,c,l)=>{if(l=(0,languageUtils.E)(l),(0,languageUtils.D)(l,1,1,n,t),null===l[0])return null;if(!(l[0]instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);if(l[0]instanceof Point.default)return[(0,languageUtils.u)((0,kernel.Yq)(l[0]),n.spatialReference)];if(l[0]instanceof Extent.default)return[(0,languageUtils.u)((0,kernel.Yq)(l[0]),n.spatialReference)];const u=(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("simplify",[l[0].toJSON()]));if(u instanceof Polygon.A){const n=[],t=[];for(let e=0;e<u.rings.length;e++)if(u.isClockwise(u.rings[e])){const t=(0,jsonUtils.rS)({rings:[u.rings[e]],hasZ:!0===u.hasZ,hasM:!0===u.hasM,spatialReference:u.spatialReference.toJSON()});n.push(t)}else t.push({ring:u.rings[e],pt:u.getPoint(e,0)});for(let e=0;e<t.length;e++)for(let r=0;r<n.length;r++)if(n[r].contains(t[e].pt)){n[r].addRing(t[e].ring);break}return n}if(u instanceof Polyline.A){const n=[];for(let t=0;t<u.paths.length;t++){const e=(0,jsonUtils.rS)({paths:[u.paths[t]],hasZ:!0===u.hasZ,hasM:!0===u.hasM,spatialReference:u.spatialReference.toJSON()});n.push(e)}return n}if(l[0]instanceof Multipoint.A){const t=[],e=(0,languageUtils.u)((0,kernel.Yq)(l[0]),n.spatialReference);for(let n=0;n<e.points.length;n++)t.push(e.getPoint(n));return t}return null}))},T.functions.issimple=function(n,t){return T.standardFunctionAsync(n,t,((a,s,c)=>{if(c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,1,1,n,t),null===c[0])return!0;if(!(c[0]instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return(0,operatorsWorkerConnection.C)("isSimple",[c[0].toJSON()])}))},T.functions.simplify=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if(c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,1,1,n,t),null===c[0])return null;if(!(c[0]instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("simplify",[c[0].toJSON()]))}))},T.functions.convexhull=function(n,t){return T.standardFunctionAsync(n,t,(async(a,s,c)=>{if(c=(0,languageUtils.E)(c),(0,languageUtils.D)(c,1,1,n,t),null===c[0])return null;if(!(c[0]instanceof Geometry.A))throw new executionError.D$(n,executionError.TX.InvalidParameter,t);return(0,jsonUtils.rS)(await(0,operatorsWorkerConnection.C)("convexHull",[c[0].toJSON()]))}))},T.functions.getuser=function(a,i){return T.standardFunctionAsync(a,i,(async(s,c,l)=>{(0,languageUtils.D)(l,0,2,a,i);let f=(0,languageUtils.J)(l[1],""),d=!0===f;if(f=!0===f||!1===f?"":(0,languageUtils.f)(f),0===l.length||l[0]instanceof ArcadePortal.A){let n;n=a.services?.portal?a.services.portal:Portal.A.getDefault(),l.length>0&&(n=(0,portalUtils.R)(l[0],n));const e=await utils_r(n,f,d);if(e){const n=JSON.parse(JSON.stringify(e));for(const t of["lastLogin","created","modified"])void 0!==n[t]&&null!==n[t]&&(n[t]=new Date(n[t]));return Dictionary.A.convertObjectToArcadeDictionary(n,(0,languageUtils.K)(a))}return null}let m=null;if((0,languageUtils.p)(l[0])&&(m=l[0]),m){if(d=!1,f)return null;await m.load();const e=await m.getOwningSystemUrl();if(!e){if(!f){const n=await m.getIdentityUser();return n?Dictionary.A.convertObjectToArcadeDictionary({username:n},(0,languageUtils.K)(a)):null}return null}let r;r=a.services?.portal?a.services.portal:Portal.A.getDefault(),r=(0,portalUtils.R)(new ArcadePortal.A(e),r);const i=await utils_r(r,f,d);if(i){const n=JSON.parse(JSON.stringify(i));for(const t of["lastLogin","created","modified"])void 0!==n[t]&&null!==n[t]&&(n[t]=new Date(n[t]));return Dictionary.A.convertObjectToArcadeDictionary(n,(0,languageUtils.K)(a))}return null}throw new executionError.D$(a,executionError.TX.InvalidParameter,i)}))},T.functions.nearestcoordinate=function(n,a){return T.standardFunctionAsync(n,a,(async(s,c,l)=>{if(l=(0,languageUtils.E)(l),(0,languageUtils.D)(l,2,2,n,a),!(l[0]instanceof Geometry.A||null===l[0]))throw new executionError.D$(n,executionError.TX.InvalidParameter,a);if(!(l[1]instanceof Point.default||null===l[1]))throw new executionError.D$(n,executionError.TX.InvalidParameter,a);if(null===l[0]||null===l[1])return null;const u=l[0]instanceof Extent.default?Polygon.A.fromExtent(l[0]):l[0],f=await(0,operatorsWorkerConnection.C)("getNearestCoordinate",[u.toJSON(),l[1].toJSON(),{calculateLeftRightSide:!0}]);return null===f?null:Dictionary.A.convertObjectToArcadeDictionary({coordinate:(0,jsonUtils.rS)(f.coordinate),distance:f.distance,sideOfLine:0===f.distance?"straddle":f.rightSide?"right":"left"},(0,languageUtils.K)(n),!1,!0)}))},T.functions.nearestvertex=function(n,a){return T.standardFunctionAsync(n,a,(async(s,c,l)=>{if(l=(0,languageUtils.E)(l),(0,languageUtils.D)(l,2,2,n,a),!(l[0]instanceof Geometry.A||null===l[0]))throw new executionError.D$(n,executionError.TX.InvalidParameter,a);if(!(l[1]instanceof Point.default||null===l[1]))throw new executionError.D$(n,executionError.TX.InvalidParameter,a);if(null===l[0]||null===l[1])return null;const u=l[0]instanceof Extent.default?Polygon.A.fromExtent(l[0]):l[0],f=await(0,operatorsWorkerConnection.C)("getNearestVertex",[u.toJSON(),l[1].toJSON()]);return null===f?null:Dictionary.A.convertObjectToArcadeDictionary({coordinate:(0,jsonUtils.rS)(f.coordinate),distance:f.distance,sideOfLine:0===f.distance?"straddle":f.rightSide?"right":"left"},(0,languageUtils.K)(n),!1,!0)}))})}},"./node_modules/@arcgis/core/arcade/geometry/operatorsWorkerConnection.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>a});var _core_workers_workers_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/workers/workers.js");let e,o,t=!1;function n(){return e??=(0,_core_workers_workers_js__WEBPACK_IMPORTED_MODULE_0__.ho)("arcadeGeometryOperatorsWorker").then((r=>{o=r,t=!0,e=void 0}))}async function a(r,e){return t?o.apply("invokeGeometryOp",[r,e]):(await n(),a(r,e))}},"./node_modules/@arcgis/core/arcade/portalUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>l});var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/portal/Portal.js");function l(l,t){return null===l?t:new _portal_Portal_js__WEBPACK_IMPORTED_MODULE_0__.A({url:l.field("url")})}}}]);