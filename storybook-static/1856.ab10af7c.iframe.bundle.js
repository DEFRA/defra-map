"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[1856],{"./node_modules/@arcgis/core/core/QueueProcessor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{QueueProcessor:()=>_});var _maybe_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_Queue_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Queue.js"),_ReactiveMap_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/ReactiveMap.js"),_scheduling_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/scheduling.js"),_signal_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/signal.js");class u{constructor(e,s){this.item=e,this.controller=s,this.promise=null}}class _{constructor(e){this._schedule=null,this._deferreds=new _ReactiveMap_js__WEBPACK_IMPORTED_MODULE_2__.A,this._controllers=new _ReactiveMap_js__WEBPACK_IMPORTED_MODULE_2__.A,this._processingItems=new _ReactiveMap_js__WEBPACK_IMPORTED_MODULE_2__.A,this._pausedSignal=(0,_signal_js__WEBPACK_IMPORTED_MODULE_4__.v)(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new _Queue_js__WEBPACK_IMPORTED_MODULE_1__.A(e.peeker),this.process=e.process}destroy(){this.clear(),this._schedule=(0,_maybe_js__WEBPACK_IMPORTED_MODULE_5__.xt)(this._schedule)}get updating(){return this.running}get length(){return this._processingItems.size+this._queue.length}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}abort(e){const s=this._controllers.get(e);s&&s.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach((s=>e.push(s))),this._controllers.clear(),e.forEach((e=>e.abort())),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach(((s,t)=>e(t)))}get(e){const s=this._deferreds.get(e);return s?s.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,h){const o=this.get(e);if(o)return o;const n=new AbortController;let c=null;h&&(c=(0,_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.u7)(h,(()=>n.abort())));const u=()=>{_.remove(),null!=c&&c.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},_=(0,_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.NY)(n.signal,(()=>{const s=this._processingItems.get(e);s&&s.controller.abort(),u(),a.reject((0,_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.NK)())})),a=(0,_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.Tw)();return this._deferreds.set(e,a),this._controllers.set(e,n),a.promise.then(u,u),this._queue.push(e),this._scheduleNext(),a.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject((0,_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.NK)()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const s of e)this._queue.push(s.item),s.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._pausedSignal.value||this._schedule||(this._schedule=(0,_scheduling_js__WEBPACK_IMPORTED_MODULE_3__._)((()=>{this._schedule=null,this._next()})))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,s){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(s))}_processError(e,s){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(s))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(null==e)return;let s;const t=new AbortController,r=new u(e,t);this._processingItems.set(e,r);try{s=this.process(e,t.signal)}catch(i){this._processError(r,i)}(0,_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.$X)(s)?(r.promise=s,s.then((e=>this._processResult(r,e)),(e=>this._processError(r,e)))):this._processResult(r,s)}}},"./node_modules/@arcgis/core/core/floatRGBA.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>r,U:()=>o});var _mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js");function o(o,r,e=0){const i=(0,_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.qE)(o,0,f);for(let t=0;t<4;t++)r[e+t]=Math.floor(256*l(i*n[t]))}function r(t,o=0){let r=0;for(let n=0;n<4;n++)r+=t[o+n]*e[n];return r}const n=[1,256,65536,16777216],e=[1/256,1/65536,1/16777216,1/4294967296],f=r(new Uint8ClampedArray([255,255,255,255]));function l(t){return t-Math.floor(t)}},"./node_modules/@arcgis/core/layers/support/streamLayerUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Aw:()=>i,DN:()=>_,EA:()=>r,Gm:()=>e,t0:()=>s,xq:()=>t});const _="__esri_stream_id__",e="__esri_timestamp__",r="__esri_track_part__",i="__esri_time_received__",t="__esri_track_line__";var s;!function(_){_[_.TrackLine=0]="TrackLine",_[_.LatestObservation=1]="LatestObservation",_[_.PreviousObservation=2]="PreviousObservation"}(s||(s={}))},"./node_modules/@arcgis/core/symbols/cim/animationDebugFlags.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>t});var _core_has_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/has.js");const t=new class e{get forceStaticPath(){return"disabled"===(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__.A)("esri-cim-animations-enable-status")}get forceAnimatedPath(){return"forced"===(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__.A)("esri-cim-animations-enable-status")}get freezeGlobalTime(){return(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__.A)("esri-cim-animations-freeze-time")??!1}get spotlightAnimatedSymbols(){return!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__.A)("esri-cim-animations-spotlight")}get forceGlobalTimeOrigin(){return!1!==(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__.A)("esri-cim-animations-freeze-time")}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{KQ:()=>n,Q4:()=>f,Ss:()=>s});const n=8388607,t=8388608,f=t=>t&n;function s(n,r){return((r?t:0)|n)>>>0}},"./node_modules/@arcgis/core/views/2d/engine/webgl/animations/instructions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var t;__webpack_require__.d(__webpack_exports__,{DW:()=>x,GA:()=>h,mv:()=>t}),function(t){t.Local="Local",t.Global="Global"}(t||(t={}));class o{generateSource(t){const o=[];for(let a=1;a<this.length;a++)o.push(`vec4 atom${a} = texture(${t.animationTexture}, (pointer + 0.5) / size);`),o.push("pointer.x += 1.0;");for(let a=0;a<this.ins;a++)o.push("top--;"),o.push(`vec4 in${this.ins-a-1} = stack[top];`);for(let a=0;a<this.outs;a++)o.push(`vec4 out${a};`);const{microcode:e}=this;for(const a of e)o.push(a);for(let a=0;a<this.outs;a++)o.push(`stack[top] = out${a};`),o.push("top++;"),o.push(`if (top >= ${d}) { top = ${d-1}; }`);return o}}let e=128;function s(t){return[`float duration = clamp(${t.duration}, 0.05, 3600.0);`,`float startTimeOffset = ${t.startTimeOffset};`,`float repeatDelay = ${t.repeatDelay};`,`float timeOriginSelector = ${t.timeOriginSelector};`,`float repeatType = ${t.repeatType};`,`float easing = ${t.easing};`,`float playAnimation = ${t.playAnimation} * (1.0 - step(0.0, -${t.duration}));`,`float reverseAnimation = ${t.reverseAnimation};`,"float time = globalTime - (timeOriginSelector == 1.0 ? localTimeOrigin : 0.0);","time *= playAnimation;","time *= 1.0 - reverseAnimation * 2.0;","float period = duration + repeatDelay;","time += reverseAnimation == 1.0 ? (period - startTimeOffset - 0.001) : startTimeOffset + 0.001;","float omega = time / period;","float oi = floor(omega);","omega = repeatType == 1.0 || repeatType == 3.0 ? omega - oi : omega;","float of = omega * period;","of = (clamp(of, reverseAnimation * repeatDelay, period - (1.0 - reverseAnimation) * repeatDelay) - reverseAnimation * repeatDelay) / duration;","of = easing == 2.0 ? pow(of, 3.0) : of;","of = easing == 3.0 ? 1.0 - pow(1.0 - of, 3.0) : of;","of = easing == 4.0 ? of < 0.5 ? 4.0 * pow(of, 3.0) : 1.0 - pow(-2.0 * of + 2.0, 3.0) / 2.0 : of;","bool oscillate = repeatType == 3.0 && mod(oi, 2.0) == 1.0;",`${t.out} = oscillate ? 1.0 - of : of;`]}const l={Linear:1,EaseIn:2,EaseOut:3,EaseInOut:4},m={Loop:1,None:2,Oscillate:3},c={Local:1,Global:2};function p(t){const o=l[t.easing],e=m[t.repeatType],a=c[t.timeOriginSelector];return[[t.duration,t.startTimeOffset,t.repeatDelay,a],[e,o,t.playAnimation,t.reverseAnimation]]}const h={scalar:new class i extends o{constructor(){super(...arguments),this.opcode=++e,this.length=1,this.ins=0,this.outs=1,this.microcode=["out0 = vec4(atom0.y, atom0.y, atom0.y, atom0.y);"]}encode(t){return[[this.opcode,t,0,0]]}},vector3:new class n extends o{constructor(){super(...arguments),this.opcode=++e,this.length=1,this.ins=0,this.outs=1,this.microcode=["out0 = vec4(atom0.yzw, 0.0);"]}encode(t){return[[this.opcode,t[0]||0,t[1]||0,t[2]||0]]}},vector4:new class r extends o{constructor(){super(...arguments),this.opcode=++e,this.length=2,this.ins=0,this.outs=1,this.microcode=["out0 = atom1;"]}encode(t){return[[this.opcode,0,0,0],t]}},animatedTransform:new class f extends o{constructor(){super(...arguments),this.opcode=++e,this.length=10,this.ins=1,this.outs=1,this.microcode=["vec2 fromTranslation = atom1.xy;","vec2 toTranslation = atom1.zw;","float fromRotation = atom2.x;","float toRotation = atom2.y;","float fromScale = atom2.z;","float toScale = atom2.w;","bool relativeTranslation = atom9.x == 1.0;","bool absoluteScale = atom9.y == 1.0;","vec2 translationMultiplier = relativeTranslation ? pixelDimensions : vec2(1.0, 1.0);","float scaleDivisor = absoluteScale ? pixelDimensions.y : 1.0;","float fTranslation;","{",...s({duration:"atom3.x",startTimeOffset:"atom3.y",repeatDelay:"atom3.z",timeOriginSelector:"atom3.w",repeatType:"atom4.x",easing:"atom4.y",playAnimation:"atom4.z",reverseAnimation:"atom4.w",out:"fTranslation"}),"}","float fRotation;","{",...s({duration:"atom5.x",startTimeOffset:"atom5.y",repeatDelay:"atom5.z",timeOriginSelector:"atom5.w",repeatType:"atom6.x",easing:"atom6.y",playAnimation:"atom6.z",reverseAnimation:"atom6.w",out:"fRotation"}),"}","float fScale;","{",...s({duration:"atom7.x",startTimeOffset:"atom7.y",repeatDelay:"atom7.z",timeOriginSelector:"atom7.w",repeatType:"atom8.x",easing:"atom8.y",playAnimation:"atom8.z",reverseAnimation:"atom8.w",out:"fScale"}),"}","vec2 aTranslation = mix(fromTranslation, toTranslation, fTranslation);","float aRotation = mix(fromRotation, toRotation, fRotation);","float aScale = mix(fromScale, toScale, fScale);","vec2 pTranslation = in0.xy;","float pRotation = in0.z;","float pScale = in0.w;","aTranslation *= translationMultiplier;","aScale /= scaleDivisor;","float rotation = pRotation + aRotation;","float scale = pScale * aScale;","float sin1 = sin(pRotation);","float cos1 = cos(pRotation);","float s1 = pScale;","float x1 = pTranslation.x;","float y1 = pTranslation.y;","float x2 = aTranslation.x;","float y2 = aTranslation.y;","\n    vec2 translation = vec2(\n      cos1 * s1 * x2 - sin1 * s1 * y2 + x1,\n      sin1 * s1 * x2 + cos1 * s1 * y2 + y1\n    );\n    ","out0 = vec4(translation, rotation, scale);"]}encode(t){return[[this.opcode,0,0,0],[t.translation.from[0],t.translation.from[1],t.translation.to[0],t.translation.to[1]],[t.rotation.from,t.rotation.to,t.scale.from,t.scale.to],...p(t.translation.timing),...p(t.rotation.timing),...p(t.scale.timing),[t.relativeTranslation?1:0,t.absoluteScale?1:0,0,0]]}},animatedColor:new class u extends o{constructor(){super(...arguments),this.opcode=++e,this.length=7,this.ins=1,this.outs=1,this.microcode=["float fromOpacity = atom0.y;","float toOpacity = atom0.z;","vec4 fromColor = atom1;","vec4 toColor = atom2;","float fColor;","{",...s({duration:"atom3.x",startTimeOffset:"atom3.y",repeatDelay:"atom3.z",timeOriginSelector:"atom3.w",repeatType:"atom4.x",easing:"atom4.y",playAnimation:"atom4.z",reverseAnimation:"atom4.w",out:"fColor"}),"}","float fOpacity;","{",...s({duration:"atom5.x",startTimeOffset:"atom5.y",repeatDelay:"atom5.z",timeOriginSelector:"atom5.w",repeatType:"atom6.x",easing:"atom6.y",playAnimation:"atom6.z",reverseAnimation:"atom6.w",out:"fOpacity"}),"}","vec4 aColor = mix(fromColor, toColor, fColor);","aColor.a *= mix(fromOpacity, toOpacity, fOpacity);","vec4 pColor = in0;","out0 = aColor * pColor;"]}encode(t){return[[this.opcode,t.opacity.from,t.opacity.to,0],[t.color.from[0],t.color.from[1],t.color.from[2],t.color.from[3]],[t.color.to[0],t.color.to[1],t.color.to[2],t.color.to[3]],...p(t.color.timing),...p(t.opacity.timing)]}},ret:new class a extends o{constructor(){super(...arguments),this.opcode=++e,this.length=1,this.ins=0,this.outs=0,this.microcode=["break;"]}encode(){return[[this.opcode,0,0,0]]}}},y=40,d=4;function x(t){const o=[];o.push(`float globalTime = ${t.globalTime};`),o.push(`float localTimeOrigin = ${t.localTimeOrigin};`),o.push(`vec2 pointer = ${t.animationPointer};`),o.push(`vec2 size = ${t.animationTextureSize};`),o.push("int top = 0;"),o.push(`vec4 stack[${d}];`),o.push(`for (int counter = 0; counter < ${y}; counter++) {`),o.push(`vec4 atom0 = texture(${t.animationTexture}, (pointer + 0.5) / size);`),o.push("pointer.x += 1.0;"),o.push(`vec2 pixelDimensions = ${t.pixelDimensions};`),o.push("if (false) {");for(const e in h){const a=h[e];o.push(`} else if (int(atom0.x) == ${a.opcode}) {`);for(const e of a.generateSource(t))o.push(e)}return o.push("} // End if-else."),o.push("} // End for."),o.push(`${t.out} = top > 0 ? stack[top - 1] : vec4(0.0);`),o.join("\n")}},"./node_modules/@arcgis/core/views/2d/engine/webgl/meshing/Mesh.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>o});var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/BufferObject.js"),_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/@arcgis/core/views/webgl/FramebufferObject.js"),__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/checkWebGLError.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js")),_webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/@arcgis/core/views/webgl/GLObjectType.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/VertexArrayObject.js")),_definitions_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/meshing/definitions.js");class o{constructor(t,s){this._boundPart=null,this.vertexBuffers=new Map,this.indexBuffers=new Map,this.groups=[];for(const o in s.vertex){const{data:i,attributes:n}=s.vertex[o],f=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__.g.createVertex(t,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__._U.STATIC_DRAW,i);this.vertexBuffers.set(o,{buffer:f,attributes:n})}for(const o in s.index){const{data:i}=s.index[o],n=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__.g.createIndex(t,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__._U.STATIC_DRAW,i);this.indexBuffers.set(o,{buffer:n})}for(const e of s.groups)this.groups.push({...e,vertexArrays:new Map});this.parts=s.parts}bind(e,r,s){this._boundPart=s;const{group:o}=this.parts[this._boundPart],i=this.groups[o];if(!i)throw new Error(`Missing group ${o}.`);let n=i.vertexArrays.get(r.stringHash);if(!n){const s=new Set(r.locations.keys()),o=i.index?this.indexBuffers.get(i.index)?.buffer:null,f=new Map,u=new Map;for(const[e,{buffer:r,attributes:t}]of this.vertexBuffers){const o=t.filter((e=>s.has(e.name)));o.length>0&&(f.set(e,o),u.set(e,r))}n=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_7__.Z(e,r.locations,f,u,o),i.vertexArrays.set(r.stringHash,n)}e.bindVAO(n)}draw(e){if(null==this._boundPart)throw new Error("Mesh.bind() has not been called.");const{start:r,count:t}=this.parts[this._boundPart],{group:o}=this.parts[this._boundPart],{primitive:i,index:n}=this.groups[o];if(n){const o=this.indexBuffers.get(n);if(!o)throw new Error(`Missing index buffer "${n}".`);const{indexType:f}=o.buffer;if(!f)throw new Error("Buffer type error.");e.drawElements(i,t,f,r*_definitions_js__WEBPACK_IMPORTED_MODULE_8__.I[f])}else e.drawArrays(i,r,t)}unbind(e){this._boundPart=null,e.bindVAO(null)}destroy(){for(const{vertexArrays:e}of this.groups)for(const[r,t]of e)t.disposeVAOOnly();for(const{buffer:e}of this.vertexBuffers.values())e.dispose();for(const{buffer:e}of this.indexBuffers.values())e.dispose()}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/meshing/SimpleMesh.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>s});var _definitions_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/meshing/definitions.js"),_Mesh_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/meshing/Mesh.js"),_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),_webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js");const o={position:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.pe.SHORT,count:2}};class s extends _Mesh_js__WEBPACK_IMPORTED_MODULE_1__.e{static create(e,r){const i=[];let{stride:o}=r;if(null==o){o=0;for(const[e,{count:i,type:n,offset:s}]of Object.entries(r.layout)){if(null!=s)throw new Error("Stride cannot be computed automatically when attribute offsets are supplied explicitly.");o+=i*_definitions_js__WEBPACK_IMPORTED_MODULE_0__.I[n]}}let a=0;for(const[s,{count:d,offset:f,type:m,normalized:x}]of Object.entries(r.layout)){null!=f&&(a=f);const e=new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_3__._(s,d,m,a,o,null!=x&&x,0);i.push(e),a+=d*_definitions_js__WEBPACK_IMPORTED_MODULE_0__.I[m]}const l={primitive:r.primitive};null!=r.index&&(l.index="indexData");let{count:u}=r;if(null==u&&(u=r.index?r.index.length:r.vertex.byteLength/o,Math.floor(u)!==u))throw new Error(`The byte length of vertex data must be an exact multiple of the stride, which is ${o}.`);const c={start:0,count:u,group:0,primitive:r.primitive},p={vertex:{vertexData:{data:r.vertex,attributes:i}},parts:[c],groups:[l]};return null!=r.index&&(p.index={indexData:{data:r.index}}),new s(e,p,r.layout)}static fromVertexStream(t,e){return s.create(t,{primitive:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.WR.TRIANGLE_STRIP,vertex:new Uint16Array(e),layout:o})}constructor(t,e,r){super(t,e),this._spec=r}bind(t,e,r=0){super.bind(t,e,r)}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/meshing/definitions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>T});var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js");const T={[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.BYTE]:1,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.UNSIGNED_BYTE]:1,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.SHORT]:2,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.UNSIGNED_SHORT]:2,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.HALF_FLOAT]:2,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.INT]:4,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.UNSIGNED_INT]:4,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.pe.FLOAT]:4}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueRegistry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{YS:()=>TechniqueRegistry_j,n_:()=>TechniqueRegistry_F,Wn:()=>TechniqueRegistry_q});var enums=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),TechniqueType=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueType.js"),tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),animationDebugFlags=__webpack_require__("./node_modules/@arcgis/core/symbols/cim/animationDebugFlags.js"),GraphShaderModule=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/GraphShaderModule.js"),glsl=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/glsl.js"),instructions=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/animations/instructions.js");class d extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],d.prototype,"globalTime",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.ZY)],d.prototype,"animationTextureSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],d.prototype,"animationTexture",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.U)],d.prototype,"toScreen",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.U)],d.prototype,"toNdc",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],d.prototype,"mapRotation",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],d.prototype,"pixelRatio",void 0);var definitions=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),utils=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/utils.js");class p extends GraphShaderModule.k2{getVisualVariableData(t){if(!this._vvData){const a=this.getAttributeDataCoords(t);this._vvData=(0,glsl.US)(this.visualVariableData,a).setDebugName("storage2")}return this._vvData}getAttributeDataCoords(t){if(!this._uv){const a=(0,utils.Kt)(t),e=this.size,i=(0,glsl.Wh)(a.x),u=(0,glsl.Wh)(a.y).multiply((0,glsl.Wh)(256)),l=(0,glsl.Wh)(a.z).multiply((0,glsl.Wh)(256)).multiply((0,glsl.Wh)(256)),n=(0,glsl.fV)(i.add(u).add(l)),p=(0,glsl.zi)(n,e),d=n.subtract(p).divide(e);this._uv=new glsl.ZY(p,d).add(.5).divide(e)}return this._uv}getFilterData(t){const a=this.getAttributeDataCoords(t);return(0,glsl.US)(this.filterFlags,a).setDebugName("storage0")}getAnimationData(t){const a=this.getAttributeDataCoords(t);return(0,glsl.US)(this.animation,a).setDebugName("storage1")}getVVData(t){return this.getVisualVariableData(t)}getDataDrivenData0(t){const a=this.getAttributeDataCoords(t);return(0,glsl.US)(this.dataDriven0,a).setDebugName("storage30")}getDataDrivenData1(t){const a=this.getAttributeDataCoords(t);return(0,glsl.US)(this.dataDriven1,a).setDebugName("storage31")}getDataDrivenData2(t){const a=this.getAttributeDataCoords(t);return(0,glsl.US)(this.dataDriven2,a).setDebugName("storage32")}getGPGPUData(t){const a=this.getAttributeDataCoords(t);return(0,glsl.US)(this.gpgpu,a).setDebugName("storage4")}getLocalTimeOrigin(t){const a=this.getAttributeDataCoords(t);return(0,glsl.US)(this.localTimeOrigin,a).x.setDebugName("storage5")}getFilterFlags(t){return(0,has.A)("webgl-ignores-sampler-precision")?(0,glsl.mk)(this.getFilterData(t).x.multiply((0,glsl.fV)(255))):this.getFilterData(t).x.multiply((0,glsl.fV)(255))}getLabelVisibility(t){const a=this.getFilterData(t).y.multiply(255);return new glsl.nt(1).subtract(a)}getAnimationValue(t){return this.getAnimationData(t).x}getSizeValue(t){return this.getVisualVariableData(t).x}getColorValue(t){return this.getVisualVariableData(t).y}getOpacityValue(t){return this.getVisualVariableData(t).z}getRotationValue(t){return this.getVisualVariableData(t).w}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],p.prototype,"filterFlags",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],p.prototype,"animation",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],p.prototype,"gpgpu",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],p.prototype,"localTimeOrigin",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],p.prototype,"visualVariableData",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],p.prototype,"dataDriven0",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],p.prototype,"dataDriven1",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],p.prototype,"dataDriven2",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],p.prototype,"size",void 0);class e extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],e.prototype,"activeReasons",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],e.prototype,"highlightAll",void 0);class ShaderHittest_e extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.ZY)],ShaderHittest_e.prototype,"position",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],ShaderHittest_e.prototype,"distance",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],ShaderHittest_e.prototype,"smallSymbolDistance",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],ShaderHittest_e.prototype,"smallSymbolSizeThreshold",void 0);class ViewInfo_d extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.U)],ViewInfo_d.prototype,"displayViewScreenMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.U)],ViewInfo_d.prototype,"displayViewMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.U)],ViewInfo_d.prototype,"displayMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.U)],ViewInfo_d.prototype,"viewMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.U)],ViewInfo_d.prototype,"tileMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],ViewInfo_d.prototype,"displayZoomFactor",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],ViewInfo_d.prototype,"requiredZoomFactor",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.ZY)],ViewInfo_d.prototype,"tileOffset",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],ViewInfo_d.prototype,"currentScale",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],ViewInfo_d.prototype,"currentZoom",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],ViewInfo_d.prototype,"metersPerSRUnit",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],ViewInfo_d.prototype,"rotation",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],ViewInfo_d.prototype,"pixelRatio",void 0);class S extends GraphShaderModule.ZA{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(0,glsl.eB)],S.prototype,"id",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(1,glsl.nt)],S.prototype,"bitset",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(2,glsl.ZY)],S.prototype,"pos",void 0);class q extends GraphShaderModule.Y7{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(14,glsl.ZY)],q.prototype,"nextPos1",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(15,glsl.ZY)],q.prototype,"nextPos2",void 0);class AFeatureShader_P extends GraphShaderModule.HS{}class B extends GraphShaderModule.A{clip(t,i){let e=new glsl.nt(0);const o=this.storage.getFilterFlags(t);if(e=e.add((0,glsl.fV)(2).multiply((0,glsl.fV)(1).subtract((0,utils.i6)(o,0)))),this.inside?e=e.add((0,glsl.fV)(2).multiply((0,glsl.fV)(1).subtract((0,utils.i6)(o,1)))):this.outside?e=e.add((0,glsl.fV)(2).multiply((0,utils.i6)(o,1))):this.highlight&&(e=e.add((0,glsl.fV)(2).multiply((0,glsl.fV)(1).subtract(this._checkHighlight(o))))),null!=i){const t=new glsl.nt(1).subtract((0,glsl.PM)(i.x,this.view.currentZoom)),o=(0,glsl.PM)(i.y,this.view.currentZoom);e=e.add(new glsl.nt(2).multiply(t.add(o)))}return e}getFragmentOutput(t,i,e=new glsl.nt(1/255)){const o=new GraphShaderModule.mm;return o.fragColor=this._maybeWriteHittest(i)??this._maybeHighlight(t,e)??t,o}_maybeHighlight(t,i){return this.highlight?new glsl.Zb(t.rgb,(0,glsl.PM)(i,t.a)):null}_checkHighlight(t){let e=this._checkHighlightBit(t,0);for(let o=1;o<definitions.U5;o++)e=e.add(this._checkHighlightBit(t,o));return(0,glsl.PM)(new glsl.nt(.1),e.add(this.highlight.highlightAll))}_checkHighlightBit(t,i){return(0,utils.yS)(t,i).multiply((0,utils.mh)(this.highlight.activeReasons,i))}maybeRunHittest(t,i,e){if(null==this.hittestRequest)return null;const o=this.hittest(t,i,e);let s=(0,glsl.Tk)((0,glsl.MM)(o,this.hittestRequest.distance),new glsl.nt(2),new glsl.nt(0));const r=this.storage.getAttributeDataCoords(t.id),h=(0,utils.nb)(r);s=s.add(this.clip(t.id,t.zoomRange));const l=new glsl.Zb(new glsl.nt(1/255),0,0,0);return{glPointSize:new glsl.nt(1),glPosition:new glsl.Zb(h,s,1),color:l}}_maybeWriteHittest(t){return null!=this.hittestRequest?t.color:null}}(0,tslib_es6._)([GraphShaderModule.E8],B.prototype,"inside",void 0),(0,tslib_es6._)([GraphShaderModule.E8],B.prototype,"outside",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(e)],B.prototype,"highlight",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(p)],B.prototype,"storage",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(ViewInfo_d)],B.prototype,"view",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(ShaderHittest_e)],B.prototype,"hittestRequest",void 0);var enums_o,constants=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/constants.js");class MosaicInfo_p extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.ZY)],MosaicInfo_p.prototype,"size",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],MosaicInfo_p.prototype,"texture",void 0);class f extends GraphShaderModule.k2{getColor(s,t,o){return(0,glsl.j1)([(0,glsl.or)((0,utils.M8)(s),o),t],[(0,glsl.$5)(s,this.values.first()),this.colors.first()],[(0,glsl.aX)(s,this.values.last()),this.colors.last()],[!0,()=>{const t=this.values.findIndex((t=>(0,glsl.MM)(t,s))),o=this.values.get(t),r=t.subtract(1),e=this.values.get(r),i=s.subtract(e).divide(o.subtract(e));return(0,glsl.jh)(this.colors.get(r),this.colors.get(t),i)}])}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.My.ofType(glsl.Zb,8))],f.prototype,"colors",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.My.ofType(glsl.nt,8))],f.prototype,"values",void 0);class h extends GraphShaderModule.k2{getOpacity(t){return(0,glsl.j1)([(0,utils.M8)(t),new glsl.nt(1)],[(0,glsl.$5)(t,this.opacityValues.first()),this.opacities.first()],[(0,glsl.aX)(t,this.opacityValues.last()),this.opacities.last()],[!0,()=>{const s=this.opacityValues.findIndex((s=>(0,glsl.MM)(s,t))),i=this.opacityValues.get(s),e=s.subtract(1),o=this.opacityValues.get(e),a=t.subtract(o).divide(i.subtract(o));return(0,glsl.jh)(this.opacities.get(e),this.opacities.get(s),a)}])}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.My.ofType(glsl.nt,8))],h.prototype,"opacities",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.My.ofType(glsl.nt,8))],h.prototype,"opacityValues",void 0);class VisualVariableRotation_d extends GraphShaderModule.k2{getVVRotationMat4(t){return(0,glsl.Tk)((0,utils.M8)(t),glsl.$I.identity(),(()=>{const e=this.getNormalizedAngle(t).multiply(constants.os),r=(0,glsl.F8)(e),o=(0,glsl.gn)(e);return new glsl.$I(o,r,0,0,r.multiply(new glsl.nt(-1)),o,0,0,0,0,1,0,0,0,0,1)}))}getVVRotationMat3(t){return(0,glsl.Tk)((0,utils.M8)(t),glsl.U.identity(),(()=>{const e=this.getNormalizedAngle(t).multiply(constants.os),r=(0,glsl.F8)(e),o=(0,glsl.gn)(e);return new glsl.U(o,r,0,r.multiply(new glsl.nt(-1)),o,0,0,0,1)}))}getNormalizedAngle(t){const e=(0,glsl.LC)(this.rotationType,new glsl.nt(constants.H_.Arithmatic));return(0,glsl.Tk)(e,new glsl.nt(90).subtract(t),t)}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],VisualVariableRotation_d.prototype,"rotationType",void 0);class m extends GraphShaderModule.k2{getSize(t,e){const r=this.minMaxValueAndSize.xy,o=this.minMaxValueAndSize.zw;return(0,glsl.Tk)((0,utils.M8)(t),e,(()=>{const e=t.subtract(r.x).divide(r.y.subtract(r.x)),s=(0,glsl.qE)(e,new glsl.nt(0),new glsl.nt(1));return o.x.add(s.multiply(o.y.subtract(o.x)))}))}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.Zb)],m.prototype,"minMaxValueAndSize",void 0);class VisualVariableSizeScaleStops_p extends GraphShaderModule.k2{getSizeForViewScale(s){return(0,glsl.j1)([(0,glsl.$5)(s,this.values.first()),this.sizes.first()],[(0,glsl.aX)(s,this.values.last()),this.sizes.last()],[!0,()=>{const t=this.values.findIndex((t=>(0,glsl.MM)(t,s))),e=this.values.get(t),i=t.subtract(1),r=this.values.get(i),o=s.subtract(r).divide(e.subtract(r));return(0,glsl.jh)(this.sizes.get(i),this.sizes.get(t),o)}])}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.My.ofType(glsl.nt,8))],VisualVariableSizeScaleStops_p.prototype,"sizes",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.My.ofType(glsl.nt,8))],VisualVariableSizeScaleStops_p.prototype,"values",void 0);class VisualVariableSizeStops_f extends GraphShaderModule.k2{getSize(s,t){const e=(0,glsl.j1)([(0,utils.M8)(s),t],[(0,glsl.$5)(s,this.values.first()),this.sizes.first()],[(0,glsl.aX)(s,this.values.last()),this.sizes.last()],[!0,()=>{const t=this.values.findIndex((t=>(0,glsl.MM)(t,s))),e=this.values.get(t),i=t.subtract(1),r=this.values.get(i),o=s.subtract(r).divide(e.subtract(r));return(0,glsl.jh)(this.sizes.get(i),this.sizes.get(t),o)}]);return(0,glsl.Tk)((0,utils.M8)(e),t,e)}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.My.ofType(glsl.nt,8))],VisualVariableSizeStops_f.prototype,"sizes",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.My.ofType(glsl.nt,8))],VisualVariableSizeStops_f.prototype,"values",void 0);class l extends GraphShaderModule.k2{getSize(t,o){return(0,glsl.Tk)((0,utils.M8)(t),o,t.multiply(this.unitValueToPixelsRatio))}}function vvUtils_t(a){return null!=a.visualVariableSizeMinMaxValue||null!=a.visualVariableSizeScaleStops||null!=a.visualVariableSizeStops||null!=a.visualVariableSizeUnitValue}function vvUtils_l(a,e,i){if(vvUtils_t(a)){const t=a.storage.getSizeValue(e);return a.visualVariableSizeMinMaxValue?.getSize(t,i)??a.visualVariableSizeScaleStops?.getSizeForViewScale(a.view.currentScale)??a.visualVariableSizeStops?.getSize(t,i)??a.visualVariableSizeUnitValue?.getSize(t,i)}return i}function vvUtils_r(e,i,t,l=new glsl.x(!1)){if(null==e.visualVariableColor)return t;const r=e.storage.getColorValue(i);return e.visualVariableColor.getColor(r,t,l)}function vvUtils_n(a,i){if(null==a.visualVariableOpacity)return new glsl.nt(1);const t=a.storage.getOpacityValue(i);return a.visualVariableOpacity.getOpacity(t)}function vvUtils_u(a,e){if(null==a.visualVariableRotation)return glsl.U.identity();const t=a.storage.getRotationValue(e);return a.visualVariableRotation.getVVRotationMat3(t)}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],l.prototype,"unitValueToPixelsRatio",void 0);class L extends S{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(3,glsl.Zb)],L.prototype,"animationPointerAndBaseSizeAndReferenceSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(4,glsl.ZY)],L.prototype,"zoomRange",void 0);class U extends AFeatureShader_P{}class E extends B{_getScreenPosition(i){const{pos:t,translation:o,rotation:e,scale:a,offset:r,id:d,vvScale:c}=i,y=function vvUtils_o(a,i){if(null==a.visualVariableRotation)return new glsl.nt(0);const t=a.storage.getRotationValue(i);return a.visualVariableRotation.getNormalizedAngle(t)}(this,d).multiply(Math.PI/180),f=o.x.multiply(4/3),h=o.y.multiply(-1).multiply(4/3),S=(0,glsl.F8)(y),b=(0,glsl.gn)(y),g=b.multiply(f).add((0,glsl.ze)(S).multiply(h)),V=S.multiply(f).add(b.multiply(h)),v=(0,glsl.F8)(e.subtract(y)),w=(0,glsl.gn)(e.subtract(y)),x=new glsl.nt(0),j=new glsl.nt(1),{pixelRatio:z}=this.animationInfo,T=new glsl.U(j,x,x,x,j,x,g.multiply(z),V.multiply(z),j),_=new glsl.U(w,v.multiply(-1),x,v,w,x,0,0,j),I=a.multiply(c).multiply(z).multiply(4/3),C=_.multiply(I),O=this.animationInfo.toScreen.multiply(new glsl.eB(t,1)),M=T.multiply(O).xy,P=C.multiply(new glsl.eB(r,0)).xy;return M.add(P)}_clip(i,o){let e=super.clip(i,o);const a=(0,glsl.$5)(this._getLocalTimeOrigin(i),new glsl.nt(0));return animationDebugFlags.H.forceGlobalTimeOrigin||(e=e.add((0,glsl.j1)([a,()=>new glsl.nt(2)],[!0,()=>new glsl.nt(0)]))),e}_getLocalTimeOrigin(i){return this.storage.getLocalTimeOrigin(i)}_toNdc(i){return this.animationInfo.toNdc.multiply(new glsl.eB(i,1)).xy}_getEvalParams(i,t){const{globalTime:o,animationTextureSize:e,animationTexture:a}=this.animationInfo;return{globalTime:o,localTimeOrigin:this._getLocalTimeOrigin(i.id),animationTextureSize:e,animationTexture:a,pixelDimensions:t}}_getColor(i,t){return(0,glsl.Tk)((0,glsl.LC)(t.isSDF,new glsl.nt(1)),this._getSDFColor(i,t),this._getSpriteColor(i,t))}_getSpriteColor(i,t){return(0,glsl.US)(this.mosaicInfo.texture,i).multiply(t.color)}_getSDFColor(i,t){const o=(0,glsl.US)(this.mosaicInfo.texture,i),e=new glsl.nt(.5).subtract((0,utils.Rj)(o)).multiply(t.distanceToPx).multiply(constants.V5),a=(0,glsl.qE)(new glsl.nt(.5).subtract(e),new glsl.nt(0),new glsl.nt(1)),r=t.color.multiply(a),l=t.outlineSize.multiply(.5),s=(0,glsl.tn)(e).subtract(l),n=(0,glsl.qE)(new glsl.nt(.5).subtract(s),new glsl.nt(0),new glsl.nt(1)),u=t.outlineColor.multiply(n);return new glsl.nt(1).subtract(u.a).multiply(r).add(u)}}function G(i,t,e){const a=i.add(new glsl.ZY(t,0)),r=(0,glsl.US)(e.animationTexture,a.add(.5).divide(e.animationTextureSize)).xy;return i=i.add(r),(0,glsl.om)({animationPointer:i,...e},glsl.Zb,null,(i=>{const{out:t}=i;if(!t)throw new Error("out is null");return(0,instructions.DW)({...i,out:t})}))}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(MosaicInfo_p)],E.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(d)],E.prototype,"animationInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(f)],E.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(h)],E.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(m)],E.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableSizeScaleStops_p)],E.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableSizeStops_f)],E.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(l)],E.prototype,"visualVariableSizeUnitValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableRotation_d)],E.prototype,"visualVariableRotation",void 0),function(o){o[o.transform=0]="transform",o[o.fromColor=1]="fromColor",o[o.toColor=2]="toColor",o[o.colorMix=3]="colorMix",o[o.toOpacity=4]="toOpacity",o[o.opacityMix=5]="opacityMix"}(enums_o||(enums_o={}));var markerConstants=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/markers/markerConstants.js");function j(t,u,s){const l=s.subtract(u),c=function v(n,r){return(0,glsl.Om)(n,(0,glsl.S8)(r))}(t.subtract(u),l),e=(0,glsl.qE)(c.divide((0,glsl.Bw)(l)),new glsl.nt(0),new glsl.nt(1));return(0,glsl.Io)(t,u.add(e.multiply(s.subtract(u))))}function g(t){const u=(0,glsl.tn)(t);return(0,glsl.PM)(u.x.add(u.y).add(u.z),new glsl.nt(1.05))}function hittestUtils_h(t,u,n,i){const y=new glsl.U(n.x.multiply(i.y).subtract(i.x.multiply(n.y)),i.x.multiply(u.y).subtract(u.x.multiply(i.y)),u.x.multiply(n.y).subtract(n.x.multiply(u.y)),n.y.subtract(i.y),i.y.subtract(u.y),u.y.subtract(n.y),i.x.subtract(n.x),u.x.subtract(i.x),n.x.subtract(u.x)),s=u.x.multiply(n.y.subtract(i.y)),l=n.x.multiply(i.y.subtract(u.y)),a=i.x.multiply(u.y.subtract(n.y)),o=s.add(l).add(a);return new glsl.nt(1).divide(o).multiply(y.multiply(new glsl.eB(1,t)))}function M(t,u,n,i){return(0,glsl.LC)(g(hittestUtils_h(t,u,n,i)),new glsl.nt(1))}function P(t,u,n,i){const y=n.subtract(u),s=i.subtract(u),l=(0,utils.tL)(y,s),c=(0,glsl.Uo)((0,glsl.Xe)(l,new glsl.nt(constants.M)),(0,glsl.MM)(l,new glsl.nt(-.05)));return(0,glsl.j1)([(0,glsl.Uo)((0,glsl.AU)(c),M(t.xy,u,n,i)),new glsl.nt(-1)],[!0,()=>{const r=j(t,u,n),y=j(t,n,i),s=j(t,i,u);return(0,glsl.jk)((0,glsl.jk)(r,y),s)}])}function hittestUtils_q(t){return t.distance.add(1)}function z(t,u,n){const{viewMat3:r,tileMat3:i}=t.view,y=r.multiply(i),s=y.multiply(new glsl.eB(u.pos,1)),l=y.multiply(new glsl.eB(n.nextPos1,1)),c=y.multiply(new glsl.eB(n.nextPos2,1));return P(t.hittestRequest.position,s.xy,l.xy,c.xy)}class W extends L{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(5,glsl.ZY)],W.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(6,glsl.ZY)],W.prototype,"uv",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(7,glsl.Zb)],W.prototype,"sizing",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(8,glsl.nt)],W.prototype,"angle",void 0);class AnimatedMarkerShader_B extends GraphShaderModule.Y7{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(12,glsl.ZY)],AnimatedMarkerShader_B.prototype,"offsetNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(13,glsl.ZY)],AnimatedMarkerShader_B.prototype,"offsetNextVertex2",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(14,glsl.ZY)],AnimatedMarkerShader_B.prototype,"textureUVNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(15,glsl.ZY)],AnimatedMarkerShader_B.prototype,"textureUVNextVertex2",void 0);function AnimatedMarkerShader_G(t,e,i,s){return e.multiply(t.x).add(i.multiply(t.y)).add(s.multiply(t.z))}class H extends E{constructor(){super(...arguments),this.type="AnimatedMarkerShader",this.computeAttributes={offset:["offsetNextVertex1","offsetNextVertex2"],uv:["textureUVNextVertex1","textureUVNextVertex2"]}}_vertexPreamble(t){const{id:e,pos:i,offset:s,animationPointerAndBaseSizeAndReferenceSize:o,uv:r,sizing:p,angle:h}=t,c=o.xy,x=o.z,y=o.w,v=p.xy,f=p.z,w=(0,utils.mh)(t.bitset,markerConstants.c.bitset.isStroke),S=p.w,b=(0,utils.mh)(t.bitset,markerConstants.c.bitset.scaleSymbolsProportionally),g=this._getEvalParams(t,v),z=G(c,enums_o.transform,g),P=(0,glsl.j1)([(0,glsl.LC)((0,utils.mh)(t.bitset,markerConstants.c.bitset.isMapAligned),new glsl.nt(1)),this.view.rotation.divide(180).multiply(Math.PI)],[!0,new glsl.nt(0)]),_=new glsl.Ny((0,glsl.gn)(P),(0,glsl.F8)(P.multiply(-1)),(0,glsl.F8)(P),(0,glsl.gn)(P)).multiply(z.xy),V=z.z.subtract(P).subtract(h.multiply(constants.rp)),C=z.w,j=(0,utils.mh)(t.bitset,markerConstants.c.bitset.isSDF),F=vvUtils_l(this,e,new glsl.nt(y)).divide(new glsl.nt(y));return{baseSize:x,animationPointer:c,strokeWidth:f,isOutline:w,unscaledDistanceToPx:S,scaleSymbolsProportionally:b,isSDF:j,position:this._getScreenPosition({id:e,pos:i,offset:s,referenceSize:y,translation:_,rotation:V,scale:C,vvScale:F}),uv:r,evalParams:g,vvScale:F,scale:C}}vertex(t,e){const{position:i,animationPointer:s,evalParams:o,isOutline:r,unscaledDistanceToPx:l,vvScale:n,uv:d,strokeWidth:m,scaleSymbolsProportionally:u,scale:v,isSDF:f,baseSize:w}=this._vertexPreamble(t),S=this._toNdc(i);let b=G(s,enums_o.fromColor,o);b=new glsl.Zb(b.rgb.multiply(b.a),b.a);let g=G(s,enums_o.toColor,o);g=new glsl.Zb(g.rgb.multiply(g.a),g.a);let z=G(s,enums_o.colorMix,o);z=new glsl.Zb(z.rgb.multiply(z.a),z.a);const P=G(s,enums_o.toOpacity,o).a,_=G(s,enums_o.opacityMix,o).a,V=vvUtils_r(this,t.id,b,(0,glsl.or)((0,utils.K5)(t.bitset,markerConstants.c.bitset.colorLocked),new glsl.x(r))),C=(0,glsl.jh)(V,g,z),D=vvUtils_n(this,t.id),j=(0,glsl.jh)(D,P,_),F=C.multiply(j),R=this.clip(t.id,t.zoomRange),U=l.multiply(n);return{glPosition:new glsl.Zb(S,R,1),uv:d.divide(this.mosaicInfo.size),color:F.multiply(new glsl.nt(1).subtract(r)),outlineColor:F.multiply(r),distanceToPx:U,strokeWidth:m.multiply((0,glsl.jh)(new glsl.nt(1),v,u)),isOutline:r,isSDF:f,...this.maybeRunHittest(t,e,{pos:t.pos,size:w,sizeCorrection:new glsl.nt(1),isMapAligned:new glsl.nt(1),vvRotationMat3:new glsl.U(1,0,0,0,1,0,0,0,1),placementMat3:new glsl.U(1,0,0,0,1,0,0,0,1),outlineSize:new glsl.nt(1),distanceToPx:U,isSDF:f})}}fragment(t){let e=this._getColor(t.uv,{color:t.color,distanceToPx:t.distanceToPx,isSDF:t.isSDF,outlineColor:t.outlineColor,outlineSize:t.strokeWidth});return animationDebugFlags.H.spotlightAnimatedSymbols&&(e=e.add(new glsl.Zb(0,.3,0,.3))),this.getFragmentOutput(e,t)}hittest(t,e,i){return(0,glsl.Tk)((0,glsl.Xe)(i.size,this.hittestRequest.smallSymbolSizeThreshold),this._hittestSmallMarker(t,e,i),this._hittestMarker(t,e,i))}_hittestSmallMarker(t,e,i){const{position:s,distance:o,smallSymbolDistance:r}=this.hittestRequest,l=o.subtract(r),{viewMat3:a,tileMat3:n}=this.view,d=a.multiply(n).multiply(new glsl.eB(i.pos,1)).xy,m=i.size.multiply(.5);return(0,glsl.Io)(d,s).subtract(m).add(l)}_hittestMarker(t,e,i){const s=this._vertexPreamble({...t}).position,o=this._vertexPreamble({...t,offset:e.offsetNextVertex1,uv:e.textureUVNextVertex1}).position,r=this._vertexPreamble({...t,offset:e.offsetNextVertex2,uv:e.textureUVNextVertex2}).position,l=this.hittestRequest.position,a=this.hittestRequest.distance,n=P(l,s,o,r);return(0,glsl.Tk)((0,glsl.MM)(n,a),n,this._hittestSamples(s,o,r,t,e,i))}_hittestSamples(t,e,i,s,o,r){const{outlineSize:l,isSDF:n,distanceToPx:d}=r,m=this.hittestRequest.position,u=this.hittestRequest.distance,h=hittestUtils_h(m.add(new glsl.ZY((0,glsl.ze)(u),(0,glsl.ze)(u))),t,e,i),c=hittestUtils_h(m.add(new glsl.ZY(0,(0,glsl.ze)(u))),t,e,i),x=hittestUtils_h(m.add(new glsl.ZY(u,(0,glsl.ze)(u))),t,e,i),y=hittestUtils_h(m.add(new glsl.ZY((0,glsl.ze)(u),0)),t,e,i),v=hittestUtils_h(m,t,e,i),f=hittestUtils_h(m.add(new glsl.ZY(u,0)),t,e,i),w=hittestUtils_h(m.add(new glsl.ZY((0,glsl.ze)(u),u)),t,e,i),S=hittestUtils_h(m.add(new glsl.ZY(0,u)),t,e,i),b=hittestUtils_h(m.add(new glsl.ZY(u,u)),t,e,i),_=s.uv.divide(this.mosaicInfo.size),V=o.textureUVNextVertex1.divide(this.mosaicInfo.size),C=o.textureUVNextVertex2.divide(this.mosaicInfo.size),M={color:new glsl.Zb(1,1,1,1),outlineSize:l,outlineColor:new glsl.Zb(1,1,1,1),isSDF:n,distanceToPx:d};let N=new glsl.nt(0);return N=N.add(g(h).multiply(this._getColor(AnimatedMarkerShader_G(h,_,V,C),M).a)),N=N.add(g(c).multiply(this._getColor(AnimatedMarkerShader_G(c,_,V,C),M).a)),N=N.add(g(x).multiply(this._getColor(AnimatedMarkerShader_G(x,_,V,C),M).a)),N=N.add(g(y).multiply(this._getColor(AnimatedMarkerShader_G(y,_,V,C),M).a)),N=N.add(g(v).multiply(this._getColor(AnimatedMarkerShader_G(v,_,V,C),M).a)),N=N.add(g(f).multiply(this._getColor(AnimatedMarkerShader_G(f,_,V,C),M).a)),N=N.add(g(w).multiply(this._getColor(AnimatedMarkerShader_G(w,_,V,C),M).a)),N=N.add(g(S).multiply(this._getColor(AnimatedMarkerShader_G(S,_,V,C),M).a)),N=N.add(g(b).multiply(this._getColor(AnimatedMarkerShader_G(b,_,V,C),M).a)),(0,glsl.PM)(N,new glsl.nt(.05)).multiply(hittestUtils_q(this.hittestRequest))}}(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(W)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)(AnimatedMarkerShader_B))],H.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(class AnimatedMarkerShader_E extends U{}))],H.prototype,"fragment",null);var mat3=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js"),mat3f32=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js"),Technique=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/Technique.js");class t extends Technique.j{constructor(){super(...arguments),this.symbologyPlane=enums.uC.FILL,this._input=null}}var featureTechniqueUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js");class u extends t{render(a,u){const{context:f,painter:c}=a,{target:l}=u,{freezeGlobalTime:p}=animationDebugFlags.H,x=c.textureManager.animationStore.getTexture(f,0),d=[2/a.state.size[0],0,0,0,-2/a.state.size[1],0,-1,1,1],h=Array.from((0,mat3.B8)((0,mat3f32.vt)(),d)),b=Array.from((0,mat3.lw)((0,mat3f32.vt)(),h,l.transforms.displayViewScreenMat3)),T=u.instance.getInput();c.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(a,u.target,T.uniforms),...(0,featureTechniqueUtils.QA)(a,u.target),mosaicInfo:c.textureManager.getMosaicInfo(f,u.textureKey,!0),animationInfo:{globalTime:!1===p?a.time/1e3:p,animationTextureSize:[x.descriptor.width,x.descriptor.height],animationTexture:{unit:6,texture:x},toScreen:b,toNdc:d,mapRotation:a.state.rotation,pixelRatio:a.state.pixelRatio}},defines:{...(0,featureTechniqueUtils.vT)(a)},optionalAttributes:{zoomRange:!0},useComputeBuffer:!0}),c.setPipelineState({...(0,featureTechniqueUtils.Qu)(a)}),c.submitDraw(a,u),!1===p&&l.requestRender()}}class DotDensityPointShader_z extends GraphShaderModule.ZA{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(0,glsl.ZY)],DotDensityPointShader_z.prototype,"pos",void 0);class DotDensityPointShader_R extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],DotDensityPointShader_R.prototype,"dotSize",void 0);class DotDensityPointShader_b extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],DotDensityPointShader_b.prototype,"locations",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],DotDensityPointShader_b.prototype,"pixelRatio",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],DotDensityPointShader_b.prototype,"tileZoomFactor",void 0);class C extends GraphShaderModule.A{constructor(){super(...arguments),this.type="DotDensityPointShader"}vertex(t){const o=new glsl.U(1,0,0,0,-1,0,0,1,1).multiply(new glsl.eB(t.pos.xy.divide(definitions.CQ),1)),i=(0,glsl.US)(this.draw.locations,o.xy),s=(0,glsl.T9)(this.instance.dotSize.divide(2),new glsl.nt(1));let r=new glsl.nt(0);r=r.add((0,glsl.PM)(i.a,new glsl.nt(1e-6)).multiply(2));let d=s.add(this.instance.dotSize);const n=this.view.displayViewScreenMat3.multiply(new glsl.eB(t.pos.add(.5),1)),a=new glsl.Zb(n.xy,r,1),p=this.instance.dotSize.divide(d),h=new glsl.nt(-1).divide(s.divide(d));return d=d.multiply(this.draw.pixelRatio.multiply(this.draw.tileZoomFactor)),{glPosition:a,glPointSize:d,color:i,ratio:p,invEdgeRatio:h}}fragment(t){const o=(0,glsl.Bw)(t.glPointCoord.subtract(.5)).multiply(2),e=(0,glsl.TF)(new glsl.nt(0),new glsl.nt(1),t.invEdgeRatio.multiply(o.subtract(t.ratio)).add(1)),i=new GraphShaderModule.mm;return i.fragColor=t.color.multiply(e),i}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(DotDensityPointShader_R)],C.prototype,"instance",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(DotDensityPointShader_b)],C.prototype,"draw",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(ViewInfo_d)],C.prototype,"view",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(DotDensityPointShader_z))],C.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(class DotDensityPointShader_P extends AFeatureShader_P{}))],C.prototype,"fragment",null);class DotDensityPolygonShader_j extends S{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(3,glsl.nt)],DotDensityPolygonShader_j.prototype,"inverseArea",void 0);class V extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.My.ofType(glsl.Zb,2))],V.prototype,"isActive",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.My.ofType(glsl.Zb,8))],V.prototype,"colors",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],V.prototype,"dotValue",void 0);class _ extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],_.prototype,"dotTexture0",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],_.prototype,"dotTexture1",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],_.prototype,"tileZoomFactor",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],_.prototype,"pixelRatio",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],_.prototype,"tileDotsOverArea",void 0);class DotDensityPolygonShader_F extends B{constructor(){super(...arguments),this.type="DotDensityPolygonShader"}_dotThreshold(t,e,o){return t.divide(e).divide(o)}vertex(t){const e=new glsl.U(2/definitions.CQ,0,0,0,-2/definitions.CQ,0,-1,1,1).multiply(new glsl.eB(t.pos,1)),s=this.clip(t.id),i=new glsl.Zb(e.xy,s,1),r=this.storage.getVVData(t.id).multiply(this.instance.isActive.get(0)).multiply(t.inverseArea),l=this.storage.getDataDrivenData0(t.id).multiply(this.instance.isActive.get(1)).multiply(t.inverseArea),d=this.draw.tileZoomFactor.multiply(definitions.CQ).divide(this.draw.pixelRatio),n=this._dotThreshold(r,this.instance.dotValue,this.draw.tileDotsOverArea),a=this._dotThreshold(l,this.instance.dotValue,this.draw.tileDotsOverArea),u=t.pos.add(.5).divide(d);return{glPosition:i,color:new glsl.Zb(0,0,0,0),textureCoords:u,thresholds0:n,thresholds1:a}}fragment(t){const e=new GraphShaderModule.mm,o=(0,glsl.US)(this.draw.dotTexture0,t.textureCoords),s=(0,glsl.US)(this.draw.dotTexture1,t.textureCoords),i=t.thresholds0.subtract(o),r=t.thresholds1.subtract(s);let l;const n=glsl.$I.fromColumns(this.instance.colors[0],this.instance.colors[1],this.instance.colors[2],this.instance.colors[3]),a=glsl.$I.fromColumns(this.instance.colors[4],this.instance.colors[5],this.instance.colors[6],this.instance.colors[7]);if(this.blending){const t=(0,glsl.PM)(new glsl.nt(0),i),e=(0,glsl.PM)(new glsl.nt(0),r),o=(0,glsl.Om)(t,i).add((0,glsl.Om)(e,r)),s=(0,glsl.PM)(o,new glsl.nt(0)),d=new glsl.nt(1).subtract(s),p=o.add(s),h=i.multiply(t).divide(p),c=r.multiply(e).divide(p),u=n.multiply(h).add(a.multiply(c));l=d.multiply(u)}else{const t=(0,glsl.T9)((0,utils.xf)(i),(0,utils.xf)(r)),e=(0,glsl.PM)(t,new glsl.nt(0)),o=new glsl.nt(1).subtract(e),s=(0,glsl.PM)(t,i),d=(0,glsl.PM)(t,r),p=n.multiply(s).add(a.multiply(d));l=o.multiply(p)}return e.fragColor=l,e}hittest(t){return hittestUtils_q(this.hittestRequest)}}(0,tslib_es6._)([GraphShaderModule.E8],DotDensityPolygonShader_F.prototype,"blending",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(V)],DotDensityPolygonShader_F.prototype,"instance",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(_)],DotDensityPolygonShader_F.prototype,"draw",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(DotDensityPolygonShader_j))],DotDensityPolygonShader_F.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(AFeatureShader_P))],DotDensityPolygonShader_F.prototype,"fragment",null);var RandomLCG=__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),SimpleMesh=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/meshing/SimpleMesh.js"),webgl_enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),FramebufferObject=__webpack_require__("./node_modules/@arcgis/core/views/webgl/FramebufferObject.js"),Renderbuffer=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Renderbuffer.js"),RenderbufferDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js"),Texture=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),TextureDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");const DotDensityResources_p={pos:{count:2,type:webgl_enums.pe.UNSIGNED_SHORT}};class DotDensityResources_f{constructor(){this._dotTextureSize=0,this._dotTextures=null,this._dotMesh=null}destroy(){this._disposeTextures(),this._dotFBO&&this._dotFBO.dispose(),this._dotMesh&&this._dotMesh.destroy()}getFBO(t){if(null==this._dotFBO){const s=definitions.CQ,o=definitions.CQ,h=new TextureDescriptor.R(s,o);h.samplingMode=webgl_enums.Cj.NEAREST,h.wrapMode=webgl_enums.pF.CLAMP_TO_EDGE;const d=new Renderbuffer.l(t,new RenderbufferDescriptor.q(webgl_enums.yQ.DEPTH_STENCIL,s,o));this._dotFBO=new FramebufferObject.H(t,h,d)}return this._dotFBO}getDotDensityMesh(t){if(null==this._dotMesh){const o=definitions.CQ,r=o*o,i=2,n=new Int16Array(r*i);for(let t=0;t<o;t++)for(let e=0;e<o;e++)n[i*(e+t*o)]=e,n[i*(e+t*o)+1]=t;this._dotMesh=SimpleMesh.g.create(t,{primitive:webgl_enums.WR.POINTS,vertex:n,count:r,layout:DotDensityResources_p})}return this._dotMesh}getDotDensityTextures(e,s,o){if(this._dotTextureSize===s&&this._seed===o||(this._disposeTextures(),this._dotTextureSize=s,this._seed=o),null===this._dotTextures){const r=new RandomLCG.A(o);this._dotTextures=[this._allocDotDensityTexture(e,s,r),this._allocDotDensityTexture(e,s,r)]}return this._dotTextures}_disposeTextures(){if(this._dotTextures){for(let t=0;t<this._dotTextures.length;t++)this._dotTextures[t].dispose();this._dotTextures=null}}_allocDotDensityTexture(t,e,s){const o=new Float32Array(e*e*4);for(let r=0;r<o.length;r++)o[r]=s.getFloat();const i=new TextureDescriptor.R;return i.dataType=webgl_enums.ld.FLOAT,i.samplingMode=webgl_enums.Cj.NEAREST,i.width=e,i.height=e,new Texture.g(t,i,o)}}class FillShader_g extends S{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(3,glsl.Zb)],FillShader_g.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(4,glsl.ZY)],FillShader_g.prototype,"zoomRange",void 0);class x extends B{constructor(){super(...arguments),this.type="FillShader",this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,o){const r=vvUtils_n(this,t.id),e=vvUtils_r(this,t.id,t.color).multiply(r),i=this.view.displayViewScreenMat3.multiply(new glsl.eB(t.pos.xy,1)),p=this.clip(t.id,t.zoomRange);return{glPosition:new glsl.Zb(i.xy,p,1),color:e,...this.maybeRunHittest(t,o,null)}}fragment(t){return this.getFragmentOutput(t.color,t,new glsl.nt(0))}hittest(t,o){return z(this,t,o)}}(0,tslib_es6._)([(0,GraphShaderModule.uK)(f)],x.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(h)],x.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(FillShader_g)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)(q))],x.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(AFeatureShader_P))],x.prototype,"fragment",null);class n extends GraphShaderModule.k2{getPatternOffsetAtTileOrigin(t,i=new glsl.nt(0),l=new glsl.nt(1)){const n=new glsl.ZY(constants.YV).divide(t);let p=t.multiply((0,glsl.jc)(this.maxIntsToLocalOrigin.multiply(n))).add(this.tileOffsetFromLocalOrigin).subtract(new glsl.nt(.5).multiply(t));return p=new glsl.ZY(p.x.multiply(l).subtract(p.y.multiply(i)),p.x.multiply(i).add(p.y.multiply(l))),(0,glsl.zi)(p,t)}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.ZY)],n.prototype,"tileOffsetFromLocalOrigin",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.ZY)],n.prototype,"maxIntsToLocalOrigin",void 0);class ComplexFillShader_q extends FillShader_g{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(5,glsl.Zb)],ComplexFillShader_q.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(6,glsl.nt)],ComplexFillShader_q.prototype,"width",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(7,glsl.nt)],ComplexFillShader_q.prototype,"height",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(8,glsl.ZY)],ComplexFillShader_q.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(9,glsl.ZY)],ComplexFillShader_q.prototype,"scale",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(10,glsl.nt)],ComplexFillShader_q.prototype,"angle",void 0);function ComplexFillShader_P(t,e){const o=t.view.requiredZoomFactor,i=new glsl.ZY(e.width,e.height),r=i.multiply(e.scale).multiply(o),m=e.angle.multiply(constants.rp),u=(0,glsl.F8)(m),f=(0,glsl.gn)(m),c=function ComplexFillShader_L(t,e,o,i,r){const l=(0,glsl.LC)((0,utils.mh)(r,constants.Fz),(0,glsl.fV)(1)),s=(0,utils.Rj)(new glsl.Zb(t,0));return(0,glsl.Tk)(l,(0,glsl.w0)(i.divide(e.x),o.divide(e.y),0,(0,glsl.ze)(o.divide(e.x)),i.divide(e.y),0,(0,utils._9)((0,glsl.Zc)(s,0)),(0,utils._9)((0,glsl.Zc)(0,s)),1),(0,glsl.w0)(i.divide(e.x),o.divide(e.y),0,(0,glsl.ze)(o.divide(e.x)),i.divide(e.y),0,0,0,1))}(e.id,r,u,f,e.bitset),y=t.localTileOffset.getPatternOffsetAtTileOrigin(i,u,f),v=o.multiply(e.scale).multiply(e.offset.subtract(y)).divide(r),h=new glsl.eB(e.pos,1),x=c.multiply(h).xy.subtract(v),g=e.tlbr.divide(t.mosaicInfo.size.xyxy);let b=(0,utils.mh)(e.bitset,constants.cn);return null!=t.visualVariableColor&&(b=(0,glsl.Tk)((0,utils.M8)(t.storage.getColorValue(e.id)),new glsl.nt(0),b)),{tileTextureCoord:x,tlbr:g,sampleAlphaOnly:b}}function Z(t,e){const o=(0,glsl.zi)(e.tileTextureCoord,new glsl.nt(1)),i=(0,glsl.jh)(e.tlbr.xy,e.tlbr.zw,o);let r=(0,glsl.US)(t.mosaicInfo.texture,i);return r=(0,glsl.Tk)((0,glsl.MM)(e.sampleAlphaOnly,new glsl.nt(.5)),r.aaaa,r),e.color.multiply(r)}class ComplexFillShader_ extends x{constructor(){super(...arguments),this.type="ComplexFillShader"}vertex(t,e){return{...super.vertex(t,e),...ComplexFillShader_P(this,t)}}fragment(t){const e=Z(this,t);return this.getFragmentOutput(e,t,new glsl.nt(0))}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(MosaicInfo_p)],ComplexFillShader_.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(n)],ComplexFillShader_.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(ComplexFillShader_q)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)(q))],ComplexFillShader_.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(class ComplexFillShader_G extends AFeatureShader_P{}))],ComplexFillShader_.prototype,"fragment",null);function utils_n(n){const t=1/n;return{antialiasing:t,blur:0+t}}class LineShader_q extends S{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(3,glsl.Zb)],LineShader_q.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(4,glsl.ZY)],LineShader_q.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(5,glsl.ZY)],LineShader_q.prototype,"normal",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(6,glsl.nt)],LineShader_q.prototype,"halfWidth",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(7,glsl.nt)],LineShader_q.prototype,"referenceHalfWidth",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(8,glsl.ZY)],LineShader_q.prototype,"zoomRange",void 0);class LineShader_A extends AFeatureShader_P{}class LineShader_F extends GraphShaderModule.k2{}function k(t){return(0,glsl.T9)(new glsl.nt(constants.Fb).multiply((0,glsl.PM)(t,new glsl.nt(constants.J5))),new glsl.nt(1))}function LineShader_D(t,i){const{halfWidth:e,normal:o}=t,l=k(e),a=(0,glsl.Bw)(o).multiply(e);return(0,glsl.qE)(l.multiply(e.subtract(a)).divide(i.add(l).subtract(new glsl.nt(1))),new glsl.nt(0),new glsl.nt(1))}function LineShader_L(t,i){const{id:e,offset:o,pos:l,normal:a,zoomRange:r}=i,{displayViewScreenMat3:s,displayViewMat3:n}=t.view,c=vvUtils_r(t,e,i.color),f=vvUtils_n(t,e),h=function LineShader_G(t,i){const{id:e,halfWidth:o,referenceHalfWidth:l}=i;if(vvUtils_t(t)){const a=vvUtils_l(t,e,new glsl.nt(2).multiply(l));return new glsl.nt(.5).multiply(o.divide((0,glsl.T9)(l,new glsl.nt(constants.Ni)))).multiply(a)}return o}(t,i),v=new glsl.nt(.5).multiply(t.antialiasingControls.antialiasing),w=(0,glsl.T9)(h.add(v),new glsl.nt(.45)).add(new glsl.nt(.1).multiply(v)),V=k(w).multiply(w).multiply(o),b=n.multiply(new glsl.eB(V,new glsl.nt(0))),S=s.multiply(new glsl.eB(l,new glsl.nt(1))).add(b),x=new glsl.nt(2).multiply((0,glsl.PM)(h,new glsl.nt(0))).add(t.clip(e,r)),g=new glsl.Zb(S.xy,x,1);return{color:c,opacity:f,halfWidth:w,normal:a,scaledOffset:V,scaledHalfWidth:h,glPosition:new glsl.Zb(g.xy,x,1)}}function LineShader_T(t,i){const{opacity:e,color:o}=t,l=LineShader_D(t,i);return e.multiply(o).multiply(l)}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],LineShader_F.prototype,"antialiasing",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],LineShader_F.prototype,"blur",void 0);class LineShader_ extends B{constructor(){super(...arguments),this.type="LineShader",this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,i){const e=LineShader_L(this,t);return{...e,...this.maybeRunHittest(t,i,e.halfWidth)}}fragment(t){const i=LineShader_T(t,this.antialiasingControls.blur);return this.getFragmentOutput(i,t)}hittest(t,i,e){const{viewMat3:o,tileMat3:l}=this.view,a=o.multiply(l),r=a.multiply(new glsl.eB(t.pos,1)),s=a.multiply(new glsl.eB(i.nextPos1,1)),n=a.multiply(new glsl.eB(i.nextPos2,1)),{distance:p,smallSymbolDistance:u,smallSymbolSizeThreshold:y}=this.hittestRequest,f=(0,glsl.PM)(e,y.multiply(.5)).multiply(p.subtract(u)),h=this.hittestRequest.position;return(0,glsl.jk)(j(h,r.xy,s.xy),j(h,r.xy,n.xy)).subtract(e).add(f)}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(LineShader_F)],LineShader_.prototype,"antialiasingControls",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(f)],LineShader_.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(h)],LineShader_.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(m)],LineShader_.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableSizeScaleStops_p)],LineShader_.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableSizeStops_f)],LineShader_.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(l)],LineShader_.prototype,"visualVariableSizeUnitValue",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(LineShader_q)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)(q))],LineShader_.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(LineShader_A))],LineShader_.prototype,"fragment",null);class OutlineFillShader_W extends S{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(3,glsl.ZY)],OutlineFillShader_W.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(4,glsl.Zb)],OutlineFillShader_W.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(5,glsl.ZY)],OutlineFillShader_W.prototype,"normal",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(6,glsl.nt)],OutlineFillShader_W.prototype,"halfWidth",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(7,glsl.nt)],OutlineFillShader_W.prototype,"referenceHalfWidth",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(8,glsl.ZY)],OutlineFillShader_W.prototype,"zoomRange",void 0);class OutlineFillShader_F extends LineShader_A{}function OutlineFillShader_R(t,o,i){const{id:e,bitset:r}=o,s=(0,utils.mh)(r,constants.Xx),m=(0,glsl.MM)(s,new glsl.nt(.5)),d=LineShader_L(t,o),c=(0,glsl.Tk)(m,d.halfWidth,new glsl.nt(0)),f=vvUtils_n(t,e),h=vvUtils_r(t,e,o.color),v=(0,glsl.Tk)(m,o.color,h.multiply(f)),V=t.view.displayViewScreenMat3.multiply(new glsl.eB(o.pos.xy,1)),b=t.clip(o.id),j=new glsl.Zb(V.xy,b,1),g=(0,glsl.Tk)(m,d.glPosition,j),w=i&&t.maybeRunHittest(o,i,m);return{isOutline:s,color:v,opacity:new glsl.nt(1),halfWidth:c,normal:d.normal,glPosition:g,...w}}class OutlineFillShader_A extends B{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(LineShader_F)],OutlineFillShader_A.prototype,"antialiasingControls",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(f)],OutlineFillShader_A.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(h)],OutlineFillShader_A.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(m)],OutlineFillShader_A.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableSizeScaleStops_p)],OutlineFillShader_A.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableSizeStops_f)],OutlineFillShader_A.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(l)],OutlineFillShader_A.prototype,"visualVariableSizeUnitValue",void 0);class OutlineFillShader_H extends OutlineFillShader_A{constructor(){super(...arguments),this.type="OutlineFillShader"}vertex(t,o){return OutlineFillShader_R(this,t,o)}fragment(t){const{color:o,isOutline:i}=t,e=(0,glsl.MM)(i,new glsl.nt(.5)),r=LineShader_T(t,this.antialiasingControls.blur),s=(0,glsl.Tk)(e,r,o),n=(0,glsl.Tk)(e,new glsl.nt(1/255),new glsl.nt(0));return this.getFragmentOutput(s,t,n)}hittest(t,o,i){return(0,glsl.Tk)(i,hittestUtils_q(this.hittestRequest),z(this,t,o))}}(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(OutlineFillShader_W)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)(q))],OutlineFillShader_H.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(OutlineFillShader_F))],OutlineFillShader_H.prototype,"fragment",null);class PatternFillShader_w extends FillShader_g{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(5,glsl.Zb)],PatternFillShader_w.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(6,glsl.nt)],PatternFillShader_w.prototype,"inverseRasterizationScale",void 0);function O(t,e){const r=e.tlbr.xy,o=e.tlbr.zw,i=o.x.subtract(r.x),n=r.y.subtract(o.y),a=new glsl.ZY(i,n).multiply(e.inverseRasterizationScale),p=a.multiply(t.view.requiredZoomFactor),u=function PatternFillShader_j(t){const e=new glsl.nt(1),r=new glsl.nt(0);return new glsl.U(e.divide(t.x),r.divide(t.y),0,(0,glsl.ze)(r.divide(t.x)),e.divide(t.y),0,0,0,1)}(p),c=t.localTileOffset.getPatternOffsetAtTileOrigin(a).divide(p),d=new glsl.eB(e.pos,1);return{tileTextureCoord:u.multiply(d).xy.subtract(c),tlbr:e.tlbr.divide(t.mosaicInfo.size.xyxy)}}function PatternFillShader_S(t,e){const r=(0,glsl.zi)(t.tileTextureCoord,new glsl.nt(1)),o=(0,glsl.jh)(t.tlbr.xy,t.tlbr.zw,r),i=(0,glsl.US)(e.texture,o);return t.color.multiply(i)}class PatternFillShader_T extends x{constructor(){super(...arguments),this.type="PatternFillShader"}vertex(t,e){return{...super.vertex(t,e),...O(this,t)}}fragment(t){const e=PatternFillShader_S(t,this.mosaicInfo);return this.getFragmentOutput(e,t,new glsl.nt(0))}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(MosaicInfo_p)],PatternFillShader_T.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(n)],PatternFillShader_T.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(PatternFillShader_w)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)(q))],PatternFillShader_T.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(class PatternFillShader_g extends AFeatureShader_P{}))],PatternFillShader_T.prototype,"fragment",null);class y extends OutlineFillShader_W{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(9,glsl.Zb)],y.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(10,glsl.nt)],y.prototype,"inverseRasterizationScale",void 0);class PatternOutlineFillShader_S extends OutlineFillShader_F{}class PatternOutlineFillShader_x extends OutlineFillShader_H{constructor(){super(...arguments),this.type="PatternOutlineFillShader"}vertex(t,r){return{...OutlineFillShader_R(this,t,r),...O(this,t)}}fragment(t){const{isOutline:r}=t,e=(0,glsl.MM)(r,new glsl.nt(.5)),o=LineShader_T(t,this.antialiasingControls.blur),s=PatternFillShader_S(t,this.mosaicInfo),n=(0,glsl.Tk)(e,o,s),p=(0,glsl.Tk)(e,new glsl.nt(1/255),new glsl.nt(0));return this.getFragmentOutput(n,t,p)}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(MosaicInfo_p)],PatternOutlineFillShader_x.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(n)],PatternOutlineFillShader_x.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(y)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)(q))],PatternOutlineFillShader_x.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(PatternOutlineFillShader_S))],PatternOutlineFillShader_x.prototype,"fragment",null);const ComplexOutlineFillShader_b=1/constants.cZ;class ComplexOutlineFillShader_w extends S{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(3,glsl.Zb)],ComplexOutlineFillShader_w.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(4,glsl.Zb)],ComplexOutlineFillShader_w.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(5,glsl.nt)],ComplexOutlineFillShader_w.prototype,"angle",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(6,glsl.nt)],ComplexOutlineFillShader_w.prototype,"aux1",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(7,glsl.nt)],ComplexOutlineFillShader_w.prototype,"aux2",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(8,glsl.ZY)],ComplexOutlineFillShader_w.prototype,"aux3",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(9,glsl.ZY)],ComplexOutlineFillShader_w.prototype,"aux4",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(10,glsl.ZY)],ComplexOutlineFillShader_w.prototype,"zoomRange",void 0);class ComplexOutlineFillShader_R extends OutlineFillShader_A{constructor(){super(...arguments),this.type="ComplexOutlineFillShader"}vertex(t,o){const{aux1:e,aux2:r,aux3:i,aux4:p}=t,a={...t,width:e,height:r,offset:i,scale:p.multiply(ComplexOutlineFillShader_b)},m=OutlineFillShader_R(this,{...t,halfWidth:e,referenceHalfWidth:r,offset:i,normal:p.subtract(constants.v9).multiply(ComplexOutlineFillShader_b)}),u=ComplexFillShader_P(this,a),f=(0,glsl.MM)(m.isOutline,new glsl.nt(.5));return{...m,...u,...this.maybeRunHittest(t,o,f)}}fragment(t){const{isOutline:o}=t,e=(0,glsl.MM)(o,new glsl.nt(.5)),r=LineShader_T(t,this.antialiasingControls.blur),i=Z(this,t),a=(0,glsl.Tk)(e,r,i),n=(0,glsl.Tk)(e,new glsl.nt(1/255),new glsl.nt(0));return this.getFragmentOutput(a,t,n)}hittest(t,o,e){return(0,glsl.Tk)(e,hittestUtils_q(this.hittestRequest),z(this,t,o))}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(MosaicInfo_p)],ComplexOutlineFillShader_R.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(n)],ComplexOutlineFillShader_R.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(ComplexOutlineFillShader_w)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)(q))],ComplexOutlineFillShader_R.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(class ComplexOutlineFillShader_C extends PatternOutlineFillShader_S{}))],ComplexOutlineFillShader_R.prototype,"fragment",null);var gradientFillConstants=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/gradientFillConstants.js");class GradientFillShader_P extends FillShader_g{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(5,glsl.Zb)],GradientFillShader_P.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(6,glsl.ZY)],GradientFillShader_P.prototype,"relativePosition",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(7,glsl.nt)],GradientFillShader_P.prototype,"gradientMethod",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(8,glsl.ZY)],GradientFillShader_P.prototype,"relativeGradientSize",void 0);class GradientFillShader_A extends x{constructor(){super(...arguments),this.type="GradientFillShader"}vertex(t,e){const{tlbr:i,relativePosition:r,gradientMethod:o,relativeGradientSize:n}=t,d=(0,glsl.Tk)((0,utils.K5)(t.bitset,gradientFillConstants.Q.isAbsolute),this.view.displayZoomFactor,new glsl.nt(1));return{...super.vertex(t,e),tlbr:i,relativePosition:r,gradientMethod:o,gradientSize:n.multiply(d),isDiscrete:(0,utils.mh)(t.bitset,gradientFillConstants.Q.isDiscrete)}}fragment(t){const{tlbr:e,relativePosition:i,gradientMethod:r,gradientSize:o,isDiscrete:g}=t,y=(0,glsl.Tk)((0,glsl.MM)(g,new glsl.nt(.5)),o.subtract(1),new glsl.ZY(0)),b=(0,glsl.j1)([(0,glsl.LC)(r,new glsl.nt(gradientFillConstants.m.rectangular)),()=>{const t=(0,glsl.tn)(i).add(y).divide(o);return(0,utils.zb)((0,glsl.T9)(t.x,t.y))}],[(0,glsl.LC)(r,new glsl.nt(gradientFillConstants.m.circular)),(0,utils.zb)((0,glsl.RZ)((0,glsl.Om)(i,i)).add(y.x).divide(o.x))],[!0,(0,utils.zb)(i.x.add(y.x).divide(o.x))]),j=new glsl.ZY((0,glsl.qE)(b,new glsl.nt(0),new glsl.nt(1)),.5),S=(0,glsl.jh)(e.xy,e.zw,j).divide(this.mosaicInfo.size),z=(0,glsl.US)(this.mosaicInfo.texture,S),F=t.color.a;return this.getFragmentOutput(z.multiply(F),t,new glsl.nt(0))}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(MosaicInfo_p)],GradientFillShader_A.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(GradientFillShader_P)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)(q))],GradientFillShader_A.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(class D extends AFeatureShader_P{}))],GradientFillShader_A.prototype,"fragment",null);var Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),core_Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js");class heatmapTextureUtils_l{constructor(e,t,r,o){this.dataType=e,this.samplingMode=t,this.pixelFormat=r,this.internalFormat=o}}new heatmapTextureUtils_l(webgl_enums.ld.HALF_FLOAT,webgl_enums.Cj.NEAREST,webgl_enums.Ab.RGBA,webgl_enums.Ab.RGBA);class HeatmapResources_f{destroy(){this._accumulateFramebuffer=(0,maybe.WD)(this._accumulateFramebuffer),this._resolveGradientTexture=(0,maybe.WD)(this._resolveGradientTexture),this._prevGradientHash=null,this._qualityProfile=null}get initialized(){return null!=this._accumulateFramebuffer&&null!=this._resolveGradientTexture}get accumulateFramebuffer(){return this._accumulateFramebuffer}get resolveGradientTexture(){return this._resolveGradientTexture}loadQualityProfile(e){if(null==this._qualityProfile){const r=function heatmapTextureUtils_n(n,i){const{textureFloatLinear:s,colorBufferFloat:f}=n.capabilities,u=f?.textureFloat,_=f?.textureHalfFloat,c=f?.floatBlend,m=n.driverTest.floatBufferBlend.result;if(!u&&!_)throw new core_Error.A("heatmap:missing-color-buffer-float","HeatmapRenderer requires the WebGL extension EXT_color_buffer_float or EXT_color_buffer_half_float or WEBGL_color_buffer_float.");if(!(c&&m||_))throw new core_Error.A("heatmap:missing-float-blend","HeatmapRenderer requires the WebGL extension EXT_float_blend or EXT_color_buffer_half_float."+(m?"":" This device claims support for EXT_float_blend, but does not actually support it."));const p=u&&c&&m,d=_,R=s,h=!!f?.R32F,b=!!f?.R16F;if(p&&R)return R||i.warnOnce("Missing WebGL extension OES_texture_float_linear. Heatmap quality may be reduced."),new heatmapTextureUtils_l(webgl_enums.ld.FLOAT,R?webgl_enums.Cj.LINEAR:webgl_enums.Cj.NEAREST,h?webgl_enums.Ab.RED:webgl_enums.Ab.RGBA,h?webgl_enums.H0.R32F:webgl_enums.Ab.RGBA);if(d)return new heatmapTextureUtils_l(webgl_enums.ld.HALF_FLOAT,webgl_enums.Cj.LINEAR,b?webgl_enums.Ab.RED:webgl_enums.Ab.RGBA,b?webgl_enums.H0.R16F:webgl_enums.Ab.RGBA);throw new core_Error.A("heatmap:missing-hardware-support","HeatmapRenderer requires WebGL extensions that allow it to render and blend to float or half float textures.")}(e,Logger.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.heatmap.HeatmapResources"));this._qualityProfile={...r,defines:{usesHalfFloatPrecision:r.dataType!==webgl_enums.ld.FLOAT}}}return this._qualityProfile}ensureAccumulateFBO(e,r,t){if(null==this._accumulateFramebuffer){const{dataType:u,samplingMode:o,pixelFormat:m,internalFormat:f}=this.loadQualityProfile(e),h=new TextureDescriptor.R(r,t);h.pixelFormat=m,h.internalFormat=f,h.dataType=u,h.samplingMode=o,h.wrapMode=webgl_enums.pF.CLAMP_TO_EDGE;const c=new RenderbufferDescriptor.q(webgl_enums.yQ.DEPTH_STENCIL,r,t);this._accumulateFramebuffer=new FramebufferObject.H(e,h,c)}else{const{width:e,height:a}=this._accumulateFramebuffer;e===r&&a===t||this._accumulateFramebuffer.resize(r,t)}return this._accumulateFramebuffer}ensureResolveGradientTexture(e,r,t){if(null==this._resolveGradientTexture){const r=new TextureDescriptor.R;r.wrapMode=webgl_enums.pF.CLAMP_TO_EDGE,this._resolveGradientTexture=new Texture.g(e,r),this._prevGradientHash=null}return this._prevGradientHash!==r&&(this._resolveGradientTexture.resize(t.length/4,1),this._resolveGradientTexture.setData(t),this._prevGradientHash=r),this._resolveGradientTexture}}function heatmapUtils_n(n){return n?.25:1}class HeatmapAccumulateShader_v extends S{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(5,glsl.ZY)],HeatmapAccumulateShader_v.prototype,"offset",void 0);class HeatmapAccumulateShader_g extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],HeatmapAccumulateShader_g.prototype,"radius",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],HeatmapAccumulateShader_g.prototype,"isFieldActive",void 0);class HeatmapAccumulateShader_F extends B{constructor(){super(...arguments),this.type="HeatmapAccumulateShader",this.usesHalfFloatPrecision=!1}vertex(t){const{radius:e,isFieldActive:s}=this.kernelControls,i=t.offset,l=s.multiply(this.storage.getVVData(t.id).x).add(new glsl.nt(1).subtract(s)),o=this.view.displayViewScreenMat3.multiply(new glsl.eB(t.pos,1)).add(this.view.displayViewMat3.multiply(new glsl.eB(i,0)).multiply(e)),r=this.clip(t.id);return{glPosition:new glsl.Zb(o.xy,r,1),offset:i,fieldValue:l,color:new glsl.Zb(0),...this.maybeRunHittest(t,{},null)}}fragment(t){const{offset:e,fieldValue:s}=t,i=(0,glsl.Bw)(e),l=(0,glsl.PM)(i,new glsl.nt(1)),o=new glsl.nt(1).subtract(i.multiply(i)),r=o.multiply(o),p=l.multiply(r).multiply(s).multiply(new glsl.nt(heatmapUtils_n(this.usesHalfFloatPrecision)));return this.getFragmentOutput(new glsl.Zb(p),t)}hittest(t){const{viewMat3:e,tileMat3:s}=this.view;return function R(t,u,n){return(0,glsl.Io)(t,n).subtract(u)}(e.multiply(s).multiply(new glsl.eB(t.pos,1)).xy,this.kernelControls.radius,this.hittestRequest.position)}}(0,tslib_es6._)([GraphShaderModule.E8],HeatmapAccumulateShader_F.prototype,"usesHalfFloatPrecision",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(HeatmapAccumulateShader_g)],HeatmapAccumulateShader_F.prototype,"kernelControls",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(HeatmapAccumulateShader_v))],HeatmapAccumulateShader_F.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(class HeatmapAccumulateShader_x extends AFeatureShader_P{}))],HeatmapAccumulateShader_F.prototype,"fragment",null);class HeatmapResolveShader_g extends GraphShaderModule.ZA{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(0,glsl.ZY)],HeatmapResolveShader_g.prototype,"position",void 0);class HeatmapResolveShader_f extends GraphShaderModule.HS{}class HeatmapResolveShader_h extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],HeatmapResolveShader_h.prototype,"texture",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.ZY)],HeatmapResolveShader_h.prototype,"minAndInvRange",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],HeatmapResolveShader_h.prototype,"normalization",void 0);class HeatmapResolveShader_w extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],HeatmapResolveShader_w.prototype,"texture",void 0);class HeatmapResolveShader_b extends GraphShaderModule.A{constructor(){super(...arguments),this.type="HeatmapResolveShader",this.usesHalfFloatPrecision=!1}vertex(t){return{glPosition:new glsl.Zb(t.position.multiply(2).subtract(1),1,1),uv:t.position}}fragment(t){const{accumulatedDensity:e,gradient:o}=this;let s=(0,glsl.US)(e.texture,t.uv).r.divide(new glsl.nt(heatmapUtils_n(this.usesHalfFloatPrecision)));s=s.multiply(e.normalization),s=s.subtract(e.minAndInvRange.x).multiply(e.minAndInvRange.y);const r=(0,glsl.US)(o.texture,new glsl.ZY(s,.5)),i=new GraphShaderModule.mm;return i.fragColor=new glsl.Zb(r.rgb.multiply(r.a),r.a),i}}(0,tslib_es6._)([GraphShaderModule.E8],HeatmapResolveShader_b.prototype,"usesHalfFloatPrecision",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(HeatmapResolveShader_h)],HeatmapResolveShader_b.prototype,"accumulatedDensity",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(HeatmapResolveShader_w)],HeatmapResolveShader_b.prototype,"gradient",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(HeatmapResolveShader_g))],HeatmapResolveShader_b.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(HeatmapResolveShader_f))],HeatmapResolveShader_b.prototype,"fragment",null);function HeatmapTechnique_f(e){return e.key.level+1}const HeatmapTechnique_={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:{write:!1,test:{ref:HeatmapTechnique_f,compare:webgl_enums.MT.GEQUAL,mask:255,op:{fail:webgl_enums.eA.KEEP,zFail:webgl_enums.eA.KEEP,zPass:webgl_enums.eA.REPLACE}}}},HeatmapTechnique_w={...HeatmapTechnique_,stencil:!1},HeatmapTechnique_b={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:!1};function HeatmapTechnique_g(e,t){const{referenceScale:r,radius:s}=e.uniforms;return s*(0!==r?r/t.scale:1)}const Q=360/254;var X;!function(t){t[t.Color=0]="Color",t[t.Outline=1]="Outline",t[t.Halo=2]="Halo"}(X||(X={}));class Y extends S{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(3,glsl.Zb)],Y.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(4,glsl.ZY)],Y.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(5,glsl.ZY)],Y.prototype,"textureUV",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(6,glsl.nt)],Y.prototype,"fontSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(7,glsl.nt)],Y.prototype,"referenceSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(8,glsl.Zb)],Y.prototype,"outlineColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(9,glsl.Zb)],Y.prototype,"haloColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(10,glsl.ZY)],Y.prototype,"outlineAndHaloSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(11,glsl.ZY)],Y.prototype,"zoomRange",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(12,glsl.nt)],Y.prototype,"clipAngle",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(13,glsl.Zb)],Y.prototype,"referenceSymbol",void 0);class $ extends GraphShaderModule.Y7{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(14,glsl.ZY)],$.prototype,"offsetNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(15,glsl.ZY)],$.prototype,"offsetNextVertex2",void 0);class et extends B{constructor(){super(...arguments),this.type="TextShader",this.computeAttributes={offset:["offsetNextVertex1","offsetNextVertex2"]},this.textRenderPassType=X.Color,this.isBackgroundPass=!1,this.isLabel=!1}clipLabel(t,e,o){const s=e.multiply(Q),l=(0,glsl.tn)(this.view.rotation.subtract(s)),a=(0,glsl.jk)(new glsl.nt(360).subtract(l),l);let r=new glsl.nt(0);const n=(0,glsl.RI)(this.view.currentZoom.multiply(definitions.fq)).divide(definitions.fq),p=t.x,h=t.y,f=new glsl.nt(1).subtract((0,glsl.PM)(p,n)).multiply(2),v=(0,glsl.PM)(new glsl.nt(90),a).multiply(2),w=new glsl.nt(2).multiply(new glsl.nt(1).subtract((0,glsl.PM)(n,h)));return r=r.add(o.multiply(f)),r=r.add(o.multiply(v)),r=r.add(w),r}vertex(t,e){const i=(0,utils.mh)(t.bitset,constants.bg),s=new glsl.nt(1).subtract(i);let l=t.fontSize,a=l.divide(constants.au);const r=this.textRenderPassType===X.Outline?t.outlineColor:this.textRenderPassType===X.Halo?t.haloColor:this._getVertexColor(t),n=this.isLabel?this.storage.getLabelVisibility(t.id):new glsl.nt(1),p=this.isLabel?r.multiply(n):r,d=this.view.displayViewScreenMat3.multiply(new glsl.eB(t.pos,1));let u=t.offset,m=new glsl.nt(1),c=glsl.U.identity(),j=new glsl.ZY(0);if(this.isLabel){if(!t.referenceSymbol)throw new Error("InternalError: Optional attribute 'referenceSymbol' expected for labels");const e=t.referenceSymbol,i=e.xy,s=e.z,l=this._unpackDirection(e.w),a=vvUtils_l(this,t.id,s).divide(2),r=l.multiply(a.add(definitions.C2));j=i.add(r),u=u.add(j)}else m=vvUtils_l(this,t.id,t.referenceSize).divide(t.referenceSize),l=l.multiply(m),a=a.multiply(m),u=u.multiply(m),c=vvUtils_u(this,t.id),u=c.multiply(new glsl.eB(u,0)).xy;const R=(0,utils.mh)(t.bitset,constants.ti),C=this._getViewRotationMatrix(R).multiply(new glsl.eB(u,0));let O=this.isLabel?this.clipLabel(t.zoomRange,t.clipAngle,R):this.clip(t.id,t.zoomRange);O=this.isBackgroundPass?O.add(s.multiply(2)):O.add(i.multiply(2));let M=new glsl.nt(0);if(this.textRenderPassType===X.Outline&&(O=O.add((0,glsl.Tk)((0,glsl.LC)(t.outlineAndHaloSize.x,new glsl.nt(0)),new glsl.nt(2),new glsl.nt(0))),M=new glsl.nt(t.outlineAndHaloSize.x).divide(a).divide(constants.$w)),this.textRenderPassType===X.Halo){const e=t.outlineAndHaloSize.x,i=new glsl.nt(t.outlineAndHaloSize.y);O=O.add((0,glsl.Tk)((0,glsl.LC)(i,new glsl.nt(0)),new glsl.nt(2),new glsl.nt(0))),M=i.add(e).divide(a).divide(constants.$w)}const L=this.isLabel?(0,glsl.or)((0,glsl.MM)(O,new glsl.nt(1)),(0,glsl.$5)(n,new glsl.nt(0))):new glsl.x(!1);return{glPosition:new glsl.Zb(d.xy.add(C.xy),O,1),color:p,size:a,textureUV:t.textureUV.divide(this.mosaicInfo.size),antialiasingWidth:new glsl.nt(.105*constants.au).divide(l).divide(this.view.pixelRatio),outlineDistanceOffset:M,...this.maybeRunHittest(t,e,{vvSizeAdjustment:m,vvRotation:c,labelOffset:j,labelClipped:L})}}_getViewRotationMatrix(t){const e=this.view.displayViewMat3,i=this.view.displayMat3,o=new glsl.nt(1).subtract(t);return e.multiply(t).add(i.multiply(o))}fragment(t){const e=new glsl.nt(2/8),i=new glsl.nt(1).subtract(e),o=(0,glsl.US)(this.mosaicInfo.texture,t.textureUV).a;let s=i.subtract(t.outlineDistanceOffset);this.highlight&&(s=s.divide(2));const l=t.antialiasingWidth,a=(0,glsl.TF)(s.subtract(l),s.add(l),o);return this.getFragmentOutput(t.color.multiply(a),t)}hittest(t,e,{vvSizeAdjustment:i,vvRotation:o,labelOffset:s,labelClipped:l}){let a,r,n;this.isLabel?(a=new glsl.eB(t.offset.add(s),0),r=new glsl.eB(e.offsetNextVertex1.add(s),0),n=new glsl.eB(e.offsetNextVertex2.add(s),0)):(a=o.multiply(new glsl.eB(t.offset.multiply(i),0)),r=o.multiply(new glsl.eB(e.offsetNextVertex1.multiply(i),0)),n=o.multiply(new glsl.eB(e.offsetNextVertex2.multiply(i),0)));const{viewMat3:p,tileMat3:d}=this.view,u=p.multiply(d).multiply(new glsl.eB(t.pos,1)),y=u.add(d.multiply(a)).xy,m=u.add(d.multiply(r)).xy,c=u.add(d.multiply(n)).xy,f=P(this.hittestRequest.position,y.xy,m.xy,c.xy);return this.isLabel?(0,glsl.Tk)(l,hittestUtils_q(this.hittestRequest),f):f}_unpackDirection(t){const e=new glsl.Ai(t),i=(0,glsl.Sj)(e,new glsl.Ai(2)),o=(0,glsl.nf)(e,new glsl.Ai(3));return new glsl.ZY(new glsl.nt(i).subtract(1),new glsl.nt(o).subtract(1))}_getVertexColor(t){let e=t.color;if(this.visualVariableColor){const i=this.storage.getColorValue(t.id);e=this.visualVariableColor.getColor(i,t.color,new glsl.x(!1))}if(this.visualVariableOpacity){const i=this.storage.getOpacityValue(t.id),o=this.visualVariableOpacity.getOpacity(i);e=e.multiply(o)}return e}}(0,tslib_es6._)([(0,GraphShaderModule.uK)(f)],et.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(h)],et.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableRotation_d)],et.prototype,"visualVariableRotation",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(m)],et.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableSizeScaleStops_p)],et.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableSizeStops_f)],et.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(l)],et.prototype,"visualVariableSizeUnitValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(MosaicInfo_p)],et.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([GraphShaderModule.E8],et.prototype,"textRenderPassType",void 0),(0,tslib_es6._)([GraphShaderModule.E8],et.prototype,"isBackgroundPass",void 0),(0,tslib_es6._)([GraphShaderModule.E8],et.prototype,"isLabel",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(Y)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)($))],et.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(class tt extends AFeatureShader_P{}))],et.prototype,"fragment",null);var gradientStrokeConstants=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/gradientStrokeConstants.js");class GradientStrokeShader_F extends LineShader_q{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(9,glsl.nt)],GradientStrokeShader_F.prototype,"accumulatedDistance",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(10,glsl.nt)],GradientStrokeShader_F.prototype,"totalLength",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(11,glsl.nt)],GradientStrokeShader_F.prototype,"gradientSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(12,glsl.ZY)],GradientStrokeShader_F.prototype,"segmentDirection",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(13,glsl.Zb)],GradientStrokeShader_F.prototype,"tlbr",void 0);class GradientStrokeShader_G extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],GradientStrokeShader_G.prototype,"isColorPass",void 0);class I extends LineShader_{constructor(){super(...arguments),this.type="GradientStrokeShader"}vertex(t,e){const{totalLength:i,gradientSize:o,segmentDirection:s,tlbr:r}=t,p=LineShader_L(this,t),m=(0,utils.mh)(t.bitset,gradientStrokeConstants.Q.isAlongLine),c=i.divide(this.view.displayZoomFactor),h=(0,glsl.Tk)((0,utils.K5)(t.bitset,gradientStrokeConstants.Q.isAbsoluteSize),(()=>{const t=(0,glsl.Tk)((0,glsl.MM)(m,new glsl.nt(.5)),c,p.halfWidth);return o.divide(t)}),o),u=t.accumulatedDistance.divide(this.view.displayZoomFactor).add((0,glsl.Om)(s,p.scaledOffset)).divide(c),y=r.divide(this.mosaicInfo.size.xyxy);return{...p,tlbr:y,relativePositionAlongLine:u,relativeGradientSize:h,isAlongLine:(0,utils.mh)(t.bitset,gradientStrokeConstants.Q.isAlongLine),isDiscrete:(0,utils.mh)(t.bitset,gradientStrokeConstants.Q.isDiscrete),...this.maybeRunHittest(t,e,p.halfWidth)}}fragment(t){const{isAlongLine:e,isDiscrete:i,relativePositionAlongLine:o,relativeGradientSize:s,normal:r,tlbr:l}=t,g=LineShader_D(t,this.antialiasingControls.blur),v=new glsl.nt(.5).multiply(r.y).add(new glsl.nt(.5)),f=(0,glsl.Tk)((0,glsl.MM)(e,new glsl.nt(.5)),o,v),w=(0,glsl.Tk)((0,glsl.MM)(i,new glsl.nt(.5)),s.subtract(1),new glsl.nt(0)),b=(0,utils.zb)(f.add(w).divide(s)),x=(0,glsl.jh)(l.xy,l.zw,new glsl.ZY((0,glsl.qE)(b,new glsl.nt(0),new glsl.nt(1)),.5)),S=(0,glsl.US)(this.mosaicInfo.texture,x),L=t.opacity.multiply(g),A=this.getFragmentOutput(S.multiply(L),t),D=(0,glsl.PM)(new glsl.nt(.5),this.technique.isColorPass).multiply((0,has.A)("gradient-depth-epsilon")),F=(0,glsl.PM)(new glsl.nt(0),r.y).multiply(new glsl.nt((0,has.A)("gradient-depth-bias")).subtract(D));return A.glFragDepth=(0,glsl.qE)((0,glsl.Bw)(r).add(F),new glsl.nt(0),new glsl.nt(1)),A}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(MosaicInfo_p)],I.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(GradientStrokeShader_G)],I.prototype,"technique",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(GradientStrokeShader_F)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)(q))],I.prototype,"vertex",null);var screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),cim_constants=__webpack_require__("./node_modules/@arcgis/core/symbols/cim/constants.js");class TexturedLineShader_W extends LineShader_q{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(9,glsl.nt)],TexturedLineShader_W.prototype,"accumulatedDistance",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(10,glsl.ZY)],TexturedLineShader_W.prototype,"segmentDirection",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(11,glsl.nt)],TexturedLineShader_W.prototype,"offsetAlongLine",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(12,glsl.nt)],TexturedLineShader_W.prototype,"capType",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(13,glsl.Zb)],TexturedLineShader_W.prototype,"tlbr",void 0);class TexturedLineShader_H extends LineShader_{constructor(){super(...arguments),this.type="TexturedLineShader"}_getDistanceRatio(t,e){const s=(0,utils.mh)(t.bitset,constants.kx);return s.multiply((0,glsl.T9)(e,new glsl.nt(.25)).multiply(new glsl.nt(2))).add(new glsl.nt(1).subtract(s).multiply((0,screenUtils.Lz)(1)))}_getSDFAlpha(t){const{halfWidth:e,normal:i,tlbr:a,patternSize:r,accumulatedDistance:l,offsetAlongLine:x,dashToPx:v,capType:D}=t,S=r.x.divide(cim_constants.zA).multiply(v),j=(0,glsl.jc)(l.add(x).divide(S)),A=(0,glsl.jh)(a.xy,a.zw,new glsl.ZY(j,.5)),z=(0,utils.Rj)((0,glsl.US)(this.mosaicInfo.texture,A)).multiply(2).subtract(1).multiply(cim_constants.gR).multiply(v),F=i.y.multiply(e),T=(0,glsl.j1)([(0,glsl.LC)(D,new glsl.nt(1)),z.subtract(e)],[(0,glsl.LC)(D,new glsl.nt(2)),(0,glsl.RZ)((0,glsl.n7)((0,glsl.T9)(z,new glsl.nt(0)),new glsl.nt(2)).add(F.multiply(F))).subtract(e)],[!0,z]),_=(0,glsl.qE)(new glsl.nt(.25).subtract(T),new glsl.nt(0),new glsl.nt(1));return new glsl.Zb(_)}_getPatternColor(t){const{halfWidth:e,normal:i,color:s,accumulatedDistance:o,patternSize:a,sampleAlphaOnly:r,tlbr:l}=t,n=a.y.multiply(new glsl.nt(2).multiply(e).divide(a.x)),y=(0,glsl.jc)(o.divide(n)),h=new glsl.nt(.5).multiply(i.y).add(new glsl.nt(.5)),f=(0,glsl.jh)(l.xy,l.zw,new glsl.ZY(h,y));let w=(0,glsl.US)(this.mosaicInfo.texture,f);return null!=this.visualVariableColor&&(w=(0,glsl.Tk)((0,glsl.MM)(r,new glsl.nt(.5)),new glsl.Zb(s.a),s)),w}vertex(t,e){const{segmentDirection:i,tlbr:s,bitset:o}=t,a=LineShader_L(this,t),r=t.accumulatedDistance.divide(this.view.displayZoomFactor).add((0,glsl.Om)(i,a.scaledOffset)),l=new glsl.ZY(s.z.subtract(s.x),s.w.subtract(s.y)),n=s.divide(this.mosaicInfo.size.xyxy),c=(0,utils.mh)(o,constants.b5),m=(0,utils.mh)(o,constants.cn),d=(0,glsl.Tk)((0,glsl.MM)(c,new glsl.nt(.5)),this._getDistanceRatio(t,a.scaledHalfWidth),new glsl.nt(1));return{...a,tlbr:n,patternSize:l,accumulatedDistance:r,isSDF:c,sampleAlphaOnly:m,dashToPx:d,offsetAlongLine:t.offsetAlongLine,capType:t.capType,...this.maybeRunHittest(t,e,a.halfWidth)}}fragment(t){const{color:e,opacity:i,isSDF:s}=t,o=LineShader_D(t,this.antialiasingControls.blur),a=(0,glsl.Tk)((0,glsl.MM)(s,new glsl.nt(.5)),this._getSDFAlpha(t),this._getPatternColor(t)),r=e.multiply(i).multiply(o).multiply(a);return this.getFragmentOutput(r,t)}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(MosaicInfo_p)],TexturedLineShader_H.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(TexturedLineShader_W)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)(q))],TexturedLineShader_H.prototype,"vertex",null);class MarkerShader_X extends S{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(3,glsl.Zb)],MarkerShader_X.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(4,glsl.Zb)],MarkerShader_X.prototype,"outlineColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(5,glsl.ZY)],MarkerShader_X.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(6,glsl.ZY)],MarkerShader_X.prototype,"textureUV",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(7,glsl.Zb)],MarkerShader_X.prototype,"sizing",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(8,glsl.nt)],MarkerShader_X.prototype,"placementAngle",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(9,glsl.nt)],MarkerShader_X.prototype,"sdfDecodeCoeff",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(10,glsl.ZY)],MarkerShader_X.prototype,"zoomRange",void 0);class MarkerShader_Y extends GraphShaderModule.Y7{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(12,glsl.ZY)],MarkerShader_Y.prototype,"offsetNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(13,glsl.ZY)],MarkerShader_Y.prototype,"offsetNextVertex2",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(14,glsl.ZY)],MarkerShader_Y.prototype,"textureUVNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(15,glsl.ZY)],MarkerShader_Y.prototype,"textureUVNextVertex2",void 0);function MarkerShader_$(t,e,i,o){return e.multiply(t.x).add(i.multiply(t.y)).add(o.multiply(t.z))}function MarkerShader_tt(t){return t.multiply(t).divide(128)}class MarkerShader_et extends B{constructor(){super(...arguments),this.type="MarkerShader",this.computeAttributes={offset:["offsetNextVertex1","offsetNextVertex2"],textureUV:["textureUVNextVertex1","textureUVNextVertex2"]}}vertex(t,e){const i=MarkerShader_tt(t.sizing.x),o=MarkerShader_tt(t.sizing.y),s=MarkerShader_tt(t.sizing.z),l=t.placementAngle,r=(0,utils.mh)(t.bitset,markerConstants.c.bitset.isSDF),y=(0,utils.mh)(t.bitset,markerConstants.c.bitset.isMapAligned),h=(0,utils.mh)(t.bitset,markerConstants.c.bitset.scaleSymbolsProportionally),c=(0,utils.K5)(t.bitset,markerConstants.c.bitset.colorLocked),x=vvUtils_n(this,t.id),v=vvUtils_r(this,t.id,t.color,c).multiply(x),f=this.view.displayViewScreenMat3.multiply(new glsl.eB(t.pos.xy,1)),V=vvUtils_l(this,t.id,s).divide(s),w=i.multiply(V),S=t.offset.xy.multiply(V);let b=o.multiply(h.multiply(V.subtract(1)).add(1));b=(0,glsl.jk)(b,(0,glsl.T9)(w.subtract(.99),new glsl.nt(0)));const g=(0,glsl.T9)(b,new glsl.nt(1)),C=(0,glsl.jk)(b,new glsl.nt(1)),z=glsl.U.fromRotation(l.multiply(constants.rp)),_=vvUtils_u(this,t.id),j=this._getViewRotationMatrix(y).multiply(_).multiply(z).multiply(new glsl.eB(S.xy,0)),U=this.clip(t.id,t.zoomRange),N=new glsl.Zb(f.xy.add(j.xy),U,1),D=t.textureUV.divide(this.mosaicInfo.size),F=t.outlineColor.multiply(C),k=(0,utils.mh)(t.bitset,markerConstants.c.bitset.overrideOutlineColor),I=t.sdfDecodeCoeff.multiply(w);return{glPosition:N,color:v,textureUV:D,outlineColor:F,outlineSize:g,distanceToPx:I,isSDF:r,overrideOutlineColor:k,...this.maybeRunHittest(t,e,{pos:t.pos,size:w,sizeCorrection:V,isMapAligned:y,vvRotationMat3:_,placementMat3:z,outlineSize:g,distanceToPx:I,isSDF:r})}}fragment(t){const e=this._getColor(t.textureUV,t);return this.getFragmentOutput(e,t)}hittest(t,e,i){return(0,glsl.Tk)((0,glsl.Xe)(i.size,this.hittestRequest.smallSymbolSizeThreshold),this._hittestSmallMarker(t,e,i),this._hittestMarker(t,e,i))}_getViewRotationMatrix(t){const e=this.view.displayViewMat3,i=this.view.displayMat3,o=new glsl.nt(1).subtract(t);return e.multiply(t).add(i.multiply(o))}_getViewScreenMatrix(t){const e=this.view.viewMat3.multiply(this.view.tileMat3),i=this.view.tileMat3,o=new glsl.nt(1).subtract(t);return e.multiply(t).add(i.multiply(o))}_getColor(t,e){return(0,glsl.Tk)((0,glsl.LC)(e.isSDF,new glsl.nt(1)),this._getSDFColor(t,e),this._getSpriteColor(t,e))}_getSpriteColor(t,e){return(0,glsl.US)(this.mosaicInfo.texture,t).multiply(e.color)}_getSDFColor(t,e){const i=(0,glsl.US)(this.mosaicInfo.texture,t),o=new glsl.nt(.5).subtract((0,utils.Rj)(i)).multiply(e.distanceToPx).multiply(constants.V5),s=(0,glsl.qE)(new glsl.nt(.5).subtract(o),new glsl.nt(0),new glsl.nt(1)),l=e.color.multiply(s);let r=e.outlineSize;this.highlight&&(r=(0,glsl.T9)(r,e.overrideOutlineColor.multiply(4)));const a=r.multiply(.5),p=(0,glsl.tn)(o).subtract(a),d=(0,glsl.qE)(new glsl.nt(.5).subtract(p),new glsl.nt(0),new glsl.nt(1)),m=(0,glsl.jh)(e.outlineColor,e.color,e.overrideOutlineColor).multiply(d);return new glsl.nt(1).subtract(m.a).multiply(l).add(m)}_hittestSmallMarker(t,e,i){const{position:o,distance:s,smallSymbolDistance:l}=this.hittestRequest,r=s.subtract(l),{viewMat3:p,tileMat3:n}=this.view,u=p.multiply(n).multiply(new glsl.eB(i.pos,1)).xy,d=i.size.multiply(.5);return(0,glsl.Io)(u,o).subtract(d).add(r)}_hittestMarker(t,e,i){const{pos:o,sizeCorrection:s,isMapAligned:l}=i,r=new glsl.eB(t.offset.multiply(s),0),p=new glsl.eB(e.offsetNextVertex1.multiply(s),0),n=new glsl.eB(e.offsetNextVertex2.multiply(s),0),{viewMat3:u,tileMat3:d}=this.view,m=u.multiply(d).multiply(new glsl.eB(o,1)),h=this._getViewScreenMatrix(l).multiply(i.vvRotationMat3).multiply(i.placementMat3),c=m.add(h.multiply(r)).xy,x=m.add(h.multiply(p)).xy,v=m.add(h.multiply(n)).xy,f=this.hittestRequest.position,V=this.hittestRequest.distance,w=P(f,c,x,v);return(0,glsl.Tk)((0,glsl.MM)(w,V),w,this._hittestSamples(c,x,v,t,e,i))}_hittestSamples(t,e,i,o,s,l){const{outlineSize:r,isSDF:a,distanceToPx:p}=l,n=this.hittestRequest.position,d=this.hittestRequest.distance,y=hittestUtils_h(n.add(new glsl.ZY((0,glsl.ze)(d),(0,glsl.ze)(d))),t,e,i),h=hittestUtils_h(n.add(new glsl.ZY(0,(0,glsl.ze)(d))),t,e,i),c=hittestUtils_h(n.add(new glsl.ZY(d,(0,glsl.ze)(d))),t,e,i),x=hittestUtils_h(n.add(new glsl.ZY((0,glsl.ze)(d),0)),t,e,i),v=hittestUtils_h(n,t,e,i),f=hittestUtils_h(n.add(new glsl.ZY(d,0)),t,e,i),V=hittestUtils_h(n.add(new glsl.ZY((0,glsl.ze)(d),d)),t,e,i),w=hittestUtils_h(n.add(new glsl.ZY(0,d)),t,e,i),S=hittestUtils_h(n.add(new glsl.ZY(d,d)),t,e,i),M=o.textureUV.divide(this.mosaicInfo.size),z=s.textureUVNextVertex1.divide(this.mosaicInfo.size),_=s.textureUVNextVertex2.divide(this.mosaicInfo.size),j={color:new glsl.Zb(1),outlineColor:new glsl.Zb(1),overrideOutlineColor:new glsl.nt(1),outlineSize:r,distanceToPx:p,isSDF:a};let R=new glsl.nt(0);return R=R.add(g(y).multiply(this._getColor(MarkerShader_$(y,M,z,_),j).a)),R=R.add(g(h).multiply(this._getColor(MarkerShader_$(h,M,z,_),j).a)),R=R.add(g(c).multiply(this._getColor(MarkerShader_$(c,M,z,_),j).a)),R=R.add(g(x).multiply(this._getColor(MarkerShader_$(x,M,z,_),j).a)),R=R.add(g(v).multiply(this._getColor(MarkerShader_$(v,M,z,_),j).a)),R=R.add(g(f).multiply(this._getColor(MarkerShader_$(f,M,z,_),j).a)),R=R.add(g(V).multiply(this._getColor(MarkerShader_$(V,M,z,_),j).a)),R=R.add(g(w).multiply(this._getColor(MarkerShader_$(w,M,z,_),j).a)),R=R.add(g(S).multiply(this._getColor(MarkerShader_$(S,M,z,_),j).a)),(0,glsl.PM)(R,new glsl.nt(.05)).multiply(hittestUtils_q(this.hittestRequest))}}(0,tslib_es6._)([(0,GraphShaderModule.uK)(f)],MarkerShader_et.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(h)],MarkerShader_et.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableRotation_d)],MarkerShader_et.prototype,"visualVariableRotation",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(m)],MarkerShader_et.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableSizeScaleStops_p)],MarkerShader_et.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(VisualVariableSizeStops_f)],MarkerShader_et.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule.uK)(l)],MarkerShader_et.prototype,"visualVariableSizeUnitValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(MosaicInfo_p)],MarkerShader_et.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(MarkerShader_X)),(0,tslib_es6.a)(1,(0,GraphShaderModule.hF)(MarkerShader_Y))],MarkerShader_et.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(class MarkerShader_Z extends AFeatureShader_P{}))],MarkerShader_et.prototype,"fragment",null);var string=__webpack_require__("./node_modules/@arcgis/core/core/string.js"),TypedShaderProgram=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/typed/TypedShaderProgram.js");class o{constructor(){this.computeAttributes={}}get locationsMap(){const t=new Map;for(const e in this.locations)t.set(e,this.locations[e].index);return t}get optionPropertyKeys(){if(!this._optionPropertyKeys){const t=new Set(Object.keys(this.options));this._optionPropertyKeys=t}return this._optionPropertyKeys}get _transformFeedbackBindings(){return[]}get locationInfo(){if(!this._locationInfo){const e=this.locationsMap,o=Array.from(e.entries()).map((([t,e])=>`${t}.${e}`)).join("."),n=(0,string.Wm)(o);this._locationInfo={hash:n,stringHash:o,locations:e,computeAttributeMap:this.computeAttributes}}return this._locationInfo}get renamedLocationsMap(){const t=new Map;for(const[e,o]of this.locationsMap.entries())t.set("a_"+e,o);return t}getShaderKey(t,e,o){return`${Object.keys(t).map((e=>`${e}.${t[e]}`)).join(".")}.${Object.keys(o).filter((t=>o[t])).map((t=>`${t}_${o[t].toString()}`)).join(".")}.${Object.keys(e).filter((t=>this.optionPropertyKeys.has(t))).join(".")}`}getProgram(t,o,n,r){let i="",s="";for(const e in n)if(n[e]){const t="boolean"==typeof n[e]?`#define ${e}\n`:`#define ${e} ${n[e]}\n`;i+=t,s+=t}return i+=this.vertexShader,s+=this.fragmentShader,new TypedShaderProgram.K(i,s,this.renamedLocationsMap,this.locationInfo,this._getUniformBindings(o),this._transformFeedbackBindings)}_getUniformBindings(t){const e=[];for(const o in this.required){const t=this.required[o];e.push({uniformHydrated:null,shaderModulePath:o,uniformName:o,uniformType:t.type,uniformArrayElementType:GLSLShaderModule_n(t),uniformArrayLength:r(t)})}for(const o in t){const i=this.options[o];if(t[o])for(const t in i){const s=i[t];e.push({uniformHydrated:null,shaderModulePath:`${o}.${t}`,uniformName:t,uniformType:s.type,uniformArrayElementType:GLSLShaderModule_n(s),uniformArrayLength:r(s)})}}return e}}const GLSLShaderModule_n=t=>"array"===t.type?t.elementType?.type:void 0,r=t=>"array"===t.type?t.size:void 0;var resolver=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js");const PieChartShader_p={hittestDist:glsl.nt,hittestPos:glsl.ZY},PieChartShader_y={filterFlags:glsl.z7,animation:glsl.z7,visualVariableData:glsl.z7,dataDriven0:glsl.z7,dataDriven1:glsl.z7,dataDriven2:glsl.z7,gpgpu:glsl.z7,size:glsl.nt},PieChartShader_d={displayViewScreenMat3:glsl.U,displayViewMat3:glsl.U,displayMat3:glsl.U,viewMat3:glsl.U,tileMat3:glsl.U,displayZoomFactor:glsl.nt,requiredZoomFactor:glsl.nt,tileOffset:glsl.ZY,currentScale:glsl.nt,currentZoom:glsl.nt,metersPerSRUnit:glsl.nt};class PieChartShader_u extends o{constructor(){super(...arguments),this.vertexShader=(0,resolver.Q)("materials/pie/pie.vert"),this.fragmentShader=(0,resolver.Q)("materials/pie/pie.frag"),this.required={...PieChartShader_y,...PieChartShader_d,outlineWidth:glsl.nt,colors:glsl.My,defaultColor:glsl.Zb,othersColor:glsl.Zb,outlineColor:glsl.Zb,donutRatio:glsl.nt,sectorThreshold:glsl.nt},this.options={hittestUniforms:PieChartShader_p,visualVariableSizeMinMaxValue:{minMaxValueAndSize:glsl.Zb},visualVariableSizeScaleStops:{sizes:{...glsl.My.ofType(glsl.nt,8),type:"array",elementType:glsl.nt,size:8},values:{...glsl.My.ofType(glsl.nt,8),type:"array",elementType:glsl.nt,size:8}},visualVariableSizeStops:{sizes:{...glsl.My.ofType(glsl.nt,8),type:"array",elementType:glsl.nt,size:8},values:{...glsl.My.ofType(glsl.nt,8),type:"array",elementType:glsl.nt,size:8}},visualVariableSizeUnitValue:{unitValueToPixelsRatio:glsl.nt},visualVariableOpacity:{opacities:{...glsl.My.ofType(glsl.nt,8),type:"array",elementType:glsl.nt,size:8},opacityValues:{...glsl.My.ofType(glsl.nt,8),type:"array",elementType:glsl.nt,size:8}}},this.locations={pos:{index:0,type:glsl.ZY},id:{index:1,type:glsl.eB},bitset:{index:2,type:glsl.nt},offset:{index:3,type:glsl.ZY},texCoords:{index:4,type:glsl.ZY},size:{index:5,type:glsl.ZY},referenceSize:{index:6,type:glsl.nt},zoomRange:{index:7,type:glsl.ZY}},this.defines={VV_SIZE_MIN_MAX_VALUE:"boolean",VV_SIZE_SCALE_STOPS:"boolean",VV_SIZE_FIELD_STOPS:"boolean",VV_SIZE_UNIT_VALUE:"boolean",VV_OPACITY:"boolean",HITTEST:"boolean",numberOfFields:"number",highlight:"boolean",inside:"boolean",outside:"boolean"}}setNumberOfFields(e){this.required.colors={...glsl.My.ofType(glsl.Zb,e),type:"array",elementType:glsl.Zb,size:e}}}const TechniqueRegistry_j={fill:new class FillTechnique_u extends t{constructor(){super(...arguments),this.type=TechniqueType.N.Fill,this.shaders={geometry:new x}}render(e,n){const{painter:a}=e,u=n.instance.getInput();a.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,n.target,u.uniforms),...(0,featureTechniqueUtils.QA)(e,n.target)},defines:(0,featureTechniqueUtils.vT)(e),optionalAttributes:u.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)}),a.setPipelineState((0,featureTechniqueUtils.Qu)(e)),a.submitDraw(e,n)}},patternFill:new class PatternFillTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType.N.PatternFill,this.shaders={geometry:new PatternFillShader_T}}render(e,n){const{context:u,painter:m}=e,f=n.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,n.target,f.uniforms),...(0,featureTechniqueUtils.QA)(e,n.target),mosaicInfo:m.textureManager.getMosaicInfo(u,n.textureKey),localTileOffset:(0,featureTechniqueUtils.Pr)(n.target)},defines:{...(0,featureTechniqueUtils.vT)(e)},optionalAttributes:f.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils.Qu)(e)),m.submitDraw(e,n)}},complexFill:new class ComplexFillTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType.N.ComplexFill,this.shaders={geometry:new ComplexFillShader_}}render(e,n){const{context:u,painter:m}=e,p=n.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,n.target,p.uniforms),...(0,featureTechniqueUtils.QA)(e,n.target),mosaicInfo:m.textureManager.getMosaicInfo(u,n.textureKey),localTileOffset:(0,featureTechniqueUtils.Pr)(n.target)},defines:{...(0,featureTechniqueUtils.vT)(e)},optionalAttributes:p.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils.Qu)(e)),m.submitDraw(e,n)}},gradientFill:new class GradientFillTechnique_u extends t{constructor(){super(...arguments),this.type=TechniqueType.N.GradientFill,this.shaders={geometry:new GradientFillShader_A},this.symbologyPlane=enums.uC.FILL}render(e,t){const{context:a,painter:m}=e,u=t.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,t.target,u.uniforms),...(0,featureTechniqueUtils.QA)(e,t.target),mosaicInfo:m.textureManager.getMosaicInfo(a,t.textureKey)},defines:{...(0,featureTechniqueUtils.vT)(e)},optionalAttributes:u.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils.Qu)(e)),m.submitDraw(e,t)}},outlineFill:new class OutlineFillTechnique_l extends t{constructor(){super(...arguments),this.type=TechniqueType.N.OutlineFill,this.shaders={geometry:new OutlineFillShader_H}}render(e,n){const{painter:u,pixelRatio:l}=e,m=n.instance.getInput();u.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,n.target,m.uniforms),...(0,featureTechniqueUtils.QA)(e,n.target),antialiasingControls:utils_n(l)},defines:{...(0,featureTechniqueUtils.vT)(e)},optionalAttributes:m.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)}),u.setPipelineState((0,featureTechniqueUtils.Qu)(e)),u.submitDraw(e,n)}},patternOutlineFill:new class PatternOutlineFillTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType.N.PatternOutlineFill,this.shaders={geometry:new PatternOutlineFillShader_x}}render(e,a){const{context:l,painter:m,pixelRatio:p}=e,f=a.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,a.target,f.uniforms),...(0,featureTechniqueUtils.QA)(e,a.target),antialiasingControls:utils_n(p),mosaicInfo:m.textureManager.getMosaicInfo(l,a.textureKey),localTileOffset:(0,featureTechniqueUtils.Pr)(a.target)},defines:{...(0,featureTechniqueUtils.vT)(e)},optionalAttributes:f.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils.Qu)(e)),m.submitDraw(e,a)}},complexOutlineFill:new class ComplexOutlineFillTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType.N.ComplexOutlineFill,this.shaders={geometry:new ComplexOutlineFillShader_R}}render(e,a){const{context:u,painter:m,pixelRatio:p}=e,f=a.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,a.target,f.uniforms),...(0,featureTechniqueUtils.QA)(e,a.target),antialiasingControls:utils_n(p),mosaicInfo:m.textureManager.getMosaicInfo(u,a.textureKey),localTileOffset:(0,featureTechniqueUtils.Pr)(a.target)},defines:{...(0,featureTechniqueUtils.vT)(e)},optionalAttributes:f.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils.Qu)(e)),m.submitDraw(e,a)}},marker:new class MarkerTechnique_u extends t{constructor(){super(...arguments),this.type=TechniqueType.N.Marker,this.shaders={geometry:new MarkerShader_et},this.symbologyPlane=enums.uC.MARKER}render(e,t){const{context:a,painter:m}=e,u=t.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,t.target,u.uniforms),...(0,featureTechniqueUtils.QA)(e,t.target),mosaicInfo:m.textureManager.getMosaicInfo(a,t.textureKey,!0)},defines:{...(0,featureTechniqueUtils.vT)(e)},optionalAttributes:u.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils.Qu)(e)),m.submitDraw(e,t)}},pieChart:new class PieChartTechnique_h extends t{constructor(){super(...arguments),this.type=TechniqueType.N.PieChart,this.shaders={geometry:new PieChartShader_u},this.symbologyPlane=enums.uC.MARKER}render(e,t){const{painter:u}=e,{instance:n,target:h}=t,m=this.shaders.geometry,l=n.getInput(),f=l.uniforms.numberOfFields,S=(0,featureTechniqueUtils.Eq)(e),V=(0,featureTechniqueUtils.QA)(e,h),d=(0,featureTechniqueUtils.vT)(e);m.setNumberOfFields(f),u.setShader({shader:m,uniforms:{...(0,featureTechniqueUtils.r3)(e,t.target,l.uniforms.shader),...V.storage,...V.view,hittestUniforms:V.hittestRequest?{hittestDist:V.hittestRequest?.distance,hittestPos:V.hittestRequest?.position}:null},defines:{VV_SIZE_MIN_MAX_VALUE:!!l.uniforms.shader.visualVariableSizeMinMaxValue,VV_SIZE_SCALE_STOPS:!!l.uniforms.shader.visualVariableSizeScaleStops,VV_SIZE_FIELD_STOPS:!!l.uniforms.shader.visualVariableSizeStops,VV_SIZE_UNIT_VALUE:!!l.uniforms.shader.visualVariableSizeUnitValue,VV_OPACITY:!!l.uniforms.shader.visualVariableOpacity,HITTEST:S,highlight:V.highlight?1:0,...d,numberOfFields:f},optionalAttributes:{},useComputeBuffer:S}),u.setPipelineState((0,featureTechniqueUtils.Qu)(e)),u.submitDraw(e,t)}},line:new class LineTechnique_p extends t{constructor(){super(...arguments),this.type=TechniqueType.N.Line,this.shaders={geometry:new LineShader_},this.symbologyPlane=enums.uC.LINE}render(e,t){const{painter:a,pixelRatio:u}=e,p=t.instance.getInput();a.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,t.target,p.uniforms),...(0,featureTechniqueUtils.QA)(e,t.target),antialiasingControls:utils_n(u)},defines:{...(0,featureTechniqueUtils.vT)(e)},optionalAttributes:p.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)}),a.setPipelineState((0,featureTechniqueUtils.Qu)(e)),a.submitDraw(e,t)}},texturedLine:new class TexturedLineTechnique_p extends t{constructor(){super(...arguments),this.type=TechniqueType.N.TexturedLine,this.shaders={geometry:new TexturedLineShader_H},this.symbologyPlane=enums.uC.LINE}render(e,t){const{context:a,painter:m,pixelRatio:p}=e,f=t.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,t.target,f.uniforms),...(0,featureTechniqueUtils.QA)(e,t.target),antialiasingControls:utils_n(p),mosaicInfo:m.textureManager.getMosaicInfo(a,t.textureKey)},defines:{...(0,featureTechniqueUtils.vT)(e)},optionalAttributes:f.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils.Qu)(e)),m.submitDraw(e,t)}},gradientStroke:new class GradientStrokeTechnique_d extends t{constructor(){super(...arguments),this.type=TechniqueType.N.GradientStroke,this.shaders={geometry:new I},this.symbologyPlane=enums.uC.LINE}_getShaderOptions(e,t,a){const{context:n,painter:p,pixelRatio:c}=e,l=t.instance.getInput();return{shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,t.target,l.uniforms),...(0,featureTechniqueUtils.QA)(e,t.target),antialiasingControls:utils_n(c),mosaicInfo:p.textureManager.getMosaicInfo(n,t.textureKey),technique:{isColorPass:a}},defines:{...(0,featureTechniqueUtils.vT)(e)},optionalAttributes:l.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)}}render(e,t){const{painter:s}=e;if((0,featureTechniqueUtils.Eq)(e)||(0,featureTechniqueUtils.dJ)(e)){const r=(0,featureTechniqueUtils.Qu)(e);return s.setPipelineState(r),s.setShader(this._getShaderOptions(e,t,1)),void s.submitDraw(e,t)}e.context.setClearDepth(1),e.context.clear(webgl_enums.NV.DEPTH);const r={color:!1,depth:{write:{zNear:0,zFar:1},test:webgl_enums.MT.LESS},stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:webgl_enums.MT.EQUAL,mask:255,op:{fail:webgl_enums.eA.KEEP,zFail:webgl_enums.eA.KEEP,zPass:webgl_enums.eA.KEEP}}}};s.setShader(this._getShaderOptions(e,t,0)),s.setPipelineState(r),s.submitDraw(e,t);const i={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:{write:!1,test:webgl_enums.MT.LEQUAL},stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:webgl_enums.MT.EQUAL,mask:255,op:{fail:webgl_enums.eA.KEEP,zFail:webgl_enums.eA.KEEP,zPass:webgl_enums.eA.KEEP}}}};s.setShader(this._getShaderOptions(e,t,1)),s.setPipelineState(i),s.submitDraw(e,t)}},text:new class TextTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType.N.Text,this.shaders={geometry:new et},this.symbologyPlane=enums.uC.TEXT}render(e,s){const{context:n,painter:u}=e,m=(0,featureTechniqueUtils.vT)(e),p=s.instance.getInput(),f={shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,s.target,p.uniforms),...(0,featureTechniqueUtils.QA)(e,s.target),mosaicInfo:u.textureManager.getMosaicInfo(n,s.textureKey)},defines:{...m,isBackgroundPass:!0,isLabel:!1,textRenderPassType:X.Color},optionalAttributes:p.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)};u.setShader(f),u.setPipelineState((0,featureTechniqueUtils.Qu)(e)),u.submitDraw(e,s),u.setShader({...f,defines:{...m,isBackgroundPass:!1,isLabel:!1,textRenderPassType:X.Halo}}),u.submitDraw(e,s),u.setShader({...f,defines:{...m,isBackgroundPass:!1,isLabel:!1,textRenderPassType:X.Outline}}),u.submitDraw(e,s),u.setShader({...f,defines:{...m,isBackgroundPass:!1,isLabel:!1,textRenderPassType:X.Color}}),u.submitDraw(e,s)}},label:new class LabelTechnique_p extends t{constructor(){super(...arguments),this.type=TechniqueType.N.Label,this.shaders={geometry:new et},this.drawPhase=enums.S5.LABEL|enums.S5.LABEL_ALPHA|enums.S5.HITTEST,this.symbologyPlane=enums.uC.TEXT}render(e,t){const{context:s,painter:u}=e,m=(0,featureTechniqueUtils.vT)(e),p={...(0,featureTechniqueUtils.Qu)(e)},h=t.instance.getInput(),f={shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils.r3)(e,t.target,h.uniforms),...(0,featureTechniqueUtils.QA)(e,t.target),mosaicInfo:u.textureManager.getMosaicInfo(s,t.textureKey)},defines:{...m,textRenderPassType:X.Color,isBackgroundPass:!0,isLabel:!0},optionalAttributes:h.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)};u.setPipelineState(p),u.setShader(f),u.submitDraw(e,t),u.setShader({...f,defines:{...m,textRenderPassType:X.Halo,isBackgroundPass:!1,isLabel:!0}}),u.submitDraw(e,t),u.setShader({...f,defines:{...m,textRenderPassType:X.Color,isBackgroundPass:!1,isLabel:!0}}),u.submitDraw(e,t)}},heatmap:new class HeatmapTechnique_p extends t{constructor(){super(...arguments),this.type=TechniqueType.N.Heatmap,this.drawPhase=enums.S5.MAP|enums.S5.HITTEST|enums.S5.DEBUG,this.shaders={accumulate:new HeatmapAccumulateShader_F,resolve:new HeatmapResolveShader_b},this._isBound=!1,this._resources=new Map}shutdown(e){super.shutdown(e),this._resources.get(e)?.destroy(),this._resources.delete(e),this._prevFBO=null,this._unbind()}render(e,t){const{context:n,painter:o,state:u}=e,a=t.instance.getInput(),{isFieldActive:d}=a.uniforms,l=this._getOrCreateResourcesRecord(n),h=l.loadQualityProfile(n);(0,featureTechniqueUtils.Eq)(e)||this._bind(e,l,a),o.setShader({shader:this.shaders.accumulate,uniforms:{...(0,featureTechniqueUtils.QA)(e,t.target),kernelControls:{radius:HeatmapTechnique_g(a,u),isFieldActive:d?1:0}},defines:{...(0,featureTechniqueUtils.vT)(e),...h.defines},optionalAttributes:{},useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)});const c=(0,featureTechniqueUtils.Eq)(e)?HeatmapTechnique_w:HeatmapTechnique_;o.setPipelineState(c),o.submitDraw(e,t)}getStencilReference(e){return HeatmapTechnique_f(e)}renderResolvePass(e,t){if((0,featureTechniqueUtils.Eq)(e))return;const{context:s,painter:i}=e,n=this._resources.get(s);if(null==this._prevFBO||null==this._prevViewport||!n?.initialized)return;const{defines:o}=n.loadQualityProfile(s),{minDensity:u,maxDensity:a,radius:d}=t.getInput().uniforms,c=n.accumulateFramebuffer,p=n.resolveGradientTexture,m={shader:this.shaders.resolve,uniforms:{accumulatedDensity:{texture:{unit:8,texture:c.colorTexture},minAndInvRange:[u,1/(a-u)],normalization:3/(d*d*Math.PI)},gradient:{texture:{unit:9,texture:p}}},defines:o,optionalAttributes:{},useComputeBuffer:!1};s.bindFramebuffer(this._prevFBO),s.setViewport(0,0,this._prevViewport.width,this._prevViewport.height),s.bindTexture(c.colorTexture,8),s.bindTexture(p,9),i.setPipelineState(HeatmapTechnique_b),i.submitDrawMesh(s,m,i.quadMesh),this._unbind()}_getOrCreateResourcesRecord(e){let t=this._resources.get(e);return null==t&&(t=new HeatmapResources_f,this._resources.set(e,t)),t}_unbind(){this._prevFBO=null,this._prevViewport=null,this._isBound=!1}_bind(e,t,r){if(this._isBound)return;const{context:s,state:i,pixelRatio:n}=e,o=s.getBoundFramebufferObject(),u=s.getViewport();this._prevFBO=o,this._prevViewport=u;const{gradient:a,gradientHash:d}=r.uniforms;t.ensureResolveGradientTexture(s,d,a);const{width:l,height:p}=u,f=function HeatmapTechnique_m(e,t){const r=t>1.5?.25:.5;return e<1/(2*r)?1:r}(HeatmapTechnique_g(r,i),n),_=l*f,w=p*f,b=t.ensureAccumulateFBO(s,_,w);s.blitFramebuffer(o,b,0,0,o.width,o.height,0,0,b.width,b.height,webgl_enums.NV.STENCIL,webgl_enums.Cj.NEAREST),s.bindFramebuffer(b),s.setViewport(0,0,b.width,b.height),s.setColorMask(!0,!0,!0,!0),s.setClearColor(0,0,0,0),s.clear(webgl_enums.NV.COLOR),this._isBound=!0}},dotDensity:new class w extends t{constructor(){super(...arguments),this.type=TechniqueType.N.DotDensity,this.shaders={polygon:new DotDensityPolygonShader_F,point:new C,fill:new x},this._resources=new Map}render(e,t){(0,featureTechniqueUtils.dJ)(e)||(0,featureTechniqueUtils.Eq)(e)?this._renderPolygons(e,t):this._renderDotDensity(e,t)}_renderPolygons(e,t){const{painter:i}=e;i.setShader({shader:this.shaders.fill,uniforms:{...(0,featureTechniqueUtils.QA)(e,t.target),visualVariableColor:null,visualVariableOpacity:null},defines:{...(0,featureTechniqueUtils.vT)(e)},optionalAttributes:{zoomRange:!1},useComputeBuffer:(0,featureTechniqueUtils.Eq)(e)}),i.setPipelineState((0,featureTechniqueUtils.Qu)(e)),i.submitDraw(e,t)}_renderDotDensity(o,r){const{context:s,painter:u,requiredLevel:c}=o,p=r.instance.getInput().uniforms,h=this._getOrCreateResourcesRecord(s),m=h.getDotDensityTextures(s,definitions.CQ,p.seed),w=1/2**(c-r.target.key.level),g=definitions.CQ,x=g*window.devicePixelRatio*g*window.devicePixelRatio,D=1/w*(1/w),y=p.dotScale?o.state.scale/p.dotScale:1,b=p.dotValue*y*D;u.setShader({shader:this.shaders.polygon,uniforms:{...(0,featureTechniqueUtils.QA)(o,r.target),instance:{isActive:p.isActive,colors:p.colors,dotValue:Math.max(1,b)},draw:{dotTexture0:{unit:definitions.Cp,texture:m[0]},dotTexture1:{unit:definitions.vN,texture:m[1]},tileZoomFactor:w,pixelRatio:window.devicePixelRatio,tileDotsOverArea:x/(definitions.CQ*window.devicePixelRatio*definitions.CQ*window.devicePixelRatio)}},defines:{...(0,featureTechniqueUtils.vT)(o),blending:p.blending},optionalAttributes:{},useComputeBuffer:!1});const R=s.getViewport();s.setViewport(0,0,definitions.CQ,definitions.CQ);const v=s.getBoundFramebufferObject(),P=h.getFBO(s);s.bindFramebuffer(P),s.setClearColor(0,0,0,0),s.clear(webgl_enums.NV.COLOR),u.setPipelineState({color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:!1}),u.updatePipelineState(s),u.submitDraw(o,r),s.bindFramebuffer(v),s.setViewport(R.x,R.y,R.width,R.height);const S=h.getFBO(s).colorTexture,_={shader:this.shaders.point,uniforms:{view:(0,featureTechniqueUtils.L4)(o,r.target),instance:{dotSize:p.dotSize},draw:{locations:{unit:definitions.Cp,texture:S},tileZoomFactor:1,pixelRatio:window.devicePixelRatio}},defines:{...(0,featureTechniqueUtils.vT)(o)},optionalAttributes:{},useComputeBuffer:!1};u.setPipelineState((0,featureTechniqueUtils.Qu)(o)),u.submitDrawMesh(s,_,h.getDotDensityMesh(s))}shutdown(e){super.shutdown(e),this._resources.get(e)?.destroy(),this._resources.delete(e)}_getOrCreateResourcesRecord(e){let t=this._resources.get(e);return null==t&&(t=new DotDensityResources_f,this._resources.set(e,t)),t}},animatedMarker:new class AnimatedMarkerTechnique_m extends u{constructor(){super(...arguments),this.type=TechniqueType.N.AnimatedMarker,this.symbologyPlane=enums.uC.MARKER,this.shaders={geometry:new H}}}};function TechniqueRegistry_q(){for(const e in TechniqueRegistry_j)TechniqueRegistry_j[e].startup()}function TechniqueRegistry_F(e){for(const i in TechniqueRegistry_j)TechniqueRegistry_j[i].shutdown(e)}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/gradientFillConstants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>e,m:()=>r});const r={linear:0,rectangular:1,circular:2},e={isAbsolute:0,isDiscrete:1}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/gradientStrokeConstants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>e});const e={isAlongLine:0,isAbsoluteSize:1,isDiscrete:2}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/markers/markerConstants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>o});const o={bitset:{isSDF:0,isMapAligned:1,scaleSymbolsProportionally:2,overrideOutlineColor:3,colorLocked:4,isStroke:5}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var i;__webpack_require__.d(__webpack_exports__,{$w:()=>G,Fb:()=>h,Fz:()=>C,H_:()=>i,J5:()=>n,M:()=>u,Ni:()=>s,V5:()=>o,Xx:()=>B,YV:()=>I,au:()=>A,b5:()=>E,bg:()=>F,cZ:()=>K,cn:()=>q,eo:()=>J,kx:()=>D,os:()=>t,qM:()=>k,rp:()=>c,ti:()=>H,v9:()=>L}),function(i){i[i.Geographic=0]="Geographic",i[i.Arithmatic=1]="Arithmatic"}(i||(i={}));const t=3.14159265359/180,c=3.14159265359/128,o=1,h=1.1,n=1,A=24,G=8,s=1e-5,u=.05,k=1e-30,q=4,B=0,C=2,D=2,E=3,F=0,H=3,I=16777216,J=1.1,K=16,L=128},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K5:()=>h,Kt:()=>A,M8:()=>w,Rj:()=>B,_9:()=>b,i6:()=>k,mh:()=>v,nb:()=>z,p8:()=>E,tL:()=>j,xf:()=>C,yS:()=>q,zb:()=>D,zy:()=>H});var _definitions_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/glsl.js"),_constants_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/constants.js");function b(t){const e=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.fV)(12.9898),f=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.fV)(78.233),s=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.fV)(43758.5453),l=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.Om)(t,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.Zc)(e,f)),m=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.zi)(l,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.fV)(3.14));return(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.jc)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.F8)(m).multiply(s))}function w(t){return(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.LC)(t,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.fV)(_constants_js__WEBPACK_IMPORTED_MODULE_2__.qM))}function j(t,n){return t.x.multiply(n.y).subtract(n.x.multiply(t.y))}function z(t){return t.multiply(2).subtract(1)}function v(t,r){const u=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.fV)(2**r);return(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.zi)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.RI)(t.divide(u)),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.fV)(2))}function h(t,r){return(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.MM)(v(t,r),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.fV)(.5))}function k(n,r){return v(n,r+_definitions_js__WEBPACK_IMPORTED_MODULE_0__.U5)}function q(t,n){return v(t,n)}function A(t){const r=v(t.z,7),u=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.fV)(1).subtract(r),i=t.xyz.subtract((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.eR)(0,0,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.fV)(128)));return u.multiply(t).add(r.multiply(i))}function B(t){const n=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.ln)(255/256,255/65536,255/16777216,255/4294967296);return(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.Om)(t,n)}function C(t){return(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.T9)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.T9)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.T9)(t.x,t.y),t.z),t.w)}function D(t){return new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.nt(1).subtract(t)}function E(t){return t.subtract(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.nt(1))}function H(t,n){return t.subtract(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__.nt(n))}},"./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/StorageSchema.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Jz:()=>d,T9:()=>a,uH:()=>o});var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/layers/support/streamLayerUtils.js"),_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js"),_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/capabilities.js");function a(e,i){return{type:"simple",filters:i,capabilities:{maxTextureSize:(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_4__.C)().maxTextureSize},bindings:u(e)}}function o(e,n){const t=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_4__.C)();return{type:"multi",target:"feature",keyField:_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__.EA,filters:n,capabilities:{maxTextureSize:t.maxTextureSize},bindings:{[_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__.t0.TrackLine]:u(e.trackLines.renderer),[_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__.t0.LatestObservation]:u(e.latestObservations.renderer),[_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__.t0.PreviousObservation]:u(e.previousObservations.renderer)}}}function l(e){switch(e){case"opacity":return _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.Gn.OPACITY;case"color":return _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.Gn.COLOR;case"rotation":return _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.Gn.ROTATION;case"size":return _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.Gn.SIZE;default:return null}}function u(e){if(!e)return[];switch(e.type){case"simple":case"class-breaks":case"unique-value":case"dictionary":return d(e);case"dot-density":return function c(e){const i=[];for(const r of e.attributes)i.push({binding:i.length,expression:r.valueExpression,field:r.field});return i}(e);case"pie-chart":return function p(e){const i=d(e);let r=4;for(const n of e.attributes)i.push({binding:r++,expression:n.valueExpression,field:n.field});return i}(e);case"heatmap":return function f({valueExpression:e,field:i}){return e||i?[{binding:0,expression:e,field:i}]:[]}(e)}}function d(i){return"visualVariables"in i&&i.visualVariables?.length?(0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_3__.R)(i.visualVariables).map((e=>function y(e){switch(e.type){case"size":return function m(e){return"$view.scale"===e.valueExpression?null:{binding:l(e.type),field:e.field,normalizationField:e.normalizationField,expression:e.valueExpression,valueRepresentation:e.valueRepresentation}}(e);case"color":return function b(e){return{binding:l(e.type),field:e.field,normalizationField:e.normalizationField,expression:e.valueExpression}}(e);case"opacity":return function x(e){return{binding:l(e.type),field:e.field,normalizationField:e.normalizationField,expression:e.valueExpression}}(e);case"rotation":return function v(e){return{binding:l(e.type),expression:e.valueExpression,field:e.field}}(e)}}(e))).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.Ru):[]}},"./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/VisualVariablesSchema.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Dk:()=>z,K4:()=>h,j0:()=>x});__webpack_require__("./node_modules/@arcgis/core/core/has.js");var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/unitUtils.js"),_renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/renderers/support/lengthUtils.js"),_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),_engine_webgl_shaderGraph_techniques_shaders_constants_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/constants.js"),_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/schemaUtils.js"),_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js");const u=1.25,o=128,c=128;function p(e){if(!e.stops?.length)return null;const a=e.stops.sort(((e,a)=>e.value-a.value)),i=(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__.r)(a,8),l=i.map((({value:e})=>e)),s=i.map((({color:e})=>(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__.p)(e)));return{values:l,colors:s}}function v(e){if(!e.stops?.length)return null;const a=e.stops.sort(((e,a)=>e.value-a.value)),i=(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__.r)(a,8);return{opacityValues:i.map((({value:e})=>e)),opacities:i.map((({opacity:e})=>e))}}function V(e){return{rotationType:"geographic"===e.rotationType?_engine_webgl_shaderGraph_techniques_shaders_constants_js__WEBPACK_IMPORTED_MODULE_4__.H_.Geographic:_engine_webgl_shaderGraph_techniques_shaders_constants_js__WEBPACK_IMPORTED_MODULE_4__.H_.Arithmatic}}function f(a){if(!a.stops?.length)return null;if(a.stops.some((e=>e.useMaxValue||e.useMinValue)))return(i,s)=>{const r=i.statisticsByLevel.get(s.key.level),n=a.stops.map((i=>({value:i.useMaxValue?r?.get(a.field)?.maxValue??0:i.useMinValue?r?.get(a.field)?.minValue??0:i.value,size:i.size?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__.Lz)(i.size):_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__.qM}))).sort(((e,a)=>e.value-a.value)),u=(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__.r)(n,8);return{values:u.map((({value:e})=>e)),sizes:u.map((({size:e})=>e))}};const i=a.stops.sort(((e,a)=>e.value-a.value)),s=(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__.r)(i,8);return{values:s.map((({value:e})=>e)),sizes:s.map((({size:a})=>(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__.Lz)(a)))}}function m(e){return l=>{const{state:s}=l;return{unitValueToPixelsRatio:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__.GA)(s.spatialReference)/_renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_2__.j[e.valueUnit??"meters"]/s.resolution}}}function S(e,a){const i=a.length;if(e<a[0].value||1===i)return a[0].size;for(let l=1;l<i;l++)if(e<a[l].value){const i=(e-a[l-1].value)/(a[l].value-a[l-1].value);return a[l-1].size+i*(a[l].size-a[l-1].size)}return a[i-1].size}function b(a){const{minDataValue:i,maxDataValue:l,minSize:s,maxSize:t}=a;if("object"==typeof s&&"object"==typeof t)return(a,r)=>{const n=a.state.scale,u=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__.Lz)(S(n,s.stops)),o=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__.Lz)(S(n,t.stops));return{minMaxValueAndSize:[i,l,u,o]}};if("object"==typeof s||"object"==typeof t)throw new Error("InternalError: Found a partial VisualVariableSizeMinMaxValue");return{minMaxValueAndSize:[i,l,(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__.Lz)(s),(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__.Lz)(t)]}}const z={visualVariableColor:null,visualVariableOpacity:null,visualVariableRotation:null,visualVariableSizeStops:null,visualVariableSizeScaleStops:null,visualVariableSizeOutlineScaleStops:null,visualVariableSizeUnitValue:null,visualVariableSizeMinMaxValue:null};function x(e,a=c,i=u){if(e.visualVariableSizeMinMaxValue)return e.visualVariableSizeMinMaxValue instanceof Function?o:Math.max(e.visualVariableSizeMinMaxValue.minMaxValueAndSize[3]*i,a);if(e.visualVariableSizeScaleStops){if(e.visualVariableSizeScaleStops instanceof Function)return o;const l=e.visualVariableSizeScaleStops.sizes;return Math.max(l[l.length-1]*i,a)}if(e.visualVariableSizeStops){if(e.visualVariableSizeStops instanceof Function)return o;const l=e.visualVariableSizeStops.sizes;return Math.max(l[l.length-1]*i,a)}return e.visualVariableSizeUnitValue?2*o:0}function h(e){const a={...z};if(!e||!("visualVariables"in e)||!e.visualVariables)return a;for(const i of(0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_5__.R)(e.visualVariables))switch(i.type){case"color":a.visualVariableColor=p(i);break;case"opacity":a.visualVariableOpacity=v(i);break;case"rotation":a.visualVariableRotation=V(i);break;case"size":switch(M(i)){case"field-stops":a.visualVariableSizeStops=f(i);break;case"scale-stops":"outline"===i.target?a.visualVariableSizeOutlineScaleStops=f(i):a.visualVariableSizeScaleStops=f(i);break;case"min-max":a.visualVariableSizeMinMaxValue=b(i);break;case"unit-value":a.visualVariableSizeUnitValue=m(i)}}return a}function M(e){return"number"==typeof e.minDataValue&&"number"==typeof e.maxDataValue&&null!=e.minSize&&null!=e.maxSize?"min-max":"$view.scale"===e?.valueExpression&&Array.isArray(e.stops)?"scale-stops":null==e.field&&"$view.scale"===e?.valueExpression||!(Array.isArray(e.stops)||"levels"in e&&e.levels)?null!=e.field||"$view.scale"!==e?.valueExpression?"unit-value":null:"field-stops"}},"./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/schemaUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function n(n,t){const r=n.slice(0,t),e=t-r.length;for(let o=0;o<e;o++){const n=r[r.length-1];r.push(n)}return r}function t(n){if(!n)return[0,0,0,0];const{r:t,g:r,b:e,a:o}=n;return[t*(o/255),r*(o/255),e*(o/255),o]}__webpack_require__.d(__webpack_exports__,{p:()=>t,r:()=>n})},"./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/ComplexSymbolSchema.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Dr:()=>M,EM:()=>g,Gn:()=>S,IQ:()=>P,Jk:()=>c,NZ:()=>y,TY:()=>n,Zi:()=>p,gF:()=>u,mp:()=>h,oF:()=>V});var _symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/symbols/cim/CIMSymbolHelper.js"),_symbols_cim_defaultCIMValues_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/symbols/cim/defaultCIMValues.js"),_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/symbols/cim/enums.js"),_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueRegistry.js"),_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/VisualVariablesSchema.js"),_utils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/utils.js");function n(e){return e.minScale||e.maxScale?{minScale:e.minScale??0,maxScale:e.maxScale??0}:null}function s(e){if(null==e)return null;if(Array.isArray(e)){const[a,i,t,l]=e;return[a,i,t,255*l]}return"string"==typeof e?e:{...e,defaultValue:s(e?.defaultValue)}}async function c(a,i){const{cimResourceManager:t,cimAnalyzer:l,scaleExpression:r}=i.schemaOptions;await Promise.all(_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__.wp.fetchResources(a.symbol,t,[]));const o=l.analyzeSymbolReference(a,!1),s={scaleInfo:n(a),scaleExpression:r},c=[];for(const e of o)switch(e.type){case"marker":c.push(...f(e,i,s));break;case"fill":c.push(...b(e,i,s));break;case"gradientFill":c.push(...z(e,i,s));break;case"line":c.push(...d(e,i,s));break;case"gradientStroke":c.push(...I(e,i,s));break;case"text":c.push(...R(e,i,s))}return c}function f(e,a,i){const{uniforms:r,schemaOptions:o}=a,{store:n}=o,s=e.isOutline?{..._VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__.Dk,visualVariableSizeScaleStops:r.visualVariableSizeOutlineScaleStops}:{visualVariableColor:r.visualVariableColor,visualVariableOpacity:r.visualVariableOpacity,visualVariableSizeMinMaxValue:r.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:r.visualVariableSizeScaleStops,visualVariableSizeStops:r.visualVariableSizeStops,visualVariableSizeUnitValue:r.visualVariableSizeUnitValue,visualVariableRotation:r.visualVariableRotation};return e.animationParams?u(n.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__.YS.animatedMarker,{uniforms:s,optionalAttributes:{zoomRange:!0}}),e,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__.Dk,i):p(n.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__.YS.marker,{uniforms:s,optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,r,i)}function u(e,a,t,l){return a.animationParams?[e.createMeshInfo({pixelDimensions:a.pixelDimensions,texelDimensions:a.texelDimensions,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null,sprite:a.spriteRasterizationParam,animations:a.animationParams,scaleInfo:l.scaleInfo,scaleSymbolsProportionally:a.scaleSymbolsProportionally,strokeWidth:a.outlineWidth,isMapAligned:a.alignment===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__.C1.MAP,colorLocked:a.colorLocked,isStroke:a.isStroke,baseSize:a.baseSize,referenceSize:a.referenceSize,angleToLine:!!a.markerPlacement&&a.markerPlacement.placement&&"angleToLine"in a.markerPlacement.placement&&a.markerPlacement.placement.angleToLine,sizeRatio:a.sizeRatio})]:[]}function p(e,i,t,{scaleInfo:l,scaleExpression:n}){const c=(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__.I)(t);return[e.createMeshInfo({size:i.size,scaleX:i.scaleX,anchorX:i.anchorPoint.x,anchorY:i.anchorPoint.y,angle:i.rotation,color:s(i.color)??[0,0,0,0],colorLocked:i.colorLocked,frameHeight:i.frameHeight,widthRatio:i.widthRatio,scaleInfo:l,offsetX:i.offsetX,offsetY:i.offsetY,outlineColor:s(i.outlineColor)??[0,0,0,0],outlineSize:i.outlineWidth,referenceSize:i.referenceSize||_symbols_cim_defaultCIMValues_js__WEBPACK_IMPORTED_MODULE_1__.D.CIMVectorMarker.size,rotateClockwise:i.rotateClockwise,scaleFactor:n??1,sizeRatio:i.sizeRatio,alignment:i.alignment,isAbsoluteAnchorPoint:i.isAbsoluteAnchorPoint,scaleSymbolsProportionally:i.scaleSymbolsProportionally,sprite:i.spriteRasterizationParam,hasSizeVV:c,placement:i.markerPlacement,effects:i.effects?{type:"cim-effect-infos",effectInfos:i.effects}:null,transforms:i.transform,minPixelBuffer:(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__.j0)(t)})]}function S(e,a,{scaleInfo:i}){return[e.createMeshInfo({color:s(a.color)??[0,0,0,0],scaleInfo:i,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null})]}function b(e,a,i){if(!e.spriteRasterizationParam)return function m(e,a,i){const{uniforms:l,schemaOptions:r}=a,{store:o}=r;return S(o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__.YS.fill,{uniforms:{visualVariableColor:e.colorLocked?null:l.visualVariableColor,visualVariableOpacity:l.visualVariableOpacity},optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,i)}(e,a,i);const{uniforms:l,schemaOptions:r}=a,{store:o}=r;return V(o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__.YS.complexFill,{uniforms:{visualVariableColor:e.colorLocked?null:l.visualVariableColor,visualVariableOpacity:l.visualVariableOpacity},optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,null!=l.visualVariableColor,i)}function V(e,a,i,{scaleInfo:t}){if(!a.spriteRasterizationParam)throw new Error("InternalError: Sprite should always be defined");const l=!!a.hasUnresolvedReplacementColor&&(!i||a.colorLocked),r=a.sampleAlphaOnly&&!l,o=a.spriteRasterizationParam;return[e.createMeshInfo({color:s(a.color)??[0,0,0,0],height:a.height,aspectRatio:a.scaleX,offsetX:a.offsetX,offsetY:a.offsetY,scaleX:1,scaleY:1,angle:a.angle,applyRandomOffset:a.applyRandomOffset,sampleAlphaOnly:r,scaleProportionally:"CIMHatchFill"===o.resource.type,sprite:o,scaleInfo:t,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null})]}function z(e,a,i){const{uniforms:l,schemaOptions:r}=a,{store:o}=r;return h(o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__.YS.gradientFill,{uniforms:{visualVariableColor:null,visualVariableOpacity:l.visualVariableOpacity},optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,i)}function h(e,a,{scaleInfo:i}){if(!a.spriteRasterizationParam)throw new Error("InternalError: Sprite should always be defined");const t=a.spriteRasterizationParam;return[e.createMeshInfo({color:s(a.color)??[0,0,0,0],angle:a.angle,gradientMethod:a.gradientMethod,gradientSize:a.gradientSize,gradientSizeUnits:a.gradientSizeUnits,gradientType:a.gradientType,sprite:t,scaleInfo:i,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null})]}function d(e,a,i){const{uniforms:r,schemaOptions:o}=a,{store:n}=o,s=e.isOutline?{..._VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__.Dk,visualVariableSizeScaleStops:r.visualVariableSizeOutlineScaleStops}:{visualVariableColor:e.colorLocked?null:r.visualVariableColor,visualVariableOpacity:r.visualVariableOpacity,visualVariableSizeMinMaxValue:r.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:r.visualVariableSizeScaleStops,visualVariableSizeStops:r.visualVariableSizeStops,visualVariableSizeUnitValue:r.visualVariableSizeUnitValue},c={uniforms:s,optionalAttributes:{zoomRange:!!i.scaleInfo}},f=!!(s.visualVariableSizeMinMaxValue||s.visualVariableSizeScaleStops||s.visualVariableSizeStops||s.visualVariableSizeUnitValue);return e.spriteRasterizationParam?g(n.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__.YS.texturedLine,c),e,f,i):y(n.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__.YS.line,c),e,f,i)}function v(e,a,{scaleInfo:i}){return{color:s(e.color)??[0,0,0,0],width:e.width,referenceWidth:e.referenceWidth,capType:e.cap,joinType:e.join,miterLimit:e.miterLimit,scaleInfo:i,hasSizeVV:a,effects:e.effects?{type:"cim-effect-infos",effectInfos:e.effects}:null}}function y(e,a,i,t){if(a.spriteRasterizationParam)throw new Error("InternalError: Sprite should not be defined");const l=v(a,i,t);return[e.createMeshInfo(l)]}function g(e,a,i,t){const{spriteRasterizationParam:l,scaleDash:r,sampleAlphaOnly:o}=a;if(!l)throw new Error("InternalError: Sprite should be defined");return[e.createMeshInfo({...v(a,i,t),offsetAlongLine:a.offsetAlongLine??0,shouldScaleDash:r??!1,shouldSampleAlphaOnly:o,isSDF:"CIMPictureStroke"!==l.resource.type&&"CIMGradientStroke"!==l.resource.type,sprite:l})]}function I(e,a,i){const{uniforms:r,schemaOptions:o}=a,{store:n}=o;return M(n.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__.YS.gradientStroke,{uniforms:e.isOutline?{..._VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__.Dk,visualVariableSizeScaleStops:r.visualVariableSizeOutlineScaleStops}:{visualVariableColor:null,visualVariableOpacity:r.visualVariableOpacity,visualVariableSizeMinMaxValue:r.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:r.visualVariableSizeScaleStops,visualVariableSizeStops:r.visualVariableSizeStops,visualVariableSizeUnitValue:r.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,i)}function M(e,a,i){if(!a.spriteRasterizationParam)throw new Error("InternalError: Sprite should always be defined");const t=a.spriteRasterizationParam;return[e.createMeshInfo({...v(a,!1,i),gradientMethod:a.gradientMethod,gradientSize:a.gradientSize,gradientSizeUnits:a.gradientSizeUnits,gradientType:a.gradientType,sprite:t,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null})]}function R(e,a,i){const{uniforms:l,schemaOptions:r}=a,{store:o}=r;return P(o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__.YS.text,{uniforms:{visualVariableColor:e.colorLocked?null:l.visualVariableColor,visualVariableOpacity:l.visualVariableOpacity,visualVariableRotation:l.visualVariableRotation,visualVariableSizeMinMaxValue:l.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:l.visualVariableSizeScaleStops,visualVariableSizeStops:l.visualVariableSizeStops,visualVariableSizeUnitValue:l.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!!i.scaleInfo,referenceSymbol:!1,clipAngle:!1}}),e,l,i)}function P(e,a,i,{scaleInfo:t,scaleExpression:l}){return[e.createMeshInfo({boxBackgroundColor:s(a.backgroundColor),boxBorderLineColor:s(a.borderLineColor),boxBorderLineSize:a.borderLineWidth??0,color:s(a.color)??[0,0,0,0],offsetX:a.offsetX,offsetY:a.offsetY,postAngle:a.angle,fontSize:a.size,referenceSize:a.referenceSize,decoration:a.decoration,haloColor:s(a.haloColor)??[0,0,0,0],haloSize:a.haloSize??0,outlineColor:s(a.outlineColor)??[0,0,0,0],outlineSize:a.outlineSize,lineWidth:a.lineWidth||512,lineHeightRatio:1,horizontalAlignment:a.horizontalAlignment??"center",verticalAlignment:a.verticalAlignment??"baseline",useCIMAngleBehavior:!1,glyphs:a.textRasterizationParam,scaleInfo:t,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null,placement:a.markerPlacement,transforms:a.transform,scaleFactor:l??1,minPixelBuffer:(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__.j0)(i),repeatLabel:null,repeatLabelDistance:null,allowOverrun:null,labelPosition:null})]}},"./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function a(a){return!!(a.visualVariableSizeMinMaxValue||a.visualVariableSizeScaleStops||a.visualVariableSizeStops||a.visualVariableSizeUnitValue||a.visualVariableSizeOutlineScaleStops)}function i(a){return!!a.visualVariableRotation}__webpack_require__.d(__webpack_exports__,{I:()=>a,N:()=>i})},"./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>u,e:()=>m});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/capabilities.js");const l=8,s=l-2,n=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__.A.getLogger("esri.views.2d.layers.features.support.rendererUtils");function u(e){return e.map((e=>function a(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}(e)?function i(e){return e.stops=function b(e,o){return o.length<=l?o:(n().warn(`Found ${o.length} Visual Variable stops, but MapView only supports ${l}. Displayed stops will be simplified.`),o.length>2*l?function c(e,o){const[t,...l]=o,n=l.pop(),u=l[0].value,a=l[l.length-1].value,i=(a-u)/s,c=[];for(let s=u;s<a;s+=i){let t=0;for(;s>=l[t].value;)t++;const n=l[t],u=o[t-1],a=s-u.value,i=n.value===u.value?1:a/(n.value-u.value);if("color"===e){const e=l[t],r=o[t-1],n=e.color.clone();n.r=p(r.color.r,n.r,i),n.g=p(r.color.g,n.g,i),n.b=p(r.color.b,n.b,i),n.a=p(r.color.a,n.a,i),c.push({value:s,color:n,label:e.label})}else if("size"===e){const e=l[t],n=o[t-1],u=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__.cr)(e.size),a=p((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__.cr)(n.size),u,i);c.push({value:s,size:a,label:e.label})}else{const e=l[t],r=p(o[t-1].opacity,e.opacity,i);c.push({value:s,opacity:r,label:e.label})}}return[t,...c,n]}(e,o):function f(e){const[o,...r]=e,t=r.pop();for(;r.length>s;){let e=0,o=0;for(let t=1;t<r.length;t++){const l=r[t-1],s=r[t],n=Math.abs(s.value-l.value);n>o&&(o=n,e=t)}r.splice(e,1)}return[o,...r,t]}(o))}(e.type,e.stops??[]),e}(e.clone()):e))}function p(e,o,r){return(1-r)*e+r*o}function m(o){if(!o)return!0;switch(o.type){case"dot-density":break;case"heatmap":if(!function g(){const{supportsColorBufferFloat:e,supportsColorBufferFloatBlend:o,supportsColorBufferHalfFloat:r}=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__.C)();return e&&o||r}()){const o=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__.C)(),r=["supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat"].filter((e=>!o[e])).join(", ");return n().errorOnce(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.A("webgl-missing-extension",`Missing WebGL2 requirements for Heatmap: ${r}`)),!1}}return!0}},"./node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>o});var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_core_QueueProcessor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/QueueProcessor.js"),_UpdateTracking2D_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/support/UpdateTracking2D.js");class i{constructor(){this.type="override-batch",this.messages=[],this._resovler=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.Tw)()}get promise(){return this._resovler.promise}resolve(){this._resovler.resolve()}add(e){this.messages.push(e)}}class o{constructor(e){this.updateTracking=new _UpdateTracking2D_js__WEBPACK_IMPORTED_MODULE_2__.F({debugName:"FeatureCommandQueue"}),this.process=e.process,this._queueProcessor=new _core_QueueProcessor_js__WEBPACK_IMPORTED_MODULE_1__.QueueProcessor({concurrency:1,process:async e=>{if("override-batch"===e.type){const e=this._nextOverrideBatch;if(null==e)throw new Error("InternalError: Override should be defined");return this._nextOverrideBatch=null,await this.process(e),void e.resolve()}return this.process(e)}})}destroy(){this.updateTracking.destroy(),this._queueProcessor.destroy(),this.clear()}clear(){this._queueProcessor.clear()}async push(e){return(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.QZ)(this.updateTracking.addPromise(this._doPush(e)))}async _doPush(e){const r=this._queueProcessor,s=r.last();switch(e.type){case"update":case"highlight":if(s?.type===e.type)return;return r.push(e);case"override":case"edit":return this._pushOverride(e)}}_pushOverride(e){return null==this._nextOverrideBatch&&(this._nextOverrideBatch=new i,this._queueProcessor.push(this._nextOverrideBatch)),this._nextOverrideBatch.add(e),this._nextOverrideBatch.promise}}},"./node_modules/@arcgis/core/views/2d/layers/support/UpdateTracking2D.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>d});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),_core_has_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),_core_ReactiveMap_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/ReactiveMap.js"),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),_core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/core/support/UpdatingHandles.js");let d=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__.A{constructor(t){super(t),this.debugName="",this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_9__.U,this._idToUpdatingState=new _core_ReactiveMap_js__WEBPACK_IMPORTED_MODULE_3__.A}get updating(){const t=this._updatingHandles.updating||Array.from(this._idToUpdatingState.values()).some((t=>t));if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__.A)("esri-2d-log-updating")){const r=Array.from(this._idToUpdatingState.entries()).map((([t,r])=>`-> ${t}: ${r}`)).join("\n");console.log(`${this.debugName}: Updating: ${t}\n-> Handles: ${this._updatingHandles.updating}\n${r}`)}return t}addUpdateTracking(t,r){const s=(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>r.updating),(r=>this._idToUpdatingState.set(t,r)),{sync:!0});this.addHandles(s)}addPromise(t){return this._updatingHandles.addPromise(t)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({constructOnly:!0})],d.prototype,"debugName",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({readOnly:!0})],d.prototype,"updating",null),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.$)("esri.views.2d.layers.support.UpdateTracking2D")],d)}}]);