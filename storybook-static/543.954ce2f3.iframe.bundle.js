"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[543],{"./node_modules/@arcgis/core/widgets/Legend/support/sizeRampUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{getRampStops:()=>I});var a,Color=__webpack_require__("./node_modules/@arcgis/core/Color.js"),numberUtils=__webpack_require__("./node_modules/@arcgis/core/renderers/support/numberUtils.js"),lang=(__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),__webpack_require__("./node_modules/@arcgis/core/core/lang.js"));__webpack_require__("./node_modules/@arcgis/core/renderers/visualVariables/support/SizeStop.js"),__webpack_require__("./node_modules/@arcgis/core/symbols/CIMSymbol.js"),__webpack_require__("./node_modules/@arcgis/core/symbols/cim/enums.js");function s(e){switch(e){case"circle":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case"square":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case"diamond":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case"hexagon-pointy":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case"hexagon-flat":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function y(e){return"CIMVectorMarker"===e?.type?e.markerGraphics?.[0]:void 0}function p(e){return"CIMPolygonSymbol"===e?.symbol?.type?e.symbol.symbolLayers?.[0]:void 0}function f(e,r){"CIMVectorMarker"===e?.type&&null!=r&&(e.size=r)}function v(e,r){const n=y(e);n&&null!=r&&(n.geometry=s(r))}function S(e,r){const n=p(y(e));n&&null!=r&&(n.color=r.toArray())}function z(e,r,n){const t=p(y(e));t&&null!=r&&n&&(t.colorLocked=r)}!function(e){e.OuterRing="reference-size-outer-ring",e.InnerDot="reference-size-inner-dot"}(a||(a={}));var SimpleLineSymbol=__webpack_require__("./node_modules/@arcgis/core/symbols/SimpleLineSymbol.js"),SimpleMarkerSymbol=__webpack_require__("./node_modules/@arcgis/core/symbols/SimpleMarkerSymbol.js"),cimSymbolUtils=__webpack_require__("./node_modules/@arcgis/core/symbols/support/cimSymbolUtils.js"),typeUtils=__webpack_require__("./node_modules/@arcgis/core/symbols/support/typeUtils.js"),utils=__webpack_require__("./node_modules/@arcgis/core/symbols/support/utils.js"),support_utils=__webpack_require__("./node_modules/@arcgis/core/widgets/Legend/support/utils.js"),themeUtils=(__webpack_require__("./node_modules/@arcgis/core/widgets/support/widgetUtils.js"),__webpack_require__("./node_modules/@arcgis/core/support/themeUtils.js"));const b=30,h=12,sizeRampUtils_d=24,w=[255,255,255],sizeRampUtils_S=[200,200,200],g=[128,128,128],sizeRampUtils_v=20,sizeRampUtils_z=5;async function I(e,t,n,o,s,i,r){const a=t.legendOptions,p=a?.customValues,f=r||await D(e,n),y=t.stops,b=!!f,h=!!p,w=null!=t.minSize&&null!=t.maxSize,S=y&&y.length>1,g=!!t.target;if(!b||!h&&!(w||S&&!g))return;const v=(0,utils.$d)(f);let z=!1,j=null,k=null;j=v&&!S?(0,numberUtils.LI)([t.minDataValue,t.maxDataValue]):p??await T(t,f,o,s?.type);const V=e?.authoringInfo,x="univariate-color-size"===V?.type,I=x&&"above-and-below"===V?.univariateTheme,q=!!(0,support_utils._l)(e);if(!j&&S&&(j=y.map((e=>e.value)),z=y.some((e=>!!e.label)),"flow"===e.type&&(j=(0,numberUtils.LI)(j)),z&&(k=y.map((e=>e.label)))),v&&null!=j&&j?.length>2&&!I&&(j=[j[0],j[j.length-1]]),!j)return null;x&&5!==j?.length&&(j=P({minSize:j[0],maxSize:j[j.length-1]}));const B=v?L(e,j):null,E=(0,utils.k_)(f),R=z?null:function U(e,l){const t=e.length-1;return e.map(((e,n)=>(0,support_utils.Dd)(e,n,t,l)))}(j,i);return(await Promise.all(j.map((async(l,i)=>{const r=v?B[i]:await H(t,f,l,o,s?.type);return{value:l,symbol:!q||"class-breaks"!==e.type&&"unique-value"!==e.type?O(I&&"class-breaks"===e.type?C(e,i):f,r):M(e,r,t.maxSize,n)??f,label:z?k[i]:R[i],size:q?sizeRampUtils_d:r,outlineSize:E}})))).reverse()}function L(e,l){const t=e?.authoringInfo,n="univariate-color-size"===t?.type;let o=[h,b];if(n){const e=l[0],t=l[l.length-1],n=h,s=b;o=l.map((l=>n+(l-e)/(t-e)*(s-n)))}return n&&"below"===t?.univariateTheme&&o.reverse(),o}function M(l,t,n,s){const i="class-breaks"===l.type,r=i?l.classBreakInfos?.[0]?.symbol?.clone():l.uniqueValueInfos?.[0]?.symbol?.clone();return r&&"type"in r&&"cim"===r.type?(function d(e,n){const{outerRingSize:t,innerDotSize:i,type:o,color:l,colorLocked:s,primitiveOverrides:m}=n,c="CIMPolygonSymbol"===e.data.symbol?.type?e.data.symbol.symbolLayers:null;if(2===c?.length)for(const r of c){const e=r.primitiveName===a.OuterRing;f(r,e?t:i),v(r,o),S(r,l),z(r,s,e)}return null!=t&&null!=i&&(e.data.primitiveOverrides=null),void 0!==m&&(e.data.primitiveOverrides=(0,lang.o8)(m)),e}(r,{color:s??(i?null:new Color.A(sizeRampUtils_S)),innerDotSize:t*(sizeRampUtils_d/n)||1,outerRingSize:sizeRampUtils_d}),r):null}function C(e,l){const t=e.classBreakInfos,n=t.length,o=n<2||!(l>=2)?t[0].symbol.clone():t[n-1].symbol.clone(),s=e.visualVariables?.some((e=>"color"===e.type));return s&&(o.type.includes("3d")?B(o):E(o)),o}async function D(e,l){if("flow"===e.type)return(0,support_utils.Zo)(e,l);if("pie-chart"===e.type)return new SimpleMarkerSymbol.A({color:null,outline:e.outline?.width?e.outline:new SimpleLineSymbol.A});let t=null,n=null;if("simple"===e.type)t=e.symbol;else if("class-breaks"===e.type){const l=e.classBreakInfos;t=l&&l[0]&&l[0].symbol,n=l.length>1}else if("unique-value"===e.type){const l=e.uniqueValueInfos;t=l?.[0]?.symbol,n=null!=l&&l.length>1}return!t||function q(e){return(0,typeUtils.wk)(e)?e.symbolLayers?.some((e=>"fill"===e?.type))??!1:e?.type.includes("fill")??!1}(t)?null:(t=t.clone(),(l||n)&&(t.type.includes("3d")?B(t):E(t)),t)}function B(e){"line-3d"===e.type?e.symbolLayers.forEach((e=>{e.material={color:g}})):e.symbolLayers.forEach((e=>{"icon"!==e.type||e.resource?.href?e.material={color:sizeRampUtils_S}:(e.material={color:w},e.outline={color:g,size:1.5})}))}function E(l){const t=(0,themeUtils.g4)();if("cim"===l.type)(0,cimSymbolUtils.Fe)(l,new Color.A(sizeRampUtils_S));else if(l.type.includes("line"))l.color=g;else if(l.color=t?g:w,"simple-marker"===l.type)if(l.outline){const e=l.outline?.color?.toHex();"#ffffff"===e&&(l.outline.color=g)}else l.outline={color:g,width:1.5}}async function T(e,t,n,o){const s=(await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/renderers/visualVariables/support/visualVariableUtils.js"))).getSizeRangeAtScale(e,n,o),i=s&&P(s);if(!s||!i)return;let r=i.map((l=>function R(e,l,t){const n=t.minSize,o=t.maxSize,s=l.minDataValue,i=l.maxDataValue;let r;r=e<=n?s:e>=o?i:(e-n)/(o-n)*(i-s)+s;return r}(l,e,s)));r=(0,numberUtils.LI)(r);for(let l=1;l<r.length-1;l++){const s=await A(e,t,r[l],r[l-1],n,o);s&&(r[l]=s[0],i[l]=s[1])}return r}function P(e){const l=e.minSize,t=e.maxSize,n=sizeRampUtils_z,o=(t-l)/(n-1),s=[];for(let i=0;i<n;i++)s.push(l+o*i);return s}async function A(e,o,s,i,r,a){const u=await H(e,o,s,r,a),c=await H(e,o,i,r,a),m=(0,numberUtils.lc)(s),p=m.fractional,f=sizeRampUtils_v;let y=m.integer,b=null,h=null;s>0&&s<1&&(b=10**p,y=(0,numberUtils.lc)(s*=b).integer);for(let t=y-1;t>=0;t--){const i=10**t;let m=Math.floor(s/i)*i,p=Math.ceil(s/i)*i;null!=b&&(m/=b,p/=b);let y=(m+p)/2;[,y]=(0,numberUtils.LI)([m,y,p],{indexes:[1]});const d=await H(e,o,m,r,a),w=await H(e,o,p,r,a),S=await H(e,o,y,r,a),g=(0,numberUtils.u5)(u,d,c,null),v=(0,numberUtils.u5)(u,w,c,null),z=(0,numberUtils.u5)(u,S,c,null);let j=g.previous<=f,k=v.previous<=f;if(j&&k&&(g.previous<=v.previous?(j=!0,k=!1):(k=!0,j=!1)),j?h=[m,d]:k?h=[p,w]:z.previous<=f&&(h=[y,S]),h)break}return h}async function H(e,l,t,n,o){const{getSize:s}=await Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/renderers/visualVariables/support/visualVariableUtils.js"));return s(e,t,{scale:n,view:o,shape:"simple-marker"===l.type?l.style:null})}function O(e,l){const t=e.clone();if((0,typeUtils.wk)(t))(0,utils.$d)(t)||t.symbolLayers.forEach((e=>{"fill"!==e.type&&(e.size=l)}));else if(function j(e){return"esri.symbols.SimpleMarkerSymbol"===e.declaredClass}(t))t.size=l;else if(function k(e){return"esri.symbols.PictureMarkerSymbol"===e.declaredClass}(t)){const e=t.width,n=t.height;t.height=l,t.width=l*(e/n)}else!function V(e){return"esri.symbols.SimpleLineSymbol"===e.declaredClass}(t)?function x(e){return"esri.symbols.TextSymbol"===e.declaredClass}(t)&&t.font&&(t.font.size=l):t.width=l;return t}}}]);