"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[5570],{"./node_modules/@arcgis/core/chunks/GeometryCleaner-BEJM7I4l.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>i});var _Geometry_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/Geometry.js");function i(i,a){const f=i.getGeometryType();return f===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint?i:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(f)?u(i):f===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint||f===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope?i:f===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultipatch?((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.b)("not implemented for multipatch"),i):i}function u(e){if(function a(e){for(let n=0,i=e.getPathCount();n<i;n++){const i=e.getPathSize(n);if(0===i)return!1;if(1===i){if(0===e.getSegmentCountPath(n))return!1;if(e.getSegmentType(e.getPathStart(n))===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine)return!1;if(!e.isClosedPath(n))return!1}}return!0}(e))return e;const n=e.createInstance();for(let i=0,r=e.getPathCount();i<r;i++){const r=e.getPathSize(i);if(0!==r){if(1===r){if(0===e.getSegmentCountPath(i))continue;if(e.getSegmentType(e.getPathStart(i))===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine)continue;if(!e.isClosedPath(i))continue}n.addPath(e,i,!0)}}return n}},"./node_modules/@arcgis/core/chunks/OperatorGeodesicBuffer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{OperatorGeodesicBuffer:()=>ve});var _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/SimpleGeometryCursor.js"),_Geometry_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/Geometry.js"),_Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/Envelope2D.js"),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/ProjectionTransformation.js"),_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/chunks/QuadraticBezier.js"),_Envelope_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/chunks/Envelope.js"),_Transformation2D_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/chunks/Transformation2D.js"),_Point2D_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/chunks/Point2D.js"),_OperatorClip_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/chunks/OperatorClip.js"),_GeometryCleaner_BEJM7I4l_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/chunks/GeometryCleaner-BEJM7I4l.js"),_OperatorDensify_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/chunks/OperatorDensify.js");class ae{constructor(e){this.m_sr=null,this.m_gcs=null,this.m_transform=null,this.m_a=0,this.m_eSquared=0,this.m_rpu=0,this.m_radTolerance=0,this.m_q90=0,this.m_gcs90=0,this.m_gcs180=0,this.m_gcs360=0,this.m_gcs60=0,this.m_ellipticToGeodesicMaxRatio=0,this.m_curveType=0,this.m_bShapePreserving=!1,this.m_distance=0,this.m_absDistance=0,this.m_convergenceOffset=0,this.m_cornerStep=0,this.m_segmentStep=0,this.m_progressTracker=e}bufferPolygon(e){const t=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a,s=new we(this,e,t);return this.processGnomonicBufferPiecesCursor(!0,s)}bufferPolyline(e){const t=new we(this,e,null);return this.processGnomonicBufferPiecesCursor(!0,t)}bufferMultiPoint(e){const t=new Ce(this,e);return this.processGnomonicBufferPiecesCursor(!1,t)}bufferPoint(e){const t=e.getXY();t.scale(this.m_rpu);let s=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a;if(this.bufferPoint2D(t,!1,s)){const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(null,s,!0);s=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.y)(s,e,!0,!0,-1,this.m_progressTracker,0,!1)}return s=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.v).foldInto360RangeGeodetic(s,this.m_gcs,2),s}processGnomonicBufferPiecesCursor(e,t){const s=t;let n=s.getGnomonic();const i=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.z)((0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.A)());let r=new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.L,o=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.h).executeMany(r,i,this.m_progressTracker,2);const m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.d)(6,!1),a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.m)(_Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J,6);this.initializeGrid(m,a);const h=[null,null,null,null,null,null],c=[null,null,null,null,null,null],u=[null,null,null,null,null,null];let l,d,g;for(;null!==(l=s.next());){if(d=s.getGnomonic(),d!==n){if(null!==n){let t=o.next();if(r=null,o=null,null!=t){const s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(i,t,!0),r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.d)(s);t=n.unproject(t,r,this.m_progressTracker),this.putInGridCursors(e,t,i,!0,m,a,h,c,u)}}null!==d&&(r=new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.L,o=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.h).executeMany(r,i,this.m_progressTracker,2)),n=d}if(s.isRunningInGnomonic()){if(d.project(l),s.needsSimplify()){const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(null,l,!0);l=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.y)(l,e,!0,!0,-1,this.m_progressTracker,0,!1)}r.tick(be(l)),o.tock()}else this.putInGridCursors(e,l,i,!0,m,a,h,c,u)}let p=!1;for(let _=0;_<6;_++)if(null!=u[_]){p=!0;break}if(p){let t=!1;const l=[null,null,null,null,null,null];if(e){const n=s.m_densified;if(s.m_densified=null,null!==n){const s=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_7__.T;s.scale(1/this.m_rpu,1/this.m_rpu),n.applyTransformation(s),this.m_distance>0?this.putInGridCursors(e,n,i,!1,m,a,h,c,u):(this.processInGrid(e,n,!1,m,a,h,l),t=!0)}}const _=new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.L,d=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.h).executeMany(_,this.m_gcs,this.m_progressTracker,2);if(null!==o){let t=o.next();r=null,o=null;const s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(i,t,!0),l=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.d)(s);t=n.unproject(t,l,this.m_progressTracker),this.putInGridCursors(e,t,i,!0,m,a,h,c,u)}for(let e=0;e<6;e++)if(null!=u[e]){let s=u[e].next();u[e]=null,c[e]=null,t&&null!==l[e]&&(s=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.e).execute(l[e],s,i,this.m_progressTracker));const n=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(i,s,!0),r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.d)(n);s=h[e].unproject(s,r,this.m_progressTracker),s=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.g).execute(s,this.m_gcs,!0,this.m_progressTracker),_.tick(be(s)),d.tock()}g=d.next()}else{let t,m=!1;if(e){let e=s.m_densified;if(s.m_densified=null,null!==e){const s=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_7__.T;s.scale(1/this.m_rpu,1/this.m_rpu),e.applyTransformation(s),d.project(e);const n=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(null,e,!0);e=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.y)(e,n,!1,!0,-1,this.m_progressTracker,0,!1),this.m_distance>0?(r.tick(be(e)),o.tock()):(t=e,m=!0)}}let a=o.next();r=null,o=null,m&&(a=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.e).execute(t,a,i,this.m_progressTracker));const h=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(i,a,!0),c=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.d)(h);g=n.unproject(a,c,this.m_progressTracker),g=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.g).execute(g,this.m_gcs,!0,this.m_progressTracker)}return g=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.v).foldInto360RangeGeodetic(g,this.m_gcs,2),g}putInGridCursors(e,t,s,n,i,r,o,m,a){const h=[null,null,null,null,null,null];this.processInGrid(e,t,n,i,r,o,h);for(let c=0;c<6;c++)null!==h[c]&&(null===m[c]&&(m[c]=new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.L,a[c]=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.h).executeMany(m[c],s,this.m_progressTracker,2)),m[c].tick(be(h[c])),a[c].tock())}processInGrid(e,t,s,n,i,r,o){const m=.01,a=this.insertGeodeticPointsAlongGrid(t,i,m);for(let h=0;h<6;h++){if(n[h])continue;const e=i[h].clone();e.inflateCoords(m,m);const c=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.e)(t,e),u=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.a)(null,c,!1).total();let l=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_9__.c)(a,e,u,Number.NaN,this.m_progressTracker);if(null!==l&&!l.isEmpty()){if(l===a&&(l=l.clone()),null===r[h]){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;h<3?e.setCoords(0,1):e.setCoords(0,-1);const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;t.setAdd(i[h].getCenter(),e),r[h]=xe(this.m_gcs,t)}r[h].project(l);const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.b)(null,l,!0);l=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.y)(l,e,s,!0,-1,this.m_progressTracker,0,!1),o[h]=l}}}insertGeodeticPointsAlongGrid(e,t,s){const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J.construct(t[3].xmin,t[3].ymin,t[2].xmax,t[2].ymax),i=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.B)(this.m_gcs,n,e,!0,this.m_progressTracker),r=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.E,o=r.addGeometry(i);return(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.D)(r,o,this.m_gcs,0,2,!0,t[0].xmax+s),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.D)(r,o,this.m_gcs,0,2,!0,t[1].xmax+s),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.D)(r,o,this.m_gcs,0,2,!1,t[1].ymin+s),0!==s&&((0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.D)(r,o,this.m_gcs,0,2,!0,t[0].xmax-s),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.D)(r,o,this.m_gcs,0,2,!0,t[1].xmax-s),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.D)(r,o,this.m_gcs,0,2,!1,t[1].ymin-s)),r.getGeometry(o)}initializeGrid(e,t){for(let s=0;s<6;s++)e[s]=!1;t[0].setCoords({xmin:-this.m_gcs180,ymin:0,xmax:-this.m_gcs60,ymax:this.m_gcs90}),t[1].setCoords({xmin:-this.m_gcs60,ymin:0,xmax:this.m_gcs60,ymax:this.m_gcs90}),t[2].setCoords({xmin:this.m_gcs60,ymin:0,xmax:this.m_gcs180,ymax:this.m_gcs90}),t[3].setCoords({xmin:-this.m_gcs180,ymin:-this.m_gcs90,xmax:-this.m_gcs60,ymax:0}),t[4].setCoords({xmin:-this.m_gcs60,ymin:-this.m_gcs90,xmax:this.m_gcs60,ymax:0}),t[5].setCoords({xmin:this.m_gcs60,ymin:-this.m_gcs90,xmax:this.m_gcs180,ymax:0})}checkAndPrepSegmentForCrossingAzimuthsOrPoleWrap(e,t,s,n,i,r){const o=e[0],m=e.at(-1),a=o.y<m.y?o.y:m.y,h=o.y>m.y?o.y:m.y,c=_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.t.q(this.m_a,this.m_eSquared,a),u=_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.t.q(this.m_a,this.m_eSquared,h);if(this.m_q90-(c+t+this.m_absDistance)>.001&&this.m_q90+(u-t-this.m_absDistance)>.001)return!1;const l=s-_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.l,_=n+_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.l,f=l-Math.PI,d=l+Math.PI,p=_+Math.PI,P=[Number.NaN],x=[Number.NaN],b=[Number.NaN],y=[Number.NaN];let w=!1;if(le(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,o,l,f,m,_,P,x),le(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,m,p,_,o,f,b,y),(_<P[0]&&P[0]<p||_<x[0]&&x[0]<p)&&(w=!0),w||(f<b[0]&&b[0]<l||f<y[0]&&y[0]<l)&&(w=!0),!w&&i)return!1;const C=[];for(let g=e.length-1;g>=0;g--)C.push(e[g]);r.setEmpty(),r.addPathPoint2D(null,0,!0);let v=0;v=ce(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,this.m_curveType,e,l,_,i,v,r),v=ue(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,m,_,p,this.m_cornerStep,i,v,r,P[0],x[0]),v=ce(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,this.m_curveType,C,p,d,i,v,r),v=ue(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,o,f,l,this.m_cornerStep,i,v,r,b[0],y[0]);let S=!1;return i||(S=this.checkAndPrepForPole(r)),w||S}bufferPoint2D(e,t,s){s.setEmpty(),s.addPathPoint2D(null,0,!0);ue(this.m_a,this.m_eSquared,this.m_rpu,this.m_absDistance,e,-this.m_cornerStep,2*Math.PI,this.m_cornerStep,t,0,s);let i=!1;return t||(i=this.checkAndPrepForPole(s)),i}checkAndPrepForPole(e){const t=this.checkAndPrepForPoleTouch(e),s=this.checkAndPrepForPoleWrap(e);return t||s}checkAndPrepForPoleTouch(e){const t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J;return e.queryEnvelope(t),!(!(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P)(t.ymax,this.m_gcs90)&&!(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P)(t.ymin,-this.m_gcs90)||(this.prepPoleTouch(e),0))}checkAndPrepForPoleWrap(e){const t=e.getXY(0),s=e.getXY(e.getPointCount()-1);return Math.abs(t.x-s.x)>this.m_gcs180?(this.prepSinglePoleWrap(e),!0):this.checkAndPrepForDoublePoleWrap(e)}checkAndPrepForDoublePoleWrap(e){return e.calculateArea2D()<0&&(this.prepDoublePoleWrap(e),!0)}prepPoleTouch(e){const t=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a;t.insertPath2D(-1,null,0,0,!0);const s=e.getPathStart(0),n=e.getPathEnd(0),i=n-s;let r=-1;for(r=s;r<n;r++){const t=e.getXY(r),s=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P)(t.y,this.m_gcs90),n=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P)(t.y,-this.m_gcs90);if(!s&&!n)break}let o=r,m=!1,a=Number.NaN;do{const n=e.getXY(o),r=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P)(n.y,this.m_gcs90),h=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P)(n.y,-this.m_gcs90),c=s+(o+1-s)%i;if(r||h){let s=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P.construct(a,n.y);t.insertPoint2D(0,-1,s);const i=e.getXY(c),r=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P)(i.y,this.m_gcs90),o=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.P)(i.y,-this.m_gcs90);r||o||(s=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P.construct(i.x,n.y),m?t.setXY(t.getPointCount()-1,s):t.insertPoint2D(0,-1,s)),m=!0}else t.insertPoint2D(0,-1,n),a=n.x,m=!1;o=c}while(o!==r);e.setEmpty(),e.add(t,!1)}prepSinglePoleWrap(e){const t=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a,s=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a,n=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_7__.T,i=e.getXY(e.getPathStart(0)),r=e.getXY(e.getPathEnd(0)-1),o=this.m_gcs360,m=this.m_gcs180,a=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J;a.setCoords({xmin:-this.m_gcs180,ymin:-this.m_gcs90,xmax:this.m_gcs180,ymax:this.m_gcs90});const h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J;e.queryEnvelope(h);const c=Math.ceil(h.width()/o);let u,l;i.x>r.x?(u=-o,l=this.m_gcs90):(u=o,l=-this.m_gcs90),n.setShiftCoords(u,0),t.addPath(e,0,!0),s.add(t,!1);const f=new _Envelope_js__WEBPACK_IMPORTED_MODULE_6__.P;for(let _=0;_<c;_++)s.applyTransformation(n),s.getPointByVal(0,f),t.lineToPoint(f),t.addSegmentsFromPath(s,0,0,s.getSegmentCount()-1,!1);const d=t.getXY(0),g=t.getXY(t.getPointCount()-1);d.y=l,g.y=l,t.lineTo(g);const p=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;for(p.setCoordsPoint2D(g),p.x-=.5*u;Math.abs(p.x-d.x)>m;)t.lineTo(p),p.x-=.5*u;t.lineTo(d);const P=a.getCenterX(),x=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J;t.queryEnvelope(x);let b=0;const y=x.getCenter().x;y-P>m?b=-Math.ceil((y-P-m)/o):P-y>m&&(b=Math.ceil((P-y-m)/o)),0!==b&&(n.setShiftCoords(b*o,0),t.applyTransformation(n));const w=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.E,C=w.addGeometry(t);(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.D)(w,C,this.m_gcs,0,2,!0,a.xmin),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.D)(w,C,this.m_gcs,0,2,!0,a.xmax);const v=w.getGeometry(C),S=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.e)(v,a);S.inflateCoords(0,1);const D=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.a)(null,S,!0).total(),I=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_9__.c)(v,a,D,Number.NaN,this.m_progressTracker);e.setEmpty(),e.add(I,!1)}prepDoublePoleWrap(e){const t=this.m_gcs360,s=this.m_gcs180,n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J;n.setCoords({xmin:-this.m_gcs180,ymin:-this.m_gcs90,xmax:this.m_gcs180,ymax:this.m_gcs90});const i=n.getCenter().x,r=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J;e.queryPathEnvelope(0,r);let o,m=0,a=r.getCenter().x;if(a-i>s?m=-Math.ceil((a-i-s)/t):i-a>s&&(m=Math.ceil((i-a-s)/t)),0!==m){const s=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_7__.T;s.setShiftCoords(m*t,0),e.getImpl().applyTransformationToPath(s,0),e.queryPathEnvelope(0,r),a=r.getCenter().x}const h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J;n.containsExclusiveEnvelope(r)?(o=!1,h.setCoords({env2D:n})):(o=!0,h.setCoords({env2D:n}),h.xmin-=t,h.xmax+=t);let c=e.createInstance();c.addPathPoint2D(null,0,!0);const u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;if(u.setCoords(h.xmin,h.ymin),c.insertPoint2D(0,-1,u),u.setCoords(h.xmin,h.ymax),c.insertPoint2D(0,-1,u),u.setCoords(.5*(h.xmin+h.xmax),h.ymax),c.insertPoint2D(0,-1,u),u.setCoords(h.xmax,h.ymax),c.insertPoint2D(0,-1,u),u.setCoords(h.xmax,h.ymin),c.insertPoint2D(0,-1,u),u.setCoords(.5*(h.xmin+h.xmax),h.ymin),c.insertPoint2D(0,-1,u),o){c.addPath(e,0,!0);const s=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_7__.T;a<i?s.setShiftCoords(t,0):s.setShiftCoords(-t,0),e.getImpl().applyTransformationToPath(s,0),c.addPath(e,0,!0);const r=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.E,o=r.addGeometry(c);(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.D)(r,o,this.m_gcs,0,2,!0,n.xmin),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.D)(r,o,this.m_gcs,0,2,!0,n.xmax),c=r.getGeometry(o);const m=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.e)(c,n);m.inflateCoords(0,1);const h=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.a)(null,m,!0).total();c=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_9__.c)(c,n,h,Number.NaN,this.m_progressTracker)}else c.addPath(e,0,!0);e.setEmpty(),e.add(c,!1)}setMinCornerStep(){const e={stack:[],error:void 0,hasError:!1};try{let s=Math.min(Math.PI*this.m_a-this.m_absDistance,this.m_absDistance);s=Math.min(s,.125*this.m_a*Math.PI);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;n.setCoords(0,10*this.m_rpu);const i=0;let r=45*this.m_rpu;const o=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1),m=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1),a=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1),h=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1),c=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,_=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;for(_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodesicCoordinate(this.m_a,this.m_eSquared,n.x,n.y,s,i,o.at(0),o.at(1)),c.setCoords(o.at(0).val,o.at(1).val),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodesicCoordinate(this.m_a,this.m_eSquared,n.x,n.y,s,r,m.at(0),m.at(1)),u.setCoords(m.at(0).val,m.at(1).val);;){const e={stack:[],error:void 0,hasError:!1};try{const t=.5*(i+r);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodesicCoordinate(this.m_a,this.m_eSquared,n.x,n.y,s,t,a.at(0),a.at(1)),l.setCoords(a.at(0).val,a.at(1).val);const o=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1),f=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticDistance(this.m_a,this.m_eSquared,c.x,c.y,u.x,u.y,o,f,null,2),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticCoordinate(this.m_a,this.m_eSquared,c.x,c.y,.5*o.val,f.val,h.at(0),h.at(1),2),_.setCoords(h.at(0).val,h.at(1).val);const d=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1);if(_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticDistance(this.m_a,this.m_eSquared,l.x,l.y,_.x,_.y,d,null,null,2),d.val<=this.m_convergenceOffset)break;r*=.9,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodesicCoordinate(this.m_a,this.m_eSquared,n.x,n.y,s,r,m.at(0),m.at(1)),u.setCoords(m.at(0).val,m.at(1).val)}catch(t){e.error=t,e.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(e)}}const f=r-i,d=2*Math.PI/Math.ceil(2*Math.PI/f);this.m_cornerStep=d}catch(s){e.error=s,e.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(e)}}setMinSegmentStep(){const e={stack:[],error:void 0,hasError:!1};try{let n=Math.min(Math.PI*this.m_a-this.m_absDistance,this.m_absDistance);n=Math.min(n,.125*this.m_a*Math.PI);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;i.setCoords(0,10*this.m_rpu),r.setCoords(10*this.m_rpu,10*this.m_rpu);const o=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1),m=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1),a=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticDistance(this.m_a,this.m_eSquared,i.x,i.y,r.x,r.y,a,o,m,this.m_curveType);const h=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1),c=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1),u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,l=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1),_=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1),f=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1),d=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1),g=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1),p=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,P=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,x=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,b=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,y=0;let w=1;const C=o.val,v=m.val,S=C-.5*Math.PI,D=v+.5*Math.PI,I=a.val;for(_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodesicCoordinate(this.m_a,this.m_eSquared,i.x,i.y,n,S,_.at(0),_.at(1)),p.setCoords(_.at(0).val,_.at(1).val),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodesicCoordinate(this.m_a,this.m_eSquared,r.x,r.y,n,D,f.at(0),f.at(1)),P.setCoords(f.at(0).val,f.at(1).val);;){const e={stack:[],error:void 0,hasError:!1};try{const s=.5*(y+w);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticCoordinate(this.m_a,this.m_eSquared,i.x,i.y,s*I,C,h.at(0),h.at(1),this.m_curveType),u.setCoords(h.at(0).val,h.at(1).val),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticDistance(this.m_a,this.m_eSquared,i.x,i.y,u.x,u.y,null,null,l,this.m_curveType);const o=l.val+.5*Math.PI;_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodesicCoordinate(this.m_a,this.m_eSquared,u.x,u.y,n,o,d.at(0),d.at(1)),x.setCoords(d.at(0).val,d.at(1).val);const m=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1),a=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticDistance(this.m_a,this.m_eSquared,p.x,p.y,P.x,P.y,m,a,null,2),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticCoordinate(this.m_a,this.m_eSquared,p.x,p.y,.5*m.val,a.val,g.at(0),g.at(1),2),b.setCoords(g.at(0).val,g.at(1).val);const _=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1);if(_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticDistance(this.m_a,this.m_eSquared,x.x,x.y,b.x,b.y,_,null,null,2),_.val<=this.m_convergenceOffset)break;{const e={stack:[],error:void 0,hasError:!1};try{w*=.9,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticCoordinate(this.m_a,this.m_eSquared,i.x,i.y,w*I,C,c.at(0),c.at(1),this.m_curveType),r.setCoords(c.at(0).val,c.at(1).val);const t=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(e,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticDistance(this.m_a,this.m_eSquared,i.x,i.y,r.x,r.y,null,null,t,this.m_curveType);const s=t.val+.5*Math.PI;_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodesicCoordinate(this.m_a,this.m_eSquared,r.x,r.y,n,s,f.at(0),f.at(1)),P.setCoords(f.at(0).val,f.at(1).val)}catch(t){e.error=t,e.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(e)}}}catch(s){e.error=s,e.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(e)}}let G=w*I;G>1e5&&(G=1e5),this.m_segmentStep=G}catch(n){e.error=n,e.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(e)}}setConvergenceOffset(){let e;e=this.m_absDistance>5e4?100:this.m_absDistance>1e4?10:1,this.m_absDistance/e<500&&(e=this.m_absDistance/500),e<.01&&(e=.01),this.m_convergenceOffset=e}}function he(e,t,s,n,i,r,o){if(e.isEmpty())return new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a({vd:e.getDescription()});let f=e;if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.j)(f)){const e=10*t.getTolerance(0);f=(new _OperatorDensify_js__WEBPACK_IMPORTED_MODULE_11__.O).execute(f,0,e,0,o,12e3)}const y=new ae(o);y.m_sr=t,y.m_gcs=t.getGCS(),y.m_transform=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.p)(t,y.m_gcs,null);const w=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.G)();y.m_gcs.querySpheroidData(w);const C=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J;f.queryEnvelope(C),y.m_a=w.majorSemiAxis,y.m_eSquared=w.e2,y.m_rpu=y.m_gcs.getUnit().getUnitToBaseFactor(),y.m_gcs90=.5*Math.PI/y.m_rpu,y.m_gcs180=Math.PI/y.m_rpu,y.m_gcs360=2*Math.PI/y.m_rpu,y.m_gcs60=y.m_gcs360/6,y.m_q90=_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.t.q90(y.m_a,y.m_eSquared),y.m_ellipticToGeodesicMaxRatio=.5*y.m_a*Math.PI/y.m_q90;const v=y.m_gcs.getTolerance(0);y.m_radTolerance=v*y.m_rpu,4===s?(y.m_curveType=2,y.m_bShapePreserving=!0):(y.m_curveType=s,y.m_bShapePreserving=!1),y.m_distance=n,y.m_absDistance=Math.abs(n),Number.isNaN(i)||i<=0?y.setConvergenceOffset():y.m_convergenceOffset=Math.max(i,.001),y.m_convergenceOffset/=r;let S,D=f.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(D)){const e=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.P({vd:f.getDescription()});e.addSegment(f,!0),S=e,D=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline}else if(D===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const e=f,t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J;e.queryEnvelope(t);const s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.d)((0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.a)(y.m_sr,C,!0));if(t.minDimension()<=s)if(0===t.maxDimension()){const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_6__.P({vd:f.getDescription()});e.getCenter(t),S=t,D=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint}else{const t=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.P({vd:f.getDescription()});t.addEnvelope(e,!1),S=t,D=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline}else{const t=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a({vd:f.getDescription()});t.addEnvelope(e,!1),S=t,D=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon}}else S=f;if(y.setMinCornerStep(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.e)(D)||y.setMinSegmentStep(),y.m_absDistance<=.5*y.m_convergenceOffset)return D!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a({vd:S.getDescription()}):y.m_bShapePreserving?S:(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.u)(S,y.m_sr,y.m_curveType,y.m_segmentStep,-1,o);if(y.m_distance<0&&D!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon)return new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a({vd:S.getDescription()});if(y.m_bShapePreserving&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(D)){const e=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.u)(S,t,4,Number.NaN,y.m_convergenceOffset,o);S=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.v).execute(e,y.m_transform,o)}else S=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.v).execute(S,y.m_transform,o);if(S=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.w)(S,y.m_gcs),S.isEmpty())return new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a({vd:S.getDescription()});!y.m_bShapePreserving&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(D)&&(S=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.x)(y.m_rpu,S)),S=function fe(e,t){const s=e.getGeometryType();let n;if(n=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(s)?e.getPathCount():s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint?e.getPointCount():1,1===n)return e;const i=[],r=[];for(let m=0;m<n;m++){i.push(m);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(s)){const t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J;e.queryPathEnvelope(m,t),n.assign(t.getCenter())}else n.assign(e.getXY(m));const o=t.toGeohash(n);r.push(o)}i.sort(((e,t)=>r[e]<r[t]?-1:r[e]>r[t]?1:0));const o=e.createInstance();for(let m=0;m<n;m++){const t=i[m];(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(s)?o.addPath(e,t,!0):o.addPoints(e,t,t+1)}return o}(S,y.m_gcs);let I=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a;switch(D){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:I=y.bufferPolygon(S);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:I=y.bufferPolyline(S);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:I=y.bufferMultiPoint(S);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:I=y.bufferPoint(S);break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.k)("")}const G=(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.v).execute(I,y.m_transform.getInverse(),o);return G.mergeVertexDescription(S.getDescription()),G}function ce(e,t,s,n,i,r,o,m,a,h,c){const u={stack:[],error:void 0,hasError:!1};try{const l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;l.setNAN(),a||c.getPointCount()>0&&(l.setCoordsPoint2D(c.getXY(c.getPointCount()-1)),l.scale(s));const _=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(u,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1),f=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(u,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1),d=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,p=r.at(-1),P=1/s;for(let s=0;s<r.length;s++){const u=r[s];let x;0===s?x=o:s===r.length-1?x=m:(_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticDistance(e,t,p.x,p.y,u.x,u.y,null,null,_,i),x=_.val-.5*Math.PI),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodesicCoordinate(e,t,u.x,u.y,n,x,f.at(0),f.at(1)),a?g.setCoords(f.at(0).val,f.at(1).val):(d.setCoords(f.at(0).val,f.at(1).val),h=_e(u.x,d.x,l.x,h),g.setCoords(h+d.x,d.y),l.setCoordsPoint2D(g)),g.scale(P),c.insertPoint2D(0,-1,g)}return h}catch(l){u.error=l,u.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(u)}}function ue(e,t,s,n,i,r,o,m,a,h,c,u=Number.NaN,l=Number.NaN){const _={stack:[],error:void 0,hasError:!1};try{if(o-r<m)return h;const f=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(_,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1),d=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,p=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;g.setNAN(),a||c.getPointCount()>0&&(g.setCoordsPoint2D(c.getXY(c.getPointCount()-1)),g.scale(s));let P=Math.ceil(r/m),x=P++*m;x===r&&(x=P++*m);let b=r;const y=1/s;for(;x<o+m&&(b<u&&u<x?(x=u,P--):b<l&&l<x&&(x=l,P--),!(x>=o));)_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodesicCoordinate(e,t,i.x,i.y,n,x,f.at(0),f.at(1)),a?p.setCoords(f.at(0).val,f.at(1).val):(d.setCoords(f.at(0).val,f.at(1).val),h=_e(i.x,d.x,g.x,h),p.setCoords(h+d.x,d.y),g.setCoordsPoint2D(p)),p.scale(y),c.insertPoint2D(0,-1,p),b=x,x=P++*m;return h}catch(f){_.error=f,_.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(_)}}function le(e,t,s,n,i,r,o,m,a,h,c){const u={stack:[],error:void 0,hasError:!1};try{const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,_=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(u,new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.S(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E),!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodesicCoordinate(e,t,i.x,i.y,n,r,_.at(0),_.at(1)),s.setCoords(_.at(0).val,_.at(1).val),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodesicCoordinate(e,t,i.x,i.y,n,o,_.at(0),_.at(1)),l.setCoords(_.at(0).val,_.at(1).val);const f=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(u,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1);for(_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticDistance(e,t,m.x,m.y,s.x,s.y,null,f,null,0),h[0]=f.val,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.geodeticDistance(e,t,m.x,m.y,l.x,l.y,null,f,null,0),c[0]=f.val;h[0]<=c[0];)h[0]+=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k;for(;h[0]>c[0];)h[0]-=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k;for(;h[0]>=a;)h[0]-=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k,c[0]-=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k;for(;h[0]<a;)h[0]+=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k,c[0]+=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k}catch(l){u.error=l,u.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(u)}}function _e(e,t,s,n){if(Number.isNaN(s)){for(;n+t-e>Math.PI;)n-=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k;for(;e-(n+t)>Math.PI;)n+=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k;return n}return n+t-s>Math.PI?n-=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k:s-(n+t)>Math.PI&&(n+=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k),n}function de(e,t,s,n,i,r){const o={stack:[],error:void 0,hasError:!1};try{if(n>=r)return!1;const m=s[0],a=s.at(-1),h=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(o,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1),c=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(o,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1),u=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(o,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1);_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.greatEllipticDistance(e,t,i.x,i.y,m.x,m.y,h,null,null),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.greatEllipticDistance(e,t,i.x,i.y,a.x,a.y,c,null,null),_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.greatEllipticDistance(e,t,m.x,m.y,a.x,a.y,u,null,null);let l=Math.min(h.val,c.val)+u.val,_=l+n;if(_<r)return!0;const f=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(o,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1);l=Math.max(h.val,c.val);for(let n=1;n<s.length-1;n++){const r=s[n];_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.greatEllipticDistance(e,t,i.x,i.y,r.x,r.y,f,null,null),f.val>l&&(l=f.val)}return _=l+n,_<r}catch(m){o.error=m,o.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(o)}}function ge(e,t,s,n,i,r,o,m){let a;if(n.length%2==0){const e=n.length>>1,t=n[e],s=n[e-1];a=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P.lerp(t,s,.5)}else a=n[n.length-1>>1].clone();const h=a.clone(),c=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.I)(e,t,h,75/180*Math.PI);return!!de(e,t,n,i,h,c)&&(null!==r&&(r.setCoordsPoint2D(a),r.scale(1/s)),null!==o&&o.setCoordsPoint2D(h),null!==m&&(m[0]=c),!0)}function pe(e,t,s,n,i,r){const o={stack:[],error:void 0,hasError:!1};try{if(n>=r)return!1;const m=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.b)(o,new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.E,!1);return _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.F.greatEllipticDistance(e,t,i.x,i.y,s.x,s.y,m,null,null),m.val+n<r}catch(m){o.error=m,o.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_4__.c)(o)}}function xe(e,t){return new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.H(e,t)}function be(e){return(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.f)(e,0)||(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.s)(e,0),e}class ye{constructor(e){this.m_bRunningInGnomonic=!1,this.m_bNeedsSimplify=!1,this.m_gnomonic=null,this.m_gnomonicCenterRad=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,this.m_minGnomonicRadius=Number.NaN,this.m_progressTracker=e}isRunningInGnomonic(){return this.m_bRunningInGnomonic}needsSimplify(){return this.m_bNeedsSimplify}getGnomonic(){return this.m_gnomonic}}class we extends ye{constructor(e,t,s){super(e.m_progressTracker),this.m_segIter=null,this.m_bNextSegmentCannotJoin=!1,this.m_currentDensifiedDelta=[0],this.m_currentBufferedDelta=0,this.m_lastAzimuth=0,this.m_startAzimuth=[0],this.m_endAzimuth=[0],this.m_numWinds=0,this.m_debugCounter=0,this.m_bufferHelper=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a,this.m_densifiedPoints=[],this.m_bufferer=e,this.m_multiPath=t,this.m_densified=s,this.m_bNeedsSimplify=!0;const n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J;this.m_multiPath.queryEnvelope(n);const i=n.getCenter(),r=i.clone();r.scale(this.m_bufferer.m_rpu),this.m_gnomonic=xe(this.m_bufferer.m_gcs,i),this.m_gnomonicCenterRad=r.clone(),this.m_minGnomonicRadius=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.I)(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,r,75/180*Math.PI)}next(){let e;if(this.m_bNextSegmentCannotJoin)return this.m_bNextSegmentCannotJoin=!1,this.m_segIter.nextSegment(),e=this.m_bufferHelper.clone(),e;if(null===this.m_segIter){if(this.m_segIter=this.m_multiPath.getImpl().querySegmentIterator(),!this.m_segIter.nextPath())return null;null!==this.m_densified&&this.m_densified.addPathPoint2D(null,0,!0)}if(!this.m_segIter.hasNextSegment()){if(!this.m_segIter.nextPath())return null;null!=this.m_densified&&this.m_densified.addPathPoint2D(null,0,!0)}let t=null;this.m_currentBufferedDelta=0,this.m_currentDensifiedDelta=[0],this.m_numWinds=0,this.m_lastAzimuth=Number.NaN,this.m_bNextSegmentCannotJoin=!1,this.m_densifiedPoints.length=0;let n=0;const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;for(;this.m_segIter.hasNextSegment()&&this.m_numWinds<16;){const e=this.m_segIter.nextSegment();if(i.setCoordsPoint2D(e.getStartXY()),r.setCoordsPoint2D(e.getEndXY()),i.scale(this.m_bufferer.m_rpu),r.scale(this.m_bufferer.m_rpu),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.J)(i,r))i.x=r.x;else if((0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.K)(i,r))r.x=i.x;else{let e=-1,t=-1;const s=this.m_segIter.getPathIndex(),n=this.m_multiPath.getPathStart(s),o=this.m_multiPath.getPathEnd(s);if(e=this.m_segIter.getStartPointIndex()-1,t=this.m_segIter.getEndPointIndex()+1,e<n&&(e=this.m_multiPath.isClosedPath(s)?o-1:-1),t>o-1&&(t=this.m_multiPath.isClosedPath(s)?n:-1),-1!==e){const t=this.m_multiPath.getXY(e);t.scale(this.m_bufferer.m_rpu),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.K)(t,i)&&(i.x=t.x)}if(-1!==t){const e=this.m_multiPath.getXY(t);e.scale(this.m_bufferer.m_rpu),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.J)(r,e)&&(r.x=e.x)}}this.m_densifiedPoints.length=0;const s=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.M)(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_curveType,i,r,this.m_bufferer.m_segmentStep,Number.NaN,this.m_bufferer.m_radTolerance,this.m_startAzimuth,this.m_endAzimuth,this.m_densifiedPoints,this.m_currentDensifiedDelta);if(0===n)this.m_bRunningInGnomonic=this.isSegmentBufferInCurrentGnomonic(this.m_densifiedPoints),this.m_bRunningInGnomonic||(this.m_bRunningInGnomonic=this.tryUpdateGnomonic(this.m_densifiedPoints));else if(this.m_bRunningInGnomonic){if(!this.isSegmentBufferInCurrentGnomonic(this.m_densifiedPoints)){this.m_segIter.previousSegment(),this.m_segIter.previousSegment(),this.m_segIter.nextSegment();break}}else if(ge(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_rpu,this.m_densifiedPoints,this.m_bufferer.m_absDistance*this.m_bufferer.m_ellipticToGeodesicMaxRatio,null,null,null)){this.m_segIter.previousSegment(),this.m_segIter.previousSegment(),this.m_segIter.nextSegment();break}if(0===s||(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.N)(i,r)?(this.m_bufferHelper.setEmpty(),this.m_bufferer.bufferPoint2D(i,this.m_bRunningInGnomonic,this.m_bufferHelper),this.m_bNextSegmentCannotJoin=!0):(this.m_bufferHelper.setEmpty(),this.m_bNextSegmentCannotJoin=this.checkAndPrepSegmentForCrossingAzimuthsOrPoleWrap(s,this.m_bufferHelper)),this.m_bNextSegmentCannotJoin){this.m_segIter.previousSegment(),this.m_segIter.hasPreviousSegment()?(this.m_segIter.previousSegment(),this.m_segIter.nextSegment()):this.m_segIter.resetToFirstSegment(),null!=this.m_densified&&this.m_densified.insertPointsFromPoints(this.m_densified.getPathCount()-1,-1,this.m_densifiedPoints,0,this.m_densifiedPoints.length-1,!0);break}null!=this.m_densified&&this.m_densified.insertPointsFromPoints(this.m_densified.getPathCount()-1,-1,this.m_densifiedPoints,0,this.m_densifiedPoints.length-1,!0),null===t&&(t=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a,t.addPathPoint2D(null,0,!0)),this.addJoinAndBufferLeftSide(t),n++}if(this.m_currentDensifiedDelta=[0],n>0){const e=this.m_segIter.getStartPointIndex(),s=this.m_segIter.getPathIndex();for(;n>0;){if(this.m_segIter.previousSegment(),i.setCoordsPoint2D(this.m_multiPath.getXY(this.m_segIter.getStartPointIndex())),r.setCoordsPoint2D(this.m_multiPath.getXY(this.m_segIter.getEndPointIndex())),i.scale(this.m_bufferer.m_rpu),r.scale(this.m_bufferer.m_rpu),this.m_bRunningInGnomonic)if((0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.J)(i,r))i.x=r.x;else if((0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.K)(i,r))r.x=i.x;else{let e=-1,t=-1;const s=this.m_segIter.getPathIndex(),n=this.m_multiPath.getPathStart(s),o=this.m_multiPath.getPathEnd(s);if(e=this.m_segIter.getStartPointIndex()-1,t=this.m_segIter.getEndPointIndex()+1,e<n&&(e=this.m_multiPath.isClosedPath(s)?o-1:-1),t>o-1&&(t=this.m_multiPath.isClosedPath(s)?n:-1),-1!==e){const t=this.m_multiPath.getXY(e);t.scale(this.m_bufferer.m_rpu),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.K)(t,i)&&(i.x=t.x)}if(-1!==t){const e=this.m_multiPath.getXY(t);e.scale(this.m_bufferer.m_rpu),(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.J)(r,e)&&(r.x=e.x)}}this.m_densifiedPoints.length=0,(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.M)(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_curveType,r,i,this.m_bufferer.m_segmentStep,Number.NaN,this.m_bufferer.m_radTolerance,this.m_startAzimuth,this.m_endAzimuth,this.m_densifiedPoints,this.m_currentDensifiedDelta),this.addJoinAndBufferLeftSide(t),n--}return i.setCoordsPoint2D(this.m_multiPath.getXY(this.m_segIter.getStartPointIndex())),i.scale(this.m_bufferer.m_rpu),this.m_currentBufferedDelta=ue(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_rpu,this.m_bufferer.m_absDistance,i,this.m_lastAzimuth+.5*Math.PI,this.m_lastAzimuth+1.5*Math.PI,this.m_bufferer.m_cornerStep,this.m_bRunningInGnomonic,this.m_currentBufferedDelta,t),this.m_segIter.resetToVertex(e,s),this.m_segIter.nextSegment(),t}return this.m_bNextSegmentCannotJoin=!1,this.m_segIter.nextSegment(),e=this.m_bufferHelper.clone(),e}isSegmentBufferInCurrentGnomonic(e){return null!==this.m_gnomonic&&de(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,e,this.m_bufferer.m_absDistance*this.m_bufferer.m_ellipticToGeodesicMaxRatio,this.m_gnomonicCenterRad,this.m_minGnomonicRadius)}tryUpdateGnomonic(e){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,n=[0];return ge(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_rpu,e,this.m_bufferer.m_absDistance*this.m_bufferer.m_ellipticToGeodesicMaxRatio,t,s,n)?(this.m_gnomonicCenterRad.setCoordsPoint2D(s),this.m_minGnomonicRadius=n[0],this.m_gnomonic=xe(this.m_bufferer.m_gcs,t),!0):(this.m_gnomonic=null,!1)}checkAndPrepSegmentForCrossingAzimuthsOrPoleWrap(e,t){return this.m_bufferer.checkAndPrepSegmentForCrossingAzimuthsOrPoleWrap(this.m_densifiedPoints,e,this.m_startAzimuth[0],this.m_endAzimuth[0],this.m_bRunningInGnomonic,t)}addJoinAndBufferLeftSide(e){const t=this.m_densifiedPoints[0];let s=Number.NaN,n=this.m_startAzimuth[0]-_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.l;const i=this.m_endAzimuth[0]+_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.l;let r=!1;if(!Number.isNaN(this.m_lastAzimuth)){this.m_lastAzimuth>=this.m_startAzimuth[0]?(s=this.m_lastAzimuth+_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.l,n=s+Math.PI-(this.m_lastAzimuth-this.m_startAzimuth[0])):(s=this.m_lastAzimuth+_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.l,n=s+Math.PI-(_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k-(this.m_startAzimuth[0]-this.m_lastAzimuth))),r=!(this.m_lastAzimuth>=this.m_startAzimuth[0]&&this.m_lastAzimuth-this.m_startAzimuth[0]<=Math.PI||this.m_lastAzimuth<this.m_startAzimuth[0]&&this.m_startAzimuth[0]-this.m_lastAzimuth>=Math.PI);let i=!1;if(Math.abs(n-s)<=.5*this.m_bufferer.m_cornerStep&&(r||(i=!0)),i){if(e.removePointFromPath(0,e.getPointCount()-1),!this.m_bRunningInGnomonic){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;t.setCoordsPoint2D(e.getXY(e.getPointCount()-1)),t.scale(this.m_bufferer.m_rpu),t.x-this.m_currentBufferedDelta<-Math.PI?this.m_currentBufferedDelta-=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k:t.x-this.m_currentBufferedDelta>Math.PI&&(this.m_currentBufferedDelta+=_Point2D_js__WEBPACK_IMPORTED_MODULE_8__.k)}n=.5*(n+s)}else if(r){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P;s.setCoordsPoint2D(t),s.scale(1/this.m_bufferer.m_rpu),e.insertPoint2D(0,-1,s)}else ue(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_rpu,this.m_bufferer.m_absDistance,this.m_densifiedPoints[0],s,n,this.m_bufferer.m_cornerStep,this.m_bRunningInGnomonic,this.m_currentBufferedDelta,e)}this.m_startAzimuth[0]!==this.m_lastAzimuth&&this.m_numWinds++,ce(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_rpu,this.m_bufferer.m_absDistance,this.m_bufferer.m_curveType,this.m_densifiedPoints,n,i,this.m_bRunningInGnomonic,this.m_currentBufferedDelta,e),this.m_lastAzimuth=this.m_endAzimuth[0]}}class Ce extends ye{constructor(e,t){super(e.m_progressTracker),this.m_pointIndex=-1,this.m_bufferer=e,this.m_multiPoint=t,this.m_bNeedsSimplify=!1;const s=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J;this.m_multiPoint.queryEnvelope(s);const n=s.getCenter(),i=n.clone();i.scale(this.m_bufferer.m_rpu),this.m_gnomonic=xe(this.m_bufferer.m_gcs,n),this.m_gnomonicCenterRad=i.clone(),this.m_minGnomonicRadius=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.I)(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,i,75/180*Math.PI)}next(){if(this.m_bNeedsSimplify=!1,++this.m_pointIndex===this.m_multiPoint.getPointCount())return null;const e=this.m_multiPoint.getXY(this.m_pointIndex);e.scale(this.m_bufferer.m_rpu),this.m_bRunningInGnomonic=this.isPointBufferInCurrentGnomonic(e),this.m_bRunningInGnomonic||(this.m_bRunningInGnomonic=this.tryUpdateGnomonic(e));const t=new _QuadraticBezier_js__WEBPACK_IMPORTED_MODULE_5__.a,s=this.m_bufferer.bufferPoint2D(e,this.m_bRunningInGnomonic,t);return this.m_bNeedsSimplify=s,t}isPointBufferInCurrentGnomonic(e){return null!==this.m_gnomonic&&pe(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,e,this.m_bufferer.m_absDistance*this.m_bufferer.m_ellipticToGeodesicMaxRatio,this.m_gnomonicCenterRad,this.m_minGnomonicRadius)}tryUpdateGnomonic(e){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_8__.P,n=[0];return function Pe(e,t,s,n,i,r,o,m){const a=(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.I)(e,t,n,75/180*Math.PI);return!!pe(e,t,n,i,n,a)&&(null!==r&&(r.setCoordsPoint2D(n),r.scale(1/s)),null!==o&&o.setCoordsPoint2D(n),null!==m&&(m[0]=a),!0)}(this.m_bufferer.m_a,this.m_bufferer.m_eSquared,this.m_bufferer.m_rpu,e,this.m_bufferer.m_absDistance*this.m_bufferer.m_ellipticToGeodesicMaxRatio,t,s,n)?(this.m_gnomonicCenterRad.setCoordsPoint2D(s),this.m_minGnomonicRadius=n[0],this.m_gnomonic=xe(this.m_bufferer.m_gcs,t),!0):(this.m_gnomonic=null,!1)}}class ve{getOperatorType(){return 10110}supportsCurves(){return!0}accelerateGeometry(e,t,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,s,n,i,r,o,m){if(o){const o=new Se(e,t,s,n,i,!1,r,m);return(new _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.h).executeMany(o,t,m)}return new Se(e,t,s,n,i,!1,r,m)}execute(t,n,i,r,o,m,a){const h=new _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__.S([t]),c=[r],u=this.executeMany(h,n,i,c,o,!1,m,a).next();return u||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.c)("geodesic buffer null output"),u}}class Se extends _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__.G{constructor(e,t,s,r,o,m,a,h){super(),this.m_currentUnionEnvelope2D=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_2__.J,this.m_index=-1,this.m_dindex=-1,this.m_progressTracker=h,m&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.b)(""),t||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)(""),0===t.getCoordinateSystemType()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)(""),this.m_inputGeoms=e,this.m_spatialReference=t,this.m_curveType=s,this.m_distances=r,this.m_convergenceOffset=o,this.m_bOutlineOnly=m,this.m_bUnion=a}next(){let e;for(;e=this.m_inputGeoms.next();)return(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.m_dindex+1<this.m_distances.length&&this.m_dindex++,this.geodesicBuffer(e,this.m_distances[this.m_dindex]);return null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}geodesicBuffer(e,t){return function me(e,t,s,n,a,h){n<Number.MAX_VALUE&&n>-Number.MAX_VALUE||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("Geodesic_bufferer.buffer - bad distance"),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(e);const c=(0,_GeometryCleaner_BEJM7I4l_js__WEBPACK_IMPORTED_MODULE_10__.c)(e),u=c.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(u)){const e=c.getPointCount(),i=8e6;if(Math.abs(n)>i&&(e>50||u!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint&&4===s&&e>2)){let e=c;const r=n>0?1:-1,o=7e6;let m=n,u=1;do{u++,m=(Math.abs(m)-o)*r}while(Math.abs(m)>i);m=n;for(let n=0;n<u-1;n++)e=he(e,t,s,o*r,a,u,h),m=(Math.abs(m)-o)*r;return e=he(e,t,s,m,a,u,h),e}}return he(c,t,s,n,a,1,h)}(e,this.m_spatialReference,this.m_curveType,t,this.m_convergenceOffset,this.m_progressTracker)}}}}]);