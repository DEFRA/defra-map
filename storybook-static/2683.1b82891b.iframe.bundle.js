"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[2683],{"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/GraphShaderModule.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y7:()=>I,HS:()=>v,mm:()=>w,A:()=>j,k2:()=>P,ZA:()=>C,E8:()=>K,hF:()=>m,C5:()=>h,uK:()=>_,Pi:()=>g});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Logger=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js")),string=__webpack_require__("./node_modules/@arcgis/core/core/string.js"),glsl=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/glsl.js");function t(e,t,r){const i=t.split("\n");for(const n of i)if(n.trim().length){{let t="";null!=r&&(t+=`/*id:${r??"000"}*/   `),e.body+=t.padEnd(14)}e.body+=" ".repeat(e.indent)+n+"\n"}}class GlslGraphWriter_r{write(e){for(const t of e.rootOutputNodes())e.shouldPruneOutputNode(t)||(t.variableName=this._write(e,t.node));return e}_createVarName(e,t){let r="";return"boolean"!=typeof t&&"number"!=typeof t&&t.debugInfo.name&&(r=`${t.debugInfo.name}_`),`${r}v${e.varCount++}`}_write(e,t,r=!1){if("number"==typeof t)return t.toString();if("boolean"==typeof t)return t.toString();let i=e.getEmit(t);if(i)return i;switch(t.shaderType){case"scope-node":i=this._writeScopeNode(e,t);break;case"primitive-node":i=this._writePrimitiveNode(e,t,r);break;case"function-node":i=this._writeFunctionNode(e,t);break;case"property-access-node":i=this._writePropertyAccessNode(e,t);break;case"property-access-2d-node":i=this._writePropertyAccess2DNode(e,t);break;case"text-node":i=t.text;break;case"block-node":i=this._writeBlockNode(e,t);break;case"condition-node":i=this._writeConditionNode(e,t)}return e.setEmit(t,i),i}_writeScopeNode(e,r){const i=new r.child.constructor;i.setDebugName(r.debugInfo.name);const n=this._write(e,i,!0);return t(e,`{ /*ScopeStart: ${r.uid} ${r.debugInfo.name}*/`),e.indent+=2,t(e,`${n} = ${this._write(e,r.child)};`),e.indent-=2,t(e,`} /*ScopeEnd: ${r.uid} ${r.debugInfo.name}*/`),n}_writeConditionNode(e,r){const i=new r.ifTrue.constructor,n=this._write(e,i,!0);t(e,`if (${this._write(e,r.condition)}) {`),e.indent+=2;const o=e.createSubgraphContext(),s=this._write(o,r.ifTrue);if(e.body+=o.body,s&&t(e,`${n} = ${s};`),e.indent-=2,t(e,"}"),r.ifFalse){t(e,"else {"),e.indent+=2;const i=e.createSubgraphContext(),o=this._write(i,r.ifFalse);e.body+=i.body,o&&t(e,`${n} = ${o};`),e.indent-=2,t(e,"}")}return n}_writeBlockNode(e,r){const{captureList:i,generator:n,returnType:o}=r,s={};for(const t in i){if(!i[t])continue;const r=this._write(e,i[t]);s[t]=r}const d=new o,c=this._write(e,d,!0);if(s.out=c,r.subgraph){const t=e.createSubgraphContext(),i=this._write(t,r.subgraph.child),n=t.body;s.subgraph={varName:i,body:n}}const a=n(s);return t(e,"{\n"),e.indent+=2,t(e,a),e.indent-=2,t(e,"}\n"),c}_writePropertyAccessNode(e,t){const r=this._write(e,t.target);return"string"==typeof t.property&&t.property.includes("[")?`${r}${t.property}`:"string"!=typeof t.property?`${r}[${this._write(e,t.property)}]`:`${r}.${t.property}`}_writePropertyAccess2DNode(e,t){return`${this._write(e,t.target)}[${this._write(e,t.x)}][${this._write(e,t.y)}]`}_writeFunctionNode(r,i){const n=i.returnType.type;if(i.isInfix){const[o,s]=i.children.map((e=>this._write(r,e))),d=this._createVarName(r,i);return t(r,`${n.padEnd(5)} ${d} = ${o} ${i.token} ${s};`,i.uid),d}const o=i.children.map((e=>this._write(r,e))).join(", "),s=this._createVarName(r,i);return t(r,`${n.padEnd(5)} ${s} = ${i.token}(${o});`,i.uid),s}_writePrimitiveNode(r,i,n=!1){const o=r.getInput(i);if(o)return o.isUsed=!0,o.variableName;const s=1===i.children.length&&i.children[0]?.type===i.type;if(!i.isMutable&&(i.isImplicit||s))return this._write(r,i.children[0]);const d=this._createVarName(r,i);if(n)return t(r,`${i.type.padEnd(5)} ${d};`,i.uid),d;const c=!i.debugInfo.name&&!i.isMutable;if(c&&"float"===i.type&&"number"==typeof i.children[0])return Number.isInteger(i.children[0])?i.children[0].toFixed(1):i.children[0].toString();if(c&&"int"===i.type&&"number"==typeof i.children[0]&&Number.isInteger(i.children[0]))return i.children[0].toString();const a=i.children.map((e=>this._write(r,e))).join(", ");return"array"===i.type?(t(r,`${i.type.padEnd(5)} ${d} = [${a}];`,i.uid),d):c?`${i.type}(${a})`:(t(r,`${i.type.padEnd(5)} ${d} = ${i.type}(${a});`,i.uid),d)}}var ShaderGraphNode=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/ShaderGraphNode.js");class ShaderGraphContext_t{constructor(e,t,d){this.variableName=e,this.variableInputType=t,this.node=d,this.type="shader-input",this.isUsed=!1}clone(){return new ShaderGraphContext_t(this.variableName,this.variableInputType,(0,ShaderGraphNode.vA)(this.node))}}class d{constructor(e,t,d){this.outVariableName=e,this.outVariableType=t,this.node=d,this.type="shader-output"}clone(){const t=new d(this.outVariableName,this.outVariableType,(0,ShaderGraphNode.vA)(this.node));return t.variableName=this.variableName,t}}class ShaderGraphContext_o{static createVertex(e,a,n,i,r,s){const u=[];for(const d in e){const o=e[d],a=n.get(d);a?u.push(new ShaderGraphContext_t(a,"builtin",o)):u.push(new ShaderGraphContext_t("a_"+d,"in",o))}for(const d of i){const e=d.uniformHydrated;u.push(new ShaderGraphContext_t(d.uniformName,"uniform",e))}const p=[];for(const t in a){const e=a[t];"glPosition"===t?p.push(new d("gl_Position","builtin",e)):"glPointSize"===t?p.push(new d("gl_PointSize","builtin",e)):p.push(new d("v_"+t,"out",e))}return new ShaderGraphContext_o(u,p,r,s)}static createFragment(e,a,n,i,r,s){const u=[],p=Array.from(r.rootOutputNodes());for(const d in e){const o=e[d],a=n.get(d);if(a){u.push(new ShaderGraphContext_t(a,"builtin",o));continue}const i=p.find((e=>e.node===o));i&&u.push(new ShaderGraphContext_t(i.outVariableName,"in",o))}for(const d of i){const e=d.uniformHydrated;u.push(new ShaderGraphContext_t(d.uniformName,"uniform",e))}const h=[];for(const t in a){const e=a[t],o=n.get(t);"discard"===t?h.push(new d(null,"discard",e)):o?h.push(new d(o,"builtin",e)):h.push(new d(t,"out",e))}return new ShaderGraphContext_o(u,h,s)}constructor(e,t,d,o){this.type="shader-graph-context",this.indent=0,this.body="",this.varCount=0,this._inputShaderTypesByNodeUid=new Map,this._nodeEmitMap=new Map;for(const a of e)this._inputShaderTypesByNodeUid.set(a.node.uid,a);this._outputShaderTypes=t,this._transformFeedbackBindings=d,this._transformFeedbackNames=new Set(d.map((e=>"v_"+e.propertyKey))),this._usedInFragmentShader=o}shouldPruneOutputNode(e){return!!this._usedInFragmentShader&&"builtin"!==e.outVariableType&&!this._transformFeedbackNames.has(e.outVariableName)&&!this._usedInFragmentShader.has(e.node.uid)}setEmit(e,t){this._nodeEmitMap.set(e.uid,t)}getEmit(e){return this._nodeEmitMap.get(e.uid)}inputs(){return this._inputShaderTypesByNodeUid.values()}getInput(e){return this._inputShaderTypesByNodeUid.get(e.uid)}*rootOutputNodes(){for(const e of this._outputShaderTypes)yield e}*nodes(){const e=[];for(const t of this._outputShaderTypes.values())e.push(t.node);for(;e.length;){const t=e.pop();"number"!=typeof t&&"boolean"!=typeof t&&e.push(...t.children.filter(Boolean)),yield t}}*nodesOfTypeOrFunction(){for(const e of this.nodes())"number"!=typeof e&&"boolean"!=typeof e&&(yield e)}createSubgraphContext(){const e=this.clone();return e.body="",e.indent=this.indent+2,e._nodeEmitMap=new Map(this._nodeEmitMap),e}clone(){const e=new ShaderGraphContext_o([],this._outputShaderTypes,this._transformFeedbackBindings,this._usedInFragmentShader);return e._inputShaderTypesByNodeUid=this._inputShaderTypesByNodeUid,e.indent=this.indent,e.body=this.body,e.varCount=this.varCount,e._nodeEmitMap=this._nodeEmitMap,e}insertVertexShader(e){e.vertex.code.add(""),this._insertInputs(e,"vertex"),e.vertex.code.add(""),e.vertex.code.add("// OUTPUTS: "),e.vertex.code.add("// --------------------------------------------------------- ");for(const t of this.rootOutputNodes()){const d="builtin"===t.outVariableType;this.shouldPruneOutputNode(t)||(d?e.vertex.code.add(`// ${t.outVariableType.padEnd(7)} ${t.node.type.padEnd(9)} ${t.outVariableName};`):e.vertex.code.add(`${t.outVariableType.padEnd(10)} ${t.node.type.padEnd(9)} ${t.outVariableName};`))}e.vertex.code.add(""),e.vertex.code.add("void main() {"),e.vertex.code.add("  "+this.body.split("\n").join("\n  "));for(const t of this.rootOutputNodes())this.shouldPruneOutputNode(t)||e.vertex.code.add(`  ${t.outVariableName} = ${t.variableName};`);e.vertex.code.add("}")}insertFragmentShader(e){this._insertInputs(e,"fragment"),e.fragment.code.add(""),e.fragment.code.add("// OUTPUTS: "),e.fragment.code.add("// --------------------------------------------------------- ");let t=0;for(const d of this.rootOutputNodes())"builtin"===d.outVariableType?e.fragment.code.add(`// ${d.outVariableType.padEnd(7)} ${d.node.type.padEnd(9)} ${d.outVariableName};`):e.outputs.add(d.outVariableName,d.node.type,t++);e.fragment.code.add(""),e.fragment.code.add("void main() {"),e.fragment.code.add("  "+this.body.split("\n").join("\n  "));for(const d of this.rootOutputNodes())"discard"===d.outVariableType?(e.fragment.code.add("  // TODO: Should ensure codegen for discard appears first in fragment shader"),e.fragment.code.add(`  if (${d.variableName}) {`),e.fragment.code.add("    discard;"),e.fragment.code.add("  }"),e.fragment.code.add("  ")):e.fragment.code.add(`  ${d.outVariableName} = ${d.variableName};`);e.fragment.code.add("}")}_insertInputs(e,t){e[t].code.add("// INPUTS: "),e[t].code.add("// --------------------------------------------------------- ");for(const d of this.inputs())d.isUsed&&"builtin"!==d.variableInputType&&("array"===d.node.type?e[t].code.add(`${d.variableInputType.padEnd(10)} ${d.node.elementType.type.padEnd(9)} ${d.variableName}[${d.node.size}];`):"array-2d"===d.node.type?e[t].code.add(`${d.variableInputType.padEnd(10)} ${d.node.elementType.type.padEnd(9)} ${d.variableName}[${d.node.size}]; // Emulated 2D Array. Not supported by ES3.0`):e[t].code.add(`${d.variableInputType.padEnd(10)} ${d.node.type.padEnd(9)} ${d.variableName};`))}}var TypedShaderProgram=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/typed/TypedShaderProgram.js"),ShaderBuilder=__webpack_require__("./node_modules/@arcgis/core/views/webgl/ShaderBuilder.js");function GraphShaderModule_d(t){return new t}function f(t,e,r){const o=t.constructor[e]??[];t.constructor.hasOwnProperty(e)||Object.defineProperty(t.constructor,e,{value:o.slice()}),t.constructor[e].push(r)}function h(t,e){return(r,o)=>{f(r,"locations",{typeCtor:e,propertyKey:o,parameterIndex:null,index:t})}}const m=t=>(e,r,o)=>{f(e,"inputs",{inputCtor:t,propertyKey:r,parameterIndex:o})},g=t=>(e,r)=>{f(e,"uniforms",{typeCtor:t,propertyKey:r})},_=t=>(e,r)=>{f(e,"options",{typeCtor:t,propertyKey:r})},K=(t,e)=>{f(t,"defines",{propertyKey:e})};const b=(t,e)=>(r,o)=>{r.constructor.builtins.push({builtin:t,propertyKey:o,typeCtor:e})};class C{}C.builtins=[],(0,tslib_es6._)([b("gl_VertexID",glsl.Ai)],C.prototype,"glVertexID",void 0);class I{}class v{}v.builtins=[],(0,tslib_es6._)([b("gl_FragCoord",glsl.Zb)],v.prototype,"glFragCoord",void 0),(0,tslib_es6._)([b("gl_PointCoord",glsl.ZY)],v.prototype,"glPointCoord",void 0);class w{}(0,tslib_es6._)([(t=>(e,r)=>{f(e,"builtins",{builtin:t,propertyKey:r})})("gl_FragDepth")],w.prototype,"glFragDepth",void 0);class P{constructor(){this.type="uniform-group"}get _uniforms(){return this.constructor.uniforms??[]}}class j{constructor(){this.logShader=!1,this.computeAttributes={}}get vertexInput(){const t=this._shaderModuleClass.inputs.findLast((t=>"vertex"===t.propertyKey&&0===t.parameterIndex));if(!t)throw new Error("Unable to find vertex input parameter");return t}get computeInput(){return this._shaderModuleClass.inputs.findLast((t=>"vertex"===t.propertyKey&&1===t.parameterIndex))}get fragmentInput(){const t=this._shaderModuleClass.inputs.findLast((t=>"fragment"===t.propertyKey));if(!t)throw new Error("Unable to find fragment input parameter");return t}get transformFeedbackBindings(){return this.fragmentInput.inputCtor.transformFeedbackBindings??[]}get locations(){return[...this.vertexInput.inputCtor.locations,...this.computeInput?.inputCtor.locations??[]]}get locationsMap(){const t=new Map,r=new Set;for(const o of this.locations)r.has(o.index)?Logger.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.GraphShaderModule").warnOnce("mapview-rendering",`Unable to assigned attribute ${o.propertyKey} to ${o.index}. Index already in use`,{locationsMap:t}):(t.set(o.propertyKey,o.index),r.add(o.index));return t}get locationInfo(){if(!this._locationInfo){const t=this.locationsMap,e=Array.from(t.entries()).map((([t,e])=>`${t}.${e}`)).join("."),o=(0,string.Wm)(e),n=this.computeAttributes;this._locationInfo={hash:o,stringHash:e,locations:t,computeAttributeMap:n}}return this._locationInfo}get renamedLocationsMap(){const t=new Map;for(const e of this.locations)t.set("a_"+e.propertyKey,e.index);return t}get optionPropertyKeys(){if(!this._optionPropertyKeys){const t=new Set;for(const e of this._options)t.add(e.propertyKey);this._optionPropertyKeys=t}return this._optionPropertyKeys}get _shaderModuleClass(){return this.constructor}get _defines(){return this._shaderModuleClass.defines??[]}get _options(){return this._shaderModuleClass.options??[]}get _uniforms(){return this._shaderModuleClass.uniforms??[]}getProgram(t,e,r,o){try{const{vertex:n,fragment:s,uniformBindings:i}=this._generateShaders(t,e,r,o);return new TypedShaderProgram.K(n,s,this.renamedLocationsMap,this.locationInfo,i,this.transformFeedbackBindings)}catch(n){return new TypedShaderProgram.K("","",this.renamedLocationsMap,this.locationInfo,[],this.transformFeedbackBindings)}}getDebugUniformClassInfo(t){const e=this._options.find((e=>e.propertyKey===t));if(e)return{type:"option",className:e.typeCtor};const r=this._uniforms.find((e=>e.propertyKey===t));if(!r)throw new Error(`Unable to find uniform class type for property: ${t}`);return{type:"required",className:r.typeCtor}}getShaderKey(t,e,r,o){const n=Object.keys(t).map((e=>`${e}.${t[e]}`)).join("."),s=Object.keys(r).map((t=>`${t}.${r[t]}`)).join("."),i=Object.keys(o).map((t=>`${t}.${o[t]}`)).join("."),p=Object.keys(e).filter((t=>this.optionPropertyKeys.has(t)&&e[t])).join(".");return`${this.type}.${n}.${s}.${i}.${p}`}_generateShaders(t,e,r,o){const n=[];this._setDefines(r),this._setOptionalUniforms(n,e),this._setRequiredUniforms(n);const s=this._hydrateVertexInput(o),i=this._injectPackPrecisionFactor(s,t),c=this._hydrateComputeInput(),y=c&&this._injectComputePackPrecisionFactor(c,t),d=this.vertex(i,y),f=this._hydrateFragmentInput(d),h=this.fragment(f),l=new Set;for(const p in h){const t=h[p];(0,ShaderGraphNode.rz)(l,t)}const m=this._getVertexInputBuiltins(),g=ShaderGraphContext_o.createVertex({...s,...c},d,m,n,this.transformFeedbackBindings,l);(new GlslGraphWriter_r).write(g);const _=this._getFragmentInputBuiltins(h);_.set("glPointCoord","gl_PointCoord");const K=ShaderGraphContext_o.createFragment(f,h,_,n,g,this.transformFeedbackBindings);(new GlslGraphWriter_r).write(K);const x=this._createShaderBuilder(g,K),b=x.generate("vertex"),C=x.generate("fragment");return this.logShader&&(console.log(b),console.log(C)),{vertex:b,fragment:C,uniformBindings:n}}_setDefines(t){for(const e in t)this[e]=t[e]}_setOptionalUniforms(t,e){for(const r of this._options)e[r.propertyKey]?this[r.propertyKey]=this._hydrateUniformGroup(t,r):this[r.propertyKey]=null}_setRequiredUniforms(t){for(const e of this._uniforms)this[e.propertyKey]=this._hydrateUniformGroup(t,e)}_hydrateUniformGroup(t,e){const r=new(0,e.typeCtor);for(const o of r._uniforms??[]){const n=GraphShaderModule_d(o.typeCtor),s=`u_${e.propertyKey}_${o.propertyKey}`,i=n.type,p=[e.propertyKey,o.propertyKey].join(".");if("type"in o.typeCtor&&"array"===o.typeCtor.type){const e=n;t.push({shaderModulePath:p,uniformName:s,uniformType:i,uniformArrayLength:e.size,uniformArrayElementType:e.elementType.type,uniformHydrated:n})}else if("type"in o.typeCtor&&"array-2d"===o.typeCtor.type){const e=n;t.push({shaderModulePath:p,uniformName:s,uniformType:i,uniformArrayLength:e.size,uniformArrayElementType:e.elementType.type,uniformHydrated:n})}else t.push({shaderModulePath:p,uniformName:s,uniformType:i,uniformHydrated:n});r[o.propertyKey]=n}return r}_hydrateVertexInput(t){const e=this.vertexInput.inputCtor,r=e.locations.reduce(((e,r)=>!1===t[r.propertyKey]?e:{...e,[r.propertyKey]:GraphShaderModule_d(r.typeCtor)}),{});for(const{propertyKey:o,typeCtor:n}of e.builtins){const t=GraphShaderModule_d(n);r[o]=t}return r}_hydrateComputeInput(){return null==this.computeInput?null:this.computeInput.inputCtor.locations.reduce(((t,e)=>({...t,[e.propertyKey]:GraphShaderModule_d(e.typeCtor)})),{})}_injectPackPrecisionFactor(t,e){const r={};for(const n in t){const s=t[n],i=e[n];if(i){if("float"!==s.type&&"vec2"!==s.type&&"vec3"!==s.type&&"vec4"!==s.type)throw new Error(`InternalError: packPrecisionFactor requires GenType, but found ${s.type}`);r[n]=s.divide(new glsl.nt(i))}else r[n]=s}return r}_injectComputePackPrecisionFactor(t,e){const r={},n=new Map;for(const o in this.computeAttributes)for(const t of this.computeAttributes[o]??[])n.set(t,o);for(const s in t){const i=t[s],p=n.get(s);if(!p)continue;const a=e[p];if(a){if("float"!==i.type&&"vec2"!==i.type&&"vec3"!==i.type&&"vec4"!==i.type)throw new Error(`InternalError: packPrecisionFactor requires GenType, but found ${i.type}`);r[s]=i.divide(new glsl.nt(a))}else r[s]=i}return r}_hydrateFragmentInput(t){const e={};for(const r in t)e[r]=t[r];for(const{propertyKey:r,typeCtor:o}of v.builtins){const t=GraphShaderModule_d(o);e[r]=t}return e}_getVertexInputBuiltins(){const t=this.vertexInput.inputCtor,e=new Map;for(const{builtin:r,propertyKey:o}of t.builtins)e.set(o,r);return e}_getFragmentInputBuiltins(t){const e=t.constructor,r=new Map;for(const o of e.builtins??[])r.set(o.propertyKey,o.builtin);return r}_createShaderBuilder(t,e){const r=new ShaderBuilder.N5;return this._insertDebugInfo(r),t.insertVertexShader(r),e.insertFragmentShader(r),r}_insertDebugInfo(t){t.vertex.code.add("// DEFINES: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this._defines)this[e.propertyKey]?t.vertex.code.add(`//   ${e.propertyKey}: true`):t.vertex.code.add(`//   ${e.propertyKey}: false`);t.vertex.code.add(""),t.vertex.code.add("// OPTIONS: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this._options)this[e.propertyKey]?t.vertex.code.add(`//   ${e.propertyKey}: true`):t.vertex.code.add(`//   ${e.propertyKey}: false`)}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/ShaderGraphNode.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function e(t,e){const s=[];for(s.push(e);s.length;){const e=s.pop();if("object"==typeof e&&!t.has(e.uid)){t.add(e.uid);for(const t of e.children)s.push(t)}}}__webpack_require__.d(__webpack_exports__,{XL:()=>u,aw:()=>a,ff:()=>c,rR:()=>p,rz:()=>e,vA:()=>i,vL:()=>r,zg:()=>o});class s{constructor(){this.uid=s.NodeCount++,this._debugName=null,this._isMutable=!1,this.isImplicit=!1}get isMutable(){return this._isMutable}setMutable(){return this._isMutable=!0,this}setDebugName(e){return e=function t(t){return t.split(" ").map(((t,e)=>e>0?t.charAt(0).toUpperCase()+t.slice(1):t)).join("")}(e),this._debugName=e,this.isImplicit&&this.children[0]instanceof s&&this.children[0].setDebugName(e),this}get debugInfo(){return{name:this._debugName??""}}cloneInto(t){t._debugName=this._debugName,t._isMutable=this._isMutable,t.isImplicit=this.isImplicit,t.uid=this.uid}}function i(t){return"object"==typeof t?t.clone():t}s.NodeCount=0;class r extends s{constructor(){super(...arguments),this.shaderType="primitive-node"}}class n extends s{constructor(t){super(),this.child=t,this.shaderType="scope-node"}get children(){return[this.child]}clone(){const t=new n(i(this.child));return this.cloneInto(t),t}}class o extends s{constructor(t,e,s){super(),this.property=t,this.target=e,this.returnType=s,this.shaderType="property-access-node"}get children(){const t=[this.target];return"string"!=typeof this.property&&t.push(this.property),t}clone(){const t=new o(this.property,i(this.target),this.returnType);return this.cloneInto(t),t}}class c extends s{constructor(t,e,s,i){super(),this.x=t,this.y=e,this.target=s,this.returnType=i,this.shaderType="property-access-2d-node"}get children(){return[this.target,this.x,this.y]}clone(){const t=new c(this.x,this.y,i(this.target),this.returnType);return this.cloneInto(t),t}}class u extends s{constructor(t,e,s){super(),this.condition=t,this.ifTrue=e,this.ifFalse=s,this.shaderType="condition-node"}get children(){return[this.condition,this.ifTrue,this.ifFalse]}clone(){const t=i(this.ifTrue),e=this.ifFalse?i(this.ifFalse):null,s=new u(this.condition,t,e);return this.cloneInto(s),s}}class p extends s{constructor(t,e,s,i){super(),this.captureList=t,this.returnType=e,this.generator=i,this.shaderType="block-node",s&&(this.subgraph=new n(s))}get children(){return Object.keys(this.captureList).map((t=>this.captureList[t])).concat(this.subgraph??[])}clone(){const t={};for(const s in this.captureList)t[s]=i(this.captureList[s]);const e=new p(t,this.returnType,this.subgraph?i(this.subgraph.child):this.subgraph,this.generator);return this.cloneInto(e),e}}class a extends s{constructor(t,e,s,i,r,n=!1){super(),this.token=t,this._children=e,this.isInfix=s,this.isPropertyAccess=i,this.returnType=r,this.isTernary=n,this.shaderType="function-node"}get children(){return this._children}clone(){const t=new a(this.token,this._children.map(i),this.isInfix,this.isPropertyAccess,this.returnType,this.isTernary);return this.cloneInto(t),t}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$5:()=>Xt,$I:()=>ct,AU:()=>Ge,Ai:()=>W,Bw:()=>Me,F8:()=>nn,Gb:()=>St,Io:()=>fe,LC:()=>Ut,LI:()=>Ze,MM:()=>Yt,My:()=>B,Ny:()=>nt,Om:()=>pe,PM:()=>sn,RI:()=>ge,RZ:()=>un,S8:()=>Ye,Sj:()=>Rt,T9:()=>qe,TF:()=>cn,Tk:()=>zt,U:()=>rt,US:()=>pn,Uo:()=>Vt,Wh:()=>ut,Xe:()=>Ct,ZY:()=>C,Zb:()=>Y,Zc:()=>ot,aX:()=>Gt,eB:()=>X,eR:()=>lt,fV:()=>st,gn:()=>ie,j1:()=>Tt,jc:()=>Ee,jh:()=>_e,jk:()=>Ue,ln:()=>ht,lw:()=>Dt,mk:()=>re,n7:()=>Le,nf:()=>Pt,nt:()=>_,om:()=>It,or:()=>Ht,qE:()=>ce,rY:()=>ee,tn:()=>Kt,w0:()=>ft,x:()=>J,z7:()=>U,ze:()=>xt,zi:()=>Ce});var l,h,a,f,p,d,w,y,m,v,b,x,I,g,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/ShaderGraphNode.js");function M(t){return new Proxy(t,{get(e,n){if("constructor"===n)return new Proxy(e.constructor,{construct:(t,e,n)=>M(new t(...e))});if(n in e)return e[n];if("string"==typeof n){const e=function F(t){const e=[["float","vec2","vec3","vec4"],["int","ivec2","ivec3","ivec4"],["uint","uvec2","uvec3","uvec4"],["bool","bvec2","bvec3","bvec4"]];for(const n of e)if(n.includes(t))return n.map((t=>it[t]));throw new Error("Unable to find type family")}(t.type);return dt(t,n,e[n.length-1])}}})}function S(t){return new Proxy(t,{construct:(t,e,n)=>M(new t(...e))})}class P extends Error{}let B=l=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e){super(),this.elementType=t,this.size=e,this.children=[],this.type="array"}clone(){const t=new l(this.elementType,this.size);return super.cloneInto(t),t}get(t,e){const n=new W(t),r=null!=e?new W(e):null;return null!=r?wt(this,n,r,function D(t){switch(t.type){case"bool":case"bvec2":case"bvec3":case"bvec4":return J;case"float":case"vec2":case"vec3":case"vec4":return _;case"int":case"ivec2":case"ivec3":case"ivec4":return W;case"uint":case"uvec2":case"uvec3":case"uvec4":return G;default:throw new Error("Unable to handle type")}}(this.elementType.constructor)):dt(this,n,this.elementType.constructor)}last(){return this.get(this.size-1)}first(){return this.get(0)}findIndex(t,e,n){return function Et(t,e,n=0,r=t.size){const c=new W(n).setMutable().setDebugName("FindIndexIterator"),i=e(t.get(c)).setDebugName("FindIndexPredicate"),u=It({iter:c},W,i,(({out:t,iter:e,subgraph:n})=>`\n${t} = -1;\n\nfor (; ${e} < ${r}; ${e}++) {\n\n${n.body}\n\n  if (${n.varName}) {\n    ${t} = ${e};\n    break;\n  }\n\n}\n`)).setDebugName("FindIndexBlock");return u}(this,t,e,n)}glslFindIndex(t,e,n){return function $t(t,e,n=0,r=t.size){const c=It({array:t},W,null,(({out:t,array:c})=>`\n${t} = -1;\nfor (int i = ${n}; i < ${r}; i++) {\n  bool condition;\n  ${e({array:c,i:"i",out:"condition"})}\n  if (condition) {\n    ${t} = i;\n    break;\n  }\n}\n`)).setDebugName("GlslFindIndexBlock");return c}(this,t,e,n)}static ofType(t,e){const n={construct:(n,r)=>new l(new t,e)};return new Proxy(l,n)}};B.type="array",B=l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([function R(t){return new Proxy(t,{construct:(t,e,n)=>function j(t){return new Proxy(t,{get(e,n){if(n in e)return e[n];if("string"==typeof n){const e=parseInt(n,10);if(!isNaN(e))return dt(t,`[${e}]`,t.elementType.constructor)}}})}(new t(...e))})}],B);class q extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e,n,r=!1){super(),this.elementType=t,this.xSize=e,this.ySize=n,this.isRowMajor=r,this.children=[],this.type="array-2d"}clone(){const t=new q(this.elementType,this.xSize,this.ySize,this.isRowMajor);return super.cloneInto(t),t}get size(){return this.xSize*this.ySize}get(t,e){return this.isRowMajor?this._getRowMajor(t,e):this._getColumnMajor(t,e)}_getColumnMajor(t,e){const n=new W(t);return dt(this,new W(e).add(n.multiply(this.xSize)),this.elementType.constructor)}_getRowMajor(t,e){const n=new W(t),r=new W(e);return dt(this,n.add(r.multiply(this.ySize)),this.elementType.constructor)}static ofType(t,e,n,r=!1){return new Proxy(B,{construct:(c,i)=>new q(new t,e,n,r)})}}q.type="array-2d";class U extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(){super(...arguments),this.type="sampler2D",this.children=[]}clone(){const t=new U;return t.children=this.children.map(_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA),super.cloneInto(t),t}}U.type="sampler2D";class _ extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t){super(),this.type="float",this.children=[t]}clone(){const t=new _((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]));return super.cloneInto(t),t}multiply(t){return Dt(this,"number"==typeof t?O(t,_):t)}divide(t){return kt(this,"number"==typeof t?O(t,_):t)}add(t){return Ft(this,"number"==typeof t?O(t,_):t)}subtract(t){return Mt(this,"number"==typeof t?O(t,_):t)}}_.type="float";let C=h=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e){super(),this.type="vec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new h((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]));return super.cloneInto(t),t}get 0(){return dt(this,"[0]",_)}get 1(){return dt(this,"[1]",_)}get 2(){throw new P}get 3(){throw new P}multiply(t){return Dt(this,"number"==typeof t?O(t,_):t)}divide(t){return kt(this,"number"==typeof t?O(t,_):t)}add(t){return Ft(this,"number"==typeof t?O(t,_):t)}subtract(t){return Mt(this,"number"==typeof t?O(t,_):t)}};C.type="vec2",C=h=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],C);let X=a=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e,n){super(),this.type="vec3",this.children=[t,e,n].filter((t=>null!=t))}get 0(){return dt(this,"[0]",_)}get 1(){return dt(this,"[1]",_)}get 2(){return dt(this,"[2]",_)}get 3(){throw new P}clone(){const t=new a((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[2]));return super.cloneInto(t),t}multiply(t){return Dt(this,"number"==typeof t?O(t,_):t)}divide(t){return kt(this,"number"==typeof t?O(t,_):t)}add(t){return Ft(this,"number"==typeof t?O(t,_):t)}subtract(t){return Mt(this,"number"==typeof t?O(t,_):t)}};X.type="vec3",X=a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],X);let Y=f=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e,n,r){super(),this.type="vec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new f((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[3]));return super.cloneInto(t),t}get 0(){return dt(this,"[0]",_)}get 1(){return dt(this,"[1]",_)}get 2(){return dt(this,"[2]",_)}get 3(){return dt(this,"[3]",_)}multiply(t){return Dt(this,"number"==typeof t?O(t,_):t)}divide(t){return kt(this,"number"==typeof t?O(t,_):t)}add(t){return Ft(this,"number"==typeof t?O(t,_):t)}subtract(t){return Mt(this,"number"==typeof t?O(t,_):t)}};Y.type="vec4",Y=f=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],Y);let G=p=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t){super(),this.type="uint",this.children=[t]}clone(){const t=new p((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]));return super.cloneInto(t),t}};G.type="uint",G=p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],G);let H=d=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e){super(),this.type="uvec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new d((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]));return super.cloneInto(t),t}};H.type="uvec2",H=d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],H);let A=w=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e,n){super(),this.type="uvec3",this.children=[t,e,n].filter((t=>null!=t))}clone(){const t=new w((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[2]));return super.cloneInto(t),t}};A.type="uvec3",A=w=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],A);let V=y=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e,n,r){super(),this.type="uvec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new y((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[3]));return super.cloneInto(t),t}};V.type="uvec4",V=y=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],V);class J extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t){super(),this.type="bool",this.children=[t]}and(t){return Vt(this,t)}or(t){return Ht(this,t)}clone(){const t=new J((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]));return super.cloneInto(t),t}}J.type="bool";let K=m=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e){super(),this.type="bvec2",this.children=[t,e].filter((t=>null!=t))}all(){return Qt(this)}any(){return Wt(this)}clone(){const t=new m((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]));return super.cloneInto(t),t}};K.type="bvec2",K=m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],K);let L=v=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e,n){super(),this.type="bvec3",this.children=[t,e,n].filter((t=>null!=t))}all(){return Qt(this)}any(){return Wt(this)}clone(){const t=new v((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[2]));return super.cloneInto(t),t}};function O(t,e){return"number"==typeof t?new e(t):t}L.type="bvec3",L=v=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],L);let Q=b=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e,n,r){super(),this.type="bvec4",this.children=[t,e,n,r].filter((t=>null!=t))}all(){return Qt(this)}any(){return Wt(this)}clone(){const t=new b((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[3]));return super.cloneInto(t),t}};Q.type="bvec4",Q=b=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],Q);class W extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t){super(),this.type="int",this.children=[t]}multiply(t){return Dt(this,O(t,W))}add(t){return Ft(this,O(t,W))}subtract(t){return Mt(this,O(t,W))}divide(t){return kt(this,O(t,W))}clone(){const t=new W((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]));return super.cloneInto(t),t}}W.type="int";let Z=x=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e){super(),this.type="ivec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new x((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]));return super.cloneInto(t),t}};Z.type="ivec2",Z=x=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],Z);let tt=I=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e,n){super(),this.type="ivec3",this.children=[t,e,n].filter((t=>null!=t))}clone(){const t=new I((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[2]));return super.cloneInto(t),t}};tt.type="ivec3",tt=I=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],tt);let et=g=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e,n,r){super(),this.type="ivec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new g((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[3]));return super.cloneInto(t),t}};et.type="ivec4",et=g=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],et);class nt extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{constructor(t,e,n,r){super(),this.type="mat2",this.children=[t,e,n,r]}clone(){const t=new nt((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[3]));return super.cloneInto(t),t}get(t,e){return wt(this,new W(t),new W(e),_)}multiply(t){return Dt(this,t)}}nt.type="mat2";class rt extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{static identity(){return new rt(1,0,0,0,1,0,0,0,1)}static fromRotation(t){const e=nn(t),n=ie(t);return new rt(n,e,0,xt(e),n,0,0,0,1)}constructor(t,e,n,r,c,i,u,s,o){super(),this.type="mat3",this.children=[t,e,n,r,c,i,u,s,o]}add(t){return Ft(this,t)}multiply(t){return Dt(this,t)}get(t,e){return wt(this,new W(t),new W(e),_)}clone(){const t=new rt((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[3]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[4]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[5]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[6]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[7]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[8]));return super.cloneInto(t),t}}rt.type="mat3";class ct extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vL{static identity(){return new ct(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}constructor(t,e,n,r,c,i,u,s,o,l,h,a,f,p,d,w){super(),this.type="mat4",this.children=[t,e,n,r,c,i,u,s,o,l,h,a,f,p,d,w]}static fromColumns(t,e,n,r){return new ct(t.x,t.y,t.z,t.w,e.x,e.y,e.z,e.w,n.x,n.y,n.z,n.w,r.x,r.y,r.z,r.w)}multiply(t){return Dt(this,t)}get(t,e){return wt(this,new W(t),new W(e),_)}clone(){const t=new ct((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[3]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[4]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[5]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[6]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[7]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[8]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[9]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[10]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[11]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[12]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[13]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[14]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.vA)(this.children[15]));return super.cloneInto(t),t}}ct.type="mat4";const it={float:_,vec2:C,vec3:X,vec4:Y,int:W,ivec2:Z,ivec3:tt,ivec4:et,uint:G,uvec2:H,uvec3:A,uvec4:V,bool:J,bvec2:K,bvec3:L,bvec4:Q},ut=(...t)=>new W(...t),st=(...t)=>new _(...t),ot=(...t)=>new C(...t),lt=(...t)=>new X(...t),ht=(...t)=>new Y(...t),ft=(...t)=>new rt(...t);function dt(t,e,n){const c=new n(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.zg(e,t,n));return c.isImplicit=!0,c}function wt(t,e,n,r){const i=new r(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.ff(e,n,t,r));return i.isImplicit=!0,i}function yt(t,e,n,r=null){if(r){const c=new r,i=new r(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.aw(t,[e,n],!0,!1,c));return i.isImplicit=!0,i}if("float"===e.type||"int"===e.type){const r=new n.constructor(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.aw(t,[e,n],!0,!1,n.constructor));return r.isImplicit=!0,r}if(("mat2"===e.type||"mat3"===e.type||"mat4"===e.type)&&"float"!==n.type){const r=new n.constructor(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.aw(t,[e,n],!0,!1,n.constructor));return r.isImplicit=!0,r}const c=new e.constructor(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.aw(t,[e,n],!0,!1,e.constructor));return c.isImplicit=!0,c}function mt(t,e,n=e.constructor){const r=new n(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.aw(t,[e],!1,!1,n));return r.isImplicit=!0,r}function vt(t,e,n,r=e.constructor){const c=new r(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.aw(t,[e,n],!1,!1,r));return c.isImplicit=!0,c}function bt(t,e,n,r,c=e.constructor){const i=new c(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.aw(t,[e,n,r],!1,!1,c));return i.isImplicit=!0,i}function xt(t){return Dt(t,st(-1))}function It(t,e,n,r){return new e(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.rR(t,e,n,r))}function zt(t,e,n){const r="function"==typeof e?e():e,c="function"==typeof n?n():n,i=new r.constructor(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__.XL(t,r,c));return i.isImplicit=!0,i}function Tt(...t){const e=t.map((([t,e])=>"function"==typeof e?[t,e()]:[t,e])),n=e[0][1].constructor,r=e.findIndex((t=>!0===t[0]));if(-1===r)throw new Error("A cond must have a fallthrough case with `true`/; ");const c=e.slice(0,r),i=e[r][1],u=new n(c.reduceRight(((t,e)=>zt(e[0],e[1],t)),i));return u.isImplicit=!0,u}function Dt(t,e){return yt("*",t,e)}function kt(t,e){return yt("/",t,e)}function Ft(t,e){return yt("+",t,e)}function Mt(t,e){return yt("-",t,e)}function St(t,e){return yt("%",t,e)}function Rt(t,e){return yt(">>",t,e)}function Pt(t,e){return yt("&",t,e)}function Ut(t,e){return yt("==",t,e,J)}function Ct(t,e){return yt("<",t,e,J)}function Xt(t,e){return yt("<=",t,e,J)}function Yt(t,e){return yt(">",t,e,J)}function Gt(t,e){return yt(">=",t,e,J)}function Ht(...t){return t.length<=1?t[0]:t.slice(1).reduce(((t,e)=>function At(t,e){return yt("||",t,e,J)}(t,e)),t[0])}function Vt(...t){return t.length<=1?t[0]:t.slice(1).reduce(((t,e)=>function Jt(t,e){return yt("&&",t,e,J)}(t,e)),t[0])}function Kt(t){return mt("abs",t)}function Qt(t){return mt("all",t,J)}function Wt(t){return mt("any",t,J)}function ee(t,e){return null==e?mt("atan",t):vt("atan",t,e,t.constructor)}function re(t){return mt("ceil",t)}function ce(t,e,n){return bt("clamp",t,e,n,t.constructor)}function ie(t){return mt("cos",t)}function fe(t,e){return vt("distance",t,e,_)}function pe(t,e){return vt("dot",t,e,_)}function ge(t){return mt("floor",t)}function Ee(t){return mt("fract",t)}function Me(t){return mt("length",t,_)}function qe(t,e){return vt("max",t,e)}function Ue(t,e){return vt("min",t,e)}function _e(t,e,n){return bt("mix",t,e,n)}function Ce(t,e){return vt("mod",t,e)}function Ye(t){return mt("normalize",t)}function Ge(t){return"bool"===t.type?mt("!",t):mt("not",t)}function Le(t,e){return vt("pow",t,e)}function Ze(t){return mt("round",t)}function nn(t){return mt("sin",t)}function cn(t,e,n){return bt("smoothstep",t,e,n)}function un(t){return mt("sqrt",t)}function sn(t,e){return vt("step",t,e,e.constructor)}function pn(t,e){return vt("texture",t,e,Y)}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/Technique.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>t});var _enums_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");class t{constructor(){this.drawPhase=_enums_js__WEBPACK_IMPORTED_MODULE_0__.S5.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_0__.S5.HITTEST|_enums_js__WEBPACK_IMPORTED_MODULE_0__.S5.HIGHLIGHT|_enums_js__WEBPACK_IMPORTED_MODULE_0__.S5.DEBUG}startup(){}shutdown(s){}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueType.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var e;__webpack_require__.d(__webpack_exports__,{N:()=>e}),function(e){e[e.AnimatedMarker=0]="AnimatedMarker",e[e.Blend=1]="Blend",e[e.ComplexFill=2]="ComplexFill",e[e.ComplexOutlineFill=3]="ComplexOutlineFill",e[e.DotDensity=4]="DotDensity",e[e.Fill=5]="Fill",e[e.GradientFill=6]="GradientFill",e[e.GradientStroke=7]="GradientStroke",e[e.Grid=8]="Grid",e[e.Heatmap=9]="Heatmap",e[e.Label=10]="Label",e[e.Line=11]="Line",e[e.Magnifier=12]="Magnifier",e[e.Marker=13]="Marker",e[e.OutlineFill=14]="OutlineFill",e[e.Overlay=15]="Overlay",e[e.PatternFill=16]="PatternFill",e[e.PatternOutlineFill=17]="PatternOutlineFill",e[e.PieChart=18]="PieChart",e[e.Test=19]="Test",e[e.Text=20]="Text",e[e.TexturedLine=21]="TexturedLine",e[e.Bitmap=22]="Bitmap"}(e||(e={}))},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/typed/TypedShaderProgram.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>a});var core_Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),object=__webpack_require__("./node_modules/@arcgis/core/core/object.js"),Program=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/checkWebGLError.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/FramebufferObject.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/Program.js")),Texture=(__webpack_require__("./node_modules/@arcgis/core/views/webgl/GLObjectType.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js")),TextureDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");function textureUtils_t(t,r,a){const i=new TextureDescriptor.R(r.width,r.height);return i.dataType=r.dataType,r.depth&&(i.depth=r.depth),r.flipped&&(i.flipped=r.flipped),r.hasMipmap&&(i.hasMipmap=r.hasMipmap),i.internalFormat=r.internalFormat,r.isImmutable&&(i.isImmutable=r.isImmutable),r.isOpaque&&(i.isOpaque=r.isOpaque),r.maxAnisotropy&&(i.maxAnisotropy=r.maxAnisotropy),i.pixelFormat=r.pixelFormat,r.preMultiplyAlpha&&(i.preMultiplyAlpha=r.preMultiplyAlpha),r.samplingMode&&(i.samplingMode=r.samplingMode),r.target&&(i.target=r.target),i.uniform=r.uniform,r.unpackAlignment&&(i.unpackAlignment=r.unpackAlignment),r.wrapMode&&(i.wrapMode=r.wrapMode),new Texture.g(t,i,a)}function n(e,t,o){const i=t.length;if(i!==o){const n=new core_Error.A("Invalid Uniform",`Invalid length, expected ${o} but got ${i}`,{uniformName:e,values:t});Logger.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.typed.TypedShaderProgram").errorOnce(n)}}class a{constructor(r,e,t,o,i,s){this._program=null,this._vao=null,this._temporaryTextures=[],this.vertexShader=r,this.fragmentShader=e,this._locations=t,this._locationInfo=o,this._uniformBindings=i,this._transformFeedbackBindings=s}destroy(){this._program&&this._program.dispose(),this.cleanupTemporaryTextures()}get locations(){return this._locations}get locationInfo(){return this._locationInfo}setUniforms(r){this._uniforms=r}cleanupTemporaryTextures(){for(const r of this._temporaryTextures)r.dispose();this._temporaryTextures=[]}bind(r){const e=this._uniforms;if(!this._program){const e=new Map;for(const[r,o]of this._locations)e.set(r,o);const t=[];for(const r of this._transformFeedbackBindings??[]){const{index:e,propertyKey:o}=r;t[e]=`v_${o}`}this._program=new Program.B(r,this.vertexShader,this.fragmentShader,e,new Map,t)}const s=this._program;r.useProgram(s);for(const o of this._uniformBindings){const{shaderModulePath:a,uniformName:f,uniformType:m,uniformArrayLength:c}=o,u=(0,object.wc)(a,e);if(null==u){if("sampler2D"===m)continue;throw new Error(`Failed to find uniform value for ${a}`)}switch("array"===m||"array-2d"===m?o.uniformArrayElementType:m){case"sampler2D":{const{unit:e,texture:t}=u;if(s.setUniform1i(f,e),"type"in t)r.bindTexture(t,e);else{const o=textureUtils_t(r,t.descriptor,t.data);r.bindTexture(o,e)}break}case"int":if(!c){s.setUniform1i(f,u);break}n(o.uniformName,u,c),s.setUniform1iv(f,u);break;case"float":if(!c){s.setUniform1f(f,u);break}n(o.uniformName,u,c),s.setUniform1fv(f,u);break;case"vec2":if(!c){s.setUniform2f(f,u[0],u[1]);break}n(o.uniformName,u,c),s.setUniform2fv(f,u.flat());break;case"vec3":if(!c){s.setUniform3f(f,u[0],u[1],u[2]);break}n(o.uniformName,u,c),s.setUniform3fv(f,u.flat());break;case"vec4":if(!c){s.setUniform4f(f,u[0],u[1],u[2],u[3]);break}n(o.uniformName,u,c),s.setUniform4fv(f,u.flat());break;case"mat3":s.setUniformMatrix3fv(f,u);break;case"mat4":s.setUniformMatrix4fv(f,u);break;default:throw new Error(`Unable to set uniform for type ${m}`)}}}}},"./node_modules/@arcgis/core/views/webgl/BindType.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var a;__webpack_require__.d(__webpack_exports__,{c:()=>a}),function(a){a[a.Bind=0]="Bind",a[a.Pass=1]="Pass",a[a.Draw=2]="Draw"}(a||(a={}))},"./node_modules/@arcgis/core/views/webgl/FramebufferObject.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>x});__webpack_require__("./node_modules/@arcgis/core/core/has.js");var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_BufferObject_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/BufferObject.js"),_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/checkWebGLError.js"),_enums_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),_GLObjectType_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/GLObjectType.js"),_Renderbuffer_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Renderbuffer.js"),_Texture_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js");class x{constructor(t,e,i=null){this._context=t,this._glName=null,this._colorAttachments=new Map,this._depthStencilBuffer=null,this._depthStencilTexture=null,this._initialized=!1,t.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_4__.vt.FramebufferObject,this);const r=E(e)?e:new _Texture_js__WEBPACK_IMPORTED_MODULE_7__.g(this._context,e);if(this._colorAttachments.set(_enums_js__WEBPACK_IMPORTED_MODULE_4__.Nm.COLOR_ATTACHMENT0,r),this._validateTextureDescriptor(r.descriptor),this._validateColorAttachmentPoint(_enums_js__WEBPACK_IMPORTED_MODULE_4__.Nm.COLOR_ATTACHMENT0),null!=i)if(function b(t){return E(t)||null!=t&&"pixelFormat"in t}(i))this._depthStencilTexture=E(i)?i:new _Texture_js__WEBPACK_IMPORTED_MODULE_7__.g(this._context,i),this._validateTextureDescriptor(this._depthStencilTexture.descriptor);else{const t=function g(t){return null!=t&&"type"in t&&t.type===_GLObjectType_js__WEBPACK_IMPORTED_MODULE_5__.p.RenderBuffer}(i)?i:new _Renderbuffer_js__WEBPACK_IMPORTED_MODULE_6__.l(this._context,i);this._depthStencilBuffer=t,this._validateRenderBufferDescriptor(t.descriptor)}}dispose(){if(0===this._colorAttachments.size&&!this._glName)return;const t=this._context.getBoundFramebufferObject();this._colorAttachments.forEach(((t,e)=>this.detachColorTexture(e)?.dispose())),this.detachDepthStencilBuffer()?.dispose(),this.detachDepthStencilTexture()?.dispose(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),this._context.bindFramebuffer(t),this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_4__.vt.FramebufferObject,this)}get glName(){return this._glName}get colorTexture(){return this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_4__.Nm.COLOR_ATTACHMENT0)}get depthStencil(){return this._depthStencilTexture||this._depthStencilBuffer}get depthStencilTexture(){return this._depthStencilTexture}get width(){const t=this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_4__.Nm.COLOR_ATTACHMENT0);return t?.descriptor?.width??0}get height(){const t=this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_4__.Nm.COLOR_ATTACHMENT0);return t?.descriptor?.height??0}get usedMemory(){return[...this._colorAttachments].reduce(((t,[e,i])=>t+i.usedMemory),this.depthStencil?.usedMemory??0)}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&E(e)?e:null}get colorAttachments(){return[...this._colorAttachments.keys()]}attachColorTexture(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_4__.Nm.COLOR_ATTACHMENT0){if(!t)return;this._validateColorAttachmentPoint(e);const i=t.descriptor;this._validateTextureDescriptor(i),this.detachColorTexture(e)?.dispose(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,e)),this._colorAttachments.set(e,t)}detachColorTexture(t=_enums_js__WEBPACK_IMPORTED_MODULE_4__.Nm.COLOR_ATTACHMENT0){const e=this._colorAttachments.get(t);if(e){if(this._initialized){const e=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t),this._context.bindFramebuffer(e)}return this._colorAttachments.delete(t),e}}setColorTextureTarget(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_4__.Nm.COLOR_ATTACHMENT0){const i=this._colorAttachments.get(e);i&&this._framebufferTexture2D(i.glName,e,t)}attachDepthStencil(t){if(t)switch(t.type){case _GLObjectType_js__WEBPACK_IMPORTED_MODULE_5__.p.Texture:return this._attachDepthStencilTexture(t);case _GLObjectType_js__WEBPACK_IMPORTED_MODULE_5__.p.RenderBuffer:return this._attachDepthStencilBuffer(t)}}_attachDepthStencilTexture(t){if(null==t)return;const e=t.descriptor;e.pixelFormat!==_enums_js__WEBPACK_IMPORTED_MODULE_4__.Ab.DEPTH_STENCIL&&e.pixelFormat!==_enums_js__WEBPACK_IMPORTED_MODULE_4__.Ab.DEPTH24_STENCIL8&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),e.dataType!==_enums_js__WEBPACK_IMPORTED_MODULE_4__.ld.UNSIGNED_INT_24_8&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._validateTextureDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,_enums_js__WEBPACK_IMPORTED_MODULE_4__.nI)),this._depthStencilTexture?.dispose(),this._depthStencilTexture=t}detachDepthStencilTexture(){const t=this._depthStencilTexture;if(t&&this._initialized){const t=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),this._framebufferTexture2D(null,_enums_js__WEBPACK_IMPORTED_MODULE_4__.nI),this._context.bindFramebuffer(t)}return this._depthStencilTexture=null,t}_attachDepthStencilBuffer(t){if(null==t)return;const e=t.descriptor;if(this._validateRenderBufferDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const i=this._context.gl,r=this._getGLAttachmentPoint(e);i.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__.R.FRAMEBUFFER,r,i.RENDERBUFFER,t.glName)}this._depthStencilBuffer=t}detachDepthStencilBuffer(){const t=this._depthStencilBuffer;if(t&&this._initialized){const e=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this);const i=this._context.gl,r=this._getGLAttachmentPoint(t.descriptor);i.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__.R.FRAMEBUFFER,r,i.RENDERBUFFER,null),this._context.bindFramebuffer(e)}return this._depthStencilBuffer=null,t}copyToTexture(t,e,i,r,s,n,h){(t<0||e<0||s<0||n<0)&&console.error("Offsets cannot be negative!"),(i<=0||r<=0)&&console.error("Copy width and height must be greater than zero!");const o=h.descriptor;h.descriptor.target!==_enums_js__WEBPACK_IMPORTED_MODULE_4__.Ap.TEXTURE_2D&&console.error("Texture target must be TEXTURE_2D!"),(null==o?.width||null==o?.height||t+i>this.width||e+r>this.height||s+i>o.width||n+r>o.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const c=this._context,a=c.bindTexture(h,_Texture_js__WEBPACK_IMPORTED_MODULE_7__.g.TEXTURE_UNIT_FOR_UPDATES);c.setActiveTexture(_Texture_js__WEBPACK_IMPORTED_MODULE_7__.g.TEXTURE_UNIT_FOR_UPDATES),c.bindFramebuffer(this),c.gl.copyTexSubImage2D(_enums_js__WEBPACK_IMPORTED_MODULE_4__.Ap.TEXTURE_2D,0,s,n,t,e,i,r),c.bindTexture(a,_Texture_js__WEBPACK_IMPORTED_MODULE_7__.g.TEXTURE_UNIT_FOR_UPDATES)}readPixels(t,e,i,r,s,n,h){(i<=0||r<=0)&&console.error("Copy width and height must be greater than zero!"),h||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(t,e,i,r,s,n,h)}async readPixelsAsync(t,e,r,s,n,h,o){const{gl:c}=this._context,a=_BufferObject_js__WEBPACK_IMPORTED_MODULE_2__.g.createPixelPack(this._context,_enums_js__WEBPACK_IMPORTED_MODULE_4__._U.STREAM_READ,o.byteLength);this._context.bindBuffer(a);const u=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),c.readPixels(t,e,r,s,n,h,0),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__.NZ.PIXEL_PACK_BUFFER),this._context.bindFramebuffer(u),await a.getSubDataAsync(o),a.dispose()}resize(t,e){if(this.width===t&&this.height===e)return;const i={width:t,height:e};A(i,this._context.parameters.maxTextureSize),this._colorAttachments.forEach((t=>t.resize(i.width,i.height))),this._depthStencilTexture?.resize(i.width,i.height),this._initialized&&(A(i,this._context.parameters.maxRenderbufferSize),this._depthStencilBuffer?.resize(i.width,i.height),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1)}initializeAndBind(t=_enums_js__WEBPACK_IMPORTED_MODULE_4__.R.FRAMEBUFFER){const e=this._context.gl;if(this._initialized)return void e.bindFramebuffer(t,this.glName);this._glName&&e.deleteFramebuffer(this._glName);const i=e.createFramebuffer();if(e.bindFramebuffer(t,i),this._colorAttachments.forEach(((e,i)=>this._framebufferTexture2D(e.glName,i,S(e),t))),this._depthStencilBuffer){const i=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);e.framebufferRenderbuffer(t,i,e.RENDERBUFFER,this._depthStencilBuffer.glName)}else this._depthStencilTexture&&this._framebufferTexture2D(this._depthStencilTexture.glName,e.DEPTH_STENCIL_ATTACHMENT,S(this._depthStencilTexture),t);(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__.en)()&&e.checkFramebufferStatus(t)!==e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!"),this._glName=i,this._initialized=!0}_framebufferTexture2D(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_4__.Nm.COLOR_ATTACHMENT0,i=_enums_js__WEBPACK_IMPORTED_MODULE_4__.Ap.TEXTURE_2D,r=_enums_js__WEBPACK_IMPORTED_MODULE_4__.R.FRAMEBUFFER,s=0){this._context.gl.framebufferTexture2D(r,e,i,t,s)}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthStencilBuffer){if(this._initialized){this._context.bindFramebuffer(this);const e=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);t.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__.R.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthStencilBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.WD)(this._depthStencilBuffer)}this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__.WD)(this._depthStencilTexture))}_validateTextureDescriptor(t){t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_4__.Ap.TEXTURE_2D&&t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_4__.Ap.TEXTURE_CUBE_MAP&&console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!"),A(t,this._context.parameters.maxTextureSize),this._validateBufferDimensions(t)}_validateRenderBufferDescriptor(t){A(t,this._context.parameters.maxRenderbufferSize),this._validateBufferDimensions(t)}_validateBufferDimensions(t){t.width<=0&&(t.width=this.width),t.height<=0&&(t.height=this.height),this.width>0&&this.height>0&&(this.width===t.width&&this.height===t.height||console.error("Attachment size must match framebuffer size!"))}_getGLAttachmentPoint(t){switch(t.internalFormat){case _enums_js__WEBPACK_IMPORTED_MODULE_4__.yQ.DEPTH_COMPONENT16:case _enums_js__WEBPACK_IMPORTED_MODULE_4__.yQ.DEPTH_COMPONENT24:case _enums_js__WEBPACK_IMPORTED_MODULE_4__.yQ.DEPTH_COMPONENT32F:return this._context.gl.DEPTH_ATTACHMENT;case _enums_js__WEBPACK_IMPORTED_MODULE_4__.yQ.DEPTH24_STENCIL8:case _enums_js__WEBPACK_IMPORTED_MODULE_4__.yQ.DEPTH32F_STENCIL8:case _enums_js__WEBPACK_IMPORTED_MODULE_4__.yQ.DEPTH_STENCIL:return this._context.gl.DEPTH_STENCIL_ATTACHMENT;case _enums_js__WEBPACK_IMPORTED_MODULE_4__.yQ.STENCIL_INDEX8:return this._context.gl.STENCIL_ATTACHMENT}}_validateColorAttachmentPoint(e){if(-1===x._MAX_COLOR_ATTACHMENTS){const{gl:t}=this._context;x._MAX_COLOR_ATTACHMENTS=t.getParameter(t.MAX_COLOR_ATTACHMENTS)}const i=e-_enums_js__WEBPACK_IMPORTED_MODULE_4__.Nm.COLOR_ATTACHMENT0;i+1>x._MAX_COLOR_ATTACHMENTS&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__.A.getLogger("esri.views.webgl.FrameBufferObject").error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${i+1}. Implementation supports up to ${x._MAX_COLOR_ATTACHMENTS} color attachments`)}}function E(t){return null!=t&&"type"in t&&t.type===_GLObjectType_js__WEBPACK_IMPORTED_MODULE_5__.p.Texture}function A(t,e){const i=Math.max(t.width,t.height);if(i>e){_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__.A.getLogger("esri.views.webgl.FramebufferObject").warn(`Resizing FBO attachment size ${t.width}x${t.height} to device limit ${e}`);const r=e/i;return t.width=Math.round(t.width*r),t.height=Math.round(t.height*r),!1}return!0}function S(t){return t.descriptor.target===_enums_js__WEBPACK_IMPORTED_MODULE_4__.Ap.TEXTURE_CUBE_MAP?_enums_js__WEBPACK_IMPORTED_MODULE_4__.Ap.TEXTURE_CUBE_MAP_POSITIVE_X:_enums_js__WEBPACK_IMPORTED_MODULE_4__.Ap.TEXTURE_2D}x._MAX_COLOR_ATTACHMENTS=-1},"./node_modules/@arcgis/core/views/webgl/Renderbuffer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>s});var _enums_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),_GLObjectType_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/GLObjectType.js"),_RenderbufferDescriptor_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js");class s{constructor(r,s){this._context=r,this._descriptor=s,this.type=_GLObjectType_js__WEBPACK_IMPORTED_MODULE_1__.p.RenderBuffer,this._context.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_0__.vt.Renderbuffer,this);const i=this._context.gl;this.glName=i.createRenderbuffer(),this._context.bindRenderbuffer(this);const{width:n,height:o,internalFormat:h,multisampled:d}=s;d?i.renderbufferStorageMultisample(i.RENDERBUFFER,this.samples,h,n,o):i.renderbufferStorage(i.RENDERBUFFER,h,n,o),this._context.bindRenderbuffer(null)}get descriptor(){return this._descriptor}get samples(){const e=this._descriptor.samples,t=this._context.parameters.maxSamples;return e?Math.min(e,t):t}get usedMemory(){return(0,_RenderbufferDescriptor_js__WEBPACK_IMPORTED_MODULE_2__.e)(this._descriptor)}resize(e,t){const r=this._descriptor;if(r.width===e&&r.height===t)return;r.width=e,r.height=t;const s=this._context.gl;this._context.bindRenderbuffer(this),r.multisampled?s.renderbufferStorageMultisample(s.RENDERBUFFER,this.samples,r.internalFormat,r.width,r.height):s.renderbufferStorage(s.RENDERBUFFER,r.internalFormat,r.width,r.height),this._context.bindRenderbuffer(null)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_0__.vt.Renderbuffer,this),this._context=null)}}},"./node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>h,q:()=>i});var _Util_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Util.js");class i{constructor(t,i,h=i){this.internalFormat=t,this.width=i,this.height=h,this.multisampled=!1,this.samples=1}}function h(i){return i.width<=0||i.height<=0||null==i.internalFormat?0:i.width*i.height*(0,_Util_js__WEBPACK_IMPORTED_MODULE_0__.IB)(i.internalFormat)}},"./node_modules/@arcgis/core/views/webgl/ShaderBuilder.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N5:()=>i});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js")),_BindType_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/BindType.js");const n=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__.A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class s{constructor(){this._includedModules=new Map}include(e,t){this._includedModules.has(e)?this._includedModules.get(e):(this._includedModules.set(e,t),e(this.builder,t))}}class i extends s{constructor(){super(...arguments),this.vertex=new c,this.fragment=new c,this.attributes=new h,this.varyings=new m,this.extensions=new _,this.outputs=new d}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(e,t=!1){const r=this.extensions.generateSource(e),n=this.attributes.generateSource(e),s=this.varyings.generateSource(e),i="vertex"===e?this.vertex:this.fragment,o=i.uniforms.generateSource(),a=i.code.generateSource(),u=i.main.generateSource(t),c="vertex"===e?f:g,h=i.constants.generateSource(),m=this.outputs.generateSource(e);return`#version 300 es\n${r.join("\n")}\n${c}\n${h.join("\n")}\n${o.join("\n")}\n${n.join("\n")}\n${s.join("\n")}\n${m.join("\n")}\n${a.join("\n")}\n${u.join("\n")}`}generateBind(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__.c.Bind];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__.c.Bind];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return t=>{for(let r=0;r<s;++r)n[r](e,t)}}generateBindPass(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__.c.Pass];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__.c.Pass];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return(t,r)=>{for(let i=0;i<s;++i)n[i](e,t,r)}}generateBindDraw(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__.c.Draw];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__.c.Draw];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return(t,r,i)=>{for(let o=0;o<s;++o)n[o](e,i,t,r)}}}class o{constructor(e){this._stage=e,this._entries=new Map}add(...e){for(const t of e)this._add(t);return this._stage}get(e){return this._entries.get(e)}_add(t){if(null!=t){if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.A(`Duplicate uniform name ${t.name} for different uniform type`);this._entries.set(t.name,t)}else n().error(`Trying to add null Uniform from ${(new Error).stack}.`)}generateSource(){return Array.from(this._entries.values()).map((e=>null!=e.arraySize?`uniform ${e.type} ${e.name}[${e.arraySize}];`:`uniform ${e.type} ${e.name};`))}get entries(){return Array.from(this._entries.values())}}class a{constructor(e){this._stage=e,this._bodies=new Array}add(e){return this._bodies.push(e),this._stage}generateSource(t){if(this._bodies.length>0)return[`void main() {\n ${this._bodies.join("\n")||""} \n}`];if(t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.A("Shader does not contain main function body.");return[]}}class u{constructor(e){this._stage=e,this._entries=new Array}add(e){return this._entries.push(e),this._stage}generateSource(){return this._entries}}class c extends s{constructor(){super(...arguments),this.uniforms=new o(this),this.main=new a(this),this.code=new u(this),this.constants=new l(this)}get builder(){return this}}class h{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return"fragment"===e?[]:this._entries.map((e=>`in ${e[1]} ${e[0]};`))}}class m{constructor(){this._entries=new Map}add(e,t){this._entries.has(e)?n().warn(`Ignoring duplicate varying ${t} ${e}`):this._entries.set(e,t)}generateSource(e){const t=new Array;return this._entries.forEach(((r,n)=>t.push("vertex"===e?`out ${r} ${n};`:`in ${r} ${n};`))),t}}class _{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const t="vertex"===e?_.ALLOWLIST_VERTEX:_.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>`#extension ${e} : enable`))}}_.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],_.ALLOWLIST_VERTEX=[];class d{constructor(){this._entries=new Map}add(e,t,r=0){const s=this._entries.get(r);s?.name!==e||s?.type!==t?this._entries.set(r,{name:e,type:t}):n().warn(`Fragment shader output location ${r} occupied`)}generateSource(e){if("vertex"===e)return[];0===this._entries.size&&this._entries.set(0,{name:d.DEFAULT_NAME,type:d.DEFAULT_TYPE});const t=new Array;return this._entries.forEach(((e,r)=>t.push(`layout(location = ${r}) out ${e.type} ${e.name};`))),t}}d.DEFAULT_TYPE="vec4",d.DEFAULT_NAME="fragColor";class l{constructor(e){this._stage=e,this._entries=new Set}add(e,t,r){let n="ERROR_CONSTRUCTOR_STRING";switch(t){case"float":n=l._numberToFloatStr(r);break;case"int":n=l._numberToIntStr(r);break;case"bool":n=r.toString();break;case"vec2":n=`vec2(${l._numberToFloatStr(r[0])},                            ${l._numberToFloatStr(r[1])})`;break;case"vec3":n=`vec3(${l._numberToFloatStr(r[0])},                            ${l._numberToFloatStr(r[1])},                            ${l._numberToFloatStr(r[2])})`;break;case"vec4":n=`vec4(${l._numberToFloatStr(r[0])},                            ${l._numberToFloatStr(r[1])},                            ${l._numberToFloatStr(r[2])},                            ${l._numberToFloatStr(r[3])})`;break;case"ivec2":n=`ivec2(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])})`;break;case"ivec3":n=`ivec3(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])})`;break;case"ivec4":n=`ivec4(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])},                             ${l._numberToIntStr(r[3])})`;break;case"mat2":case"mat3":case"mat4":n=`${t}(${Array.prototype.map.call(r,(e=>l._numberToFloatStr(e))).join(", ")})`}return this._entries.add(`const ${t} ${e} = ${n};`),this._stage}static _numberToIntStr(e){return e.toFixed(0)}static _numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const g="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp int;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump int;\n  precision mediump sampler2D;\n#endif",f="precision highp float;\nprecision highp sampler2D;"}}]);