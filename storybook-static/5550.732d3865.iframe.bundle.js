"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[3862,5550],{"./node_modules/@arcgis/core/core/LRUCache.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>e});var _MemCache_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/MemCache.js");class e{constructor(e,s){this._storage=new _MemCache_js__WEBPACK_IMPORTED_MODULE_0__.F,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),s&&this._storage.registerRemoveFunc("",s)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,e,s=1){this._storage.put(this,t,e,s,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}}},"./node_modules/@arcgis/core/core/MemCache.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>h,Ti:()=>e});var _PooledArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/PooledArray.js");const e=-3,i=e-1;var s;!function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"}(s||(s={}));class h{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_0__.A,this._users=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_0__.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,e){const i=this._db.get(t.id+e);return i?.size??0}put(t,r,h,o,_){r=t.id+r;const a=this._db.get(r);if(a&&(this._size-=a.size,t.size-=a.size,this._db.delete(r),a.entry!==h&&this._notifyRemove(r,a.entry,a.size,s.ALL)),o>this._maxSize)return void this._notifyRemove(r,h,o,s.ALL);if(void 0===h)return void console.warn("Refusing to cache undefined entry ");if(!o||o<0)return console.warn(`Refusing to cache entry with size ${o} for key ${r}`),void this._notifyRemove(r,h,0,s.ALL);const c=1+Math.max(_,i)-e;this._db.set(r,new n(h,o,c)),this._size+=o,t.size+=o,this._checkSize()}updateSize(t,e,i,r){e=t.id+e;const h=this._db.get(e);if(h&&h.entry===i){for(this._size-=h.size,t.size-=h.size;r>this._maxSize;){const t=this._notifyRemove(e,i,r,s.SOME);if(!(null!=t&&t>0))return void this._db.delete(e);r=t}h.size=r,this._size+=r,t.size+=r,this._checkSize()}}pop(t,e){e=t.id+e;const i=this._db.get(e);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(e),++this._hit,i.entry;++this._miss}get(t,e){e=t.id+e;const i=this._db.get(e);if(void 0!==i)return this._db.delete(e),i.lives=i.lifetime,this._db.set(e,i),++this._hit,i.entry;++this._miss}peek(t,e){const i=this._db.get(t.id+e);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},s=new Array;this._db.forEach(((t,e)=>{const r=t.lifetime;s[r]=(s[r]||0)+t.size,this._users.forAll((s=>{const{id:r,name:h}=s;if(e.startsWith(r)){const e=i[h]||0;i[h]=e+t.size}}))}));const r={};this._users.forAll((t=>{const e=t.name;if("hitRate"in t&&"number"==typeof t.hitRate&&!isNaN(t.hitRate)&&t.hitRate>0){const s=i[e]||0;i[e]=s,r[e]=Math.round(100*t.hitRate)+"%"}else r[e]="0%"}));const h=Object.keys(i);h.sort(((t,e)=>i[e]-i[t])),h.forEach((e=>t[e]=Math.round(i[e]/2**20)+"MB / "+r[e]));for(let o=s.length-1;o>=0;--o){const i=s[o];i&&(t["Priority "+(o+e-1)]=Math.round(i/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){const e=t.id;this._db.forEach(((t,i)=>{i.startsWith(e)&&(this._size-=t.size,this._db.delete(i),this._notifyRemove(i,t.entry,t.size,s.ALL))})),t.size=0}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,t.size,s.ALL))),this._users.forAll((t=>t.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,i,s){let r;return this._removeFuncs.some((h=>{if(t.startsWith(h[0])){const t=h[1](e,s,i);return"number"==typeof t&&(r=t),!0}return!1})),r}_checkSize(){this._users.forAll((t=>this._checkSizeLimits(t))),this._checkSizeLimits()}_checkSizeLimits(t){const e=t??this;if(e.maxSize<0||e.size<=e.maxSize)return;const i=t?.id;let s=!0;for(;s;){s=!1;for(const[r,h]of this._db)if(0===h.lifetime&&(!i||r.startsWith(i))){if(this._purgeItem(r,h,t),e.size<=.9*e.maxSize)return;s||=this._db.has(r)}}for(const[r,h]of this._db)if((!i||r.startsWith(i))&&(this._purgeItem(r,h,t),e.size<=.9*e.maxSize))return}_purgeItem(t,e,i=this._users.find((e=>t.startsWith(e.id)))){if(this._db.delete(t),e.lives<=1){this._size-=e.size,i&&(i.size-=e.size);const r=this._notifyRemove(t,e.entry,e.size,s.SOME);null!=r&&r>0&&(this._size+=r,i&&(i.size+=r),e.lives=e.lifetime,e.size=r,this._db.set(t,e))}else--e.lives,this._db.set(t,e)}}class n{constructor(t,e,i){this.entry=t,this.size=e,this.lifetime=i,this.lives=i}}},"./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EB:()=>p,Im:()=>d,Mj:()=>s,Ui:()=>y,w2:()=>a});var _Accessor_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),_Collection_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_utils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/utils.js");const o=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function r(e){return e instanceof _Accessor_js__WEBPACK_IMPORTED_MODULE_0__.A}function f(t){return t instanceof _Collection_js__WEBPACK_IMPORTED_MODULE_1__.A?Object.keys(t.items):r(t)?(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.oY)(t).keys():t?Object.keys(t):[]}function i(t,n){return t instanceof _Collection_js__WEBPACK_IMPORTED_MODULE_1__.A?t.items[n]:t[n]}function u(t){return t?t.declaredClass:null}function c(t,e){const n=t.diff;if(n&&"function"==typeof n)return n(t,e);const s=f(t),p=f(e);if(0===s.length&&0===p.length)return;if(!s.length||!p.length||function l(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}(t,e))return{type:"complete",oldValue:t,newValue:e};const a=p.filter((t=>!s.includes(t))),y=s.filter((t=>!p.includes(t))),d=s.filter((n=>p.includes(n)&&i(t,n)!==i(e,n))).concat(a,y).sort(),m=u(t);if(m&&o.has(m)&&d.length)return{type:"complete",oldValue:t,newValue:e};let h;const b=r(t)&&r(e);for(const o of d){const r=i(t,o),f=i(e,o);let l;if((b||"function"!=typeof r&&"function"!=typeof f)&&r!==f&&(null!=r||null!=f)){if(n&&n[o]&&"function"==typeof n[o])l=n[o]?.(r,f);else if(r instanceof Date&&f instanceof Date){if(r.getTime()===f.getTime())continue;l={type:"complete",oldValue:r,newValue:f}}else l="object"==typeof r&&"object"==typeof f&&u(r)===u(f)?c(r,f):{type:"complete",oldValue:r,newValue:f};null!=l&&(null!=h?h.diff[o]=l:h={type:"partial",diff:{[o]:l}})}}return h}function s(t,e){return p(t,e)}function p(t,e){if(null==t)return!1;const n=e.split(".");let o=t;for(const r of n){if("complete"===o.type)return!0;if("partial"!==o.type)return!1;{const t=o.diff[r];if(!t)return!1;o=t}}return!0}function a(t,e){if(!t)return!1;if("partial"===t.type){const n=Object.keys(t.diff);return 1===n.length&&n[0]===e}return!1}function y(t,e){if("function"!=typeof t&&"function"!=typeof e&&(null!=t||null!=e))return null==t||null==e||"object"==typeof t&&"object"==typeof e&&u(t)!==u(e)?{type:"complete",oldValue:t,newValue:e}:c(t,e)}function d(t){if(null==t)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const t of e.added)if(!d(t))return!1;for(const t of e.removed)if(!d(t))return!1;for(const t of e.changed)if(!d(t))return!1;return!0}case"partial":for(const e in t.diff)if(!d(t.diff[e]))return!1;return!0}}},"./node_modules/@arcgis/core/core/uuid.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AG:()=>e,lk:()=>n,vD:()=>o,yS:()=>r});const t="randomUUID"in crypto;function n(){if(t)return crypto.randomUUID();const n=crypto.getRandomValues(new Uint16Array(8));n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;const r=t=>n[t].toString(16).padStart(4,"0");return r(0)+r(1)+"-"+r(2)+"-"+r(3)+"-"+r(4)+"-"+r(5)+r(6)+r(7)}function r(){return`{${n().toUpperCase()}}`}function o(){return`{${n()}}`}function e(t){const n=t.toUpperCase();return"{"!==t[0]?`{${n}}`:n}},"./node_modules/@arcgis/core/geometry/support/scaleUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X_:()=>i,i1:()=>u,oW:()=>p,zx:()=>d});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/unitUtils.js");const e=96;function i(n,i){const u=i||n.extent,o=n.width,c=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__.GA)(u?.spatialReference);return u&&o?u.width/o*c*_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__.dy*e:0}function u(n,i){return n/((0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__.GA)(i)*_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__.dy*e)}function d(n,t,r){return function I(t,r){return 0===r||(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.Sp)(t,r)||t<r}(n,t)&&function a(t,r){return 0===r||(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.Sp)(t,r)||t>r}(n,r)}function p(t,r){return(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.Sp)(t,r)?0:(t||Number.POSITIVE_INFINITY)>(r||Number.POSITIVE_INFINITY)?1:-1}},"./node_modules/@arcgis/core/layers/StreamLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>oe});var t,tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),PopupTemplate=__webpack_require__("./node_modules/@arcgis/core/PopupTemplate.js"),request=__webpack_require__("./node_modules/@arcgis/core/request.js"),Clonable=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),handleUtils=__webpack_require__("./node_modules/@arcgis/core/core/handleUtils.js"),lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),MultiOriginJSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/MultiOriginJSONSupport.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),ensureType=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),reader=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js"),subclass=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),SpatialReference=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),typeUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/typeUtils.js"),Layer=__webpack_require__("./node_modules/@arcgis/core/layers/Layer.js"),ArcGISService=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/ArcGISService.js"),BlendLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/BlendLayer.js"),CustomParametersMixin=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/CustomParametersMixin.js"),DisplayFilteredLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/DisplayFilteredLayer.js"),FeatureEffectLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/FeatureEffectLayer.js"),FeatureReductionLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/FeatureReductionLayer.js"),OperationalLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/OperationalLayer.js"),PortalLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/PortalLayer.js"),RefreshableLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/RefreshableLayer.js"),ScaleRangeLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/ScaleRangeLayer.js"),TemporalLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/TemporalLayer.js"),TrackableLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/TrackableLayer.js"),commonProperties=__webpack_require__("./node_modules/@arcgis/core/layers/support/commonProperties.js"),featureLayerUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/featureLayerUtils.js"),Field=__webpack_require__("./node_modules/@arcgis/core/layers/support/Field.js"),fieldProperties=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldProperties.js"),fieldUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldUtils.js"),LabelClass=__webpack_require__("./node_modules/@arcgis/core/layers/support/LabelClass.js"),labelingInfo=__webpack_require__("./node_modules/@arcgis/core/layers/support/labelingInfo.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js");__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js");let i=t=class extends JSONSupport.A{constructor(){super(...arguments),this.age=null,this.ageReceived=null,this.displayCount=null,this.maxObservations=1}clone(){return new t({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}};(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],i.prototype,"age",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],i.prototype,"ageReceived",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],i.prototype,"displayCount",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],i.prototype,"maxObservations",void 0),i=t=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.PurgeOptions")],i);const p=i;var streamLayerUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/streamLayerUtils.js"),jsonUtils=__webpack_require__("./node_modules/@arcgis/core/renderers/support/jsonUtils.js"),styleUtils=__webpack_require__("./node_modules/@arcgis/core/renderers/support/styleUtils.js"),support_typeUtils=__webpack_require__("./node_modules/@arcgis/core/renderers/support/typeUtils.js"),Query=__webpack_require__("./node_modules/@arcgis/core/rest/support/Query.js"),popupUtils=__webpack_require__("./node_modules/@arcgis/core/support/popupUtils.js"),ElevationInfo=__webpack_require__("./node_modules/@arcgis/core/symbols/support/ElevationInfo.js"),interfaces=__webpack_require__("./node_modules/@arcgis/core/webdoc/interfaces.js");const te=(0,fieldProperties.p)();function re(e,t){return new Error.A("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}let ie=class extends((0,DisplayFilteredLayer.FJ)((0,FeatureReductionLayer.J)((0,FeatureEffectLayer.F)((0,BlendLayer.dM)((0,TemporalLayer.e)((0,TrackableLayer.d)((0,ScaleRangeLayer.j)((0,RefreshableLayer.J)((0,ArcGISService.b)((0,OperationalLayer.q)((0,PortalLayer.A)((0,MultiOriginJSONSupport.P)((0,CustomParametersMixin.d)(Clonable.A.ClonableMixin(Layer.A))))))))))))))){constructor(...e){super(...e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.geometryDefinition=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.maxReconnectionAttempts=0,this.maxReconnectionInterval=20,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.operationalLayerType="ArcGISStreamLayer",this.outFields=["*"],this.popupEnabled=!0,this.popupTemplate=null,this.purgeOptions=new p,this.refreshInterval=0,this.screenSizePerspectiveEnabled=!0,this.sourceJSON=null,this.spatialReference=SpatialReference.A.WGS84,this.type="stream",this.url=null,this.updateInterval=300,this.useViewTime=!0,this.webSocketUrl=null,this._debouncedSaveOperations=(0,promiseUtils.sg)((async(e,t,r)=>{const{save:i,saveAs:o}=await __webpack_require__.e(859).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/save/streamLayerUtils.js"));switch(e){case interfaces.X.SAVE:return i(this,t);case interfaces.X.SAVE_AS:return o(this,r,t)}}))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){if(!("WebSocket"in globalThis))return this.addResolvingPromise(Promise.reject(new Error.A("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},e).catch(promiseUtils.QP).then((()=>this._fetchService(t)))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}set renderer(e){(0,fieldUtils.yp)(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){t=t.layerDefinition||t;const i=t.drawingInfo?.renderer;if(i){const e=(0,jsonUtils.L)(i,t,r)||void 0;return e||Logger.A.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),e}return(0,featureLayerUtils.PD)(t,r)}async connect(e){const[{createConnection:t}]=await Promise.all([Promise.all([__webpack_require__.e(6911),__webpack_require__.e(6630)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js")),this.load()]),r=this.geometryType?typeUtils.gy.toJSON(this.geometryType):null,{customParameters:i=null,definitionExpression:o=null,geometryDefinition:n=null,maxReconnectionAttempts:a=0,maxReconnectionInterval:p=20,spatialReference:l=this.spatialReference}=e||this.createConnectionParameters(),m=t(this.parsedUrl,this.spatialReference,l,r,o,n,a,p,i??void 0),d=(0,handleUtils.vE)([this.on("send-message-to-socket",(e=>m.sendMessageToSocket(e))),this.on("send-message-to-client",(e=>m.sendMessageToClient(e)))]);return m.once("destroy",d.remove),m}createConnectionParameters(){return{spatialReference:this.spatialReference,customParameters:this.customParameters,definitionExpression:this.definitionExpression,geometryDefinition:this.geometryDefinition,maxReconnectionAttempts:this.maxReconnectionAttempts,maxReconnectionInterval:this.maxReconnectionInterval}}createPopupTemplate(e){return(0,popupUtils.tn)(this,e)}createQuery(){const e=new Query.A;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e}getFieldDomain(e,t){if(!this.fields)return null;let r=null;return this.fields.some((t=>(t.name===e&&(r=t.domain),!!r))),r}getField(e){return this.fieldsIndex.get(e)}serviceSupportsSpatialReference(e){return!0}sendMessageToSocket(e){this.emit("send-message-to-socket",e)}sendMessageToClient(e){this.emit("send-message-to-client",e)}async save(e){return this._debouncedSaveOperations(interfaces.X.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(interfaces.X.SAVE_AS,t,e)}write(e,t){const r=t?.messages;return this.webSocketUrl?(r?.push(re(this,"using a custom websocket connection cannot be written to web scenes and web maps")),null):this.parsedUrl?super.write(e,t):(r?.push(re(this,"using a client-side only connection without a url cannot be written to web scenes and web maps")),null)}async _fetchService(e){if(!this.webSocketUrl&&this.parsedUrl){if(!this.sourceJSON){const{data:t}=await(0,request.A)(this.parsedUrl.path,{query:{f:"json",...this.customParameters,...this.parsedUrl.query},responseType:"json",signal:e});this.sourceJSON=t}}else{if(!this.timeInfo?.trackIdField)throw new Error.A("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");if(!this.objectIdField){const e=this.fields.find((e=>"oid"===e.type))?.name;if(!e)throw new Error.A("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");this.objectIdField=e}if(!this.fields)throw new Error.A("stream-layer:missing-metadata","The stream layer fields must be specified.");if(this.fields.some((e=>e.name===this.objectIdField))||this.fields.push(new Field.A({name:this.objectIdField,alias:this.objectIdField,type:"oid"})),!this.geometryType)throw new Error.A("stream-layer:missing-metadata","The stream layer geometryType must be specified.");this.webSocketUrl&&(this.url=this.webSocketUrl)}return this.read(this.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl}),(0,fieldUtils.yp)(this.renderer,this.fieldsIndex),(0,fieldUtils.sv)(this.timeInfo,this.fieldsIndex),this.objectIdField||(this.objectIdField=streamLayerUtils.DN),(0,styleUtils.L)(this,{origin:"service"})}};(0,tslib_es6._)([(0,property.MZ)({type:String})],ie.prototype,"copyright",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ie.prototype,"defaultPopupTemplate",null),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],ie.prototype,"definitionExpression",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String})],ie.prototype,"displayField",void 0),(0,tslib_es6._)([(0,property.MZ)({type:ElevationInfo.A})],ie.prototype,"elevationInfo",void 0),(0,tslib_es6._)([(0,property.MZ)({json:{origins:{"web-map":{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],ie.prototype,"featureReduction",null),(0,tslib_es6._)([(0,property.MZ)(te.fields)],ie.prototype,"fields",void 0),(0,tslib_es6._)([(0,property.MZ)(te.fieldsIndex)],ie.prototype,"fieldsIndex",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Extent.default,json:{name:"layerDefinition.definitionGeometry",write:!0}})],ie.prototype,"geometryDefinition",void 0),(0,tslib_es6._)([(0,property.MZ)({type:typeUtils.gy.apiValues,json:{read:{reader:typeUtils.gy.read}}})],ie.prototype,"geometryType",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.kF)],ie.prototype,"labelsVisible",void 0),(0,tslib_es6._)([(0,property.MZ)({type:[LabelClass.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:labelingInfo.w},write:!0}})],ie.prototype,"labelingInfo",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.fV)],ie.prototype,"legendEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)({type:["show","hide"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],ie.prototype,"listMode",void 0),(0,tslib_es6._)([(0,property.MZ)({type:ensureType.jz})],ie.prototype,"maxReconnectionAttempts",void 0),(0,tslib_es6._)([(0,property.MZ)({type:ensureType.jz})],ie.prototype,"maxReconnectionInterval",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.hG)],ie.prototype,"maxScale",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.hn)],ie.prototype,"minScale",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String})],ie.prototype,"objectIdField",void 0),(0,tslib_es6._)([(0,property.MZ)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],ie.prototype,"operationalLayerType",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ie.prototype,"outFields",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.M6)],ie.prototype,"popupEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)({type:PopupTemplate.A,json:{name:"popupInfo",write:!0}})],ie.prototype,"popupTemplate",void 0),(0,tslib_es6._)([(0,property.MZ)({type:p})],ie.prototype,"purgeOptions",void 0),(0,tslib_es6._)([(0,property.MZ)({json:{read:!1,write:!1}})],ie.prototype,"refreshInterval",void 0),(0,tslib_es6._)([(0,property.MZ)({types:support_typeUtils.Hg,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:support_typeUtils.XJ,write:!0}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],ie.prototype,"renderer",null),(0,tslib_es6._)([(0,reader.w)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,reader.w)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],ie.prototype,"readRenderer",null),(0,tslib_es6._)([(0,property.MZ)((()=>{const e=(0,lang.o8)(commonProperties.PY);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],ie.prototype,"screenSizePerspectiveEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)()],ie.prototype,"sourceJSON",void 0),(0,tslib_es6._)([(0,property.MZ)({type:SpatialReference.A,json:{origins:{service:{read:{source:"spatialReference"}}}}})],ie.prototype,"spatialReference",void 0),(0,tslib_es6._)([(0,property.MZ)({json:{read:!1}})],ie.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.OZ)],ie.prototype,"url",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number})],ie.prototype,"updateInterval",void 0),(0,tslib_es6._)([(0,property.MZ)({json:{read:!1,write:!1}})],ie.prototype,"useViewTime",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String})],ie.prototype,"webSocketUrl",void 0),ie=(0,tslib_es6._)([(0,subclass.$)("esri.layers.StreamLayer")],ie);const oe=ie},"./node_modules/@arcgis/core/layers/mixins/ArcGISService.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{b:()=>l});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");const l=l=>{let p=class extends l{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const t=(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_6__.qg)(this.url);if(t?.title)return t.title}return this._get("title")||""}set title(t){this._set("title",t)}set url(t){this._set("url",(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_6__.Jf)(t,_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__.A.getLogger(this)))}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.MZ)()],p.prototype,"title",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.MZ)({type:String})],p.prototype,"url",null),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.$)("esri.layers.mixins.ArcGISService")],p),p}},"./node_modules/@arcgis/core/layers/mixins/CustomParametersMixin.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>e});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));const e=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.MZ)({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.$)("esri.layers.mixins.CustomParametersMixin")],t),t}},"./node_modules/@arcgis/core/layers/mixins/DisplayFilteredLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FJ:()=>a,Dp:()=>DisplayFilteredLayer_p,KV:()=>DisplayFilteredLayer_l});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),object=__webpack_require__("./node_modules/@arcgis/core/core/object.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),layerContainerType=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/layerContainerType.js"),Clonable=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),writer=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),scaleUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/scaleUtils.js"),uuid=__webpack_require__("./node_modules/@arcgis/core/core/uuid.js");const p={write:{overridePolicy:(o,r,e)=>({enabled:!e||"scale"===e.filterMode})}};let c=class extends(Clonable.A.ClonableMixin(JSONSupport.A)){constructor(o){super(o),this.id=(0,uuid.lk)(),this.maxScale=0,this.minScale=0,this.title="",this.where=null}};(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],c.prototype,"id",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:p})],c.prototype,"maxScale",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:p})],c.prototype,"minScale",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],c.prototype,"title",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],c.prototype,"where",void 0),c=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.DisplayFilter")],c);const l=c;var displayFilterUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/displayFilterUtils.js");let m=class extends(Clonable.A.ClonableMixin(JSONSupport.A)){constructor(r){super(r),this.activeFilterId=null,this.filters=new(Collection.A.ofType(l)),this.mode="manual"}writeFilters(r,o,e,t){const s=r.toArray();"scale"===this.mode&&s.sort(((r,o)=>{const e=(0,scaleUtils.oW)(o.minScale,r.minScale),t=r.maxScale-o.maxScale;return 0===e?t:e})),o[e]=s.map((r=>r.toJSON(t)))}write(r,o){return super.write(r,(0,displayFilterUtils.mW)(this,o))}};(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:{overridePolicy:(r,o,e)=>({enabled:"manual"===e.filterMode,isRequired:!0})}}})],m.prototype,"activeFilterId",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Collection.A.ofType(l),nonNullable:!0,json:{write:!0}})],m.prototype,"filters",void 0),(0,tslib_es6._)([(0,writer.K)("filters")],m.prototype,"writeFilters",null),(0,tslib_es6._)([(0,property.MZ)({type:["manual","scale"],nonNullable:!0,json:{name:"filterMode",write:!0}})],m.prototype,"mode",void 0),m=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.DisplayFilterInfo")],m);const n=m,a=e=>{let i=class extends e{constructor(){super(...arguments),this.displayFilterEnabled=!0,this.displayFilterInfo=null}};return(0,tslib_es6._)([(0,property.MZ)(DisplayFilteredLayer_p)],i.prototype,"displayFilterEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)(DisplayFilteredLayer_l)],i.prototype,"displayFilterInfo",void 0),i=(0,tslib_es6._)([(0,subclass.$)("esri.layers.mixins.DisplayFilteredLayer")],i),i},DisplayFilteredLayer_p={type:Boolean,json:{name:"layerDefinition.disableDisplayFilter",read:{reader:r=>!r},write:{layerContainerTypes:layerContainerType.K,writer(r,o,s){(0,object.sM)(s,!r,o)}},origins:{"web-scene":{write:!1,read:!1}}}},DisplayFilteredLayer_l={type:n,json:{name:"layerDefinition.displayFilterInfo",write:{enabled:!0,allowNull:!0,layerContainerTypes:layerContainerType.K},origins:{"web-scene":{write:!1,read:!1}}}}},"./node_modules/@arcgis/core/layers/mixins/PortalLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>j});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_config_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/config.js"),_kernel_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/kernel.js"),_request_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/request.js"),_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/asyncUtils.js"),_core_Error_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_maybe_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_12__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js")),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@arcgis/core/layers/support/layerUtils.js"),_portal_Portal_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@arcgis/core/portal/Portal.js"),_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@arcgis/core/portal/PortalItem.js"),_portal_PortalUser_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@arcgis/core/portal/PortalUser.js"),_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/@arcgis/core/portal/support/portalItemUtils.js");const j=j=>{let E=class extends j{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_20__.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_17__.default({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:r}=await __webpack_require__.e(7890).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/portal/support/layersLoader.js"));return(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.Te)(t),await r({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap,populateGroupLayer:e.populateGroupLayer},t)}catch(r){throw(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.zf)(r)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_6__.A.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${r}`),r}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.QP)(e),!0))))}async setUserPrivileges(e,r){if(!_config_js__WEBPACK_IMPORTED_MODULE_1__.default.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:t,fullEdit:s},content:{updateItem:i}}=await this._fetchUserPrivileges(e,r);this._set("userHasEditingPrivileges",t),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",i)}catch(s){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.QP)(s)}}async _fetchUserPrivileges(e,t){let s=this.portalItem;if(!e||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(t);const i=!_kernel_js__WEBPACK_IMPORTED_MODULE_2__.id?.findCredential(this.url),o=e===s.id;if(o&&s.portal.user)return this._getUserPrivileges(s,i);let a,l;if(o)a=s.portal.url;else try{a=await(0,_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_15__.wI)(this.url,t)}catch(m){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.QP)(m)}if(!a||!(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_8__.b8)(a,s.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;l=await(_kernel_js__WEBPACK_IMPORTED_MODULE_2__.id?.getCredential(`${a}/sharing`,{prompt:!1,signal:e}))}catch(m){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.QP)(m)}const n=!0,p=!1,d=!1;if(!l)return{features:{edit:n,fullEdit:p},content:{updateItem:d}};try{if(o?await s.reload():(s=new _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_17__.default({id:e,portal:{url:a}}),await s.load(t)),s.portal.user)return this._getUserPrivileges(s,i)}catch(m){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.QP)(m)}return{features:{edit:n,fullEdit:p},content:{updateItem:d}}}_getUserPrivileges(e,t){const r=(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_19__.It)(e);return t&&(r.features.edit=!0),r}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(r){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_7__.QP)(r)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?_kernel_js__WEBPACK_IMPORTED_MODULE_2__.id?.findCredential(this.url):null;if(!t)return!0;const s=_.credential===t?_.user:await this._fetchEditingUser(e);return _.credential=t,_.user=s,null==s?.privileges||s.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const o=_kernel_js__WEBPACK_IMPORTED_MODULE_2__.id?.findServerInfo(this.url??"");if(!o?.owningSystemUrl)return null;const a=`${o.owningSystemUrl}/sharing/rest`,l=_portal_Portal_js__WEBPACK_IMPORTED_MODULE_16__.A.getDefault();if(l&&l.loaded&&(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_8__.S8)(l.restUrl)===(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_8__.S8)(a))return l.user;const n=`${a}/community/self`,p=null!=e?e.signal:null,u=await(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_4__.Ke)((0,_request_js__WEBPACK_IMPORTED_MODULE_3__.A)(n,{authMode:"no-prompt",query:{f:"json"},signal:p}));return u.ok?_portal_PortalUser_js__WEBPACK_IMPORTED_MODULE_18__.A.fromJSON(u.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t?.portal,s=this.portalItem?.id&&(this.portalItem.portal||_portal_Portal_js__WEBPACK_IMPORTED_MODULE_16__.A.getDefault());return r&&s&&!(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_8__.ut)(s.restUrl,r.restUrl)?(t.messages&&t.messages.push(new _core_Error_js__WEBPACK_IMPORTED_MODULE_5__.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.MZ)({type:_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_17__.default})],E.prototype,"portalItem",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_12__.w)("web-document","portalItem",["itemId"])],E.prototype,"readPortalItem",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_14__.K)("web-document","portalItem",{itemId:{type:String}})],E.prototype,"writePortalItem",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.MZ)({clonable:!1})],E.prototype,"resourceReferences",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.MZ)({type:Boolean,readOnly:!0})],E.prototype,"userHasEditingPrivileges",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.MZ)({type:Boolean,readOnly:!0})],E.prototype,"userHasFullEditingPrivileges",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.MZ)({type:Boolean,readOnly:!0})],E.prototype,"userHasUpdateItemPrivileges",void 0),E=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_13__.$)("esri.layers.mixins.PortalLayer")],E),E},_={credential:null,user:null}},"./node_modules/@arcgis/core/layers/mixins/RefreshableLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>f});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Logger=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js")),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),cast=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/cast.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),layerContainerType=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/layerContainerType.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),trackingUtils=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/trackingUtils.js");const n=new Collection.A,o=new WeakMap;function i(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function c(e,r){return Number.isFinite(e)&&Number.isFinite(r)?r<=0?e:c(r,e%r):0}let l=0,a=0;function u(){const e=Date.now();let r=!1;for(const t of n){const n=t.deref();n?n.refreshInterval&&e-(o.get(n)??0)+5>=6e4*n.refreshInterval&&(o.set(n,e),n.refresh(e)):r=!0}if(r)for(let t=n.length-1;t>=0;t--)n.at(t).deref()||n.removeAt(t)}(0,trackingUtils.fm)((()=>{const e=Date.now();let r=0;for(const t of n){const n=t.deref();n&&(r=c(Math.round(6e4*n.refreshInterval),r),n.refreshInterval?o.get(n)||o.set(n,e):o.delete(n))}if(r!==a){if(a=r,clearInterval(l),0===a)return void(l=0);l=setInterval(u,a)}}),reactiveUtils.OH);const f=m=>{let f=class extends m{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,promiseUtils.sg)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function refresh_f(e){i(e)&&n.push(new WeakRef(e))}(this)}),(()=>{}))}destroy(){!function s(e){const r=n.find((r=>r.deref()===e));r&&n.remove(r)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){(0,promiseUtils.QZ)(this._debounceHasDataChanged()).then((r=>{r&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:r})}),(e=>{Logger.A.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:layerContainerType.K}}}}})],f.prototype,"refreshInterval",void 0),(0,tslib_es6._)([(0,cast.w)("refreshInterval")],f.prototype,"castRefreshInterval",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],f.prototype,"refreshTimestamp",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],f.prototype,"refreshParameters",null),f=(0,tslib_es6._)([(0,subclass.$)("esri.layers.mixins.RefreshableLayer")],f),f}},"./node_modules/@arcgis/core/layers/mixins/TemporalLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>f,e:()=>l});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js")),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),_core_accessorSupport_layerContainerType_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/layerContainerType.js"),_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldUtils.js"),_support_TimeInfo_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/layers/support/TimeInfo.js"),_portal_timeUnitKebabDictionary_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/portal/timeUnitKebabDictionary.js"),_time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/time/TimeExtent.js"),_time_TimeInterval_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/time/TimeInterval.js");const f={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:_core_accessorSupport_layerContainerType_js__WEBPACK_IMPORTED_MODULE_7__.K}}},l=i=>{let l=class extends i{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const o=t.timeInfo.exportOptions;if(!o)return null;const r=o.timeOffset,i=_portal_timeUnitKebabDictionary_js__WEBPACK_IMPORTED_MODULE_10__.j.fromJSON(o.timeOffsetUnits);return r&&i?new _time_TimeInterval_js__WEBPACK_IMPORTED_MODULE_12__.A({value:r,unit:i}):null}set timeInfo(e){(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_8__.sv)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.MZ)({type:_time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_11__.A,json:{write:!1}})],l.prototype,"timeExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.MZ)({type:_time_TimeInterval_js__WEBPACK_IMPORTED_MODULE_12__.A})],l.prototype,"timeOffset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_5__.w)("service","timeOffset",["timeInfo.exportOptions"])],l.prototype,"readOffset",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.MZ)({value:null,type:_support_TimeInfo_js__WEBPACK_IMPORTED_MODULE_9__.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"timeInfo",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.MZ)(f)],l.prototype,"useViewTime",void 0),l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.$)("esri.layers.mixins.TemporalLayer")],l),l}},"./node_modules/@arcgis/core/layers/mixins/TrackableLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>e});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),PopupTemplate=__webpack_require__("./node_modules/@arcgis/core/PopupTemplate.js"),Clonable=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),object=__webpack_require__("./node_modules/@arcgis/core/core/object.js"),writer=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),AggregateField=__webpack_require__("./node_modules/@arcgis/core/layers/support/AggregateField.js"),commonProperties=__webpack_require__("./node_modules/@arcgis/core/layers/support/commonProperties.js"),LabelClass=__webpack_require__("./node_modules/@arcgis/core/layers/support/LabelClass.js"),typeUtils=__webpack_require__("./node_modules/@arcgis/core/renderers/support/typeUtils.js");let a=class extends(Clonable.A.ClonableMixin(JSONSupport.A)){constructor(o){super(o),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};(0,tslib_es6._)([(0,property.MZ)({type:[LabelClass.A],json:{write:!0}})],a.prototype,"labelingInfo",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.kF)],a.prototype,"labelsVisible",void 0),(0,tslib_es6._)([(0,property.MZ)({types:typeUtils.Hg,json:{write:!0}})],a.prototype,"renderer",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"visible",void 0),a=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.TrackPartInfo")],a);const n=a;var SimpleRenderer=__webpack_require__("./node_modules/@arcgis/core/renderers/SimpleRenderer.js"),defaults=__webpack_require__("./node_modules/@arcgis/core/symbols/support/defaults.js"),TimeInterval=__webpack_require__("./node_modules/@arcgis/core/time/TimeInterval.js");let u=class extends(Clonable.A.ClonableMixin(JSONSupport.A)){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new n({renderer:new SimpleRenderer.A({symbol:defaults.UK.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new n({renderer:new SimpleRenderer.A({symbol:defaults.UK.clone()})}),this.trackLines=new n({renderer:new SimpleRenderer.A({symbol:defaults.A7.clone()})}),this.timeField="startTimeField"}writeFields(e,o,r){const t=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,object.sM)(r,t,o)}};(0,tslib_es6._)([(0,property.MZ)({type:Boolean,json:{write:!0}})],u.prototype,"enabled",void 0),(0,tslib_es6._)([(0,property.MZ)({type:[AggregateField.A],json:{write:!0}})],u.prototype,"fields",void 0),(0,tslib_es6._)([(0,writer.K)("fields")],u.prototype,"writeFields",null),(0,tslib_es6._)([(0,property.MZ)({type:n,json:{write:!0}})],u.prototype,"latestObservations",void 0),(0,tslib_es6._)([(0,property.MZ)({type:TimeInterval.A,json:{write:!0}})],u.prototype,"maxDisplayDuration",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],u.prototype,"maxDisplayObservationsPerTrack",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.M6)],u.prototype,"popupEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)({type:PopupTemplate.A,json:{name:"popupInfo",write:!0}})],u.prototype,"popupTemplate",void 0),(0,tslib_es6._)([(0,property.MZ)({type:n,json:{write:!0}})],u.prototype,"previousObservations",void 0),(0,tslib_es6._)([(0,property.MZ)({type:n,json:{write:!0}})],u.prototype,"trackLines",void 0),(0,tslib_es6._)([(0,property.MZ)({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],u.prototype,"timeField",void 0),u=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.TrackInfo")],u);const f=u,e=e=>{let c=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return(0,tslib_es6._)([(0,property.MZ)({type:f})],c.prototype,"trackInfo",void 0),c=(0,tslib_es6._)([(0,subclass.$)("esri.layers.mixins.TrackableLayer")],c),c}},"./node_modules/@arcgis/core/layers/support/FieldsIndex.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Z});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/core/MapUtils.js"),_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/sql/UnknownTimeZone.js"),_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldUtils.js"),_time_constants_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/time/constants.js"),_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/time/timeZoneUtils.js"),luxon__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/luxon/src/luxon.js");const T=new Map;class Z{static fromJSON(e){return new Z(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new Z(e.fields??[],S(e))}static fromLayerJSON(e){return new Z(e.fields??[],S(e))}constructor(e=[],i){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const t=[];for(const s of this.fields){const e=s?.name,i=M(e);if(e&&i){const n=w(e);this._fieldsMap.set(e,s),this._fieldsMap.set(n,s),this._normalizedFieldsMap.set(i,s),t.push(`${n}:${s.type}:${this._timeZoneByFieldName?.get(e)}`),(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.vE)(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.WA)(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.te)(s)||(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.Xz)(s)||(s.editable=null==s.editable||!!s.editable,s.nullable=null==s.nullable||!!s.nullable)}}t.sort(),this.uid=t.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.te)(e)||(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.Xz)(e)||e.nullable||void 0!==(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(w(e))??this._normalizedFieldsMap.get(M(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(i){const s=this.get(i&&"string"!=typeof i?i.name:i);return s?this._timeZoneByFieldName?this._timeZoneByFieldName.get(s.name):"date"===s.type||"esriFieldTypeDate"===s.type?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.A("getTimeZone:no-timezone-information",`no time zone information for field '${s.name}'`)),_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.n$):N.has(s.type)?_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.L5:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.L5?_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_3__.GB.instance:i===_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.n$?luxon__WEBPACK_IMPORTED_MODULE_7__.mQ.utcInstance:(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_8__.tE)(T,i,(()=>luxon__WEBPACK_IMPORTED_MODULE_7__.oh.create(i))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__.A.isSerializable(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function w(e){return e.trim().toLowerCase()}function M(e){return(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.rS)(e)?.toLowerCase()??""}const N=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function S(e){const i=new Map;if(!e.fields)return i;const t=!0===e.datesInUnknownTimezone,{timeInfo:s,editFieldsInfo:n}=e,r=(s?"startField"in s?s.startField:s.startTimeField:"")??"",l=(s?"endField"in s?s.endField:s.endTimeField:"")??"",o=function g(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_6__.ZS)(e.dateFieldsTimeReference):null,d=n?function y(e){return"timeZone"in e}(n)?n.timeZone??o:n.dateFieldsTimeReference?(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_6__.ZS)(n.dateFieldsTimeReference):o??_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.n$:null,a=s?function _(e){return"timeZone"in e}(s)?s.timeZone??o:s.timeReference?(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_6__.ZS)(s.timeReference):o:null,m=new Map([[w(n?.creationDateField??""),d],[w(n?.editDateField??""),d],[w(r),a],[w(l),a]]);for(const{name:u,type:f}of e.fields)if(N.has(f))i.set(u,_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.L5);else if("date"!==f&&"esriFieldTypeDate"!==f)i.set(u,null);else if(t)i.set(u,_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.L5);else{const e=m.get(w(u??""))??o;i.set(u,e)}return i}},"./node_modules/@arcgis/core/layers/support/TimeInfo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>d});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js")),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),_time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/time/TimeExtent.js"),_time_TimeInterval_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/time/TimeInterval.js"),_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/time/timeZoneUtils.js");function p(t,e){return _time_TimeInterval_js__WEBPACK_IMPORTED_MODULE_11__.A.fromJSON({value:t,unit:e})}let u=class extends(_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__.A.ClonableMixin(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.A)){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,e){return e.timeExtent&&Array.isArray(e.timeExtent)&&2===e.timeExtent.length?_time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_10__.A.fromArray(e.timeExtent):null}writeFullTimeExtent(t,e){null!=t?.start&&null!=t.end?e.timeExtent=t.toArray():e.timeExtent=null}readInterval(t,e){return e.timeInterval&&e.timeIntervalUnits?p(e.timeInterval,e.timeIntervalUnits):e.defaultTimeInterval&&e.defaultTimeIntervalUnits?p(e.defaultTimeInterval,e.defaultTimeIntervalUnits):null}writeInterval(t,e){e.timeInterval=t?.toJSON().value??null,e.timeIntervalUnits=t?.toJSON().unit??null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],u.prototype,"cumulative",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],u.prototype,"endField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:_time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_10__.A,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"fullTimeExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__.w)("fullTimeExtent",["timeExtent"])],u.prototype,"readFullTimeExtent",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_9__.K)("fullTimeExtent")],u.prototype,"writeFullTimeExtent",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Boolean,json:{write:!0}})],u.prototype,"hasLiveData",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:_time_TimeInterval_js__WEBPACK_IMPORTED_MODULE_11__.A,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"interval",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],u.prototype,"readInterval",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_9__.K)("interval")],u.prototype,"writeInterval",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],u.prototype,"startField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)((0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_12__.P6)("timeReference",!0))],u.prototype,"timeZone",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"trackIdField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],u.prototype,"useTime",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:[Date],json:{read:!1}})],u.prototype,"stops",void 0),u=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.$)("esri.layers.support.TimeInfo")],u);const d=u},"./node_modules/@arcgis/core/layers/support/displayFilterUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ch:()=>c,mW:()=>i,u2:()=>u});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_core_sql_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/sql.js");function i(e,n){return{...n,filterMode:e.mode}}function u(e,n){return l(e,n).next().value??null}function c(t,r,i){const u=function f(e){if("manual"===s(e))return null;const n=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:t,maxScale:r}of e.filters)n[0]=Math.max(n[0],I(t)),n[1]=Math.min(n[1],d(r));return n}(t);if(u&&((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.gg)(r,u[0])||(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.ZH)(i,u[1])))return"";const c=Array.from(l(t,r,i)),m=function a(t,r,o){if(0===t.length)return!0;const i=I(t.at(0)?.minScale),u=d(t.at(-1)?.maxScale);if((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.ZH)(i,r)||(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.gg)(u,o))return!0;for(let e=0;e<t.length-1;e++){const r=t[e],o=t[e+1];if((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.ZH)(I(o.minScale),d(r.maxScale)))return!0}return!1}(c,r,i)?"1=1":c.map((e=>e.where||"1=1")).reduce(((e,n)=>(0,_core_sql_js__WEBPACK_IMPORTED_MODULE_1__.IW)(e,n)),"");return m&&"1=1"!==m?m:""}function*l(e,n,t){if("manual"===s(e)){const n=e.filters.find((n=>n.id===e.activeFilterId));n&&(yield n)}else{"object"==typeof n&&(n=n.scale);for(const r of e.filters)m(r.minScale,r.maxScale,n,t)&&(yield r)}}function m(e,n,o,i){return e=I(e),o=I(o),n=d(n),!(!(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.Sp)(o,e)&&(i??o)>e||(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.Hx)(n,o)||void 0!==i&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.Sp)(i,e))}function s(e){return"mode"in e?e.mode:e.filterMode}function I(e){return e||Number.POSITIVE_INFINITY}function d(e){return e||0}},"./node_modules/@arcgis/core/layers/support/fieldProperties.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>s});var _core_has_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_Field_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/layers/support/Field.js"),_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/layers/support/FieldsIndex.js"),_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldUtils.js");function s(){return{fields:{type:[_Field_js__WEBPACK_IMPORTED_MODULE_2__.A],value:null,set:function(i){if(i&&(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__.A)("big-integer-warning-enabled")){const t=i.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(t.length){const i=t.map((e=>`'${e.name}'`)).join(", ");_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__.A.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",i)}},fieldsIndex:{readOnly:!0,get(){return _FieldsIndex_js__WEBPACK_IMPORTED_MODULE_3__.A.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const i=this._userOutFields;if(!i?.length)return null;if(i.includes("*"))return["*"];if(!this.fields)return i;for(const t of i){const r=this.fieldsIndex?.has(t);r||_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__.A.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:i})}return(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.DB)(this.fieldsIndex,i)}}}}},"./node_modules/@arcgis/core/layers/support/labelUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BI:()=>f,D3:()=>u,XJ:()=>x,lc:()=>p,mX:()=>E,rU:()=>g,tH:()=>_});var _core_string_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/string.js");const n="__begin__",s="__end__",r=new RegExp(n,"ig"),t=new RegExp(s,"ig"),l=new RegExp("^"+n,"i"),o=new RegExp(s+"$","i"),i='"',a=i+" + ",c=" + "+i;function p(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function u(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function x(e){const n={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(n.expression=e.labelExpressionInfo.value,n.type="conventional"):e.labelExpressionInfo.expression&&(n.expression=e.labelExpressionInfo.expression,n.type="arcade"):null!=e.labelExpression&&(n.expression=p(e.labelExpression),n.type="conventional"),n}function f(e){const n=x(e);switch(n.type){case"conventional":return E(n.expression);case"arcade":return n.expression}return null}function g(e){const n=x(e);switch(n.type){case"conventional":return function $(e){const n=e?.match(w);return n?.[1].trim()||null}(n.expression);case"arcade":return _(n.expression)}return null}function E(p){let u;return p?(u=(0,_core_string_js__WEBPACK_IMPORTED_MODULE_0__.HC)(p,(e=>n+'$feature["'+e+'"]'+s)),u=l.test(u)?u.replace(l,""):i+u,u=o.test(u)?u.replace(o,""):u+i,u=u.replaceAll(r,a).replaceAll(t,c)):u='""',u}const w=/^\s*\{([^}]+)\}\s*$/i;const b=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,m=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,R=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function _(e){if(!e)return null;let n=b.exec(e)||m.exec(e);return n?n[1]||n[3]:(n=R.exec(e),n?n[2]:null)}},"./node_modules/@arcgis/core/layers/support/streamLayerUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Aw:()=>i,DN:()=>_,EA:()=>r,Gm:()=>e,t0:()=>s,xq:()=>t});const _="__esri_stream_id__",e="__esri_timestamp__",r="__esri_track_part__",i="__esri_time_received__",t="__esri_track_line__";var s;!function(_){_[_.TrackLine=0]="TrackLine",_[_.LatestObservation=1]="LatestObservation",_[_.PreviousObservation=2]="PreviousObservation"}(s||(s={}))},"./node_modules/@arcgis/core/portal/support/portalItemUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{It:()=>f,LG:()=>i,OM:()=>a,Sm:()=>u,Y:()=>s,bK:()=>c,mm:()=>E,sQ:()=>l});var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/webMercatorUtils.js");function i(e,t){if(!s(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function s(e,t){return!!e.typeKeywords?.includes(t)}function c(e){return s(e,E.HOSTED_SERVICE)}function a(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}function u(e,t,r){r?i(e,t):a(e,t)}async function l(e){const t=e.clone().normalize();let r;if(t.length>1)for(const n of t)r?n.width>r.width&&(r=n):r=n;else r=t[0];return async function o(o){const i=o.spatialReference;if(i.isWGS84)return o.clone();if(i.isWebMercator)return(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_2__.ci)(o);const s=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__.A.WGS84;return await(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_0__.initializeProjection)(i,s),(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_0__.project)(o,s)}(r)}const E={DEVELOPER_BASEMAP:"DeveloperBasemap",GROUP_LAYER_MAP:"Map",HOSTED_SERVICE:"Hosted Service",JSAPI:"ArcGIS API for JavaScript",LOCAL_SCENE:"ViewingMode-Local",METADATA:"Metadata",MULTI_LAYER:"Multilayer",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer",SINGLE_LAYER:"Singlelayer",SUBTYPE_GROUP_LAYER:"SubtypeGroupLayer",SUBTYPE_GROUP_TABLE:"SubtypeGroupTable",TABLE:"Table",TILED_IMAGERY:"Tiled Imagery"};function f(e){const{portal:t,isOrgItem:r,itemControl:n}=e,o=t.user?.privileges;let i=!o||o.includes("features:user:edit"),s=!!r&&!!o?.includes("features:user:fullEdit");const c="update"===n||"admin"===n;return c?s=i=!0:s&&(i=!0),{features:{edit:i,fullEdit:s},content:{updateItem:c}}}},"./node_modules/@arcgis/core/portal/timeUnitKebabDictionary.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>e});const e=(0,__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js").O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},"./node_modules/@arcgis/core/renderers/support/heatmapUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O3:()=>f,PU:()=>a,YW:()=>u,ex:()=>c,hv:()=>l,zp:()=>e});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec42.js"),_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js");const c=2.4;function e(t){return(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.PN)(t*c)}function a(t){return(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.Lz)(t)/c}function s(r,o,i,c){let{color:e,ratio:a}=o,{color:s,ratio:f}=i;if(f===a){const t=1e-6;1===f?a-=t:f+=t}const l=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.qE)((c-a)/(f-a),0,1);(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_1__.l)(r,e.toArray(),s.toArray(),l)}function f(t){const o=new Uint8ClampedArray(2048);if(t=t.filter((({ratio:t})=>t>=0&&t<=1)).sort(((t,r)=>t.ratio-r.ratio)).map((({color:t,ratio:r})=>({color:t,ratio:Math.max(r,.001)}))),t.length<1)return o;let n=t[0],c=t[0],e=1;const a=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__.vt)();for(let i=0;i<512;i++){const f=(i+.5)/512;for(;f>c.ratio&&e<t.length;)n=c,c=t[e++];s(a,n,c,f),o.set(a,4*i)}return o}function l(t,r,o){const n=Math.sqrt(t**2+r**2)/o;return n>1?0:3/(Math.PI*o**2)*(1-n**2)**2}function u(t){return"function"==typeof t?t:t?r=>+r[t]:()=>1}},"./node_modules/@arcgis/core/renderers/support/styleUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>t});var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/asyncUtils.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_core_Warning_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Warning.js");async function t(t,i,n){const s=t&&t.getAtOrigin&&t.getAtOrigin("renderer",i.origin);if(s&&"unique-value"===s.type&&s.styleOrigin){const a=await(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.Ke)(s.populateFromStyle());if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.Te)(n),!1===a.ok){const e=a.error;i?.messages&&i.messages.push(new _core_Warning_js__WEBPACK_IMPORTED_MODULE_2__.A("renderer:style-reference",`Failed to create unique value renderer from style reference: ${e.message}`,{error:e,context:i})),t.clear("renderer",i?.origin)}}}},"./node_modules/@arcgis/core/rest/support/NormalizationBinParametersMixin.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>m,Q:()=>n});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js")),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");const n=(0,_core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),l="percent-of-total",s="field",m=t=>{let m=class extends t{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let o=this._get("normalizationType");const t=!!this.normalizationField,a=null!=this.normalizationTotal;return t||a?(o=t&&s||a&&l||null,t&&a&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):o!==s&&o!==l||(o=null),o}set normalizationType(o){this._set("normalizationType",o)}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],m.prototype,"normalizationField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],m.prototype,"normalizationMaxValue",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],m.prototype,"normalizationMinValue",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],m.prototype,"normalizationTotal",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_6__.e)(n,{name:"parameters.normalizationType"})],m.prototype,"normalizationType",null),m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.$)("esri.rest.support.NormalizationBinParametersMixin")],m),m}},"./node_modules/@arcgis/core/symbols/support/defaults.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A7:()=>u,Cx:()=>c,Hk:()=>a,JJ:()=>y,SF:()=>J,UK:()=>S,jM:()=>N,x3:()=>O});__webpack_require__("./node_modules/@arcgis/core/core/has.js");var _SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/symbols/SimpleFillSymbol.js"),_SimpleLineSymbol_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/symbols/SimpleLineSymbol.js"),_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/symbols/SimpleMarkerSymbol.js"),_TextSymbol_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/symbols/TextSymbol.js"),_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/defaultsJSON.js");const S=_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_3__.A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__.Cb),u=_SimpleLineSymbol_js__WEBPACK_IMPORTED_MODULE_2__.A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__.yM),c=_SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_1__.A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__.WR),a=_TextSymbol_js__WEBPACK_IMPORTED_MODULE_4__.A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__.JZ);function J(r){if(null==r)return null;switch(r.type){case"mesh":return null;case"point":case"multipoint":return S;case"polyline":return u;case"polygon":case"extent":return c}return null}const N=_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_3__.A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__.nC),O=_SimpleLineSymbol_js__WEBPACK_IMPORTED_MODULE_2__.A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__.HW),y=_SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_1__.A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__.b6)},"./node_modules/@arcgis/core/symbols/support/defaultsJSON.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cb:()=>l,HW:()=>s,JR:()=>i,JZ:()=>t,WR:()=>S,b6:()=>y,fT:()=>e,nC:()=>r,yM:()=>o});const e=[252,146,31,255],i=[153,153,153,255],l={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e},S={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},t={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},r={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},s={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},y={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},"./node_modules/@arcgis/core/time/TimeInterval.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>l});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_timeUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/timeUtils.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js")),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),_portal_timeUnitKebabDictionary_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/portal/timeUnitKebabDictionary.js");let m=class extends(_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__.A.ClonableMixin(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.A)){constructor(o){super(o),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,_core_timeUtils_js__WEBPACK_IMPORTED_MODULE_3__.t)(this.value,this.unit,"milliseconds")}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_8__.e)(_portal_timeUnitKebabDictionary_js__WEBPACK_IMPORTED_MODULE_10__.j,{nonNullable:!0})],m.prototype,"unit",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)({type:Number,json:{write:!0},nonNullable:!0})],m.prototype,"value",void 0),m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.$)("esri.time.TimeInterval")],m);const l=m},"./node_modules/@arcgis/core/webdoc/interfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var A;__webpack_require__.d(__webpack_exports__,{X:()=>A}),function(A){A[A.SAVE=0]="SAVE",A[A.SAVE_AS=1]="SAVE_AS"}(A||(A={}))}}]);