"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[635,1301,2962,4239,7805],{"./node_modules/@arcgis/core/chunks/_commonjsHelpers.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>e,g:()=>o});var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},"./node_modules/@arcgis/core/geometry/geometryAdapters/hydrated.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{hydratedAdapter:()=>r});var _Extent_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),_Multipoint_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/Multipoint.js"),_Point_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),_Polygon_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js"),_Polyline_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/Polyline.js");const r={convertToGEGeometry:function s(e,n){if(null==n)return null;let t="cache"in n?n.cache._geVersion:void 0;return null==t&&(t=e.convertJSONToGeometry(n),"cache"in n&&(n.cache._geVersion=t)),t},exportPoint:function a(e,n,o){const i=e.hasZ(n),r=e.hasM(n),s=new _Point_js__WEBPACK_IMPORTED_MODULE_2__.default({x:e.getPointX(n),y:e.getPointY(n),spatialReference:o});return i&&(s.z=e.getPointZ(n)),r&&(s.m=e.getPointM(n)),s.cache._geVersion=n,s},exportPolygon:function c(e,n,t){const i=new _Polygon_js__WEBPACK_IMPORTED_MODULE_3__.A({rings:e.exportPaths(n),hasZ:e.hasZ(n),hasM:e.hasM(n),spatialReference:t});return i.cache._geVersion=n,i},exportPolyline:function h(e,n,t){const o=new _Polyline_js__WEBPACK_IMPORTED_MODULE_4__.A({paths:e.exportPaths(n),hasZ:e.hasZ(n),hasM:e.hasM(n),spatialReference:t});return o.cache._geVersion=n,o},exportMultipoint:function m(e,t,o){const i=new _Multipoint_js__WEBPACK_IMPORTED_MODULE_1__.A({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:o});return i.cache._geVersion=t,i},exportExtent:function x(n,t,o){const i=n.hasZ(t),r=n.hasM(t),s=new _Extent_js__WEBPACK_IMPORTED_MODULE_0__.default({xmin:n.getXMin(t),ymin:n.getYMin(t),xmax:n.getXMax(t),ymax:n.getYMax(t),spatialReference:o});if(i){const e=n.getZExtent(t);s.zmin=e.vmin,s.zmax=e.vmax}if(r){const e=n.getMExtent(t);s.mmin=e.vmin,s.mmax=e.vmax}return s.cache._geVersion=t,s}}},"./node_modules/@arcgis/core/geometry/geometryEngine.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{buffer:()=>J,changeDefaultSpatialReferenceTolerance:()=>F,clearDefaultSpatialReferenceTolerance:()=>K,clip:()=>c,contains:()=>s,convexHull:()=>S,crosses:()=>a,cut:()=>f,densify:()=>I,difference:()=>j,disjoint:()=>h,distance:()=>l,equals:()=>p,extendedSpatialReferenceInfo:()=>o,flipHorizontal:()=>B,flipVertical:()=>G,generalize:()=>H,geodesicArea:()=>C,geodesicBuffer:()=>L,geodesicDensify:()=>b,geodesicLength:()=>P,intersect:()=>D,intersectLinesToPoints:()=>W,intersects:()=>m,isSimple:()=>x,nearestCoordinate:()=>N,nearestVertex:()=>O,nearestVertices:()=>V,offset:()=>E,overlaps:()=>w,planarArea:()=>k,planarLength:()=>q,relate:()=>R,rotate:()=>z,simplify:()=>y,symmetricDifference:()=>A,touches:()=>d,union:()=>T,within:()=>g});var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),_asserts_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/asserts.js"),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/chunks/geometryEngineBase.js"),_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/geometryAdapters/hydrated.js");function i(e){const r=Array.isArray(e)?e[0].spatialReference:e.spatialReference;return r?(0,_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_0__.PZ)(_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__.A,r):_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__.A.WGS84}function o(n){return _chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.extendedSpatialReferenceInfo(n)}function c(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.clip(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function f(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.cut(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function s(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.contains(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function a(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.crosses(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function l(n,t,o){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.distance(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t,o)}function p(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.equals(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function m(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.intersects(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function d(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.touches(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function g(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.within(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function h(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.disjoint(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function w(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.overlaps(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function R(n,t,o){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.relate(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t,o)}function x(n){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.isSimple(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n)}function y(n){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.simplify(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n)}function S(n,e=!1){return _chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.convexHull(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,e)}function j(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.difference(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function A(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.symmetricDifference(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function D(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(t),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.intersect(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function T(n){return _chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.union(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n)}function E(n,e,t,o,c,f){return _chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.offset(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,e,t,o,c,f)}function J(n,e,t,o=!1){return _chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.buffer(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,e,t,o)}function L(n,e,t,o,c,f){return _chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.geodesicBuffer(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,e,t,o,c,f)}function N(n,t,o=!0){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.nearestCoordinate(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t,o)}function O(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.nearestVertex(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function V(n,t,o,c){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.nearestVertices(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t,o,c)}function v(n){return"xmin"in n?"center"in n?n.center:null:"x"in n?n:"extent"in n?n.extent?.center??null:null}function z(n,e,t){if(null==n)throw new M;const u=n.spatialReference;if(null==(t=t??v(n)))throw new M;const i=n.constructor.fromJSON(_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.rotate(n,e,t));return i.spatialReference=u,i}function B(n,e){if(null==n)throw new M;const t=n.spatialReference;if(null==(e=e??v(n)))throw new M;const u=n.constructor.fromJSON(_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.flipHorizontal(n,e));return u.spatialReference=t,u}function G(n,e){if(null==n)throw new M;const t=n.spatialReference;if(null==(e=e??v(n)))throw new M;const u=n.constructor.fromJSON(_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.flipVertical(n,e));return u.spatialReference=t,u}function H(n,t,o,c){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.generalize(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t,o,c)}function I(n,t,o){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.densify(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t,o)}function b(n,t,o,c=0){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.geodesicDensify(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t,o,c)}function k(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.planarArea(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function q(n,t){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.planarLength(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t)}function C(n,t,o){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.geodesicArea(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t,o)}function P(n,t,o){return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_1__.f)(n),_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.geodesicLength(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,t,o)}function W(n,e){return _chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.intersectLinesToPoints(_geometryAdapters_hydrated_js__WEBPACK_IMPORTED_MODULE_4__.hydratedAdapter,i(n),n,e)}function F(n,e){_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.changeDefaultSpatialReferenceTolerance(n,e)}function K(n){_chunks_geometryEngineBase_js__WEBPACK_IMPORTED_MODULE_2__.G.clearDefaultSpatialReferenceTolerance(n)}class M extends Error{constructor(){super("Illegal Argument Exception")}}},"./node_modules/@arcgis/core/views/interactive/snapping/SelfSnappingEngine.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{SelfSnappingEngine:()=>SelfSnappingEngine_h});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),Cyclical=__webpack_require__("./node_modules/@arcgis/core/core/Cyclical.js"),quantityUtils=__webpack_require__("./node_modules/@arcgis/core/core/quantityUtils.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js"),elevationInfoUtils=__webpack_require__("./node_modules/@arcgis/core/support/elevationInfoUtils.js"),normalizedPoint=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/normalizedPoint.js"),unitUtils=__webpack_require__("./node_modules/@arcgis/core/core/unitUtils.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js"),Settings=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/Settings.js"),snappingUtils=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/snappingUtils.js"),viewUtils=__webpack_require__("./node_modules/@arcgis/core/views/interactive/support/viewUtils.js");class l{constructor(e,t){this.view=e,this.options=t,this.squaredShortLineThreshold=Settings.N.shortLineThreshold*Settings.N.shortLineThreshold}snap(e,t){return null!=t.vertexHandle?"vertex"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}edgeExceedsShortLineThreshold(e,t){return this.exceedsShortLineThreshold((0,normalizedPoint.Lp)(e.leftVertex.pos,this.view,t),(0,normalizedPoint.Lp)(e.rightVertex.pos,this.view,t),t)}exceedsShortLineThreshold(e,t,{spatialReference:s}){return 0===this.squaredShortLineThreshold||(0,snappingUtils.pM)((0,viewUtils.j)(t,s,elevationInfoUtils.qt,this.view),(0,viewUtils.j)(e,s,elevationInfoUtils.qt,this.view))>this.squaredShortLineThreshold}isVertical(r,s,{spatialReference:h}){const n=(0,unitUtils.GA)(h);return(0,vec2.Io)((0,normalizedPoint.Xz)(r),(0,normalizedPoint.Xz)(s))*n<Settings.N.verticalLineThresholdMeters}squaredProximityThreshold(e){return"touch"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,r=e*t;return r*r}}var LineSnappingCandidate=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/candidates/LineSnappingCandidate.js"),angularMeasurementUtils=__webpack_require__("./node_modules/@arcgis/core/views/support/angularMeasurementUtils.js"),geodesicLengthMeasurementUtils=__webpack_require__("./node_modules/@arcgis/core/views/support/geodesicLengthMeasurementUtils.js"),geometry3dUtils=__webpack_require__("./node_modules/@arcgis/core/views/support/geometry3dUtils.js"),geometry2dUtils=__webpack_require__("./node_modules/@arcgis/core/views/support/geometry2dUtils.js");class E extends l{snapNewVertex(e,t){const r=t.editGeometryOperations.data.components[0],s=r.edges.length,o=[];if(s<1)return o;const{spatialReference:n}=t,a=(0,viewUtils.j)(e,n,elevationInfoUtils.qt,this.view),{view:p}=this,d=r.edges[s-1];let h=d;do{if(this.edgeExceedsShortLineThreshold(h,t)){const r=(0,snappingUtils.is)(h,p,t);this._processCandidateProposal(r.left,r.right,e,a,t,o)}h=h.leftVertex.leftEdge}while(h&&h!==d);return o}snapExistingVertex(e,t){const r=[],s=t.vertexHandle,o=s.component;if(o.edges.length<2)return r;const{view:a}=this,{spatialReference:p}=t,d=(0,viewUtils.j)(e,p,elevationInfoUtils.qt,a),h=s.leftEdge,c=s.rightEdge;h&&c&&this.edgeExceedsShortLineThreshold(h,t)&&this.edgeExceedsShortLineThreshold(c,t)&&this._processCandidateProposal((0,normalizedPoint.Lp)(h.leftVertex.pos,a,t),(0,normalizedPoint.Lp)(c.rightVertex.pos,a,t),e,d,t,r);const g=o.edges[0];let m=g;do{if(m!==s.leftEdge&&m!==s.rightEdge&&this.edgeExceedsShortLineThreshold(m,t)){const s=(0,snappingUtils.is)(m,a,t);this._processCandidateProposal(s.left,s.right,e,d,t,r)}m=m.rightVertex.rightEdge}while(m&&m!==g);return r}_processCandidateProposal(e,t,r,s,n,d){const{spatialReference:l,pointer:g}=n,m=(0,vec3f64.vt)();!function v(e,t,r,s,o){(function w(o,i,n,a,{spatialReference:p}){const d=(0,angularMeasurementUtils.IP)(i,n,p,p);if(null==d)return!1;const l=(0,angularMeasurementUtils.IP)(n,a,p,p);if(null==l)return!1;const h=(0,geodesicLengthMeasurementUtils.n3)(n,a,p);if(null==h)return!1;const c=Math.abs(Cyclical.wf.shortestSignedDiff(d,l))>Math.PI/2?Cyclical.uC.normalize(d+Math.PI):d;return(0,angularMeasurementUtils.rT)(o,n,p,(0,quantityUtils.l3)(h,"meters"),(0,quantityUtils.Wq)(c,"radians","geographic"),"geodesic"),o[2]=a[2],!0})(e,t,r,s,o)||function P(e,t,r,s){(0,geometry3dUtils.Yv)(t,{start:r,end:s,type:geometry2dUtils.Vv.LINE},e),e[2]=t[2]}(e,s,t,r)}(m,e,t,r,n);const u=(0,normalizedPoint.de)((0,normalizedPoint._7)(m));(0,snappingUtils.pM)(s,(0,viewUtils.j)(u,l,elevationInfoUtils.qt,this.view))<this.squaredProximityThreshold(g)&&d.push(new LineSnappingCandidate.o({lineStart:e,lineEnd:t,targetPoint:u,isDraped:"on-the-ground"===n.elevationInfo?.mode}))}}var vec2f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js"),ParallelLineSnappingCandidate=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/candidates/ParallelLineSnappingCandidate.js");class f extends l{snapNewVertex(e,t){const s=t.editGeometryOperations.data.components[0],o=s.edges.length,n=s.vertices.length,l=[];if(o<2)return l;const{view:a}=this,h=(0,viewUtils.j)(e,t.spatialReference,elevationInfoUtils.qt,a),d=(0,normalizedPoint.Lp)(s.vertices[n-1].pos,a,t),g=(0,normalizedPoint.Lp)(s.vertices[0].pos,a,t),f=s.edges[o-1];let m=f;do{if(this.edgeExceedsShortLineThreshold(m,t)){const r=(0,snappingUtils.is)(m,a,t);this._checkEdgeForParallelLines(r,d,e,h,t,l),this._checkEdgeForParallelLines(r,g,e,h,t,l)}m=m.leftVertex.leftEdge}while(m&&m!==f);return l}snapExistingVertex(e,t){const s=[],o=t.vertexHandle,n=o.component;if(n.edges.length<3)return s;const{view:l}=this,a=(0,viewUtils.j)(e,t.spatialReference,elevationInfoUtils.qt,l),h=o.leftEdge,d=o.rightEdge,g=n.vertices[0],f=(0,normalizedPoint.Lp)(g.pos,l,t),m=n.vertices.length,u=n.vertices[m-1],v=(0,normalizedPoint.Lp)(u.pos,l,t),x=n.edges[0];let E=x;do{if(E!==h&&E!==d&&this.edgeExceedsShortLineThreshold(E,t)){const r=(0,snappingUtils.is)(E,l,t);h&&this._checkEdgeForParallelLines(r,(0,normalizedPoint.Lp)(h.leftVertex.pos,l,t),e,a,t,s),d&&this._checkEdgeForParallelLines(r,(0,normalizedPoint.Lp)(d.rightVertex.pos,l,t),e,a,t,s),o===g?this._checkEdgeForParallelLines(r,v,e,a,t,s):o===u&&this._checkEdgeForParallelLines(r,f,e,a,t,s)}E=E.rightVertex.rightEdge}while(E&&E!==x);return s}_checkEdgeForParallelLines(t,i,a,c,f,v){const x=t.left,E=t.right;if((0,geometry2dUtils.fg)(u,(0,normalizedPoint.Xz)(i),(0,normalizedPoint.Xz)(x),(0,normalizedPoint.Xz)(E)),(0,vec2.hG)(u,(0,normalizedPoint.Xz)(i))<Settings.N.parallelLineThreshold)return;(0,geometry2dUtils.fg)(u,(0,normalizedPoint.Xz)(a),(0,normalizedPoint.Xz)(x),(0,normalizedPoint.Xz)(E),(0,normalizedPoint.Xz)(i));const{spatialReference:L,pointer:P}=f,j=(0,normalizedPoint.de)((0,normalizedPoint.fA)(u[0],u[1],a[2]));if((0,snappingUtils.pM)(c,(0,viewUtils.j)(j,L,elevationInfoUtils.qt,this.view))<this.squaredProximityThreshold(P)){if(this.isVertical(j,i,f)||this.isVertical(x,E,f))return;if(function m(t,r){const i=t.left,o=t.right;for(const n of r)if((0,geometry2dUtils.fg)(u,(0,normalizedPoint.Xz)(o),(0,normalizedPoint.Xz)(n.constraint.start),(0,normalizedPoint.Xz)(n.constraint.end),(0,normalizedPoint.Xz)(i)),(0,vec2.hG)(u,(0,normalizedPoint.Xz)(o))<Settings.N.parallelLineThreshold)return n.addReferenceLine(t),!0;return!1}(t,v))return;v.push(new ParallelLineSnappingCandidate.B({referenceLine:t,lineStart:i,targetPoint:j,isDraped:"on-the-ground"===f.elevationInfo?.mode}))}}}const u=(0,vec2f64.vt)();var vec32=__webpack_require__("./node_modules/@arcgis/core/chunks/vec32.js"),constraints=__webpack_require__("./node_modules/@arcgis/core/views/interactive/sketch/constraints.js"),RightAngleSnappingCandidate=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/candidates/RightAngleSnappingCandidate.js");class R extends l{snapNewVertex(e,t){const r=t.editGeometryOperations.data.components[0],i=[];if(r.vertices.length<2)return i;const{view:n}=this,s=(0,viewUtils.j)(e,t.spatialReference,elevationInfoUtils.qt,n),o=r.vertices.at(-1);this._checkForSnappingCandidate(RightAngleSnappingCandidate._b.LastVertex,i,o.leftEdge,o,o.leftEdge.leftVertex,e,s,t);const a=r.vertices[0];return this._checkForSnappingCandidate(RightAngleSnappingCandidate._b.FirstVertex,i,a.rightEdge,a,a.rightEdge.rightVertex,e,s,t),i}snapExistingVertex(e,t){const r=[],i=t.vertexHandle;if(i.component.vertices.length<3)return r;const{view:n}=this,s=(0,viewUtils.j)(e,t.spatialReference,elevationInfoUtils.qt,n),o=i.leftEdge,a=i.rightEdge;if(o?.leftVertex.leftEdge){const i=o.leftVertex.leftEdge;this._checkForSnappingCandidate(RightAngleSnappingCandidate._b.ExistingEdge,r,i,i.rightVertex,i.leftVertex,e,s,t)}if(a?.rightVertex.rightEdge){const i=a.rightVertex.rightEdge;this._checkForSnappingCandidate(RightAngleSnappingCandidate._b.ExistingEdge,r,i,i.leftVertex,i.rightVertex,e,s,t)}return r}_checkForSnappingCandidate(e,t,r,i,n,s,o,a){if(!this.edgeExceedsShortLineThreshold(r,a))return;const c=this.view,p=(0,normalizedPoint.Lp)(i.pos,c,a),g=(0,normalizedPoint.Lp)(n.pos,c,a);(function _(e,t,r,i,n){(function RightAngleSnapper_P(i,n,s,o,{spatialReference:a}){const c=(0,angularMeasurementUtils.IP)(n,s,a,a);if(null==c)return!1;const g=(0,angularMeasurementUtils.IP)(s,o,a,a);if(null==g)return!1;const l=Math.sign(Cyclical.uC.shortestSignedDiff(c,g))*Math.PI*.5,d=(0,quantityUtils.Wq)(c+l,"radians","geographic"),f=(0,vec3f64.vt)(),m=(0,geodesicLengthMeasurementUtils.n3)(s,o,a);return null!=m&&((0,angularMeasurementUtils.rT)(f,s,a,(0,quantityUtils.l3)(m,"meters"),d,"geodesic"),(0,vec32.d)(i,f,s),!0)})(e,t,r,i,n)||function U(e,t,r){const n=(0,vec2.Re)(M,(0,normalizedPoint.Xz)(r),(0,normalizedPoint.Xz)(t));(0,vec32.i)(e,n[1],-n[0],0)}(e,t,r)})(T,g,p,s,a),this._checkForSnappingCandidateAlongProjectedRay(e,t,g,p,T,s,o,a)}_checkForSnappingCandidateAlongProjectedRay(e,t,r,a,p,g,f,E){const{spatialReference:v,pointer:w}=E,y=(0,vec2.Re)(M,(0,normalizedPoint.Xz)(g),(0,normalizedPoint.Xz)(a)),F=(0,vec2.Om)(p,y)/(0,vec2.m3)(p),R=(0,vec2.Ln)(M,(0,normalizedPoint.Xz)(a),p,F),_=(0,normalizedPoint.de)((0,normalizedPoint.fA)(R[0],R[1],g[2]));if((0,snappingUtils.pM)(f,(0,viewUtils.j)(_,v,elevationInfoUtils.qt,this.view))>this.squaredProximityThreshold(w)||this.isVertical(_,a,E)||this.isVertical(a,r,E))return;const P=(0,vec32.b)((0,vec3f64.vt)(),a,p,Math.sign(F));t.push(new RightAngleSnappingCandidate.HJ({targetPoint:_,constraint:new constraints.FX(a,(0,normalizedPoint._7)(P)),previousVertex:r,otherVertex:a,otherVertexType:RightAngleSnappingCandidate.pn.CENTER,selfSnappingType:e,isDraped:"on-the-ground"===E.elevationInfo?.mode}))}}const M=(0,vec2f64.vt)(),T=(0,vec3f64.vt)();var RightAngleTriangleSnappingCandidate=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate.js");class h extends l{snapNewVertex(e,t){const i=t.editGeometryOperations.data.components[0],r=[],s=i.vertices.length;if("polygon"!==t.editGeometryOperations.data.type||s<2)return r;const{view:n}=this,p=i.vertices[0],a=i.vertices[s-1],d=(0,normalizedPoint.Lp)(p.pos,n,t),l=(0,normalizedPoint.Lp)(a.pos,n,t);return this._processCandidateProposal(d,l,e,t,r),r}snapExistingVertex(e,t){const i=[],r=t.vertexHandle,s=r.component;if(s.edges.length<2)return i;if("polyline"===t.editGeometryOperations.data.type&&(0===r.index||r.index===s.vertices.length-1))return i;const{view:n}=this,p=(0,normalizedPoint.Lp)(r.leftEdge.leftVertex.pos,n,t),a=(0,normalizedPoint.Lp)(r.rightEdge.rightVertex.pos,n,t);return this._processCandidateProposal(p,a,e,t,i),i}_processCandidateProposal(i,o,a,h,g){if(!this.exceedsShortLineThreshold(i,o,h))return;const v=(0,vec2.Cc)(RightAngleTriangleSnapper_f,(0,normalizedPoint.Xz)(i),(0,normalizedPoint.Xz)(o),.5),x=.5*(0,vec2.Io)((0,normalizedPoint.Xz)(i),(0,normalizedPoint.Xz)(o)),u=(0,geometry2dUtils.Dh)(RightAngleTriangleSnapper_f,(0,normalizedPoint.Xz)(a),v,x),j=(0,normalizedPoint.de)((0,normalizedPoint.fA)(u[0],u[1],a[2])),{spatialReference:y,pointer:w}=h,P=(0,viewUtils.j)(a,y,elevationInfoUtils.qt,this.view);if((0,snappingUtils.pM)(P,(0,viewUtils.j)(j,y,elevationInfoUtils.qt,this.view))<this.squaredProximityThreshold(w)){if(this.isVertical(i,j,h)||this.isVertical(j,o,h))return;g.push(new RightAngleTriangleSnappingCandidate.R({targetPoint:j,point1:i,point2:o,isDraped:"on-the-ground"===h.elevationInfo?.mode}))}}}const RightAngleTriangleSnapper_f=(0,vec2f64.vt)();var SnappingDomain=__webpack_require__("./node_modules/@arcgis/core/views/interactive/snapping/SnappingDomain.js");let SelfSnappingEngine_h=class extends Accessor.A{constructor(o){super(o),this.updating=!1,this._snappers=new Collection.A,this._domain=SnappingDomain.n.SELF}initialize(){this._snappers.push(new f(this.view,this.options),new E(this.view,this.options),new R(this.view,this.options),new h(this.view,this.options))}set options(o){this._set("options",o);for(const s of this._snappers)s.options=o}async fetchCandidates(o,s,t){if(!(s&this._domain&&this.options.effectiveSelfEnabled))return[];const i=[];for(const r of this._snappers.items)for(const s of r.snap(o,t))i.push(s);return(0,snappingUtils.xX)(o,i),i}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],SelfSnappingEngine_h.prototype,"updating",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],SelfSnappingEngine_h.prototype,"view",void 0),(0,tslib_es6._)([(0,property.MZ)()],SelfSnappingEngine_h.prototype,"options",null),SelfSnappingEngine_h=(0,tslib_es6._)([(0,subclass.$)("esri.views.interactive.snapping.SelfSnappingEngine")],SelfSnappingEngine_h)},"./node_modules/@arcgis/core/views/support/geodesicLengthMeasurementUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Og:()=>f,mh:()=>m,n3:()=>u});var _core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/quantityUtils.js"),_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js"),_geometry_geometryEngine_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/geometryEngine.js"),_geometry_support_geodesicUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/geodesicUtils.js"),_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js"),_geodesicMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/support/geodesicMeasurementUtils.js");function m(e){const{spatialReference:t}=e;return(0,_geodesicMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_5__.M0)(t,l,g,e)}function f(e,t){if(!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.aI)(e.spatialReference,t.spatialReference))return null;const{spatialReference:r}=e;return R[0]=e.x,R[1]=e.y,R[2]=e.hasZ?e.z:0,d[0]=t.x,d[1]=t.y,d[2]=t.hasZ?t.z:0,u(R,d,r)}function u(e,t,r){return(0,_geodesicMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_5__.M0)(r,a,p,e,t,r)}function a(t,r,s){return(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__.d_)((0,_geometry_support_geodesicUtils_js__WEBPACK_IMPORTED_MODULE_3__._3)(j,t,r,s).distance,"meters")}function p(t,n,s){return(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__.d_)((0,_geometry_geometryEngine_js__WEBPACK_IMPORTED_MODULE_2__.geodesicLength)(function y(e,t,r){return{type:"polyline",spatialReference:r,paths:[[[...e],[...t]]]}}(t,n,s),"meters"),"meters")}function l(t){return(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__.d_)((0,_geometry_support_geodesicUtils_js__WEBPACK_IMPORTED_MODULE_3__.l1)([t],"meters")[0],"meters")}function g(t){return(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__.d_)((0,_geometry_geometryEngine_js__WEBPACK_IMPORTED_MODULE_2__.geodesicLength)(t,"meters"),"meters")}const j=new _geometry_support_geodesicUtils_js__WEBPACK_IMPORTED_MODULE_3__.Zj,R=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.vt)(),d=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.vt)()},"./node_modules/@arcgis/core/views/support/geodesicMeasurementUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M0:()=>r,yF:()=>e});var _geometry_support_geodesicUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/geodesicUtils.js"),_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");function e(e){return(0,_geometry_support_geodesicUtils_js__WEBPACK_IMPORTED_MODULE_0__.TT)(e)||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_1__.K8)(e)}function r(e,r,p,...i){return(0,_geometry_support_geodesicUtils_js__WEBPACK_IMPORTED_MODULE_0__.TT)(e)?r.apply(void 0,i):(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_1__.K8)(e)?p.apply(void 0,i):null}}}]);