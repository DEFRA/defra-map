"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[9214],{"./node_modules/@arcgis/core/renderers/support/HeatmapColorStop.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>l});var c,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_Color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/Color.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));let i=c=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.A{constructor(o){super(o),this.color=null,this.ratio=null}clone(){return new c({color:this.color&&this.color.clone(),ratio:this.ratio})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:_Color_js__WEBPACK_IMPORTED_MODULE_1__.A,json:{type:[_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__.jz],default:null,write:{isRequired:!0}}})],i.prototype,"color",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Number,json:{write:{isRequired:!0}}})],i.prototype,"ratio",void 0),i=c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.$)("esri.renderers.support.HeatmapColorStop")],i);const l=i},"./node_modules/@arcgis/core/renderers/support/typeUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Hg:()=>typeUtils_m,XJ:()=>typeUtils_u});var Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),ClassBreaksRenderer=__webpack_require__("./node_modules/@arcgis/core/renderers/ClassBreaksRenderer.js"),tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),writer=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),fieldUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldUtils.js"),Renderer=__webpack_require__("./node_modules/@arcgis/core/renderers/Renderer.js"),VisualVariablesMixin=__webpack_require__("./node_modules/@arcgis/core/renderers/mixins/VisualVariablesMixin.js"),Color=__webpack_require__("./node_modules/@arcgis/core/Color.js"),request=__webpack_require__("./node_modules/@arcgis/core/request.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),LRUCache=__webpack_require__("./node_modules/@arcgis/core/core/LRUCache.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),Version=__webpack_require__("./node_modules/@arcgis/core/core/Version.js"),jsonUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js"),FieldsIndex=__webpack_require__("./node_modules/@arcgis/core/layers/support/FieldsIndex.js"),arcadeOnDemand=__webpack_require__("./node_modules/@arcgis/core/support/arcadeOnDemand.js"),CIMSymbol=__webpack_require__("./node_modules/@arcgis/core/symbols/CIMSymbol.js"),utils=__webpack_require__("./node_modules/@arcgis/core/symbols/cim/utils.js");const d="esri.renderers.support.DictionaryLoader",g={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class _{constructor(e,t,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new LRUCache.q(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=t,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let s;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{s=await this._dictionaryPromise}catch(p){if((0,promiseUtils.zf)(p))return this._dictionaryPromise=null,null}const r=this._dictionaryVersion?.greaterEqual(4,0),o={};if(this.fieldMap)for(const e of this._symbolFields){const i=(0,utils.MO)(this.fieldMap[e],this._fieldIndex);if(i){const s=t.attributes[i];o[e]=r?s:null!=s?""+t.attributes[i]:""}else o[e]=""}let l=null;try{l=s?.(o,i)}catch(d){return null}if(!l||"string"!=typeof l||"invalid"===l)return null;const f=l.split(";"),m=[],u=[];for(let n=0;n<f.length;n++){const i=f[n];if(i)if(i.includes("po:")){const s=i.slice(3).split("|");if(3===s.length){const i=s[0],r=s[1];let o=s[2];const n="countrylabel";if(i===n&&"TextString"===r){if(null!=this.fieldMap){let e=this.fieldMap[n];null==e&&(e=n,this.fieldMap[e]=e),t.attributes[e]=o}continue}if("DashTemplate"===r)o=o.split(" ").map((e=>Number(e)));else if("Color"===r){const t=new Color.A(o).toRgba();o=[t[0],t[1],t[2],255*t[3]]}else o=Number(o);u.push({primitiveName:i,propertyName:r,value:o,defaultValue:null})}}else if(i.includes("|")){for(const e of i.split("|"))if(this._itemNames.has(e)){m.push(e);break}}else if(this._itemNames.has(i))m.push(i);else if(0===n){m.length=0;let e="Invalid_P";null!=t.geometry&&((0,jsonUtils.Bi)(t.geometry)?e="Invalid_A":(0,jsonUtils.Rg)(t.geometry)&&(e="Invalid_L")),m.push(e);break}}const h=null==t.geometry||!t.geometry.hasZ&&"point"===t.geometry.type;return this._cimPartsToCIMSymbol(t,m,u,h,i)}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void Logger.A.getLogger(d).error("no valid URL!");const s=(0,request.A)(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:null!=e?e.signal:null}),[{data:o}]=await Promise.all([s,(0,arcadeOnDemand.lw)()]);if(!o)throw this._dictionaryPromise=null,new Error.A("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:a,expression:c,itemsNames:h}=o,y=c;let p=!1;a&&(this._dictionaryVersion=Version.R.parse(a),p=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+o.cimRefTemplateUrl,this._itemNames=new Set(h),this._symbolFields=n.symbol;const g={};if(this.config){const e=this.config;for(const t in e)g[t]=e[t]}if(n.configuration)for(const t of n.configuration)g.hasOwnProperty(t.name)||(g[t.name]=t.value);const _=[];if(e?.fields&&this.fieldMap)for(const t in this.fieldMap){const i=this.fieldMap[t],s=e.fields.filter((e=>e.name.toLowerCase()===i?.toLowerCase()));s.length>0&&_.push({...s[0],type:p?s[0].type:"esriFieldTypeString"})}_.length>0&&(this._fieldIndex=new FieldsIndex.A(_));const b=(0,arcadeOnDemand.xR)(y,null!=e?e.spatialReference:null,_,g).then((e=>{const t={scale:0};return(i,s)=>{if(null==e)return null;const r=e.repurposeFeature({geometry:null,attributes:i});return t.scale=null!=s?s.scale??void 0:void 0,e.evaluate({$feature:r,$view:t},e.services)}})).catch((e=>(Logger.A.getLogger(d).error("Creating dictionary expression failed:",e),null)));return this._dictionaryPromise=b,b}async _cimPartsToCIMSymbol(e,t,i,r,o){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=this._getSymbolPart(t[s],o);let l=await Promise.all(n);const a=this.fieldMap;if(a&&l.length>0){const{OverrideHelper:t}=await __webpack_require__.e(112).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/symbols/cim/OverrideHelper.js"));l=(0,lang.o8)(l);for(const i of l)t.applyDictionaryTextOverrides(i,e,a,this._fieldIndex,(0,utils.bs)(i))}return new CIMSymbol.A({data:b(l,i,r)})}async _getSymbolPart(e,i){const s=this._symbolCache.get(e);if(s)return s;if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const r=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),o=(0,request.A)(r,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,o),o.finally((()=>this._ongoingRequests.delete(e)));try{const t=await o;return this._symbolCache.put(e,t.data),t.data}catch(n){throw n}}}function b(e,t,i){if(!e||0===e.length)return null;const s={...e[0]};if(e.length>1){s.effects=null,s.symbolLayers=[];for(const t of e){const e=t;if(null!=e.effects)for(const t of e.symbolLayers)null==t.effects?t.effects=e.effects:t.effects.unshift(...e.effects);s.symbolLayers.unshift(...e.symbolLayers)}}return i&&(s.callout=g),{type:"CIMSymbolReference",symbol:s,primitiveOverrides:t}}var p;let c=p=class extends((0,VisualVariablesMixin.h)(Renderer.A)){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new _(this.url,this.config,this.fieldMap)}writeData(e,r){e&&(r.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,r,s,i){i?.origin||super.writeVisualVariables(e,r,s,i)}clone(){return new p({config:(0,lang.o8)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,lang.o8)(this.fieldMap),url:(0,lang.o8)(this.url),visualVariables:(0,lang.o8)(this.visualVariables)})}async getSymbolAsync(e,r){return this._loader.getSymbolAsync(e,r)}async collectRequiredFields(e,r){await this.collectVVRequiredFields(e,r),this.scaleExpression&&await(0,fieldUtils.Dx)(e,r,this.scaleExpression);for(const s in this.fieldMap){const i=this.fieldMap[s];r.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}get symbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce(((e,r)=>e+r.getAttributeHash()),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};(0,tslib_es6._)([(0,property.MZ)({type:_})],c.prototype,"_loader",null),(0,tslib_es6._)([(0,property.MZ)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],c.prototype,"config",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Object,json:{write:!0}})],c.prototype,"fieldMap",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],c.prototype,"scaleExpression",void 0),(0,tslib_es6._)([(0,writer.K)("scaleExpression")],c.prototype,"writeData",null),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],c.prototype,"scaleExpressionTitle",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],c.prototype,"url",void 0),(0,tslib_es6._)([(0,writer.K)("visualVariables")],c.prototype,"writeVisualVariables",null),c=p=(0,tslib_es6._)([(0,subclass.$)("esri.renderers.DictionaryRenderer")],c);const u=c;var n,enumeration=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),cast=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/cast.js"),ensureType=(__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"));let AttributeColorInfo_u=n=class extends JSONSupport.A{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return null==e?e:"function"==typeof e?(Logger.A.getLogger(this).error(".field: field must be a string value"),null):(0,ensureType.GX)(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new n({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,tslib_es6._)([(0,property.MZ)({type:Color.A,json:{type:[Number],write:!0}})],AttributeColorInfo_u.prototype,"color",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],AttributeColorInfo_u.prototype,"field",void 0),(0,tslib_es6._)([(0,cast.w)("field")],AttributeColorInfo_u.prototype,"castField",null),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],AttributeColorInfo_u.prototype,"label",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],AttributeColorInfo_u.prototype,"valueExpression",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],AttributeColorInfo_u.prototype,"valueExpressionTitle",void 0),AttributeColorInfo_u=n=(0,tslib_es6._)([(0,subclass.$)("esri.renderers.support.AttributeColorInfo")],AttributeColorInfo_u);const AttributeColorInfo_c=AttributeColorInfo_u;var e;let DotDensityLegendOptions_p=e=class extends JSONSupport.A{constructor(){super(...arguments),this.unit=null}clone(){return new e({unit:this.unit})}};(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],DotDensityLegendOptions_p.prototype,"unit",void 0),DotDensityLegendOptions_p=e=(0,tslib_es6._)([(0,subclass.$)("esri.renderers.support.DotDensityLegendOptions")],DotDensityLegendOptions_p);const DotDensityLegendOptions_i=DotDensityLegendOptions_p;var h,SimpleFillSymbol=__webpack_require__("./node_modules/@arcgis/core/symbols/SimpleFillSymbol.js"),SimpleLineSymbol=__webpack_require__("./node_modules/@arcgis/core/symbols/SimpleLineSymbol.js");let m=h=class extends((0,VisualVariablesMixin.h)(Renderer.A)){constructor(t){super(t),this.attributes=null,this.backgroundColor=new Color.A([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new SimpleLineSymbol.A,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(null==this.referenceScale)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new SimpleFillSymbol.A({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce(((t,e)=>t+e.getAttributeHash()),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new h({attributes:(0,lang.o8)(this.attributes),backgroundColor:(0,lang.o8)(this.backgroundColor),dotBlendingEnabled:(0,lang.o8)(this.dotBlendingEnabled),dotShape:(0,lang.o8)(this.dotShape),dotSize:(0,lang.o8)(this.dotSize),dotValue:(0,lang.o8)(this.dotValue),legendOptions:(0,lang.o8)(this.legendOptions),outline:(0,lang.o8)(this.outline),referenceScale:(0,lang.o8)(this.referenceScale),seed:(0,lang.o8)(this.seed),visualVariables:(0,lang.o8)(this.visualVariables),authoringInfo:(0,lang.o8)(this.authoringInfo)})}getControllerHash(){const t=this.attributes?.map((t=>t.field||t.valueExpression||""));return`${t}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const o of this.attributes??[])o.valueExpression&&await(0,fieldUtils.Dx)(t,e,o.valueExpression),o.field&&t.add(o.field)}};(0,tslib_es6._)([(0,property.MZ)({type:[AttributeColorInfo_c],json:{write:!0}})],m.prototype,"attributes",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Color.A,json:{write:!0}})],m.prototype,"backgroundColor",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Boolean,json:{write:!0}})],m.prototype,"dotBlendingEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!1}})],m.prototype,"dotShape",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],m.prototype,"dotSize",void 0),(0,tslib_es6._)([(0,property.MZ)({type:DotDensityLegendOptions_i,json:{write:!0}})],m.prototype,"legendOptions",void 0),(0,tslib_es6._)([(0,property.MZ)({type:SimpleLineSymbol.A,json:{default:null,write:!0}})],m.prototype,"outline",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],m.prototype,"dotValue",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],m.prototype,"referenceScale",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],m.prototype,"seed",void 0),(0,tslib_es6._)([(0,enumeration.e)({dotDensity:"dot-density"})],m.prototype,"type",void 0),m=h=(0,tslib_es6._)([(0,subclass.$)("esri.renderers.DotDensityRenderer")],m);const y=m;var screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),AuthoringInfo=__webpack_require__("./node_modules/@arcgis/core/renderers/support/AuthoringInfo.js"),HeatmapColorStop=__webpack_require__("./node_modules/@arcgis/core/renderers/support/HeatmapColorStop.js"),Clonable=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js");let HeatmapLegendOptions_p=class extends(Clonable.A.ClonableMixin(JSONSupport.A)){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],HeatmapLegendOptions_p.prototype,"minLabel",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],HeatmapLegendOptions_p.prototype,"maxLabel",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],HeatmapLegendOptions_p.prototype,"title",void 0),HeatmapLegendOptions_p=(0,tslib_es6._)([(0,subclass.$)("esri.renderers.support.HeatmapLegendOptions")],HeatmapLegendOptions_p);var HeatmapRenderer_g,heatmapUtils=__webpack_require__("./node_modules/@arcgis/core/renderers/support/heatmapUtils.js"),SimpleMarkerSymbol=__webpack_require__("./node_modules/@arcgis/core/symbols/SimpleMarkerSymbol.js");function f(t){if(null!=t){const{maxDensity:e,minDensity:i,radius:s}=t;if(null!=e||null!=i||null!=s){const{blurRadius:e,maxPixelIntensity:i,minPixelIntensity:s,...r}=t;return r}}return t}let w=HeatmapRenderer_g=class extends Renderer.A{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new HeatmapColorStop.A({ratio:0,color:new Color.A("rgba(255, 140, 0, 0)")}),new HeatmapColorStop.A({ratio:.75,color:new Color.A("rgba(255, 140, 0, 1)")}),new HeatmapColorStop.A({ratio:.9,color:new Color.A("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(t){return f(t)}get blurRadius(){return(0,heatmapUtils.PU)(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",(0,heatmapUtils.zp)(t)),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(heatmapUtils.ex**2*this.blurRadius**4)}read(t,e){t=f(t),super.read(t,e)}getSymbol(){return new SimpleMarkerSymbol.A}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,s=this.valueExpression;i&&"string"==typeof i&&(0,fieldUtils.rq)(t,e,i),s&&"string"==typeof s&&await(0,fieldUtils.Dx)(t,e,s)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new HeatmapRenderer_g({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:(0,lang.o8)(this.colorStops),field:this.field,legendOptions:(0,lang.o8)(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,tslib_es6._)([(0,property.MZ)({type:AuthoringInfo.A,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],w.prototype,"authoringInfo",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],w.prototype,"blurRadius",null),(0,tslib_es6._)([(0,property.MZ)({type:[HeatmapColorStop.A],json:{write:{isRequired:!0}}})],w.prototype,"colorStops",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],w.prototype,"field",void 0),(0,tslib_es6._)([(0,property.MZ)({type:HeatmapLegendOptions_p,json:{write:!0}})],w.prototype,"legendOptions",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],w.prototype,"maxDensity",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],w.prototype,"maxPixelIntensity",null),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],w.prototype,"minDensity",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],w.prototype,"minPixelIntensity",null),(0,tslib_es6._)([(0,property.MZ)({type:Number,cast:screenUtils.cr,json:{write:!0}})],w.prototype,"radius",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,range:{min:0},json:{default:0,write:!0}})],w.prototype,"referenceScale",void 0),(0,tslib_es6._)([(0,enumeration.e)({heatmap:"heatmap"})],w.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],w.prototype,"valueExpression",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String})],w.prototype,"valueExpressionTitle",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],w.prototype,"_pixelIntensityToDensity",null),w=HeatmapRenderer_g=(0,tslib_es6._)([(0,subclass.$)("esri.renderers.HeatmapRenderer")],w);const HeatmapRenderer_b=w;var arrayUtils=__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),commonProperties=__webpack_require__("./node_modules/@arcgis/core/renderers/support/commonProperties.js");let OthersCategory_i=class extends(Clonable.A.ClonableMixin(JSONSupport.A)){constructor(){super(...arguments),this.color=new Color.A([0,0,0,0]),this.label=null,this.threshold=0}};(0,tslib_es6._)([(0,property.MZ)({type:Color.A,json:{write:!0}})],OthersCategory_i.prototype,"color",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],OthersCategory_i.prototype,"label",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,range:{min:0,max:1},json:{write:!0}})],OthersCategory_i.prototype,"threshold",void 0),OthersCategory_i=(0,tslib_es6._)([(0,subclass.$)("esri.renderers.support.OthersCategory")],OthersCategory_i);var RendererLegendOptions=__webpack_require__("./node_modules/@arcgis/core/renderers/support/RendererLegendOptions.js"),OpacityVariable=__webpack_require__("./node_modules/@arcgis/core/renderers/visualVariables/OpacityVariable.js"),SizeVariable=__webpack_require__("./node_modules/@arcgis/core/renderers/visualVariables/SizeVariable.js");const v={base:__webpack_require__("./node_modules/@arcgis/core/renderers/visualVariables/VisualVariable.js").A,key:"type",typeMap:{size:SizeVariable.A,opacity:OpacityVariable.A}};let S=class extends((0,VisualVariablesMixin.h)(Clonable.A.ClonableMixin(Renderer.A))){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Color.A([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new OthersCategory_i,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new SimpleMarkerSymbol.A({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}get symbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(arrayUtils.Ru)}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return this.symbols.reduce(((e,t)=>e+JSON.stringify(t)),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await(0,fieldUtils.Dx)(e,t,r.valueExpression),r.field&&e.add(r.field)}};(0,tslib_es6._)([(0,property.MZ)({type:[AttributeColorInfo_c],json:{write:!0}})],S.prototype,"attributes",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.As)],S.prototype,"backgroundFillSymbol",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Color.A,json:{write:!0}})],S.prototype,"defaultColor",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],S.prototype,"defaultLabel",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,range:{min:0,max:1},json:{write:!0}})],S.prototype,"holePercentage",void 0),(0,tslib_es6._)([(0,property.MZ)({type:OthersCategory_i,json:{write:!0}})],S.prototype,"othersCategory",void 0),(0,tslib_es6._)([(0,property.MZ)({type:RendererLegendOptions.A,json:{write:!0}})],S.prototype,"legendOptions",void 0),(0,tslib_es6._)([(0,property.MZ)({type:SimpleLineSymbol.A,json:{default:null,write:!0}})],S.prototype,"outline",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,cast:screenUtils.cr,json:{write:!0}})],S.prototype,"size",void 0),(0,tslib_es6._)([(0,enumeration.e)({pieChart:"pie-chart"})],S.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)({types:[v]})],S.prototype,"visualVariables",void 0),S=(0,tslib_es6._)([(0,subclass.$)("esri.renderers.PieChartRenderer")],S);const PieChartRenderer_w=S;var SimpleRenderer=__webpack_require__("./node_modules/@arcgis/core/renderers/SimpleRenderer.js"),UniqueValueRenderer=__webpack_require__("./node_modules/@arcgis/core/renderers/UniqueValueRenderer.js");const typeUtils_m={key:"type",base:Renderer.A,typeMap:{heatmap:HeatmapRenderer_b,simple:SimpleRenderer.A,"unique-value":UniqueValueRenderer.A,"class-breaks":ClassBreaksRenderer.A,"dot-density":y,dictionary:u,"pie-chart":PieChartRenderer_w},errorContext:"renderer"},typeUtils_u={key:"type",base:Renderer.A,typeMap:{simple:SimpleRenderer.A,"unique-value":UniqueValueRenderer.A,"class-breaks":ClassBreaksRenderer.A,heatmap:HeatmapRenderer_b},errorContext:"renderer",validate:function typeUtils_c(e){switch(e.type){case"simple":return function typeUtils_f(r){if(r.symbol)return r;Logger.A.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}(e);case"unique-value":return function typeUtils_d(r){const t=r.uniqueValueInfos,s=t?.filter((({symbol:r,label:t},s)=>(r||Logger.A.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${t}) without a symbol from web scene.`),!!r)));return s?.length!==t?.length&&(r.uniqueValueInfos=s),r}(e);case"class-breaks":return function typeUtils_y(r){const t=r.classBreakInfos,s=t?.filter((({symbol:r,label:t},s)=>(r||Logger.A.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${t}) without a symbol from web scene.`),!!r)));return s?.length!==t?.length&&(r.classBreakInfos=s),r}(e);case"heatmap":return e}}}}}]);