"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[8297],{"./node_modules/@arcgis/core/chunks/RibbonLine.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>F,b:()=>C,r:()=>j});var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_attributes_RibbonVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_MarkerSizing_glsl_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_PiUtils_glsl_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js"),_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_views_3d_webgl_engine_core_shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2BindUniform.js"),_views_3d_webgl_engine_core_shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4BindUniform.js"),_views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),_views_3d_webgl_engine_core_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js"),_views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js"),_views_3d_webgl_engine_core_shaderModules_Matrix4BindUniform_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4BindUniform.js"),_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),_views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js"),_views_3d_webgl_engine_shaders_OutputColorHighlightOID_glsl_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js"),_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js"),_views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/ShaderBuilder.js"),_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./node_modules/@arcgis/core/webscene/support/AlphaCutoff.js");const j=1;function C(C){const F=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_20__.N5,{attributes:P,varyings:R,vertex:z,fragment:A}=F,{applyMarkerOffset:T,draped:V,output:O,capType:W,stippleEnabled:E,falloffEnabled:I,roundJoins:N,wireframe:M,innerColorEnabled:_}=C;F.include(_views_3d_webgl_engine_core_shaderLibrary_shading_PiUtils_glsl_js__WEBPACK_IMPORTED_MODULE_21__.p),F.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_RibbonVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_3__.s,C),F.include(_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_4__.q,C),F.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_2__.g,C),F.include(_views_3d_webgl_engine_core_shaderLibrary_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_6__.Z,C);const k=T&&!V;k&&(z.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__.m("markerScale",(e=>e.markerScale))),F.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MarkerSizing_glsl_js__WEBPACK_IMPORTED_MODULE_5__.r,{space:_views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_17__.lM.World})),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_8__.NB)(z,C),z.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Matrix4BindUniform_js__WEBPACK_IMPORTED_MODULE_15__.F("inverseProjectionMatrix",(e=>e.camera.inverseProjectionMatrix)),new _views_3d_webgl_engine_core_shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_9__.E("nearFar",(e=>e.camera.nearFar)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__.m("miterLimit",(e=>"miter"!==e.join?0:e.miterLimit)),new _views_3d_webgl_engine_core_shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_10__.I("viewport",(e=>e.camera.fullViewport))),z.constants.add("LARGE_HALF_FLOAT","float",65500),P.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__.r.POSITION,"vec3"),P.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__.r.PREVPOSITION,"vec3"),P.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__.r.NEXTPOSITION,"vec3"),P.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__.r.SUBDIVISIONFACTOR,"float"),P.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__.r.UV0,"vec2"),R.add("vColor","vec4"),R.add("vpos","vec3"),R.add("vLineDistance","float"),R.add("vLineWidth","float");const B=E;B&&R.add("vLineSizeInv","float");const U=W===_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_19__.x.ROUND,$=E&&U,H=I||$;H&&R.add("vLineDistanceNorm","float"),U&&(R.add("vSegmentSDF","float"),R.add("vReverseSegmentSDF","float")),z.code.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`vec2 perpendicular(vec2 v) {
return vec2(v.y, -v.x);
}
float interp(float ncp, vec4 a, vec4 b) {
return (-ncp - a.z) / (b.z - a.z);
}
vec2 rotate(vec2 v, float a) {
float s = sin(a);
float c = cos(a);
mat2 m = mat2(c, -s, s, c);
return m * v;
}`),z.code.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= viewport.zw / posNdc.w;
return posNdc;
}`),z.code.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
float vnp = nearFar[0] * 0.99;
if(pos.z > -nearFar[0]) {
if (!isStartVertex) {
if(prev.z < -nearFar[0]) {
pos = mix(prev, pos, interp(vnp, prev, pos));
next = pos;
} else {
pos = vec4(0.0, 0.0, 0.0, 1.0);
}
} else {
if(next.z < -nearFar[0]) {
pos = mix(pos, next, interp(vnp, pos, next));
prev = pos;
} else {
pos = vec4(0.0, 0.0, 0.0, 1.0);
}
}
} else {
if (prev.z > -nearFar[0]) {
prev = mix(pos, prev, interp(vnp, pos, prev));
}
if (next.z > -nearFar[0]) {
next = mix(next, pos, interp(vnp, next, pos));
}
}
forwardViewPosDepth(pos.xyz);
pos = projectAndScale(pos);
next = projectAndScale(next);
prev = projectAndScale(prev);
}`),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_8__.Nz)(z),z.constants.add("aaWidth","float",E?0:1).main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`
    // unpack values from uv0.y
    bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;

    float coverage = 1.0;

    // Check for special value of uv0.y which is used by the Renderer when graphics
    // are removed before the VBO is recompacted. If this is the case, then we just
    // project outside of clip space.
    if (uv0.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isJoin = abs(uv0.y) < 3.0;
      float lineSize = getSize();

      if (lineSize < 1.0) {
        coverage = lineSize; // convert sub-pixel coverage to alpha
        lineSize = 1.0;
      }
      lineSize += aaWidth;

      float lineWidth = lineSize * pixelRatio;
      vLineWidth = lineWidth;
      ${B?_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`vLineSizeInv = 1.0 / lineSize;`:""}

      vec4 pos  = view * vec4(position, 1.0);
      vec4 prev = view * vec4(prevPosition, 1.0);
      vec4 next = view * vec4(nextPosition, 1.0);
  `),k&&z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`vec4 other = isStartVertex ? next : prev;
bool markersHidden = areWorldMarkersHidden(pos, other);
if(!isJoin && !markersHidden) {
pos.xyz += normalize(other.xyz - pos.xyz) * getWorldMarkerSize(pos) * 0.5;
}`),z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`clipAndTransform(pos, prev, next, isStartVertex);
vec2 left = (pos.xy - prev.xy);
vec2 right = (next.xy - pos.xy);
float leftLen = length(left);
float rightLen = length(right);`),(E||U)&&z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`
      float isEndVertex = float(!isStartVertex);
      vec2 segmentOrigin = mix(pos.xy, prev.xy, isEndVertex);
      vec2 segment = mix(right, left, isEndVertex);
      ${U?_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`vec2 segmentEnd = mix(next.xy, pos.xy, isEndVertex);`:""}
    `),z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);
vec2 capDisplacementDir = vec2(0, 0);
vec2 joinDisplacementDir = vec2(0, 0);
float displacementLen = lineWidth;
if (isJoin) {
bool isOutside = (left.x * right.y - left.y * right.x) * uv0.y > 0.0;
joinDisplacementDir = normalize(left + right);
joinDisplacementDir = perpendicular(joinDisplacementDir);
if (leftLen > 0.001 && rightLen > 0.001) {
float nDotSeg = dot(joinDisplacementDir, left);
displacementLen /= length(nDotSeg * left - joinDisplacementDir);
if (!isOutside) {
displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
}
}
if (isOutside && (displacementLen > miterLimit * lineWidth)) {`),N?z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`
        vec2 startDir = leftLen < 0.001 ? right : left;
        startDir = perpendicular(startDir);

        vec2 endDir = rightLen < 0.001 ? left : right;
        endDir = perpendicular(endDir);

        float factor = ${E?_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`min(1.0, subdivisionFactor * ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H.float((j+2)/(j+1))})`:_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`subdivisionFactor`};

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * factor * rotationAngle);
      `):z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`if (leftLen < 0.001) {
joinDisplacementDir = right;
}
else if (rightLen < 0.001) {
joinDisplacementDir = left;
}
else {
joinDisplacementDir = (isStartVertex || subdivisionFactor > 0.0) ? right : left;
}
joinDisplacementDir = perpendicular(joinDisplacementDir);`);const J=W!==_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_19__.x.BUTT;return z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`
        displacementLen = lineWidth;
      }
    } else {
      // CAP handling ---------------------------------------------------
      joinDisplacementDir = isStartVertex ? right : left;
      joinDisplacementDir = perpendicular(joinDisplacementDir);

      ${J?_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`capDisplacementDir = isStartVertex ? -right : left;`:""}
    }
  `),z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`
    // Displacement (in pixels) caused by join/or cap
    vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;
    float lineDistNorm = sign(uv0.y) * pos.w;

    vLineDistance =  lineWidth * lineDistNorm;
    ${H?_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`vLineDistanceNorm = lineDistNorm;`:""}

    pos.xy += dpos;
  `),U&&z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`vec2 segmentDir = normalize(segment);
vSegmentSDF = (isJoin && isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentOrigin, segmentDir) * pos.w) ;
vReverseSegmentSDF = (isJoin && !isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentEnd, -segmentDir) * pos.w);`),E&&(V?z.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_12__.U("worldToScreenRatio",(e=>1/e.screenToPCSRatio))):z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`vec3 segmentCenter = mix((nextPosition + position) * 0.5, (position + prevPosition) * 0.5, isEndVertex);
float worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`float segmentLengthScreenDouble = length(segment);
float segmentLengthScreen = segmentLengthScreenDouble * 0.5;
float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);
float segmentLengthRender = length(mix(nextPosition - position, position - prevPosition, isEndVertex));
vStipplePatternStretch = worldToScreenRatio / discreteWorldToScreenRatio;`),V?z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`float segmentLengthPseudoScreen = segmentLengthScreen / pixelRatio * discreteWorldToScreenRatio / worldToScreenRatio;
float startPseudoScreen = uv0.x * discreteWorldToScreenRatio - mix(0.0, segmentLengthPseudoScreen, isEndVertex);`):z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`float startPseudoScreen = mix(uv0.x, uv0.x - segmentLengthRender, isEndVertex) * discreteWorldToScreenRatio;
float segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),z.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__.m("stipplePatternPixelSize",(e=>(0,_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_4__.h)(e)))),z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`float patternLength = lineSize * stipplePatternPixelSize;
vStippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, segmentLengthScreen, patternLength);
vStippleDistance = mix(vStippleDistanceLimits.x, vStippleDistanceLimits.y, isEndVertex);
if (segmentLengthScreenDouble >= 0.001) {
vec2 stippleDisplacement = pos.xy - segmentOrigin;
float stippleDisplacementFactor = dot(segment, stippleDisplacement) / (segmentLengthScreenDouble * segmentLengthScreenDouble);
vStippleDistance += (stippleDisplacementFactor - isEndVertex) * (vStippleDistanceLimits.y - vStippleDistanceLimits.x);
}
vStippleDistanceLimits *= pos.w;
vStippleDistance *= pos.w;
vStippleDistanceLimits = isJoin ?
vStippleDistanceLimits :
isStartVertex ?
vec2(-1e34, vStippleDistanceLimits.y) :
vec2(vStippleDistanceLimits.x, 1e34);`)),z.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`
      // Convert back into NDC
      pos.xy = (pos.xy / viewport.zw) * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      ${M&&!V?"pos.z -= 0.001 * pos.w;":""}

      // transform final position to camera space for slicing
      vpos = (inverseProjectionMatrix * pos).xyz;
      gl_Position = pos;
      forwardObjectAndLayerIdColor();
    }`),F.fragment.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__.HQ,C),F.include(_views_3d_webgl_engine_shaders_OutputColorHighlightOID_glsl_js__WEBPACK_IMPORTED_MODULE_18__.z,C),A.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_7__.a),A.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`discardBySlice(vpos);
discardByTerrainDepth();`),M?A.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`vec4 finalColor = vec4(1.0, 0.0, 1.0, 1.0);`):(U&&A.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`
        float sdf = min(vSegmentSDF, vReverseSegmentSDF);
        vec2 fragmentPosition = vec2(
          min(sdf, 0.0),
          vLineDistance
        ) * gl_FragCoord.w;

        float fragmentRadius = length(fragmentPosition);
        float fragmentCapSDF = (fragmentRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
        float capCoverage = clamp(0.5 - fragmentCapSDF, 0.0, 1.0);

        if (capCoverage < ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.Q)}) {
          discard;
        }
      `),$?A.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`
      vec2 stipplePosition = vec2(
        min(getStippleSDF() * 2.0 - 1.0, 0.0),
        vLineDistanceNorm * gl_FragCoord.w
      );
      float stippleRadius = length(stipplePosition * vLineWidth);
      float stippleCapSDF = (stippleRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float stippleCoverage = clamp(0.5 - stippleCapSDF, 0.0, 1.0);
      float stippleAlpha = step(${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.Q)}, stippleCoverage);
      `):A.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`float stippleAlpha = getStippleAlpha();`),O!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__.V.ObjectAndLayerIdColor&&A.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`discardByStippleAlpha(stippleAlpha, ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__.Q)});`),A.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_11__.E("intrinsicColor",(e=>e.color))),A.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`vec4 color = intrinsicColor * vColor;`),_&&(A.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_11__.E("innerColor",(e=>e.innerColor??e.color)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__.m("innerWidth",((e,i)=>e.innerWidth*i.camera.pixelRatio))),A.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`)),A.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`vec4 finalColor = blendStipple(color, stippleAlpha);`),I&&(A.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__.m("falloff",(e=>e.falloff))),A.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);`)),E||A.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`float featherStartDistance = max(vLineWidth - 2.0, 0.0);
float value = abs(vLineDistance) * gl_FragCoord.w;
float feather = (value - featherStartDistance) / (vLineWidth - featherStartDistance);
finalColor.a *= 1.0 - clamp(feather, 0.0, 1.0);`)),A.main.add(_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__.H`outputColorHighlightOID(finalColor, vpos);`),F}const F=Object.freeze(Object.defineProperty({__proto__:null,build:C,ribbonlineNumRoundJoinSubdivisions:j},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/core/MemCache.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>h,Ti:()=>e});var _PooledArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/PooledArray.js");const e=-3,i=e-1;var s;!function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"}(s||(s={}));class h{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_0__.A,this._users=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_0__.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear()}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,e){const i=this._db.get(t.id+e);return i?.size??0}put(t,r,h,o,_){r=t.id+r;const a=this._db.get(r);if(a&&(this._size-=a.size,t.size-=a.size,this._db.delete(r),a.entry!==h&&this._notifyRemove(r,a.entry,a.size,s.ALL)),o>this._maxSize)return void this._notifyRemove(r,h,o,s.ALL);if(void 0===h)return void console.warn("Refusing to cache undefined entry ");if(!o||o<0)return console.warn(`Refusing to cache entry with size ${o} for key ${r}`),void this._notifyRemove(r,h,0,s.ALL);const c=1+Math.max(_,i)-e;this._db.set(r,new n(h,o,c)),this._size+=o,t.size+=o,this._checkSize()}updateSize(t,e,i,r){e=t.id+e;const h=this._db.get(e);if(h&&h.entry===i){for(this._size-=h.size,t.size-=h.size;r>this._maxSize;){const t=this._notifyRemove(e,i,r,s.SOME);if(!(null!=t&&t>0))return void this._db.delete(e);r=t}h.size=r,this._size+=r,t.size+=r,this._checkSize()}}pop(t,e){e=t.id+e;const i=this._db.get(e);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(e),++this._hit,i.entry;++this._miss}get(t,e){e=t.id+e;const i=this._db.get(e);if(void 0!==i)return this._db.delete(e),i.lives=i.lifetime,this._db.set(e,i),++this._hit,i.entry;++this._miss}peek(t,e){const i=this._db.get(t.id+e);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},s=new Array;this._db.forEach(((t,e)=>{const r=t.lifetime;s[r]=(s[r]||0)+t.size,this._users.forAll((s=>{const{id:r,name:h}=s;if(e.startsWith(r)){const e=i[h]||0;i[h]=e+t.size}}))}));const r={};this._users.forAll((t=>{const e=t.name;if("hitRate"in t&&"number"==typeof t.hitRate&&!isNaN(t.hitRate)&&t.hitRate>0){const s=i[e]||0;i[e]=s,r[e]=Math.round(100*t.hitRate)+"%"}else r[e]="0%"}));const h=Object.keys(i);h.sort(((t,e)=>i[e]-i[t])),h.forEach((e=>t[e]=Math.round(i[e]/2**20)+"MB / "+r[e]));for(let o=s.length-1;o>=0;--o){const i=s[o];i&&(t["Priority "+(o+e-1)]=Math.round(i/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){const e=t.id;this._db.forEach(((t,i)=>{i.startsWith(e)&&(this._size-=t.size,this._db.delete(i),this._notifyRemove(i,t.entry,t.size,s.ALL))})),t.size=0}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,t.size,s.ALL))),this._users.forAll((t=>t.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,i,s){let r;return this._removeFuncs.some((h=>{if(t.startsWith(h[0])){const t=h[1](e,s,i);return"number"==typeof t&&(r=t),!0}return!1})),r}_checkSize(){this._users.forAll((t=>this._checkSizeLimits(t))),this._checkSizeLimits()}_checkSizeLimits(t){const e=t??this;if(e.maxSize<0||e.size<=e.maxSize)return;const i=t?.id;let s=!0;for(;s;){s=!1;for(const[r,h]of this._db)if(0===h.lifetime&&(!i||r.startsWith(i))){if(this._purgeItem(r,h,t),e.size<=.9*e.maxSize)return;s||=this._db.has(r)}}for(const[r,h]of this._db)if((!i||r.startsWith(i))&&(this._purgeItem(r,h,t),e.size<=.9*e.maxSize))return}_purgeItem(t,e,i=this._users.find((e=>t.startsWith(e.id)))){if(this._db.delete(t),e.lives<=1){this._size-=e.size,i&&(i.size-=e.size);const r=this._notifyRemove(t,e.entry,e.size,s.SOME);null!=r&&r>0&&(this._size+=r,i&&(i.size+=r),e.lives=e.lifetime,e.size=r,this._db.set(t,e))}else--e.lives,this._db.set(t,e)}}class n{constructor(t,e,i){this.entry=t,this.size=e,this.lifetime=i,this.lives=i}}},"./node_modules/@arcgis/core/core/memoryEstimations.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Qf:()=>i,Qh:()=>u,RS:()=>n,ez:()=>a,i5:()=>y,lM:()=>e,qK:()=>s});var _typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/typedArrayUtil.js");const n=16;function e(r){if(!r)return 0;let t=s;for(const n in r)r.hasOwnProperty(n)&&(t+=f(r[n],!1));return t}function u(r){if(!r)return 0;if("number"==typeof r[0])return i(r);if(Array.isArray(r))return function o(r){const t=r.length;if(0===t||"number"==typeof r[0])return c(r,8);let n=a;for(let e=0;e<t;e++)n+=f(r[e]);return n}(r);let t=s;for(const n in r)r.hasOwnProperty(n)&&(t+=f(r[n]));return t}function f(r,e=!0){switch(typeof r){case"object":return e?u(r):s;case"string":return function t(r){return 32+r.length}(r);case"number":return n;case"boolean":return 4;default:return 8}}function i(...t){return t.reduce(((t,e)=>t+(e?(0,_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__.iu)(e)?e.byteLength+y:Array.isArray(e)?c(e,n):0:0)),0)}function c(r,t){return a+r.length*t}const s=32,a=16,y=145},"./node_modules/@arcgis/core/intl/messages.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ao:()=>h,ud:()=>f,xO:()=>p});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/handleUtils.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_locale_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/intl/locale.js");const o=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,i={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function c(t){if(function a(t){return t in i}(t)){const n=i[t];return!0===n?t:n}return null}const d=[],l=new Map;function u(t){for(const n of l.keys())_(t.pattern,n)&&l.delete(n)}function h(t){return d.includes(t)||(u(t),d.unshift(t)),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_1__.hA)((()=>{const n=d.indexOf(t);n>-1&&(d.splice(n,1),u(t))}))}async function f(t){const n=(0,_locale_js__WEBPACK_IMPORTED_MODULE_3__.JK)();l.has(t)||l.set(t,async function m(n,e){const r=[];for(const t of d)if(_(t.pattern,n))try{return await t.fetchMessageBundle(n,e)}catch(s){r.push(s)}if(r.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.A("intl:message-bundle-error",`Errors occurred while loading "${n}"`,{errors:r});throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.A("intl:no-message-bundle-loader",`No loader found for message bundle "${n}"`)}(t,n));const e=l.get(t);return e&&await g.add(e),e}function p(t){if(!o.test(t))return null;const n=o.exec(t);if(null===n)return null;const[,e,r]=n;return c(e+(r?"-"+r.toUpperCase():""))??c(e)}function _(t,n){return"string"==typeof t?n.startsWith(t):t.test(n)}(0,_locale_js__WEBPACK_IMPORTED_MODULE_3__.Ml)((()=>{l.clear()}));const g=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.Tw)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},"./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureComparison.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CI:()=>a,fk:()=>i});__webpack_require__("./node_modules/@arcgis/core/core/has.js");var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");function a(e,t){return e===t||null!=e&&null!=t&&(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__.aI)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function i(t,r,a){return t===r||null!=t&&null!=r&&(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__.aI)(t.spatialReference,r.spatialReference)&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__.Sp)(t.x,r.x,a)&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__.Sp)(t.y,r.y,a)&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__.Sp)(t.z??0,r.z??0,a)&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__.Sp)(t.m??0,r.m??0,a)}},"./node_modules/@arcgis/core/views/3d/layers/graphics/ElevationContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>o});var _symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/symbols/support/unitConversionUtils.js"),_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js");class o{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__.Ao)(e)}get requiresSampledElevationInfo(){return"absolute-height"!==this.mode}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}set offsetMeters(t){this._meterUnitOffset=t,this._renderUnitOffset=0}set offsetElevationInfoUnits(t){this._meterUnitOffset=t*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(t){this._renderUnitOffset+=t}geometryZWithOffset(t,e){const n=this.calculateOffsetRenderUnits(e);return null!=this.featureExpressionInfoContext?n:t+n}calculateOffsetRenderUnits(t){let e=this._meterUnitOffset;const s=this.featureExpressionInfoContext;return null!=s&&(e+=(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.g7)(s)*this._metersPerElevationInfoUnit),e/t.unitInMeters+this._renderUnitOffset}setFromElevationInfo(t){this.mode=t.mode,this.unit=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__.Tg)(t.unit)?t.unit:"meters",this.offsetElevationInfoUnits=t.offset??0}updateFeatureExpressionInfoContext(t,e,n){if(null==t)return void(this._featureExpressionInfoContext=null);const o=t?.arcade;o&&null!=e&&null!=n?(this._featureExpressionInfoContext=(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.o8)(t),(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.gf)(this._featureExpressionInfoContext,(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__.VG)(o.modules,e,n))):this._featureExpressionInfoContext=t}static fromElevationInfo(t){const e=new o;return null!=t&&e.setFromElevationInfo(t),e}}},"./node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I2:()=>m,Kf:()=>g,Uk:()=>R,ai:()=>E,au:()=>u,fe:()=>p,nG:()=>f,nu:()=>d,sE:()=>c,uw:()=>b});var b,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js"),_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js"),_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js"),_geometry_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/computeTranslationToOriginAndRotation.js"),_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectBuffer.js"),_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureUtils.js"),_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/ElevationProvider.js"),_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");function u(e,t,n,o,i,a,s,l,u,c,f){const m=x[f.mode];let d,g,p=0;if((0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__.projectBuffer)(e,t,n,o,u.spatialReference,i,l))return m?.requiresAlignment(f)?(p=m.applyElevationAlignmentBuffer(o,i,a,s,l,u,c,f),d=a,g=s):(d=o,g=i),(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__.projectBuffer)(d,u.spatialReference,g,a,c.spatialReference,s,l)?p:void 0}function c(e,t,n,o,r){const l=((0,_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_6__.v)(e)?e.z:(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__.cN)(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case"on-the-ground":{const n=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__.R1)(t,e,"ground")??0;return r.verticalDistanceToGround=0,r.sampledElevation=n,void(r.z=n)}case"relative-to-ground":{const i=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__.R1)(t,e,"ground")??0,a=n.geometryZWithOffset(l,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case"relative-to-scene":{const i=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__.R1)(t,e,"scene")??0,a=n.geometryZWithOffset(l,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case"absolute-height":{const i=n.geometryZWithOffset(l,o),a=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__.R1)(t,e,"ground")??0;return r.verticalDistanceToGround=i-a,r.sampledElevation=a,void(r.z=i)}default:return void(r.z=0)}}function f(e,t,n,o){return c(e,t,n,o,D),D.z}function m(e,t,n){return"on-the-ground"===t&&"on-the-ground"===n?e.staysOnTheGround:t===n||"on-the-ground"!==t&&"on-the-ground"!==n?null==t||null==n?e.definedChanged:b.UPDATE:e.onTheGroundChanged}function d(e){return"relative-to-ground"===e||"relative-to-scene"===e}function g(e){return"absolute-height"!==e}function p(t,n,r,i,a){c(n,r,a,i,D),E(t,D.verticalDistanceToGround);const s=D.sampledElevation,l=(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__.C)(C,t.transformation);return O[0]=n.x,O[1]=n.y,O[2]=D.z,(0,_geometry_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_3__.l)(n.spatialReference,O,l,i.spatialReference)?t.transformation=l:console.warn("Could not locate symbol object properly, it might be misplaced"),s}function E(e,t){for(let n=0;n<e.geometries.length;++n){const o=e.geometries[n].getMutableAttribute(_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.r.CENTEROFFSETANDDISTANCE);o&&o.data[3]!==t&&(o.data[3]=t,e.geometryVertexAttributeUpdated(e.geometries[n],_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.r.CENTEROFFSETANDDISTANCE))}}class R{constructor(){this.verticalDistanceToGround=0,this.sampledElevation=0,this.z=0}}!function(e){e[e.NONE=0]="NONE",e[e.UPDATE=1]="UPDATE",e[e.RECREATE=2]="RECREATE"}(b||(b={}));const x={"absolute-height":{applyElevationAlignmentBuffer:function y(e,t,n,o,r,i,a,s){const l=s.calculateOffsetRenderUnits(a),u=s.featureExpressionInfoContext;t*=3,o*=3;for(let c=0;c<r;++c){const r=e[t],i=e[t+1],a=e[t+2];n[o]=r,n[o+1]=i,n[o+2]=null==u?a+l:l,t+=3,o+=3}return 0},requiresAlignment:function T(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}},"on-the-ground":{applyElevationAlignmentBuffer:function v(e,t,n,o,r,i){let a=0;const s=i.spatialReference;t*=3,o*=3;for(let l=0;l<r;++l){const r=e[t],l=e[t+1],u=e[t+2],c=i.getElevation(r,l,u,s,"ground")??0;a+=c,n[o]=r,n[o+1]=l,n[o+2]=c,t+=3,o+=3}return a/r},requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:function h(e,t,n,o,r,i,a,s){let l=0;const u=s.calculateOffsetRenderUnits(a),c=s.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let m=0;m<r;++m){const r=e[t],a=e[t+1],s=e[t+2],m=i.getElevation(r,a,s,f,"ground")??0;l+=m,n[o]=r,n[o+1]=a,n[o+2]=null==c?s+m+u:m+u,t+=3,o+=3}return l/r},requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:function A(e,t,n,o,r,i,a,s){let l=0;const u=s.calculateOffsetRenderUnits(a),c=s.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let m=0;m<r;++m){const r=e[t],a=e[t+1],s=e[t+2],m=i.getElevation(r,a,s,f,"scene")??0;l+=m,n[o]=r,n[o+1]=a,n[o+2]=null==c?s+m+u:m+u,t+=3,o+=3}return l/r},requiresAlignment:()=>!0}},C=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.vt)(),D=new R,O=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.vt)()},"./node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{KF:()=>f,MF:()=>d,VG:()=>s,g7:()=>i,gf:()=>l,o8:()=>o,q6:()=>a});var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js"),_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/support/arcadeOnDemand.js");const c=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__.A.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function o(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}async function a(e,r,c,o){const u=e?.expression;if("string"!=typeof u)return null;const a=m(u);if(null!=a)return{cachedResult:a};const s=await(0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_3__.lw)();(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.Te)(c);const l=s.arcadeUtils,i=l.createSyntaxTree(u);return l.dependsOnView(i)?(null!=o&&o.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:l.createFunction(i),context:l.createExecContext(null,{sr:r}),modules:s}}}function s(e,t,r){return e.arcadeUtils.createFeature(t.attributes,t.geometry,r)}function l(e,t){if(null!=e&&!p(e)){if(!t||!e.arcade)return void c().errorOncePerTick("Arcade support required but not provided");const n=t;n._geometry&&(n._geometry=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__.wZ)(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function i(e){if(null!=e){if(p(e))return e.cachedResult;const t=e.arcade;let r=t?.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof r&&(e.cachedResult=0,r=0),r}return 0}function d(e,t=!1){let r=e?.featureExpressionInfo;const n=r?.expression;return t||"0"===n||(r=null),r??null}const f={cachedResult:0};function p(e){return null!=e.cachedResult}function m(e){return"0"===e?0:null}},"./node_modules/@arcgis/core/views/3d/layers/interfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var e,a,t;__webpack_require__.d(__webpack_exports__,{O7:()=>a,Om:()=>e,sv:()=>t}),function(e){e[e.RasterImage=0]="RasterImage",e[e.Features=1]="Features"}(e||(e={})),function(e){e[e.MapLayer=0]="MapLayer",e[e.ViewLayer=1]="ViewLayer",e[e.Outline=2]="Outline",e[e.SnappingHint=3]="SnappingHint"}(a||(a={})),function(e){e[e.WithRasterImage=0]="WithRasterImage",e[e.WithoutRasterImage=1]="WithoutRasterImage"}(t||(t={}))},"./node_modules/@arcgis/core/views/3d/support/ElevationProvider.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R1:()=>a,aY:()=>r,cN:()=>t});var _layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/layers/graphics/dehydratedFeatureUtils.js");class r{constructor(e,r=null,t=0){this.array=e,this.spatialReference=r,this.offset=t}}function t(e){return"array"in e}function a(r,a,n="ground"){if((0,_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_0__.v)(a))return r.getElevation(a.x,a.y,a.z||0,a.spatialReference,n);if(t(a)){let e=a.offset;return r.getElevation(a.array[e++],a.array[e++],a.array[e]||0,a.spatialReference??r.spatialReference,n)}return r.getElevation(a[0],a[1],a[2]||0,r.spatialReference,n)}},"./node_modules/@arcgis/core/views/3d/support/engineContent/marker.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cz:()=>s,DZ:()=>w,PV:()=>p,vO:()=>m});__webpack_require__("./node_modules/@arcgis/core/views/3d/support/engineContent/sdfPrimitives.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");const m=64,s=m/2,n=s/5,p=m/n,w=.25},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>c});var _shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js"),_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js"),_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),_shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatsPassUniform.js"),_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js"),_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");const o=8;function c(c,s){const l=c.vertex;l.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__.m("intrinsicWidth",(t=>t.width))),s.vvSize?(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.r.SIZEFEATUREATTRIBUTE,"float"),l.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.t("vvSizeMinSize",(t=>t.vvSize.minSize)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.t("vvSizeMaxSize",(t=>t.vvSize.maxSize)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.t("vvSizeOffset",(t=>t.vvSize.offset)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__.t("vvSizeFactor",(t=>t.vvSize.factor))),l.code.add(_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.H`float getSize() {
return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
}`)):(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.r.SIZE,"float"),l.code.add(_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.H`float getSize(){
return intrinsicWidth * size;
}`)),s.vvOpacity?(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.r.OPACITYFEATUREATTRIBUTE,"float"),l.constants.add("vvOpacityNumber","int",8),l.uniforms.add(new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__.x("vvOpacityValues",(t=>t.vvOpacity.values),o),new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__.x("vvOpacityOpacities",(t=>t.vvOpacity.opacityValues),o)),l.code.add(_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.H`float interpolateOpacity( float value ){
if (value <= vvOpacityValues[0]) {
return vvOpacityOpacities[0];
}
for (int i = 1; i < vvOpacityNumber; ++i) {
if (vvOpacityValues[i] >= value) {
float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
}
}
return vvOpacityOpacities[vvOpacityNumber - 1];
}
vec4 applyOpacity( vec4 color ){
return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
}`)):l.code.add(_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.H`vec4 applyOpacity( vec4 color ){
return color;
}`),s.vvColor?(c.include(_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_0__.A,s),c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.r.COLORFEATUREATTRIBUTE,"float"),l.code.add(_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.H`vec4 getColor(){
return applyOpacity(interpolateVVColor(colorFeatureAttribute));
}`)):(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__.r.COLOR,"vec4"),l.code.add(_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.H`vec4 getColor(){
return applyOpacity(color);
}`))}},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>LineStipple_glsl_f,h:()=>S});var RgbaFloatEncoding_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js"),View_glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),Float4PassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js"),FloatBindUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js"),FloatPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js"),glsl=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js"),Texture2DPassUniform=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js");__webpack_require__("./node_modules/@arcgis/core/core/floatRGBA.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");function c(t){return t.pattern.map((e=>Math.round(e*t.pixelRatio)))}function f(t){if(null==t)return 1;const e=c(t);return Math.floor(e.reduce(((t,e)=>t+e)))}function s(t){return c(t).reduce(((t,e)=>Math.max(t,e)))}var vec42=__webpack_require__("./node_modules/@arcgis/core/chunks/vec42.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js");const ensureColor4_c=(0,vec4f64.vt)();function LineStipple_glsl_f(n,d){if(!d.stippleEnabled)return void n.fragment.code.add(glsl.H`float getStippleAlpha() { return 1.0; }
void discardByStippleAlpha(float stippleAlpha, float threshold) {}
vec4 blendStipple(vec4 color, float stippleAlpha) { return color; }`);const f=!(d.draped&&d.stipplePreferContinuous),{vertex:g,fragment:h}=n;h.include(RgbaFloatEncoding_glsl.W),d.draped||((0,View_glsl.yu)(g,d),g.uniforms.add(new FloatBindUniform.U("worldToScreenPerDistanceRatio",(({camera:e})=>1/e.perScreenPixelRatio))).code.add(glsl.H`float computeWorldToScreenRatio(vec3 segmentCenter) {
float segmentDistanceToCamera = length(segmentCenter - cameraPosition);
return worldToScreenPerDistanceRatio / segmentDistanceToCamera;
}`)),n.varyings.add("vStippleDistance","float"),n.varyings.add("vStippleDistanceLimits","vec2"),n.varyings.add("vStipplePatternStretch","float"),g.code.add(glsl.H`
    float discretizeWorldToScreenRatio(float worldToScreenRatio) {
      float step = ${glsl.H.float(LineStipple_glsl_u)};

      float discreteWorldToScreenRatio = log(worldToScreenRatio);
      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;
      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);
      return discreteWorldToScreenRatio;
    }
  `),g.code.add(glsl.H`vec2 computeStippleDistanceLimits(float startPseudoScreen, float segmentLengthPseudoScreen, float segmentLengthScreen, float patternLength) {`),g.code.add(glsl.H`
    if (segmentLengthPseudoScreen >= ${f?"patternLength":"1e4"}) {
  `),(0,View_glsl.Nz)(g),g.code.add(glsl.H`float repetitions = segmentLengthScreen / (patternLength * pixelRatio);
float flooredRepetitions = max(1.0, floor(repetitions + 0.5));
float segmentLengthScreenRounded = flooredRepetitions * patternLength;
float stretch = repetitions / flooredRepetitions;
vStipplePatternStretch = max(0.75, stretch);
return vec2(0.0, segmentLengthScreenRounded);
}
return vec2(startPseudoScreen, startPseudoScreen + segmentLengthPseudoScreen);
}`),h.uniforms.add(new Texture2DPassUniform.N("stipplePatternTexture",(e=>e.stippleTexture)),new FloatPassUniform.m("stipplePatternSDFNormalizer",(e=>function m(e){return e?(Math.floor(.5*(s(e)-1))+.5)/e.pixelRatio:1}(e.stipplePattern))),new FloatPassUniform.m("stipplePatternPixelSizeInv",(e=>1/S(e)))),d.stippleOffColorEnabled&&h.uniforms.add(new Float4PassUniform.E("stippleOffColor",(e=>function ensureColor4_s(t){return null==t?vec4f64.uY:4===t.length?t:(0,vec42.s)(ensureColor4_c,t[0],t[1],t[2],1)}(e.stippleOffColor)))),h.code.add(glsl.H`float getStippleSDF(out bool isClamped) {
float stippleDistanceClamped = clamp(vStippleDistance, vStippleDistanceLimits.x, vStippleDistanceLimits.y);
vec2 aaCorrectedLimits = vStippleDistanceLimits + vec2(1.0, -1.0) / gl_FragCoord.w;
isClamped = vStippleDistance < aaCorrectedLimits.x || vStippleDistance > aaCorrectedLimits.y;
float u = stippleDistanceClamped * gl_FragCoord.w * stipplePatternPixelSizeInv * vLineSizeInv;
u = fract(u);
float encodedSDF = rgbaTofloat(texture(stipplePatternTexture, vec2(u, 0.5)));
float sdf = (encodedSDF * 2.0 - 1.0) * stipplePatternSDFNormalizer;
return (sdf - 0.5) * vStipplePatternStretch + 0.5;
}
float getStippleSDF() {
bool ignored;
return getStippleSDF(ignored);
}
float getStippleAlpha() {
bool isClamped;
float stippleSDF = getStippleSDF(isClamped);
float antiAliasedResult = clamp(stippleSDF * vLineWidth + 0.5, 0.0, 1.0);
return isClamped ? floor(antiAliasedResult + 0.5) : antiAliasedResult;
}`),h.code.add(glsl.H`
    void discardByStippleAlpha(float stippleAlpha, float threshold) {
     ${(0,glsl.If)(!d.stippleOffColorEnabled,"if (stippleAlpha < threshold) { discard; }")}
    }

    vec4 blendStipple(vec4 color, float stippleAlpha) {
      return ${d.stippleOffColorEnabled?"mix(color, stippleOffColor, stippleAlpha)":"vec4(color.rgb, color.a * stippleAlpha)"};
    }
  `)}function S(e){const t=e.stipplePattern;return t?f(e.stipplePattern)/t.pixelRatio:1}const LineStipple_glsl_u=.4},"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>n});var _support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/engineContent/marker.js"),_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js"),_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js"),_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js"),_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js");function n(n,i){const d=n.vertex;(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_1__.Nz)(d),null==d.uniforms.get("markerScale")&&d.constants.add("markerScale","float",1),d.constants.add("markerSizePerLineWidth","float",_support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__.PV).code.add(_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__.H`float getLineWidth() {
return max(getSize(), 1.0) * pixelRatio;
}
float getScreenMarkerSize() {
return markerSizePerLineWidth * markerScale * getLineWidth();
}`),i.space===_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__.lM.World&&(d.constants.add("maxSegmentLengthFraction","float",.45),d.uniforms.add(new _shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_2__.U("perRenderPixelRatio",(e=>e.camera.perRenderPixelRatio))),d.code.add(_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__.H`bool areWorldMarkersHidden(vec4 pos, vec4 other) {
vec3 midPoint = mix(pos.xyz, other.xyz, 0.5);
float distanceToCamera = length(midPoint);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
float worldMarkerSize = getScreenMarkerSize() * screenToWorldRatio;
float segmentLen = length(pos.xyz - other.xyz);
return worldMarkerSize > maxSegmentLengthFraction * segmentLen;
}
float getWorldMarkerSize(vec4 pos) {
float distanceToCamera = length(pos.xyz);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
return getScreenMarkerSize() * screenToWorldRatio;
}`))}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>_});__webpack_require__("./node_modules/@arcgis/core/core/has.js");var _core_uid_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/core/uid.js"),_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec32.js"),_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js"),_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js"),_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection/projectBuffer.js"),_Attribute_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js"),_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js"),_Geometry_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js"),_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js"),_Object3D_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3D.js"),_testUtils_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/testUtils.js"),_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),_WebGLLayer_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js"),_materials_RibbonLineMaterial_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js");class _{constructor(i){this._originSR=i,this._rootOriginId="root/"+(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_14__.c)(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(t){const r=this._origins.get(this._rootOriginId);if(null==r){const i=_testUtils_js__WEBPACK_IMPORTED_MODULE_10__.Q.rootOrigin;if(null!=i)return this._origins.set(this._rootOriginId,(0,_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_8__.f)(i[0],i[1],i[2],this._rootOriginId)),this.getOrigin(t);const r=(0,_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_8__.f)(t[0]+Math.random()-.5,t[1]+Math.random()-.5,t[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,r),r}const o=this._gridSize,s=Math.round(t[0]/o),e=Math.round(t[1]/o),n=Math.round(t[2]/o),a=`${s}/${e}/${n}`;let m=this._origins.get(a);const g=.5*o;if((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.d)(l,t,r.vec3),l[0]=Math.abs(l[0]),l[1]=Math.abs(l[1]),l[2]=Math.abs(l[2]),l[0]<g&&l[1]<g&&l[2]<g){if(m){const r=Math.max(...l);if((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.d)(l,t,m.vec3),l[0]=Math.abs(l[0]),l[1]=Math.abs(l[1]),l[2]=Math.abs(l[2]),Math.max(...l)<r)return m}return r}return m||(m=(0,_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_8__.f)(s*o,e*o,n*o,a),this._origins.set(a,m)),m}_drawOriginBox(t,i=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__.fA)(1,1,0,1)){const r=window.view,h=r._stage,c=i.toString();if(!this._objects.has(c)){this._material=new _materials_RibbonLineMaterial_js__WEBPACK_IMPORTED_MODULE_13__.W({width:2,color:i}),h.add(this._material);const t=new _WebGLLayer_js__WEBPACK_IMPORTED_MODULE_12__.x(h,{pickable:!1}),r=new _Object3D_js__WEBPACK_IMPORTED_MODULE_9__.B({castShadow:!1});h.add(r),t.add(r),this._objects.set(c,r)}const _=this._objects.get(c),l=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],p=l.length,j=new Array(3*p),b=new Array,u=.5*this._gridSize;for(let o=0;o<p;o++)j[3*o]=t[0]+(1&l[o]?u:-u),j[3*o+1]=t[1]+(2&l[o]?u:-u),j[3*o+2]=t[2]+(4&l[o]?u:-u),o>0&&b.push(o-1,o);(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__.projectBuffer)(j,this._originSR,0,j,r.renderSpatialReference,0,p);const M=new _Geometry_js__WEBPACK_IMPORTED_MODULE_7__.V(this._material,[[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.r.POSITION,new _Attribute_js__WEBPACK_IMPORTED_MODULE_5__.n(j,b,3,!0)]],null,_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_6__.X.Line);h.add(M),_.addGeometry(M)}get test(){}}const l=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.vt)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>t});var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js");class s{constructor(r,s){this.vec3=r,this.id=s}}function t(t,o,c,e){return new s((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.fA)(t,o,c),e)}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3D.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>A});__webpack_require__("./node_modules/@arcgis/core/core/has.js");var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js"),_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js"),_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec32.js"),_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js"),_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/chunks/sphere.js"),_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/mathUtils.js"),_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js"),_ContentObject_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObject.js"),_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js"),_Object3DStateID_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateID.js"),_Util_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"),_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/utils.js");class A extends _ContentObject_js__WEBPACK_IMPORTED_MODULE_13__.J{get geometries(){return this._geometries}get transformation(){return this._transformation??_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.zK}set transformation(e){this._transformation=(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__.C)(this._transformation??(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.vt)(),e),this._invalidateBoundingVolume(),this._emit("transformationChanged",this)}get shaderTransformation(){return this._shaderTransformation}set shaderTransformation(e){this._shaderTransformation=e?(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__.C)(this._shaderTransformation??(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.vt)(),e):null,this._invalidateBoundingVolume(),this._emit("shaderTransformationChanged",this)}get effectiveTransformation(){return this.shaderTransformation??this.transformation}constructor(t={}){super(),this.type=_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_8__.X.Object,this._shaderTransformation=null,this._parentLayer=null,this._visible=!0,this.castShadow=t.castShadow??!0,this.usesVerticalDistanceToGround=t.usesVerticalDistanceToGround??!1,this.graphicUid=t.graphicUid,this.layerUid=t.layerUid,t.isElevationSource&&(this.lastValidElevationBB=new L),this._geometries=t.geometries?Array.from(t.geometries):new Array}dispose(){this._geometries.length=0}get parentLayer(){return this._parentLayer}set parentLayer(t){(0,_Util_js__WEBPACK_IMPORTED_MODULE_10__.vA)(null==this._parentLayer||null==t,"Object3D can only be added to a single Layer"),this._parentLayer=t}addGeometry(t){t.visible=this._visible,this._geometries.push(t),this._emit("geometryAdded",{object:this,geometry:t}),this._invalidateBoundingVolume()}removeGeometry(t){const e=this._geometries.splice(t,1)[0];e&&(this._emit("geometryRemoved",{object:this,geometry:e}),this._invalidateBoundingVolume())}removeAllGeometries(){for(;this._geometries.length>0;)this.removeGeometry(0)}geometryVertexAttributeUpdated(t,e,i=!1){this._emit("attributesChanged",{object:this,geometry:t,attribute:e,sync:i}),(0,_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__.b)(e)&&this._invalidateBoundingVolume()}get visible(){return this._visible}set visible(t){if(this._visible!==t){this._visible=t;for(const t of this._geometries)t.visible=this._visible;this._emit("visibilityChanged",this)}}maskOccludee(){const t=new _Object3DStateID_js__WEBPACK_IMPORTED_MODULE_9__.p;for(const e of this._geometries)e.occludees=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_12__.Ci)(e.occludees,t);return this._emit("occlusionChanged",this),t}removeOcclude(t){for(const e of this._geometries)e.occludees=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_12__.PC)(e.occludees,t);this._emit("occlusionChanged",this)}highlight(t){const e=new _Object3DStateID_js__WEBPACK_IMPORTED_MODULE_9__.h(t);for(const i of this._geometries)i.addHighlight(e);return this._emit("highlightChanged",this),e}removeHighlight(t){for(const e of this._geometries)e.removeHighlight(t);this._emit("highlightChanged",this)}removeStateID(t){t.channel===_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__.Mg.Highlight?this.removeHighlight(t):this.removeOcclude(t)}getCombinedStaticTransformation(t,i){return(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__.lw)(i,this.transformation,t.transformation)}getCombinedShaderTransformation(t,i=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.vt)()){return(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__.lw)(i,this.effectiveTransformation,t.transformation)}get boundingVolumeWorldSpace(){return this._bvWorldSpace||(this._bvWorldSpace=this._bvWorldSpace||new M,this._validateBoundingVolume(this._bvWorldSpace,E.WorldSpace)),this._bvWorldSpace}get boundingVolumeObjectSpace(){return this._bvObjectSpace||(this._bvObjectSpace=this._bvObjectSpace||new M,this._validateBoundingVolume(this._bvObjectSpace,E.ObjectSpace)),this._bvObjectSpace}_validateBoundingVolume(t,e){const i=e===E.ObjectSpace;for(const s of this._geometries){const e=s.boundingInfo;e&&T(e,t,i?s.transformation:this.getCombinedShaderTransformation(s))}(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.m)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_5__.a)(t.bounds),t.min,t.max,.5);for(const s of this._geometries){const e=s.boundingInfo;if(null==e)continue;const r=i?s.transformation:this.getCombinedShaderTransformation(s),o=(0,_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_6__.hG)(r);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(W,e.center,r);const m=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.j)(W,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_5__.a)(t.bounds)),h=e.radius*o;t.bounds[3]=Math.max(t.bounds[3],m+h)}}_invalidateBoundingVolume(){const t=this._bvWorldSpace?.bounds;this._bvObjectSpace=this._bvWorldSpace=void 0,this._parentLayer&&t&&this._parentLayer.notifyObjectBBChanged(this,t)}_emit(t,e){this._parentLayer&&this._parentLayer.events.emit(t,e)}get test(){}}class L{constructor(){this.min=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.fA)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.max=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.fA)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]}}class M extends L{constructor(){super(...arguments),this.bounds=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_5__.c)()}}function T(t,e,s){const r=t.bbMin,o=t.bbMax;if((0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__.tZ)(s)){const t=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.i)(C,s[12],s[13],s[14]);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.g)(B,r,t),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.g)(U,o,t);for(let i=0;i<3;++i)e.min[i]=Math.min(e.min[i],B[i]),e.max[i]=Math.max(e.max[i],U[i])}else if((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(B,r,s),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.p)(r,o))for(let i=0;i<3;++i)e.min[i]=Math.min(e.min[i],B[i]),e.max[i]=Math.max(e.max[i],B[i]);else{(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(U,o,s);for(let t=0;t<3;++t)e.min[t]=Math.min(e.min[t],B[t],U[t]),e.max[t]=Math.max(e.max[t],B[t],U[t]);for(let t=0;t<3;++t){(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.c)(B,r),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.c)(U,o),B[t]=o[t],U[t]=r[t],(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(B,B,s),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(U,U,s);for(let t=0;t<3;++t)e.min[t]=Math.min(e.min[t],B[t],U[t]),e.max[t]=Math.max(e.max[t],B[t],U[t])}}}const C=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.vt)(),B=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.vt)(),U=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.vt)(),W=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.vt)();var E;!function(t){t[t.WorldSpace=0]="WorldSpace",t[t.ObjectSpace=1]="ObjectSpace"}(E||(E={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var C;__webpack_require__.d(__webpack_exports__,{q:()=>C}),function(C){C[C.ASYNC=0]="ASYNC",C[C.SYNC=1]="SYNC"}(C||(C={}))},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>a});var Evented=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),Handles=__webpack_require__("./node_modules/@arcgis/core/core/Handles.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),PooledArray=__webpack_require__("./node_modules/@arcgis/core/core/PooledArray.js"),ContentObject=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObject.js"),ContentObjectType=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js");const DirtyEvents_e=["layerObjectAdded","layerObjectRemoved","layerObjectsAdded","layerObjectsRemoved","transformationChanged","shaderTransformationChanged","visibilityChanged","occlusionChanged","highlightChanged","geometryAdded","geometryRemoved","attributesChanged"];var Octree=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js"),UpdatePolicy=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js");class a extends ContentObject.J{constructor(s,r,d=""){super(),this.stage=s,this.apiLayerUid=d,this.type=ContentObjectType.X.Layer,this.events=new Evented.A,this.visible=!0,this.sliceable=!1,this._objectsAdded=new PooledArray.A,this._handles=new Handles.A,this._objects=new PooledArray.A,this._pickable=!0,this.visible=r?.visible??!0,this._pickable=r?.pickable??!0,this.updatePolicy=r?.updatePolicy??UpdatePolicy.q.ASYNC,this._disableOctree=r?.disableOctree??!1,s.add(this);for(const e of DirtyEvents_e)this._handles.add(this.events.on(e,(t=>s.handleEvent(e,t))))}destroy(){this._handles.size&&(this._handles.destroy(),this.stage.remove(this),this.invalidateSpatialQueryAccelerator())}get objects(){return this._objects}set pickable(e){this._pickable=e}get pickable(){return this._pickable&&this.visible}add(e){this._objects.push(e),e.parentLayer=this,this.events.emit("layerObjectAdded",{layer:this,object:e}),null!=this._octree&&this._objectsAdded.push(e)}remove(e){this._objects.removeUnordered(e)&&(e.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:e}),null!=this._octree&&(this._objectsAdded.removeUnordered(e)||this._octree.remove([e])))}addMany(e){this._objects.pushArray(e);for(const t of e)t.parentLayer=this;this.events.emit("layerObjectsAdded",{layer:this,objects:e}),null!=this._octree&&this._objectsAdded.pushArray(e)}removeMany(e){const t=new Array;if(this._objects.removeUnorderedMany(e,e.length,t),0!==t.length){for(const e of t)e.parentLayer=null;if(this.events.emit("layerObjectsRemoved",{layer:this,objects:t}),null!=this._octree){for(let e=0;e<t.length;)this._objectsAdded.removeUnordered(t[e])?(t[e]=t[t.length-1],t.length-=1):++e;this._octree.remove(t)}}}sync(){this.updatePolicy!==UpdatePolicy.q.SYNC&&this.stage.syncLayer(this.id)}notifyObjectBBChanged(e,t){null==this._octree||this._objectsAdded.includes(e)||this._octree.update(e,t)}getSpatialQueryAccelerator(){return null==this._octree&&this._objects.length>50&&!this._disableOctree?(this._octree=new Octree.A((e=>e.boundingVolumeWorldSpace.bounds)),this._octree.add(this._objects.data,this._objects.length)):null!=this._octree&&this._objectsAdded.length>0&&(this._octree.add(this._objectsAdded.data,this._objectsAdded.length),this._objectsAdded.clear()),this._octree}invalidateSpatialQueryAccelerator(){this._octree=(0,maybe.pR)(this._octree),this._objectsAdded.clear()}}},"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/testUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>n,Q:()=>e});const n={stableRendering:!1},e={rootOrigin:null}},"./node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>W});var Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),vec2=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js"),vec32=__webpack_require__("./node_modules/@arcgis/core/chunks/vec32.js"),vec3f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js"),vec4f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js"),frustum=__webpack_require__("./node_modules/@arcgis/core/geometry/support/frustum.js"),lineSegment=__webpack_require__("./node_modules/@arcgis/core/geometry/support/lineSegment.js"),plane=__webpack_require__("./node_modules/@arcgis/core/geometry/support/plane.js"),InterleavedLayout=__webpack_require__("./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js"),ShaderOutput=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js"),olidUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/effects/geometry/olidUtils.js"),GLMaterial=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js"),Material=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js"),RenderSlot=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js"),Util=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"),VertexAttribute=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js"),VisualVariablePassParameters=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariablePassParameters.js"),LineMarkerTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js"),RibbonLine_glsl=__webpack_require__("./node_modules/@arcgis/core/chunks/RibbonLine.glsl.js"),ReloadableShaderModule=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js")),ShaderTechnique=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js"),OITPass=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OITPass.js"),OrderIndependentTransparency=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js"),StencilUtils=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),renderState=__webpack_require__("./node_modules/@arcgis/core/views/webgl/renderState.js");class A extends ShaderTechnique.w{constructor(e,t){super(e,t,new ReloadableShaderModule.$(RibbonLine_glsl.R,(()=>__webpack_require__.e(4205).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLine.glsl.js")))),RibbonLineTechnique_W),this.primitiveType=t.wireframe?enums.WR.LINES:enums.WR.TRIANGLE_STRIP}_makePipelineState(i,r){const{oitPass:c,output:T,hasOccludees:h,hasPolygonOffset:O}=i,m=c===OITPass.Y.NONE,E=c===OITPass.Y.FrontFace;return(0,renderState.Ey)({blending:(0,ShaderOutput.RN)(T)?(0,OrderIndependentTransparency.Yf)(c):null,depthTest:{func:(0,OrderIndependentTransparency.K_)(c)},depthWrite:(0,OrderIndependentTransparency.z5)(i),drawBuffers:T===ShaderOutput.V.Depth?{buffers:[enums.Hr.NONE]}:(0,OrderIndependentTransparency.m6)(c,T),colorWrite:renderState.kn,stencilWrite:h?StencilUtils.v0:null,stencilTest:h?r?StencilUtils.a9:StencilUtils.qh:null,polygonOffset:m||E?O?_:null:OrderIndependentTransparency.SE})}initializePipeline(e){if(e.occluder){const i=e.hasPolygonOffset?_:null;this._occluderPipelineTransparent=(0,renderState.Ey)({blending:renderState.Ky,polygonOffset:i,depthTest:StencilUtils.sf,depthWrite:null,colorWrite:renderState.kn,stencilWrite:null,stencilTest:StencilUtils.mK,drawBuffers:e.output===ShaderOutput.V.Depth?{buffers:[enums.Hr.NONE]}:null}),this._occluderPipelineOpaque=(0,renderState.Ey)({blending:renderState.Ky,polygonOffset:i,depthTest:StencilUtils.sf,depthWrite:null,colorWrite:renderState.kn,stencilWrite:StencilUtils.r8,stencilTest:StencilUtils.I$,drawBuffers:e.output===ShaderOutput.V.Depth?{buffers:[enums.Hr.NONE]}:null}),this._occluderPipelineMaskWrite=(0,renderState.Ey)({blending:null,polygonOffset:i,depthTest:StencilUtils.m,depthWrite:null,colorWrite:null,stencilWrite:StencilUtils.v0,stencilTest:StencilUtils.a9,drawBuffers:e.output===ShaderOutput.V.Depth?{buffers:[enums.Hr.NONE]}:null})}return this._occludeePipeline=this._makePipelineState(e,!0),this._makePipelineState(e,!1)}getPipeline(e,t){if(e)return this._occludeePipeline;switch(t){case RenderSlot.N.TRANSPARENT_OCCLUDER_MATERIAL:return this._occluderPipelineTransparent??super.getPipeline();case RenderSlot.N.OCCLUDER_MATERIAL:return this._occluderPipelineOpaque??super.getPipeline();default:return this._occluderPipelineMaskWrite??super.getPipeline()}}}const _={factor:0,units:-4},RibbonLineTechnique_W=new Map([[VertexAttribute.r.POSITION,0],[VertexAttribute.r.PREVPOSITION,1],[VertexAttribute.r.NEXTPOSITION,2],[VertexAttribute.r.SUBDIVISIONFACTOR,3],[VertexAttribute.r.UV0,4],[VertexAttribute.r.COLOR,5],[VertexAttribute.r.COLORFEATUREATTRIBUTE,5],[VertexAttribute.r.SIZE,6],[VertexAttribute.r.SIZEFEATUREATTRIBUTE,6],[VertexAttribute.r.OPACITYFEATUREATTRIBUTE,7],[VertexAttribute.r.OBJECTANDLAYERIDCOLOR,8]]);var Z,RibbonLineTechniqueConfiguration=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js"),AlphaCutoff=__webpack_require__("./node_modules/@arcgis/core/webscene/support/AlphaCutoff.js");!function(e){e[e.LEFT_JOIN_START=-2]="LEFT_JOIN_START",e[e.LEFT_JOIN_END=-1]="LEFT_JOIN_END",e[e.LEFT_CAP_START=-4]="LEFT_CAP_START",e[e.LEFT_CAP_END=-5]="LEFT_CAP_END",e[e.RIGHT_JOIN_START=2]="RIGHT_JOIN_START",e[e.RIGHT_JOIN_END=1]="RIGHT_JOIN_END",e[e.RIGHT_CAP_START=4]="RIGHT_CAP_START",e[e.RIGHT_CAP_END=5]="RIGHT_CAP_END"}(Z||(Z={}));class W extends Material.im{constructor(e){super(e,q),this._configuration=new RibbonLineTechniqueConfiguration.Q,this.vertexAttributeLocations=RibbonLineTechnique_W,this.produces=new Map([[RenderSlot.N.OPAQUE_MATERIAL,e=>(0,ShaderOutput.CL)(e)||(0,ShaderOutput.RN)(e)&&this.parameters.renderOccluded===Material.m$.OccludeAndTransparentStencil],[RenderSlot.N.OPAQUE_MATERIAL_WITHOUT_NORMALS,e=>(0,ShaderOutput.eh)(e)],[RenderSlot.N.OCCLUDER_MATERIAL,e=>(0,ShaderOutput.T2)(e)&&this.parameters.renderOccluded===Material.m$.OccludeAndTransparentStencil],[RenderSlot.N.TRANSPARENT_OCCLUDER_MATERIAL,e=>(0,ShaderOutput.T2)(e)&&this.parameters.renderOccluded===Material.m$.OccludeAndTransparentStencil],[RenderSlot.N.TRANSPARENT_MATERIAL,e=>(0,ShaderOutput.RN)(e)&&this.parameters.writeDepth&&this.parameters.renderOccluded!==Material.m$.OccludeAndTransparentStencil],[RenderSlot.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,ShaderOutput.RN)(e)&&!this.parameters.writeDepth&&this.parameters.renderOccluded!==Material.m$.OccludeAndTransparentStencil],[RenderSlot.N.DRAPED_MATERIAL,e=>(0,ShaderOutput.i3)(e)]])}getConfiguration(e,t){this._configuration.output=e,this._configuration.oitPass=t.oitPass,this._configuration.draped=t.slot===RenderSlot.N.DRAPED_MATERIAL;const r=null!=this.parameters.stipplePattern&&e!==ShaderOutput.V.Highlight;return this._configuration.stippleEnabled=r,this._configuration.stippleOffColorEnabled=r&&null!=this.parameters.stippleOffColor,this._configuration.stipplePreferContinuous=r&&this.parameters.stipplePreferContinuous,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.roundJoins="round"===this.parameters.join,this._configuration.capType=this.parameters.cap,this._configuration.applyMarkerOffset=null!=this.parameters.markerParameters&&function $(e){return e.anchor===LineMarkerTechniqueConfiguration.kJ.Tip&&e.hideOnShortSegments&&"begin-end"===e.placement&&e.worldSpace}(this.parameters.markerParameters),this._configuration.hasPolygonOffset=this.parameters.hasPolygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.vvOpacity=!!this.parameters.vvOpacity,this._configuration.innerColorEnabled=this.parameters.innerWidth>0&&null!=this.parameters.innerColor,this._configuration.falloffEnabled=this.parameters.falloff>0,this._configuration.hasOccludees=t.hasOccludees,this._configuration.occluder=this.parameters.renderOccluded===Material.m$.OccludeAndTransparentStencil,this._configuration.terrainDepthTest=t.terrainDepthTest&&(0,ShaderOutput.RN)(e),this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.wireframe=this.parameters.wireframe,this._configuration}get visible(){return this.parameters.color[3]>=AlphaCutoff.Q||null!=this.parameters.stipplePattern&&(this.parameters.stippleOffColor?.[3]??0)>AlphaCutoff.Q}intersectDraped({attributes:e,screenToWorldRatio:r},i,s,a,n,o){if(!s.options.selectionMode)return;const l=e.get(VertexAttribute.r.SIZE);let c=this.parameters.width;if(this.parameters.vvSize){const r=e.get(VertexAttribute.r.SIZEFEATUREATTRIBUTE).data[0];c*=(0,mathUtils.qE)(this.parameters.vvSize.offset[0]+r*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else l&&(c*=l.data[0]);const p=a[0],h=a[1],f=(c/2+4)*r;let m=Number.MAX_VALUE,u=0;const T=e.get(VertexAttribute.r.POSITION).data,d=K(this.parameters,e)?T.length-2:T.length-5;for(let _=0;_<d;_+=3){const e=T[_],r=T[_+1],i=(_+3)%T.length,s=p-e,a=h-r,n=T[i]-e,o=T[i+1]-r,l=(0,mathUtils.qE)((n*s+o*a)/(n*n+o*o),0,1),c=n*l-s,f=o*l-a,d=c*c+f*f;d<m&&(m=d,u=_/3)}m<f*f&&n(o.dist,o.normal,u,!1)}intersect(r,f,m,u,d,R){if(!m.options.selectionMode||!r.visible)return;if(!(0,Util.zH)(f))return void Logger.A.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial").error("intersection assumes a translation-only matrix");const S=r.attributes,v=S.get(VertexAttribute.r.POSITION).data;let P=this.parameters.width;if(this.parameters.vvSize){const e=S.get(VertexAttribute.r.SIZEFEATUREATTRIBUTE).data[0];P*=(0,mathUtils.qE)(this.parameters.vvSize.offset[0]+e*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else S.has(VertexAttribute.r.SIZE)&&(P*=S.get(VertexAttribute.r.SIZE).data[0]);const N=m.camera,L=se;(0,vec2.C)(L,m.point);const b=P*N.pixelRatio/2+4*N.pixelRatio;(0,vec32.i)(ue[0],L[0]-b,L[1]+b,0),(0,vec32.i)(ue[1],L[0]+b,L[1]+b,0),(0,vec32.i)(ue[2],L[0]+b,L[1]-b,0),(0,vec32.i)(ue[3],L[0]-b,L[1]-b,0);for(let e=0;e<4;e++)if(!N.unprojectFromRenderScreen(ue[e],Te[e]))return;(0,plane.Cr)(N.eye,Te[0],Te[1],de),(0,plane.Cr)(N.eye,Te[1],Te[2],_e),(0,plane.Cr)(N.eye,Te[2],Te[3],Ee),(0,plane.Cr)(N.eye,Te[3],Te[0],Ae);let C=Number.MAX_VALUE,U=0;const y=K(this.parameters,S)?v.length-2:v.length-5;for(let e=0;e<y;e+=3){ee[0]=v[e]+f[12],ee[1]=v[e+1]+f[13],ee[2]=v[e+2]+f[14];const t=(e+3)%v.length;if(te[0]=v[t]+f[12],te[1]=v[t+1]+f[13],te[2]=v[t+2]+f[14],(0,plane.mN)(de,ee)<0&&(0,plane.mN)(de,te)<0||(0,plane.mN)(_e,ee)<0&&(0,plane.mN)(_e,te)<0||(0,plane.mN)(Ee,ee)<0&&(0,plane.mN)(Ee,te)<0||(0,plane.mN)(Ae,ee)<0&&(0,plane.mN)(Ae,te)<0)continue;if(N.projectToRenderScreen(ee,ae),N.projectToRenderScreen(te,ne),ae[2]<0&&ne[2]>0){(0,vec32.d)(re,ee,te);const e=N.frustum,t=-(0,plane.mN)(e[frustum.FB.NEAR],ee)/(0,vec32.f)(re,(0,plane.Qj)(e[frustum.FB.NEAR]));(0,vec32.h)(re,re,t),(0,vec32.g)(ee,ee,re),N.projectToRenderScreen(ee,ae)}else if(ae[2]>0&&ne[2]<0){(0,vec32.d)(re,te,ee);const e=N.frustum,t=-(0,plane.mN)(e[frustum.FB.NEAR],te)/(0,vec32.f)(re,(0,plane.Qj)(e[frustum.FB.NEAR]));(0,vec32.h)(re,re,t),(0,vec32.g)(te,te,re),N.projectToRenderScreen(te,ne)}else if(ae[2]<0&&ne[2]<0)continue;ae[2]=0,ne[2]=0;const r=(0,lineSegment.kb)((0,lineSegment.Cr)(ae,ne,ce),L);r<C&&(C=r,(0,vec32.c)(oe,ee),(0,vec32.c)(le,te),U=e/3)}const D=m.rayBegin,j=m.rayEnd;if(C<b*b){let e=Number.MAX_VALUE;if((0,lineSegment.ld)((0,lineSegment.Cr)(oe,le,ce),(0,lineSegment.Cr)(D,j,pe),ie)){(0,vec32.d)(ie,ie,D);const t=(0,vec32.l)(ie);(0,vec32.h)(ie,ie,1/t),e=t/(0,vec32.j)(D,j)}R(e,ie,U,!1)}}get _layout(){const e=(0,InterleavedLayout.BP)().vec3f(VertexAttribute.r.POSITION).vec3f(VertexAttribute.r.PREVPOSITION).vec3f(VertexAttribute.r.NEXTPOSITION).f32(VertexAttribute.r.SUBDIVISIONFACTOR).vec2f(VertexAttribute.r.UV0);return this.parameters.vvSize?e.f32(VertexAttribute.r.SIZEFEATUREATTRIBUTE):e.f32(VertexAttribute.r.SIZE),this.parameters.vvColor?e.f32(VertexAttribute.r.COLORFEATUREATTRIBUTE):e.vec4f(VertexAttribute.r.COLOR),this.parameters.vvOpacity&&e.f32(VertexAttribute.r.OPACITYFEATUREATTRIBUTE),(0,olidUtils.E)()&&e.vec4u8(VertexAttribute.r.OBJECTANDLAYERIDCOLOR),e}createBufferWriter(){return new X(this._layout,this.parameters)}createGLMaterial(e){return new Y(e)}validateParameters(e){"miter"!==e.join&&(e.miterLimit=0),null!=e.markerParameters&&(e.markerScale=e.markerParameters.width/e.width)}}class Y extends GLMaterial.A{constructor(){super(...arguments),this._stipplePattern=null}dispose(){super.dispose(),this._stippleTextures.release(this._stipplePattern),this._stipplePattern=null}beginSlot(e){const t=this._material.parameters.stipplePattern;return this._stipplePattern!==t&&(this._material.setParameters({stippleTexture:this._stippleTextures.swap(t,this._stipplePattern)}),this._stipplePattern=t),this.getTechnique(A,e)}}class q extends VisualVariablePassParameters.S{constructor(){super(...arguments),this.width=0,this.color=vec4f64.Un,this.join="miter",this.cap=RibbonLineTechniqueConfiguration.x.BUTT,this.miterLimit=5,this.writeDepth=!0,this.hasPolygonOffset=!1,this.stippleTexture=null,this.stipplePreferContinuous=!0,this.markerParameters=null,this.markerScale=1,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.isClosed=!1,this.falloff=0,this.innerWidth=0,this.wireframe=!1}get transparent(){return this.color[3]<1||null!=this.stipplePattern&&(this.stippleOffColor?.[3]??0)<1}}class X{constructor(e,t){this.vertexBufferLayout=e,this._parameters=t,this.numJoinSubdivisions=0;const r=t.stipplePattern?1:0;switch(this._parameters.join){case"miter":case"bevel":this.numJoinSubdivisions=r;break;case"round":this.numJoinSubdivisions=RibbonLine_glsl.r+r}}_isClosed(e){return K(this._parameters,e)}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){const r=e.get(VertexAttribute.r.POSITION).indices.length/2+1,i=this._isClosed(e);let s=i?2:4;return s+=((i?r:r-1)-(i?0:1))*(2*this.numJoinSubdivisions+4),s+=2,this._parameters.wireframe&&(s=2+4*(s-2)),s}write(e,t,r,i,a,n){const o=he,l=fe,p=me,m=r.get(VertexAttribute.r.POSITION),u=m.indices,T=m.data.length/3,d=r.get(VertexAttribute.r.DISTANCETOSTART)?.data;u&&u.length!==2*(T-1)&&console.warn("RibbonLineMaterial does not support indices");const _=r.get(VertexAttribute.r.SIZEFEATUREATTRIBUTE)?.data[0]??r.get(VertexAttribute.r.SIZE)?.data[0]??1;let E=[1,1,1,1],A=0;const R=this.vertexBufferLayout.fields.has(VertexAttribute.r.COLORFEATUREATTRIBUTE);R?A=r.get(VertexAttribute.r.COLORFEATUREATTRIBUTE).data[0]:r.has(VertexAttribute.r.COLOR)&&(E=r.get(VertexAttribute.r.COLOR).data);const O=this.vertexBufferLayout.fields.has(VertexAttribute.r.OPACITYFEATUREATTRIBUTE),g=O?r.get(VertexAttribute.r.OPACITYFEATUREATTRIBUTE).data[0]:0,I=new Float32Array(a.buffer),S=(0,olidUtils.E)()?new Uint8Array(a.buffer):null,v=this.vertexBufferLayout.stride/4;let P=n*v;const N=P;let L=0;const b=d?(e,t,r)=>L=d[r]:(e,t,r)=>L+=(0,vec32.j)(e,t),C=(e,t,r,s,a,n,o)=>{if(I[P++]=t[0],I[P++]=t[1],I[P++]=t[2],I[P++]=e[0],I[P++]=e[1],I[P++]=e[2],I[P++]=r[0],I[P++]=r[1],I[P++]=r[2],I[P++]=s,I[P++]=o,I[P++]=a,I[P++]=_,R)I[P++]=A;else{const e=Math.min(4*n,E.length-4);I[P++]=E[e],I[P++]=E[e+1],I[P++]=E[e+2],I[P++]=E[e+3]}O&&(I[P++]=g),(0,olidUtils.E)()&&(i&&(S[4*P]=i[0],S[4*P+1]=i[1],S[4*P+2]=i[2],S[4*P+3]=i[3]),P++)};P+=v,(0,vec32.i)(l,m.data[0],m.data[1],m.data[2]),e&&(0,vec32.t)(l,l,e);const y=this._isClosed(r);if(y){const t=m.data.length-3;(0,vec32.i)(o,m.data[t],m.data[t+1],m.data[t+2]),e&&(0,vec32.t)(o,o,e)}else(0,vec32.i)(p,m.data[3],m.data[4],m.data[5]),e&&(0,vec32.t)(p,p,e),C(l,l,p,1,Z.LEFT_CAP_START,0,0),C(l,l,p,1,Z.RIGHT_CAP_START,0,0),(0,vec32.c)(o,l),(0,vec32.c)(l,p);const D=y?0:1,j=y?T:T-1;for(let h=D;h<j;h++){const t=(h+1)%T*3;(0,vec32.i)(p,m.data[t],m.data[t+1],m.data[t+2]),e&&(0,vec32.t)(p,p,e),b(o,l,h),C(o,l,p,0,Z.LEFT_JOIN_END,h,L),C(o,l,p,0,Z.RIGHT_JOIN_END,h,L);const r=this.numJoinSubdivisions;for(let e=0;e<r;++e){const t=(e+1)/(r+1);C(o,l,p,t,Z.LEFT_JOIN_END,h,L),C(o,l,p,t,Z.RIGHT_JOIN_END,h,L)}C(o,l,p,1,Z.LEFT_JOIN_START,h,L),C(o,l,p,1,Z.RIGHT_JOIN_START,h,L),(0,vec32.c)(o,l),(0,vec32.c)(l,p)}y?((0,vec32.i)(p,m.data[3],m.data[4],m.data[5]),e&&(0,vec32.t)(p,p,e),L=b(o,l,j),C(o,l,p,0,Z.LEFT_JOIN_END,D,L),C(o,l,p,0,Z.RIGHT_JOIN_END,D,L)):(L=b(o,l,j),C(o,l,l,0,Z.LEFT_CAP_END,j,L),C(o,l,l,0,Z.RIGHT_CAP_END,j,L)),Q(I,N+v,I,N,v),P=Q(I,P-v,I,P,v),this._parameters.wireframe&&this._addWireframeVertices(a,N,P,v)}_addWireframeVertices(e,t,r,i){const s=new Float32Array(e.buffer,r*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(e.buffer,t*Float32Array.BYTES_PER_ELEMENT,r-t);let n=0;const o=e=>n=Q(a,e,s,n,i);for(let l=0;l<a.length-1;l+=2*i)o(l),o(l+2*i),o(l+1*i),o(l+2*i),o(l+1*i),o(l+3*i)}}function Q(e,t,r,i,s){for(let a=0;a<s;a++)r[i++]=e[t++];return i}function K(e,t){return!!e.isClosed&&t.get(VertexAttribute.r.POSITION).indices.length>2}const ee=(0,vec3f64.vt)(),te=(0,vec3f64.vt)(),re=(0,vec3f64.vt)(),ie=(0,vec3f64.vt)(),se=(0,vec3f64.vt)(),ae=(0,screenUtils.r_)(),ne=(0,screenUtils.r_)(),oe=(0,vec3f64.vt)(),le=(0,vec3f64.vt)(),ce=(0,lineSegment.vt)(),pe=(0,lineSegment.vt)(),he=(0,vec3f64.vt)(),fe=(0,vec3f64.vt)(),me=(0,vec3f64.vt)(),ue=[(0,screenUtils.r_)(),(0,screenUtils.r_)(),(0,screenUtils.r_)(),(0,screenUtils.r_)()],Te=[(0,vec3f64.vt)(),(0,vec3f64.vt)(),(0,vec3f64.vt)(),(0,vec3f64.vt)()],de=(0,plane.vt)(),_e=(0,plane.vt)(),Ee=(0,plane.vt)(),Ae=(0,plane.vt)()},"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Dt:()=>a,kJ:()=>p,lM:()=>s});var s,p,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js"),_core_shaderLibrary_output_Emissions_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/Emissions.glsl.js"),_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),_materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js");!function(t){t[t.Draped=0]="Draped",t[t.Screen=1]="Screen",t[t.World=2]="World",t[t.COUNT=3]="COUNT"}(s||(s={})),function(t){t[t.Center=0]="Center",t[t.Tip=1]="Tip",t[t.COUNT=2]="COUNT"}(p||(p={}));class a extends _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__.E{constructor(){super(...arguments),this.space=s.Screen,this.anchor=p.Center,this.occluder=!1,this.writeDepth=!1,this.hideOnShortSegments=!1,this.hasCap=!1,this.hasTip=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.textureCoordinateType=_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_1__.I.None,this.emissionSource=_core_shaderLibrary_output_Emissions_glsl_js__WEBPACK_IMPORTED_MODULE_2__.ZX.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.hasVvInstancing=!0,this.hasSliceTranslatedView=!0,this.objectAndLayerIdColorInstanced=!1}get draped(){return this.space===s.Draped}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)({count:s.COUNT})],a.prototype,"space",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)({count:p.COUNT})],a.prototype,"anchor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],a.prototype,"occluder",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],a.prototype,"writeDepth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],a.prototype,"hideOnShortSegments",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],a.prototype,"hasCap",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],a.prototype,"hasTip",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],a.prototype,"vvSize",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],a.prototype,"vvColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],a.prototype,"vvOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],a.prototype,"hasOccludees",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],a.prototype,"terrainDepthTest",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],a.prototype,"cullAboveTerrain",void 0)},"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>p,x:()=>s});var s,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js"),_core_shaderLibrary_output_Emissions_glsl_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/Emissions.glsl.js"),_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js"),_materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js");!function(o){o[o.BUTT=0]="BUTT",o[o.SQUARE=1]="SQUARE",o[o.ROUND=2]="ROUND",o[o.COUNT=3]="COUNT"}(s||(s={}));class p extends _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__.E{constructor(){super(...arguments),this.capType=s.BUTT,this.hasPolygonOffset=!1,this.writeDepth=!1,this.draped=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stipplePreferContinuous=!0,this.roundJoins=!1,this.applyMarkerOffset=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.hasOccludees=!1,this.occluder=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.wireframe=!1,this.discardInvisibleFragments=!1,this.objectAndLayerIdColorInstanced=!1,this.textureCoordinateType=_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_1__.I.None,this.emissionSource=_core_shaderLibrary_output_Emissions_glsl_js__WEBPACK_IMPORTED_MODULE_2__.ZX.None,this.occlusionPass=!1,this.hasVvInstancing=!0,this.hasSliceTranslatedView=!0}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)({count:s.COUNT})],p.prototype,"capType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"hasPolygonOffset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"writeDepth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"draped",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"stippleEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"stippleOffColorEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"stipplePreferContinuous",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"roundJoins",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"applyMarkerOffset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"vvSize",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"vvColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"vvOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"falloffEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"innerColorEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"hasOccludees",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"occluder",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"terrainDepthTest",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"cullAboveTerrain",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"wireframe",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"discardInvisibleFragments",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__.W)()],p.prototype,"objectAndLayerIdColorInstanced",void 0)}}]);
//# sourceMappingURL=8297.cac27db3.iframe.bundle.js.map