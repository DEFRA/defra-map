"use strict";(self.webpackChunkdefraMap=self.webpackChunkdefraMap||[]).push([[2659,7210],{62693:function(t,e,r){function n(t,e,r){s(t.typedBuffer,e.typedBuffer,r,t.typedBufferStride,e.typedBufferStride)}function s(t,e,r,n=3,s=n){if(t.length/n!==Math.ceil(e.length/s))return t;const f=t.length/n,u=r[0],i=r[1],o=r[2],c=r[4],l=r[5],a=r[6],y=r[8],p=r[9],h=r[10],d=r[12],m=r[13],b=r[14];let B=0,g=0;for(let r=0;r<f;r++){const r=e[B],f=e[B+1],T=e[B+2];t[g]=u*r+c*f+y*T+d,t[g+1]=i*r+l*f+p*T+m,t[g+2]=o*r+a*f+h*T+b,B+=s,g+=n}return t}function f(t,e,r){u(t.typedBuffer,e.typedBuffer,r,t.typedBufferStride,e.typedBufferStride)}function u(t,e,r,n=3,s=n){if(t.length/n!==Math.ceil(e.length/s))return;const f=t.length/n,u=r[0],i=r[1],o=r[2],c=r[3],l=r[4],a=r[5],y=r[6],p=r[7],h=r[8];let d=0,m=0;for(let r=0;r<f;r++){const r=e[d],f=e[d+1],b=e[d+2];t[m]=u*r+c*f+y*b,t[m+1]=i*r+l*f+p*b,t[m+2]=o*r+a*f+h*b,d+=s,m+=n}}function i(t,e,r){o(t.typedBuffer,e.typedBuffer,r,t.typedBufferStride,e.typedBufferStride)}function o(t,e,r,n=3,s=n){const f=Math.min(t.length/n,e.length/s);let u=0,i=0;for(let o=0;o<f;o++)t[i]=r*e[u],t[i+1]=r*e[u+1],t[i+2]=r*e[u+2],u+=s,i+=n;return t}function c(t,e,r,n=3,s=n){const f=t.length/n;if(f!==Math.ceil(e.length/s))return t;let u=0,i=0;for(let o=0;o<f;o++)t[i]=e[u]+r[0],t[i+1]=e[u+1]+r[1],t[i+2]=e[u+2]+r[2],u+=s,i+=n;return t}function l(t,e){a(t.typedBuffer,e.typedBuffer,t.typedBufferStride,e.typedBufferStride)}function a(t,e,r=3,n=r){const s=Math.min(t.length/r,e.length/n);let f=0,u=0;for(let i=0;i<s;i++){const s=e[f],i=e[f+1],o=e[f+2],c=s*s+i*i+o*o;if(c>0){const e=1/Math.sqrt(c);t[u]=e*s,t[u+1]=e*i,t[u+2]=e*o}f+=n,u+=r}}r.d(e,{a:function(){return s},b:function(){return c},c:function(){return f},d:function(){return n},e:function(){return l},f:function(){return i},n:function(){return a},s:function(){return o},t:function(){return u}}),r(58941),r(40633),Object.freeze(Object.defineProperty({__proto__:null,normalize:a,normalizeView:l,scale:o,scaleView:i,shiftRight:function(t,e,r){const n=Math.min(t.count,e.count),s=t.typedBuffer,f=t.typedBufferStride,u=e.typedBuffer,i=e.typedBufferStride;let o=0,c=0;for(let t=0;t<n;t++)s[c]=u[o]>>r,s[c+1]=u[o+1]>>r,s[c+2]=u[o+2]>>r,o+=i,c+=f},transformMat3:u,transformMat3View:f,transformMat4:s,transformMat4View:n,translate:c},Symbol.toStringTag,{value:"Module"}))},32003:function(t,e,r){r.d(e,{a:function(){return s},b:function(){return i},n:function(){return u},s:function(){return o},t:function(){return f}}),r(58941);var n=r(40633);function s(t,e,r){f(t.typedBuffer,e.typedBuffer,r,t.typedBufferStride,e.typedBufferStride)}function f(t,e,r,n=4,s=n){if(t.length/n!=e.length/s)return;const f=t.length/n,u=r[0],i=r[1],o=r[2],c=r[3],l=r[4],a=r[5],y=r[6],p=r[7],h=r[8];let d=0,m=0;for(let r=0;r<f;r++){const r=e[d],f=e[d+1],b=e[d+2],B=e[d+3];t[m]=u*r+c*f+y*b,t[m+1]=i*r+l*f+p*b,t[m+2]=o*r+a*f+h*b,t[m+3]=B,d+=s,m+=n}}function u(t,e){const r=Math.min(t.count,e.count),n=t.typedBuffer,s=t.typedBufferStride,f=e.typedBuffer,u=e.typedBufferStride;for(let t=0;t<r;t++){const e=t*s,r=t*u,i=f[r],o=f[r+1],c=f[r+2],l=i*i+o*o+c*c;if(l>0){const t=1/Math.sqrt(l);n[e]=t*i,n[e+1]=t*o,n[e+2]=t*c}}}function i(t,e,r){o(t.typedBuffer,e,r,t.typedBufferStride)}function o(t,e,r,n=4){const s=Math.min(t.length/n,e.count),f=e.typedBuffer,u=e.typedBufferStride;let i=0,o=0;for(let e=0;e<s;e++)t[o]=r*f[i],t[o+1]=r*f[i+1],t[o+2]=r*f[i+2],t[o+3]=r*f[i+3],i+=u,o+=n}Object.freeze(Object.defineProperty({__proto__:null,normalize:u,scale:o,scaleView:i,transformMat3:f,transformMat3View:s,transformMat4:function(t,e,r,s=4,f=s){if(t.length/s!=e.length/f)return void n.A.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const u=t.length/s,i=r[0],o=r[1],c=r[2],l=r[3],a=r[4],y=r[5],p=r[6],h=r[7],d=r[8],m=r[9],b=r[10],B=r[11],g=r[12],T=r[13],E=r[14],A=r[15];let M=0,S=0;for(let r=0;r<u;r++){const r=e[M],n=e[M+1],u=e[M+2],O=e[M+3];t[S]=i*r+a*n+d*u+g*O,t[S+1]=o*r+y*n+m*u+T*O,t[S+2]=c*r+p*n+b*u+E*O,t[S+3]=l*r+h*n+B*u+A*O,M+=f,S+=s}},transformMat4View:function(t,e,r){if(t.count!==e.count)return;const n=t.count,s=r[0],f=r[1],u=r[2],i=r[3],o=r[4],c=r[5],l=r[6],a=r[7],y=r[8],p=r[9],h=r[10],d=r[11],m=r[12],b=r[13],B=r[14],g=r[15],T=t.typedBuffer,E=t.typedBufferStride,A=e.typedBuffer,M=e.typedBufferStride;for(let t=0;t<n;t++){const e=t*E,r=t*M,n=A[r],S=A[r+1],O=A[r+2],w=A[r+3];T[e]=s*n+o*S+y*O+m*w,T[e+1]=f*n+c*S+p*O+b*w,T[e+2]=u*n+l*S+h*O+B*w,T[e+3]=i*n+a*S+d*O+g*w}}},Symbol.toStringTag,{value:"Module"}))},44705:function(t,e,r){r.d(e,{B8:function(){return o},D_:function(){return u},Ge:function(){return B},I0:function(){return m},KC:function(){return c},Oe:function(){return h},Tl:function(){return a},dR:function(){return b},e$:function(){return y},hZ:function(){return f},hs:function(){return p},kN:function(){return d},lw:function(){return l},mg:function(){return i},z0:function(){return s}});var n=r(8527);function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function f(t,e,r,n,s,f,u,i,o,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=s,t[4]=f,t[5]=u,t[6]=i,t[7]=o,t[8]=c,t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function i(t,e){if(t===e){const r=e[1],n=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function o(t,e){const r=e[0],n=e[1],s=e[2],f=e[3],u=e[4],i=e[5],o=e[6],c=e[7],l=e[8],a=l*u-i*c,y=-l*f+i*o,p=c*f-u*o;let h=r*a+n*y+s*p;return h?(h=1/h,t[0]=a*h,t[1]=(-l*n+s*c)*h,t[2]=(i*n-s*u)*h,t[3]=y*h,t[4]=(l*r-s*o)*h,t[5]=(-i*r+s*f)*h,t[6]=p*h,t[7]=(-c*r+n*o)*h,t[8]=(u*r-n*f)*h,t):null}function c(t,e){const r=e[0],n=e[1],s=e[2],f=e[3],u=e[4],i=e[5],o=e[6],c=e[7],l=e[8];return t[0]=u*l-i*c,t[1]=s*c-n*l,t[2]=n*i-s*u,t[3]=i*o-f*l,t[4]=r*l-s*o,t[5]=s*f-r*i,t[6]=f*c-u*o,t[7]=n*o-r*c,t[8]=r*u-n*f,t}function l(t,e,r){const n=e[0],s=e[1],f=e[2],u=e[3],i=e[4],o=e[5],c=e[6],l=e[7],a=e[8],y=r[0],p=r[1],h=r[2],d=r[3],m=r[4],b=r[5],B=r[6],g=r[7],T=r[8];return t[0]=y*n+p*u+h*c,t[1]=y*s+p*i+h*l,t[2]=y*f+p*o+h*a,t[3]=d*n+m*u+b*c,t[4]=d*s+m*i+b*l,t[5]=d*f+m*o+b*a,t[6]=B*n+g*u+T*c,t[7]=B*s+g*i+T*l,t[8]=B*f+g*o+T*a,t}function a(t,e,r){const n=e[0],s=e[1],f=e[2],u=e[3],i=e[4],o=e[5],c=e[6],l=e[7],a=e[8],y=r[0],p=r[1];return t[0]=n,t[1]=s,t[2]=f,t[3]=u,t[4]=i,t[5]=o,t[6]=y*n+p*u+c,t[7]=y*s+p*i+l,t[8]=y*f+p*o+a,t}function y(t,e,r){const n=e[0],s=e[1],f=e[2],u=e[3],i=e[4],o=e[5],c=e[6],l=e[7],a=e[8],y=Math.sin(r),p=Math.cos(r);return t[0]=p*n+y*u,t[1]=p*s+y*i,t[2]=p*f+y*o,t[3]=p*u-y*n,t[4]=p*i-y*s,t[5]=p*o-y*f,t[6]=c,t[7]=l,t[8]=a,t}function p(t,e,r){const n=r[0],s=r[1],f=r[2];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=f*e[6],t[7]=f*e[7],t[8]=f*e[8],t}function h(t,e,r){const n=r[0],s=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t}function d(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function m(t,e){const r=e[0],n=e[1],s=e[2],f=e[3],u=r+r,i=n+n,o=s+s,c=r*u,l=n*u,a=n*i,y=s*u,p=s*i,h=s*o,d=f*u,m=f*i,b=f*o;return t[0]=1-a-h,t[3]=l-b,t[6]=y+m,t[1]=l+b,t[4]=1-c-h,t[7]=p-d,t[2]=y-m,t[5]=p+d,t[8]=1-c-a,t}function b(t,e){const r=e[0],n=e[1],s=e[2],f=e[4],u=e[5],i=e[6],o=e[8],c=e[9],l=e[10],a=l*u-i*c,y=-l*f+i*o,p=c*f-u*o,h=r*a+n*y+s*p;if(!h)return null;const d=1/h;return t[0]=a*d,t[1]=(-l*n+s*c)*d,t[2]=(i*n-s*u)*d,t[3]=y*d,t[4]=(l*r-s*o)*d,t[5]=(-i*r+s*f)*d,t[6]=p*d,t[7]=(-c*r+n*o)*d,t[8]=(u*r-n*f)*d,t}function B(t,e){const r=e[0],n=e[1],s=e[2],f=e[3],u=e[4],i=e[5],o=e[6],c=e[7],l=e[8],a=e[9],y=e[10],p=e[11],h=e[12],d=e[13],m=e[14],b=e[15],B=r*i-n*u,g=r*o-s*u,T=r*c-f*u,E=n*o-s*i,A=n*c-f*i,M=s*c-f*o,S=l*d-a*h,O=l*m-y*h,w=l*b-p*h,L=a*m-y*d,_=a*b-p*d,x=y*b-p*m;let v=B*x-g*_+T*L+E*w-A*O+M*S;return v?(v=1/v,t[0]=(i*x-o*_+c*L)*v,t[1]=(o*w-u*x-c*O)*v,t[2]=(u*_-i*w+c*S)*v,t[3]=(s*_-n*x-f*L)*v,t[4]=(r*x-s*w+f*O)*v,t[5]=(n*w-r*_-f*S)*v,t[6]=(d*M-m*A+b*E)*v,t[7]=(m*T-h*M-b*g)*v,t[8]=(h*A-d*T+b*B)*v,t):null}function g(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}const T=l,E=g;Object.freeze(Object.defineProperty({__proto__:null,add:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},adjoint:c,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},determinant:function(t){const e=t[0],r=t[1],n=t[2],s=t[3],f=t[4],u=t[5],i=t[6],o=t[7],c=t[8];return e*(c*f-u*o)+r*(-c*s+u*i)+n*(o*s-f*i)},equals:function(t,e){const r=t[0],s=t[1],f=t[2],u=t[3],i=t[4],o=t[5],c=t[6],l=t[7],a=t[8],y=e[0],p=e[1],h=e[2],d=e[3],m=e[4],b=e[5],B=e[6],g=e[7],T=e[8],E=(0,n.FD)();return Math.abs(r-y)<=E*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(s-p)<=E*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(f-h)<=E*Math.max(1,Math.abs(f),Math.abs(h))&&Math.abs(u-d)<=E*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(i-m)<=E*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(o-b)<=E*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(c-B)<=E*Math.max(1,Math.abs(c),Math.abs(B))&&Math.abs(l-g)<=E*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(a-T)<=E*Math.max(1,Math.abs(a),Math.abs(T))},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)},fromMat2d:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromMat4:s,fromQuat:m,fromRotation:function(t,e){const r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromTranslation:d,identity:u,invert:o,isOrthoNormal:function(t){const e=(0,n.FD)(),r=t[0],s=t[1],f=t[2],u=t[3],i=t[4],o=t[5],c=t[6],l=t[7],a=t[8];return Math.abs(1-(r*r+u*u+c*c))<=e&&Math.abs(1-(s*s+i*i+l*l))<=e&&Math.abs(1-(f*f+o*o+a*a))<=e},mul:T,multiply:l,multiplyScalar:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},multiplyScalarAndAdd:function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},normalFromMat4:B,normalFromMat4Legacy:b,projection:function(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},rotate:y,scale:p,scaleByVec2:h,set:f,str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},sub:E,subtract:g,translate:a,transpose:i},Symbol.toStringTag,{value:"Module"}))},7456:function(t,e,r){r.d(e,{l:function(){return c}});var n=r(15774),s=r(73364),f=r(32501),u=r(46098),i=r(61441),o=r(57652);function c(t,e,r,n){if(null==t||null==n)return!1;const f=(0,i.Qk)(t,i.Wv),c=(0,i.Qk)(n,i.zp);if(f===c&&!l(c)&&(f!==i.rz.UNKNOWN||(0,o.aI)(t,n)))return(0,s.kN)(r,e),!0;if(l(c)){const t=i.w5[f][i.rz.LON_LAT],n=i.w5[i.rz.LON_LAT][c];return null!=t&&null!=n&&(t(e,0,y,0),n(y,0,p,0),(0,u.y)(a*y[0],a*y[1],r),r[12]=p[0],r[13]=p[1],r[14]=p[2],!0)}if(!(c!==i.rz.WEB_MERCATOR&&c!==i.rz.PLATE_CARREE&&c!==i.rz.WGS84&&c!==i.rz.CGCS2000||f!==i.rz.WGS84&&f!==i.rz.SPHERICAL_ECEF&&f!==i.rz.WEB_MERCATOR&&f!==i.rz.CGCS2000)){const t=i.w5[f][i.rz.LON_LAT],n=i.w5[i.rz.LON_LAT][c];return null!=t&&null!=n&&(t(e,0,y,0),n(y,0,p,0),f===i.rz.SPHERICAL_ECEF?(0,u.C)(a*y[0],a*y[1],r):(0,s.D_)(r),r[12]=p[0],r[13]=p[1],r[14]=p[2],!0)}return!1}function l(t){return t===i.rz.SPHERICAL_ECEF||t===i.rz.SPHERICAL_MARS_PCPF||t===i.rz.SPHERICAL_MOON_PCPF}const a=(0,n.kU)(1),y=(0,f.vt)(),p=(0,f.vt)()},46098:function(t,e,r){r.d(e,{C:function(){return f},y:function(){return s}});var n=r(73364);function s(t,e,r){const n=Math.sin(t),s=Math.cos(t),f=Math.sin(e),u=Math.cos(e),i=r;return i[0]=-n,i[4]=-f*s,i[8]=u*s,i[12]=0,i[1]=s,i[5]=-f*n,i[9]=u*n,i[13]=0,i[2]=0,i[6]=u,i[10]=f,i[14]=0,i[3]=0,i[7]=0,i[11]=0,i[15]=1,i}function f(t,e,r){return s(t,e,r),(0,n.mg)(r,r),r}},56763:function(t,e,r){r.d(e,{W:function(){return i},g:function(){return u}});var n=r(32501),s=r(46157),f=r(57617);function u(t,e,r,n){if((0,s.canProjectWithoutEngine)(t.spatialReference,r)){o[0]=t.x,o[1]=t.y;const s=t.z;return o[2]=s??n??0,(0,f.projectBuffer)(o,t.spatialReference,0,e,r,0,1)}const u=(0,s.tryProjectWithZConversion)(t,r);return!!u&&(e[0]=u?.x,e[1]=u?.y,e[2]=u?.z??n??0,!0)}async function i(t,e,r,n,f){return await(0,s.initializeProjection)(t.spatialReference,r,null,f),u(t,e,r,n)}const o=(0,n.vt)()},96611:function(t,e,r){r.d(e,{Y0:function(){return c},lO:function(){return l}});var n=r(61714),s=r(57165),f=r(57652);const u=new s.A(n.fv),i=new s.A(n.FY),o=new s.A(n.LJ),c=new s.A(n.Ro);function l(t){const e=a.get(t);if(e)return e;let r=u;if(t)if(t===i)r=i;else if(t===o)r=o;else{const e=t.wkid,n=t.latestWkid;if(null!=e||null!=n)(0,f.tl)(e)||(0,f.tl)(n)?r=i:((0,f.ZL)(e)||(0,f.ZL)(n))&&(r=o);else{const e=t.wkt2??t.wkt;if(e){const t=e.toUpperCase();t===y?r=i:t===p&&(r=o)}}}return a.set(t,r),r}const a=new Map,y=i.wkt.toUpperCase(),p=o.wkt.toUpperCase()},50240:function(t,e,r){r.d(e,{Ns:function(){return o},jh:function(){return s},l5:function(){return u},s:function(){return i},xm:function(){return f}});var n=r(24540);function s(t,e=!1){return t<=n.y9?e?new Array(t).fill(0):new Array(t):new Float64Array(t)}function f(t){return((0,n.cy)(t)?t.length:t.byteLength/8)<=n.y9?Array.from(t):new Float64Array(t)}function u(t,e,r){return Array.isArray(t)?t.slice(e,e+r):t.subarray(e,e+r)}function i(t,e){for(let r=0;r<e.length;++r)t[r]=e[r];return t}function o(t){return Array.isArray(t)?new Float64Array(t):t}},7186:function(t,e,r){r.d(e,{H:function(){return a},b:function(){return p}});var n,s=r(53804),f=r(30905),u=r(21609),i=r(40633),o=r(23502),c=r(77560),l=r(65953);let a=n=class extends f.oY{constructor(t){super(t),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(t){return p(t,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},i.A.getLogger(this))}castPosition(t){return t&&t instanceof Float32Array&&i.A.getLogger(this).warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),p(t,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},i.A.getLogger(this))}castUv(t){return p(t,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},i.A.getLogger(this))}castNormal(t){return p(t,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},i.A.getLogger(this))}castTangent(t){return p(t,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},i.A.getLogger(this))}clone(){const t={position:(0,u.o8)(this.position),uv:(0,u.o8)(this.uv),normal:(0,u.o8)(this.normal),tangent:(0,u.o8)(this.tangent),color:(0,u.o8)(this.color)};return new n(t)}clonePositional(){const t={position:(0,u.o8)(this.position),normal:(0,u.o8)(this.normal),tangent:(0,u.o8)(this.tangent),uv:this.uv,color:this.color};return new n(t)}get memoryUsage(){let t=0;return t+=this.position.byteLength,null!=this.uv&&(t+=this.uv.byteLength),null!=this.normal&&(t+=this.normal.byteLength),null!=this.tangent&&(t+=this.tangent.byteLength),null!=this.color&&(t+=this.color.byteLength),t}};function y(t,e,r,n){const{loggerTag:s,stride:f}=e;return t.length%f!=0?(n.error(s,`Invalid array length, expected a multiple of ${f}`),new r([])):t}function p(t,e,r,n,s){if(!t)return t;if(t instanceof e)return y(t,n,e,s);for(const f of r)if(t instanceof f)return y(new e(t),n,e,s);if(Array.isArray(t))return y(new e(t),n,e,s);{const n=r.map((t=>`'${t.name}'`));return s.error(`Failed to set property, expected one of ${n}, but got ${t.constructor.name}`),new e([])}}function h(t,e,r){e[r]=function(t){const e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=t[r];return e}(t)}(0,s._)([(0,o.MZ)({json:{write:h}})],a.prototype,"color",void 0),(0,s._)([(0,c.w)("color")],a.prototype,"castColor",null),(0,s._)([(0,o.MZ)({nonNullable:!0,json:{write:h}})],a.prototype,"position",void 0),(0,s._)([(0,c.w)("position")],a.prototype,"castPosition",null),(0,s._)([(0,o.MZ)({json:{write:h}})],a.prototype,"uv",void 0),(0,s._)([(0,c.w)("uv")],a.prototype,"castUv",null),(0,s._)([(0,o.MZ)({json:{write:h}})],a.prototype,"normal",void 0),(0,s._)([(0,c.w)("normal")],a.prototype,"castNormal",null),(0,s._)([(0,o.MZ)({json:{write:h}})],a.prototype,"tangent",void 0),(0,s._)([(0,c.w)("tangent")],a.prototype,"castTangent",null),a=n=(0,s._)([(0,l.$)("esri.geometry.support.MeshVertexAttributes")],a)},92754:function(t,e,r){r.d(e,{Y$:function(){return y},qB:function(){return T},Qt:function(){return V},My:function(){return $},bf:function(){return z},jZ:function(){return m},j0:function(){return b},Sx:function(){return B},E$:function(){return g},h:function(){return _},P:function(){return R},SL:function(){return S},gH:function(){return p},si:function(){return E},mJ:function(){return I},UL:function(){return K},D6:function(){return U},Yi:function(){return x},An:function(){return N},LC:function(){return O},xs:function(){return h},Xm:function(){return A},Vp:function(){return k},zD:function(){return X},m8:function(){return j},nS:function(){return v},H$:function(){return F},eI:function(){return w},Eq:function(){return d},Aj:function(){return M},E7:function(){return G},Y4:function(){return W},TX:function(){return Y},Uz:function(){return C},ml:function(){return P},XP:function(){return L}});class n{constructor(t,e,r=0,n,s){this.TypedArrayConstructor=t,this.elementCount=9;const f=this.TypedArrayConstructor;void 0===n&&(n=9*f.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new f(e,u):new f(e,u,(s-r)/f.BYTES_PER_ELEMENT),this.typedBufferStride=n/f.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const n=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,n,this.stride,n+r*this.stride)}getMat(t,e){let r=t*this.typedBufferStride;for(let t=0;t<9;t++)e[t]=this.typedBuffer[r++];return e}setMat(t,e){let r=t*this.typedBufferStride;for(let t=0;t<9;t++)this.typedBuffer[r++]=e[t]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){const n=this.typedBuffer,s=e.typedBuffer;let f=t*this.typedBufferStride,u=r*e.typedBufferStride;for(let t=0;t<9;++t)n[f++]=s[u++]}get buffer(){return this.typedBuffer.buffer}}n.ElementCount=9;class s{constructor(t,e,r=0,n,s){this.TypedArrayConstructor=t,this.elementCount=16;const f=this.TypedArrayConstructor;void 0===n&&(n=16*f.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new f(e,u):new f(e,u,(s-r)/f.BYTES_PER_ELEMENT),this.typedBufferStride=n/f.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const n=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,n,this.stride,n+r*this.stride)}getMat(t,e){let r=t*this.typedBufferStride;for(let t=0;t<16;t++)e[t]=this.typedBuffer[r++];return e}setMat(t,e){let r=t*this.typedBufferStride;for(let t=0;t<16;t++)this.typedBuffer[r++]=e[t]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){const n=this.typedBuffer,s=e.typedBuffer;let f=t*this.typedBufferStride,u=r*e.typedBufferStride;for(let t=0;t<16;++t)n[f++]=s[u++]}get buffer(){return this.typedBuffer.buffer}}s.ElementCount=16;class f{constructor(t,e,r=0,n,s){this.TypedArrayConstructor=t,this.elementCount=1;const f=this.TypedArrayConstructor;void 0===n&&(n=f.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new f(e,u):new f(e,u,(s-r)/f.BYTES_PER_ELEMENT),this.stride=n,this.typedBufferStride=n/f.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(t,e,r=this.count-e){const n=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,n,this.stride,n+r*this.stride)}get(t){return this.typedBuffer[t*this.typedBufferStride]}set(t,e){this.typedBuffer[t*this.typedBufferStride]=e}get buffer(){return this.typedBuffer.buffer}}f.ElementCount=1;var u=r(13786);class i{constructor(t,e,r=0,n,s){this.TypedArrayConstructor=t,this.elementCount=2;const f=this.TypedArrayConstructor;void 0===n&&(n=2*f.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new f(e,u):new f(e,u,(s-r)/f.BYTES_PER_ELEMENT),this.typedBufferStride=n/f.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const n=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,n,this.stride,n+r*this.stride)}getVec(t,e){return t*=this.typedBufferStride,(0,u.hZ)(e,this.typedBuffer[t],this.typedBuffer[t+1])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t]=e[1]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t]=r}copyFrom(t,e,r){const n=this.typedBuffer,s=e.typedBuffer;let f=t*this.typedBufferStride,u=r*e.typedBufferStride;n[f++]=s[u++],n[f]=s[u]}get buffer(){return this.typedBuffer.buffer}}i.ElementCount=2;var o=r(20551);class c{constructor(t,e,r=0,n,s){this.TypedArrayConstructor=t,this.elementCount=3;const f=this.TypedArrayConstructor;void 0===n&&(n=3*f.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new f(e,u):new f(e,u,(s-r)/f.BYTES_PER_ELEMENT),this.typedBufferStride=n/f.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const n=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,n,this.stride,n+r*this.stride)}getVec(t,e){return t*=this.typedBufferStride,(0,o.s)(e,this.typedBuffer[t],this.typedBuffer[t+1],this.typedBuffer[t+2])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t++]=e[1],this.typedBuffer[t]=e[2]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,n){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t++]=r,this.typedBuffer[t]=n}copyFrom(t,e,r){const n=this.typedBuffer,s=e.typedBuffer;let f=t*this.typedBufferStride,u=r*e.typedBufferStride;n[f++]=s[u++],n[f++]=s[u++],n[f]=s[u]}get buffer(){return this.typedBuffer.buffer}}c.ElementCount=3;var l=r(33400);class a{constructor(t,e,r=0,n,s){this.TypedArrayConstructor=t,this.start=r,this.elementCount=4;const f=this.TypedArrayConstructor;void 0===n&&(n=4*f.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new f(e,u):new f(e,u,(s-r)/f.BYTES_PER_ELEMENT),this.typedBufferStride=n/f.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const n=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,n,this.stride,n+r*this.stride)}getVec(t,e){return t*=this.typedBufferStride,(0,l.s)(e,this.typedBuffer[t++],this.typedBuffer[t++],this.typedBuffer[t++],this.typedBuffer[t])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t++]=e[1],this.typedBuffer[t++]=e[2],this.typedBuffer[t]=e[3]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,n,s){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t++]=r,this.typedBuffer[t++]=n,this.typedBuffer[t]=s}copyFrom(t,e,r){const n=this.typedBuffer,s=e.typedBuffer;let f=t*this.typedBufferStride,u=r*e.typedBufferStride;n[f++]=s[u++],n[f++]=s[u++],n[f++]=s[u++],n[f]=s[u]}get buffer(){return this.typedBuffer.buffer}}a.ElementCount=4;class y extends f{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}static fromTypedArray(t,e){return new y(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}y.ElementType="f32";class p extends i{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}slice(t,e){return this.sliceBuffer(p,t,e)}static fromTypedArray(t,e){return new p(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}p.ElementType="f32";class h extends c{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}slice(t,e){return this.sliceBuffer(h,t,e)}static fromTypedArray(t,e){return new h(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}h.ElementType="f32";class d extends a{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}slice(t,e){return this.sliceBuffer(d,t,e)}static fromTypedArray(t,e){return new d(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}d.ElementType="f32";class m extends n{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}slice(t,e){return this.sliceBuffer(m,t,e)}static fromTypedArray(t,e){return new m(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}m.ElementType="f32";class b extends n{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}slice(t,e){return this.sliceBuffer(b,t,e)}static fromTypedArray(t,e){return new b(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}b.ElementType="f64";class B extends s{constructor(t,e=0,r,n){super(Float32Array,t,e,r,n),this.elementType="f32"}slice(t,e){return this.sliceBuffer(B,t,e)}static fromTypedArray(t,e){return new B(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}B.ElementType="f32";class g extends s{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}slice(t,e){return this.sliceBuffer(g,t,e)}static fromTypedArray(t,e){return new g(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}g.ElementType="f64";class T extends f{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}slice(t,e){return this.sliceBuffer(T,t,e)}static fromTypedArray(t,e){return new T(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}T.ElementType="f64";class E extends i{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}slice(t,e){return this.sliceBuffer(E,t,e)}static fromTypedArray(t,e){return new E(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}E.ElementType="f64";class A extends c{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}slice(t,e){return this.sliceBuffer(A,t,e)}static fromTypedArray(t,e){return new A(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}A.ElementType="f64";class M extends a{constructor(t,e=0,r,n){super(Float64Array,t,e,r,n),this.elementType="f64"}slice(t,e){return this.sliceBuffer(M,t,e)}static fromTypedArray(t,e){return new M(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}M.ElementType="f64";class S extends f{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}slice(t,e){return this.sliceBuffer(S,t,e)}static fromTypedArray(t,e){return new S(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}S.ElementType="u8";class O extends i{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}slice(t,e){return this.sliceBuffer(O,t,e)}static fromTypedArray(t,e){return new O(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}O.ElementType="u8";class w extends c{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}slice(t,e){return this.sliceBuffer(w,t,e)}static fromTypedArray(t,e){return new w(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}w.ElementType="u8";class L extends a{constructor(t,e=0,r,n){super(Uint8Array,t,e,r,n),this.elementType="u8"}slice(t,e){return this.sliceBuffer(L,t,e)}static fromTypedArray(t,e){return new L(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}L.ElementType="u8";class _ extends f{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}slice(t,e){return this.sliceBuffer(_,t,e)}static fromTypedArray(t,e){return new _(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}_.ElementType="u16";class x extends i{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}slice(t,e){return this.sliceBuffer(x,t,e)}static fromTypedArray(t,e){return new x(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}x.ElementType="u16";class v extends c{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}slice(t,e){return this.sliceBuffer(v,t,e)}static fromTypedArray(t,e){return new v(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}v.ElementType="u16";class C extends a{constructor(t,e=0,r,n){super(Uint16Array,t,e,r,n),this.elementType="u16"}slice(t,e){return this.sliceBuffer(C,t,e)}static fromTypedArray(t,e){return new C(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}C.ElementType="u16";class R extends f{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}slice(t,e){return this.sliceBuffer(R,t,e)}static fromTypedArray(t,e){return new R(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}R.ElementType="u32";class N extends i{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}slice(t,e){return this.sliceBuffer(N,t,e)}static fromTypedArray(t,e){return new N(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}N.ElementType="u32";class F extends c{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}slice(t,e){return this.sliceBuffer(F,t,e)}static fromTypedArray(t,e){return new F(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}F.ElementType="u32";class P extends a{constructor(t,e=0,r,n){super(Uint32Array,t,e,r,n),this.elementType="u32"}slice(t,e){return this.sliceBuffer(P,t,e)}static fromTypedArray(t,e){return new P(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}P.ElementType="u32";class z extends f{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}slice(t,e){return this.sliceBuffer(z,t,e)}static fromTypedArray(t,e){return new z(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}z.ElementType="i8";class U extends i{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}slice(t,e){return this.sliceBuffer(U,t,e)}static fromTypedArray(t,e){return new U(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}U.ElementType="i8";class j extends c{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}slice(t,e){return this.sliceBuffer(j,t,e)}static fromTypedArray(t,e){return new j(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}j.ElementType="i8";class Y extends a{constructor(t,e=0,r,n){super(Int8Array,t,e,r,n),this.elementType="i8"}slice(t,e){return this.sliceBuffer(Y,t,e)}static fromTypedArray(t,e){return new Y(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}Y.ElementType="i8";class V extends f{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}slice(t,e){return this.sliceBuffer(V,t,e)}static fromTypedArray(t,e){return new V(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}V.ElementType="i16";class I extends i{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}slice(t,e){return this.sliceBuffer(I,t,e)}static fromTypedArray(t,e){return new I(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}I.ElementType="i16";class k extends c{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}slice(t,e){return this.sliceBuffer(k,t,e)}static fromTypedArray(t,e){return new k(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}k.ElementType="i16";class G extends a{constructor(t,e=0,r,n){super(Int16Array,t,e,r,n),this.elementType="i16"}slice(t,e){return this.sliceBuffer(G,t,e)}static fromTypedArray(t,e){return new G(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}G.ElementType="i16";class $ extends f{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}slice(t,e){return this.sliceBuffer($,t,e)}static fromTypedArray(t,e){return new $(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}$.ElementType="i32";class K extends i{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}slice(t,e){return this.sliceBuffer(K,t,e)}static fromTypedArray(t,e){return new K(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}K.ElementType="i32";class X extends c{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}slice(t,e){return this.sliceBuffer(X,t,e)}static fromTypedArray(t,e){return new X(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}X.ElementType="i32";class W extends a{constructor(t,e=0,r,n){super(Int32Array,t,e,r,n),this.elementType="i32"}slice(t,e){return this.sliceBuffer(W,t,e)}static fromTypedArray(t,e){return new W(t.buffer,t.byteOffset,e,t.byteOffset+t.byteLength)}}W.ElementType="i32"},1993:function(t,e,r){r.d(e,{convertMeshVertexSpace:function(){return o}});var n=r(39819),s=r(21609),f=r(60539),u=r(7186),i=r(20007);async function o(t,e,r){await Promise.resolve(),(0,f.Te)(r);const o=(0,i.UR)(t,e);if(!o)throw new n.A("meshUtils:convertVertexSpace()","Failed to convert to provided vertex space due to projection errors");const c=t.cloneAndModifyVertexAttributes(new u.H({...o,uv:(0,s.o8)(t.vertexAttributes.uv),color:(0,s.o8)(t.vertexAttributes.color)}),e);return c.transform=null,c}},83614:function(t,e,r){r.d(e,{$5:function(){return w},CN:function(){return A},GN:function(){return v},JP:function(){return E},KM:function(){return _},Mv:function(){return N},OD:function(){return F},X4:function(){return M},gZ:function(){return x},gr:function(){return O},project:function(){return Y},qs:function(){return L},si:function(){return S},xA:function(){return R}});var n=r(15774),s=r(44705),f=r(87725),u=r(73364),i=r(39714),o=r(20551),c=r(32501),l=r(46157),a=r(96611),y=r(7456),p=r(57617),h=r(50240),d=r(43587),m=r(57652),b=r(1644),B=r(92754),g=r(62693),T=r(32003);const E="Projection may be possible after calling projection.load().";function A(t,e,r,n){t.error(`Failed to project from (wkid:${e.wkid}) to (wkid:${r.wkid}).${n?" ":""}${n}`)}function M(t,e,r,n,s){return j(P.TO_PCPF,B.xs.fromTypedArray(t),F.NORMAL,B.Xm.fromTypedArray(e),B.Xm.fromTypedArray(r),n,B.xs.fromTypedArray(s))?s:null}function S(t,e,r,n,s){return j(P.FROM_PCPF,B.xs.fromTypedArray(t),F.NORMAL,B.Xm.fromTypedArray(e),B.Xm.fromTypedArray(r),n,B.xs.fromTypedArray(s))?s:null}function O(t,e,r){return(0,p.projectBuffer)(t,e,0,r,(0,a.lO)(e),0,t.length/3)?r:null}function w(t,e,r){return(0,p.projectBuffer)(t,(0,a.lO)(r),0,e,r,0,t.length/3)?e:null}function L(t,e,r){return(0,s.Ge)(G,r),(0,g.t)(e,t,G),(0,n.or)(G)&&(0,g.n)(e,e),e}function _(t,e,r){return(0,s.z0)(G,r),(0,T.t)(e,t,G),(0,n.or)(G)&&(0,g.n)(e,e,4),e}function x(t,e,r,s){const f=e===F.NORMAL;return C(t,e,r,((t,e)=>{const r=Math.cos((0,n.kU)(t));e[0]=f?r:1/r,e[1]=1}),s)}function v(t,e,r,n){const s=e===F.NORMAL;return C(t,e,r,((t,e)=>{const r=Math.cosh(-t/d.$O.radius);e[0]=1,e[1]=s?r:1/r}),n)}function C(t,e,r,n,s){const f=e===F.NORMAL?3:4,u=[0,0];for(let e=0,i=1;e<t.length;e+=f,i+=3){n(r[i],u);const o=t[e]*u[0],c=t[e+1]*u[1],l=t[e+2],a=1/Math.sqrt(o*o+c*c+l*l);s[e]=o*a,s[e+1]=c*a,s[e+2]=l*a,4===f&&(s[e+3]=t[e+3])}return s}function R(t,e,r,n,s){if(!j(P.TO_PCPF,B.xs.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),F.TANGENT,B.Xm.fromTypedArray(e),B.Xm.fromTypedArray(r),n,B.xs.fromTypedArray(s,4*Float32Array.BYTES_PER_ELEMENT)))return null;for(let e=3;e<t.length;e+=4)s[e]=t[e];return s}function N(t,e,r,n,s){if(!j(P.FROM_PCPF,B.xs.fromTypedArray(t,16),F.TANGENT,B.Xm.fromTypedArray(e),B.Xm.fromTypedArray(r),n,B.xs.fromTypedArray(s,16)))return null;for(let e=3;e<t.length;e+=4)s[e]=t[e];return s}var F,P,z;function U(t,e,r,n,f){switch((0,y.l)(n,r,k,n),t===P.FROM_PCPF&&(0,u.B8)(k,k),e){case F.NORMAL:return(0,s.Ge)(f,k);case F.TANGENT:return(0,s.z0)(f,k)}}function j(t,e,r,n,s,f,u){if(!e)return;const i=n.count,c=(0,a.lO)(f);if(function(t){return t.isWGS84||(0,m.x1)(t)||(0,m.q8)(t)||(0,m.KQ)(t)}(f))for(let n=0;n<i;n++)s.getVec(n,V),e.getVec(n,I),(0,o.t)(I,I,U(t,r,V,c,G)),u.setVec(n,I);else for(let f=0;f<i;f++){s.getVec(f,V),e.getVec(f,I);const i=(0,b.jg)(n.get(f,1));let l=Math.cos(i);r===F.TANGENT!=(t===P.TO_PCPF)&&(l=1/l),U(t,r,V,c,G),t===P.TO_PCPF?(G[0]*=l,G[1]*=l,G[2]*=l,G[3]*=l,G[4]*=l,G[5]*=l):(G[0]*=l,G[3]*=l,G[6]*=l,G[1]*=l,G[4]*=l,G[7]*=l),(0,o.t)(I,I,G),(0,o.n)(I,I),u.setVec(f,I)}return u}function Y(t){return"local"===t.vertexSpace.type?function({vertexSpace:t,transform:e,inSpatialReference:r,outSpatialReference:n,localMode:s,outPositions:f,positions:o}){const d=t.origin??c.uY,m=null!=t.origin?e?.localMatrix??i.zK:i.zK,b=(0,a.lO)(r),B=n.isWebMercator&&s||!(0,l.canProjectWithoutEngine)(r,b)?r:b;(0,y.l)(r,d,k,B),(0,u.lw)(k,k,m);const T=f??(0,h.jh)(o.length);return(0,g.a)(T,o,k),(0,p.projectBuffer)(T,B,0,T,n,0,T.length/3),T}(t):function({vertexSpace:t,transform:e,outPositions:r,positions:n,inSpatialReference:s,outSpatialReference:f}){const l=null!=t.origin?e?.localMatrix??i.zK:i.zK,a=r??(0,h.jh)(n.length);(0,u.aI)(l,i.zK)?(0,h.s)(a,n):(0,g.a)(a,n,l);const y=t.origin??c.uY;if(!(0,o.e)(y,c.uY)){const[t,e,r]=y;for(let n=0;n<a.length;n+=3)a[n]+=t,a[n+1]+=e,a[n+2]+=r}return(0,p.projectBuffer)(a,s,0,a,f,0,a.length/3)?a:null}(t)}(z=F||(F={}))[z.NORMAL=0]="NORMAL",z[z.TANGENT=1]="TANGENT",function(t){t[t.TO_PCPF=0]="TO_PCPF",t[t.FROM_PCPF=1]="FROM_PCPF"}(P||(P={}));const V=(0,c.vt)(),I=(0,c.vt)(),k=(0,i.vt)(),G=(0,f.vt)()},20007:function(t,e,r){r.d(e,{UR:function(){return T},p5:function(){return g},xK:function(){return S}});var n=r(40633),s=r(15774),f=r(62938),u=r(44705),i=r(87725),o=r(73364),c=r(39714),l=r(20551),a=r(32501),y=r(96611),p=r(7456),h=r(56763),d=r(67376),m=r(62693),b=r(83614);const B=()=>n.A.getLogger("esri.geometry.support.meshUtils.vertexSpaceConversion");function g(t,e,{vertexSpace:r,spatialReference:n}){if("georeferenced"===r.type){const s=t;if(!(0,h.g)(e,s,n))return!1;const{origin:f}=r;return(0,l.f)(t,s,f),!0}const s=(0,y.lO)(n),f=t;if(!(0,h.g)(e,f,s))return!1;const{origin:u}=r,i=x;if(!(0,p.l)(n,u,i,s))return!1;const c=(0,o.B8)(x,i);return null!=c&&((0,l.h)(t,f,c),!0)}function T(t,e,r){const{vertexSpace:n,transform:f,vertexAttributes:i}=t,a=M(t.spatialReference,r,v.SOURCE|v.TARGET);if((0,d.yJ)(n,e)&&(!f||(0,o.t2)(f.localMatrix,c.zK))&&(0,s.Io)(a,1)){const{position:t,normal:e,tangent:n}=i,s=r?.allowBufferReuse;return{position:s?t:t.slice(),normal:s?e:e?.slice(),tangent:s?n:n?.slice()}}switch(t.vertexSpace.type){case"local":return"local"===e.type?function({vertexAttributes:t,spatialReference:e,transform:r},{origin:n},s,f){const u=(0,y.lO)(e);if(!(0,p.l)(e,n,O,u))return(0,b.CN)(B(),e,u),null;if(r&&(0,o.lw)(O,O,r.localMatrix),!(0,p.l)(e,s,w,u))return(0,b.CN)(B(),u,e),null;(0,o.B8)(w,w);const i=(0,o.lw)(O,w,O);return A(i,e,f,v.SOURCE|v.TARGET),E(t,i)}(t,t.vertexSpace,e.origin,r):function({spatialReference:t,vertexAttributes:e,transform:r},{origin:n},s,f){const u=(0,y.lO)(t);if(!(0,p.l)(t,n,O,u))return(0,b.CN)(B(),t,u),null;r&&(0,o.lw)(O,O,r.localMatrix),A(O,t,f,v.SOURCE);const i=new Float64Array(e.position.length),c=function(t,e,r,n){(0,m.a)(n,t,e);const s=new Float64Array(t.length);return(0,b.$5)(n,s,r)?s:((0,b.CN)(B(),(0,y.lO)(r),r),null)}(e.position,O,t,i);if(!c)return null;const a=function(t,e,r,n,s){if(null==r)return null;const f=new Float32Array(r.length);return(0,b.qs)(r,f,n),(0,b.si)(f,t,e,s,f)?f:((0,b.CN)(B(),(0,y.lO)(s),s),null)}(c,i,e.normal,O,t);if(e.normal&&!a)return null;const h=function(t,e,r,n,s){if(null==r)return null;const f=new Float32Array(r.length);return(0,b.KM)(r,f,n),(0,b.Mv)(f,t,e,s,f)?f:((0,b.CN)(B(),(0,y.lO)(s),s),null)}(c,i,e.tangent,O,t);if(e.tangent&&!h)return null;if(s){const t=(0,l.k)(_,s);(0,m.b)(c,c,t)}return{position:c,normal:a,tangent:h}}(t,t.vertexSpace,e.origin,r);case"georeferenced":return"local"===e.type?function({vertexAttributes:t,spatialReference:e,transform:r},{origin:n},s,f){const i=(0,y.lO)(e);if(!(0,p.l)(e,s,O,i))return(0,b.CN)(B(),e,i),null;const c=1/M(e,f,v.TARGET);(0,o.hs)(O,O,[c,c,c]);const l=(0,o.B8)(w,O),{position:a,normal:h,tangent:d}=function(t,e,r){if(!e)return t;if(!r){const{position:r,normal:n,tangent:s}=t;return{position:(0,m.b)(new Float64Array(r.length),r,e),tangent:s,normal:n}}const n=E(t,r.localMatrix);return(0,m.b)(n.position,n.position,e),n}(t,n,r),g=new Float64Array(a.length),T=function(t,e,r,n){const s=(0,b.gr)(t,e,n);if(!s)return(0,b.CN)(B(),e,(0,y.lO)(e)),null;const f=new Float64Array(s.length);return(0,m.a)(f,s,r),f}(a,e,l,g);if(!T)return null;const A=(0,u.Ge)(L,l),S=function(t,e,r,n,s,f){if(null==t)return null;const u=f??new Float32Array(t.length);return(0,b.X4)(t,e,r,n,u)?((0,m.t)(u,u,s),u):((0,b.CN)(B(),n,(0,y.lO)(n)),null)}(h,a,g,e,A,h!==t.normal?h:void 0);if(!S&&h)return null;const _=function(t,e,r,n,s,f){if(null==t)return null;const u=f??new Float32Array(t.length);return(0,b.xA)(t,e,r,n,u)?((0,m.t)(u,u,s,4),u):((0,b.CN)(B(),n,(0,y.lO)(n)),null)}(d,a,g,e,A,d!==t.tangent?d:void 0);return!_&&d?null:{position:T,normal:S,tangent:_}}(t,t.vertexSpace,e.origin,r):function({vertexAttributes:t,transform:e,spatialReference:r},{origin:n},s,f){const{position:u,normal:i,tangent:o}=e?E(t,e.localMatrix):t,c=new Float64Array(u.length);let a=u;if(n&&(a=(0,m.b)(c,a,n)),s){const t=(0,l.k)(_,s);a=(0,m.b)(c,a,t)}M(r,f,v.NONE);const y=f?.allowBufferReuse;return{position:a!==t.position||y?a:a.slice(),normal:i!==t.normal||y?i:i?.slice(),tangent:o!==t.tangent||y?o:o?.slice()}}(t,t.vertexSpace,e.origin,r)}}function E(t,e){const r=new Float64Array(t.position.length);(0,m.a)(r,t.position,e);const n=t.normal?new Float32Array(t.normal.length):null,s=t.tangent?new Float32Array(t.tangent.length):null;return n&&t.normal&&(0,b.qs)(t.normal,n,e),s&&t.tangent&&(0,b.KM)(t.tangent,s,e),{position:r,normal:n,tangent:s}}function A(t,e,r,n){const s=M(e,r,n);1!==s&&(0,o.hs)(t,t,[s,s,s])}function M(t,e,r){const n=!!(r&v.SOURCE),s=!!(r&v.TARGET),f=e?.sourceUnit,u=e?.targetUnit;if(!f&&!u)return 1;let i=S(f,t);!n&&f&&1!==i&&(B().warn("source unit conversion not supported"),i=1);let o=1/S(u,t);return!s&&u&&1!==o&&(B().warn("target unit conversion not supported"),o=1),i*o}function S(t,e){if(null==t)return 1;const r=(0,f.KX)(e);return 1/(0,f.oU)(r,"meters",t)}const O=(0,c.vt)(),w=(0,c.vt)(),L=(0,i.vt)(),_=(0,a.vt)(),x=(0,c.vt)();var v,C;(C=v||(v={}))[C.NONE=0]="NONE",C[C.SOURCE=1]="SOURCE",C[C.TARGET=2]="TARGET"}}]);
//# sourceMappingURL=geometry-support-meshUtils-convertMeshVertexSpace.js.map