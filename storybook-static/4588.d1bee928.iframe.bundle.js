"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[3480,4588,4924],{"./node_modules/@arcgis/core/core/CollectionFlattener.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>n});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_Collection_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),_accessorSupport_trackingUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/trackingUtils.js");let l=class extends _Collection_js__WEBPACK_IMPORTED_MODULE_1__.A{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles((0,_accessorSupport_trackingUtils_js__WEBPACK_IMPORTED_MODULE_5__.fm)((()=>this._refresh()),_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.OH))}destroy(){this.getCollections=null}_refresh(){const t=null!=this.getCollections?this.getCollections():null;if(null==t)return void this.removeAll();let o=0;for(const e of t)null!=e&&(o=this._processCollection(o,e));this.splice(o,this.length)}_createNewInstance(t){return new _Collection_js__WEBPACK_IMPORTED_MODULE_1__.A(t)}_processCollection(t,o){if(!o)return t;const e=this.itemFilterFunction??(t=>!!t);for(const s of o)if(s){if(e(s)){const o=this.indexOf(s,t);o>=0?o!==t&&this.reorder(s,t):this.add(s,t),++t}if(this.getChildrenFunction){const o=this.getChildrenFunction(s);if(Array.isArray(o))for(const e of o)t=this._processCollection(t,e);else t=this._processCollection(t,o)}}return t}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)()],l.prototype,"getCollections",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)()],l.prototype,"getChildrenFunction",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)()],l.prototype,"itemFilterFunction",void 0),l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__.$)("esri.core.CollectionFlattener")],l);const n=l},"./node_modules/@arcgis/core/core/loadAll.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>a,g:()=>t});var _asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/asyncUtils.js"),_Collection_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_Loadable_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Loadable.js");async function t(o,l){return await o.load(),a(o,l)}async function a(t,a){const s=[],c=(...o)=>{for(const l of o)null!=l&&(Array.isArray(l)?c(...l):_Collection_js__WEBPACK_IMPORTED_MODULE_1__.A.isCollection(l)?l.forEach((o=>c(o))):_Loadable_js__WEBPACK_IMPORTED_MODULE_2__.A.isLoadable(l)&&s.push(l))};a(c);let f=null;if(await(0,_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.Tj)(s,(async o=>{const n=await(0,_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.Ke)(function i(o){return"loadAll"in o&&"function"==typeof o.loadAll}(o)?o.loadAll():o.load());!1!==n.ok||f||(f=n)})),f)throw f.error;return t}},"./node_modules/@arcgis/core/layers/BuildingSceneLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>$});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),CollectionFlattener=__webpack_require__("./node_modules/@arcgis/core/core/CollectionFlattener.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),loadAll=__webpack_require__("./node_modules/@arcgis/core/core/loadAll.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),MultiOriginJSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/MultiOriginJSONSupport.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),urlUtils=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),reader=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js")),subclass=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),SpatialReference=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),Layer=__webpack_require__("./node_modules/@arcgis/core/layers/Layer.js"),Graphic=__webpack_require__("./node_modules/@arcgis/core/Graphic.js"),PopupTemplate=__webpack_require__("./node_modules/@arcgis/core/PopupTemplate.js"),request=__webpack_require__("./node_modules/@arcgis/core/request.js"),jsonMap=__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js"),Loadable=__webpack_require__("./node_modules/@arcgis/core/core/Loadable.js"),core_Promise=__webpack_require__("./node_modules/@arcgis/core/core/Promise.js"),enumeration=(__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js")),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),FeatureLayer=__webpack_require__("./node_modules/@arcgis/core/layers/FeatureLayer.js"),Identifiable=__webpack_require__("./node_modules/@arcgis/core/core/Identifiable.js"),ensureType=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),commonProperties=__webpack_require__("./node_modules/@arcgis/core/layers/support/commonProperties.js");let l=class extends(Identifiable.A.IdentifiableMixin(MultiOriginJSONSupport.L)){constructor(e){super(e),this.title="",this.id=-1,this.modelName=null,this.isEmpty=null,this.legendEnabled=!0,this.visible=!0,this.opacity=1}readTitle(e,o){return"string"==typeof o.alias?o.alias:"string"==typeof o.name?o.name:""}readIdOnlyOnce(e){return-1!==this.id?this.id:"number"==typeof e?e:-1}};(0,tslib_es6._)([(0,property.MZ)({type:String,json:{origins:{"web-scene":{write:!0},"portal-item":{write:!0}}}})],l.prototype,"title",void 0),(0,tslib_es6._)([(0,reader.w)("service","title",["alias","name"])],l.prototype,"readTitle",null),(0,tslib_es6._)([(0,property.MZ)()],l.prototype,"layer",void 0),(0,tslib_es6._)([(0,property.MZ)({type:ensureType.jz,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],l.prototype,"id",void 0),(0,tslib_es6._)([(0,reader.w)("service","id")],l.prototype,"readIdOnlyOnce",null),(0,tslib_es6._)([(0,property.MZ)((0,commonProperties.Qo)(String))],l.prototype,"modelName",void 0),(0,tslib_es6._)([(0,property.MZ)((0,commonProperties.Qo)(Boolean))],l.prototype,"isEmpty",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Boolean,nonNullable:!0})],l.prototype,"legendEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Boolean,json:{name:"visibility",write:!0}})],l.prototype,"visible",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0}})],l.prototype,"opacity",void 0),l=(0,tslib_es6._)([(0,subclass.$)("esri.layers.buildingSublayers.BuildingSublayer")],l);const a=l;var capabilities=__webpack_require__("./node_modules/@arcgis/core/layers/support/capabilities.js"),featureLayerUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/featureLayerUtils.js"),fieldProperties=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldProperties.js"),FieldsIndex=__webpack_require__("./node_modules/@arcgis/core/layers/support/FieldsIndex.js"),fieldUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldUtils.js"),I3SIndexInfo=__webpack_require__("./node_modules/@arcgis/core/layers/support/I3SIndexInfo.js"),I3SLayerDefinitions=__webpack_require__("./node_modules/@arcgis/core/layers/support/I3SLayerDefinitions.js"),typeUtils=__webpack_require__("./node_modules/@arcgis/core/renderers/support/typeUtils.js"),Query=__webpack_require__("./node_modules/@arcgis/core/rest/support/Query.js"),guards=__webpack_require__("./node_modules/@arcgis/core/support/guards.js"),popupUtils=__webpack_require__("./node_modules/@arcgis/core/support/popupUtils.js"),ElevationInfo=__webpack_require__("./node_modules/@arcgis/core/symbols/support/ElevationInfo.js"),I3SUtil=__webpack_require__("./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js"),support_popupUtils=__webpack_require__("./node_modules/@arcgis/core/views/layers/support/popupUtils.js");const A=(0,fieldProperties.p)();let _=class extends(Loadable.A.LoadableMixin(core_Promise.A.EsriPromiseMixin(a))){constructor(e){super(e),this.type="building-component",this.nodePages=null,this.materialDefinitions=[],this.textureSetDefinitions=[],this.geometryDefinitions=[],this.indexInfo=null,this.serviceUpdateTimeStamp=null,this.store=null,this.attributeStorageInfo=[],this.fields=[],this.associatedLayer=null,this.outFields=null,this.listMode="show",this.renderer=null,this.definitionExpression=null,this.popupEnabled=!0,this.popupTemplate=null,this.layerType="3d-object"}get parsedUrl(){return this.layer?{path:`${this.layer.parsedUrl?.path}/sublayers/${this.id}`,query:this.layer.parsedUrl?.query}:{path:""}}get fieldsIndex(){return new FieldsIndex.A(this.fields)}readAssociatedLayer(e,t){const r=this.layer.associatedFeatureServiceItem,o=t.associatedLayerID;return null!=r&&"number"==typeof o?new FeatureLayer.default({portalItem:r,customParameters:this.customParameters,layerId:o}):null}get objectIdField(){if(null!=this.fields)for(const e of this.fields)if("oid"===e.type)return e.name;return null}get displayField(){return null!=this.associatedLayer?this.associatedLayer.displayField:void 0}get apiKey(){return this.layer.apiKey}get customParameters(){return this.layer.customParameters}get fullExtent(){return this.layer.fullExtent}get spatialReference(){return this.layer.spatialReference}get version(){return this.layer.version}get elevationInfo(){return this.layer.elevationInfo}get minScale(){return this.layer.minScale}get maxScale(){return this.layer.maxScale}get effectiveScaleRange(){return this.layer.effectiveScaleRange}get defaultPopupTemplate(){return this.createPopupTemplate()}load(e){const t=null!=e?e.signal:null,r=this._fetchService(t).then((()=>{this.indexInfo=(0,I3SIndexInfo.F)(this.parsedUrl.path,this.rootNode,this.nodePages,this.customParameters,this.apiKey,Logger.A.getLogger(this),t)}));return this.addResolvingPromise(r),Promise.resolve(this)}createPopupTemplate(e){return(0,popupUtils.tn)(this,e)}async _fetchService(e){const t=(await(0,request.A)(this.parsedUrl.path,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e})).data;this.read(t,{origin:"service",url:this.parsedUrl})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){const r=this.getField(e)?.domain??null;return this.associatedLayer?(0,featureLayerUtils.Vq)(this.associatedLayer,e,t,r):r}getFeatureType(e){return e&&null!=this.associatedLayer?this.associatedLayer.getFeatureType(e):null}get types(){return null!=this.associatedLayer?this.associatedLayer.types??[]:[]}get typeIdField(){return null!=this.associatedLayer?this.associatedLayer.typeIdField:null}get geometryType(){return"3d-object"===this.layerType?"mesh":"point"}get profile(){return"3d-object"===this.layerType?"mesh-pyramids":"points"}get capabilities(){const e=null!=this.associatedLayer&&this.associatedLayer.capabilities?this.associatedLayer.capabilities:capabilities.P,{query:t,data:{supportsZ:r,supportsM:o,isVersioned:s}}=e;return{query:t,data:{supportsZ:r,supportsM:o,isVersioned:s}}}createQuery(){const e=new Query.A;return"mesh"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||"1=1",e.sqlFormat="standard",e}queryExtent(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryExtent(e||this.createQuery(),t)))}queryFeatureCount(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatureCount(e||this.createQuery(),t)))}queryFeatures(e,t){return this._getAssociatedLayerForQuery().then((r=>r.queryFeatures(e||this.createQuery(),t))).then((e=>{if(e?.features)for(const t of e.features)t.layer=this.layer,t.sourceLayer=this;return e}))}async queryObjectIds(e,t){const r=await this._getAssociatedLayerForQuery();return(await r.queryObjectIds(e||this.createQuery(),t)).filter(guards.Et)}async queryCachedAttributes(e,t){const r=(0,fieldUtils.hL)(this.fieldsIndex,await(0,support_popupUtils.TO)(this,(0,support_popupUtils.D8)(this)));return(0,I3SUtil.s1)(this.parsedUrl.path,this.attributeStorageInfo,e,t,r,this.apiKey,this.customParameters)}async queryCachedFeature(e,r){const o=await this.queryCachedAttributes(e,[r]);if(!o||0===o.length)throw new Error.A("scenelayer:feature-not-in-cached-data","Feature not found in cached data");return new Graphic.default({attributes:o[0],layer:this,sourceLayer:this})}getFieldUsageInfo(e){return this.fieldsIndex.has(e)?{supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1}:{supportsLabelingInfo:!1,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:null!=this.associatedLayer}}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return null!=e&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),null==this.associatedLayer)throw new Error.A("buildingscenelayer:query-not-available","BuildingSceneLayer component layer queries are not available without an associated feature layer",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new Error.A("buildingscenelayer:query-not-available","BuildingSceneLayer associated feature layer could not be loaded",{layer:this,error:e})}return this.associatedLayer}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],_.prototype,"parsedUrl",null),(0,tslib_es6._)([(0,property.MZ)({type:I3SLayerDefinitions.W4,readOnly:!0})],_.prototype,"nodePages",void 0),(0,tslib_es6._)([(0,property.MZ)({type:[I3SLayerDefinitions.uV],readOnly:!0})],_.prototype,"materialDefinitions",void 0),(0,tslib_es6._)([(0,property.MZ)({type:[I3SLayerDefinitions.Ot],readOnly:!0})],_.prototype,"textureSetDefinitions",void 0),(0,tslib_es6._)([(0,property.MZ)({type:[I3SLayerDefinitions.L0],readOnly:!0})],_.prototype,"geometryDefinitions",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],_.prototype,"serviceUpdateTimeStamp",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],_.prototype,"store",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],_.prototype,"rootNode",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],_.prototype,"attributeStorageInfo",void 0),(0,tslib_es6._)([(0,property.MZ)(A.fields)],_.prototype,"fields",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],_.prototype,"fieldsIndex",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:FeatureLayer.default})],_.prototype,"associatedLayer",void 0),(0,tslib_es6._)([(0,reader.w)("service","associatedLayer",["associatedLayerID"])],_.prototype,"readAssociatedLayer",null),(0,tslib_es6._)([(0,property.MZ)(A.outFields)],_.prototype,"outFields",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,readOnly:!0})],_.prototype,"objectIdField",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:String,json:{read:!1}})],_.prototype,"displayField",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:String})],_.prototype,"apiKey",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:String})],_.prototype,"customParameters",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:Extent.default})],_.prototype,"fullExtent",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:SpatialReference.A})],_.prototype,"spatialReference",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],_.prototype,"version",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:ElevationInfo.A})],_.prototype,"elevationInfo",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:Number})],_.prototype,"minScale",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:Number})],_.prototype,"maxScale",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:Number})],_.prototype,"effectiveScaleRange",null),(0,tslib_es6._)([(0,property.MZ)({type:["hide","show"],json:{write:!0}})],_.prototype,"listMode",void 0),(0,tslib_es6._)([(0,property.MZ)({types:typeUtils.XJ,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:!0},value:null})],_.prototype,"renderer",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],_.prototype,"definitionExpression",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.M6)],_.prototype,"popupEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)({type:PopupTemplate.A,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],_.prototype,"popupTemplate",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],_.prototype,"normalReferenceFrame",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,json:{read:!1}})],_.prototype,"defaultPopupTemplate",null),(0,tslib_es6._)([(0,property.MZ)()],_.prototype,"types",null),(0,tslib_es6._)([(0,property.MZ)()],_.prototype,"typeIdField",null),(0,tslib_es6._)([(0,property.MZ)({json:{write:!1}}),(0,enumeration.e)(new jsonMap.J({"3DObject":"3d-object",Point:"point"}))],_.prototype,"layerType",void 0),(0,tslib_es6._)([(0,property.MZ)()],_.prototype,"geometryType",null),(0,tslib_es6._)([(0,property.MZ)()],_.prototype,"profile",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,json:{read:!1}})],_.prototype,"capabilities",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],_.prototype,"statisticsInfo",void 0),_=(0,tslib_es6._)([(0,subclass.$)("esri.layers.buildingSublayers.BuildingComponentSublayer")],_);const C=_;var BuildingGroupSublayer_a,Warning=__webpack_require__("./node_modules/@arcgis/core/core/Warning.js");const BuildingGroupSublayer_l={type:Collection.A,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:p}}},read:!1}};function p(r,o,t){if(r&&Array.isArray(r))return new Collection.A(r.map((r=>{const e=function y(r){return"group"===r.layerType?c:C}(r);if(e){const o=new e;return o.read(r,t),o}return t?.messages&&r&&t.messages.push(new Warning.A("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(r.type||"unknown")+"' are not supported",{definition:r,context:t})),null})))}let c=BuildingGroupSublayer_a=class extends a{constructor(r){super(r),this.type="building-group",this.listMode="show",this.sublayers=null}loadAll(){return(0,loadAll.L)(this,(r=>BuildingGroupSublayer_a.forEachSublayer(this.sublayers,(e=>{"building-group"!==e.type&&r(e)}))))}};var r;(0,tslib_es6._)([(0,property.MZ)({type:["hide","show","hide-children"],json:{write:!0}})],c.prototype,"listMode",void 0),(0,tslib_es6._)([(0,property.MZ)(BuildingGroupSublayer_l)],c.prototype,"sublayers",void 0),c=BuildingGroupSublayer_a=(0,tslib_es6._)([(0,subclass.$)("esri.layers.buildingSublayers.BuildingGroupSublayer")],c),(r=c||(c={})).sublayersProperty=BuildingGroupSublayer_l,r.readSublayers=p,r.forEachSublayer=function e(r,o){r.forEach((r=>{o(r),"building-group"===r.type&&e(r.sublayers,o)}))};const d=c;var APIKeyMixin=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/APIKeyMixin.js"),ArcGISService=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/ArcGISService.js"),CustomParametersMixin=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/CustomParametersMixin.js"),OperationalLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/OperationalLayer.js"),PortalLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/PortalLayer.js"),ScaleRangeLayer=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/ScaleRangeLayer.js"),SceneService=__webpack_require__("./node_modules/@arcgis/core/layers/mixins/SceneService.js"),associatedFeatureServiceUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/associatedFeatureServiceUtils.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),uuid=__webpack_require__("./node_modules/@arcgis/core/core/uuid.js");let e=class extends JSONSupport.A{constructor(){super(...arguments),this.type=null}};(0,tslib_es6._)([(0,property.MZ)({type:String,readOnly:!0,json:{write:{isRequired:!0}}})],e.prototype,"type",void 0),e=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.BuildingFilterAuthoringInfo")],e);const BuildingFilterAuthoringInfo_p=e;var i;let BuildingFilterAuthoringInfoType_p=i=class extends JSONSupport.A{constructor(){super(...arguments),this.filterType=null,this.filterValues=null}clone(){return new i({filterType:this.filterType,filterValues:(0,lang.o8)(this.filterValues)})}};(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:{isRequired:!0}}})],BuildingFilterAuthoringInfoType_p.prototype,"filterType",void 0),(0,tslib_es6._)([(0,property.MZ)({type:[String],json:{write:{isRequired:!0}}})],BuildingFilterAuthoringInfoType_p.prototype,"filterValues",void 0),BuildingFilterAuthoringInfoType_p=i=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.BuildingFilterAuthoringInfoType")],BuildingFilterAuthoringInfoType_p);const BuildingFilterAuthoringInfoType_l=BuildingFilterAuthoringInfoType_p;var BuildingFilterAuthoringInfoBlock_c;const BuildingFilterAuthoringInfoBlock_l=Collection.A.ofType(BuildingFilterAuthoringInfoType_l);let m=BuildingFilterAuthoringInfoBlock_c=class extends JSONSupport.A{clone(){return new BuildingFilterAuthoringInfoBlock_c({filterTypes:(0,lang.o8)(this.filterTypes)})}};(0,tslib_es6._)([(0,property.MZ)({type:BuildingFilterAuthoringInfoBlock_l,json:{write:{isRequired:!0}}})],m.prototype,"filterTypes",void 0),m=BuildingFilterAuthoringInfoBlock_c=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.BuildingFilterAuthoringInfoBlock")],m);const n=m;var BuildingFilterAuthoringInfoCheckbox_p;const BuildingFilterAuthoringInfoCheckbox_l=Collection.A.ofType(n);let BuildingFilterAuthoringInfoCheckbox_n=BuildingFilterAuthoringInfoCheckbox_p=class extends BuildingFilterAuthoringInfo_p{constructor(){super(...arguments),this.type="checkbox"}clone(){return new BuildingFilterAuthoringInfoCheckbox_p({filterBlocks:(0,lang.o8)(this.filterBlocks)})}};(0,tslib_es6._)([(0,property.MZ)({type:["checkbox"]})],BuildingFilterAuthoringInfoCheckbox_n.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)({type:BuildingFilterAuthoringInfoCheckbox_l,json:{write:{isRequired:!0}}})],BuildingFilterAuthoringInfoCheckbox_n.prototype,"filterBlocks",void 0),BuildingFilterAuthoringInfoCheckbox_n=BuildingFilterAuthoringInfoCheckbox_p=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.BuildingFilterAuthoringInfoCheckbox")],BuildingFilterAuthoringInfoCheckbox_n);const BuildingFilterAuthoringInfoCheckbox_m=BuildingFilterAuthoringInfoCheckbox_n;let t=class extends JSONSupport.A{};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],t.prototype,"type",void 0),t=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.BuildingFilterMode")],t);const BuildingFilterMode_p=t;var BuildingFilterModeSolid_t;let BuildingFilterModeSolid_i=BuildingFilterModeSolid_t=class extends BuildingFilterMode_p{constructor(){super(...arguments),this.type="solid"}clone(){return new BuildingFilterModeSolid_t}};(0,tslib_es6._)([(0,property.MZ)({type:["solid"],readOnly:!0,json:{write:{isRequired:!0}}})],BuildingFilterModeSolid_i.prototype,"type",void 0),BuildingFilterModeSolid_i=BuildingFilterModeSolid_t=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.BuildingFilterModeSolid")],BuildingFilterModeSolid_i);const BuildingFilterModeSolid_p=BuildingFilterModeSolid_i;var BuildingFilterModeWireFrame_c,utils=__webpack_require__("./node_modules/@arcgis/core/symbols/edges/utils.js");let BuildingFilterModeWireFrame_m=BuildingFilterModeWireFrame_c=class extends BuildingFilterMode_p{constructor(){super(...arguments),this.type="wire-frame",this.edges=null}clone(){return new BuildingFilterModeWireFrame_c({edges:(0,lang.o8)(this.edges)})}};(0,tslib_es6._)([(0,enumeration.e)({wireFrame:"wire-frame"})],BuildingFilterModeWireFrame_m.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)(utils.J)],BuildingFilterModeWireFrame_m.prototype,"edges",void 0),BuildingFilterModeWireFrame_m=BuildingFilterModeWireFrame_c=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.BuildingFilterModeWireFrame")],BuildingFilterModeWireFrame_m);const BuildingFilterModeWireFrame_a=BuildingFilterModeWireFrame_m;var BuildingFilterModeXRay_t;let BuildingFilterModeXRay_p=BuildingFilterModeXRay_t=class extends BuildingFilterMode_p{constructor(){super(...arguments),this.type="x-ray"}clone(){return new BuildingFilterModeXRay_t}};(0,tslib_es6._)([(0,property.MZ)({type:["x-ray"],readOnly:!0,json:{write:{isRequired:!0}}})],BuildingFilterModeXRay_p.prototype,"type",void 0),BuildingFilterModeXRay_p=BuildingFilterModeXRay_t=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.BuildingFilterModeXRay")],BuildingFilterModeXRay_p);const BuildingFilterModeXRay_i=BuildingFilterModeXRay_p;var BuildingFilterBlock_d;const BuildingFilterBlock_a={nonNullable:!0,types:{key:"type",base:BuildingFilterMode_p,typeMap:{solid:BuildingFilterModeSolid_p,"wire-frame":BuildingFilterModeWireFrame_a,"x-ray":BuildingFilterModeXRay_i}},json:{read:e=>{switch(e?.type){case"solid":return BuildingFilterModeSolid_p.fromJSON(e);case"wireFrame":return BuildingFilterModeWireFrame_a.fromJSON(e);case"x-ray":return BuildingFilterModeXRay_i.fromJSON(e);default:return}},write:{enabled:!0,isRequired:!0}}};let BuildingFilterBlock_m=BuildingFilterBlock_d=class extends JSONSupport.A{constructor(){super(...arguments),this.filterExpression=null,this.filterMode=new BuildingFilterModeSolid_p,this.title=""}clone(){return new BuildingFilterBlock_d({filterExpression:this.filterExpression,filterMode:(0,lang.o8)(this.filterMode),title:this.title})}};(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],BuildingFilterBlock_m.prototype,"filterExpression",void 0),(0,tslib_es6._)([(0,property.MZ)(BuildingFilterBlock_a)],BuildingFilterBlock_m.prototype,"filterMode",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],BuildingFilterBlock_m.prototype,"title",void 0),BuildingFilterBlock_m=BuildingFilterBlock_d=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.BuildingFilterBlock")],BuildingFilterBlock_m);const BuildingFilterBlock_c=BuildingFilterBlock_m;var BuildingFilter_d;const u=Collection.A.ofType(BuildingFilterBlock_c);let BuildingFilter_m=BuildingFilter_d=class extends JSONSupport.A{constructor(){super(...arguments),this.description=null,this.filterBlocks=null,this.id=(0,uuid.lk)(),this.name=null}clone(){return new BuildingFilter_d({description:this.description,filterBlocks:(0,lang.o8)(this.filterBlocks),id:this.id,name:this.name,filterAuthoringInfo:(0,lang.o8)(this.filterAuthoringInfo)})}};(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],BuildingFilter_m.prototype,"description",void 0),(0,tslib_es6._)([(0,property.MZ)({type:u,json:{write:{enabled:!0,isRequired:!0}}})],BuildingFilter_m.prototype,"filterBlocks",void 0),(0,tslib_es6._)([(0,property.MZ)({types:{key:"type",base:BuildingFilterAuthoringInfo_p,typeMap:{checkbox:BuildingFilterAuthoringInfoCheckbox_m}},json:{read:o=>"checkbox"===o?.type?BuildingFilterAuthoringInfoCheckbox_m.fromJSON(o):null,write:!0}})],BuildingFilter_m.prototype,"filterAuthoringInfo",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,constructOnly:!0,json:{write:{enabled:!0,isRequired:!0}}})],BuildingFilter_m.prototype,"id",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],BuildingFilter_m.prototype,"name",void 0),BuildingFilter_m=BuildingFilter_d=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.BuildingFilter")],BuildingFilter_m);const f=BuildingFilter_m;let BuildingSummaryStatistics_n=class extends JSONSupport.A{constructor(){super(...arguments),this.fieldName=null,this.modelName=null,this.label=null,this.min=null,this.max=null,this.mostFrequentValues=null,this.subLayerIds=null}};(0,tslib_es6._)([(0,property.MZ)({type:String})],BuildingSummaryStatistics_n.prototype,"fieldName",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String})],BuildingSummaryStatistics_n.prototype,"modelName",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String})],BuildingSummaryStatistics_n.prototype,"label",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number})],BuildingSummaryStatistics_n.prototype,"min",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number})],BuildingSummaryStatistics_n.prototype,"max",void 0),(0,tslib_es6._)([(0,property.MZ)({json:{read:e=>Array.isArray(e)&&(e.every((e=>"string"==typeof e))||e.every((e=>"number"==typeof e)))?e.slice():null}})],BuildingSummaryStatistics_n.prototype,"mostFrequentValues",void 0),(0,tslib_es6._)([(0,property.MZ)({type:[Number]})],BuildingSummaryStatistics_n.prototype,"subLayerIds",void 0),BuildingSummaryStatistics_n=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.BuildingSummaryStatistics.BuildingFieldStatistics")],BuildingSummaryStatistics_n);let BuildingSummaryStatistics_p=class extends(Loadable.A.LoadableMixin(core_Promise.A.EsriPromiseMixin(JSONSupport.A))){constructor(){super(...arguments),this.url=null}get fields(){return this.loaded||"loading"===this.loadStatus?this._get("fields"):(Logger.A.getLogger(this).error("building summary statistics are not loaded"),null)}load(e){const r=null!=e?e.signal:null;return this.addResolvingPromise(this._fetchService(r)),Promise.resolve(this)}async _fetchService(e){const t=(await(0,request.A)(this.url,{query:{f:"json"},responseType:"json",signal:e})).data;this.read(t,{origin:"service"})}};(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0,type:String})],BuildingSummaryStatistics_p.prototype,"url",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:[BuildingSummaryStatistics_n],json:{read:{source:"summary"}}})],BuildingSummaryStatistics_p.prototype,"fields",null),BuildingSummaryStatistics_p=(0,tslib_es6._)([(0,subclass.$)("esri.layers.support.BuildingSummaryStatistics")],BuildingSummaryStatistics_p);const BuildingSummaryStatistics_u=BuildingSummaryStatistics_p;var elevationInfoUtils=__webpack_require__("./node_modules/@arcgis/core/support/elevationInfoUtils.js");const BuildingSceneLayer_C=Collection.A.ofType(f),R=(0,lang.o8)(d.sublayersProperty),M=R.json?.origins;M&&(M["web-scene"]={type:[C],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}},M["portal-item"]={type:[C],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}});let U=class extends((0,SceneService.w6)((0,ArcGISService.b)((0,OperationalLayer.q)((0,PortalLayer.A)((0,ScaleRangeLayer.j)((0,MultiOriginJSONSupport.P)((0,CustomParametersMixin.d)((0,APIKeyMixin.p)(Layer.A))))))))){constructor(e){super(e),this.operationalLayerType="BuildingSceneLayer",this.allSublayers=new CollectionFlattener.A({getCollections:()=>[this.sublayers],getChildrenFunction:e=>"building-group"===e.type?e.sublayers:null}),this.sublayers=null,this._allSublayerOverrides=null,this.filters=new BuildingSceneLayer_C,this.activeFilterId=null,this.summaryStatistics=null,this.outFields=null,this.legendEnabled=!0,this.type="building-scene"}normalizeCtorArgs(e){return"string"==typeof e?{url:e}:e??{}}destroy(){this.allSublayers.destroy()}readSublayers(e,r,t){const s=d.readSublayers(e,r,t);return d.forEachSublayer(s,(e=>e.layer=this)),this._allSublayerOverrides&&(function H(e,r){r.forEach((r=>N(e,r)))}(s,this._allSublayerOverrides),this._allSublayerOverrides=null),s}write(e,r){return e=super.write(e,r),!r||"web-scene"!==r.origin&&"portal-item"!==r.origin||(this.sublayers?function G(e,r,t){const s=[];d.forEachSublayer(e,(e=>{const r=e.write({},t);Object.keys(r).length>1&&s.push(r)})),s.length>0&&(r.sublayers=s)}(this.sublayers,e,r):this._allSublayerOverrides&&function V(e,r,t){const s=t?.origin&&e.get(t.origin);s&&(r.sublayers=[],s.overrides.forEach((e=>{r.sublayers.push((0,lang.o8)(e))})))}(this._allSublayerOverrides,e,r)),e}read(e,r){if(super.read(e,r),("web-scene"===r?.origin||"portal-item"===r?.origin)&&Array.isArray(e?.sublayers)){const t=function k(e,r){const t=new Map;for(const i of e)null!=i&&"object"==typeof i&&"number"==typeof i.id?t.set(i.id,i):r.messages?.push(new Error.A("building-scene-layer:invalid-sublayer-override","Invalid value for sublayer override. Not an object or no id specified.",{value:i}));return{overrides:t,context:r}}(e.sublayers,r);this.sublayers?N(this.sublayers,t):(this._allSublayerOverrides??=new Map,this._allSublayerOverrides.set(r.origin,t))}}readSummaryStatistics(e,r){if("string"==typeof r.statisticsHRef){const e=(0,urlUtils.fj)(this.parsedUrl?.path,r.statisticsHRef);return new BuildingSummaryStatistics_u({url:e})}return null}set elevationInfo(e){null!=e&&"absolute-height"!==e.mode||this._set("elevationInfo",e),this._validateElevationInfo(e)}load(e){const r=null!=e?e.signal:null,t=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(promiseUtils.QP).then((()=>this._fetchService(r))).then((()=>this._fetchAssociatedFeatureService(r)));return this.addResolvingPromise(t),Promise.resolve(this)}loadAll(){return(0,loadAll.g)(this,(e=>{d.forEachSublayer(this.sublayers,(r=>{"building-group"!==r.type&&e(r)})),this.summaryStatistics&&e(this.summaryStatistics)}))}async saveAs(e,r){return this._debouncedSaveOperations(SceneService.Xh.SAVE_AS,{...r,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"building-scene"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"building-scene"};return this._debouncedSaveOperations(SceneService.Xh.SAVE,e)}validateLayer(e){if(!e.layerType||"Building"!==e.layerType)throw new Error.A("buildingscenelayer:layer-type-not-supported","BuildingSceneLayer does not support this layer type",{layerType:e.layerType})}_getTypeKeywords(){return["Building"]}async _fetchAssociatedFeatureService(e){try{const{portalItem:r}=await(0,associatedFeatureServiceUtils.L)(`${this.url}/layers/${this.layerId}`,{sceneLayerItem:this.portalItem,customParameters:this.customParameters,apiKey:this.apiKey,signal:e});this.associatedFeatureServiceItem=r}catch(r){Logger.A.getLogger(this).warn("Associated feature service item could not be loaded",r)}}_validateElevationInfo(e){const r="Building scene layers";(0,elevationInfoUtils.XF)(Logger.A.getLogger(this),(0,elevationInfoUtils.B)(r,"absolute-height",e)),(0,elevationInfoUtils.XF)(Logger.A.getLogger(this),(0,elevationInfoUtils.tW)(r,e))}};function N(e,r){const{overrides:t,context:s}=r;d.forEachSublayer(e,(e=>e.read(t.get(e.id),s)))}(0,tslib_es6._)([(0,property.MZ)({type:["BuildingSceneLayer"]})],U.prototype,"operationalLayerType",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],U.prototype,"allSublayers",void 0),(0,tslib_es6._)([(0,property.MZ)(R)],U.prototype,"sublayers",void 0),(0,tslib_es6._)([(0,reader.w)("service","sublayers")],U.prototype,"readSublayers",null),(0,tslib_es6._)([(0,property.MZ)({type:BuildingSceneLayer_C,nonNullable:!0,json:{write:!0}})],U.prototype,"filters",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{write:!0}})],U.prototype,"activeFilterId",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:BuildingSummaryStatistics_u})],U.prototype,"summaryStatistics",void 0),(0,tslib_es6._)([(0,reader.w)("summaryStatistics",["statisticsHRef"])],U.prototype,"readSummaryStatistics",null),(0,tslib_es6._)([(0,property.MZ)({type:[String],json:{read:!1}})],U.prototype,"outFields",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.Fm)],U.prototype,"fullExtent",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.fV)],U.prototype,"legendEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)({type:["show","hide","hide-children"]})],U.prototype,"listMode",void 0),(0,tslib_es6._)([(0,property.MZ)((0,commonProperties.Qo)(SpatialReference.A))],U.prototype,"spatialReference",void 0),(0,tslib_es6._)([(0,property.MZ)(commonProperties.Yj)],U.prototype,"elevationInfo",null),(0,tslib_es6._)([(0,property.MZ)({json:{read:!1},readOnly:!0})],U.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)()],U.prototype,"associatedFeatureServiceItem",void 0),U=(0,tslib_es6._)([(0,subclass.$)("esri.layers.BuildingSceneLayer")],U);const $=U},"./node_modules/@arcgis/core/layers/mixins/OrderedLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Rr:()=>i,fY:()=>p,ne:()=>c});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_object_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/object.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),_support_OrderByInfo_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/layers/support/OrderByInfo.js");function i(r,o,e){if(!r)return null;const t=r.find((r=>!!r.field));if(!t)return null;const i=new _support_OrderByInfo_js__WEBPACK_IMPORTED_MODULE_7__.A;return i.read(t,e),[i]}const c={type:[_support_OrderByInfo_js__WEBPACK_IMPORTED_MODULE_7__.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:i},write:{writer:function n(r,e,t,s){const i=r.find((r=>!!r.field));i&&(0,_core_object_js__WEBPACK_IMPORTED_MODULE_1__.sM)(t,[i.toJSON()],e)}}}},p=o=>{let s=class extends o{constructor(){super(...arguments),this.orderBy=null}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.MZ)(c)],s.prototype,"orderBy",void 0),s=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.$)("esri.layers.mixins.OrderedLayer")],s),s}},"./node_modules/@arcgis/core/layers/support/FeatureType.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>c});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js")),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),_domains_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/layers/support/domains.js"),_FeatureTemplate_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/layers/support/FeatureTemplate.js");let n=class extends(_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__.A.ClonableMixin(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.A)){constructor(o){super(o),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(o){const r={};for(const t of Object.keys(o))r[t]=(0,_domains_js__WEBPACK_IMPORTED_MODULE_10__.rS)(o[t]);return r}writeDomains(o,r){const t={};for(const s of Object.keys(o))o[s]&&(t[s]=o[s]?.toJSON());r.domains=t}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({json:{write:!0}})],n.prototype,"id",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({json:{write:!0}})],n.prototype,"name",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({json:{write:!0}})],n.prototype,"domains",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__.w)("domains")],n.prototype,"readDomains",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_9__.K)("domains")],n.prototype,"writeDomains",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:[_FeatureTemplate_js__WEBPACK_IMPORTED_MODULE_11__.A],json:{write:!0}})],n.prototype,"templates",void 0),n=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.$)("esri.layers.support.FeatureType")],n);const c=n},"./node_modules/@arcgis/core/layers/support/OrderByInfo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>a});var i,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));const p=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.J({asc:"ascending",desc:"descending"});let n=i=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.A{constructor(r){super(r),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new i({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:String,json:{write:!0}})],n.prototype,"field",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],n.prototype,"valueExpression",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:p.apiValues,json:{type:p.jsonValues,read:p.read,write:p.write}})],n.prototype,"order",void 0),n=i=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.$)("esri.layers.support.OrderByInfo")],n);const a=n},"./node_modules/@arcgis/core/layers/support/TitleCreator.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>u});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/asyncUtils.js"),_core_Collection_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldUtils.js"),_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/support/arcadeOnDemand.js");let d=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__.A{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_2__.UT)((()=>(0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_10__.lw)())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??__webpack_require__.e(8924).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/widgets/Feature/support/featureUtils.js")).then((e=>this._featureUtils=e))}get calculatedExpressions(){const e=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_3__.A;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const s=this._arcadeTask.value.arcade.parseScript(t.expression,["$layer","$map","$datastore"]);if(s.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:s,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(s,{vars:{$feature:"any"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return"string"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter((t=>e.includes(`{expression/${t.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const s of this.calculatedExpressions?.toArray()??[])try{const t=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const s of t){const t=s.split("."),i=this.fieldsIndex.get(t.at(-1)??"");i&&e.add(i.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const s of t){const t=this.fieldsIndex.get(s);t&&e.add(t.name)}return e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,s){try{const{attributes:i}=t,r=s?.timeZone??"system",[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);if(s.fetchMissingFields&&(t=await this._checkAndReQueryGraphic(e,t)),this.workingTitle&&this.fieldInfoMap){const s=this._createFormattedAttributes(e,t,r).global;return a({attributes:i,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:s,layer:e,text:this.workingTitle})}return""}catch{}return""}async _checkAndReQueryGraphic(e,t){const s=t.getObjectId();if(null==s)return t;if(!(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.Kl)(this.requiredFields,t)){const t=e.createQuery();t.where="1=1",t.outFields=[...this.requiredFields],t.objectIds=[s];const i=await e.queryFeatures(t);if(1===i?.features.length)return i.features[0]}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const s of e){if(!s.fieldName)continue;const e=this.fieldsIndex.get(s.fieldName),i=e?.name??s.fieldName;s.fieldName=i,t.set(i.toLowerCase(),s)}return t}_createFormattedAttributes(e,t,s="system"){const i=this.effectivePopupTemplate?.fieldInfos??[],r={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const s=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{r[`expression/${e.name}`]=e.func({vars:{$feature:s}})}catch{}}const a={...t.attributes,...r};return{global:this._featureUtils.formatAttributes({fieldInfos:i,attributes:a,graphic:t,timeZone:s,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.nw)(e).filter((e=>!(0===e.indexOf("relationships/")||0===e.indexOf("expression/"))))}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)({readOnly:!0})],d.prototype,"_arcadeTask",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"_featureUtils",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)({readOnly:!0})],d.prototype,"featureUtilsPromise",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)({readOnly:!0})],d.prototype,"calculatedExpressions",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"displayField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"effectivePopupTemplate",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"expressionsUsedInTitle",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"fieldsIndex",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"fieldInfoMap",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"fields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"objectIdField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"requiredFields",null),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.$)("esri.layers.support.TitleCreator")],d);const u=d},"./node_modules/@arcgis/core/layers/support/displayFilterUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ch:()=>c,mW:()=>i,u2:()=>u});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_core_sql_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/sql.js");function i(e,n){return{...n,filterMode:e.mode}}function u(e,n){return l(e,n).next().value??null}function c(t,r,i){const u=function f(e){if("manual"===s(e))return null;const n=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:t,maxScale:r}of e.filters)n[0]=Math.max(n[0],I(t)),n[1]=Math.min(n[1],d(r));return n}(t);if(u&&((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.gg)(r,u[0])||(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.ZH)(i,u[1])))return"";const c=Array.from(l(t,r,i)),m=function a(t,r,o){if(0===t.length)return!0;const i=I(t.at(0)?.minScale),u=d(t.at(-1)?.maxScale);if((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.ZH)(i,r)||(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.gg)(u,o))return!0;for(let e=0;e<t.length-1;e++){const r=t[e],o=t[e+1];if((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.ZH)(I(o.minScale),d(r.maxScale)))return!0}return!1}(c,r,i)?"1=1":c.map((e=>e.where||"1=1")).reduce(((e,n)=>(0,_core_sql_js__WEBPACK_IMPORTED_MODULE_1__.IW)(e,n)),"");return m&&"1=1"!==m?m:""}function*l(e,n,t){if("manual"===s(e)){const n=e.filters.find((n=>n.id===e.activeFilterId));n&&(yield n)}else{"object"==typeof n&&(n=n.scale);for(const r of e.filters)m(r.minScale,r.maxScale,n,t)&&(yield r)}}function m(e,n,o,i){return e=I(e),o=I(o),n=d(n),!(!(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.Sp)(o,e)&&(i??o)>e||(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.Hx)(n,o)||void 0!==i&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.Sp)(i,e))}function s(e){return"mode"in e?e.mode:e.filterMode}function I(e){return e||Number.POSITIVE_INFINITY}function d(e){return e||0}},"./node_modules/@arcgis/core/rest/query/operations/queryZScale.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>t});var _geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/zscale.js");function t(t,o,r){if(!r?.features||!r.hasZ)return;const f=(0,_geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_0__.N)(r.geometryType,o,t.outSpatialReference);if(null!=f)for(const e of r.features)f(e.geometry)}},"./node_modules/@arcgis/core/rest/support/FeatureSet.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>d});var f,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_Graphic_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/Graphic.js"),_core_jsonMap_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_lang_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js")),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js"),_geometry_support_typeUtils_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/typeUtils.js"),_layers_support_Field_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/layers/support/Field.js");const h=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_2__.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let g=f=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_3__.A{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,r){return this.readFeaturesWithClass(e,r,_Graphic_js__WEBPACK_IMPORTED_MODULE_1__.default)}writeGeometryType(e,t,r,o){if(e)return void h.write(e,t,r,o);const{features:s}=this;if(s)for(const n of s)if(null!=n?.geometry)return void h.write(n.geometry.type,t,r,o)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.rS)(e);return o&&!r&&t.spatialReference&&(o.spatialReference=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__.A.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const o of r)if(o&&null!=o.geometry&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}clone(){return new f(this.cloneProperties())}cloneProperties(){return(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_4__.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e?.[r];o.geometry=t?.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,r],translate:[o,s]}=e,l=this.features,a=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-o)/t)),(e=>Math.round((s-e)/r)));for(let p=0,m=l.length;p<m;p++)a?.(l[p].geometry)||(l.splice(p,1),p--,m--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[o,s],scale:[n,i]}=r;let p=null,m=null;if(this.hasZ&&null!=r?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=r;p=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=r;m=r=>null==r?r:r*t+e}const u=this._getHydrationFunction(e,(e=>e*n+o),(e=>s-e*i),p,m);for(const{geometry:c}of t)null!=c&&u&&u(c);return this.transform=null,this}readFeaturesWithClass(e,t,r){const o=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__.A.fromJSON(t.spatialReference),s=[];for(let n=0;n<e.length;n++){const t=e[n],i=r.fromJSON(t),l=t.geometry?.spatialReference;null==i.geometry||l||(i.geometry.spatialReference=o);const a=t.aggregateGeometries,p=i.aggregateGeometries;if(a&&null!=p)for(const e in p){const t=p[e],r=a[e],s=r?.spatialReference;null==t||s||(t.spatialReference=o)}s.push(i)}return s}_quantizePoints(e,t,r){let o,s;const n=[];for(let i=0,l=e.length;i<l;i++){const l=e[i];if(i>0){const e=t(l[0]),i=r(l[1]);e===o&&i===s||(n.push([e-o,i-s]),o=e,s=i)}else o=t(l[0]),s=r(l[1]),n.push([o,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const o=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.Bi)(e)?e.rings:e.paths,s=[];for(let n=0,i=o.length;n<i;n++){const e=o[n],i=this._quantizePoints(e,t,r);i&&s.push(i)}return s.length>0?((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.Bi)(e)?e.rings=s:e.paths=s,e):null}:"multipoint"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o&&o.length>0?(e.points=o,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,o,s){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),o&&(e.z=o(e.z))}:"polyline"===e||"polygon"===e?e=>{const n=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.Bi)(e)?e.rings:e.paths;let i,l;for(let o=0,s=n.length;o<s;o++){const e=n[o];for(let o=0,s=e.length;o<s;o++){const s=e[o];o>0?(i+=s[0],l+=s[1]):(i=s[0],l=s[1]),s[0]=t(i),s[1]=r(l)}}if(o&&s)for(let t=0,r=n.length;t<r;t++){const e=n[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=o(r[2]),r[3]=s(r[3])}}else if(o)for(let t=0,r=n.length;t<r;t++){const e=n[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=o(r[2])}}else if(s)for(let t=0,r=n.length;t<r;t++){const e=n[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=s(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),o&&null!=e.zmax&&null!=e.zmin&&(e.zmax=o(e.zmax),e.zmin=o(e.zmin)),s&&null!=e.mmax&&null!=e.mmin&&(e.mmax=s(e.mmax),e.mmin=s(e.mmin))}:"multipoint"===e?e=>{const n=e.points;let i,l;for(let o=0,s=n.length;o<s;o++){const e=n[o];o>0?(i+=e[0],l+=e[1]):(i=e[0],l=e[1]),e[0]=t(i),e[1]=r(l)}if(o&&s)for(let t=0,r=n.length;t<r;t++){const e=n[t];e[2]=o(e[2]),e[3]=s(e[3])}else if(o)for(let t=0,r=n.length;t<r;t++){const e=n[t];e[2]=o(e[2])}else if(s)for(let t=0,r=n.length;t<r;t++){const e=n[t];e[2]=s(e[2])}}:null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:String,json:{write:!0}})],g.prototype,"displayFieldName",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"exceededTransferLimit",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:[_Graphic_js__WEBPACK_IMPORTED_MODULE_1__.default],json:{write:!0}})],g.prototype,"features",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_8__.w)("features")],g.prototype,"readFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:[_layers_support_Field_js__WEBPACK_IMPORTED_MODULE_14__.A],json:{write:!0}})],g.prototype,"fields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:h.read}}})],g.prototype,"geometryType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_10__.K)("geometryType")],g.prototype,"writeGeometryType",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"hasM",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"hasZ",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({types:_geometry_support_typeUtils_js__WEBPACK_IMPORTED_MODULE_13__.yR,json:{write:!0}})],g.prototype,"queryGeometry",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_8__.w)("queryGeometry")],g.prototype,"readQueryGeometry",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__.A,json:{write:!0}})],g.prototype,"spatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_10__.K)("spatialReference")],g.prototype,"writeSpatialReference",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({json:{write:!0}})],g.prototype,"transform",void 0),g=f=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.$)("esri.rest.support.FeatureSet")],g),g.prototype.toJSON.isDefaultToJSON=!0;const d=g},"./node_modules/@arcgis/core/views/layers/support/popupUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D8:()=>p,TO:()=>n,d0:()=>u});var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldUtils.js");async function n(n,p=n.popupTemplate){if(null==p)return[];const u=await p.getRequiredFields(n.fieldsIndex),{lastEditInfoEnabled:t}=p,{objectIdField:d,typeIdField:s,globalIdField:i,relationships:a}=n;if(u.includes("*"))return["*"];const o=t?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.eX)(n):[],f=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.DB)(n.fieldsIndex,[...u,...o]);return s&&f.push(s),f&&d&&n.fieldsIndex?.has(d)&&!f.includes(d)&&f.push(d),f&&i&&n.fieldsIndex?.has(i)&&!f.includes(i)&&f.push(i),a&&a.forEach((e=>{const{keyField:l}=e;f&&l&&n.fieldsIndex?.has(l)&&!f.includes(l)&&f.push(l)})),f}function p(e,l){return e.popupTemplate?e.popupTemplate:null!=l&&l.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function u(e,l){return null!=p(e,{defaultPopupTemplateEnabled:l})}},"./node_modules/@arcgis/core/webdoc/interfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var A;__webpack_require__.d(__webpack_exports__,{X:()=>A}),function(A){A[A.SAVE=0]="SAVE",A[A.SAVE_AS=1]="SAVE_AS"}(A||(A={}))}}]);