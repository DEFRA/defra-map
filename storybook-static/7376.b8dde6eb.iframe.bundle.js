"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[7376],{"./node_modules/@arcgis/core/layers/support/TelemetryDisplay.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>l});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));let p=class extends(_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__.A.ClonableMixin(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.A)){constructor(o){super(o),this.frame=null,this.frameCenter=null,this.frameOutline=null,this.lineOfSight=null,this.sensorLocation=null,this.sensorTrail=null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Boolean})],p.prototype,"frame",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Boolean})],p.prototype,"frameCenter",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Boolean})],p.prototype,"frameOutline",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Boolean})],p.prototype,"lineOfSight",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Boolean})],p.prototype,"sensorLocation",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Boolean})],p.prototype,"sensorTrail",void 0),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.$)("esri.layers.support.TelemetryDisplay")],p);const l=p},"./node_modules/@arcgis/core/views/2d/engine/AFeatureContainer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>n});var core_Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),definitions=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),DisplayId=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js"),Utils=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),FramebufferObject=__webpack_require__("./node_modules/@arcgis/core/views/webgl/FramebufferObject.js"),Texture=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),TextureDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");class m{constructor(t,e,i){this._texture=null,this._lastTexture=null,this._fbos={},this.texelSize=4;const{buffer:s,pixelType:r,textureOnly:a}=t,n=(0,Utils.Qz)(r);this.blockIndex=i,this.pixelType=r,this.size=e,this.textureOnly=a,a||(this.data=new n(s)),this._resetRange()}destroy(){this._texture?.dispose();for(const t in this._fbos){const e=this._fbos[t];e&&("0"===t&&e.detachColorTexture(),e.dispose()),this._fbos[t]=null}this._texture=null}get _textureDesc(){const t=new TextureDescriptor.R;return t.wrapMode=enums.pF.CLAMP_TO_EDGE,t.samplingMode=enums.Cj.NEAREST,t.dataType=this.pixelType,t.width=this.size,t.height=this.size,t}setData(t,e,i){const s=(0,DisplayId.Q4)(t),r=this.data,a=s*this.texelSize+e;!r||a>=r.length||(r[a]=i,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s))}getData(t,e){if(null==this.data)return null;const i=(0,DisplayId.Q4)(t)*this.texelSize+e;return!this.data||i>=this.data.length?null:this.data[i]}getTexture(t){return this._texture??this._initTexture(t)}getFBO(t,e=0){if(!this._fbos[e]){const i=0===e?this.getTexture(t):this._textureDesc;this._fbos[e]=new FramebufferObject.H(t,i)}return this._fbos[e]}get hasDirty(){const t=this.dirtyStart;return this.dirtyEnd>=t}updateTexture(e,i){try{const s=this.dirtyStart,r=this.dirtyEnd;if(!this.hasDirty)return;(0,has.A)("esri-2d-update-debug")&&console.debug(`Version[${i}] AttributeStoreView.updateTexture`,{start:s,end:r,firstBytes:new Uint8Array(this.data.buffer.slice(0,16)),block:this}),this._resetRange();const a=this.data.buffer,n=this.getTexture(e),u=4,h=(s-s%this.size)/this.size,o=(r-r%this.size)/this.size,l=h,d=this.size,_=o,p=h*this.size*u,c=(d+_*this.size)*u-p,x=(0,Utils.Qz)(this.pixelType),f=new x(a,p*x.BYTES_PER_ELEMENT,c),b=this.size,m=_-l+1;if(m>this.size)return void Logger.A.getLogger("esri.views.2d.engine.webgl.AttributeStoreView").error(new core_Error.A("mapview-webgl","Out-of-bounds index when updating AttributeData"));n.updateData(0,0,l,b,m,f)}catch(s){}}update(t){const{data:e,start:i,end:s}=t;if(null!=e&&null!=this.data){const s=this.data,r=i*this.texelSize;for(let i=0;i<e.length;i++){const a=1<<i%this.texelSize;t.layout&a&&(s[r+i]=e[i])}}this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,s)}resize(t,e){const i=this.size;if(this.size=e,this.textureOnly)return void(i!==this.size&&(this._lastTexture=this._texture,this._texture=null));const s=(0,Utils.Qz)(this.pixelType);this.destroy(),this.data=new s(t.buffer)}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}_initTexture(t){const e=new Texture.g(t,this._textureDesc,this.data??void 0);if(null!=this._lastTexture&&this._fbos[0]){const i=this._lastTexture.descriptor.width,s=this._lastTexture.descriptor.height,r=this._lastTexture.descriptor.dataType,a=this._lastTexture.descriptor.pixelFormat,n=this.getFBO(t),u=(0,Utils.AV)(r),h=new((0,Utils.Qz)(r))(new ArrayBuffer(i*s*u*this.texelSize)),o=t.getBoundFramebufferObject(),{x:l,y:d,width:p,height:c}=t.getViewport();t.bindFramebuffer(n),n.readPixels(0,0,i,s,a,r,h),e.updateData(0,0,0,2*i,s/2,h),t.setViewport(l,d,p,c),t.bindFramebuffer(o)}return this.destroy(),this._texture=e,this._texture}}class y{constructor(){this.size=0,this._pendingAttributeUpdates=[],this._version=0,this._epoch=0,this._locked=!1}get locked(){return this._locked}_initialize(t){if(!t)throw new Error("InternalError: initArgs must be defined");const e=t.blockDescriptors;if(this.size=t.blockSize,(0,has.A)("esri-2d-update-debug")&&console.debug("AttributeStoreView.initialize",{message:t}),null==this._data)this._data=e.map(((t,e)=>null!=t?new m(t,this.size,e):null));else for(let i=0;i<this._data.length;i++){const t=this._data[i],s=e[i];null!=s&&(null==t?this._data[i]=new m(s,this.size,i):t.resize(s,this.size))}}destroy(){for(const t of this._data??[])t?.destroy();this._defaultTexture?.dispose(),this._defaultTexture=null,this._pendingAttributeUpdates=[]}isEmpty(){return null==this._data}getBlock(t){return null==this._data?null:this._data[t]}setLabelMinZoom(t,e){this.setData(t,definitions.dV.FilterFlags,1,e)}setLocalTimeOrigin(t,e){this.setData(t,definitions.dV.LocalTimeOrigin,0,e)}getLabelMinZoom(t){return this.getData(t,definitions.dV.FilterFlags,1,255)}getFilterFlags(t){return this.getData(t,definitions.dV.FilterFlags,0,0)}getVisualVariableData(t,e){return this.getData(t,definitions.dV.VV,e,0)}getData(t,e,i,s){if(!this._data)return 0;const r=this._data[e];if(null==r)return 0;const a=r.getData(t,i);return null!=a?a:s}setData(t,e,i,s){this._data[e].setData(t,i,s)}lockTextureUploads(){this._locked=!0}unlockTextureUploads(){this._locked=!1,this.update()}requestUpdate(t){this._version=t.version,this._pendingAttributeUpdates.push(t),(0,has.A)("esri-2d-update-debug")&&console.debug(`Version[${this._version}] AttributeStoreView.requestUpdate`,{message:t})}get currentEpoch(){return this._epoch}update(){if(this._locked)return;const t=this._pendingAttributeUpdates;this._pendingAttributeUpdates=[];for(const e of t){const{blockData:t,initArgs:i,sendUpdateEpoch:s,version:r}=e;(0,has.A)("esri-2d-update-debug")&&console.debug(`Version[${this._version}] Epoch[${s}] AttributeStoreView.applyUpdate`),this._version=r,this._epoch=s,null!=i&&this._initialize(i);const a=this._data;for(let e=0;e<t.length;e++){const i=t[e],s=a[e];null!=s&&null!=i&&((0,has.A)("esri-2d-update-debug")&&console.debug(`Version[${this._version}] CpuBlock[${e}] AttributeStoreView.update`,{block:i}),s.update(i))}}}getUniforms(t){return{filterFlags:{texture:this._getTexture(t,definitions.dV.FilterFlags),unit:definitions.uM},animation:{texture:this._getTexture(t,definitions.dV.Animation),unit:definitions.z2},gpgpu:{texture:this._getTexture(t,definitions.dV.GPGPU),unit:definitions.Sr},localTimeOrigin:{texture:this._getTexture(t,definitions.dV.LocalTimeOrigin),unit:definitions.zt},visualVariableData:{texture:this._getTexture(t,definitions.dV.VV),unit:definitions.nM},dataDriven0:{texture:this._getTexture(t,definitions.dV.DD0),unit:definitions.lL},dataDriven1:{texture:this._getTexture(t,definitions.dV.DD1),unit:definitions.sn},dataDriven2:{texture:this._getTexture(t,definitions.dV.DD2),unit:definitions.n9},size:this.size}}_getTexture(t,e){const i=this._data?.[e];return i?(i.updateTexture(t,this._version),i.getTexture(t)):this._getDefaultTexture(t)}_getDefaultTexture(t){if(null==this._defaultTexture){const e=new TextureDescriptor.R;e.wrapMode=enums.pF.CLAMP_TO_EDGE,e.samplingMode=enums.Cj.NEAREST,e.width=1,e.height=1,this._defaultTexture=new Texture.g(t,e,new Uint8Array(4))}return this._defaultTexture}}var TileContainer=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js");class n extends TileContainer.A{constructor(e){super(e),this._statisticsByLevel=new Map,this._entityIndex=new Map,this.attributeView=new y}destroy(){this.children.forEach((t=>t.destroy())),this.removeAllChildren(),this.attributeView.destroy()}doRender(t){t.context.capabilities.enable("textureFloatLinear"),super.doRender(t)}get hasAnimations(){for(const t of this.children)if(t.hasAnimations)return!0;return!1}_reindexAndUpdateFeaturesIfNeeded(){if(this.hasAnimations&&(this._reindexFeatures(),0!==this.attributeView.size))for(const t of this._entityIndex.values())t.dirty&&(this.attributeView.setData(t.displayId,definitions.dV.LocalTimeOrigin,0,t.firstIndexed),t.dirty=!1)}restartAnimation(t){const e=this._entityIndex.get(t);if(!e)return;const i=performance.now()/1e3;e.firstIndexed=i,e.dirty=!0}restartAllAnimations(){const t=performance.now()/1e3;for(const[e,i]of this._entityIndex)i.firstIndexed=t,i.dirty=!0}_reindexFeatures(){const t=performance.now()/1e3;for(const e of this.children)for(const i of e.entityIds){const{objectId:e}=i;let s=this._entityIndex.get(e);s||(s={objectId:e,displayId:0,firstIndexed:t,lastIndexed:0,dirty:!0},this._entityIndex.set(e,s)),s.lastIndexed=t,s.displayId=i.displayId}for(const[e,i]of this._entityIndex)t-i.lastIndexed>60&&this._entityIndex.delete(e)}_updateAttributeView(){this.attributeView.update(),this._reindexAndUpdateFeaturesIfNeeded()}createRenderParams(t){const e=super.createRenderParams(t);return e.attributeView=this.attributeView,e.instanceStore=this._instanceStore,e.statisticsByLevel=this._statisticsByLevel,e}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/OverlayContainer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>u});var common=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/common.js"),mat3=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js"),mat3f32=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js"),vec2f32=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f32.js"),vec3f32=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f32.js"),normalizeUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/normalizeUtils.js"),spatialReferenceUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js"),viewpointUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/viewpointUtils.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),WGLContainer=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),Mesh=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/meshing/Mesh.js"),utils=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/utils.js"),Technique=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/Technique.js"),TechniqueType=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueType.js"),tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),GraphShaderModule=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/GraphShaderModule.js"),glsl=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/glsl.js");class x extends GraphShaderModule.ZA{}(0,tslib_es6._)([(0,GraphShaderModule.C5)(0,glsl.ZY)],x.prototype,"pos",void 0),(0,tslib_es6._)([(0,GraphShaderModule.C5)(1,glsl.ZY)],x.prototype,"uv",void 0);class g extends GraphShaderModule.HS{}class w extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.U)],w.prototype,"dvs",void 0);class S extends GraphShaderModule.k2{}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.ZY)],S.prototype,"perspective",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.ZY)],S.prototype,"texSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],S.prototype,"wrapAroundShift",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.nt)],S.prototype,"opacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(glsl.z7)],S.prototype,"texture",void 0);class j extends GraphShaderModule.A{constructor(){super(...arguments),this.type="OverlayShader"}vertex(t){const o=t.uv.divide(this.config.texSize),e=new glsl.nt(1).add((0,glsl.Om)(o,this.config.perspective)),r=new glsl.eB(t.pos.add(new glsl.ZY(this.config.wrapAroundShift,0)),1),p=this.transform.dvs.multiply(r);return{uv:o,glPosition:new glsl.Zb(p.xy.multiply(e),0,e)}}fragment(t){const o=(0,glsl.US)(this.config.texture,t.uv).multiply(this.config.opacity),e=new GraphShaderModule.mm;return e.fragColor=o,e}}(0,tslib_es6._)([(0,GraphShaderModule.Pi)(w)],j.prototype,"transform",void 0),(0,tslib_es6._)([(0,GraphShaderModule.Pi)(S)],j.prototype,"config",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(x))],j.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule.hF)(g))],j.prototype,"fragment",null);var webgl_enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),VertexElementDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js");class m extends Technique.j{constructor(){super(...arguments),this.type=TechniqueType.N.Overlay,this._mesh=null,this.shaders={overlay:new j}}render(e,t){const{context:r,painter:i}=e,o=this._getMesh(e,t);i.setPipelineState(utils.i);const{isWrapAround:h,wrapAroundShift:p}=t.config,u={...t.config,wrapAroundShift:0},m={shader:this.shaders.overlay,uniforms:{transform:t.transform,config:u},defines:null,optionalAttributes:null,useComputeBuffer:!1};i.setPipelineState({...utils.i,stencil:{write:!1,test:{compare:webgl_enums.MT.EQUAL,op:{fail:webgl_enums.eA.KEEP,zFail:webgl_enums.eA.KEEP,zPass:webgl_enums.eA.REPLACE},ref:0,mask:255}}}),i.submitDrawMeshUntyped(r,m,o),h&&(u.wrapAroundShift=p,i.submitDrawMeshUntyped(r,m,o))}shutdown(){(0,maybe.pR)(this._mesh)}_getMesh(e,s){const{context:r}=e;if(this._mesh){const e=this._mesh.vertexBuffers.get("positions");if(!e)throw new Error("Buffer not found");e.buffer.setData(s.position)}else{const e=null!=s.index?s.index.length:s.position.length/2;this._mesh=new Mesh.e(r,{vertex:{positions:{data:s.position,attributes:[new VertexElementDescriptor._("pos",2,webgl_enums.pe.FLOAT,0,8)]},uvs:{data:s.tex,attributes:[new VertexElementDescriptor._("uv",2,webgl_enums.pe.UNSIGNED_SHORT,0,4)]}},index:null!=s.index?{index:{data:s.index}}:void 0,groups:[{index:null!=s.index?"index":void 0,primitive:webgl_enums.WR.TRIANGLE_STRIP}],parts:[{group:0,start:0,count:e}]})}return this._mesh}}class u extends WGLContainer.A{constructor(){super(...arguments),this._viewStateId=-1,this._dvsMat3=(0,mat3f32.vt)(),this._overlayTechnique=new m}get dvsMat3(){return this._dvsMat3}beforeRender(t){this._updateMatrices(t),this._updateOverlays(t,this.children);for(const e of this.children)e.beforeRender(t)}doRender(t){if(t.drawPhase!==enums.S5.MAP||!this.visible)return;super.doRender(t);const e=this._overlayTechnique;for(const r of this.children)r.draw(t,e)}onDetach(){this._overlayTechnique.shutdown()}_updateMatrices(a){const{state:h}=a,{id:m,size:d,pixelRatio:p,resolution:f,rotation:u,viewpoint:v,displayMat3:_}=h;if(this._viewStateId===m)return;const M=(0,common.DF)(u),g=p*d[0],y=p*d[1];this._localOrigin=v.targetGeometry.clone();const{x:w,y:x}=this._localOrigin,b=(0,normalizeUtils.mT)(w,h.spatialReference);this._localOrigin.x=b,this._localOrigin.y=x;const j=f*g,O=f*y,R=(0,mat3.D_)(this._dvsMat3);(0,mat3.lw)(R,R,_),(0,mat3.Tl)(R,R,(0,vec2f32.fA)(g/2,y/2)),(0,mat3.hs)(R,R,(0,vec3f32.fA)(g/j,-y/O,1)),(0,mat3.e$)(R,R,-M),this._viewStateId=m}_updateOverlays(e,r){const{state:o}=e,{rotation:i,spatialReference:s,worldScreenWidth:a,size:n,viewpoint:l}=o,c=this._localOrigin;let d,p=0;const f=(0,spatialReferenceUtils.Vp)(s);if(f&&s.isWrappable){const e=n[0],r=n[1],c=(0,common.DF)(i),h=Math.abs(Math.cos(c)),u=Math.abs(Math.sin(c)),v=Math.round(e*h+r*u),[_,M]=f.valid,g=(0,viewpointUtils.FT)(s),{x:y,y:w}=l.targetGeometry,x=[y,w],b=[0,0];o.toScreen(b,x);const j=[0,0];let O;O=v>a?.5*a:.5*v;const R=Math.floor((y+.5*g)/g),q=_+R*g,S=M+R*g,G=[b[0]+O,0];o.toMap(j,G),j[0]>S&&(p=g),G[0]=b[0]-O,o.toMap(j,G),j[0]<q&&(p=-g),d={worldWidth:g,xBounds:[_,M]}}for(const t of r)t.updateDrawCoords(c,p,s,d)}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>i});var _core_has_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),_enums_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),_WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js"),_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushStencil.js"),_brushes_WGLBrushTileDebugInfo_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushTileDebugInfo.js");const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__.A{constructor(e){super(),this.tileInfoView=e,this.sortFunction=n}renderChildren(e){this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this.tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this.tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:"stencil",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_3__.A],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.S5.DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_1__.S5.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_1__.S5.HIGHLIGHT|_enums_js__WEBPACK_IMPORTED_MODULE_1__.S5.LABEL,target:()=>this.getStencilTarget()})),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__.A)("esri-tiles-debug")&&n.push(r.registerRenderPass({name:"tileInfo",brushes:[_brushes_WGLBrushTileDebugInfo_js__WEBPACK_IMPORTED_MODULE_4__.A],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.S5.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueInstance.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>i});var _mesh_instanceIdUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/instanceIdUtils.js");class i{constructor(t,i,e){this._instanceId=t,this.techniqueRef=i,this._input=e}get instanceId(){return(0,_mesh_instanceIdUtils_js__WEBPACK_IMPORTED_MODULE_0__.P)(this._instanceId)}createMeshInfo(i){return{id:(0,_mesh_instanceIdUtils_js__WEBPACK_IMPORTED_MODULE_0__.P)(this._instanceId),techniqueType:this.techniqueRef.type,inputParams:i,optionalAttributes:this._input.optionalAttributes}}getInput(){return this._input}setInput(t){this._input=t}}},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/instanceIdUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function n(n){return n}function r(n){return n}__webpack_require__.d(__webpack_exports__,{P:()=>n,U:()=>r})},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>t});const t={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:!1}},"./node_modules/@arcgis/core/views/2d/layers/VideoLayerView2D.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>C});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Color=__webpack_require__("./node_modules/@arcgis/core/Color.js"),Graphic=__webpack_require__("./node_modules/@arcgis/core/Graphic.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),GraphicsLayer=__webpack_require__("./node_modules/@arcgis/core/layers/GraphicsLayer.js"),TelemetryDisplay=__webpack_require__("./node_modules/@arcgis/core/layers/support/TelemetryDisplay.js"),SimpleFillSymbol=__webpack_require__("./node_modules/@arcgis/core/symbols/SimpleFillSymbol.js"),SimpleLineSymbol=__webpack_require__("./node_modules/@arcgis/core/symbols/SimpleLineSymbol.js"),SimpleMarkerSymbol=__webpack_require__("./node_modules/@arcgis/core/symbols/SimpleMarkerSymbol.js"),OverlayContainer=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/OverlayContainer.js"),events=__webpack_require__("./node_modules/@arcgis/core/core/events.js"),Handles=__webpack_require__("./node_modules/@arcgis/core/core/Handles.js"),screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js"),Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js"),projection=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),DisplayObject=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js"),Geometry=__webpack_require__("./node_modules/@arcgis/core/views/layers/support/Geometry.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),Texture=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),TextureDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");class x extends DisplayObject.q{constructor(r){super(),this.element=r,this._handles=new Handles.A,this.isWrapAround=!1,this.perspectiveTransform=(0,vec2f64.vt)(),this.wrapAroundShift=0,this.clipGeometry=null,this._handles.add((0,reactiveUtils.when)((()=>this.element),(()=>{const e=this.element;this.ready(),e&&this._handles.add((0,events.on)(e,"play",(()=>this.requestRender())))}),reactiveUtils.Vh))}getMesh(t){throw new Error("Method not implemented.")}destroy(){this._handles.destroy(),this.texture=(0,maybe.WD)(this.texture)}get textureSize(){if(!this.texture)return[1,1];const t=this.texture.descriptor;return[t.width,t.height]}get dvsMat3(){return this.parent.dvsMat3}beforeRender(t){const e=this.element;if(null==e)return;const{context:r}=t,{videoWidth:i,videoHeight:o}=e;if(0!==i&&0!==o){if(this.texture)e.paused||this.texture.setData(e);else{const t=new TextureDescriptor.R;t.wrapMode=enums.pF.CLAMP_TO_EDGE,t.preMultiplyAlpha=!0,t.width=i,t.height=o,this.texture=new Texture.g(r,t,e)}e.paused||(this.texture.generateMipmap(),this.requestRender()),super.beforeRender(t)}}_createTransforms(){return null}updateDrawCoords(t,e,r,i){const o=this.element,s=this._getFrameInfo();if(!o||!s)return;this._initializeData(t,s,r);const{controlPoints:n,horizon:a}=s,u=Math.sqrt(n.length),d=u,{x:c,y:p}=t,x=this._vertices,y=n[0],g=n[u-1],P=n[(d-1)*u],w=n[(d-1)*u+u-1],_=(0,projection.project)(a?a[0].mapPoint:y.mapPoint,r),v=(0,projection.project)(a?a[1].mapPoint:g.mapPoint,r),j=(0,projection.project)(P.mapPoint,r),A=(0,projection.project)(w.mapPoint,r);this.clipGeometry=a?new Geometry.A({geometry:Polygon.A.fromJSON({rings:[[[j.x,j.y],[A.x,A.y],[v.x,v.y],[_.x,_.y],[j.x,j.y]]],spatialReference:r})}):null;for(let h=0;h<n.length;h++){const t=n[h],{sourcePoint:e,mapPoint:i}=t;if(null==e||null==i)continue;const o=(0,projection.project)(i,r);x[2*h+0]=o.x-c,x[2*h+1]=o.y-p}let M=e;if(i){const t=Math.min(_.x,v.x,j.x,A.x),e=Math.max(_.x,v.x,j.x,A.x),{worldWidth:r,xBounds:o}=i,[s,n]=o;t<s&&e>s?M=r:e>n&&t<n&&(M=-r)}this.wrapAroundShift=M,this.isWrapAround=0!==M}draw(t,e){this.isReady&&this._vertices&&this._indices&&this._texCoords?e.render(t,{transform:{dvs:this.dvsMat3},config:{perspective:this.perspectiveTransform,texSize:this.textureSize,wrapAroundShift:this.wrapAroundShift,isWrapAround:this.isWrapAround,opacity:this.opacity,texture:{texture:this.texture,unit:0}},position:this._vertices,tex:this._texCoords,index:this._indices}):this.requestRender()}_initializeData(t,e,r){if(null!=this._vertices&&null!=this._indices)return;const{controlPoints:i}=e,o=Math.sqrt(i.length),s=o,n=new Float32Array(2*i.length),a=new Uint16Array(2*i.length);for(let m=0;m<i.length;m++){const e=i[m],{sourcePoint:o,mapPoint:s}=e;if(null==o||null==s)continue;const h=(0,projection.project)(s,r);n[2*m+0]=h.x-t.x,n[2*m+1]=h.y-t.y,a[2*m+0]=o.x,a[2*m+1]=o.y}const h=new Uint16Array(s*o+(s-2)*(o+2));let u=0;for(let l=0;l<s;l++){for(let t=0;t<o;t++)h[u++]=l*o+t,h[u++]=(l+1)*o+t;l<s-2&&(h[u++]=(l+1)*o+(o-1),h[u++]=(l+1)*o)}this._vertices=n,this._texCoords=a,this._indices=h}_getFrameInfo(){if(!this.groundControlPoints)return null;const t=this._getFrameControlPoints(),e=this.frameHorizonPoints;let r=null;if(e){const t=e.startX,i=e.startY,o=e.endX,n=e.endY;r=[{sourcePoint:(0,screenUtils.tc)(t,i),mapPoint:new Point.default(e.startLongitude,e.startLatitude)},{sourcePoint:(0,screenUtils.tc)(o,n),mapPoint:new Point.default(e.endLongitude,e.endLatitude)}]}return{controlPoints:t,horizon:r}}_getFrameControlPoints(){const t=this.groundControlPoints,e=t?.length;if(!e)return[];const r=new Array(e),i=Math.max(...t.map((({x:t})=>t))),o=this.element.videoWidth/i;for(let n=0;n<e;n++){const{x:e,y:i,lat:h,lon:l}=t[n];r[n]={sourcePoint:(0,screenUtils.tc)(e*o,-i*o),mapPoint:new Point.default(l,h)}}return r}}var LayerView2D=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js"),GraphicContainer=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js"),GraphicsView2D=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js"),LayerView=__webpack_require__("./node_modules/@arcgis/core/views/layers/LayerView.js");const v=new Color.A([255,127,0]);let _=class extends((0,LayerView2D.e)(LayerView.A)){constructor(){super(...arguments),this._graphicsLayer=new GraphicsLayer.default,this._frameOutlineGraphic=new Graphic.default({symbol:new SimpleFillSymbol.A({outline:{type:"simple-line",color:v}})}),this._sensorTrailGraphic=new Graphic.default({symbol:new SimpleLineSymbol.A({color:v})}),this._lineOfSightGraphic=new Graphic.default({symbol:new SimpleLineSymbol.A({color:v})}),this._sensorLocationGraphic=new Graphic.default({symbol:new SimpleMarkerSymbol.A({color:v})}),this._frameCenterGraphic=new Graphic.default({symbol:new SimpleMarkerSymbol.A({color:v,style:"cross"})}),this._overlayContainer=null,this.layer=null,this.symbolColor=v,this.visibleTelemetryElements=null}destroy(){this._graphicsLayer=(0,maybe.pR)(this._graphicsLayer)}initialize(){this.addHandles((0,reactiveUtils.watch)((()=>this.symbolColor),(()=>{this._frameOutlineGraphic.symbol.outline.color=this.symbolColor,this._sensorTrailGraphic.symbol.color=this.symbolColor,this._lineOfSightGraphic.symbol.color=this.symbolColor,this._sensorLocationGraphic.symbol.color=this.symbolColor,this._frameCenterGraphic.symbol.color=this.symbolColor}),reactiveUtils.Vh)),this._graphicsLayer.graphics.addMany([this._frameOutlineGraphic,this._sensorTrailGraphic,this._lineOfSightGraphic,this._sensorLocationGraphic,this._frameCenterGraphic]),this.visibleTelemetryElements=new TelemetryDisplay.A({frame:this.layer.telemetryDisplay?.frame??!1,frameCenter:this.layer.telemetryDisplay?.frameCenter??!0,frameOutline:this.layer.telemetryDisplay?.frameOutline??!0,lineOfSight:this.layer.telemetryDisplay?.lineOfSight??!0,sensorLocation:this.layer.telemetryDisplay?.sensorLocation??!0,sensorTrail:this.layer.telemetryDisplay?.sensorTrail??!0})}attach(){this._overlayContainer=new OverlayContainer.A,this.container.addChild(this._overlayContainer),this._addOverlayMultipoint(),this.graphicsView=new GraphicsView2D.A({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this._graphicsLayer.graphics,container:new GraphicContainer.A(this.view.featuresTilingScheme)}),this.container.addChild(this.graphicsView.container),this.addAttachHandles(this._graphicsLayer.on("graphic-update",this.graphicsView.graphicUpdateHandler)),this.addAttachHandles([(0,reactiveUtils.watch)((()=>[this.layer.telemetryDisplay?.frame,this.layer.telemetryDisplay?.frameCenter,this.layer.telemetryDisplay?.frameOutline,this.layer.telemetryDisplay?.sensorLocation,this.layer.telemetryDisplay?.sensorTrail,this.layer.telemetryDisplay?.lineOfSight]),(()=>this._updateVisibleTelemetryElements()),reactiveUtils.Vh),(0,reactiveUtils.watch)((()=>[this.layer.telemetry,this.visibleTelemetryElements?.frameCenter,this.visibleTelemetryElements?.frameOutline,this.visibleTelemetryElements?.sensorLocation,this.visibleTelemetryElements?.sensorTrail,this.visibleTelemetryElements?.lineOfSight]),(()=>this._updateGraphicGeometries()),reactiveUtils.Vh)])}detach(){this._overlayContainer.removeAllChildren(),this.container.removeAllChildren(),this.graphicsView=(0,maybe.pR)(this.graphicsView)}supportsSpatialReference(e){return!0}moveEnd(){}viewChange(){this.graphicsView.viewChange()}update(e){this.graphicsView.processUpdate(e)}isUpdating(){return!this.graphicsView||this.graphicsView.updating}_updateVisibleTelemetryElements(){this.visibleTelemetryElements&&this.layer.telemetryDisplay&&(this.visibleTelemetryElements.frame=this.layer.telemetryDisplay.frame,this.visibleTelemetryElements.frameCenter=this.layer.telemetryDisplay.frameCenter,this.visibleTelemetryElements.frameOutline=this.layer.telemetryDisplay.frameOutline,this.visibleTelemetryElements.lineOfSight=this.layer.telemetryDisplay.lineOfSight,this.visibleTelemetryElements.sensorLocation=this.layer.telemetryDisplay.sensorLocation,this.visibleTelemetryElements.sensorTrail=this.layer.telemetryDisplay.sensorTrail)}_updateGraphicGeometries(){const{telemetry:e}=this.layer,{visibleTelemetryElements:i}=this;e&&i&&(i.frameOutline&&e.frameOutline?this._frameOutlineGraphic.geometry=this.layer.telemetry.frameOutline:this._frameOutlineGraphic.geometry=null,i.sensorTrail&&e.sensorTrail?this._sensorTrailGraphic.geometry=this.layer.telemetry.sensorTrail:this._sensorTrailGraphic.geometry=null,i.lineOfSight&&e.lineOfSight?this._lineOfSightGraphic.geometry=this.layer.telemetry.lineOfSight:this._lineOfSightGraphic.geometry=null,i.sensorLocation&&e.sensorLocation?this._sensorLocationGraphic.geometry=this.layer.telemetry.sensorLocation:this._sensorLocationGraphic.geometry=null,i.frameCenter&&e.frameCenter?this._frameCenterGraphic.geometry=this.layer.telemetry.frameCenter:this._frameCenterGraphic.geometry=null)}async _addOverlayMultipoint(){if(!this.layer.videoElement)return;const e=new x(this.layer.videoElement);this.addAttachHandles([(0,reactiveUtils.watch)((()=>[this.layer.frameHorizonPoints,this.layer.groundControlPoints]),(()=>{const{visibleTelemetryElements:i}=this;i?.frame?(e.frameHorizonPoints=this.layer.frameHorizonPoints,e.groundControlPoints=this.layer.groundControlPoints,e.opacity=1):e.opacity=0}),reactiveUtils.Vh)]),this._overlayContainer.addChild(e),this.view.stage.requestRender()}};(0,tslib_es6._)([(0,property.MZ)()],_.prototype,"graphicsView",void 0),(0,tslib_es6._)([(0,property.MZ)()],_.prototype,"layer",void 0),(0,tslib_es6._)([(0,property.MZ)()],_.prototype,"symbolColor",void 0),(0,tslib_es6._)([(0,property.MZ)({type:TelemetryDisplay.A})],_.prototype,"visibleTelemetryElements",void 0),_=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.layers.VideoLayerView2D")],_);const C=_},"./node_modules/@arcgis/core/views/2d/layers/graphics/AGraphicContainer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>i});var maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),AFeatureContainer=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/AFeatureContainer.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),TechniqueInstance=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueInstance.js"),TechniqueRegistry=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueRegistry.js"),instanceIdUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/instanceIdUtils.js");let n=0;function a(t,a){return new TechniqueInstance.c((0,instanceIdUtils.U)(n++),t,a)}const l={visualVariableColor:null,visualVariableOpacity:null,visualVariableSizeMinMaxValue:null,visualVariableSizeScaleStops:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null,visualVariableRotation:null,visualVariableSizeOutlineScaleStops:null};class o{constructor(){this.instances={fill:a(TechniqueRegistry.YS.fill,{uniforms:l,optionalAttributes:{zoomRange:!0}}),marker:a(TechniqueRegistry.YS.marker,{uniforms:l,optionalAttributes:{zoomRange:!0}}),line:a(TechniqueRegistry.YS.line,{uniforms:l,optionalAttributes:{zoomRange:!0}}),text:a(TechniqueRegistry.YS.text,{uniforms:l,optionalAttributes:{zoomRange:!0,referenceSymbol:!1,clipAngle:!1}}),complexFill:a(TechniqueRegistry.YS.complexFill,{uniforms:l,optionalAttributes:{zoomRange:!0}}),gradientFill:a(TechniqueRegistry.YS.gradientFill,{uniforms:l,optionalAttributes:{zoomRange:!0}}),texturedLine:a(TechniqueRegistry.YS.texturedLine,{uniforms:l,optionalAttributes:{zoomRange:!0}}),gradientStroke:a(TechniqueRegistry.YS.gradientStroke,{uniforms:l,optionalAttributes:{zoomRange:!0}}),animatedMarker:a(TechniqueRegistry.YS.animatedMarker,{uniforms:l,optionalAttributes:{zoomRange:!0}})},this._instancesById=Object.values(this.instances).reduce(((e,t)=>(e.set(t.instanceId,t),e)),new Map)}getInstance(e){return this._instancesById.get(e)}}var mat3=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js"),mat3f32=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js"),vec2f32=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f32.js"),vec3f32=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f32.js"),normalizeUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/normalizeUtils.js"),DisplayObject=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js"),Utils=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js"),BufferObject=__webpack_require__("./node_modules/@arcgis/core/views/webgl/BufferObject.js"),webgl_enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),VertexArrayObject=__webpack_require__("./node_modules/@arcgis/core/views/webgl/VertexArrayObject.js");const v=Math.PI/180;class b extends DisplayObject.q{constructor(t){super(),this._program=null,this._vao=null,this._vertexBuffer=null,this._indexBuffer=null,this._dvsMat3=(0,mat3f32.vt)(),this._localOrigin={x:0,y:0},this._getBounds=t}destroy(){this._vao&&(this._vao.dispose(),this._vao=null,this._vertexBuffer=null,this._indexBuffer=null),this._program=(0,maybe.WD)(this._program)}doRender(t){const{context:e}=t,r=this._getBounds();if(r.length<1)return;this._createShaderProgram(e),this._updateMatricesAndLocalOrigin(t),this._updateBufferData(e,r),e.setBlendingEnabled(!0),e.setDepthTestEnabled(!1),e.setStencilWriteMask(0),e.setStencilTestEnabled(!1),e.setBlendFunction(webgl_enums.dn.ONE,webgl_enums.dn.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0);const i=this._program;e.bindVAO(this._vao),e.useProgram(i),i.setUniformMatrix3fv("u_dvsMat3",this._dvsMat3),e.gl.lineWidth(1),e.drawElements(webgl_enums.WR.LINES,8*r.length,webgl_enums.pe.UNSIGNED_INT,0),e.bindVAO()}_createTransforms(){return{displayViewScreenMat3:(0,mat3f32.vt)()}}_createShaderProgram(t){if(this._program)return;this._program=t.programCache.acquire("precision highp float;\n        uniform mat3 u_dvsMat3;\n\n        attribute vec2 a_position;\n\n        void main() {\n          mediump vec3 pos = u_dvsMat3 * vec3(a_position, 1.0);\n          gl_Position = vec4(pos.xy, 0.0, 1.0);\n        }","precision mediump float;\n      void main() {\n        gl_FragColor = vec4(0.75, 0.0, 0.0, 0.75);\n      }",y().attributes)}_updateMatricesAndLocalOrigin(t){const{state:a}=t,{displayMat3:m,size:c,resolution:u,pixelRatio:_,rotation:h,viewpoint:p}=a,d=v*h,{x:g,y:x}=p.targetGeometry,b=(0,normalizeUtils.mT)(g,a.spatialReference);this._localOrigin.x=b,this._localOrigin.y=x;const y=_*c[0],B=_*c[1],M=u*y,j=u*B,A=(0,mat3.D_)(this._dvsMat3);(0,mat3.lw)(A,A,m),(0,mat3.Tl)(A,A,(0,vec2f32.fA)(y/2,B/2)),(0,mat3.hs)(A,A,(0,vec3f32.fA)(c[0]/M,-B/j,1)),(0,mat3.e$)(A,A,-d)}_updateBufferData(t,e){const{x:r,y:i}=this._localOrigin,s=8*e.length,o=new Float32Array(s),a=new Uint32Array(8*e.length);let n=0,l=0;for(const f of e)f&&(o[2*n]=f[0]-r,o[2*n+1]=f[1]-i,o[2*n+2]=f[0]-r,o[2*n+3]=f[3]-i,o[2*n+4]=f[2]-r,o[2*n+5]=f[3]-i,o[2*n+6]=f[2]-r,o[2*n+7]=f[1]-i,a[l]=n+0,a[l+1]=n+3,a[l+2]=n+3,a[l+3]=n+2,a[l+4]=n+2,a[l+5]=n+1,a[l+6]=n+1,a[l+7]=n+0,n+=4,l+=8);if(this._vertexBuffer?this._vertexBuffer.setData(o.buffer):this._vertexBuffer=BufferObject.g.createVertex(t,webgl_enums._U.DYNAMIC_DRAW,o.buffer),this._indexBuffer?this._indexBuffer.setData(a):this._indexBuffer=BufferObject.g.createIndex(t,webgl_enums._U.DYNAMIC_DRAW,a),!this._vao){const e=y();this._vao=new VertexArrayObject.Z(t,e.attributes,e.bufferLayouts,new Map([["geometry",this._vertexBuffer]]),this._indexBuffer)}}}const y=()=>(0,Utils.ES)("bounds",{geometry:[{location:0,name:"a_position",count:2,type:webgl_enums.pe.FLOAT}]});class i extends AFeatureContainer.j{constructor(e){super(e),this._instanceStore=new o,this.checkHighlight=()=>!0}destroy(){super.destroy(),this._boundsRenderer=(0,maybe.pR)(this._boundsRenderer)}get instanceStore(){return this._instanceStore}enableRenderingBounds(e){this._boundsRenderer=new b(e),this.requestRender()}get hasHighlight(){return this.checkHighlight()}onTileData(e,t){e.onMessage(t),this.contains(e)||this.addChild(e),this.requestRender()}_renderChildren(e,t){e.selection=t;for(const r of this.children){if(!r.visible)continue;const t=r.getDisplayList(this._instanceStore,enums.ch.STRICT_ORDER);t?.render(e)}}}},"./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>t});var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),_AGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/graphics/AGraphicContainer.js"),_support_util_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/support/util.js");class t extends _AGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__.f{renderChildren(i){for(const e of this.children)e.setTransform(i.state);if(super.renderChildren(i),this._updateAttributeView(),this.children.some((e=>e.hasData))){switch(i.drawPhase){case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.S5.MAP:this._renderChildren(i,_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.RI.All);break;case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.S5.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(i)}this._boundsRenderer&&this._boundsRenderer.doRender(i)}}_renderHighlight(e){(0,_support_util_js__WEBPACK_IMPORTED_MODULE_2__.lB)(e,!1,(e=>{this._renderChildren(e,_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.RI.Highlight)}))}}}}]);