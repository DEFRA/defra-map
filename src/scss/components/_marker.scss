@use '../settings/shadows' as *;
@use '../settings/colours' as *;

.fm-c-marker {
    position: absolute;
    display: none;
    left: 0;
    top: 0;

    svg {
        display: block;
    }
}

.fm-c-marker--visible {
    display: block;
}

// stylelint-disable declaration-no-important
.fm-c-marker--center {
    transform: translate(-50%, -50%) !important; // Need to overide provider inline style
    left: 50%;
    top: 50%;
}
// stylelint-enable declaration-no-important

// Geolocation
.fm-c-marker--location .fm-c-marker__inner {
    border-radius: 100%;
    box-shadow: $button-shadow;
    color: currentcolor;
}

// Marker
.fm-c-marker--target {
    z-index: 2;
    color: var(--foreground-colour);

    path:first-child {
        display: none;
    }

    path:last-child {
        display: block;
        stroke-width: 3;
        stroke: $background-colour;
        fill: $foreground-colour;
        paint-order: stroke fill;
    }

    // svg {
    //     filter: drop-shadow(0px 0px 1px rgba(255, 255, 255, 1));
    // }

    // circle {
    //     stroke-dasharray: 4 2;
    // }

    &.fm-c-marker--has-data {
        path:first-child {
            display: block;
            stroke-width: 3;
            stroke: $background-colour;
            fill: $foreground-colour;
            paint-order: stroke fill;
        }

        path:last-child {
            display: none;
        }
    }
}

// Overlay target marker
.fm-o-viewport > .fm-c-marker--target {
    width: 38px;
    height: 38px;
    left: 50%;
    top: 50%;
    margin-left: -19px;
    margin-top: -19px;
    pointer-events: none;
}

.fm-o-viewport--large > .fm-c-marker--target {
    left: 100%;
    top: 100%;
}

.fm-o-viewport--dark, .fm-o-viewport--aerial {
    .fm-c-marker--target path:first-child,
    .fm-c-marker--target path:last-child {
        stroke: $foreground-colour;
        fill: $background-colour;
    }
}

// Shortcut marker
.fm-c-marker--shortcut {
    font-family: monospace;
    background:  var(--background-colour);
    border: 2px solid var(--foreground-colour);
    color: var(--foreground-colour);
    border-radius: 4px;
    box-shadow: inset 0 -1px 0 0 var(--foreground-colour);
    font-size: 0.825rem;
    line-height: 1.25rem;
    width: 1.25rem;
    text-align: center;
}

.fm-c-marker--shortcut .fm-c-marker__inner {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

@supports (hanging-punctuation: first) and (font: -apple-system-body) and (-webkit-appearance: none) {
    .fm-c-marker__inner {
        will-change: transform; /* Safari-specific fix */
    }
}

.fm-o-viewport--large .fm-c-marker--shortcut {
    font-size: 1.65rem;
}