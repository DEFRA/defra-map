"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[8835],{"./node_modules/@turf/distance/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>distance});var _turf_invariant__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@turf/invariant/dist/esm/index.js"),_turf_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@turf/helpers/dist/esm/index.js");function distance(from,to,options={}){var coordinates1=(0,_turf_invariant__WEBPACK_IMPORTED_MODULE_0__.uG)(from),coordinates2=(0,_turf_invariant__WEBPACK_IMPORTED_MODULE_0__.uG)(to),dLat=(0,_turf_helpers__WEBPACK_IMPORTED_MODULE_1__.tR)(coordinates2[1]-coordinates1[1]),dLon=(0,_turf_helpers__WEBPACK_IMPORTED_MODULE_1__.tR)(coordinates2[0]-coordinates1[0]),lat1=(0,_turf_helpers__WEBPACK_IMPORTED_MODULE_1__.tR)(coordinates1[1]),lat2=(0,_turf_helpers__WEBPACK_IMPORTED_MODULE_1__.tR)(coordinates2[1]),a=Math.pow(Math.sin(dLat/2),2)+Math.pow(Math.sin(dLon/2),2)*Math.cos(lat1)*Math.cos(lat2);return(0,_turf_helpers__WEBPACK_IMPORTED_MODULE_1__.cJ)(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),options.units)}},"./node_modules/@turf/helpers/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Gf:()=>lengthToRadians,NU:()=>multiLineString,cJ:()=>radiansToLength,g5:()=>multiPolygon,n1:()=>polygon,nv:()=>radiansToDegrees,tR:()=>degreesToRadians,wi:()=>lineString,zX:()=>earthRadius,zx:()=>point});var earthRadius=6371008.8,factors={centimeters:100*earthRadius,centimetres:100*earthRadius,degrees:360/(2*Math.PI),feet:3.28084*earthRadius,inches:39.37*earthRadius,kilometers:earthRadius/1e3,kilometres:earthRadius/1e3,meters:earthRadius,metres:earthRadius,miles:earthRadius/1609.344,millimeters:1e3*earthRadius,millimetres:1e3*earthRadius,nauticalmiles:earthRadius/1852,radians:1,yards:1.0936*earthRadius};function feature(geom,properties,options={}){const feat={type:"Feature"};return(0===options.id||options.id)&&(feat.id=options.id),options.bbox&&(feat.bbox=options.bbox),feat.properties=properties||{},feat.geometry=geom,feat}function point(coordinates,properties,options={}){if(!coordinates)throw new Error("coordinates is required");if(!Array.isArray(coordinates))throw new Error("coordinates must be an Array");if(coordinates.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!isNumber(coordinates[0])||!isNumber(coordinates[1]))throw new Error("coordinates must contain numbers");return feature({type:"Point",coordinates},properties,options)}function polygon(coordinates,properties,options={}){for(const ring of coordinates){if(ring.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(ring[ring.length-1].length!==ring[0].length)throw new Error("First and last Position are not equivalent.");for(let j=0;j<ring[ring.length-1].length;j++)if(ring[ring.length-1][j]!==ring[0][j])throw new Error("First and last Position are not equivalent.")}return feature({type:"Polygon",coordinates},properties,options)}function lineString(coordinates,properties,options={}){if(coordinates.length<2)throw new Error("coordinates must be an array of two or more positions");return feature({type:"LineString",coordinates},properties,options)}function multiLineString(coordinates,properties,options={}){return feature({type:"MultiLineString",coordinates},properties,options)}function multiPolygon(coordinates,properties,options={}){return feature({type:"MultiPolygon",coordinates},properties,options)}function radiansToLength(radians,units="kilometers"){const factor=factors[units];if(!factor)throw new Error(units+" units is invalid");return radians*factor}function lengthToRadians(distance,units="kilometers"){const factor=factors[units];if(!factor)throw new Error(units+" units is invalid");return distance/factor}function radiansToDegrees(radians){return 180*(radians%(2*Math.PI))/Math.PI}function degreesToRadians(degrees){return degrees%360*Math.PI/180}function isNumber(num){return!isNaN(num)&&null!==num&&!Array.isArray(num)}},"./node_modules/@turf/invariant/dist/esm/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function getCoord(coord){if(!coord)throw new Error("coord is required");if(!Array.isArray(coord)){if("Feature"===coord.type&&null!==coord.geometry&&"Point"===coord.geometry.type)return[...coord.geometry.coordinates];if("Point"===coord.type)return[...coord.coordinates]}if(Array.isArray(coord)&&coord.length>=2&&!Array.isArray(coord[0])&&!Array.isArray(coord[1]))return[...coord];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function getGeom(geojson){return"Feature"===geojson.type?geojson.geometry:geojson}__webpack_require__.d(__webpack_exports__,{bg:()=>getGeom,uG:()=>getCoord})},"./src/js/lib/debounce.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>debounce});const debounce=(fn,wait)=>{let timeoutId=null;return(...args)=>{window.clearTimeout(timeoutId),timeoutId=window.setTimeout((()=>{fn(...args)}),wait)}}},"./src/js/lib/symbols.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>parseSVG});const{DOMParser}=window,parseSVG=(icon,fill,text,isDarkBasemap=!1,scale=1)=>{const isSelected=icon.includes("selected"),dom=(new DOMParser).parseFromString(text,"text/html"),svg=dom.querySelector("svg");svg.classList.add("fm-c-symbol"),svg.classList.toggle("fm-c-symbol--selected",isSelected),svg.classList.toggle("fm-c-symbol--dark",isDarkBasemap);const viewBox=svg.getAttribute("viewBox"),width=parseInt(viewBox.split(" ")[2],10)*scale,height=parseInt(viewBox.split(" ")[3],10)*scale;svg.setAttribute("width",width),svg.setAttribute("height",height),fill&&svg.setAttribute("fill",fill);const olFill=svg.querySelectorAll('[fill="#0b0c0c" i], [style*="fill:#0b0c0c" i]'),olStroke=svg.querySelectorAll('[stroke="#0b0c0c" i], [style*="stroke:#0b0c0c" i]');olFill.forEach((n=>n.classList.add("fm-c-symbol__ol-fill"))),olStroke.forEach((n=>n.classList.add("fm-c-symbol__ol-stroke")));const bgFill=svg.querySelectorAll('[fill="#fff" i], [fill="#ffffff" i], [style*="fill:#fff" i], [style*="fill:#ffffff" i]'),bgStroke=svg.querySelectorAll('[stroke*="#fff" i], [stroke*="#ffffff" i], [style*="stroke:#fff" i], [style*="stroke:#ffffff" i]');bgFill.forEach((n=>n.classList.add("fm-c-symbol__bg-fill"))),bgStroke.forEach((n=>n.classList.add("fm-c-symbol__bg-stroke")));const fgFill=svg.querySelectorAll(':not(.fm-c-symbol__ol-fill):not(.fm-c-symbol__bg-fill)[fill], :not(.fm-c-symbol__ol-fill):not(.fm-c-symbol__bg-fill)[style*="fill"]'),fgStroke=svg.querySelectorAll(':not(.fm-c-symbol__ol-stroke):not(.fm-c-symbol__bg-stroke)[stroke], :not(.fm-c-symbol__ol-stroke):not(.fm-c-symbol__bg-stroke)[style*="stroke"]');return fgFill.forEach((n=>n.classList.add("fm-c-symbol__fg-fill"))),fgStroke.forEach((n=>n.classList.add("fm-c-symbol__fg-stroke"))),dom.body.innerHTML}},"./src/js/lib/viewport.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BS:()=>getStatus,CK:()=>getShortcutKey,Ig:()=>getFocusPadding,Ox:()=>getPlace,X_:()=>getScale,Yf:()=>getDistance,ZM:()=>getMapPixel,cj:()=>spatialNavigate,dN:()=>parseCentre,fC:()=>getPoint,fY:()=>getDescription,gd:()=>getStyle,mG:()=>getFeatureShape,mK:()=>getFocusBounds,qo:()=>detectCoordinateType,zw:()=>parseZoom});var _turf_distance__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@turf/distance/dist/esm/index.js"),_turf_helpers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@turf/helpers/dist/esm/index.js"),_store_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/js/store/constants.js");const getUnits=metres=>{let units;return units=metres<800?`${metres} metres`:metres<5e3?(metres/1e3*.621371).toFixed(1)+" miles":Math.round(metres/1e3*.621371)+" miles",units},getBoundsChange=(oCentre,originalZoom,isMaxZoom,isMinZoom,center,zoom)=>{const isSameCentre=JSON.stringify(oCentre)===JSON.stringify(center),isSameZoom=originalZoom===zoom,maxZoom=isMaxZoom?" (Maximum zoom reached)":"",minZoom=isMinZoom?" (Minimum zoom reached)":"";let change="";if(oCentre&&originalZoom&&!(isSameCentre&&isSameZoom))if(isSameCentre||isSameZoom)if(isSameCentre){change=`Zoomed ${zoom>originalZoom?"in":"out"}${maxZoom}${minZoom}: `}else change=`Map move: ${((coord1,coord2)=>{coord1=coord1.map((n=>n>1e3?Math.round(n):Math.round(1e5*n)/1e5)),coord2=coord2.map((n=>n>1e3?Math.round(n):Math.round(1e5*n)/1e5));const ns1=[coord1[0],coord1[1]],ns2=[coord1[0],coord2[1]],ew1=[coord1[0],coord1[1]],ew2=[coord2[0],coord1[1]],nsd=getDistance(ns1,ns2),ewd=getDistance(ew1,ew2),bearing=((coord1,coord2)=>[coord1[0]<coord2[0]&&"east",coord1[0]>coord2[0]&&"west",coord1[1]<coord2[1]&&"north",coord1[1]>coord2[1]&&"south"].filter((b=>b&&"string"==typeof b)))(coord1,coord2),ewc=bearing.filter((b=>["east","west"].includes(b))).join(""),nsc=bearing.filter((b=>["north","south"].includes(b))).join(""),ew=ewc?`${ewc} ${getUnits(ewd)}`:"";return(nsc?`${nsc} ${getUnits(nsd)}`:"")+(ewc&&nsc?", ":"")+ew})(oCentre,center)}, `;else change=`New area${maxZoom}${minZoom}: `;return change},getOffsetBoundingClientRect=el=>(el.closest("[data-fm-main]")||document.body).getBoundingClientRect(),detectCoordinateType=coords=>{if(3===coords.length)return"BNG";const[x,y]=coords;return x>=-180&&x<=180&&y>=-90&&y<=90?"WSG84":x>180&&y>90?"BNG":"Unknown"},getDistance=(coord1,coord2)=>{let distance;if(coord1[0]>1e3){const x=Math.abs(coord1[0]-coord2[0]),y=Math.abs(coord1[1]-coord2[1]);distance=Math.sqrt(Math.pow(x,2)+Math.pow(y,2))}else{const p1=new _turf_helpers__WEBPACK_IMPORTED_MODULE_1__.zx(coord1),p2=new _turf_helpers__WEBPACK_IMPORTED_MODULE_1__.zx(coord2);distance=(0,_turf_distance__WEBPACK_IMPORTED_MODULE_2__.I)(p1,p2,{units:"metres"})}return Math.round(distance)},getFocusPadding=(el,scale)=>{let padding;if(el){const parent=getOffsetBoundingClientRect(el),box=el.getBoundingClientRect(),boxX=box.x||box.left,boxY=box.y||box.top,parentX=parent.x||parent.left,parentY=parent.y||parent.top;padding={top:(boxY-parentY)/scale,left:(boxX-parentX)/scale,right:(parent.width-box.width-(boxX-parentX))/scale,bottom:(parent.height-box.height-(boxY-parentY))/scale}}return Object.values(padding).every((i=>i>=0))&&padding},getFocusBounds=(el,scale)=>{let bounds;if(el){const parent=getOffsetBoundingClientRect(el),box=el.getBoundingClientRect(),m=10;bounds=[[((box.x||box.left)-(parent.x||parent.left)+m)/scale,((box.y||box.top)-(parent.y||parent.top)+box.height-m)/scale],[(box.width+((box.x||box.left)-(parent.x||parent.left))-m)/scale,((box.y||box.top)-(parent.y||parent.top)+m)/scale]]}return bounds},getMapPixel=(el,scale)=>{const parent=getOffsetBoundingClientRect(el),box=el.getBoundingClientRect(),left=((box.x||box.left)-(parent.x||parent.left))/scale,top=((box.y||box.top)-(parent.y||parent.top))/scale;return[left+box.width/2/scale,top+box.height/2/scale]},getDescription=(place,bounds,features)=>{const{featuresTotal,isFeaturesInMap,isPixelFeaturesAtPixel,isPixelFeaturesInMap}=features||{};let text="";featuresTotal?text=`${featuresTotal} feature${1===featuresTotal?"":"s"} in this area. `:isPixelFeaturesAtPixel?text="Data visible at the center coordinate. ":isPixelFeaturesInMap?text="No data visible at the center coordinate. ":isFeaturesInMap&&(text="No feature data in this area. ");const focusPlace=place?`approximate centre ${place}, `:"",focusArea=`covering ${(bounds=>{const ew=getDistance([bounds[0],bounds[1]],[bounds[2],bounds[1]]),ns=getDistance([bounds[0],bounds[1]],[bounds[0],bounds[3]]);return`${getUnits(ew)} by ${getUnits(ns)}`})(bounds)}`;return`${focusPlace}${focusArea}. ${text}${place?"":"Use ALT plus I to find closest place"}`},getStatus=(action,isBoundsChange,place,state,current)=>{const{center,bounds,zoom,isMaxZoom,isMinZoom,features,label,selectedId}=current;let status=null;if(label)status=label;else if(selectedId){status=((featuresInViewport,id)=>{const total=featuresInViewport.length,index=featuresInViewport.findIndex((f=>f.id===id));return index>=0&&`${total} feature${1!==total?"s":""} in this area. ${featuresInViewport[index].name}. ${index+1} of ${total} highlighted.`})(features?.featuresInViewport,selectedId)}else if("DATA"===action)status="Map change: new data. Use ALT plus I to get new details";else if(isBoundsChange){const direction=getBoundsChange(state.center,state.zoom,isMaxZoom,isMinZoom,center,zoom);status=`${direction}${direction?"f":"F"}ocus area ${getDescription(place,bounds,features)}`}else status="";return status},getPlace=(isUserInitiated,action,oPlace,newPlace)=>{let place;return isUserInitiated||(place="RESET"===action?oPlace:newPlace),place},parseCentre=(value,srid)=>{const mb=_store_constants__WEBPACK_IMPORTED_MODULE_0__.NT[`MAX_BOUNDS_${srid}`];let isInRange,coords=value?.split(",");return Array.isArray(coords)&&3===coords?.length?(coords=coords.slice(0,2).map((x=>parseFloat(x))),coords=!coords.some(isNaN)&&coords,coords?(isInRange="27700"===srid?!!coords.filter((c=>c>=0)).length:coords[0]>mb[0]&&coords[0]<mb[2]&&coords[1]>mb[1]&&coords[1]<mb[3],isInRange?coords:null):null):null},parseZoom=value=>{const coords=value?.split(",");if(!Array.isArray(coords)||3!==coords?.length)return null;const zoom=parseFloat(coords[2]);return zoom.isNaN?null:zoom},getShortcutKey=(e,featuresViewport)=>{const number=e.code.slice(-1);return featuresViewport.length>=number?featuresViewport[number-1].id:""},getFeatureShape=feature=>{if((geometry=>{const coordinates=geometry?.coordinates?.[0];if(65!==coordinates?.length)return!1;const[x1,y1]=coordinates[0],[x2,y2]=coordinates[32],center=[(x1+x2)/2,(y1+y2)/2];let minDist=1/0,maxDist=-1/0,minEdge=1/0,maxEdge=-1/0;for(let i=0;i<64;i++){const[xA,yA]=coordinates[i],[xB,yB]=coordinates[(i+1)%64],dist=Math.hypot(xA-center[0],yA-center[1]);minDist=Math.min(minDist,dist),maxDist=Math.max(maxDist,dist);const edgeDist=Math.hypot(xB-xA,yB-yA);minEdge=Math.min(minEdge,edgeDist),maxEdge=Math.max(maxEdge,edgeDist)}const tolerance=(detectCoordinateType(center),.3);return Math.abs(maxDist-minDist)<tolerance&&Math.abs(maxEdge-minEdge)<tolerance})(feature?.geometry))return"circle";if("polygon"===feature?.geometry?.type?.toLowerCase()){const coords=feature.geometry?.coordinates,flatCoords=coords&&Array.from(new Set(coords.flat(2)))||null;return 4===flatCoords?.length?"square":"polygon"}return null},spatialNavigate=(direction,start,pixels)=>{const quadrant=pixels.filter((p=>{const offsetX=Math.abs(p[0]-start[0]),offsetY=Math.abs(p[1]-start[1]);let isQuadrant=!1;return isQuadrant="up"===direction?p[1]<=start[1]&&offsetY>=offsetX:"down"===direction?p[1]>start[1]&&offsetY>=offsetX:"left"===direction?p[0]<=start[0]&&offsetY<offsetX:p[0]>start[0]&&offsetY<offsetX,isQuadrant&&JSON.stringify(p)!==JSON.stringify(start)}));quadrant.length||quadrant.push(start);const distances=quadrant.map((p=>{return a=Math.abs(start[0]-p[0]),b=Math.abs(start[1]-p[1]),Math.sqrt(Math.pow(a,2)+Math.pow(b,2));var a,b})),closest=quadrant[distances.indexOf(Math.min(...distances))];return pixels.findIndex((i=>JSON.stringify(i)===JSON.stringify(closest)))},getScale=size=>({small:1,medium:1.5,large:2}[size]||1),getPoint=(el,e,scale)=>{const{left,top}=el.getBoundingClientRect(),{clientX,clientY}=e.nativeEvent;return[(clientX-left)/scale,(clientY-top)/scale]},getStyle=(styles=[])=>{const validStyles=styles.filter((s=>_store_constants__WEBPACK_IMPORTED_MODULE_0__.NT.STYLES.includes(s.name))),style=window.localStorage.getItem("style");return validStyles.find((s=>s.name===style))||validStyles.find((s=>"default"===s.name))}},"./src/root.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>root});var jsxRuntime_module=__webpack_require__("./node_modules/preact/jsx-runtime/dist/jsxRuntime.module.js"),compat_module=__webpack_require__("./node_modules/preact/compat/dist/compat.module.js");function createRoot(container){return{render:function(children){(0,compat_module.XX)(children,container)},unmount:function(){(0,compat_module.xJ)(container)}}}var constants=__webpack_require__("./src/js/store/constants.js"),eventbus=__webpack_require__("./src/js/lib/eventbus.js");const parseSegments=(dataSegments,seg)=>{let segments=null;if(dataSegments){const queryParams=new URLSearchParams(window.location.search);seg||(seg=queryParams.get("seg")?.split(",")),segments=[];for(const g of dataSegments){const hasParent=!!g.parentIds?.length,hasActiveParent=g.parentIds?.some((p=>segments.includes(p))),q=g.items.find((s=>seg?.includes(s?.id)))?.id,c=g.items.find((l=>l.isSelected))?.id||g.items[0]?.id;hasParent&&!hasActiveParent||segments.push(q||c)}}return segments},parseLayers=dataLayers=>{let layers=null;if(dataLayers){const queryParams=new URLSearchParams(window.location.search),lyr=queryParams.get("lyr")?.split(",")||[];layers=[];for(const g of dataLayers){const c=g.items.filter((l=>l.id&&l.isSelected)).map((l=>l.id)),q=g.items.filter((l=>lyr.includes(l.id))).map((l=>l.id));layers=layers.concat(queryParams.has("lyr")?q:c)}layers=[...new Set(layers)]}return layers},parseGroups=(data,segments,layers,zoom,hasInputs,queryLabel)=>{let groups=data?.filter((g=>{const hasValidParent=!g.parentIds||g.parentIds.some((i=>segments?.includes(i))),isValidMinZoom=!g.minZoom||g.minZoom<=zoom,isValidMaxZoom=!g.maxZoom||g.maxZoom>zoom;return hasValidParent&&isValidMinZoom&&isValidMaxZoom}));if(!hasInputs){const ramps=[];let flatItems=[];groups.forEach((g=>{const checkedRadioId=g.items.find((item=>layers.includes(item.id)))?.id;g.items.forEach((item=>{(("radio"===g?.type?item.id===checkedRadioId:layers.includes(item.id))||!item.id)&&(item.fill||item.icon||item.items?.length)&&("ramp"===item.display?ramps.push(item):item.items?flatItems=flatItems.concat(item.items):flatItems.push(item))}))})),queryLabel&&flatItems.push({display:"query-polygon",label:queryLabel}),groups=ramps.concat([{items:flatItems}]).filter((g=>g.items.length))}return groups},actionsMap={CONTAINER_READY:state=>({...state,isContainerReady:!0}),SET_AVAILABILITY:(state,payload)=>({...state,search:payload.data}),SET_INFO:(state,payload)=>{let previousPanel="INFO"!==state.activePanel&&state.activePanel||state.previousPanel;previousPanel="KEY"===previousPanel&&"KEY";let activePanel="INFO"===state.activePanel?state.previousPanel:state.activePanel;return activePanel=payload?"INFO":activePanel,{...state,info:payload,previousPanel,activePanel,hasViewportLabel:!1,hash:state.hash+1}},ERROR:(state,payload)=>({...state,error:{label:payload.label,message:payload.message},activePanel:"ERROR",hasViewportLabel:!1}),OPEN:(state,payload)=>({...state,previousPanel:state.activePanel,activePanel:payload,activePanelHasFocus:!0,hasViewportLabel:!1,targetMarker:"SEARCH"===payload&&null,featureId:"INFO"===payload?state.featureId:"",hash:state.hash+1}),CLOSE:state=>{const activePanel="INFO"!==state.previousPanel?state.previousPanel:null;return{...state,featureId:null,targetMarker:null,previousPanel:null,activePanelHasFocus:!activePanel,isKeyExpanded:!1,activePanel}},SET_MODE:(state,payload)=>({...state,drawMode:payload.value,query:payload.query,shape:payload.shape,activePanel:"EDIT"===state.activePanel?state.activePanel:null,featureId:null,targetMarker:null}),SET_SELECTED:(state,payload)=>({...state,featureId:payload.featureId,targetMarker:payload.targetMarker,activePanelHasFocus:payload.activePanelHasFocus||state.activePanelHasFocus,hash:state.hash+(payload.featureId?1:0)}),SET_BANNER:(state,payload)=>({...state,banner:payload}),SET_NEXT_SELECTED:(state,payload)=>{let featureId=state.featureId;const{key,features}=payload;if(features.length){const current=features.findIndex((f=>f.id===featureId))||0,total=features.length;let nextIndex="PageDown"===key?current===total-1?0:current+1:current>0?current-1:total-1;nextIndex=nextIndex<features.length?nextIndex:0,featureId=features[nextIndex]?.id||features[0]?.id}return{...state,featureId,activePanel:null}},SET_IS_DARK_MODE:(state,payload)=>{const{style,colourScheme}=payload,{hasAutoMode}=state,isDarkMode="dark"===style?.name||hasAutoMode&&"dark"===colourScheme;return{...state,isDarkMode}},SET_IS_TARGET_VISIBLE:(state,payload)=>({...state,isTargetVisible:payload}),TOGGLE_SEGMENTS:(state,payload)=>({...state,segments:payload.segments,layers:payload.layers,featureId:null,targetMarker:null,isKeyExpanded:!1}),TOGGLE_LAYERS:(state,payload)=>({...state,layers:payload}),TOGGLE_KEY_EXPANDED:(state,payload)=>({...state,isKeyExpanded:payload}),TOGGLE_DRAW_EXPANDED:(state,payload)=>({...state,isDrawMenuExpanded:payload}),TOGGLE_VIEWPORT_LABEL:(state,payload)=>{const hasViewportLabel=payload.data&&(!state.isMobile||!state.activePanel||"LEGEND"===state.activePanel);return{...state,hasViewportLabel}}};var viewport=__webpack_require__("./src/js/lib/viewport.js");const getIsDarkMode=(style,hasAutoMode)=>"dark"===style||hasAutoMode&&window?.matchMedia("(prefers-color-scheme: dark)").matches,reducer=(state,action)=>{const{type,payload}=action,fn=actionsMap[type];if(fn){return fn.bind(void 0,state,payload)()}return state},AppContext=(0,compat_module.q6)(),AppProvider=({options,app,children})=>{const[state,dispatch]=(0,compat_module.WO)(reducer,(options=>{const{styles,legend,search,info,banner,draw,hasAutoMode}=options,style=(0,viewport.gd)(styles),featureId=info?.featureId||options.featureId,targetMarker=info?.coord?{coord:info.coord,hasData:info.hasData}:null,query=draw?.feature,[drawTool,drawTools]=((tool,tools,defaultTools)=>{let validTools=tools?defaultTools.filter((d=>tools.includes(d.id))):defaultTools;return validTools=validTools.sort(((a,b)=>tools?.indexOf(a.id)-tools?.indexOf(b.id))),[validTools.find((m=>m.id===tool))?tool:null,validTools]})(draw?.tool,draw?.tools,constants.yX),shape=(0,viewport.mG)(query)||drawTool||drawTools[0].id,drawMode=drawTool?constants.yX.find((m=>m.id===drawTool)).drawMode:"default",activePanel=((drawMode,info,featureId,targetMarker,legend)=>{let panel;return panel="default"===drawMode&&info&&(featureId||targetMarker)?"INFO":"default"===drawMode&&legend?.isVisible?"inset"===legend?.display?"LEGEND":"KEY":null,panel})(drawMode,info,featureId,targetMarker,legend);return{isContainerReady:!1,search,legend,info,banner,draw,segments:legend&&parseSegments(legend.segments),layers:legend&&parseLayers(legend.key),isKeyExpanded:!1,isDrawMenuExpanded:"collapse"!==draw?.collapse,isDarkMode:getIsDarkMode(style?.name,hasAutoMode),hasAutoMode,featureId,targetMarker:!featureId&&targetMarker,pointerQuery:null,previousPanel:null,activePanel,activePanelHasFocus:!1,hasViewportLabel:!1,drawMode,drawTool,drawTools,shape,isFrameVisible:!1,isTargetVisible:!1,query,hash:1}})(options)),store=(0,compat_module.Kr)((()=>({...app,...state,options,dispatch})));return(0,jsxRuntime_module.Y)(AppContext.Provider,{value:store,children})};var utils=__webpack_require__("./src/js/lib/utils.js");const viewport_actions_map_actionsMap={READY:(state,payload)=>{const attributions=state.style?.attribution?[state.style.attribution]:payload.attributions,zoom=payload.zoom;return{...state,zoom,currentZoom:zoom,resolution:payload.resolution,attributions}},UPDATE:(state,payload)=>{const{oPlace,originalZoom,isUserInitiated,action}=state,{bounds,center,zoom,features}=payload,place=(0,viewport.Ox)(isUserInitiated,action,oPlace,state.place),original={oBbox:bounds,oCentre:center,rZoom:zoom,originalZoom,oPlace:place},isBoundsChange=!(0,utils.Ft)(state.bounds,bounds),isUpdate=["GEOLOC","DATA"].includes(action)||isBoundsChange,status=(0,viewport.BS)(action,isBoundsChange,place,state,payload),newAction=isBoundsChange&&"SEARCH"===action&&!isUserInitiated?"SEARCH":null,attributions=state.style?.attribution?[state.style.attribution]:payload.attributions;return{...state,...["INIT","GEOLOC"].includes(action)&&original,place,bounds,center,zoom,features,status,isUpdate,isMoving:!1,isStatusVisuallyHidden:!0,action:newAction,attributions}},UPDATE_PLACE:(state,payload)=>{const{bounds,features}=state;let status=(0,viewport.fY)(payload,bounds,features);return status=status?String(status[0]).toUpperCase()+String(status).slice(1):status,{...state,place:payload,status,isUserInitiated:!1,isStatusVisuallyHidden:!0}},MOVE_START:(state,payload)=>({...state,status:"",isMoving:!0,isUpdate:!1,isUserInitiated:payload,isStatusVisuallyHidden:!0,hasShortcuts:!0,action:null}),MOVE:(state,payload)=>{const{isMaxZoom,isMinZoom,zoom,resolution}=payload,attributions=state.style?.attribution?[state.style.attribution]:payload.attributions,currentZoom=zoom;return{...state,isMaxZoom,isMinZoom,currentZoom,resolution,attributions}},RESET:state=>({...state,place:state.oPlace,action:"RESET",isUpdate:!1}),SEARCH:(state,payload)=>({...state,bounds:payload.bounds,center:payload.center,zoom:payload.zoom,place:payload.place,action:"SEARCH",isStatusVisuallyHidden:!0,isUpdate:!1,padding:null,timestamp:Date.now()}),GEOLOC:(state,payload)=>({...state,place:payload.place,center:payload.center,bounds:null,status:"",isStatusVisuallyHidden:!0,action:"GEOLOC",isUpdate:!1}),ZOOM_IN:state=>({...state,action:"ZOOM_IN",isUserInitiated:!0,isUpdate:!1}),ZOOM_OUT:state=>({...state,action:"ZOOM_OUT",isUserInitiated:!0,isUpdate:!1}),SET_STYLE:(state,payload)=>{const{style,colourScheme}=payload,styleName="light"===colourScheme&&"dark"===style&&"default"||"dark"===colourScheme&&"default"===style&&"dark"||style,newStyle=state.styles.find((s=>s.name===styleName)),attributions=newStyle.attribution?[newStyle.attribution]:[];return{...state,action:"STYLE",isUpdate:!1,style:newStyle,attributions}},SWAP_STYLES:(state,payload={})=>{const{styles,minZoom,maxZoom}=payload,styleName=state.style.name;let style;return style=styles?.length?styles?.find((s=>s.name===styleName))||styles[0]:state.originalStyles.find((s=>s.name===styleName))||state.originalStyles[0],{...state,action:"STYLE",isUpdate:!1,minZoom:minZoom||state.originalMinZoom,maxZoom:maxZoom||state.originalMaxZoom,styles:styles||state.originalStyles,style}},SET_SIZE:(state,payload)=>({...state,action:"SIZE",isUpdate:!1,padding:null,size:payload}),CLEAR:state=>({...state,hasShortcuts:!1,isVertexEdit:!1}),CLEAR_STATUS:state=>({...state,status:"",isStatusVisuallyHidden:!1}),CLEAR_FEATURES:state=>{const status="SEARCH"===state.action?state.status:null;return{...state,features:null,status,action:"DATA"}},SET_PADDING:(state,payload)=>{const{panel,viewport,isMobile,isAnimate}=payload;let padding=null;const pRect=panel?.getBoundingClientRect();if(pRect?.height>0){const vRect=viewport.getBoundingClientRect(),oHeight=pRect.bottom-vRect.top,oWidth=pRect.right-vRect.left,isPortrait=viewport.offsetHeight/oHeight>viewport.offsetWidth/oWidth,top=isPortrait?Math.round(pRect.height)+constants.Lc.TOP:0,left=isPortrait?0:Math.round(pRect.width)+constants.Lc.LEFT;padding={...isMobile?{bottom:constants.Lc.BOTTOM+pRect.height}:{},...isPortrait&&!isMobile?{top}:{},...isPortrait||isMobile?{}:{left}}}return{...state,isAnimate,padding}},TOGGLE_SHORTCUTS:(state,payload)=>({...state,hasShortcuts:payload})},getSize=hasSizeCapability=>hasSizeCapability&&window.localStorage.getItem("size")||"small",viewport_reducer_initialState=({hasSizeCapability,srid,bounds,extent,center,zoom,maxZoom,minZoom,place,features,styles})=>{const queryParams=new URLSearchParams(window.location.search),style=(0,viewport.gd)(styles),cz=queryParams.get("cz");return bounds=((cz,center,bounds,srid)=>(0,viewport.dN)(cz,srid)||center?null:bounds)(cz,center,bounds||extent,srid),center=bounds?void 0:((cz,center,srid)=>(0,viewport.dN)(cz,srid)||center)(cz,center,srid),zoom=((cz,zoom,minZoom,maxZoom)=>{let initZoom=(0,viewport.zw)(cz)||zoom;return initZoom=minZoom&&initZoom?Math.max(minZoom,initZoom):initZoom,initZoom=maxZoom&&initZoom?Math.min(maxZoom,initZoom):initZoom,initZoom})(cz,zoom,minZoom,maxZoom),{bounds,center,zoom,currentZoom:zoom,resolution:null,originalMinZoom:minZoom,originalMaxZoom:maxZoom,minZoom,maxZoom,isMaxZoom:zoom>=maxZoom,isMinZoom:zoom<-minZoom,originalStyles:styles,styles,style,attributions:[],place:cz?null:place,originalZoom:zoom,size:getSize(hasSizeCapability),features,status:"",isStatusVisuallyHidden:!0,error:null,action:"INIT",isMoving:!1,isUpdate:!1,isFeaturesChange:!1,isPanZoomChange:!1,isUserInitiated:!1,hasShortcuts:!0,padding:null,timestamp:Date.now()}},viewport_reducer_reducer=(state,action)=>{const{type,payload}=action,fn=viewport_actions_map_actionsMap[type];if(fn){return fn.bind(void 0,state,payload)()}return state},ViewportContext=(0,compat_module.q6)(),ViewportProvider=({options,children})=>{const[state,dispatch]=(0,compat_module.WO)(viewport_reducer_reducer,viewport_reducer_initialState(options)),store=(0,compat_module.Kr)((()=>({...state,dispatch})));return(0,jsxRuntime_module.Y)(ViewportContext.Provider,{value:store,children})},useApp=()=>(0,compat_module.NT)(AppContext);var dom=__webpack_require__("./src/js/lib/dom.js");const{history:use_query_state_history}=window,useQueryState=query=>{const navigate=(state,url)=>{use_query_state_history.replaceState(state,"",url)},setQuery=(0,compat_module.hb)((value=>{const existingQueries=new URLSearchParams(window.location.search);existingQueries.delete(query),existingQueries.set(query,value);const queryString=existingQueries.toString();navigate(window.history.state,`${window.location.pathname}?${decodeURIComponent(queryString)}`)}),[navigate,query]);return[new URLSearchParams(window.location.search).get(query),setQuery]},useResizeObserver=(el,callback)=>{const observer=(0,compat_module.li)(null),prevWidth=(0,compat_module.li)(null),prevHeight=(0,compat_module.li)(null);(0,compat_module.vJ)((()=>(observer.current&&el&&observer.current.unobserve(el),window.ResizeObserver&&(observer.current=new window.ResizeObserver((entries=>{for(const entry of entries){const{width,height}=entry.contentRect;("number"==typeof height&&height!==prevHeight.current||"number"==typeof width&&width!==prevWidth.current)&&(prevWidth.current=width,prevHeight.current=height,callback())}})),el&&observer.current&&observer.current.observe(el)),()=>{observer.current&&el&&observer.current.unobserve(el)})),[el,window.ResizeObserver])},useViewport=()=>(0,compat_module.NT)(ViewportContext);var debounce=__webpack_require__("./src/js/lib/debounce.js");const getClassName=(isVisible,isActive,drawMode,shape)=>`fm-c-padding-box${"frame"===drawMode?` fm-c-padding-box--${shape}`:""}${isVisible?" fm-c-padding-box--visible":""}${isActive?" fm-c-padding-box--active":""}`;function PaddingBox({children}){const{provider,options,isContainerReady,drawMode,shape,viewportRef,obscurePanelRef,targetMarker,frameRef,interfaceType,isMobile}=useApp(),{dispatch,features,padding,isAnimate}=useViewport();(0,compat_module.vJ)((()=>{provider.map&&provider.setPadding(targetMarker?.coord,isAnimate)}),[padding]),(0,compat_module.vJ)((()=>{isContainerReady&&dispatch({type:"SET_PADDING",payload:{panel:obscurePanelRef?.current,viewport:viewportRef.current,isMobile}})}),[isContainerReady]),(0,compat_module.vJ)((()=>{setTimeout((()=>{dispatch({type:"SET_PADDING",payload:{panel:obscurePanelRef.current,viewport:viewportRef.current,isMobile,isAnimate:!1}})}),0)}),[isMobile]),(0,compat_module.vJ)((()=>{["frame","vertex"].includes(drawMode)&&dispatch({type:"SET_PADDING",payload:{viewport:viewportRef.current,isMobile,isAnimate:!1}})}),[drawMode]);const isVisible="keyboard"===interfaceType&&(options.queryLocation?.layers||options.queryFeature?.layers),isActive="keyboard"===interfaceType&&(features?.featuresInViewport.length||features?.isPixelFeaturesInMap),className=getClassName(isVisible,isActive,drawMode,shape);return(0,jsxRuntime_module.FD)("div",{className,...padding?{style:padding}:{},children:[(0,jsxRuntime_module.Y)("div",{className:"fm-c-padding-box__frame",ref:frameRef}),children]})}const usePixelObscurred=()=>{const{provider,info,viewportRef,targetMarker,isMobile,padding}=useApp(),{size}=useViewport(),[isObscurred,setIsObscurred]=(0,compat_module.J0)(!1);return(0,compat_module.vJ)((()=>{if(targetMarker?.coord&&provider.isLoaded){let pixel=provider.getPixel(targetMarker.coord);const scale=(0,viewport.X_)(size);pixel=pixel.map((c=>c*scale));const{top,left}=viewportRef.current.getBoundingClientRect(),topEl=document.elementFromPoint(pixel[0]+left,pixel[1]+top);setIsObscurred(!!topEl?.closest(".fm-c-panel--info"))}return()=>{setIsObscurred(!1)}}),[provider,isMobile,padding,info,targetMarker]),[isObscurred]},isCentre=(interfaceType,targetMarker,activePanel)=>["keyboard","touch"].includes(interfaceType)&&!(targetMarker&&"INFO"===activePanel),hasData=(isTargetCentre,features,targetMarker)=>isTargetCentre?features?.isPixelFeaturesAtPixel:targetMarker?.hasData,isVisible=(interfaceType,isTargetCentre,drawMode,features,targetCoord,activePanel)=>{let isTargetVisible=isTargetCentre&&"default"===drawMode&&features?"pixel"===features?.resultType:!!targetCoord;return"touch"===interfaceType&&(isTargetVisible=isTargetVisible&&(!activePanel||"INFO"===activePanel)),isTargetVisible};function Target(){const{provider,drawMode,targetMarker,activePanel,viewportRef,obscurePanelRef,isContainerReady,interfaceType,isMobile}=useApp(),appDispatch=useApp().dispatch,{dispatch,features}=useViewport(),[isObscurred]=usePixelObscurred(),isTargetCentre=isCentre(interfaceType,targetMarker,activePanel),hasTargetData=hasData(isTargetCentre,features,targetMarker),targetCoord=isTargetCentre?null:targetMarker?.coord,isTargetVisible=isVisible(interfaceType,isTargetCentre,drawMode,features,targetCoord,activePanel);return(0,compat_module.vJ)((()=>{appDispatch({type:"SET_IS_TARGET_VISIBLE",payload:isTargetVisible})}),[isTargetVisible]),(0,compat_module.vJ)((()=>{provider.setTargetMarker(targetCoord,hasTargetData,isTargetVisible)}),[provider.map,targetCoord,hasTargetData,isTargetVisible]),(0,compat_module.vJ)((()=>{isObscurred&&isContainerReady&&obscurePanelRef.current&&dispatch({type:"SET_PADDING",payload:{panel:obscurePanelRef.current,viewport:viewportRef.current,isMobile,isAnimate:!0}})}),[isObscurred]),(0,jsxRuntime_module.Y)(jsxRuntime_module.FK,{children:!targetCoord&&isTargetVisible&&(0,jsxRuntime_module.Y)("div",{className:"fm-c-marker fm-c-marker--target fm-c-marker--visible fm-c-marker--center"+(hasTargetData?" fm-c-marker--has-data":""),"aria-label":"Map marker",children:(0,jsxRuntime_module.Y)("div",{className:"fm-c-marker__inner",children:(0,jsxRuntime_module.FD)("svg",{width:"38",height:"38",viewBox:"0 0 38 38",fillRule:"evenodd",fill:"currentColor",children:[(0,jsxRuntime_module.Y)("path",{d:"M5.035 20H1v-2h4.035C5.525 11.069 11.069 5.525 18 5.035V1h2v4.035c6.931.49 12.475 6.034 12.965 12.965H37v2h-4.035c-.49 6.931-6.034 12.475-12.965 12.965V37h-2v-4.035C11.069 32.475 5.525 26.931 5.035 20zM19 7A12.01 12.01 0 0 0 7 19a12.01 12.01 0 0 0 12 12 12.01 12.01 0 0 0 12-12A12.01 12.01 0 0 0 19 7zm0 10a2 2 0 1 1 0 4 2 2 0 1 1 0-4z"}),(0,jsxRuntime_module.Y)("path",{d:"M5.035 20H1v-2h4.035a14.02 14.02 0 0 1 .246-1.8l1.96.399C7.083 17.375 7 18.178 7 19s.083 1.625.241 2.401l-1.96.399a14.02 14.02 0 0 1-.246-1.8zM20 5.035a14.02 14.02 0 0 1 1.8.246l-.399 1.96C20.625 7.083 19.822 7 19 7s-1.625.083-2.401.241l-.399-1.96a14.02 14.02 0 0 1 1.8-.246V1h2v4.035zm-2 27.93a14.02 14.02 0 0 1-1.8-.246l.399-1.96c.776.158 1.579.241 2.401.241s1.625-.083 2.401-.241l.399 1.96a14.02 14.02 0 0 1-1.8.246V37h-2v-4.035zM32.965 20a14.02 14.02 0 0 1-.246 1.8l-1.96-.399c.158-.776.241-1.579.241-2.401s-.083-1.625-.241-2.401l1.96-.399a14.02 14.02 0 0 1 .246 1.8H37v2h-4.035zM19 17a2 2 0 1 1 0 4 2 2 0 1 1 0-4zm3.8-9.385l.634-1.897a13.98 13.98 0 0 1 4.848 2.805l-1.327 1.496c-1.196-1.06-2.605-1.886-4.155-2.404zm5.181 3.43l1.496-1.327a13.98 13.98 0 0 1 2.805 4.848l-1.897.634c-.518-1.55-1.344-2.959-2.404-4.155zM30.385 22.8l1.897.634a13.98 13.98 0 0 1-2.805 4.848l-1.496-1.327c1.06-1.196 1.886-2.605 2.404-4.155zm-3.43 5.181l1.327 1.496a13.98 13.98 0 0 1-4.848 2.805l-.634-1.897c1.55-.518 2.959-1.344 4.155-2.404zM15.2 30.385l-.634 1.897a13.98 13.98 0 0 1-4.848-2.805l1.327-1.496c1.196 1.06 2.605 1.886 4.155 2.404zm-5.181-3.43l-1.496 1.327a13.98 13.98 0 0 1-2.805-4.848l1.897-.634c.518 1.55 1.344 2.959 2.404 4.155zM7.615 15.2l-1.897-.634a13.98 13.98 0 0 1 2.805-4.848l1.496 1.327c-1.06 1.196-1.886 2.605-2.404 4.155zm3.43-5.181L9.718 8.523a13.98 13.98 0 0 1 4.848-2.805l.634 1.897c-1.55.518-2.959 1.344-4.155 2.404z"})]})})})})}const viewport_getClassName=(size,styleName,isFocusVisible,isKeyboard,hasShortcuts)=>`fm-o-viewport${"small"!==size?" fm-o-viewport--"+size:""} fm-o-viewport--${styleName}${hasShortcuts&&isKeyboard?" fm-o-viewport--has-shortcuts":""}${isFocusVisible?" fm-u-focus-visible":""}`;function Viewport(){const{isContainerReady,provider,geocode,options,parent,drawMode,shape,segments,layers,viewportRef,frameRef,activePanel,activeRef,featureId,targetMarker,interfaceType}=useApp(),{id,hasAutoMode,backgroundColor,queryFeature,queryLocation,draw}=options,appDispatch=useApp().dispatch,{style,bounds,center,zoom,oCentre,originalZoom,rZoom,minZoom,maxZoom,features,size,status,isStatusVisuallyHidden,hasShortcuts,action,timestamp,isMoving,isUpdate}=useViewport(),viewportDispatch=useViewport().dispatch,[,setQueryCz]=useQueryState(constants.W0.params.centerZoom),mapContainerRef=(0,compat_module.li)(null),startPixel=(0,compat_module.li)([0,0]),labelPixel=(0,compat_module.li)(null),pointerPixel=(0,compat_module.li)(null),isDraggingRef=(0,compat_module.li)(!1),isKeyboard="keyboard"===interfaceType,isFocusVisible=isKeyboard&&document.activeElement===viewportRef.current,className=viewport_getClassName(size,style?.name,isFocusVisible,isKeyboard,hasShortcuts),scale=(0,viewport.X_)(size),bgColor=(0,utils.oU)(backgroundColor,style?.name),handleMapLoad=e=>{viewportDispatch({type:"READY",payload:e.detail}),eventbus.A.dispatch(parent,constants.AZ.APP_READY,{...e.detail,drawMode,segments,layers,style:style.name,size})},debounceUpdatePlace=(0,compat_module.hb)((0,debounce.s)((async coord=>{const place=await geocode.getNearest(zoom,coord);viewportDispatch({type:"UPDATE_PLACE",payload:place||"remote area"})}),500),[]),handleMoveStart=e=>{const isUserInitiated=e.detail.isUserInitiated;viewportDispatch({type:"MOVE_START",payload:isUserInitiated}),isKeyboard&&"INFO"===activePanel&&isUserInitiated&&appDispatch({type:"CLOSE"})},handleMove=e=>{viewportDispatch({type:"MOVE",payload:{...e.detail}})},debounceUpdate=(0,compat_module.hb)((0,debounce.s)((async e=>{viewportDispatch({type:"UPDATE",payload:e.detail})}),500),[]),handleUpdate=e=>{viewportDispatch({type:"CLEAR_STATUS"}),debounceUpdate(e)},handleMapQuery=e=>{const{resultType}=e.detail,{items,isPixelFeaturesAtPixel,coord}=e.detail.features,selectedId="feature"===resultType&&items.length?items[0].id:null;appDispatch({type:"SET_SELECTED",payload:{featureId:selectedId,targetMarker:"pixel"===resultType?{coord,hasData:isPixelFeaturesAtPixel}:null,activePanelHasFocus:!0}}),eventbus.A.dispatch(parent,constants.AZ.APP_QUERY,{...e.detail,style:style.name,size,segments,layers})},handleMapStyle=e=>{eventbus.A.dispatch(parent,constants.AZ.APP_CHANGE,{...e.detail,style:style.name,size,drawMode,segments,layers})};return(0,compat_module.vJ)((()=>(isContainerReady&&!provider.isLoaded&&(provider.init({...options,container:mapContainerRef.current,paddingBox:frameRef.current,bounds,center,zoom,minZoom,maxZoom,style,size,featureLayers:queryFeature?.layers,locationLayers:queryLocation?.layers}),provider.addEventListener("load",handleMapLoad),provider.addEventListener("update",handleUpdate),provider.addEventListener("move",handleMove),provider.addEventListener("mapquery",handleMapQuery)),document.querySelector("[data-fm-open]")&&(activeRef.current=viewportRef.current),()=>{provider.removeEventListener("load",handleMapLoad),provider.removeEventListener("update",handleUpdate),provider.removeEventListener("move",handleMove),provider.removeEventListener("mapquery",handleMapQuery),provider?.remove()})),[isContainerReady]),(0,compat_module.vJ)((()=>(provider.addEventListener("movestart",handleMoveStart),()=>{provider.removeEventListener("movestart",handleMoveStart)})),[isKeyboard,activePanel,action]),(0,compat_module.vJ)((()=>{switch(provider.addEventListener("style",handleMapStyle),action){case"SEARCH":bounds?provider.fitBounds(bounds):provider.setCentre(center,zoom),appDispatch({type:"CLOSE"}),activeRef.current=viewportRef.current;break;case"RESET":provider.setCentre(oCentre,rZoom);break;case"GEOLOC":provider.setCentre(center,originalZoom),provider.showLocation(center);break;case"ZOOM_IN":provider.zoomIn();break;case"ZOOM_OUT":provider.zoomOut();break;case"SIZE":window.localStorage.setItem("size",size),provider.setSize(size);break;case"STYLE":window.localStorage.setItem("style",style.name),provider.setStyle(style,minZoom,maxZoom)}return()=>{provider.removeEventListener("style",handleMapStyle)}}),[timestamp,action,drawMode,style,size]),(0,compat_module.vJ)((()=>{isUpdate&&setQueryCz(`${center.toString()},${zoom}`)}),[isUpdate]),(0,compat_module.vJ)((()=>{if(hasAutoMode&&provider.map){const colourScheme=window?.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";viewportDispatch({type:"SET_STYLE",payload:{style:style.name,colourScheme}})}}),[window?.matchMedia("(prefers-color-scheme: dark)").matches]),(0,compat_module.vJ)((()=>{provider.selectFeature(featureId)}),[featureId,targetMarker]),(0,compat_module.vJ)((()=>{!provider.map||provider.draw||"default"===drawMode&&!draw?.feature||provider.initDraw({...draw,drawMode,shape})}),[provider.map,drawMode]),useResizeObserver(viewportRef.current,(()=>{provider.setPadding(null,!1)})),(0,jsxRuntime_module.FD)("div",{id:`${id}-viewport`,className,role:"application","aria-labelledby":`${id}-viewport-label`,...isUpdate?{"aria-describedby":`${id}-viewport-description`}:{},onClick:e=>{if(["SEARCH","KEY"].includes(activePanel))appDispatch({type:"CLOSE"});else if(!isDraggingRef.current){const point=(0,viewport.fC)(viewportRef.current,e,scale);e.altKey&&provider.showLabel?labelPixel.current=provider.showLabel(point):"default"===drawMode&&(queryFeature?.layers||queryLocation?.layers)&&provider.queryPoint(point)}},onFocus:()=>{(0,dom.hL)(viewportRef.current)},onKeyDown:e=>{if("Tab"!==e.key&&e.preventDefault(),!e.altKey&&constants.FB.pan[e.key.toUpperCase()]&&provider.panBy(constants.FB[e.shiftKey?"shiftPan":"pan"][e.key.toUpperCase()]),["+","-","=","_"].includes(e.key)&&(["+","="].includes(e.key)?viewportDispatch({type:"ZOOM_IN"}):viewportDispatch({type:"ZOOM_OUT"})),!e.altKey&&"Enter"===e.key&&"default"===drawMode)if(featureId)provider.queryFeature(featureId);else if(queryLocation?.layers&&!isMoving){const point=(0,viewport.ZM)(frameRef.current,scale);provider.queryPoint(point)}["PageDown","PageUp"].includes(e.key)&&queryFeature&&(labelPixel.current=provider?.hideLabel(),viewportDispatch({type:"TOGGLE_SHORTCUTS",payload:!0}),appDispatch({type:"SET_NEXT_SELECTED",payload:{key:e.key,features:features.featuresInViewport}}),activeRef.current=viewportRef.current)},onKeyUp:e=>{if(e.altKey&&"I"===e.code.slice(-1)&&(viewportDispatch({type:"CLEAR_STATUS"}),debounceUpdatePlace(center)),e.altKey&&"K"===e.code.slice(-1)&&appDispatch({type:"OPEN",payload:"KEYBOARD"}),["Escape","Esc"].includes(e.key)&&(labelPixel.current=provider.hideLabel?.(),viewportDispatch({type:"CLEAR"}),appDispatch({type:"SET_SELECTED",payload:{featureId:null}})),e.altKey&&/^[1-9]$/.test(e.code.slice(-1))){const fId=(0,viewport.CK)(e,features?.featuresInViewport);provider.queryFeature(fId)}if(e.altKey&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)&&provider.showNextLabel){const direction=e.key.substring(5).toLowerCase();viewportDispatch({type:"TOGGLE_SHORTCUTS",payload:!1}),labelPixel.current=provider.showNextLabel(labelPixel.current,direction)}e.altKey&&"Enter"===e.key&&pointerPixel.current&&provider.showLabel&&(viewportDispatch({type:"TOGGLE_SHORTCUTS",payload:!1}),labelPixel.current=provider.showLabel(pointerPixel.current))},onPointerDown:e=>{startPixel.current=[e.pageX,e.pageY],isDraggingRef.current=!1},onPointerUp:e=>{const diffX=Math.abs(e.pageX-startPixel.current[0]),diffY=Math.abs(e.pageY-startPixel.current[1]);isDraggingRef.current=diffX>=constants.FB.drag||diffY>=constants.FB.drag},onPointerMove:e=>{const{layerX,layerY}=e.nativeEvent;pointerPixel.current=[layerX/scale,layerY/scale]},...featureId?{"aria-activedescendant":`${id}-feature-${featureId}`}:{},...backgroundColor?{style:{backgroundColor:bgColor}}:{},"aria-owns":`${id}-viewport-features`,tabIndex:"0",ref:viewportRef,"data-fm-viewport":!0,children:[(0,jsxRuntime_module.Y)("div",{id:`${id}-map-container`,className:"fm-o-map-container",ref:mapContainerRef}),(0,jsxRuntime_module.Y)(PaddingBox,{children:(0,jsxRuntime_module.Y)(Target,{})}),(0,jsxRuntime_module.Y)("ul",{id:`${id}-viewport-features`,className:"fm-u-visually-hidden",role:"listbox","aria-labelledby":`${id}-viewport-label`,children:features?.featuresInViewport.map((feature=>{const uid=`${id}${feature.id}`;return(0,jsxRuntime_module.Y)("li",{id:`${id}-feature-${feature.id}`,role:"option","aria-selected":featureId===feature.id,"aria-setsize":"-1",tabIndex:"-1",children:feature.name},uid)}))}),(0,compat_module.Kr)((()=>(0,jsxRuntime_module.Y)("div",{className:"fm-c-status"+(isStatusVisuallyHidden||!status?" fm-u-visually-hidden":""),"aria-live":isUpdate?"polite":"assertive",children:(0,jsxRuntime_module.Y)("div",{id:`${id}-viewport-description`,className:"fm-c-status__inner","aria-atomic":!0,children:status})})),[status])]})}function Exit(){const{options,drawMode,isPage,isBack,handleExit,isDesktop,activePanel}=useApp(),isQueryMode=["frame","vertex"].includes(drawMode),isFixed="inset"!==options?.legend?.display&&isDesktop;if(!(!isQueryMode&&isPage))return null;const Path=()=>isBack?isFixed?(0,jsxRuntime_module.Y)("path",{d:"M10.193,17.777l-7.778,-7.777l7.778,-7.778l1.414,1.414l-6.364,6.364l6.364,6.363l-1.414,1.414Z",fill:"currentColor",strokeWidth:"0"}):(0,jsxRuntime_module.Y)("path",{d:"M3.828 10l8.486 8.485-1.415 1.414L1 10 10.899.101l1.415 1.414L3.828 10z",fill:"currentColor",strokeWidth:"0"}):(0,jsxRuntime_module.Y)("path",{d:"M10,8.6L15.6,3L17,4.4L11.4,10L17,15.6L15.6,17L10,11.4L4.4,17L3,15.6L8.6,10L3,4.4L4.4,3L10,8.6Z",fill:"currentColor",strokeWidth:"0"});return(0,jsxRuntime_module.FD)("button",{onClick:handleExit,className:"fm-c-btn fm-c-btn--exit",..."SEARCH"===activePanel?{style:{display:"none"}}:{},children:[(0,jsxRuntime_module.Y)("svg",{"aria-hidden":"true",focusable:"false",width:isBack?"14":"20",height:"20",viewBox:isBack?"0 0 14 20":"0 0 20 20",children:(0,jsxRuntime_module.Y)(Path,{})}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-btn__label",children:isBack?"Back":"Exit"})]})}const useOutsideInteract=(ref,isModal,type,callback)=>{(0,compat_module.vJ)((()=>{function handleInteractOutside(e){ref.current&&!ref.current.contains(e.target)&&callback(e)}return document.addEventListener(type,handleInteractOutside),()=>{document.removeEventListener(type,handleInteractOutside)}}),[ref,isModal])},createMessage=(suggestions,selected)=>{const results=`${suggestions?.length} result${0!==suggestions?.length?"s":""} are available.`;let message=suggestions?.length?results:"error";return message=suggestions?.length&&selected>=0?`${suggestions[selected].text}. ${selected+1} of ${suggestions?.length} is highlighted.`:message,message},search_actions_map_actionsMap={EXPAND:(state,payload)=>({...state,isExpanded:!0,activeRef:payload}),COLLAPSE:(state,payload)=>({...state,isExpanded:!1,activeRef:payload}),FOCUS:(state,payload)=>({...state,isVisible:!0,isFocusWithin:!0,isFocusVisibleWithin:payload,activeRef:null}),BLUR:state=>({...state,isFocusWithin:!1,isFocusVisibleWithin:!1}),MOUSEENTER:state=>({...state,selected:-1}),CLICK:(state,payload)=>({...state,isVisible:!0,isFocusVisibleWithin:payload.isKeyboard,activeRef:payload.activeRef}),CHANGE:(state,payload)=>{let suggestions=state.suggestions;return payload.length<constants.NT.MIN_SEARCH_LENGTH&&(suggestions=null),{...state,value:payload,suggestions,message:createMessage(suggestions,-1),isVisible:payload.length>=constants.NT.MIN_SEARCH_LENGTH}},SHOW_SUGGESTIONS:(state,payload)=>({...state,suggestions:payload,message:createMessage(payload,-1)}),HIDE_SUGGESTIONS:state=>({...state,isVisible:!1,message:createMessage(state.suggestions,-1),selected:-1}),REVIEW:(state,payload)=>{let index;const current=state.selected,length=state.suggestions.length;return index="ArrowDown"===payload?current===length-1?current:current+1:current>0?current-1:-1,{...state,isVisible:!0,selected:index,message:createMessage(state.suggestions,index),status:""}},SUBMIT:(state,payload)=>({...state,isVisible:!1,value:payload,message:`${state.isVisible?"Collapsed ":""}${state.selected>=0?"Completion selected":""}`,selected:-1,status:""}),CLEAR:(state,payload)=>({...state,isVisible:!1,value:"",suggestions:[],activeRef:payload.activeRef,message:"No suggestions",isFocusVisibleWithin:payload.isFocusVisibleWithin}),CLEAR_STATUS:state=>({...state,status:""}),UPDATE_STATUS:state=>({...state,status:state.message})},search_reducer_initialState={isVisible:!1,isExpanded:!1,isFocusWithin:!1,isFocusVisibleWithin:!1,selected:-1,suggestions:null,value:"",message:"",status:""},search_reducer_reducer=(state,action)=>{const{type,payload}=action,fn=search_actions_map_actionsMap[type];if(fn){return fn.bind(void 0,state,payload)()}return state};function Autocomplete({id,state,dispatch,geocode,errorText,updateViewport}){const selectedRef=(0,compat_module.li)(),{value,selected}=state,debounceUpdateSuggest=(0,compat_module.hb)((0,debounce.s)((async text=>{const items=await geocode.suggest(text);dispatch({type:"SHOW_SUGGESTIONS",payload:items}),updateStatus()}),500),[]),updateStatus=()=>{dispatch({type:"CLEAR_STATUS"}),debounceUpdateStatus()},debounceUpdateStatus=(0,compat_module.hb)((0,debounce.s)((()=>{dispatch({type:"UPDATE_STATUS"})}),500),[]);return(0,compat_module.vJ)((()=>{updateStatus()}),[state.isVisible]),(0,compat_module.vJ)((()=>{updateStatus(),setTimeout((()=>selectedRef.current?.scrollIntoView(!1)),0)}),[selected]),(0,compat_module.vJ)((()=>{value.length>=constants.NT.MIN_SEARCH_LENGTH?debounceUpdateSuggest(value):updateStatus()}),[value]),(0,jsxRuntime_module.FD)("div",{className:"fm-c-search__suggestions",children:[(0,compat_module.Kr)((()=>(0,jsxRuntime_module.Y)("div",{className:"fm-u-visually-hidden","aria-live":"polite","aria-atomic":!0,children:"error"===state.status?errorText||"No results are available":state.status})),[state.status]),state.value?.length>=constants.NT.MIN_SEARCH_LENGTH&&state.suggestions&&!state.suggestions.length&&(0,jsxRuntime_module.Y)("div",{className:"fm-c-search__hint",children:errorText||"No results are available"}),(0,jsxRuntime_module.Y)("ul",{id:`${id}-suggestions`,role:"listbox","aria-labelledby":`${id}-search`,className:"fm-c-search__list",...state.isVisible?{}:{style:{display:"none"}},onMouseEnter:()=>dispatch({type:"MOUSEENTER"}),children:state.suggestions?.map(((item,i)=>(0,jsxRuntime_module.Y)("li",{ref:state.selected===i?selectedRef:null,id:`${id}-search-suggestion-${i}`,className:"fm-c-search-item"+(state.selected===i?" fm-c-search-item--selected":""),onClick:e=>((e,i)=>{e.preventDefault();const text=state.suggestions[i].text,suggestionId=state.suggestions[i].id;dispatch({type:"SUBMIT",payload:text}),updateViewport(text,suggestionId)})(e,i),role:"option","aria-selected":state.selected===i,"aria-posinset":i+1,"aria-setsize":state.suggestions.length,tabIndex:"-1",children:(0,jsxRuntime_module.Y)("span",{className:"fm-c-search-item__primary",dangerouslySetInnerHTML:item.marked})},item.id)))})]})}const getDerivedProps=(search,isMobile,legend,state)=>{const searchWidth=isMobile?null:legend?.keyWidth||legend?.width,hasClear=isMobile&&!!state.value?.length,formClassName=`fm-c-search__form${state.isFocusWithin?" fm-u-focus-within":""}${state.isFocusVisibleWithin?" fm-u-focus-visible-within":""}`,country=` in ${search?.country?.charAt(0).toUpperCase()}${search?.country?.slice(1)}`;return{searchWidth,hasClear,className:"fm-c-search",formClassName,label:`Search for a place${search?.country?country:""}`}},hasPanel=(search,activePanel,isDesktop)=>"SEARCH"===activePanel||isDesktop&&search?.isExpanded;function Search({instigatorRef}){const{geocode,interfaceType,isMobile,options,search,activeRef,activePanel,isDesktop,legend}=useApp(),appDispatch=useApp().dispatch,viewportDispatch=useViewport().dispatch,{id}=options,[state,dispatch]=(0,compat_module.WO)(search_reducer_reducer,search_reducer_initialState),formRef=(0,compat_module.li)(),clearBtnRef=(0,compat_module.li)(),inputRef=(0,compat_module.li)(),{searchWidth,hasClear,className,formClassName,label}=getDerivedProps(search,isMobile,legend,state);useOutsideInteract(inputRef,!0,"touchstart",(e=>{document.activeElement===inputRef.current&&(inputRef.current.blur(),formRef.current?.contains(e.target)&&setTimeout((()=>inputRef.current.focus()),0))}));const updateViewport=async(value,suggestionId)=>{const location=await geocode.find(value,suggestionId);if(!location)return;const{bounds,center,zoom,text}=location;viewportDispatch({type:"SEARCH",payload:{bounds,center,zoom,place:text}})},handleCollapse=()=>{appDispatch({type:"CLOSE"}),activeRef.current=instigatorRef.current};return(0,compat_module.vJ)((()=>{"SEARCH"===activePanel&&(activeRef.current=inputRef.current)}),[activePanel]),hasPanel(search,activePanel,isDesktop)?(0,jsxRuntime_module.FD)("div",{id:`${id}-search-form`,className,role:"dialog","aria-labelledby":`${id}-search`,"aria-modal":!0,open:!0,onKeyUp:e=>{["Escape","Esc"].includes(e.key)&&(e.preventDefault(),handleCollapse())},...searchWidth&&{style:{width:searchWidth}},onKeyDown:e=>{["Escape","Esc"].includes(e.key)&&(e.preventDefault(),state.value||state.isVisible?dispatch({type:"HIDE_SUGGESTIONS"}):dispatch({type:"COLLAPSE",payload:instigatorRef})),["ArrowDown","ArrowUp"].includes(e.key)&&state.suggestions?.length>=1&&(e.preventDefault(),dispatch({type:"REVIEW",payload:e.key}))},ref:formRef,children:[(0,jsxRuntime_module.Y)("div",{className:"fm-c-search__control",children:(0,jsxRuntime_module.FD)("form",{role:"search",className:formClassName,"aria-controls":`${id}-viewport`,onSubmit:e=>{e.preventDefault();const suggestion=state.selected>=0?state.suggestions[state.selected]:null,value=suggestion?.text||state.value;dispatch({type:"SUBMIT",payload:value}),updateViewport(value,suggestion?.id)},children:[isMobile&&(0,jsxRuntime_module.Y)("button",{onClick:handleCollapse,type:"button",className:"fm-c-btn fm-c-btn--search-back","aria-label":"Close search",children:(0,jsxRuntime_module.Y)("svg",{"aria-hidden":"true",focusable:"false",width:"14",height:"20",viewBox:"0 0 14 20",fillRule:"evenodd",fill:"currentColor",children:(0,jsxRuntime_module.Y)("path",{d:"M3.828 10l8.486 8.485-1.415 1.414L1 10 10.899.101l1.415 1.414L3.828 10z",strokeWidth:"0"})})}),(0,jsxRuntime_module.Y)("label",{htmlFor:`${id}-search`,className:"fm-u-visually-hidden",children:label}),(0,jsxRuntime_module.Y)("input",{id:`${id}-search`,className:"fm-c-search__input",role:"combobox","aria-expanded":state.isVisible,"aria-controls":`${id}-suggestions`,type:"search",...!state.value&&{"aria-describedby":`${id}-search-hint`},"aria-autocomplete":"list",autoComplete:"off",placeholder:label,name:`${id}-search`,spellCheck:"false",enterKeyHint:"search",...state.selected>=0&&{"aria-activedescendant":`${id}-search-suggestion-${state.selected}`},value:state.value,onClick:()=>{dispatch({type:"CLICK",payload:{isKeyboard:"keyboard"===interfaceType,activeRef:inputRef}})},onChange:e=>{dispatch({type:"CHANGE",payload:e.target.value})},onFocus:()=>{dispatch({type:"FOCUS",payload:"keyboard"===interfaceType})},onBlur:()=>dispatch({type:"BLUR"}),ref:inputRef}),hasClear&&(0,jsxRuntime_module.Y)("button",{className:"fm-c-btn fm-c-search__clear","aria-label":"Clear search",type:"button",onClick:()=>{dispatch({type:"CLEAR",payload:{activeRef:inputRef,isFocusVisibleWithin:"keyboard"===interfaceType}}),inputRef.current.focus()},ref:clearBtnRef,children:(0,jsxRuntime_module.Y)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,jsxRuntime_module.Y)("path",{d:"M10,8.6L15.6,3L17,4.4L11.4,10L17,15.6L15.6,17L10,11.4L4.4,17L3,15.6L8.6,10L3,4.4L4.4,3L10,8.6Z",style:{fill:"currentColor",strokeWidth:"0"}})})}),!isMobile&&(0,jsxRuntime_module.Y)("button",{onClick:handleCollapse,type:"button",className:"fm-c-btn fm-c-btn--search-close","aria-label":"Close search",children:(0,jsxRuntime_module.Y)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:(0,jsxRuntime_module.Y)("path",{d:"M10,8.6L15.6,3L17,4.4L11.4,10L17,15.6L15.6,17L10,11.4L4.4,17L3,15.6L8.6,10L3,4.4L4.4,3L10,8.6Z",style:{fill:"currentColor",strokeWidth:"0"}})})})]})}),(0,jsxRuntime_module.Y)("div",{id:`${id}-search-hint`,style:{display:"none"},children:"When search results are available use up and down arrows to review and enter to select.  Touch device users, explore by touch or with swipe gestures."}),search?.isAutocomplete&&(0,jsxRuntime_module.Y)(Autocomplete,{id,state,dispatch,geocode,errorText:search.errorText,updateViewport})]}):null}const getClassNames=(className,isInset,zoom)=>`fm-c-panel${className?" fm-c-panel--"+className:""}${isInset?" fm-c-panel--inset":""}${zoom?"":" fm-u-hidden"}`,getRole=instigatorRef=>instigatorRef?"dialog":"region",getProps=(id,className,isMobile,isInset,instigatorRef,width)=>({panelId:`${id}-panel${className?"-"+className:""}`,hasCloseBtn:!!instigatorRef?.current,hasWidth:width&&!(isMobile&&isInset)});function Panel({className,label,isInset,isNotObscure,isHideHeading,isModal,instigatorRef,width,maxWidth,html,children}){const{options,isMobile,dispatch,obscurePanelRef,activeRef,activePanelHasFocus}=useApp(),{zoom}=useViewport(),{id}=options,elementRef=(0,compat_module.li)(null),bodyRef=(0,compat_module.li)(null);useOutsideInteract(elementRef,isModal,"pointerdown",(()=>{isModal&&handleClose()}));const handleClose=()=>{dispatch({type:"CLOSE"}),obscurePanelRef.current=null,activeRef.current=instigatorRef?.current},{panelId,hasCloseBtn,hasWidth}=getProps(id,className,isMobile,isInset,instigatorRef,width);return(0,compat_module.vJ)((()=>{dispatch({type:"CONTAINER_READY"}),obscurePanelRef.current=isNotObscure?elementRef.current:null,instigatorRef?.current&&activePanelHasFocus&&(activeRef.current=elementRef.current)}),[]),(0,compat_module.vJ)((()=>{(0,dom.hL)()}),[isModal]),(0,compat_module.vJ)((()=>{const height=bodyRef.current?.offsetHeight,scrollHeight=bodyRef.current?.scrollHeight,hasInteractions=bodyRef.current?.querySelector("a, button"),tabIndex=!hasInteractions&&height<scrollHeight?0:-1;bodyRef.current.tabIndex=tabIndex})),(0,jsxRuntime_module.FD)(jsxRuntime_module.FK,{children:[(0,jsxRuntime_module.FD)("div",{id:panelId,className:getClassNames(className,isInset,zoom),"aria-labelledby":`${panelId}-label`,role:getRole(instigatorRef),ref:elementRef,...instigatorRef&&{open:!0,"aria-modal":isModal,onKeyDown:e=>{(0,dom.SD)(e)},onKeyUp:e=>{["Escape","Esc"].includes(e.key)&&(e.preventDefault(),handleClose())},onFocus:e=>{e.currentTarget===e.target&&(0,dom.hL)()},tabIndex:"-1"},...!isMobile&&hasWidth&&{style:{width,maxWidth}},children:[(0,jsxRuntime_module.FD)("div",{className:"fm-c-panel__header"+(isHideHeading?" fm-c-panel__header--collapse":""),children:[(0,jsxRuntime_module.Y)("h2",{id:`${panelId}-label`,className:isHideHeading?"fm-u-visually-hidden":"fm-c-panel__heading",dangerouslySetInnerHTML:{__html:label}}),hasCloseBtn&&(0,jsxRuntime_module.Y)("button",{onClick:handleClose,className:"fm-c-btn fm-c-btn--close-panel","aria-label":"Close panel",children:(0,jsxRuntime_module.Y)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",children:(0,jsxRuntime_module.Y)("path",{d:"M10,8.6L15.6,3L17,4.4L11.4,10L17,15.6L15.6,17L10,11.4L4.4,17L3,15.6L8.6,10L3,4.4L4.4,3L10,8.6Z",style:{fill:"currentColor",stroke:"currentColor",strokeWidth:.1}})})})]}),(0,jsxRuntime_module.FD)("div",{className:"fm-c-panel__body",ref:bodyRef,children:[html&&(0,jsxRuntime_module.Y)("div",{className:"fm-c-panel__content",dangerouslySetInnerHTML:{__html:html}}),children]})]}),isModal&&(0,jsxRuntime_module.Y)("div",{className:"fm-c-panel-mask"})]})}function SegmentGroup({id,group}){const{parent,style,drawMode,segments,legend,dispatch,activeRef}=useApp(),{size}=useViewport(),viewportDispatch=useViewport().dispatch,[,setQuerySeg]=useQueryState("seg"),{display,heading,isHidden,isDetails}=group,[isExpanded,setIsExpanded]=(0,compat_module.J0)(group.isExpanded),handleItemClickOrChange=e=>{let seg=segments?.filter((s=>!items.map((i=>i.id)).includes(s)));seg.push(e.currentTarget.value),seg=parseSegments(legend?.segments,seg);const lyr=parseLayers(legend?.key);activeRef.current=e.currentTarget,dispatch({type:"TOGGLE_SEGMENTS",payload:{segments:seg,layers:lyr}}),viewportDispatch({type:"CLEAR_FEATURES"}),eventbus.A.dispatch(parent,constants.AZ.APP_CHANGE,{type:"segment",drawMode,style,size,segments:seg,layers:lyr}),setQuerySeg(seg.join(","))},items=group.items.map((i=>({...i,isChecked:segments.includes(i.id)}))),selected=items.find((i=>i.isChecked)).label;return(0,jsxRuntime_module.FD)("div",{className:`fm-c-segments${display?" fm-c-segments--"+display:""}${isDetails&&!isExpanded?" fm-c-segments--hidden":""}`,...isHidden?{style:{display:"none"}}:{},children:[isDetails?(0,jsxRuntime_module.Y)("h3",{className:"fm-c-segments__heading",children:(0,jsxRuntime_module.FD)("button",{className:"fm-c-details","aria-expanded":isExpanded,"aria-controls":`content-${id}`,onClick:()=>{setIsExpanded(!isExpanded)},children:[(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__label",children:(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__label-focus",children:heading})}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__summary",children:(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__summary-focus",children:selected})}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__toggle",children:(0,jsxRuntime_module.FD)("span",{className:"fm-c-details__toggle-focus",children:[(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__chevron"}),isExpanded?"Hide":"Show"]})})]})}):heading&&(0,jsxRuntime_module.Y)("h3",{className:"fm-c-layers__heading","aria-hidden":"true",children:heading}),(0,jsxRuntime_module.Y)("div",{id:`content-${id}`,className:"fm-c-segments__inner",role:"group",...heading?{"aria-labelledby":`segment-${id}`}:{"aria-label":"Segments"},children:items.map((item=>(0,jsxRuntime_module.Y)(compat_module.FK,{children:["timeline","segmented"].includes(display)?(0,jsxRuntime_module.FD)("button",{"aria-pressed":item.isChecked,className:"fm-c-segments__button",value:item.id,onClick:handleItemClickOrChange,children:[["timeline","segmented"].includes(display)?null:(0,jsxRuntime_module.Y)("span",{className:"fm-c-segments__button-icon"}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-segments__button-text",dangerouslySetInnerHTML:{__html:item.label}})]}):(0,jsxRuntime_module.FD)("div",{className:"fm-c-segments__item",children:[(0,jsxRuntime_module.Y)("input",{className:"fm-c-segments__radio",defaultChecked:item.isChecked,id:item.id,name:`group-${id}`,type:"radio",value:item.id,onChange:handleItemClickOrChange}),(0,jsxRuntime_module.Y)("label",{className:"fm-c-segments__label",htmlFor:item.id,dangerouslySetInnerHTML:{__html:item.label}})]})},item.label.toLowerCase())))})]})}function Segments(){const{segments,legend}=useApp();if(!legend?.segments)return null;let groups=legend.segments?.filter((s=>s.parentIds?s.parentIds.some((i=>segments.includes(i))):s));return groups=groups.map((g=>{const isDetails=!g.type&&g.heading&&g.collapse&&["expanded","collapse"].includes(g.collapse);return{...g,isDetails,isExpanded:isDetails&&"expanded"===g?.collapse}})),(0,jsxRuntime_module.Y)(jsxRuntime_module.FK,{children:groups.map(((group,i)=>(0,jsxRuntime_module.Y)(compat_module.FK,{children:(0,jsxRuntime_module.Y)(SegmentGroup,{group,id:`s${i}`})},`gs${i}`)))})}function More({id,label,isExpanded,setIsExpanded,isRemove}){const{activeRef}=useApp(),btnRef=(0,compat_module.li)(null);return(0,jsxRuntime_module.Y)(jsxRuntime_module.FK,{children:isRemove&&isExpanded?null:(0,jsxRuntime_module.FD)("button",{className:"fm-c-btn-more","aria-controls":id,"aria-label":label,"aria-expanded":isExpanded,ref:btnRef,onClick:()=>{if(setIsExpanded(),!isRemove)return;const previousTabStop=(0,dom.Pt)(document.activeElement,"prev");activeRef.current=previousTabStop,console.log("More",activeRef.current)},children:[(0,jsxRuntime_module.Y)("span",{className:"fm-c-btn-more__chevron"}),label]})})}var symbols=__webpack_require__("./src/js/lib/symbols.js");const layer_group_getDerivedProps=(group,layers,hasInputs)=>{const layout=hasInputs?group.layout:"column",isDetails=hasInputs&&"column"!==layout&&group.heading&&["expanded","collapse"].includes(group.collapse),numItems=group.items.length,numCols="column"===layout&&"ramp"===group.display?numItems:Math.min(numItems,4),heading=group.heading||group.label,checkedRadioId=group.items.find((item=>layers?.includes(item.id)))?.id;return{layout,isDetails,heading,checkedRadioId,styleAttr:{..."column"===layout?{style:{gridTemplateColumns:numItems>=4?`repeat(auto-fit, minmax(${Math.round(300/numCols)}px, auto))`:"repeat(3, 1fr)"}}:{}}}},getLabels=(group,item,checkedRadioId,layers)=>("radio"===group?.type?item.id===checkedRadioId:layers?.includes(item.id))?[item.label]:[],getDisplay=(group,item)=>group.display||item.icon&&"icon"||item.fill&&"fill"||item.display;function LayerGroup({id,group,hasSymbols,hasInputs}){const{parent,dispatch,drawMode,layers,segments}=useApp(),{size,style}=useViewport(),viewportDispatch=useViewport().dispatch,[,setQueryLyr]=useQueryState("lyr"),[isExpanded,setIsExpanded]=(0,compat_module.J0)("collapse"!==group?.collapse),[svg,setSvg]=(0,compat_module.J0)({}),dispatchAppChange=lyr=>{dispatch({type:"TOGGLE_LAYERS",payload:lyr}),viewportDispatch({type:"CLEAR_FEATURES"}),eventbus.A.dispatch(parent,constants.AZ.APP_CHANGE,{type:"layer",drawMode,style,size,segments,layers:lyr}),setQueryLyr(lyr.join(","))},handleItemClick=e=>{const lyr=layers,index=lyr.indexOf(e.currentTarget.value);"false"===e.currentTarget.getAttribute("aria-checked")?lyr.push(e.currentTarget.value):lyr.splice(index,1),dispatchAppChange(lyr)},handleItemChange=e=>{const lyr=layers;checkedRadioId&&lyr.splice(lyr.indexOf(checkedRadioId),1),lyr.push(e.currentTarget.value),dispatchAppChange(lyr)},{layout,isDetails,heading,checkedRadioId,styleAttr}=layer_group_getDerivedProps(group,layers,hasInputs),groupSummary=group.items.reduce(((result,current)=>[...result,...getLabels(group,current,checkedRadioId,layers)]),[]).join(", ").replace(/, ([^,]*)$/,", $1"),isDarkBasemap=["dark","aerial"].includes(style.name),keySymbol=({item,display})=>{const fill=(0,utils.oU)(item?.fill,style.name);return(0,jsxRuntime_module.FD)(jsxRuntime_module.FK,{children:["icon"===display&&(0,jsxRuntime_module.Y)("div",{className:`fm-c-layers__image fm-c-layers__image--${display}`,dangerouslySetInnerHTML:svg[item.icon]}),"fill"===display&&(0,jsxRuntime_module.Y)("div",{className:`fm-c-layers__image fm-c-layers__image--${display}`,children:(0,jsxRuntime_module.Y)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill,children:(0,jsxRuntime_module.Y)("path",{d:"M8 8h24v24H8z"})})}),"query-polygon"===display&&(0,jsxRuntime_module.Y)("div",{className:`fm-c-layers__image fm-c-layers__image--${display}`,children:(0,jsxRuntime_module.Y)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",children:(0,jsxRuntime_module.Y)("path",{d:"M9 9h22v22H9z"})})}),"ramp"===display&&(0,jsxRuntime_module.Y)("div",{className:`fm-c-layers__image fm-c-layers__image--${display}`,children:(0,jsxRuntime_module.Y)("svg",{viewBox:"0 0 5 5",preserveAspectRatio:"none",fill,stroke:fill,strokeWidth:1,children:(0,jsxRuntime_module.Y)("path",{d:"M0 0h5v5H0z"})})})]})},itemInner=({item,index,display,isChecked})=>hasInputs&&"radio"===group.type?(0,jsxRuntime_module.FD)(jsxRuntime_module.FK,{children:[(0,jsxRuntime_module.Y)("input",{className:"fm-c-layers__radio",defaultChecked:isChecked,id:item.id,name:`group-${id}`,type:"radio",value:item.id,onChange:handleItemChange}),(0,jsxRuntime_module.FD)("label",{className:"fm-c-layers__label",htmlFor:item.id,children:[hasSymbols&&keySymbol({display,item}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-layers__text",dangerouslySetInnerHTML:{__html:item.label}})]})]}):hasInputs&&item.id?(0,jsxRuntime_module.FD)("button",{className:"fm-c-layers__button",role:"switch","aria-checked":isChecked,value:item.id,onClick:handleItemClick,children:[hasSymbols&&keySymbol({display,item}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-layers__text",dangerouslySetInnerHTML:{__html:item.label}})]}):(0,jsxRuntime_module.FD)(jsxRuntime_module.FK,{children:[hasSymbols&&keySymbol({display,item}),(0,jsxRuntime_module.Y)("span",{className:group.numLabels&&index%group.numLabels!=0?"fm-u-visually-hidden":"fm-c-layers__text",dangerouslySetInnerHTML:{__html:item.label}})]});return(0,compat_module.vJ)((()=>{let items=group.items.map((item=>item.items||item));items=[].concat(...items).filter((item=>item.icon)),Promise.all(items.map((item=>fetch(item.icon)))).then((responses=>Promise.all(responses.map((res=>res.text()))))).then((texts=>{const icons={};texts.forEach(((text,i)=>{const item=items[i],fill=(0,utils.oU)(item?.fill,style.name);icons[item.icon]={__html:(0,symbols.c)(item.icon,fill,text,isDarkBasemap)}})),setSvg(icons)}))}),[group]),(0,jsxRuntime_module.FD)("div",{className:`fm-c-layers__group${isDetails&&!isExpanded?" fm-c-layers__group--hidden":""} fm-c-layers__group--${layout||"row"}${group.numLabels?" fm-c-layers__group--custom-labels":""}`,role:"group","aria-label":heading,children:[isDetails?(0,jsxRuntime_module.Y)("h3",{className:"fm-c-layers__heading",children:(0,jsxRuntime_module.FD)("button",{className:"fm-c-details","aria-expanded":isExpanded,"aria-controls":`content-${id}`,onClick:()=>{setIsExpanded(!isExpanded)},children:[(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__label",children:(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__label-focus",children:heading})}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__summary",children:(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__summary-focus",children:groupSummary||"None selected"})}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__toggle",children:(0,jsxRuntime_module.FD)("span",{className:"fm-c-details__toggle-focus",children:[(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__chevron"}),isExpanded?"Hide":"Show"]})})]})}):heading&&(0,jsxRuntime_module.Y)("h3",{className:"fm-c-layers__heading","aria-hidden":"true",children:heading}),(0,jsxRuntime_module.Y)("div",{id:`content-${id}`,className:`fm-c-layers__${layout||"row"}s`,...styleAttr,children:group.items.map(((item,i)=>{let display=getDisplay(group,item);const isChecked="radio"===group?.type?item?.id===checkedRadioId:layers?.includes(item.id);return(0,jsxRuntime_module.FD)(compat_module.FK,{children:[(hasSymbols||item.id)&&(0,jsxRuntime_module.Y)("div",{className:`fm-c-layers__item fm-c-layers__item--${display}`,children:itemInner({item,index:i,display,isChecked})}),hasSymbols&&item.items?.map(((child,j)=>(display=item.display||(child.icon?"icon":"fill"),(0,jsxRuntime_module.Y)("div",{className:`fm-c-layers__item fm-c-layers__item--${display}`,children:itemInner({item:child,index:j,display})},`${item.label.toLowerCase()}-${j}`))))]},(item.id||item.label).toLowerCase())}))})]})}function Layers({hasSymbols,hasInputs}){const{dispatch,query,segments,options,activeRef,layers,isKeyExpanded}=useApp(),{id,legend,draw}=options,{currentZoom}=useViewport(),hasHiddenGroups=legend?.key.some((item=>item.isHidden)),queryLabel=query?draw?.keyLabel:null,groups=parseGroups(legend?.key,segments,layers,currentZoom,hasInputs,queryLabel),isEmptyKey=!hasInputs&&!groups.length;return(0,compat_module.vJ)((()=>{if(!isKeyExpanded)return;const lastRef=activeRef.current,nextTabStop=(0,dom.Pt)(lastRef,"next");document.getElementById(`${id}-key`).contains(nextTabStop)?nextTabStop?.focus():lastRef?.focus()}),[isKeyExpanded]),legend?.key?(0,jsxRuntime_module.FD)("div",{id:`${id}-key`,className:"fm-c-layers",children:[groups.map(((g,i)=>(0,jsxRuntime_module.Y)(compat_module.FK,{children:(isKeyExpanded||!g.isHidden)&&(0,jsxRuntime_module.Y)(LayerGroup,{group:g,id:`l${i}`,display:legend?.display,hasSymbols,hasInputs},`lg${i}`)},`fl${i}`))),!isKeyExpanded&&hasHiddenGroups&&(0,jsxRuntime_module.Y)("div",{className:"fm-c-layers__more fm-c-layers__more--center",children:(0,jsxRuntime_module.Y)(More,{id:`${id}-key`,label:"All layers",isExpanded:isKeyExpanded,setIsExpanded:()=>dispatch({type:"TOGGLE_KEY_EXPANDED",payload:!isKeyExpanded}),isRemove:!0})}),isEmptyKey&&(0,jsxRuntime_module.Y)("p",{className:"fm-c-layers__error",children:"No features displayed"})]}):null}function Logo(){const{style,zoom}=useViewport(),isDarkBasemap=["dark","aerial"].includes(style?.name),hasDefaultLogo=style&&!("logo"in style);return(0,jsxRuntime_module.Y)(jsxRuntime_module.FK,{children:hasDefaultLogo&&(0,jsxRuntime_module.Y)("div",{className:"fm-c-logo"+(zoom?"":" fm-u-hidden"),children:(0,jsxRuntime_module.FD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"90",height:"24",fillRule:"nonzero",role:"img",children:[(0,jsxRuntime_module.Y)("title",{children:"Ordnance Survey logo"}),(0,jsxRuntime_module.Y)("path",{fill:isDarkBasemap?"#000":"#fff",d:"M30.084.001l1.602.005a9.8 9.8 0 0 1 6.325 3.312c.484.558.484 1.387-.012 1.959-.281.312-.681.493-1.103.497-.436.004-.851-.184-1.135-.512a6.83 6.83 0 0 0-4.099-2.266l-.437-.065-.381-.022.001 4.319.191.001a8.45 8.45 0 0 1 7.122 3.878c.002-.009.042.053.115.187l.239.418.059.112c.045.086.098.202.159.351l.01.021a8.65 8.65 0 0 1 .384 1.033l.042.14.045.149.16.76c.027.176.055.449.083.817.094 1.543-.244 3.115-.983 4.485l-.044.076c-.07.127-.228.38-.49.775-.014.021-.046.063-.095.125-.465.625-1.015 1.181-1.633 1.655l-.162.123-.468.318c-.415.263-.853.49-1.308.676l-.199.079-.2.073-1.127.33-.747.127-.034.006c-.091.015-.345.056-.959.056h-1.546c-2.885 0-5.631-1.235-7.711-3.447a1.5 1.5 0 0 1-.407-.788 1.53 1.53 0 0 1-.023-.205A11.97 11.97 0 0 1 12 24C5.373 24 0 18.628 0 12S5.373 0 12 0c4.174 0 7.85 2.131 10 5.364l.017-.035.304-.626a8.42 8.42 0 0 1 2.295-2.876l.402-.303A8.31 8.31 0 0 1 29.337.011C29.374.009 29.464 0 29.5 0l.584.001zm28.944 2.148a1.1 1.1 0 0 1 1.097 1.095v1.423c.053-.008.106-.012.161-.012h.861c.192-.001.374.048.532.135a3.26 3.26 0 0 1 1.431-.292c1.223 0 2.111.512 2.626 1.426.7-.879 1.745-1.422 2.87-1.422a3.39 3.39 0 0 1 1.436.297c.161-.092.347-.144.544-.143h.865a1.09 1.09 0 0 1 .627.197 1.09 1.09 0 0 1 .622-.194h.866c.193-.001.375.048.534.136.448-.202.941-.304 1.444-.293 1.228.004 2.116.524 2.626 1.447.692-.9 1.768-1.457 3.033-1.457.946 0 1.851.235 2.509.911l.105.115a3.65 3.65 0 0 1 2.571-1.015c2.28 0 3.611 1.589 3.611 4.117 0 .397-.211.745-.527.937l.256.686a1.09 1.09 0 0 1-.329 1.267c-.84.708-1.889.987-3.01.987-.997 0-1.856-.335-2.502-.914l-.066.063c-.693.571-1.588.851-2.628.851-1.013 0-1.9-.354-2.566-.955a1.09 1.09 0 0 1-1.05.789h-.945c-.604 0-1.096-.49-1.096-1.095V8.499l-.003-.369c-.007-.33-.035-.545-.079-.658-.017.002-.04.007-.084.007-.263 0-.629.263-.629.315v3.441c0 .291-.116.57-.322.776s-.484.32-.773.32H72.7a1.09 1.09 0 0 1-.617-.19c-.177.126-.396.201-.632.201h-.945a1.09 1.09 0 0 1-.513-.128c-.429.186-.897.284-1.374.283-.947 0-1.784-.329-2.427-.888-.153.422-.558.722-1.031.722h-.943c-.604 0-1.096-.49-1.096-1.095V8.318l-.002-.187c-.007-.329-.036-.543-.082-.662-.014.006-.037.01-.081.01-.264 0-.629.262-.629.315v3.459c-.011.599-.5 1.077-1.097 1.077h-.943c-.226 0-.444-.07-.627-.197-.178.125-.396.199-.631.199h-.943a1.09 1.09 0 0 1-.508-.125c-.43.189-.899.289-1.379.289-2.013 0-3.528-1.478-3.743-3.498l-.018-.208-.03.197c-.045.317-.067.57-.067.759v1.489c0 .295-.119.577-.329.783s-.492.317-.768.312h-.943c-.604 0-1.096-.49-1.096-1.095l.001-.485a5.02 5.02 0 0 1-1.406 1.155 4.11 4.11 0 0 1 .381.212c.24.162.407.411.463.686.065.307-.005.627-.177.856l-.49.694c-.318.439-.909.58-1.447.302a2.18 2.18 0 0 0-.886-.3c-.299 0-.396.07-.396.181 0 .003.162.115.691.266.839.222 1.535.548 2.07.972l-.001-.81c.011-.599.5-1.077 1.097-1.077h.945c.29 0 .568.115.773.32s.322.484.322.776v2.845c.001.52.024.776.081.924l.001.004c.017-.007.04-.012.084-.012.264 0 .629-.262.629-.313v-3.448c0-.291.116-.57.322-.776s.483-.32.773-.32h.939c.228-.001.449.069.634.198a1.09 1.09 0 0 1 .628-.198h.861c.151-.001.296.03.429.085a2.76 2.76 0 0 1 1.143-.247 3.65 3.65 0 0 1 .83.116 1.1 1.1 0 0 1 .151.051l.12-.005h.963c.468-.01.892.28 1.043.698l.771 1.973.797-1.971a1.09 1.09 0 0 1 1.022-.7h.951a1.1 1.1 0 0 1 .842.38 3.7 3.7 0 0 1 1.953-.537c.724 0 1.352.16 1.872.459a1.1 1.1 0 0 1 .754-.302h.965c.468-.01.891.28 1.043.698l.784 2.011.803-2.009c.167-.433.588-.713 1.023-.701h.95l.073.003c.529.039.952.45 1.009.972a1.13 1.13 0 0 1-.008.331l-.062.213-2.468 5.923c-.608 1.408-1.639 2.349-2.92 2.571l-.17.015h-.018c-.318-.005-.618-.148-.832-.401l-.514-.627c-.237-.29-.31-.682-.192-1.038.096-.291.308-.525.584-.652l-.178-.091c-.738.439-1.595.62-2.496.62-1.649 0-2.923-.915-3.474-2.336l-.642 1.505c-.172.407-.572.67-1.009.668h-.913c-.432-.003-.823-.26-1.003-.67l-1.702-4.042c-.232.026-.483-.025-.74-.165.018.012.042.018-.032.021-.193 0-.318.28-.318.784v2.978c0 .291-.116.57-.322.776s-.484.32-.773.32h-.945a1.09 1.09 0 0 1-.629-.199 1.06 1.06 0 0 1-.629.199h-.842a1.1 1.1 0 0 1-.551-.134 3.25 3.25 0 0 1-1.431.291c-1.184 0-2.054-.48-2.576-1.339-.643.832-1.698 1.339-2.946 1.339-1.398-.015-2.691-.493-3.523-1.388-.327-.402-.327-.979-.043-1.324l.496-.709c.182-.257.465-.423.718-.449.355-.06.718.06.925.28a2.28 2.28 0 0 0 1.474.612c.098.003.193-.034.262-.103s.105-.161.101-.302c.002-.203-.109-.284-.922-.505-1.864-.508-3.009-1.698-3.009-3.322a2.92 2.92 0 0 1 1.315-2.497c-1.694-.826-2.863-2.628-2.863-4.696 0-2.839 2.204-5.169 4.944-5.169 1.852 0 3.461 1.064 4.309 2.631a1.07 1.07 0 0 1 .486-.115h.861c.151-.001.296.029.428.085.349-.16.734-.246 1.134-.247.285.004.568.043.809.108.293.067.537.248.688.488.578-.38 1.255-.596 1.964-.596a3.39 3.39 0 0 1 .806.085V3.244c0-.606.491-1.095 1.096-1.095h.943zM23.853 14.034l-.021-.023a11.92 11.92 0 0 1-1.48 4.062 1.49 1.49 0 0 1 .467-.073c.429.007.836.192 1.106.495 1.49 1.588 3.389 2.47 5.376 2.515h.727l-.002-4.406-.186-.001a8.34 8.34 0 0 1-5.987-2.568l-.021-.023zm44.845-6.555c-.431 0-.711.383-.711 1.02 0 .681.236 1.017.711 1.019.378 0 .713-.433.713-1.019 0-.746-.232-1.02-.713-1.02zm-12.422 0c-.432 0-.713.383-.713 1.02 0 .685.234 1.017.713 1.019.378 0 .713-.433.713-1.019 0-.746-.232-1.02-.713-1.02zM45.506 5.123c-.969 0-1.813.959-1.813 2.194s.845 2.194 1.813 2.194 1.811-.958 1.811-2.194-.843-2.194-1.811-2.194zM81.2 7.466c-.463 0-.711.357-.711 1.02 0 .764.216 1.019.754 1.019a1.42 1.42 0 0 0 .923-.282 1.09 1.09 0 0 1 .479-.243c-.016-.156-.024-.317-.024-.482a4.73 4.73 0 0 1 .023-.47l-.047-.002c-.255-.025-.495-.137-.679-.316l-.081-.089c-.107-.133-.183-.156-.636-.156z",opacity:".7"}),(0,jsxRuntime_module.Y)("path",{fill:isDarkBasemap?"#fff":"#453c90",d:"M57.99 10.708c-.459.502-1.11.789-1.792.788-1.605 0-2.769-1.262-2.769-2.997 0-1.853 1.438-2.997 2.769-2.997a2.39 2.39 0 0 1 1.792.77V3.244c0-.053.043-.095.096-.095h.943c.053 0 .096.042.097.095v7.993c-.001.053-.044.095-.097.095h-.943c-.053 0-.096-.043-.096-.095v-.529zm-3.425-2.209c0 .97.444 2.013 1.713 2.019 1.072 0 1.713-1.028 1.713-2.019 0-1.266-.64-2.02-1.713-2.02-1.182 0-1.713 1.047-1.713 2.02zm5.722 2.831c-.025 0-.05-.01-.068-.028s-.028-.042-.028-.067V5.75c0-.053.043-.095.096-.095h.865c.049 0 .091.037.096.086l.055.543c.456-.517 1.118-.805 1.808-.786 1.424 0 2.148.929 2.148 2.759v2.978c-.001.053-.044.095-.097.095h-.943c-.053 0-.096-.043-.096-.095V8.499c0-.476 0-1.003-.152-1.391-.166-.43-.483-.629-1.014-.629-.656 0-1.629.552-1.629 1.315v3.441c-.001.053-.044.095-.097.095h-.943zm15.015 3.557c.048.004.086.042.088.09.003.015.003.029 0 .044l-2.463 5.911c-.483 1.119-1.254 1.823-2.173 1.981h-.002c-.029 0-.056-.013-.074-.035l-.513-.626c-.021-.026-.027-.06-.017-.092s.036-.055.068-.064c.89-.22 1.407-.709 1.723-1.631l-2.288-5.447c-.015-.028-.015-.062 0-.09s.049-.042.081-.042h.985c.04-.001.077.024.09.062l1.704 4.372 1.748-4.374c.014-.037.05-.061.09-.06h.95zM45.506 3.148c2.176 0 3.947 1.87 3.947 4.169s-1.773 4.178-3.947 4.178-3.944-1.879-3.944-4.178 1.769-4.169 3.944-4.169zm2.811 4.169c0-1.761-1.26-3.194-2.811-3.194s-2.813 1.433-2.813 3.194 1.263 3.194 2.813 3.194 2.811-1.431 2.811-3.194zm5.66 7.57c.026 0 .05.009.069.027s.029.042.029.068v5.484c0 .026-.01.05-.029.068s-.043.028-.069.027h-.863c-.05.001-.092-.037-.096-.086l-.057-.543a2.32 2.32 0 0 1-1.808.786c-1.424 0-2.148-.927-2.148-2.759v-2.978c.001-.053.044-.095.097-.095h.945c.025 0 .05.01.068.028s.028.042.028.067v2.741c0 .497 0 1.003.15 1.393.168.428.485.628 1.016.628.656 0 1.629-.552 1.629-1.313v-3.448c0-.025.01-.049.028-.067s.042-.028.068-.028h.943zm10.428.042c.018.027.022.062.009.092l-2.342 5.483c-.015.035-.05.058-.088.058h-.906c-.038 0-.073-.023-.088-.058l-2.309-5.484c-.012-.029-.009-.063.009-.09s.048-.043.08-.042h.984c.04-.001.077.024.09.062l1.686 4.317 1.746-4.319c.014-.036.049-.06.088-.06h.961c.033 0 .063.016.081.042zm2.703-.199c1.684 0 2.611 1.107 2.611 3.124 0 .026-.009.05-.027.068s-.043.029-.068.029H65.48c.069.887.527 1.798 1.628 1.798.809 0 1.53-.245 1.974-.672.024-.023.058-.032.09-.025s.057.03.067.06l.276.74c.014.038.004.08-.027.108-.74.631-1.704.763-2.381.763-1.656 0-2.771-1.204-2.771-2.997 0-1.738 1.166-2.997 2.771-2.997zm-1.617 2.406h3.077c-.166-.97-.633-1.423-1.46-1.423s-1.451.554-1.617 1.423zm-15.19-5.807c-.053 0-.096-.043-.096-.095V5.759c0-.053.043-.095.096-.095h.865c.049 0 .091.037.096.086l.05.497a1.69 1.69 0 0 1 1.398-.746c.203.003.405.031.602.083.044.01.075.049.074.093v.857c0 .034-.018.066-.048.083s-.066.017-.096 0c-.171-.114-.376-.165-.58-.145-1.226 0-1.32 1.366-1.32 1.784v2.978c0 .026-.01.05-.029.068s-.043.028-.069.027h-.943zm36.088-5.828C88.073 5.502 89 6.607 89 8.619c0 .053-.043.095-.096.095h-4.143c.069.889.529 1.798 1.628 1.798.819 0 1.527-.25 1.978-.673.023-.022.055-.032.087-.025s.059.029.071.06l.276.74c.02.041.008.09-.03.116-.74.633-1.702.765-2.381.765-1.656 0-2.769-1.208-2.769-2.997 0-1.738 1.164-2.997 2.769-2.997zm-1.617 2.398h3.077c-.166-.97-.633-1.423-1.46-1.423s-1.451.555-1.617 1.423zm-39.099 7.868c1.714.451 2.583 1.32 2.581 2.584-.007 1.394-1.081 2.368-2.611 2.368-1.143-.012-2.174-.393-2.758-1.019-.028-.035-.028-.085 0-.12l.494-.705c.016-.023.041-.038.069-.041s.055.005.074.025a3.28 3.28 0 0 0 2.123.881c.375.013.738-.13 1.003-.394s.408-.627.394-1c.009-.95-.745-1.231-1.66-1.479-1.468-.4-2.272-1.239-2.272-2.357 0-1.458 1.313-2.133 2.532-2.133.7.003 1.386.2 1.98.569a.1.1 0 0 1 .042.063.09.09 0 0 1-.016.072l-.483.684c-.029.04-.082.052-.126.03-.425-.253-.904-.404-1.398-.441-.688 0-1.396.358-1.396 1.158-.018.772.805 1.077 1.426 1.253zm12.574-.957c.044.011.074.05.074.095v.86c0 .035-.019.067-.05.085s-.066.016-.096 0c-.172-.114-.377-.165-.582-.145-1.223 0-1.318 1.366-1.318 1.784v2.978c0 .025-.01.049-.028.067s-.042.028-.068.028h-.945c-.053 0-.096-.043-.096-.095v-5.484c0-.025.01-.049.028-.067s.042-.028.068-.028h.865c.049 0 .091.037.096.086l.05.497a1.69 1.69 0 0 1 1.398-.746 2.65 2.65 0 0 1 .603.085zm24.666-4.851c.031.011.053.038.058.071l.244.74c.012.038 0 .079-.03.104-.501.413-1.171.622-1.992.622-1.677 0-2.85-1.269-2.85-3.008s1.203-2.997 2.861-2.997c.412 0 1.433.079 1.964.813.024.033.024.078 0 .111l-.398.575a.09.09 0 0 1-.074.042c-.03-.003-.058-.016-.08-.037-.395-.49-.855-.529-1.415-.529-1.263 0-1.711 1.088-1.711 2.02 0 1.282.623 2.019 1.711 2.019a2.44 2.44 0 0 0 1.624-.529c.024-.021.058-.028.088-.018zm-14.292 1.537c-1.605 0-2.769-1.268-2.769-2.997 0-1.853 1.437-2.997 2.769-2.997.692-.01 1.353.28 1.813.795l.057-.555c.005-.049.046-.087.096-.086h.865c.053 0 .096.043.096.095v5.495c0 .053-.043.095-.096.095h-.945c-.053 0-.096-.043-.096-.095v-.529c-.46.499-1.11.782-1.79.779zm-1.633-2.997c0 .97.449 2.013 1.711 2.019 1.072 0 1.713-1.028 1.713-2.019 0-1.266-.64-2.02-1.713-2.02-1.18 0-1.711 1.047-1.711 2.02zm8.543-2.997c1.426 0 2.148.926 2.141 2.755v2.978c0 .053-.043.095-.096.095h-.945c-.053 0-.096-.043-.096-.095V8.499c0-.476 0-1.003-.15-1.391-.168-.43-.485-.629-1.016-.629-.655 0-1.629.552-1.629 1.315v3.441c0 .025-.01.049-.028.067s-.042.028-.068.028H72.7c-.053 0-.096-.043-.096-.095V5.754c0-.053.043-.095.096-.095h.87c.049 0 .091.037.096.086l.055.543a2.33 2.33 0 0 1 1.81-.786zM10.216 22.848l-.214-.035-.24-.046c-1.04-.215-2.043-.581-2.979-1.086l.032-.191c.236-1.486.48-3.021 1.093-4.409a1.22 1.22 0 0 0 .301-.536l2.342.075.457.008c.19-.012.373-.074.531-.18.17.108.367.165.569.164a1.02 1.02 0 0 0 .742-.313c.425.209.832.388 1.348.388h.108c.571-.047 1.137-.148 1.69-.3l1.741-.47c-.455.51-.95.982-1.479 1.413-.747.54-1.543 1.005-2.379 1.39a4.65 4.65 0 0 0-1.215.872 3.93 3.93 0 0 0-.593.865l-.117.207a5.7 5.7 0 0 1-.253.382c-.185.24-.337.504-.45.786l-.326 1.04-.021.068-.687-.093zm4.477-4.023c.831 1.134 2.051 1.804 3.305 2.389-1.786 1.167-3.869 1.788-5.997 1.787-.214 0-.427-.007-.636-.02l.31-.988c.1-.242.232-.469.393-.675a4.55 4.55 0 0 0 .275-.416l.12-.213c.139-.278.313-.535.519-.766a4.21 4.21 0 0 1 1.095-.784l.616-.313zM7.199 6.405a27.19 27.19 0 0 0-.459-4.066 11 11 0 0 1 12.097 1.045 2.67 2.67 0 0 0-.198.225c-.164.231-.294.485-.384.754l-.106.266-.145.332c-.242.598-.538 1.173-.884 1.717a6.77 6.77 0 0 1-.962 1.072l-.687.704-.177.23-.427-.389-.097-.179a.72.72 0 0 1-.143-.393c.014-.141.214-.298.368-.425l.126-.107c.046-.04.074-.097.078-.158s-.017-.121-.058-.166-.096-.073-.156-.077-.119.017-.164.057a2.29 2.29 0 0 1-.113.095c-.216.168-.478.393-.531.704-.018.249.052.496.197.699l.025.048a5.9 5.9 0 0 0-.14.207c-.221.345-.384.566-.604.536-.561-.086-.68.232-.793.536s-.197.734.381.972l.159.068a4.09 4.09 0 0 0 .65.232 2.53 2.53 0 0 0 .377.063l.517.021 1.063.061c.484.023.964.104 1.429.243.283.089.459.372.593.625.22.414.43.868.684 1.474.182.413.394.813.632 1.195l.089.148a3.31 3.31 0 0 1-.365.179 21.27 21.27 0 0 1-3.215.995c-.518.142-1.047.236-1.582.28-.446.027-.806-.138-1.213-.331.023-.087.035-.177.035-.268.015-.455-.297-.855-.739-.949l.048-.563a7.98 7.98 0 0 0 .066-1.054l-.03-.573-.028-.661v-.109c-.004-.656-.011-1.629-.739-1.965-.499-.208-1.043-.285-1.58-.225a3.37 3.37 0 0 0-.413.059c-.283.05-.613.109-.79.014-.117-.061-.159-.25-.186-.447-.025-.219-.036-.439-.03-.659v-.152a14.06 14.06 0 0 0-.043-.916l-.021-.357-.027-.357c-.048-.356-.048-.716 0-1.072a45.46 45.46 0 0 0 .252-1.429c.021-.125-.063-.243-.187-.264s-.241.064-.261.188l-.25 1.415a4.28 4.28 0 0 0-.011 1.193l.025.357.023.357.041.893v.15a5.27 5.27 0 0 0 .034.715c.028.197.113.624.436.786s.719.091 1.073.029a3.38 3.38 0 0 1 .354-.054c.465-.052.936.015 1.369.195.478.211.478 1.009.478 1.545v.114l.03.684.028.557a8.04 8.04 0 0 1-.062.993l-.051.593a.95.95 0 0 0-.808.967 1 1 0 0 0 .119.473c-.103.057-.22.081-.337.068l-2.641-.095c-.016-.19-.077-.374-.177-.536-.652-1.426-.829-3.026-1.006-4.577l-.032-.261c.134-1.429.193-2.863.177-4.298zm2.526.222h-.004c-.011.185-.001.37.028.552.012.111.09.531.19.579s.352 0 .453 0h1.155v-.879h-.26V5.765h-1.162c-.131 0-.182-.027-.25.059-.135.17-.14.598-.151.802zm-3.661 8.583l-.067 1.994c-.636-.07-1.24-.366-1.24-.993s.643-.945 1.307-1zm.639.032c.23.036.452.114.654.232a.84.84 0 0 1 .439.736c0 .577-.547.891-1.153.981l.06-1.949zm13.803-.598l2.297-.579a10.97 10.97 0 0 1-1.213 3.325 10.66 10.66 0 0 0-.93-1.174 1.75 1.75 0 0 0-.498-.332 1.91 1.91 0 0 1-.292-.179c-.137-.132-.236-.298-.287-.482.319-.153.617-.348.886-.579.012.002.025.002.037 0zm.542-1.417a5.93 5.93 0 0 1-.822 1.034c-.122.109-.252.208-.39.297a7.14 7.14 0 0 1-.092-.155 9.11 9.11 0 0 1-.611-1.149l-.708-1.511c-.085-.17-.19-.329-.314-.473l-.37-4.716a14.17 14.17 0 0 0 .67-1.408l.142-.331.115-.282c.076-.227.183-.443.319-.64a2.44 2.44 0 0 1 .195-.214c2.027 1.739 3.351 4.168 3.72 6.826l-.142.211-1.534 2.262-.177.25zm-5.009-2.594l-1.08-.064-.375-.018.09-.143a12.95 12.95 0 0 1 1.148-1.649c.204-.236.436-.459.659-.674.307-.284.594-.591.857-.916l.294 3.752-.048-.021c-.502-.153-1.021-.242-1.544-.266zm5.383 2.853l.17-.245 1.376-2.028a11.44 11.44 0 0 1 .032.79c-.001.524-.039 1.048-.113 1.567l-1.856.468.391-.552zm-6.405-4.429a21.81 21.81 0 0 0-.733 1.111l-.198.316c-.174-.053-.344-.117-.51-.191l-.156-.071c-.198-.082-.234-.109-.129-.388s.105-.279.303-.25c.519.075.829-.393 1.05-.736l.055-.084.319.293zm-8.293 5.721l.145-2.126c.109.794.293 1.576.547 2.335-.219-.103-.453-.174-.693-.209zM4.666 17.11c.55 1.343 1.006 2.723 1.366 4.13-2.097-1.353-3.675-3.387-4.47-5.767l.011-.014.136-.093c.229-.136.437-.306.616-.504l.639.504.462.372a4.62 4.62 0 0 0 .508.329l.377.238c.021.297.147.577.354.79zM1.439 9.814l-.177-.157c.379-1.732 1.169-3.346 2.303-4.702l.043.779.267 3.988.012.102c.035.32.027.431-.103.498a1.23 1.23 0 0 1-.468.084l-.19.014c-.096.009-.2.03-.31.052-.236.043-.503.096-.629 0-.257-.202-.507-.434-.749-.657zm-.285.357l.758.657.044.03.085 2.783c.002.088.011.182.021.277a1.73 1.73 0 0 1 0 .482c-.046.211-.367.427-.6.584l-.041.027A10.97 10.97 0 0 1 1 12.002a11.12 11.12 0 0 1 .154-1.831zm20.153 7.605l.03.05c-.759 1.213-1.743 2.266-2.899 3.101-1.263-.595-2.52-1.236-3.335-2.323.5-.265.979-.569 1.431-.909a13.22 13.22 0 0 0 1.56-1.492l.577-.604a11.86 11.86 0 0 0 .496-.191 1.43 1.43 0 0 0 .43.665 2.22 2.22 0 0 0 .354.213 1.36 1.36 0 0 1 .381.239 11.47 11.47 0 0 1 .974 1.251zm-9.749-2.146a.52.52 0 0 1 .16-.385.51.51 0 0 1 .39-.14c.138-.003.273.044.381.132a.49.49 0 0 1 .161.393.55.55 0 0 1-.546.55.55.55 0 0 1-.546-.55zm-4.92 2.022c.232-.027.459-.085.675-.173-.274.768-.483 1.558-.627 2.362l-.035-.87-.012-1.318zm-.678-4.288l.126-.447.168-.586-.168 2.421c-.226.014-.449.055-.664.123a3.63 3.63 0 0 0 .248-.536 13.3 13.3 0 0 0 .29-.975zm.051 5.626l.034.825a27.86 27.86 0 0 0-.79-2.337 2.57 2.57 0 0 0 .742.179l.014 1.333zM4.061 5.697l-.067-1.234a11.08 11.08 0 0 1 2.141-1.785c.226 1.233.362 2.481.406 3.734.035 1.293-.043 2.608-.142 3.904L5.69 12.79l-.128.461-.282.947c-.089.231-.198.453-.328.663l-.177.339a1.27 1.27 0 0 0-.411.586l-.211-.125a4.22 4.22 0 0 1-.459-.295 11.72 11.72 0 0 1-.455-.357l-.73-.573a2.21 2.21 0 0 0 0-.563l-.019-.243-.074-2.653c.16-.008.319-.03.475-.066.087-.02.184-.046.264-.046l.177-.013a1.58 1.58 0 0 0 .652-.134c.437-.225.388-.666.354-.959l-.011-.095-.267-3.966z"}),(0,jsxRuntime_module.Y)("path",{fill:isDarkBasemap?"#fff":"#d40058",d:"M29.459 22.011v-.002c.274 0 .496.222.496.495s-.222.495-.496.495c-2.604 0-5.088-1.118-6.998-3.147a.52.52 0 0 1-.111-.56c.08-.178.257-.293.453-.293.15.002.292.067.392.179 1.715 1.827 3.937 2.832 6.264 2.832zm2.004-20.049v.004c-.253-.031-.44-.252-.426-.507s.223-.455.478-.459h.061a8.8 8.8 0 0 1 5.679 2.974c.158.182.158.453 0 .635-.094.105-.228.165-.369.166s-.279-.06-.372-.168a7.83 7.83 0 0 0-5.051-2.645zm.045 11.462l-.481-.116v-2.199c.428.107.666.29.766.585a4.34 4.34 0 0 1 .161.808 4.57 4.57 0 0 0 .204.975l.041.102-.691-.154zm.864-1.935c-.227-.658-.816-.894-1.337-1.009V8.229a7.45 7.45 0 0 1 6.592 3.952l-.426.336-.14.122c-.063.061-.132.116-.204.166h-.021a32.33 32.33 0 0 1-1.283-.751.23.23 0 0 0-.355.178.23.23 0 0 0 .103.205l.07.034-.383.136-.109.036a.66.66 0 0 0-.485.401c-.021.046-.048.12-.075.2-.042.128-.092.254-.15.376-.197.011-.834 0-1.271 0-.059-.116-.112-.236-.157-.358-.089-.276-.149-.56-.179-.848a4.79 4.79 0 0 0-.188-.924zm.567 11.215c-.007.005-.013.01-.018.016-.358.096-.722.165-1.09.207-.268.029-.401.089-.601-.045-.124-.078-.2-.212-.204-.358v-.486-4.376l2.112 4.649-.199.392zm2.54-3.988c.392.594 1.024.975 1.559 1.243-.453.608-.996 1.143-1.611 1.586l-.444-.628a.23.23 0 0 0-.338-.041l-1.144.992-.036.036-2.432-5.352V13.78l.369.089c.339.094.685.162 1.034.204a3.83 3.83 0 0 0 1.038 1.225c.258.186.852.511 1.332.409.206-.042.384-.173.485-.358.109-.223.17-.467.179-.715.059-.737.281-.796.426-.699.285.19.12.672-.1 1.164l-.045.102a6.89 6.89 0 0 0-.596 1.727c-.124.616-.008 1.255.324 1.788zM38 13.941c.102.052.206.089.308.136.394 1.846.059 3.772-.934 5.377h-.011c-.476-.243-1.043-.578-1.371-1.073a1.84 1.84 0 0 1-.231-1.348c.111-.545.294-1.072.544-1.568l.045-.102c.191-.426.583-1.431-.199-1.888-1.348-.789-1.006 1.364-1.401 1.591-.027.014-.032.043-.079.054-.199.039-.601-.123-.839-.302a3.04 3.04 0 0 1-.675-.715h.428c.264.016.528-.002.787-.052.166-.095.258-.327.369-.642l.061-.163c.045-.102.052-.104.206-.154l.123-.039.589-.209.079-.032c.023-.011.066-.032.055-.032.043.009.773.436.773.436l.537.295a.22.22 0 0 0 .115.03c.083 0 .159-.044.199-.116.03-.053.038-.116.022-.174a.23.23 0 0 0-.108-.139l-.107-.059.077-.068.12-.104.345-.277a7.65 7.65 0 0 1 .34.914c-.117-.046-.249.012-.295.129s.012.249.129.295zm-2.957 7.868c-.472.299-.976.544-1.503.73a1.31 1.31 0 0 1 .256-.32l.952-.828.295.418zm-8.745-9.892l-1.736-1.518c-.209-1.662-.75-3.265-1.591-4.714l1.357 1.152c.095.079.159.19.179.313a5.7 5.7 0 0 1 .161.858 7.57 7.57 0 0 0 .131.755 3.43 3.43 0 0 0 .855 1.701 2.94 2.94 0 0 0 2.157.907 3.42 3.42 0 0 0 .424-.027l1.602-.277v1.967l-2.815-.774c-.05-.016-.115-.03-.179-.045-.104-.017-.206-.046-.304-.086-.056-.036-.106-.078-.15-.127l-.089-.084zm.609.783l2.937.808v2.094a7.34 7.34 0 0 1-5.269-2.26 12.33 12.33 0 0 0 .082-1.393l-.032-.882 1.371 1.196.072.066c.077.083.166.153.265.207a1.61 1.61 0 0 0 .413.125l.161.038zm2.488-11.691c.485-.027.449.52.449.52v8.925l-1.677.293a2.38 2.38 0 0 1-2.064-.696 2.82 2.82 0 0 1-.702-1.418c-.052-.215-.082-.438-.115-.672l.034.021c.222.173.489.28.77.309a1.01 1.01 0 0 0 .524-.147c.134-.075.197-.091.256-.075.222.075.431.188.616.333.1.075.113.084-.054.392l-.043.08c-.078.15-.02.334.129.413a.32.32 0 0 0 .143.036c.114 0 .218-.063.27-.165l.041-.075c.145-.277.417-.771-.12-1.171-.242-.192-.515-.34-.807-.438a.92.92 0 0 0-.694.116c-.073.05-.159.078-.247.082-.383-.038-.881-.443-.934-.443-.021-.093-.043-.157-.072-.25-.054-.237-.184-.449-.37-.604L23.347 5.2a.31.31 0 0 0-.127-.061 7.39 7.39 0 0 1 1.999-2.516l.013.027a.23.23 0 0 0 .209.134.22.22 0 0 0 .095-.02.23.23 0 0 0 .115-.304l-.055-.122a7.31 7.31 0 0 1 3.8-1.33zm4.653 10.123c-.041.045-.062.105-.058.166s.031.118.076.158l.465.409c.042.034.094.053.149.054a.23.23 0 0 0 .149-.406l-.455-.399a.23.23 0 0 0-.326.018zm-.716-1.06v.004a.23.23 0 0 0-.319-.063.23.23 0 0 0-.063.318 1.43 1.43 0 0 0 .149.179l.179.179.111.118c.043.046.103.072.166.072s.116-.023.159-.063c.091-.088.095-.233.009-.325l-.111-.116c-.063-.055-.12-.118-.179-.179-.037-.039-.071-.08-.102-.123zM32.275 8.68l.004.004c-.098.078-.115.22-.038.318a2.39 2.39 0 0 1 .286.479.23.23 0 0 0 .206.129c.035 0 .069-.008.1-.023.055-.026.098-.073.118-.13s.016-.121-.011-.175c-.092-.202-.207-.393-.344-.569-.038-.047-.094-.077-.154-.083s-.121.012-.168.051zm-6.187-4.479c.028.002.056-.001.082-.009a.23.23 0 0 0 .124-.126c.023-.057.022-.12-.002-.177l-.118-.268-.131-.313a.23.23 0 0 0-.304-.113.23.23 0 0 0-.113.304l.136.302.115.259a.23.23 0 0 0 .211.139zm.843 1.336a.23.23 0 0 0 .095-.148c.011-.06-.003-.122-.038-.172l-.251-.392-.063-.113a.23.23 0 0 0-.398-.015.23.23 0 0 0-.009.229l.068.125c.086.15.183.293.274.426a.23.23 0 0 0 .19.1.24.24 0 0 0 .131-.041zm1.23.969c.019-.059.013-.123-.016-.178a.23.23 0 0 0-.139-.112l-.227-.072c-.087-.024-.171-.062-.247-.111-.018-.015-.034-.032-.048-.05a.23.23 0 0 0-.322-.036.23.23 0 0 0-.036.322c.037.049.081.092.129.131a1.32 1.32 0 0 0 .396.179l.075.023.055.018.095.03c.051.018.107.018.157 0a.23.23 0 0 0 .129-.145zm1.349.551a.23.23 0 0 0-.129-.299l-.578-.229a.23.23 0 0 0-.311.248.23.23 0 0 0 .143.18l.576.229c.027.01.057.016.086.016a.23.23 0 0 0 .213-.145z"})]})})})}function DrawMenu(){const{dispatch,options,draw,isDrawMenuExpanded,query,shape,drawTools}=useApp(),{id}=options,isDetails=["expanded","collapse"].includes(draw?.collapse),{handleAddClick,handleEditClick,handleDeleteClick}=function useDrawHandlers(){const{provider,parent,draw,segments,layers,dispatch,query,drawTools,activeRef,viewportRef}=useApp(),{dispatch:viewportDispatch,size,style}=useViewport(),{styles,minZoom,maxZoom}=draw||{};return{handleAddClick:shapeId=>{if(!provider.map)return;const drawMode=drawTools.find((m=>m.id===shapeId))?.drawMode||"frame";provider.draw?.add(drawMode,shapeId),dispatch({type:"SET_MODE",payload:{value:drawMode,shape:shapeId,query}}),viewportDispatch({type:"SWAP_STYLES",payload:{styles,minZoom,maxZoom}}),eventbus.A.dispatch(parent,constants.AZ.APP_CHANGE,{type:"drawMode",drawMode,style,size,segments,layers}),activeRef.current=viewportRef.current,activeRef.current?.focus()},handleEditClick:shapeId=>{if(!provider.map)return;const drawMode=drawTools.find((m=>m.id===shapeId))?.drawMode||"frame";provider.draw?.edit(drawMode,shapeId),dispatch({type:"SET_MODE",payload:{value:drawMode,shape:shapeId,query}}),viewportDispatch({type:"SWAP_STYLES",payload:{styles,minZoom,maxZoom}}),eventbus.A.dispatch(parent,constants.AZ.APP_CHANGE,{type:"drawMode",drawMode,style,size,segments,layers}),activeRef.current=viewportRef.current,activeRef.current?.focus()},handleDeleteClick:()=>{provider.map&&(provider.draw.delete(),dispatch({type:"SET_MODE",payload:{value:"default",query:null}}),eventbus.A.dispatch(parent,constants.AZ.APP_ACTION,{type:"deletePolygon",query}),activeRef.current=viewportRef.current,activeRef.current?.focus())}}}();if(!draw?.heading)return null;return(0,jsxRuntime_module.Y)("div",{className:"fm-c-menu",children:(0,jsxRuntime_module.FD)("div",{className:"fm-c-menu__group "+(isDrawMenuExpanded?" fm-c-menu__group--expanded":""),children:[isDetails?(0,jsxRuntime_module.Y)("h3",{className:"fm-c-menu__heading",children:(0,jsxRuntime_module.FD)("button",{className:"fm-c-details","aria-expanded":isDrawMenuExpanded,"aria-controls":`content-${id}`,onClick:()=>{dispatch({type:"TOGGLE_DRAW_EXPANDED",payload:!isDrawMenuExpanded})},children:[(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__label",children:(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__label-focus",children:draw?.heading})}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__summary",children:(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__summary-focus",children:draw?.summary})}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__toggle",children:(0,jsxRuntime_module.FD)("span",{className:"fm-c-details__toggle-focus",children:[(0,jsxRuntime_module.Y)("span",{className:"fm-c-details__chevron"}),isDrawMenuExpanded?"Hide":"Show"]})})]})}):(0,jsxRuntime_module.Y)("h3",{className:"fm-c-menu__heading",children:draw?.heading}),(0,jsxRuntime_module.Y)("div",{className:"fm-c-menu__items",...isDrawMenuExpanded?{}:{style:{display:"none"}},children:[...drawTools,...constants.Yl].map((tool=>(0,jsxRuntime_module.Y)("div",{className:"fm-c-menu__item",children:(0,jsxRuntime_module.FD)("button",{className:"fm-c-btn-menu","aria-disabled":drawTools.includes(tool)?!!query:!query,onClick:()=>{drawTools.includes(tool)&&!query&&handleAddClick(tool.id),"edit"===tool.id&&query&&handleEditClick(shape),"delete"===tool.id&&query&&handleDeleteClick()},children:[(0,jsxRuntime_module.Y)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",fill:"currentColor",children:(0,jsxRuntime_module.Y)("path",{d:tool.path})}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-btn__label",children:drawTools.includes(tool)?`Add ${tool.id}`:`${tool.name} shape`})]})},tool.id)))})]})})}function Tooltip({id,position,text,cssModifier,display,visuallyHiddenText,children}){const{interfaceType}=useApp(),[isVisible,setIsVisible]=(0,compat_module.J0)(!1),[hasFocusWithin,setHasFocusWithin]=(0,compat_module.J0)(!1),timeoutRef=(0,compat_module.li)(null),labelRef=(0,compat_module.li)(null),hideTooltip=()=>{timeoutRef.current&&clearTimeout(timeoutRef.current),setIsVisible(!1)},showTooltip=()=>{timeoutRef.current=setTimeout((()=>setIsVisible(!0)),500)},handleGlobalKeyDown=e=>{const isActive=labelRef.current?.contains(document.activeElement);(["Escape","Esc"].includes(e.key)||isActive)&&hideTooltip()};return(0,compat_module.vJ)((()=>(document.addEventListener("keydown",handleGlobalKeyDown),()=>{document.removeEventListener("keydown",handleGlobalKeyDown)}))),(0,jsxRuntime_module.FD)("div",{className:`fm-c-tooltip fm-c-tooltip--${position}${cssModifier?" fm-c-tooltip--"+cssModifier:""}${isVisible?" fm-c-tooltip--visible":""}${hasFocusWithin?" fm-u-focus-within":""}`,style:{display},onMouseEnter:showTooltip,onMouseLeave:hideTooltip,onMouseDown:hideTooltip,onFocus:"keyboard"===interfaceType?showTooltip:null,onBlur:hideTooltip,onKeyDown:()=>{setHasFocusWithin(!1)},onKeyUp:()=>{setHasFocusWithin(!0)},ref:labelRef,children:[children,(0,jsxRuntime_module.Y)("div",{id,className:"fm-c-tooltip__label",role:"tooltip",children:(0,jsxRuntime_module.FD)("div",{className:"fm-c-tooltip__label-inner",children:[text,visuallyHiddenText&&(0,jsxRuntime_module.Y)("span",{className:"fm-u-visually-hidden",children:visuallyHiddenText})]})})]})}function ActionMenu({id,path,name,display,hasLabel=!0,items,menuPosition,tooltipPosition,handleSelect}){const label=name.toLowerCase().replace(" ","-"),[isExpanded,setIsExpanded]=(0,compat_module.J0)(!1),[index,setIndex]=(0,compat_module.J0)(0),elementRef=(0,compat_module.li)(null),buttonRef=(0,compat_module.li)(null),menuRef=(0,compat_module.li)(null),instigatorRef=(0,compat_module.li)(null),toolTipId=`${id}-${name.toLowerCase().replace(" ","-")}`,handleButtonClick=()=>{setIsExpanded(!isExpanded)},handleButtonKeyUp=e=>{["ArrowDown","ArrowUp"].includes(e.key)&&(e.preventDefault(),setIndex("ArrowDown"===e.key?0:items.length-1),setIsExpanded(!0))},button=()=>(0,jsxRuntime_module.FD)("button",{ref:buttonRef,id:`${id}-${label}-button-label`,onClick:handleButtonClick,onKeyUp:handleButtonKeyUp,className:"fm-c-btn fm-c-btn--action",...!hasLabel&&{"aria-labelledby":`${id}-${label}-tooltip`},"aria-haspopup":"true","aria-expanded":isExpanded,"aria-controls":`${id}-${label}-menu`,children:[(0,jsxRuntime_module.Y)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",fill:"currentColor",children:(0,jsxRuntime_module.Y)("path",{d:path})}),hasLabel&&(0,jsxRuntime_module.Y)("span",{id:`${id}-${label}-button-label`,children:name})]});return(0,compat_module.vJ)((()=>{isExpanded?menuRef.current.focus():instigatorRef.current?.focus()}),[isExpanded]),useOutsideInteract(elementRef,!1,"pointerdown",(()=>{setIsExpanded(!1)})),(0,jsxRuntime_module.FD)("div",{className:`fm-c-action-menu fm-c-action-menu--${menuPosition}`,style:{display},ref:elementRef,children:[hasLabel?button():(0,jsxRuntime_module.Y)(Tooltip,{id:toolTipId,position:tooltipPosition,text:name,children:button()}),(0,jsxRuntime_module.Y)("ul",{ref:menuRef,id:`${id}-${label}-menu`,className:"fm-c-action-menu__list",role:"menu",tabIndex:"-1","aria-labelledby":`${id}-${label}-button-label`,"aria-activedescendant":`${id}-${label}-item-${index}`,onKeyDown:e=>{if(["Escape","Esc"].includes(e.key)&&(e.preventDefault(),instigatorRef.current=buttonRef.current,setIsExpanded(!1)),"Tab"===e.key&&(instigatorRef.current=null,setIsExpanded(!1)),["ArrowDown","ArrowUp"].includes(e.key)){e.preventDefault();let i="ArrowDown"===e.key?index+1:index-1;i<0&&(i=items.length-1),i>=items.length&&(i=0),setIndex(i)}"Home"===e.key&&setIndex(0),"End"===e.key&&setIndex(items.length-1),"Enter"===e.key&&(e.preventDefault(),instigatorRef.current=buttonRef.current,setIsExpanded(!1),handleSelect(items[index].id))},style:{display:isExpanded?"block":"none"},children:items.map(((item,i)=>(0,jsxRuntime_module.FD)("li",{id:`${id}-${label}-item-${i}`,className:"fm-c-action-menu__item"+(index===i?" fm-c-action-menu__item--selected":""),role:"menuitem",onClick:e=>((_,i)=>{instigatorRef.current=buttonRef.current,setIsExpanded(!1),handleSelect(items[i].id)})(0,i),children:[item.path&&(0,jsxRuntime_module.Y)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",fill:"currentColor",children:(0,jsxRuntime_module.Y)("path",{d:item.path})}),item.name]},item.name)))})]})}function DrawShape(){const{options,draw,shape,drawTools}=useApp(),{id}=options,selectedDrawMode=drawTools.find((m=>m.id===shape))||drawTools[0];if(!draw||draw?.heading)return null;return(0,jsxRuntime_module.Y)(ActionMenu,{id,path:"M11.298 4.666l3.536 3.536-7.071 7.071-3.536-3.536 7.071-7.071zm2.475-2.475a1.5 1.5 0 0 1 2.121 0l1.415 1.415a1.5 1.5 0 0 1 0 2.121l-1.768 1.768-3.536-3.536 1.768-1.768zM3.52 12.444l3.536 3.536-5.304 1.768 1.768-5.304z",name:"Draw tools",tooltipPosition:"left",menuPosition:"above-right",hasLabel:!1,display:"block",items:[...drawTools,...constants.Yl],selected:selectedDrawMode,handleSelect:id=>{console.log(id)}})}const style_image_namespaceObject=JSON.parse('{"$":"data:image/jpg;base64,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"}');function Styles(){const{options,provider}=useApp(),{id,hasAutoMode}=options,{size,style,styles}=useViewport(),appDispatch=useApp().dispatch,viewportDispatch=useViewport().dispatch,currentStyleName=style.name,currentSize=size,buttonsRef=(0,compat_module.li)([]),[isExpanded,setIsExpanded]=(0,compat_module.J0)(styles.map((s=>s.name)).indexOf(currentStyleName)>2||"small"!==size);buttonsRef.current=styles.map((s=>s.name)).map(((_,i)=>buttonsRef.current[i]??(0,compat_module._3)()));const moreLabel=(isExpanded?"Fewer":"More")+" styles",handleStyleClick=e=>{viewportDispatch({type:"SET_STYLE",payload:{style:e.currentTarget.value}})},handleSizeClick=e=>{viewportDispatch({type:"SET_SIZE",payload:e.currentTarget.value})};return(0,compat_module.vJ)((()=>{if(!isExpanded)return;const index=buttonsRef.current.length<3?buttonsRef.current.length-1:2,el=buttonsRef.current[index].current;(0,dom.Pt)(el,"next").focus()}),[isExpanded]),(0,compat_module.vJ)((()=>{const colourScheme=hasAutoMode&&window?.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";appDispatch({type:"SET_IS_DARK_MODE",payload:{style,colourScheme}})}),[style]),(0,jsxRuntime_module.FD)("div",{id:"map-styles",className:"fm-c-layers fm-c-layers--style",children:[(0,jsxRuntime_module.Y)("div",{className:"fm-c-layers__group",role:"group","aria-labelledby":`${id}-map-panel-label`,children:(0,jsxRuntime_module.Y)("div",{className:"fm-c-layers__columns",children:styles?.filter(((_,i)=>isExpanded?i>=0:i<3)).map(((item,i)=>(0,jsxRuntime_module.Y)("div",{className:"fm-c-layers__item",children:(0,jsxRuntime_module.FD)("button",{className:"fm-c-layers__button",value:item.name,"aria-pressed":currentStyleName===item.name,ref:buttonsRef.current[i],onClick:handleStyleClick,children:[(0,jsxRuntime_module.Y)("div",{className:"fm-c-layers__image",children:(0,jsxRuntime_module.Y)("img",{src:style_image_namespaceObject.$,draggable:!1,width:"120px",height:"120px",alt:"",style:{objectPosition:(0,utils.UM)(item.name)}})}),{default:"Default",dark:"Dark",aerial:"Aerial",deuteranopia:"Deuteranopia",tritanopia:"Tritanopia"}[item.name]]})},item.name)))})}),provider.capabilities.hasSize&&isExpanded&&(0,jsxRuntime_module.FD)("div",{className:"fm-c-layers__group",role:"group","aria-labelledby":`${id}-text-sizes`,children:[(0,jsxRuntime_module.Y)("div",{id:`${id}-text-sizes`,className:"fm-c-layers__header",children:(0,jsxRuntime_module.Y)("h3",{className:"fm-c-layers__heading",children:"Text size"})}),(0,jsxRuntime_module.Y)("div",{className:"fm-c-layers__columns",children:["small","medium","large"].map(((name,i)=>(0,jsxRuntime_module.Y)("div",{className:"fm-c-layers__item",children:(0,jsxRuntime_module.FD)("button",{className:"fm-c-layers__button",value:name,"aria-pressed":currentSize===name,onClick:handleSizeClick,children:[(0,jsxRuntime_module.Y)("div",{className:"fm-c-layers__image",children:(0,jsxRuntime_module.FD)("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fillRule:"evenodd",children:[(0,jsxRuntime_module.Y)("rect",{width:"100%",height:"100%",fill:"#f3f2f1"}),(0,jsxRuntime_module.Y)("g",{style:{transform:`scale(${1+i/2})`,transformOrigin:`8px ${50+i}px`},children:(0,jsxRuntime_module.Y)("path",{d:"M8 51.785L12.948 38.9h1.837l5.274 12.885h-1.943l-1.503-3.903h-5.387l-1.415 3.903H8zm3.718-5.291h4.368l-1.345-3.569-.914-2.671c-.164.826-.395 1.646-.694 2.46l-1.415 3.78zm15.592 4.139c-3.698 3.143-7.836.271-6.315-2.562.963-1.794 5.529-1.982 6.183-2.21.022-.825.052-2.27-2.241-2.312-1.751-.031-2.242 1.025-2.435 1.776l-1.547-.211c.234-1.102.963-2.856 4.21-2.874 4.037-.022 3.612 2.962 3.612 3.524v2.11c0 .315 0 3.012.501 3.911h-1.652c-.164-.328-.27-.712-.316-1.152zm-.132-3.533c-.907.37-3.444.694-3.964.914-1.293.548-.911 2.399.225 2.637.639.134 3.739.476 3.739-2.971v-.58z"})})]})}),name[0].toUpperCase()+name.slice(1)]})},name)))})]}),(styles.length>3||provider.capabilities.hasSize)&&(0,jsxRuntime_module.Y)("div",{className:"fm-c-layers__more fm-c-layers__more--center",children:(0,jsxRuntime_module.Y)(More,{id:`${id}-styles`,label:moreLabel,isExpanded,setIsExpanded:()=>setIsExpanded(!isExpanded),isRemove:!0})})]})}function Keyboard(){return(0,jsxRuntime_module.FD)("dl",{className:"fm-c-keyboard-list",children:[(0,jsxRuntime_module.FD)("div",{className:"fm-u-visually-hidden",children:[(0,jsxRuntime_module.Y)("dt",{children:"Get location information"}),(0,jsxRuntime_module.FD)("dd",{children:[(0,jsxRuntime_module.Y)("kbd",{children:"Alt"})," + ",(0,jsxRuntime_module.Y)("kbd",{children:"I"})]})]}),(0,jsxRuntime_module.FD)("div",{className:"fm-c-keyboard-list__item",children:[(0,jsxRuntime_module.Y)("dt",{children:"Select a map control"}),(0,jsxRuntime_module.FD)("dd",{children:[(0,jsxRuntime_module.Y)("kbd",{children:"Tab"})," or ",(0,jsxRuntime_module.Y)("kbd",{children:"Shift"})," + ",(0,jsxRuntime_module.Y)("kbd",{children:"Tab"})]})]}),(0,jsxRuntime_module.FD)("div",{className:"fm-c-keyboard-list__item",children:[(0,jsxRuntime_module.Y)("dt",{children:"Move in large steps"}),(0,jsxRuntime_module.FD)("dd",{children:[(0,jsxRuntime_module.Y)("kbd",{children:""}),", ",(0,jsxRuntime_module.Y)("kbd",{children:""}),", ",(0,jsxRuntime_module.Y)("kbd",{children:""})," or ",(0,jsxRuntime_module.Y)("kbd",{children:""})]})]}),(0,jsxRuntime_module.FD)("div",{className:"fm-c-keyboard-list__item",children:[(0,jsxRuntime_module.Y)("dt",{children:"Move in small steps"}),(0,jsxRuntime_module.FD)("dd",{children:[(0,jsxRuntime_module.Y)("kbd",{children:"Shift"})," + ",(0,jsxRuntime_module.Y)("kbd",{children:""}),", ",(0,jsxRuntime_module.Y)("kbd",{children:""}),", ",(0,jsxRuntime_module.Y)("kbd",{children:""})," or ",(0,jsxRuntime_module.Y)("kbd",{children:""})]})]}),(0,jsxRuntime_module.FD)("div",{className:"fm-c-keyboard-list__item",children:[(0,jsxRuntime_module.Y)("dt",{children:"Adjust zoom level"}),(0,jsxRuntime_module.FD)("dd",{children:[(0,jsxRuntime_module.Y)("kbd",{children:"+"})," or ",(0,jsxRuntime_module.Y)("kbd",{children:"="})," and ",(0,jsxRuntime_module.Y)("kbd",{children:"-"})," or ",(0,jsxRuntime_module.Y)("kbd",{children:"_"})]})]}),(0,jsxRuntime_module.FD)("div",{className:"fm-c-keyboard-list__item",children:[(0,jsxRuntime_module.Y)("dt",{children:"Select a feature"}),(0,jsxRuntime_module.FD)("dd",{children:[(0,jsxRuntime_module.Y)("kbd",{children:"Page Up"})," and ",(0,jsxRuntime_module.Y)("kbd",{children:"Page Down"})]})]}),(0,jsxRuntime_module.FD)("div",{className:"fm-c-keyboard-list__item",children:[(0,jsxRuntime_module.Y)("dt",{children:"Get feature information"}),(0,jsxRuntime_module.Y)("dd",{children:(0,jsxRuntime_module.Y)("kbd",{children:"Enter"})})]})]})}function LegendButton({legendBtnRef}){const{dispatch,drawMode,legend,draw,isDesktop,activePanel}=useApp(),isQueryMode=["frame","vertex"].includes(drawMode),isCombined=["compact","inset"].includes(legend?.display),combinedLabel=isCombined&&constants.WD.legend.TITLE,seperateLabel=draw?.heading?constants.WD.menu.TITLE:constants.WD.layers.TITLE,label=combinedLabel||seperateLabel,path=(constants.WD[label.toLowerCase()]||constants.WD.legend).PATH;if(!(legend&&!isQueryMode&&!(isDesktop&&!isCombined)))return null;return(0,jsxRuntime_module.FD)("button",{onClick:()=>{dispatch({type:"OPEN",payload:"LEGEND"})},className:"fm-c-btn fm-c-btn--legend",ref:legendBtnRef,"aria-expanded":!1,...["LEGEND","SEARCH"].includes(activePanel)?{style:{display:"none"}}:{},children:[(0,jsxRuntime_module.Y)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",fill:"currentColor",children:(0,jsxRuntime_module.Y)("path",{d:path})}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-btn__label",children:label})]})}function KeyButton({keyBtnRef}){const{dispatch,activePanel,options,drawMode}=useApp(),isQueryMode=["frame","vertex"].includes(drawMode),isCombined=["compact","inset"].includes(options?.legend?.display),label=constants.WD.legend.TITLE,path=constants.WD.legend.PATH;if(!options?.legend||isQueryMode||isCombined)return null;return(0,jsxRuntime_module.FD)("button",{onClick:()=>{dispatch({type:"OPEN",payload:"KEY"})},className:"fm-c-btn fm-c-btn--key",ref:keyBtnRef,"aria-expanded":!1,...["KEY","SEARCH"].includes(activePanel)?{style:{display:"none"}}:{},children:[(0,jsxRuntime_module.Y)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",fill:"currentColor",children:(0,jsxRuntime_module.Y)("path",{d:path})}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-btn__label",children:label})]})}function SearchButton({searchBtnRef,tooltip}){const{dispatch,drawMode,search,activePanel,options}=useApp(),isQueryMode=["frame","vertex"].includes(drawMode);if(!search||isQueryMode)return null;const handleClick=()=>{dispatch({type:"OPEN",payload:"SEARCH"})},button=()=>(0,jsxRuntime_module.FD)("button",{onClick:handleClick,className:"fm-c-btn fm-c-btn--search",...tooltip?{"aria-labelledby":`${options.id}-search-label`}:{},"aria-expanded":"SEARCH"===activePanel,..."SEARCH"===activePanel?{style:{display:"none"}}:{},ref:searchBtnRef,children:[(0,jsxRuntime_module.Y)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",fill:"currentColor",children:(0,jsxRuntime_module.Y)("path",{d:"M12.084 14.312c-1.117.711-2.444 1.123-3.866 1.123C4.235 15.435 1 12.201 1 8.218S4.235 1 8.218 1s7.217 3.235 7.217 7.218c0 1.422-.412 2.749-1.123 3.866L19 16.773 16.773 19l-4.689-4.688zM8.218 2.818c2.98 0 5.4 2.419 5.4 5.4s-2.42 5.4-5.4 5.4-5.4-2.42-5.4-5.4 2.419-5.4 5.4-5.4z"})}),!tooltip&&(0,jsxRuntime_module.Y)("span",{className:"fm-c-btn__label",children:"Search"})]});return(0,jsxRuntime_module.Y)(jsxRuntime_module.FK,{children:tooltip?(0,jsxRuntime_module.Y)(Tooltip,{id:`${options.id}-search-label`,position:tooltip,cssModifier:"search",text:"Show search",children:button()}):button()})}function StylesButton({stylesBtnRef}){const{dispatch,options}=useApp(),{id,styles}=options;if(!styles?.length)return null;return(0,jsxRuntime_module.Y)(jsxRuntime_module.FK,{children:styles?.length>1?(0,jsxRuntime_module.Y)(Tooltip,{id:`${id}-style-label`,position:"left",cssModifier:"style",text:"Choose map style",children:(0,jsxRuntime_module.Y)("button",{onClick:()=>{dispatch({type:"OPEN",payload:"STYLE"})},className:"fm-c-btn fm-c-btn--style","aria-labelledby":`${id}-style-label`,ref:stylesBtnRef,children:(0,jsxRuntime_module.FD)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",strokeLinejoin:"round",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,jsxRuntime_module.Y)("path",{d:"M2 18l5-2 6 2 5-2V2l-5 2-6-2-5 2v14z"}),(0,jsxRuntime_module.Y)("path",{d:"M7 2v14m6-12v14",strokeLinecap:"round"})]})})}):null})}function Zoom(){const{options,isMobile}=useApp(),{id}=options,{isMaxZoom,isMinZoom}=useViewport(),viewportDispatch=useViewport().dispatch;return isMobile?null:(0,jsxRuntime_module.FD)("div",{className:"fm-c-zoom",children:[(0,jsxRuntime_module.Y)(Tooltip,{id:`${id}-zoom-in-label`,position:"left",text:"Zoom in",children:(0,jsxRuntime_module.Y)("button",{onClick:()=>{viewportDispatch({type:"ZOOM_IN"})},className:"fm-c-btn fm-c-btn--zoom-in","aria-disabled":isMaxZoom,"aria-labelledby":`${id}-zoom-in-label`,"aria-controls":`${id}-viewport`,children:(0,jsxRuntime_module.FD)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",style:{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},children:[(0,jsxRuntime_module.Y)("rect",{x:"3",y:"9",width:"14",height:"2"}),(0,jsxRuntime_module.Y)("rect",{x:"9",y:"3",width:"2",height:"14"})]})})}),(0,jsxRuntime_module.Y)(Tooltip,{id:`${id}-zoom-out-label`,position:"left",text:"Zoom out",children:(0,jsxRuntime_module.Y)("button",{onClick:()=>{viewportDispatch({type:"ZOOM_OUT"})},className:"fm-c-btn fm-c-btn--zoom-out","aria-disabled":isMinZoom,"aria-labelledby":`${id}-zoom-out-label`,"aria-controls":`${id}-viewport`,"data-fm-zoom-out-btn":!0,children:(0,jsxRuntime_module.Y)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",style:{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"},children:(0,jsxRuntime_module.Y)("rect",{x:"3",y:"9",width:"14",height:"2"})})})})]})}function Reset(){const{options}=useApp(),{bounds,oCentre,rZoom,center,zoom}=useViewport(),viewportDispatch=useViewport().dispatch,[isNewArea,setIsNewArea]=(0,compat_module.J0)(!1);return(0,compat_module.vJ)((()=>{const isSameCentre=JSON.stringify(oCentre)===JSON.stringify(center);setIsNewArea(oCentre&&center&&rZoom&&zoom&&!(isSameCentre&&rZoom===zoom))}),[bounds]),options?.hasReset?(0,jsxRuntime_module.Y)("button",{onClick:()=>{isNewArea&&viewportDispatch({type:"RESET"})},className:"fm-c-btn fm-c-btn--reset","aria-label":"Reset map area","aria-disabled":!isNewArea,"aria-controls":`${options.id}-viewport`,children:(0,jsxRuntime_module.FD)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",children:[(0,jsxRuntime_module.Y)("path",{d:"M2.054 7.871L5.25 1.407l4 6.928-7.196-.464z"}),(0,jsxRuntime_module.Y)("path",{d:"M7.25 4.871A6.46 6.46 0 0 1 10.5 4c3.587 0 6.5 2.913 6.5 6.5S14.087 17 10.5 17 4 14.087 4 10.5",fill:"none",stroke:"currentColor",strokeWidth:"2"})]})}):null}const{sessionStorage}=window;function Location(){const{provider,options,drawMode}=useApp(),{id}=options,appDispatch=useApp().dispatch,viewportDispatch=useViewport().dispatch,isQueryMode=["frame","vertex"].includes(drawMode);if(!options.hasGeoLocation||isQueryMode)return null;const handleGeoLocationSuccess=(coord,place)=>{const hasSession=!!sessionStorage.getItem("geoloc");sessionStorage.setItem("geoloc",JSON.stringify({coord,place})),hasSession||viewportDispatch({type:"GEOLOC",payload:{center:coord,place}})},handleGeoLocationError=err=>{viewportDispatch({type:"CLEAR_STATUS"}),appDispatch({type:"ERROR",payload:{label:"Can't get location",message:err.message}})};return(0,jsxRuntime_module.Y)(Tooltip,{id:`${id}-location-label`,cssModifier:"location",position:"left",text:"Use your location",children:(0,jsxRuntime_module.Y)("button",{onClick:()=>{const geoloc=JSON.parse(sessionStorage.getItem("geoloc"));geoloc?viewportDispatch({type:"GEOLOC",payload:{center:geoloc.coord,place:geoloc.place}}):(provider.getGeoLocation(handleGeoLocationSuccess,handleGeoLocationError),viewportDispatch({type:"UPDATE_STATUS",payload:{status:"Getting location",isStatusVisuallyHidden:!1}}))},className:"fm-c-btn fm-c-btn--location","aria-labelledby":`${id}-location-label`,"aria-controls":`${id}-viewport`,children:(0,jsxRuntime_module.FD)("svg",{"aria-hidden":"true",focusable:"false",width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",children:[(0,jsxRuntime_module.FD)("g",{fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,jsxRuntime_module.Y)("circle",{cx:"10",cy:"10",r:"6"}),(0,jsxRuntime_module.Y)("path",{d:"M10 4V1m0 18v-3m6-6h3M1 10h3",strokeLinecap:"butt"})]}),(0,jsxRuntime_module.Y)("circle",{cx:"10",cy:"10",r:"3",fill:"currentColor"})]})})})}function MapError(){const{message}=useApp().error;return(0,jsxRuntime_module.Y)("p",{children:message})}function ViewportLabel(){const{options}=useApp(),{id}=options;return(0,jsxRuntime_module.FD)("div",{id:`${id}-viewport-label`,className:"fm-c-panel fm-c-panel--viewport-label",children:[(0,jsxRuntime_module.Y)("span",{className:"fm-u-visually-hidden",children:"Interactive map. "}),(0,jsxRuntime_module.Y)("kbd",{children:"Alt"})," + ",(0,jsxRuntime_module.Y)("kbd",{children:"K"})," ",(0,jsxRuntime_module.Y)("span",{className:"fm-u-visually-hidden",children:"Show"})," keyboard controls",(0,jsxRuntime_module.Y)("span",{className:"fm-u-visually-hidden",children:"."})]})}const getIsPixelVisible=(interfaceType,isTargetVisible,activePanel)=>"touch"===interfaceType&&isTargetVisible&&!activePanel,getIsPolygonVisible=(isDefaultMode,query,activePanel,isMobile)=>isDefaultMode&&query&&"INFO"!==activePanel&&!(isMobile&&"KEY"===activePanel);function Actions(){const{provider,style,parent,draw,drawTool,drawTools,drawMode,shape,segments,layers,dispatch:appDispatch,viewportRef,query,activePanel,isMobile,interfaceType,isTargetVisible}=useApp(),{dispatch:viewportDispatch,size}=useViewport(),isDefaultMode="default"===drawMode,isPixelVisible=getIsPixelVisible(interfaceType,isTargetVisible,activePanel),isPolygonVisible=getIsPolygonVisible(isDefaultMode,query,activePanel,isMobile),hasActions=!isDefaultMode||isPixelVisible||isPolygonVisible;return(0,jsxRuntime_module.FD)("div",{className:"fm-o-actions"+(hasActions?" fm-o-actions--has-actions":""),children:[(0,jsxRuntime_module.FD)("button",{onClick:()=>{if(!provider.map||drawTool)return;const feature=provider.draw.finish(shape),newShape=(0,viewport.mG)(feature);appDispatch({type:"SET_MODE",payload:{value:"default",query:feature,shape:newShape}}),viewportDispatch({type:"SWAP_STYLES"}),eventbus.A.dispatch(parent,constants.AZ.APP_ACTION,{type:query?"updatePolygon":"confirmPolygon",query:feature}),eventbus.A.dispatch(parent,constants.AZ.APP_CHANGE,{type:"drawMode",drawMode:"default",style,size,segments,layers}),viewportRef.current.focus()},className:"fm-c-btn-primary",...isDefaultMode&&{style:{display:"none"}},children:[""+(query?"Update":"Confirm")," area"]}),(0,jsxRuntime_module.Y)("button",{onClick:()=>{if(drawTool)return;provider.draw.cancel();const shape=(0,viewport.mG)(query)||drawTools[0].id;eventbus.A.dispatch(parent,constants.AZ.APP_ACTION,{type:"cancelUpdatePolygon",query}),appDispatch({type:"SET_MODE",payload:{value:"default",shape,query}}),viewportDispatch({type:"SWAP_STYLES"}),eventbus.A.dispatch(parent,constants.AZ.APP_CHANGE,{type:"drawMode",drawMode:"default",style,size,segments,layers}),viewportRef.current.focus()},className:"fm-c-btn-secondary",...isDefaultMode&&{style:{display:"none"}},children:"Cancel"}),(0,jsxRuntime_module.Y)("button",{onClick:()=>{eventbus.A.dispatch(parent,constants.AZ.APP_QUERY,{resultType:"polygon",query,style,size,segments,layers})},className:"fm-c-btn-primary",...!isPolygonVisible&&{style:{display:"none"}},children:draw?.queryLabel}),(0,jsxRuntime_module.Y)("button",{onClick:()=>{const event=new window.KeyboardEvent("keydown",{key:"Enter",bubbles:!0});viewportRef.current.dispatchEvent(event)},className:"fm-c-btn-primary",...!isPixelVisible&&{style:{display:"none"}},children:"Get info"})]})}function EditButton({editBtnRef}){const{options,dispatch,drawMode,activePanel,previousPanel}=useApp(),{id}=options,isVisible=!("EDIT"===activePanel||"STYLE"===activePanel&&"EDIT"===previousPanel);if(!["frame","vertex"].includes(drawMode))return null;return(0,jsxRuntime_module.Y)(Tooltip,{id:`${id}-edit-label`,position:"right",cssModifier:"edit",text:"Edit dimensions",display:isVisible?"block":"none",children:(0,jsxRuntime_module.Y)("button",{onClick:()=>{dispatch({type:"OPEN",payload:"EDIT"})},className:"fm-c-btn fm-c-btn--edit govuk-body-s",ref:editBtnRef,"aria-expanded":!1,"aria-labelledby":`${id}-edit-label`,...isVisible?{}:{style:{display:"none"}},children:(0,jsxRuntime_module.Y)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",children:(0,jsxRuntime_module.Y)("path",{d:"M5.914 14.5l.828-.829 1.415 1.415-3.243 3.242-3.243-3.242 1.415-1.415.707.707.121.122V3.914H14.5l-.829-.828 1.415-1.415 3.242 3.243-3.242 3.243-1.415-1.415.707-.707.122-.121H5.914V14.5zm7 1.405v2.018h-2v-2.018h2zm-3 0v2.018h-2v-2.018h2zm8-1.991v4.009h-4v-2.018h2v-1.991h2zm0-2.958v2.018h-2v-2.018h2zm0-3.042v2.018h-2V7.914h2z",fill:"currentColor",stroke:"none"})})})})}function HelpButton(){const{options,drawMode}=useApp(),{id,draw}=options;return["frame","vertex"].includes(drawMode)&&draw?.helpURL?(0,jsxRuntime_module.Y)(Tooltip,{id:`${id}-help-label`,position:"left",cssModifier:"help",text:"Help",visuallyHiddenText:"(opens in a new window)",children:(0,jsxRuntime_module.Y)("a",{href:draw.helpURL,target:"_blank",className:"fm-c-btn fm-c-btn--help","aria-labelledby":`${id}-help-label`,rel:"noreferrer",children:(0,jsxRuntime_module.FD)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fillRule:"evenodd",children:[(0,jsxRuntime_module.Y)("circle",{cx:"10",cy:"10",r:"8.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),(0,jsxRuntime_module.Y)("path",{d:"M10.935 11.673H8.708v-.223c0-1.997 2.445-2.651 2.085-3.597-.175-.46-1.57-.837-1.757.843l-2.273-.281c.407-4.359 7.331-3.069 6.405.161-.025.09-.143.502-.625.986-1.252 1.258-1.608 1.111-1.608 2.111zm-2.303.592h2.385v2.104H8.632z",fill:"currentColor",stroke:"none"})]})})}):null}function Attribution(){const{isMobile}=useApp(),{attributions}=useViewport();return(0,jsxRuntime_module.Y)("div",{className:"fm-o-attribution",children:!isMobile&&!!attributions.length&&(0,jsxRuntime_module.Y)("div",{className:"fm-c-attribution",children:attributions.map(((a,i)=>{const trimmed=a?.trim(),inner=/^<p[\s>]/i.test(trimmed)&&/<\/p>$/i.test(trimmed)?trimmed.replace(/^<p[\s>]*>/i,"").replace(/<\/p>$/i,""):trimmed;return(0,jsxRuntime_module.Y)("span",{dangerouslySetInnerHTML:{__html:inner}},i)}))})})}function Banner(){const{banner,activePanel,isMobile}=useApp();return(0,jsxRuntime_module.FD)("div",{className:"fm-c-banner",children:[banner&&(0,jsxRuntime_module.FD)("div",{className:"fm-c-banner__inner",..."SEARCH"===activePanel&&isMobile?{style:{display:"none"}}:{},children:[(0,jsxRuntime_module.Y)("span",{className:"fm-c-banner__icon","aria-hidden":"true",children:"!"}),(0,jsxRuntime_module.Y)("span",{className:"fm-c-banner__content",dangerouslySetInnerHTML:{__html:banner}})]}),(0,jsxRuntime_module.Y)("div",{role:"status",className:"fm-u-visually-hidden",dangerouslySetInnerHTML:{__html:`Warning: ${banner}`}})]})}function ScaleBar(){const{resolution,style,zoom}=useViewport(),elRef=(0,compat_module.li)(null),[scale,setScale]=(0,compat_module.J0)({width:0,label:""}),isVisible=scale.width>=0,units={metric:[{threshold:1,symbol:"m",unit:"metre",plural:"metres",factor:1},{threshold:1e3,symbol:"km",unit:"kilometre",plural:"kilometres",factor:.001}],imperial:[{threshold:1609.344,symbol:"mi",unit:"mile",plural:"miles",factor:1/1609.344},{threshold:.9144,symbol:"yd",unit:"yard",plural:"yards",factor:1/.9144},{threshold:.3048,symbol:"ft",unit:"foot",plural:"feet",factor:1/.3048}]},getRounded=num=>{const pow10=Math.pow(10,Math.floor(Math.log10(num))),d=num/pow10;let rounded;return rounded=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,rounded*pow10};return(0,compat_module.vJ)((()=>{if(resolution){const best=((metersPerPx,maxWidthPx,unitSystem)=>{const maxMeters=metersPerPx*maxWidthPx,options=units[unitSystem];for(const{symbol,unit,plural,factor}of options){const rounded=getRounded(maxMeters*factor);if(rounded>=1&&rounded<1e3){const width=rounded/factor/metersPerPx;if(width<=maxWidthPx)return{label:rounded,symbol,width,unit:rounded>1?plural:unit}}}const fallback=options[options.length-1],fallbackScaled=maxMeters*fallback.factor,fallbackRounded=getRounded(fallbackScaled),fallbackUnit=fallbackRounded>1?fallback.plural:fallback.unit;return{label:fallbackRounded,symbol:fallback.symbol,width:fallbackRounded/fallback.factor/metersPerPx,unit:fallbackUnit}})(resolution/1,120,"imperial");setScale(best)}}),[resolution]),(0,jsxRuntime_module.Y)(jsxRuntime_module.FK,{children:isVisible&&(0,jsxRuntime_module.Y)("div",{className:`fm-c-scale${zoom?"":" fm-u-hidden"} fm-c-scale--${style.name}`,ref:elRef,style:{width:`${scale.width}px`},children:(0,jsxRuntime_module.FD)("span",{className:"fm-c-scale__label",children:[(0,jsxRuntime_module.Y)("span",{className:"fm-u-visually-hidden",children:"Scale bar: "}),scale.label,(0,jsxRuntime_module.FD)("span",{"aria-hidden":!0,children:[" ",scale.symbol]}),(0,jsxRuntime_module.Y)("span",{className:"fm-u-visually-hidden",children:scale.unit})]})})})}function Inspector(){const{provider,shape}=useApp();return(0,jsxRuntime_module.FD)("div",{className:"fm-c-form",children:["polygon"!==shape&&(0,jsxRuntime_module.FD)("div",{className:"fm-c-form-row",children:[(0,jsxRuntime_module.FD)("div",{className:"fm-c-form-group",children:[(0,jsxRuntime_module.FD)("label",{className:"fm-c-form-group__label",htmlFor:"coord",children:["circle"===shape?"Centre":"Top left"," (",27700===provider.srid?"Easting, Northing":"Lat, lon",")"]}),(0,jsxRuntime_module.Y)("div",{className:"fm-c-form-group__wrapper",children:(0,jsxRuntime_module.Y)("input",{className:"fm-c-form-group__input",id:"coord",name:"coord",type:"text",spellCheck:"false"})})]}),(0,jsxRuntime_module.FD)("div",{className:"fm-c-form-group fm-c-form-group--short",children:[(0,jsxRuntime_module.FD)("label",{className:"fm-c-form-group__label",htmlFor:"distance",children:["circle"===shape?"Radius":"Size"," (metres)"]}),(0,jsxRuntime_module.Y)("div",{className:"fm-c-form-group__wrapper",children:(0,jsxRuntime_module.Y)("input",{className:"fm-c-form-group__input",id:"distance",name:"distance",type:"text",spellCheck:"false"})})]})]}),(0,jsxRuntime_module.Y)("div",{className:"fm-c-form-row",children:(0,jsxRuntime_module.FD)("div",{className:"fm-c-form-group",children:[(0,jsxRuntime_module.Y)("span",{className:"fm-c-form-group__label",htmlFor:"top-left",children:"Area"}),(0,jsxRuntime_module.Y)("div",{className:"fm-c-form-group__wrapper",children:(0,jsxRuntime_module.Y)("div",{className:"fm-c-form-group__read-only",children:"16ha"})})]})})]})}const container_getClassNames=(isDarkMode,device,behaviour,isQueryMode)=>`fm-o-container${isDarkMode?" fm-o-container--dark":""} fm-${device} ${behaviour}${isQueryMode?" fm-draw":""}`;function Container(){const{dispatch,provider,options,parent,info,search,drawMode,activePanel,previousPanel,isPage,isMobile,isDesktop,isDarkMode,isKeyExpanded,activeRef,viewportRef,hash,error}=useApp(),legend=options.legend,legendBtnRef=(0,compat_module.li)(null),keyBtnRef=(0,compat_module.li)(null),searchBtnRef=(0,compat_module.li)(null),stylesBtnRef=(0,compat_module.li)(null),editBtnRef=(0,compat_module.li)(null),device=(isMobile?"mobile":isDesktop&&"desktop")||"tablet",behaviour=constants.W0.container[options.behaviour||constants.NT.CONTAINER_TYPE].CLASS,height=isPage||options.container?"100%":options.height||constants.W0.container[options.behaviour]?.HEIGHT,isCombined=["compact","inset"].includes(legend.display),isFixed=legend&&isDesktop&&!isCombined,isLegendInset="inset"===legend?.display,isLegendModal=!isFixed&&(!isLegendInset||isLegendInset&&isKeyExpanded),hasLengedHeading=!("inset"===legend?.display&&"timeline"===legend.segments?.[0]?.display),isQueryMode=["frame","vertex"].includes(drawMode),hasButtons=!(isMobile&&("SEARCH"===activePanel||isDesktop&&search?.isExpanded)),srid=provider?.srid,hasSizeCapability=provider?.capabilities?.hasSize,hasInspector="EDIT"===activePanel||"STYLE"===activePanel&&"EDIT"===previousPanel,combindedTitle=isCombined&&(legend?.title?`<span class="fm-u-visually-hidden">${constants.WD.legend.TITLE}:</span> ${legend?.title}`:constants.WD.legend.TITLE),seperateTitle=options.draw?.heading?constants.WD.menu.TITLE:constants.WD.layers.TITLE,legendTitle=combindedTitle||seperateTitle,handleColorSchemeMQ=()=>dispatch({type:"SET_IS_DARK_MODE",payload:{colourScheme:window?.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}});return(0,compat_module.vJ)((()=>(eventbus.A.on(parent,constants.AZ.SET_INFO,(data=>{dispatch({type:"SET_INFO",payload:data})})),eventbus.A.on(parent,constants.AZ.SET_SELECTED,(data=>{dispatch({type:"SET_SELECTED",payload:{featureId:data}})})),eventbus.A.on(parent,constants.AZ.SET_BANNER,(data=>{dispatch({type:"SET_BANNER",payload:data})})),options.hasAutoMode&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",handleColorSchemeMQ),activePanel||dispatch({type:"CONTAINER_READY"}),()=>{window.removeEventListener("change",handleColorSchemeMQ)})),[]),(0,compat_module.vJ)((()=>{(0,dom.ar)(),(0,dom.hL)(activeRef.current),activeRef.current?.focus({preventScroll:!0})}),[isPage,activePanel,hash]),(0,jsxRuntime_module.Y)(ViewportProvider,{options:{...options,srid,hasSizeCapability},children:(0,jsxRuntime_module.FD)("div",{className:container_getClassNames(isDarkMode,device,behaviour,isQueryMode),style:{height},...isPage?{"data-fm-page":options.pageTitle||"Map view"}:{},"data-fm-container":"",children:[(0,jsxRuntime_module.FD)("div",{className:"fm-o-side",children:[isFixed&&(0,jsxRuntime_module.Y)(Exit,{}),isDesktop&&isQueryMode&&(hasInspector||isFixed)&&(0,jsxRuntime_module.Y)(Panel,{className:"edit",label:"Dimensions",...isFixed?{}:{instigatorRef:editBtnRef},width:legend?.width,children:(0,jsxRuntime_module.Y)(Inspector,{})}),isFixed&&!isQueryMode&&(0,jsxRuntime_module.FD)(Panel,{className:"legend",label:legendTitle,width:legend?.width,isHideHeading:!hasLengedHeading,children:[(0,jsxRuntime_module.Y)(DrawMenu,{}),(0,jsxRuntime_module.Y)(Segments,{}),(0,jsxRuntime_module.Y)(Layers,{hasSymbols:!!legend?.display,hasInputs:!0})]})]}),(0,jsxRuntime_module.FD)("div",{className:"fm-o-main","data-fm-main":!0,children:[(0,jsxRuntime_module.Y)(Viewport,{}),(0,jsxRuntime_module.FD)("div",{className:"fm-o-overlay"+(isLegendInset?" fm-o-overlay--inset":""),children:[(0,jsxRuntime_module.Y)("div",{className:"fm-o-banner",children:(0,jsxRuntime_module.Y)(Banner,{})}),(0,jsxRuntime_module.FD)("div",{className:"fm-o-top",children:[(0,jsxRuntime_module.FD)("div",{className:"fm-o-top__column",children:[(0,jsxRuntime_module.Y)(Exit,{}),!isMobile&&(0,jsxRuntime_module.FD)(jsxRuntime_module.FK,{children:[(0,jsxRuntime_module.Y)(SearchButton,{searchBtnRef}),(0,jsxRuntime_module.Y)(Search,{instigatorRef:searchBtnRef})]}),(0,jsxRuntime_module.Y)(LegendButton,{legendBtnRef}),(0,jsxRuntime_module.Y)(KeyButton,{keyBtnRef}),!isFixed&&(0,jsxRuntime_module.Y)(EditButton,{editBtnRef}),"KEY"===activePanel&&!isMobile&&(0,jsxRuntime_module.Y)(Panel,{isNotObscure:!1,className:"key",label:constants.WD.legend.TITLE,width:legend?.keyWidth||legend?.width,instigatorRef:keyBtnRef,isModal:isKeyExpanded,isInset:!0,children:(0,jsxRuntime_module.Y)(Layers,{hasInputs:!1,hasSymbols:!0})}),"INFO"===activePanel&&info&&!isMobile&&(0,jsxRuntime_module.Y)(Panel,{className:"info",label:info.label,width:info.width,html:info.html,instigatorRef:viewportRef,isModal:!1,isInset:!0,isNotObscure:!0}),"LEGEND"===activePanel&&!isMobile&&isLegendInset&&(0,jsxRuntime_module.FD)(Panel,{className:"legend",isNotObscure:!1,label:legendTitle,width:legend?.width,instigatorRef:legendBtnRef,isInset:isLegendInset,isModal:isLegendModal,isHideHeading:!hasLengedHeading,children:[(0,jsxRuntime_module.Y)(DrawMenu,{}),(0,jsxRuntime_module.Y)(Segments,{}),(0,jsxRuntime_module.Y)(Layers,{hasSymbols:!!legend?.display,hasInputs:!0})]})]}),(0,jsxRuntime_module.Y)("div",{className:"fm-o-top__column",children:(0,jsxRuntime_module.Y)(ViewportLabel,{})}),(0,jsxRuntime_module.FD)("div",{className:"fm-o-top__column",children:[!isMobile&&"STYLE"===activePanel&&(0,jsxRuntime_module.Y)(Panel,{className:"style",label:"Map style",instigatorRef:stylesBtnRef,width:"400px",isInset:!isMobile,isModal:!0,children:(0,jsxRuntime_module.Y)(Styles,{})}),(0,jsxRuntime_module.Y)(HelpButton,{}),isMobile&&(0,jsxRuntime_module.FD)(jsxRuntime_module.FK,{children:[(0,jsxRuntime_module.Y)(SearchButton,{searchBtnRef,tooltip:"left"}),(0,jsxRuntime_module.Y)(Search,{instigatorRef:searchBtnRef})]}),hasButtons&&(0,jsxRuntime_module.FD)(jsxRuntime_module.FK,{children:[(0,jsxRuntime_module.Y)(StylesButton,{stylesBtnRef}),(0,jsxRuntime_module.Y)(Reset,{}),(0,jsxRuntime_module.Y)(Location,{provider}),(0,jsxRuntime_module.Y)(Zoom,{})]})]})]}),(0,jsxRuntime_module.FD)("div",{className:"fm-o-middle",children:["LEGEND"===activePanel&&!isFixed&&!isLegendInset&&(0,jsxRuntime_module.FD)(Panel,{className:"legend",isNotObscure:!1,label:legendTitle,width:legend?.width,instigatorRef:legendBtnRef,isInset:isLegendInset,isModal:isLegendModal,isHideHeading:!hasLengedHeading,children:[(0,jsxRuntime_module.Y)(DrawMenu,{}),(0,jsxRuntime_module.Y)(Segments,{}),(0,jsxRuntime_module.Y)(Layers,{hasSymbols:!!legend?.display,hasInputs:!0})]}),"EDIT"===activePanel&&!isMobile&&!isDesktop&&(0,jsxRuntime_module.Y)(Panel,{className:"edit",label:"Dimensions",instigatorRef:editBtnRef,width:legend?.width,isInset:!isMobile,isModal:!0,children:(0,jsxRuntime_module.Y)(Inspector,{})}),"KEYBOARD"===activePanel&&(0,jsxRuntime_module.Y)(Panel,{className:"keyboard",width:"500px",maxWidth:"500px",label:"Keyboard",instigatorRef:viewportRef,isModal:!0,isInset:!0,children:(0,jsxRuntime_module.Y)(Keyboard,{})}),"ERROR"===activePanel&&(0,jsxRuntime_module.Y)(Panel,{className:"error",maxWidth:"300px",label:error.label,instigatorRef:viewportRef,isModal:!0,isInset:!0,children:(0,jsxRuntime_module.Y)(MapError,{})})]}),(0,jsxRuntime_module.FD)("div",{className:"fm-o-bottom",children:[(0,jsxRuntime_module.Y)("div",{className:"fm-o-logo",children:(0,jsxRuntime_module.Y)(Logo,{})}),!isMobile&&(0,jsxRuntime_module.Y)(Actions,{}),(0,jsxRuntime_module.FD)("div",{className:"fm-o-tools",children:[(0,jsxRuntime_module.Y)(DrawShape,{}),(0,jsxRuntime_module.Y)(ScaleBar,{})]}),info&&"INFO"===activePanel&&isMobile&&(0,jsxRuntime_module.Y)(Panel,{className:"info",label:info.label,html:info.html,instigatorRef:viewportRef,isModal:!1,isInset:!0,isNotObscure:!0}),"KEY"===activePanel&&isMobile&&(0,jsxRuntime_module.Y)(Panel,{className:"key",label:constants.WD.legend.TITLE,instigatorRef:keyBtnRef,isModal:isKeyExpanded,isInset:!0,isNotObscure:!0,children:(0,jsxRuntime_module.Y)(Layers,{hasInputs:!1,hasSymbols:!0})}),"LEGEND"===activePanel&&isMobile&&isLegendInset&&(0,jsxRuntime_module.FD)(Panel,{className:"legend",isNotObscure:!0,label:legendTitle,width:legend?.width,instigatorRef:legendBtnRef,isInset:isLegendInset,isModal:isLegendModal,isHideHeading:!hasLengedHeading,children:[(0,jsxRuntime_module.Y)(DrawMenu,{}),(0,jsxRuntime_module.Y)(Segments,{}),(0,jsxRuntime_module.Y)(Layers,{hasSymbols:!0,hasInputs:!0})]}),isMobile&&!hasInspector&&(0,jsxRuntime_module.Y)(Actions,{})]}),(0,jsxRuntime_module.Y)(Attribution,{})]})]}),(0,jsxRuntime_module.Y)("div",{className:"fm-o-side",children:isMobile&&hasInspector&&(0,jsxRuntime_module.Y)(Panel,{className:"edit",label:"Dimensions",instigatorRef:editBtnRef,width:legend?.width,children:(0,jsxRuntime_module.Y)(Inspector,{})})}),isMobile&&"STYLE"===activePanel&&(0,jsxRuntime_module.Y)(Panel,{className:"style",label:"Map style",instigatorRef:stylesBtnRef,width:"400px",isInset:!isMobile,isModal:!0,children:(0,jsxRuntime_module.Y)(Styles,{})})]})})}function App(options){const{behaviour,parent,container,handleExit}=options,mobileMQ=`(max-width: ${options.maxMobile||constants.W0.breakpoints.MAX_MOBILE})`,desktopMQ=`(min-width: ${options.minDesktop||constants.W0.breakpoints.MIN_DESKTOP})`,[isMobile,setIsMobile]=(0,compat_module.J0)(window?.matchMedia(mobileMQ).matches),[isDesktop,setIsDesktop]=(0,compat_module.J0)(window.matchMedia(desktopMQ).matches),[interfaceType,setInterfaceType]=(0,compat_module.J0)(!!options.interfaceType),Provider=options.provider,provider=(0,compat_module.li)(new Provider(options)),geocodeProvider=new(0,options.geocodeProvider)(options.transformGeocodeRequest),reverseGeocodeProvider=new(0,options.reverseGeocodeProvider)(options.transformGeocodeRequest),geocode=(0,compat_module.li)({find:geocodeProvider.find.bind(geocodeProvider),suggest:geocodeProvider.suggest.bind(geocodeProvider),getNearest:reverseGeocodeProvider.getNearest.bind(reverseGeocodeProvider)}),viewportRef=(0,compat_module.li)(null),frameRef=(0,compat_module.li)(null),obscurePanelRef=(0,compat_module.li)(null),activeRef=(0,compat_module.li)(null),handleMobileMQ=e=>setIsMobile(e.matches),handleDesktopMQ=e=>setIsDesktop(e.matches);(0,compat_module.vJ)((()=>(document.body.classList.remove("fm-js-hidden"),window.matchMedia(mobileMQ).addEventListener("change",handleMobileMQ),window.matchMedia(desktopMQ).addEventListener("change",handleDesktopMQ),eventbus.A.on(parent,constants.AZ.SET_INTERFACE_TYPE,(data=>setInterfaceType(data))),()=>{window.removeEventListener("change",handleMobileMQ),window.removeEventListener("change",handleDesktopMQ)})),[]);const isPage="buttonFirst"===behaviour||"hybrid"===behaviour&&isMobile;return(0,jsxRuntime_module.Y)(AppProvider,{options,app:{provider:provider.current,geocode:geocode.current,isPage,isMobile,isDesktop,isBack:window.history.state?.isBack,interfaceType,parent,handleExit,viewportRef,frameRef,obscurePanelRef,activeRef},children:container?(0,compat_module.d5)((0,jsxRuntime_module.Y)(Container,{}),parent):(0,jsxRuntime_module.Y)(Container,{})})}function root(el,props){const appRoot=createRoot(el);return appRoot.render((0,jsxRuntime_module.Y)(App,{...props})),appRoot}}}]);