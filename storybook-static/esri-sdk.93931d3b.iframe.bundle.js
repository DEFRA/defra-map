"use strict";(self.webpackChunk_defra_flood_map=self.webpackChunk_defra_flood_map||[]).push([[2755,3480,4518,8283],{"./node_modules/@arcgis/core/Basemap.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>F});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),request=__webpack_require__("./node_modules/@arcgis/core/request.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),collectionUtils=__webpack_require__("./node_modules/@arcgis/core/core/collectionUtils.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),Loadable=__webpack_require__("./node_modules/@arcgis/core/core/Loadable.js"),loadAll=__webpack_require__("./node_modules/@arcgis/core/core/loadAll.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),urlUtils=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),writer=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),SpatialReference=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),Portal=__webpack_require__("./node_modules/@arcgis/core/portal/Portal.js"),PortalItem=__webpack_require__("./node_modules/@arcgis/core/portal/PortalItem.js"),basemapDefinitions=__webpack_require__("./node_modules/@arcgis/core/support/basemapDefinitions.js"),Accessor=(__webpack_require__("./node_modules/@arcgis/core/intl.js"),__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js")),locale=(__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/intl/locale.js")),messages=__webpack_require__("./node_modules/@arcgis/core/intl/messages.js");let l=class extends Accessor.A{constructor(o){super(o),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const o=this.language;let s="local"===o||"global"===o?o:(0,messages.xO)(o??(0,locale.JK)())??"global";return s="no"===s?"nb":s,s}};(0,tslib_es6._)([(0,property.MZ)()],l.prototype,"apiKey",void 0),(0,tslib_es6._)([(0,property.MZ)()],l.prototype,"id",void 0),(0,tslib_es6._)([(0,property.MZ)()],l.prototype,"language",void 0),(0,tslib_es6._)([(0,property.MZ)()],l.prototype,"places",void 0),(0,tslib_es6._)([(0,property.MZ)()],l.prototype,"serviceUrl",void 0),(0,tslib_es6._)([(0,property.MZ)()],l.prototype,"worldview",void 0),l=(0,tslib_es6._)([(0,subclass.$)("esri.support.BasemapStyle")],l);const p=l;var v,writeUtils=__webpack_require__("./node_modules/@arcgis/core/webdoc/support/writeUtils.js");let _=0,U=v=class extends(JSONSupport.A.JSONSupportMixin(Loadable.A)){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+_++,this.baseLayers=new Collection.A,this.referenceLayers=new Collection.A;const r=e=>{e.parent&&e.parent!==this&&"remove"in e.parent&&e.parent.remove(e),e.parent=this,"elevation"===e.type&&Logger.A.getLogger(this).error(`Layer '${e.title}, id:${e.id}' of type '${e.type}' is not supported as a basemap layer and will therefore be ignored.`)},s=e=>{e.parent=null};this.addHandles([this.baseLayers.on("after-add",(e=>r(e.item))),this.referenceLayers.on("after-add",(e=>r(e.item))),this.baseLayers.on("after-remove",(e=>s(e.item))),this.referenceLayers.on("after-remove",(e=>s(e.item)))])}initialize(){this.when().catch((e=>{Logger.A.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const t of e)t.destroy();const r=this.referenceLayers.toArray();for(const t of r)t.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=(0,maybe.pR)(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",(0,collectionUtils.V)(e,this._get("baseLayers")))}_writeBaseLayers(e,r,t){const s=[];e?(t={...t,layerContainerType:"basemap"},this.baseLayers.forEach((e=>{const r=(0,writeUtils.CJ)(e,t.webmap?t.webmap.getLayerJSONFromResourceInfo(e):null,t);null!=r&&s.push(r)})),this.referenceLayers.forEach((e=>{const r=(0,writeUtils.CJ)(e,t.webmap?t.webmap.getLayerJSONFromResourceInfo(e):null,t);null!=r&&("scene"!==e.type&&(r.isReference=!0),s.push(r))})),r.baseMapLayers=s):r.baseMapLayers=s}set referenceLayers(e){this._set("referenceLayers",(0,collectionUtils.V)(e,this._get("referenceLayers")))}writeTitle(e,r){r.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return(0,loadAll.g)(this,(e=>{e(this.baseLayers,this.referenceLayers)}))}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map((e=>(0,lang.Nb)(e)?e.clone():e)),referenceLayers:this.referenceLayers.map((e=>(0,lang.Nb)(e)?e.clone():e))};return this.loaded&&(e.loadStatus="loaded"),new v({resourceInfo:this.resourceInfo}).set(e)}read(e,r){this.resourceInfo||this._set("resourceInfo",{data:e,context:r}),super.read(e,r)}write(e,r){return e=e||{},r?.origin||(r={origin:"web-map",...r}),super.write(e,r),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map((e=>{const r=(0,lang.o8)(e);return r.url&&(0,urlUtils.BQ)(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&(0,urlUtils.BQ)(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r}))),e}async _loadFromSource(e){const{resourceInfo:r,portalItem:t,style:s}=this;(0,promiseUtils.Te)(e);const a=[];if(r){const t=r.context?r.context.url:null;if(a.push(this._loadLayersFromJSON(r.data,t,e)),r.data.id&&!r.data.title){const e=r.data.id;a.push((0,basemapDefinitions.q)(e).then((e=>{e&&this.read({title:e},r.context)})))}}else t?a.push(this._loadFromItem(t,e)):s&&a.push(this._loadFromStylesService(s,e));await Promise.all(a)}async _loadLayersFromJSON(e,r,t){const s=this.resourceInfo?.context,a=this.portalItem?.portal||s?.portal||null,o=M[s?.origin||""]??"web-map",{populateOperationalLayers:i}=await __webpack_require__.e(8065).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/support/layersCreator.js")),n=[];if((0,promiseUtils.Te)(t),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const t={context:{...s,origin:o,url:r,portal:a,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},l=e=>"web-scene"===o&&"ArcGISSceneServiceLayer"===e.layerType||e.isReference,p=i(this.baseLayers,e.baseMapLayers.filter((e=>!l(e))),t);n.push(p);const c=i(this.referenceLayers,e.baseMapLayers.filter(l),t);n.push(c)}await Promise.allSettled(n)}async _loadFromItem(e,r){const t=await e.load(r),s=await t.fetchData("json",r),a=(0,urlUtils.An)(e.itemUrl??"");return this._set("resourceInfo",{data:s.baseMap??{},context:{origin:x[e.type||""]??"web-map",portal:e.portal||Portal.A.getDefault(),url:a}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:s.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||Portal.A.getDefault(),url:a}),this._loadLayersFromJSON(this.resourceInfo.data,a,r)}async _loadFromStylesService(e,t){const s=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,a=`${s}/styles/${e.id}/self`,o=`${s}/webmaps/${e.id}`,[i,n]=await Promise.all([(await(0,request.A)(a,{query:{token:e.apiKey},signal:t?.signal})).data,(await(0,request.A)(o,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:e.apiKey},signal:t?.signal})).data]);this.thumbnailUrl??=i.thumbnailUrl;const l=(0,urlUtils.An)(o);if(this._set("resourceInfo",{data:n.baseMap??{},context:{origin:"web-map",url:l}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,l,t),e.apiKey)for(const r of[...this.baseLayers,...this.referenceLayers])"apiKey"in r&&(r.apiKey=e.apiKey)}static fromId(e){const r=basemapDefinitions.H[e];return r?r.itemId?new v({portalItem:{id:r.itemId,portal:{url:"https://www.arcgis.com"}}}):v.fromJSON(r,{origin:r.is3d?"web-scene":"web-map"}):null}};(0,tslib_es6._)([(0,property.MZ)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,r,t,s){this._writeBaseLayers(e,r,s)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Collection.A}},writer(e,r,t,s){this._writeBaseLayers(e,r,s)}}}}}})],U.prototype,"baseLayers",null),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{origins:{"web-scene":{write:!0}}}})],U.prototype,"id",void 0),(0,tslib_es6._)([(0,property.MZ)({type:PortalItem.default})],U.prototype,"portalItem",void 0),(0,tslib_es6._)([(0,property.MZ)()],U.prototype,"referenceLayers",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],U.prototype,"resourceInfo",void 0),(0,tslib_es6._)([(0,property.MZ)({type:SpatialReference.A})],U.prototype,"spatialReference",void 0),(0,tslib_es6._)([(0,property.MZ)({type:p})],U.prototype,"style",void 0),(0,tslib_es6._)([(0,property.MZ)()],U.prototype,"thumbnailUrl",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],U.prototype,"title",void 0),(0,tslib_es6._)([(0,writer.K)("title")],U.prototype,"writeTitle",null),U=v=(0,tslib_es6._)([(0,subclass.$)("esri.Basemap")],U);const x={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},M={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},F=U},"./node_modules/@arcgis/core/Map.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>Map_L});var p,tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Basemap=__webpack_require__("./node_modules/@arcgis/core/Basemap.js"),Color=__webpack_require__("./node_modules/@arcgis/core/Color.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),collectionUtils=__webpack_require__("./node_modules/@arcgis/core/core/collectionUtils.js"),compilerUtils=__webpack_require__("./node_modules/@arcgis/core/core/compilerUtils.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),Loadable=__webpack_require__("./node_modules/@arcgis/core/core/Loadable.js"),loadAll=__webpack_require__("./node_modules/@arcgis/core/core/loadAll.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),ensureType=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),subclass=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),writer=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),enumeration=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js"));let NavigationConstraint_c=p=class extends JSONSupport.A{constructor(o){super(o),this.type="none"}clone(){return new p({type:this.type})}};(0,tslib_es6._)([(0,enumeration.e)({none:"none",stayAbove:"stay-above"}),(0,property.MZ)({json:{write:{isRequired:!0}}})],NavigationConstraint_c.prototype,"type",void 0),NavigationConstraint_c=p=(0,tslib_es6._)([(0,subclass.$)("esri.ground.NavigationConstraint")],NavigationConstraint_c);const n=Symbol("GroundInstance");var C,I,opacityUtils=__webpack_require__("./node_modules/@arcgis/core/webdoc/support/opacityUtils.js");let L=I=class extends(JSONSupport.A.JSONSupportMixin(Loadable.A)){constructor(r){super(r),this[C]=!0,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Collection.A;const e=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,"elevation"!==r.type&&"base-elevation"!==r.type&&Logger.A.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.addHandles([this.layers.on("after-add",(r=>e(r.item))),this.layers.on("after-remove",(r=>(r=>{r.parent=null})(r.item)))])}initialize(){this.when().catch((r=>{(0,promiseUtils.zf)(r)||Logger.A.getLogger(this).error("#load()","Failed to load ground",r)})),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const r=this.layers.removeAll();for(const e of r)(0,maybe.pR)(e);this.layers.destroy()}normalizeCtorArgs(r){return r&&"resourceInfo"in r&&(this._set("resourceInfo",r.resourceInfo),delete(r={...r}).resourceInfo),r}get layers(){return this._get("layers")}set layers(r){this._set("layers",(0,collectionUtils.V)(r,this._get("layers")))}writeLayers(r,e,o,t){const i=[];r?(t={...t,layerContainerType:"ground"},r.forEach((r=>{if("write"in r){const e={};(0,compilerUtils.GB)(r)().write(e,t)&&i.push(e)}else t?.messages&&t.messages.push(new Error.A("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted in the ground`,{layer:r}))})),e.layers=i):e.layers=i}load(r){return this.addResolvingPromise(this._loadFromSource(r)),Promise.resolve(this)}loadAll(){return(0,loadAll.g)(this,(r=>{r(this.layers)}))}async queryElevation(r,e){await this.load({signal:e?.signal});const{ElevationQuery:o}=await __webpack_require__.e(8785).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/support/ElevationQuery.js"));(0,promiseUtils.Te)(e);const t=new o,s=this.layers.filter(A).toArray();return t.queryAll(s,r,e)}async createElevationSampler(r,e){await this.load({signal:e?.signal});const{ElevationQuery:o}=await __webpack_require__.e(8785).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/support/ElevationQuery.js"));(0,promiseUtils.Te)(e);const t=new o,s=this.layers.filter(A).toArray();return t.createSamplerAll(s,r,e)}clone(){const r={opacity:this.opacity,surfaceColor:(0,lang.o8)(this.surfaceColor),navigationConstraint:(0,lang.o8)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(r.loadStatus="loaded"),new I({resourceInfo:this.resourceInfo}).set(r)}read(r,e){this.resourceInfo||this._set("resourceInfo",{data:r,context:e}),super.read(r,e)}_loadFromSource(r){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,r):Promise.resolve()}async _loadLayersFromJSON(r,e,o){const t=e?.origin||"web-scene",s=e?.portal||null,a=e?.url||null,{populateOperationalLayers:i}=await __webpack_require__.e(446).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/layers/support/layersCreator.js"));(0,promiseUtils.Te)(o);const n=[];if(r.layers&&Array.isArray(r.layers)){const e={context:{origin:t,url:a,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};n.push(i(this.layers,r.layers,e))}await Promise.allSettled(n)}};function A(r){return"elevation"===r.type||function b(r){return r&&"createElevationSampler"in r}(r)}C=n,(0,tslib_es6._)([(0,property.MZ)({json:{read:!1,write:{isRequired:!0}}})],L.prototype,"layers",null),(0,tslib_es6._)([(0,writer.K)("layers")],L.prototype,"writeLayers",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],L.prototype,"resourceInfo",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:ensureType.jz,read:{reader:opacityUtils.D,source:"transparency"},write:{writer:(r,e)=>{e.transparency=(0,opacityUtils.p)(r)},target:"transparency"}}})],L.prototype,"opacity",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Color.A,json:{type:[ensureType.jz],write:(r,e)=>{e.surfaceColor=r.toJSON().slice(0,3)}}})],L.prototype,"surfaceColor",void 0),(0,tslib_es6._)([(0,property.MZ)({type:NavigationConstraint_c,json:{write:!0}})],L.prototype,"navigationConstraint",void 0),L=I=(0,tslib_es6._)([(0,subclass.$)("esri.Ground")],L);const E=L;var Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),CollectionFlattener=__webpack_require__("./node_modules/@arcgis/core/core/CollectionFlattener.js"),Evented=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),cast=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/cast.js"),handleUtils=__webpack_require__("./node_modules/@arcgis/core/core/handleUtils.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js");const catalogUtils_n=new WeakMap;function catalogUtils_a(o){return!o.destroyed&&(catalogUtils_n.has(o)||o.addHandles([(0,reactiveUtils.watch)((()=>{const e=o.parent;return!(!e||!("type"in e))&&("catalog-dynamic-group"===e.type||catalogUtils_a(e))}),(e=>catalogUtils_n.set(o,e)),reactiveUtils.pc),(0,handleUtils.hA)((()=>catalogUtils_n.delete(o)))]),catalogUtils_n.get(o))}var layerUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/layerUtils.js");function editableLayers_e(e){return!(!function editableLayers_n(t){return"object"==typeof t&&null!=t&&"loaded"in t&&!0===t.loaded&&"type"in t}(e)||!(0,layerUtils.BR)(e)?.operations?.supportsEditing||"editingEnabled"in e&&!(0,layerUtils.tk)(e)||catalogUtils_a(e))}var config=__webpack_require__("./node_modules/@arcgis/core/config.js"),basemapDefinitions=__webpack_require__("./node_modules/@arcgis/core/support/basemapDefinitions.js");__webpack_require__("./node_modules/@arcgis/core/support/basemapUtils.js");const f=()=>Logger.A.getLogger("esri.support.basemapUtils");function m(s,o){let n;if("string"==typeof s){const t=s in basemapDefinitions.H,a=!t&&s.includes("/");if(!t&&!a){if(config.default.apiKey)f().warn(`Unable to find basemap definition for: ${s}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const e=Object.entries(basemapDefinitions.H).filter((([e,r])=>r.classic||r.is3d)).map((([e])=>`"${e}"`)).sort().join(", ");f().warn(`Unable to find basemap definition for: ${s}. Try one of these: ${e}`)}return null}o&&(n=o[s]),n||(n=t?Basemap.default.fromId(s):new Basemap.default({style:{id:s}}),o&&(o[s]=n))}else n=(0,ensureType.dp)(Basemap.default,s);return n?.destroyed&&(f().warn("The provided basemap is already destroyed",{basemap:n}),n=null),n}var support_collectionUtils=__webpack_require__("./node_modules/@arcgis/core/support/collectionUtils.js");const groundUtils_i={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var LayersMixin=__webpack_require__("./node_modules/@arcgis/core/support/LayersMixin.js"),TablesMixin=__webpack_require__("./node_modules/@arcgis/core/support/TablesMixin.js");let j=class extends((0,TablesMixin.l)((0,LayersMixin.Q)(Evented.A.EventedMixin(Accessor.A)))){constructor(e){super(e),this.allLayers=new CollectionFlattener.A({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=(0,support_collectionUtils.Z)(this),this.basemap=null,this.editableLayers=new CollectionFlattener.A({getCollections:()=>[this.allLayers],itemFilterFunction:editableLayers_e}),this.ground=new E,this._basemapCache={}}destroy(){(function l(e){for(const r in e){const s=e[r];(0,maybe.pR)(s),delete e[r]}})(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=(0,maybe.pR)(this.basemap),(0,maybe.pR)(this.ground),this._set("ground",null)}castBasemap(e){return m(e,this._basemapCache)}castGround(e){const s=function t(t){let a=null;"string"==typeof t?t in groundUtils_i?a=new E({resourceInfo:{data:{layers:[groundUtils_i[t]]}}}):Logger.A.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`):a=(0,ensureType.dp)(E,t);return a}(e);return s??this._get("ground")}findLayerById(e){return this.allLayers.find((s=>s.id===e))}findTableById(e){return this.allTables.find((s=>s.id===e))}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,dependsOn:[]})],j.prototype,"allLayers",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],j.prototype,"allTables",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Basemap.default,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],j.prototype,"basemap",void 0),(0,tslib_es6._)([(0,cast.w)("basemap")],j.prototype,"castBasemap",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],j.prototype,"editableLayers",void 0),(0,tslib_es6._)([(0,property.MZ)({type:E,nonNullable:!0})],j.prototype,"ground",void 0),(0,tslib_es6._)([(0,cast.w)("ground")],j.prototype,"castGround",null),(0,tslib_es6._)([(0,property.MZ)()],j.prototype,"undoRedo",void 0),j=(0,tslib_es6._)([(0,subclass.$)("esri.Map")],j);const Map_L=j},"./node_modules/@arcgis/core/Viewpoint.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>m});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),Clonable=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));let t=class extends Clonable.A{constructor(o){super(o),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(o){return null!=o&&this.row===o.row&&this.rows===o.rows&&this.column===o.column&&this.columns===o.columns}};(0,tslib_es6._)([(0,property.MZ)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],t.prototype,"row",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],t.prototype,"column",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],t.prototype,"rows",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],t.prototype,"columns",void 0),t=(0,tslib_es6._)([(0,subclass.$)("esri.CameraLayout")],t);const l=t;var Cyclical=__webpack_require__("./node_modules/@arcgis/core/core/Cyclical.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),cast=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/cast.js"),reader=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js"),writer=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),ensureType=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js");let y=class extends(Clonable.A.ClonableMixin(JSONSupport.A)){constructor(...o){super(...o),this.position=new Point.default([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new l}normalizeCtorArgs(o,r,t,e){if(o&&"object"==typeof o&&("x"in o||Array.isArray(o))){const s={position:o};return null!=r&&(s.heading=r),null!=t&&(s.tilt=t),null!=e&&(s.fov=e),s}return o}writePosition(o,r,t,e){const s=o.clone();s.x=(0,ensureType.GB)(o.x||0),s.y=(0,ensureType.GB)(o.y||0),s.z=o.hasZ?(0,ensureType.GB)(o.z||0):o.z,r[t]=s.write({},e)}readPosition(o,r){const t=new Point.default;return t.read(o,r),t.x=(0,ensureType.GB)(t.x||0),t.y=(0,ensureType.GB)(t.y||0),t.z=t.hasZ?(0,ensureType.GB)(t.z||0):t.z,t}equals(o){return null!=o&&this.tilt===o.tilt&&this.heading===o.heading&&this.fov===o.fov&&this.position.equals(o.position)&&this.layout.equals(o.layout)}};(0,tslib_es6._)([(0,property.MZ)({type:Point.default,json:{write:{isRequired:!0}}})],y.prototype,"position",void 0),(0,tslib_es6._)([(0,writer.K)("position")],y.prototype,"writePosition",null),(0,tslib_es6._)([(0,reader.w)("position")],y.prototype,"readPosition",null),(0,tslib_es6._)([(0,property.MZ)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,cast.w)((o=>Cyclical.ie.normalize((0,ensureType.GB)(o))))],y.prototype,"heading",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,cast.w)((o=>(0,mathUtils.qE)((0,ensureType.GB)(o),-180,180)))],y.prototype,"tilt",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,nonNullable:!0,json:{default:55,write:!0}}),(0,cast.w)((o=>(0,mathUtils.qE)((0,ensureType.GB)(o,55),1,170)))],y.prototype,"fov",void 0),(0,tslib_es6._)([(0,property.MZ)({type:l,nonNullable:!0,json:{read:!1,write:!1}})],y.prototype,"layout",void 0),y=(0,tslib_es6._)([(0,subclass.$)("esri.Camera")],y);const d=y;var p,jsonUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js"),typeUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/typeUtils.js");let n=p=class extends JSONSupport.A{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new p({rotation:this.rotation,scale:this.scale,targetGeometry:null!=this.targetGeometry?this.targetGeometry.clone():null,camera:null!=this.camera?this.camera.clone():null})}};(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Viewpoint_l}}}}})],n.prototype,"rotation",void 0),(0,tslib_es6._)([(0,cast.w)("rotation")],n.prototype,"castRotation",null),(0,tslib_es6._)([(0,property.MZ)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Viewpoint_l}}}}})],n.prototype,"scale",void 0),(0,tslib_es6._)([(0,property.MZ)({types:typeUtils.yR,json:{read:jsonUtils.rS,write:!0,origins:{"web-scene":{read:jsonUtils.rS,write:{overridePolicy:Viewpoint_l}}}}})],n.prototype,"targetGeometry",void 0),(0,tslib_es6._)([(0,property.MZ)({type:d,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],n.prototype,"camera",void 0),n=p=(0,tslib_es6._)([(0,subclass.$)("esri.Viewpoint")],n);const m=n;function Viewpoint_l(){return{enabled:!this.camera}}},"./node_modules/@arcgis/core/core/CollectionFlattener.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>n});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_Collection_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),_accessorSupport_trackingUtils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/trackingUtils.js");let l=class extends _Collection_js__WEBPACK_IMPORTED_MODULE_1__.A{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles((0,_accessorSupport_trackingUtils_js__WEBPACK_IMPORTED_MODULE_5__.fm)((()=>this._refresh()),_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.OH))}destroy(){this.getCollections=null}_refresh(){const t=null!=this.getCollections?this.getCollections():null;if(null==t)return void this.removeAll();let o=0;for(const e of t)null!=e&&(o=this._processCollection(o,e));this.splice(o,this.length)}_createNewInstance(t){return new _Collection_js__WEBPACK_IMPORTED_MODULE_1__.A(t)}_processCollection(t,o){if(!o)return t;const e=this.itemFilterFunction??(t=>!!t);for(const s of o)if(s){if(e(s)){const o=this.indexOf(s,t);o>=0?o!==t&&this.reorder(s,t):this.add(s,t),++t}if(this.getChildrenFunction){const o=this.getChildrenFunction(s);if(Array.isArray(o))for(const e of o)t=this._processCollection(t,e);else t=this._processCollection(t,o)}}return t}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)()],l.prototype,"getCollections",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)()],l.prototype,"getChildrenFunction",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)()],l.prototype,"itemFilterFunction",void 0),l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__.$)("esri.core.CollectionFlattener")],l);const n=l},"./node_modules/@arcgis/core/core/imageUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M5:()=>p,eV:()=>c,xR:()=>s});var _request_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/request.js"),_Error_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),_support_base64Utils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/support/base64Utils.js");let i=null,o=!0;function s(t,e,r){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(o)try{return new ImageData(t,e)}catch(a){o=!1}return m(t,e,r)}function c(t,e,r,a){if(!e||!r)throw new Error("Cannot construct image data without dimensions");if(o)try{return new ImageData(t,e,r)}catch(i){o=!1}const n=m(e,r,a);return n.data.set(t,0),n}function m(t,e,r){return r||(r=function f(){return i||(i=document.createElement("canvas"),i.width=1,i.height=1),i}()),r.getContext("2d").createImageData(t,e)}async function p(t,e){const{arrayBuffer:r,mediaType:a}=await async function d(e,r){const i=(0,_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.r$)(e);if(i?.isBase64)return{arrayBuffer:(0,_support_base64Utils_js__WEBPACK_IMPORTED_MODULE_4__.M)(i.data),mediaType:i.mediaType};const o=await(0,_request_js__WEBPACK_IMPORTED_MODULE_0__.A)(e,{responseType:"array-buffer",...r});return{arrayBuffer:o.data,mediaType:o.getHeader?.("Content-Type")??""}}(t,e),n="image/png"===a;if("image/gif"===a){const{isAnimatedGIF:t,parseGif:a}=await __webpack_require__.e(4578).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/core/image/gif.js"));if(t(r))return a(r,e)}if(n){const{isAnimatedPNG:t,parseApng:a}=await __webpack_require__.e(1680).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/core/image/apng.js"));if(t(r))return a(r,e)}return async function u(a,n){const i=window.URL.createObjectURL(a);try{const{data:e}=await(0,_request_js__WEBPACK_IMPORTED_MODULE_0__.A)(i,{...n,responseType:"image"});return e}catch(o){if(!(0,_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.zf)(o))throw new _Error_js__WEBPACK_IMPORTED_MODULE_1__.A("invalid-image",`Could not fetch requested image at ${i}`);throw o}finally{window.URL.revokeObjectURL(i)}}(new Blob([r],{type:a}),e)}},"./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function e(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function r(e){const r=new Float32Array(9);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}__webpack_require__.d(__webpack_exports__,{o8:()=>r,vt:()=>e});Object.freeze(Object.defineProperty({__proto__:null,clone:r,create:e,createView:function n(e,r){return new Float32Array(e,r,9)},fromValues:function t(e,r,t,n,o,a,c,u,l){const f=new Float32Array(9);return f[0]=e,f[1]=r,f[2]=t,f[3]=n,f[4]=o,f[5]=a,f[6]=c,f[7]=u,f[8]=l,f}},Symbol.toStringTag,{value:"Module"}))},"./node_modules/@arcgis/core/core/loadAll.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>a,g:()=>t});var _asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/asyncUtils.js"),_Collection_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_Loadable_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Loadable.js");async function t(o,l){return await o.load(),a(o,l)}async function a(t,a){const s=[],c=(...o)=>{for(const l of o)null!=l&&(Array.isArray(l)?c(...l):_Collection_js__WEBPACK_IMPORTED_MODULE_1__.A.isCollection(l)?l.forEach((o=>c(o))):_Loadable_js__WEBPACK_IMPORTED_MODULE_2__.A.isLoadable(l)&&s.push(l))};a(c);let f=null;if(await(0,_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.Tj)(s,(async o=>{const n=await(0,_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.Ke)(function i(o){return"loadAll"in o&&"function"==typeof o.loadAll}(o)?o.loadAll():o.load());!1!==n.ok||f||(f=n)})),f)throw f.error;return t}},"./node_modules/@arcgis/core/geometry/support/normalizeUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O7:()=>P,Hr:()=>v,el:()=>R,mT:()=>L,XX:()=>M});var config=__webpack_require__("./node_modules/@arcgis/core/config.js"),Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js"),Polyline=__webpack_require__("./node_modules/@arcgis/core/geometry/Polyline.js"),normalizeUtilsCommon=__webpack_require__("./node_modules/@arcgis/core/geometry/support/normalizeUtilsCommon.js"),spatialReferenceUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js"),webMercatorUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/webMercatorUtils.js"),request=__webpack_require__("./node_modules/@arcgis/core/request.js"),jsonUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js"),utils=__webpack_require__("./node_modules/@arcgis/core/rest/utils.js");var urlUtils=__webpack_require__("./node_modules/@arcgis/core/core/urlUtils.js"),geometryService_utils=__webpack_require__("./node_modules/@arcgis/core/rest/geometryService/utils.js");const normalizeUtils_m=()=>Logger.A.getLogger("esri.geometry.support.normalizeUtils");function y(t){return"polygon"===t[0].type}function x(t){return"polyline"===t[0].type}function d(t){const e=[];let n=0,o=0;for(let s=0;s<t.length;s++){const r=t[s];let i=null;for(let t=0;t<r.length;t++)i=r[t],e.push(i),0===t?(n=i[0],o=n):(n=Math.min(n,i[0]),o=Math.max(o,i[0]));i&&e.push([(n+o)/2,0])}return e}function M(t,n){if(!(t instanceof Polyline.A||t instanceof Polygon.A)){const t="straightLineDensify: the input geometry is neither polyline nor polygon";throw normalizeUtils_m().error(t),new Error.A(t)}const i=(0,normalizeUtilsCommon.r8)(t),l=[];for(const e of i){const t=[];l.push(t),t.push([e[0][0],e[0][1]]);for(let o=0;o<e.length-1;o++){const s=e[o][0],r=e[o][1],i=e[o+1][0],l=e[o+1][1],c=Math.sqrt((i-s)*(i-s)+(l-r)*(l-r)),f=(l-r)/c,u=(i-s)/c,p=c/n;if(p>1){for(let l=1;l<=p-1;l++){const e=l*n,o=u*e+s,i=f*e+r;t.push([o,i])}const e=(c+Math.floor(p-1)*n)/2,o=u*e+s,i=f*e+r;t.push([o,i])}t.push([i,l])}}return function g(t){return"polygon"===t.type}(t)?new Polygon.A({rings:l,spatialReference:t.spatialReference}):new Polyline.A({paths:l,spatialReference:t.spatialReference})}function w(t,e,n){if(e){const e=M(t,1e6);t=(0,webMercatorUtils.ci)(e,!0)}return n&&(t=(0,normalizeUtilsCommon.kS)(t,n)),t}function b(t,e,n){if(Array.isArray(t)){const o=t[0];if(o>e){const n=(0,normalizeUtilsCommon.kd)(o,e);t[0]=o+n*(-2*e)}else if(o<n){const e=(0,normalizeUtilsCommon.kd)(o,n);t[0]=o+e*(-2*n)}}else{const o=t.x;if(o>e){const n=(0,normalizeUtilsCommon.kd)(o,e);t=t.clone().offset(n*(-2*e),0)}else if(o<n){const e=(0,normalizeUtilsCommon.kd)(o,n);t=t.clone().offset(e*(-2*n),0)}}return t}function j(t,e){let n=-1;for(let o=0;o<e.cutIndexes.length;o++){const s=e.cutIndexes[o],i=e.geometries[o],c=(0,normalizeUtilsCommon.r8)(i);for(let t=0;t<c.length;t++){const e=c[t];e.some((n=>{if(n[0]<180)return!0;{let n=0;for(let t=0;t<e.length;t++){const o=e[t][0];n=o>n?o:n}n=Number(n.toFixed(9));const o=-360*(0,normalizeUtilsCommon.kd)(n,180);for(let s=0;s<e.length;s++){const e=i.getPoint(t,s);i.setPoint(t,s,e.clone().offset(o,0))}return!0}}))}if(s===n){if(y(t))for(const e of(0,normalizeUtilsCommon.r8)(i))t[s]=t[s].addRing(e);else if(x(t))for(const e of(0,normalizeUtilsCommon.r8)(i))t[s]=t[s].addPath(e)}else n=s,t[s]=i}return t}async function R(e,n,r){if(!Array.isArray(e))return R([e],n);n&&"string"!=typeof n&&normalizeUtils_m().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const p="string"==typeof n?n:n?.url??config.default.geometryServiceUrl;let g,y,x,d,M,v,P,L,U=0;const z=[],A=[];for(const t of e)if(null!=t)if(g||(g=t.spatialReference,y=(0,spatialReferenceUtils.Vp)(g),x=g.isWebMercator,v=x?102100:4326,d=normalizeUtilsCommon.j7[v].maxX,M=normalizeUtilsCommon.j7[v].minX,P=normalizeUtilsCommon.j7[v].plus180Line,L=normalizeUtilsCommon.j7[v].minus180Line),y)if("mesh"===t.type)A.push(t);else if("point"===t.type)A.push(b(t.clone(),d,M));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((t=>b(t,d,M))),A.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,y);A.push(e.rings?new Polygon.A(e):e)}else if(t.extent){const e=t.extent,n=(0,normalizeUtilsCommon.kd)(e.xmin,M)*(2*d);let o=0===n?t.clone():(0,normalizeUtilsCommon.kS)(t.clone(),n);e.offset(n,0);let{xmin:s,xmax:r}=e;s=Number(s.toFixed(9)),r=Number(r.toFixed(9)),e.intersects(P)&&r!==d?(U=r>U?r:U,o=w(o,x),z.push(o),A.push("cut")):e.intersects(L)&&s!==M?(U=r*(2*d)>U?r*(2*d):U,o=w(o,x,360),z.push(o),A.push("cut")):A.push(o)}else A.push(t.clone());else A.push(t);else A.push(t);let F=(0,normalizeUtilsCommon.kd)(U,d),N=-90;const S=F,k=new Polyline.A;for(;F>0;){const t=360*F-180;k.addPath([[t,N],[t,-1*N]]),N*=-1,F--}if(z.length>0&&S>0){const t=j(z,await async function cut_i(i,n,p,m){const a=(0,utils.Dl)(i),u=n[0].spatialReference,c={...m,responseType:"json",query:{...a.query,f:"json",sr:(0,spatialReferenceUtils.YX)(u),target:JSON.stringify({geometryType:(0,jsonUtils.$B)(n[0]),geometries:n}),cutter:JSON.stringify(p)}},f=await(0,request.A)(a.path+"/cut",c),{cutIndexes:y,geometries:g=[]}=f.data;return{cutIndexes:y,geometries:g.map((e=>{const t=(0,jsonUtils.rS)(e);return t.spatialReference=u,t}))}}(p,z,k,r)),n=[],o=[];for(let r=0;r<A.length;r++){const s=A[r];if("cut"!==s)o.push(s);else{const s=t.shift(),i=e[r];null!=i&&"polygon"===i.type&&i.rings&&i.rings.length>1&&s.rings.length>=i.rings.length?(n.push(s),o.push("simplify")):o.push(x?(0,webMercatorUtils.Gh)(s):s)}}if(!n.length)return o;const s=await async function m(m,p,f){const n="string"==typeof m?(0,urlUtils.An)(m):m,a=p[0].spatialReference,u=(0,jsonUtils.$B)(p[0]),l={...f,query:{...n.query,f:"json",sr:(0,spatialReferenceUtils.YX)(a),geometries:JSON.stringify((0,geometryService_utils.X)(p))}},{data:y}=await(0,request.A)(n.path+"/simplify",l);return(0,geometryService_utils.V)(y.geometries,u,a)}(p,n,r),i=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?i.push(t):i.push(x?(0,webMercatorUtils.Gh)(s.shift()):s.shift())}return i}const C=[];for(let t=0;t<A.length;t++){const e=A[t];if("cut"!==e)C.push(e);else{const t=z.shift();C.push(!0===x?(0,webMercatorUtils.Gh)(t):t)}}return C}function v(t){if(!t)return null;const e=t.extent;if(!e)return null;const n=t.spatialReference&&(0,spatialReferenceUtils.Vp)(t.spatialReference);if(!n)return e;const[o,s]=n.valid,r=2*s,{width:i}=e;let l,{xmin:c,xmax:u}=e;if([c,u]=[u,c],"extent"===t.type||0===i||i<=s||i>r||c<o||u>s)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;l=d(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;l=d(t.paths);break;case"multipoint":l=t.points}const p=e.clone();for(let f=0;f<l.length;f++){let t=l[f][0];t<0?(t+=s,u=Math.max(t,u)):(t-=s,c=Math.min(t,c))}return p.xmin=c,p.xmax=u,p.width<i?(p.xmin-=s,p.xmax-=s,p):e}function P(t,e,n){const o=(0,spatialReferenceUtils.Vp)(n);if(null==o)return t;const[s,r]=o.valid,i=2*r;let l=0,c=0;e>r?l=Math.ceil(Math.abs(e-r)/i):e<s&&(l=-Math.ceil(Math.abs(e-s)/i)),t>r?c=Math.ceil(Math.abs(t-r)/i):t<s&&(c=-Math.ceil(Math.abs(t-s)/i));let u=t+(l-c)*i;const p=u-e;return p>r?u-=i:p<s&&(u+=i),u}function L(t,e){const n=(0,spatialReferenceUtils.Vp)(e);if(n){const[e,o]=n.valid,s=o-e;if(t<e)for(;t<e;)t+=s;if(t>o)for(;t>o;)t-=s}return t}},"./node_modules/@arcgis/core/geometry/support/normalizeUtilsCommon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j7:()=>r,kS:()=>s,kd:()=>i,r8:()=>o});var _Polyline_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/Polyline.js"),_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js");const r={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new _Polyline_js__WEBPACK_IMPORTED_MODULE_0__.A({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__.A.WebMercator}),minus180Line:new _Polyline_js__WEBPACK_IMPORTED_MODULE_0__.A({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__.A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new _Polyline_js__WEBPACK_IMPORTED_MODULE_0__.A({paths:[[[180,-180],[180,180]]],spatialReference:_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__.A.WGS84}),minus180Line:new _Polyline_js__WEBPACK_IMPORTED_MODULE_0__.A({paths:[[[-180,-180],[-180,180]]],spatialReference:_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__.A.WGS84})}};function i(e,n){return Math.ceil((e-n)/(2*n))}function s(e,n){const t=o(e);for(const r of t)for(const e of r)e[0]+=n;return e}function o(e){return(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__.Bi)(e)?e.rings:e.paths}},"./node_modules/@arcgis/core/layers/mixins/OrderedLayer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Rr:()=>i,fY:()=>p,ne:()=>c});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_object_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/object.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),_support_OrderByInfo_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/layers/support/OrderByInfo.js");function i(r,o,e){if(!r)return null;const t=r.find((r=>!!r.field));if(!t)return null;const i=new _support_OrderByInfo_js__WEBPACK_IMPORTED_MODULE_7__.A;return i.read(t,e),[i]}const c={type:[_support_OrderByInfo_js__WEBPACK_IMPORTED_MODULE_7__.A],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:i},write:{writer:function n(r,e,t,s){const i=r.find((r=>!!r.field));i&&(0,_core_object_js__WEBPACK_IMPORTED_MODULE_1__.sM)(t,[i.toJSON()],e)}}}},p=o=>{let s=class extends o{constructor(){super(...arguments),this.orderBy=null}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.MZ)(c)],s.prototype,"orderBy",void 0),s=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.$)("esri.layers.mixins.OrderedLayer")],s),s}},"./node_modules/@arcgis/core/layers/support/FeatureType.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>c});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js")),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),_domains_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/layers/support/domains.js"),_FeatureTemplate_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/layers/support/FeatureTemplate.js");let n=class extends(_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__.A.ClonableMixin(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.A)){constructor(o){super(o),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(o){const r={};for(const t of Object.keys(o))r[t]=(0,_domains_js__WEBPACK_IMPORTED_MODULE_10__.rS)(o[t]);return r}writeDomains(o,r){const t={};for(const s of Object.keys(o))o[s]&&(t[s]=o[s]?.toJSON());r.domains=t}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({json:{write:!0}})],n.prototype,"id",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({json:{write:!0}})],n.prototype,"name",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({json:{write:!0}})],n.prototype,"domains",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__.w)("domains")],n.prototype,"readDomains",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_9__.K)("domains")],n.prototype,"writeDomains",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:[_FeatureTemplate_js__WEBPACK_IMPORTED_MODULE_11__.A],json:{write:!0}})],n.prototype,"templates",void 0),n=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.$)("esri.layers.support.FeatureType")],n);const c=n},"./node_modules/@arcgis/core/layers/support/FieldsIndex.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Z});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/core/MapUtils.js"),_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/sql/UnknownTimeZone.js"),_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldUtils.js"),_time_constants_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/time/constants.js"),_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/time/timeZoneUtils.js"),luxon__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/luxon/src/luxon.js");const T=new Map;class Z{static fromJSON(e){return new Z(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new Z(e.fields??[],S(e))}static fromLayerJSON(e){return new Z(e.fields??[],S(e))}constructor(e=[],i){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const t=[];for(const s of this.fields){const e=s?.name,i=M(e);if(e&&i){const n=w(e);this._fieldsMap.set(e,s),this._fieldsMap.set(n,s),this._normalizedFieldsMap.set(i,s),t.push(`${n}:${s.type}:${this._timeZoneByFieldName?.get(e)}`),(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.vE)(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.WA)(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.te)(s)||(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.Xz)(s)||(s.editable=null==s.editable||!!s.editable,s.nullable=null==s.nullable||!!s.nullable)}}t.sort(),this.uid=t.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.te)(e)||(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.Xz)(e)||e.nullable||void 0!==(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(w(e))??this._normalizedFieldsMap.get(M(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(i){const s=this.get(i&&"string"!=typeof i?i.name:i);return s?this._timeZoneByFieldName?this._timeZoneByFieldName.get(s.name):"date"===s.type||"esriFieldTypeDate"===s.type?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__.A.getLogger("esri.layers.support.FieldsIndex").errorOnce(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.A("getTimeZone:no-timezone-information",`no time zone information for field '${s.name}'`)),_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.n$):N.has(s.type)?_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.L5:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.L5?_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_3__.GB.instance:i===_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.n$?luxon__WEBPACK_IMPORTED_MODULE_7__.mQ.utcInstance:(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_8__.tE)(T,i,(()=>luxon__WEBPACK_IMPORTED_MODULE_7__.oh.create(i))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__.A.isSerializable(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function w(e){return e.trim().toLowerCase()}function M(e){return(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__.rS)(e)?.toLowerCase()??""}const N=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function S(e){const i=new Map;if(!e.fields)return i;const t=!0===e.datesInUnknownTimezone,{timeInfo:s,editFieldsInfo:n}=e,r=(s?"startField"in s?s.startField:s.startTimeField:"")??"",l=(s?"endField"in s?s.endField:s.endTimeField:"")??"",o=function g(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_6__.ZS)(e.dateFieldsTimeReference):null,d=n?function y(e){return"timeZone"in e}(n)?n.timeZone??o:n.dateFieldsTimeReference?(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_6__.ZS)(n.dateFieldsTimeReference):o??_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.n$:null,a=s?function _(e){return"timeZone"in e}(s)?s.timeZone??o:s.timeReference?(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_6__.ZS)(s.timeReference):o:null,m=new Map([[w(n?.creationDateField??""),d],[w(n?.editDateField??""),d],[w(r),a],[w(l),a]]);for(const{name:u,type:f}of e.fields)if(N.has(f))i.set(u,_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.L5);else if("date"!==f&&"esriFieldTypeDate"!==f)i.set(u,null);else if(t)i.set(u,_time_constants_js__WEBPACK_IMPORTED_MODULE_5__.L5);else{const e=m.get(w(u??""))??o;i.set(u,e)}return i}},"./node_modules/@arcgis/core/layers/support/OrderByInfo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>a});var i,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));const p=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.J({asc:"ascending",desc:"descending"});let n=i=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.A{constructor(r){super(r),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new i({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:String,json:{write:!0}})],n.prototype,"field",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],n.prototype,"valueExpression",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:p.apiValues,json:{type:p.jsonValues,read:p.read,write:p.write}})],n.prototype,"order",void 0),n=i=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.$)("esri.layers.support.OrderByInfo")],n);const a=n},"./node_modules/@arcgis/core/layers/support/TitleCreator.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>u});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/asyncUtils.js"),_core_Collection_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/layers/support/fieldUtils.js"),_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/support/arcadeOnDemand.js");let d=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__.A{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_2__.UT)((()=>(0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_10__.lw)())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??__webpack_require__.e(8924).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/widgets/Feature/support/featureUtils.js")).then((e=>this._featureUtils=e))}get calculatedExpressions(){const e=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_3__.A;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const s=this._arcadeTask.value.arcade.parseScript(t.expression,["$layer","$map","$datastore"]);if(s.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:s,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(s,{vars:{$feature:"any"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return"string"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter((t=>e.includes(`{expression/${t.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const s of this.calculatedExpressions?.toArray()??[])try{const t=this._arcadeTask.value.arcade.extractFieldLiterals(s.syntax);for(const s of t){const t=s.split("."),i=this.fieldsIndex.get(t.at(-1)??"");i&&e.add(i.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const s of t){const t=this.fieldsIndex.get(s);t&&e.add(t.name)}return e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,s){try{const{attributes:i}=t,r=s?.timeZone??"system",[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);if(s.fetchMissingFields&&(t=await this._checkAndReQueryGraphic(e,t)),this.workingTitle&&this.fieldInfoMap){const s=this._createFormattedAttributes(e,t,r).global;return a({attributes:i,expressionAttributes:null,fieldInfoMap:this.fieldInfoMap,globalAttributes:s,layer:e,text:this.workingTitle})}return""}catch{}return""}async _checkAndReQueryGraphic(e,t){const s=t.getObjectId();if(null==s)return t;if(!(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.Kl)(this.requiredFields,t)){const t=e.createQuery();t.where="1=1",t.outFields=[...this.requiredFields],t.objectIds=[s];const i=await e.queryFeatures(t);if(1===i?.features.length)return i.features[0]}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const s of e){if(!s.fieldName)continue;const e=this.fieldsIndex.get(s.fieldName),i=e?.name??s.fieldName;s.fieldName=i,t.set(i.toLowerCase(),s)}return t}_createFormattedAttributes(e,t,s="system"){const i=this.effectivePopupTemplate?.fieldInfos??[],r={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const s=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{r[`expression/${e.name}`]=e.func({vars:{$feature:s}})}catch{}}const a={...t.attributes,...r};return{global:this._featureUtils.formatAttributes({fieldInfos:i,attributes:a,graphic:t,timeZone:s,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.nw)(e).filter((e=>!(0===e.indexOf("relationships/")||0===e.indexOf("expression/"))))}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)({readOnly:!0})],d.prototype,"_arcadeTask",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"_featureUtils",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)({readOnly:!0})],d.prototype,"featureUtilsPromise",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)({readOnly:!0})],d.prototype,"calculatedExpressions",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"displayField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"effectivePopupTemplate",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"expressionsUsedInTitle",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"fieldsIndex",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"fieldInfoMap",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"fields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"objectIdField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],d.prototype,"requiredFields",null),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.$)("esri.layers.support.TitleCreator")],d);const u=d},"./node_modules/@arcgis/core/renderers/support/heatmapUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O3:()=>f,PU:()=>a,YW:()=>u,ex:()=>c,hv:()=>l,zp:()=>e});var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js"),_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/chunks/vec42.js"),_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js");const c=2.4;function e(t){return(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.PN)(t*c)}function a(t){return(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__.Lz)(t)/c}function s(r,o,i,c){let{color:e,ratio:a}=o,{color:s,ratio:f}=i;if(f===a){const t=1e-6;1===f?a-=t:f+=t}const l=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.qE)((c-a)/(f-a),0,1);(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_1__.l)(r,e.toArray(),s.toArray(),l)}function f(t){const o=new Uint8ClampedArray(2048);if(t=t.filter((({ratio:t})=>t>=0&&t<=1)).sort(((t,r)=>t.ratio-r.ratio)).map((({color:t,ratio:r})=>({color:t,ratio:Math.max(r,.001)}))),t.length<1)return o;let n=t[0],c=t[0],e=1;const a=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__.vt)();for(let i=0;i<512;i++){const f=(i+.5)/512;for(;f>c.ratio&&e<t.length;)n=c,c=t[e++];s(a,n,c,f),o.set(a,4*i)}return o}function l(t,r,o){const n=Math.sqrt(t**2+r**2)/o;return n>1?0:3/(Math.PI*o**2)*(1-n**2)**2}function u(t){return"function"==typeof t?t:t?r=>+r[t]:()=>1}},"./node_modules/@arcgis/core/rest/support/FeatureSet.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>d});var f,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_Graphic_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/Graphic.js"),_core_jsonMap_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js"),_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),_core_lang_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js")),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"),_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js"),_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/jsonUtils.js"),_geometry_support_typeUtils_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/typeUtils.js"),_layers_support_Field_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/layers/support/Field.js");const h=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_2__.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let g=f=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_3__.A{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,r){return this.readFeaturesWithClass(e,r,_Graphic_js__WEBPACK_IMPORTED_MODULE_1__.default)}writeGeometryType(e,t,r,o){if(e)return void h.write(e,t,r,o);const{features:s}=this;if(s)for(const n of s)if(null!=n?.geometry)return void h.write(n.geometry.type,t,r,o)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.rS)(e);return o&&!r&&t.spatialReference&&(o.spatialReference=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__.A.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const o of r)if(o&&null!=o.geometry&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}clone(){return new f(this.cloneProperties())}cloneProperties(){return(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_4__.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e?.[r];o.geometry=t?.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,r],translate:[o,s]}=e,l=this.features,a=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-o)/t)),(e=>Math.round((s-e)/r)));for(let p=0,m=l.length;p<m;p++)a?.(l[p].geometry)||(l.splice(p,1),p--,m--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[o,s],scale:[n,i]}=r;let p=null,m=null;if(this.hasZ&&null!=r?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=r;p=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=r;m=r=>null==r?r:r*t+e}const u=this._getHydrationFunction(e,(e=>e*n+o),(e=>s-e*i),p,m);for(const{geometry:c}of t)null!=c&&u&&u(c);return this.transform=null,this}readFeaturesWithClass(e,t,r){const o=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__.A.fromJSON(t.spatialReference),s=[];for(let n=0;n<e.length;n++){const t=e[n],i=r.fromJSON(t),l=t.geometry?.spatialReference;null==i.geometry||l||(i.geometry.spatialReference=o);const a=t.aggregateGeometries,p=i.aggregateGeometries;if(a&&null!=p)for(const e in p){const t=p[e],r=a[e],s=r?.spatialReference;null==t||s||(t.spatialReference=o)}s.push(i)}return s}_quantizePoints(e,t,r){let o,s;const n=[];for(let i=0,l=e.length;i<l;i++){const l=e[i];if(i>0){const e=t(l[0]),i=r(l[1]);e===o&&i===s||(n.push([e-o,i-s]),o=e,s=i)}else o=t(l[0]),s=r(l[1]),n.push([o,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const o=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.Bi)(e)?e.rings:e.paths,s=[];for(let n=0,i=o.length;n<i;n++){const e=o[n],i=this._quantizePoints(e,t,r);i&&s.push(i)}return s.length>0?((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.Bi)(e)?e.rings=s:e.paths=s,e):null}:"multipoint"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o&&o.length>0?(e.points=o,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,o,s){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),o&&(e.z=o(e.z))}:"polyline"===e||"polygon"===e?e=>{const n=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.Bi)(e)?e.rings:e.paths;let i,l;for(let o=0,s=n.length;o<s;o++){const e=n[o];for(let o=0,s=e.length;o<s;o++){const s=e[o];o>0?(i+=s[0],l+=s[1]):(i=s[0],l=s[1]),s[0]=t(i),s[1]=r(l)}}if(o&&s)for(let t=0,r=n.length;t<r;t++){const e=n[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=o(r[2]),r[3]=s(r[3])}}else if(o)for(let t=0,r=n.length;t<r;t++){const e=n[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=o(r[2])}}else if(s)for(let t=0,r=n.length;t<r;t++){const e=n[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=s(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),o&&null!=e.zmax&&null!=e.zmin&&(e.zmax=o(e.zmax),e.zmin=o(e.zmin)),s&&null!=e.mmax&&null!=e.mmin&&(e.mmax=s(e.mmax),e.mmin=s(e.mmin))}:"multipoint"===e?e=>{const n=e.points;let i,l;for(let o=0,s=n.length;o<s;o++){const e=n[o];o>0?(i+=e[0],l+=e[1]):(i=e[0],l=e[1]),e[0]=t(i),e[1]=r(l)}if(o&&s)for(let t=0,r=n.length;t<r;t++){const e=n[t];e[2]=o(e[2]),e[3]=s(e[3])}else if(o)for(let t=0,r=n.length;t<r;t++){const e=n[t];e[2]=o(e[2])}else if(s)for(let t=0,r=n.length;t<r;t++){const e=n[t];e[2]=s(e[2])}}:null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:String,json:{write:!0}})],g.prototype,"displayFieldName",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"exceededTransferLimit",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:[_Graphic_js__WEBPACK_IMPORTED_MODULE_1__.default],json:{write:!0}})],g.prototype,"features",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_8__.w)("features")],g.prototype,"readFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:[_layers_support_Field_js__WEBPACK_IMPORTED_MODULE_14__.A],json:{write:!0}})],g.prototype,"fields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:h.read}}})],g.prototype,"geometryType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_10__.K)("geometryType")],g.prototype,"writeGeometryType",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"hasM",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,"hasZ",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({types:_geometry_support_typeUtils_js__WEBPACK_IMPORTED_MODULE_13__.yR,json:{write:!0}})],g.prototype,"queryGeometry",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_8__.w)("queryGeometry")],g.prototype,"readQueryGeometry",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({type:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__.A,json:{write:!0}})],g.prototype,"spatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_10__.K)("spatialReference")],g.prototype,"writeSpatialReference",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)({json:{write:!0}})],g.prototype,"transform",void 0),g=f=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.$)("esri.rest.support.FeatureSet")],g),g.prototype.toJSON.isDefaultToJSON=!0;const d=g},"./node_modules/@arcgis/core/rest/support/NormalizationBinParametersMixin.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>m,Q:()=>n});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js")),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");const n=(0,_core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.O)()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),l="percent-of-total",s="field",m=t=>{let m=class extends t{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let o=this._get("normalizationType");const t=!!this.normalizationField,a=null!=this.normalizationTotal;return t||a?(o=t&&s||a&&l||null,t&&a&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):o!==s&&o!==l||(o=null),o}set normalizationType(o){this._set("normalizationType",o)}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:String,json:{name:"parameters.normalizationField",write:!0}})],m.prototype,"normalizationField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],m.prototype,"normalizationMaxValue",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],m.prototype,"normalizationMinValue",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],m.prototype,"normalizationTotal",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_6__.e)(n,{name:"parameters.normalizationType"})],m.prototype,"normalizationType",null),m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.$)("esri.rest.support.NormalizationBinParametersMixin")],m),m}},"./node_modules/@arcgis/core/support/LayersMixin.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>l});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Collection_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_core_collectionUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/collectionUtils.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),_layers_Layer_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/layers/Layer.js");function d(e,r,t){let s,o;if(e)for(let a=0,i=e.length;a<i;a++){if(s=e.at(a),s?.[r]===t)return s;if("group"===s?.type&&(o=d(s.layers,r,t),o))return o}}const l=l=>{let y=class extends l{constructor(...e){super(...e),this.layers=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_1__.A;const o=e=>{e.parent=this,this.layerAdded(e),"elevation"!==e.type&&"base-elevation"!==e.type||_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__.A.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},a=e=>{e.parent=null,this.layerRemoved(e)};this.addHandles([this.layers.on("before-add",(e=>{if(e.item===this)return e.preventDefault(),void _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__.A.getLogger(this).error("#add()","Cannot add layer to itself.");(e=>{e.parent&&"remove"in e.parent&&e.parent.remove(e)})(e.item)})),this.layers.on("after-add",(e=>o(e.item))),this.layers.on("after-remove",(e=>a(e.item)))])}destroy(){const e=this.layers.toArray();for(const r of e)r.destroy();this.layers.destroy()}set layers(e){this._set("layers",(0,_core_collectionUtils_js__WEBPACK_IMPORTED_MODULE_2__.V)(e,this._get("layers")))}add(e,r){const t=this.layers;if(r=t.getNextIndex(r),e instanceof _layers_Layer_js__WEBPACK_IMPORTED_MODULE_9__.A){const s=e;s.parent===this?this.reorder(s,r):t.add(s,r)}else(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.$X)(e)?e.then((e=>{this.destroyed||this.add(e,r)})):_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__.A.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(e,r){const t=this.layers;let s=t.getNextIndex(r);e.slice().forEach((e=>{e.parent!==this?(t.add(e,s),s+=1):this.reorder(e,s)}))}findLayerById(e){return d(this.layers,"id",e)}findLayerByUid(e){return d(this.layers,"uid",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,r){return this.layers.reorder(e,r)}layerAdded(e){}layerRemoved(e){}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.MZ)()],y.prototype,"layers",null),y=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.$)("esri.support.LayersMixin")],y),y}},"./node_modules/@arcgis/core/support/TablesMixin.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>l});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_Collection_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_core_collectionUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/collectionUtils.js"),_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));const a=new Set(["feature","subtype-group"]);function n(t,e,r){if(t)for(let s=0,o=t.length;s<o;s++){const o=t.at(s);if(o[e]===r)return o;if("group"===o?.type){const t=n(o.tables,e,r);if(t)return t}}}const l=l=>{let p=class extends l{constructor(...t){super(...t),this.tables=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_1__.A,this.addHandles([this.tables.on("after-add",(t=>{const e=t.item;e.parent&&e.parent!==this&&"tables"in e.parent&&e.parent.tables.remove(e),e.parent=this,a.has(e.type)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__.A.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(t=>{t.item.parent=null}))])}destroy(){const t=this.tables.toArray();for(const e of t)e.destroy();this.tables.destroy()}set tables(t){this._set("tables",(0,_core_collectionUtils_js__WEBPACK_IMPORTED_MODULE_2__.V)(t,this._get("tables")))}findTableById(t){return n(this.tables,"id",t)}findTableByUid(t){return n(this.tables,"uid",t)}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.MZ)()],p.prototype,"tables",null),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.$)("esri.support.TablesMixin")],p),p}},"./node_modules/@arcgis/core/support/collectionUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>n,Z:()=>t});var _core_CollectionFlattener_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/CollectionFlattener.js");function t(t){return new _core_CollectionFlattener_js__WEBPACK_IMPORTED_MODULE_0__.A({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const t=[];return"tables"in e&&t.push(e.tables),"layers"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return!!t&&"tables"in t&&t.tables.includes(e)}})}function n(e){for(const t of e.values())t?.destroy();e.clear()}},"./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/parameters.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ci:()=>e,HQ:()=>t,XK:()=>c,aY:()=>o});const o=1,t=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e=256},"./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var T,E,L,I,A,_,R,N,S;__webpack_require__.d(__webpack_exports__,{Be:()=>A,Gn:()=>L,RI:()=>R,S5:()=>E,ch:()=>N,uC:()=>S}),function(T){T[T.FILL=0]="FILL",T[T.LINE=1]="LINE",T[T.MARKER=2]="MARKER",T[T.TEXT=3]="TEXT",T[T.LABEL=4]="LABEL"}(T||(T={})),function(T){T[T.NONE=0]="NONE",T[T.MAP=1]="MAP",T[T.LABEL=2]="LABEL",T[T.LABEL_ALPHA=4]="LABEL_ALPHA",T[T.HITTEST=8]="HITTEST",T[T.HIGHLIGHT=16]="HIGHLIGHT",T[T.CLIP=32]="CLIP",T[T.DEBUG=64]="DEBUG",T[T.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(E||(E={})),function(T){T[T.SIZE=0]="SIZE",T[T.COLOR=1]="COLOR",T[T.OPACITY=2]="OPACITY",T[T.ROTATION=3]="ROTATION"}(L||(L={})),function(T){T[T.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",T[T.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",T[T.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",T[T.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(I||(I={})),function(T){T[T.SPRITE=0]="SPRITE",T[T.GLYPH=1]="GLYPH"}(A||(A={})),function(T){T[T.DEFAULT=0]="DEFAULT",T[T.SIMPLE=1]="SIMPLE",T[T.DOT_DENSITY=2]="DOT_DENSITY",T[T.OUTLINE_FILL=3]="OUTLINE_FILL",T[T.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",T[T.HEATMAP=5]="HEATMAP",T[T.PIE_CHART=6]="PIE_CHART"}(_||(_={})),function(T){T[T.All=0]="All",T[T.Highlight=1]="Highlight",T[T.InsideEffect=2]="InsideEffect",T[T.OutsideEffect=3]="OutsideEffect"}(R||(R={})),function(T){T[T.BATCHING=0]="BATCHING",T[T.STRICT_ORDER=1]="STRICT_ORDER",T[T.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(N||(N={})),function(T){T[T.FILL=0]="FILL",T[T.LINE=1]="LINE",T[T.MARKER=2]="MARKER",T[T.TEXT=3]="TEXT"}(S||(S={}))},"./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Eq:()=>f,L4:()=>c,Pr:()=>w,QA:()=>h,Qu:()=>M,dJ:()=>p,r3:()=>m,vT:()=>y});var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/unitUtils.js"),_definitions_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),_enums_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js"),_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js");const r={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:t=>t.stencilRef,compare:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__.MT.EQUAL,mask:255,op:{fail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__.eA.KEEP,zFail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__.eA.KEEP,zPass:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__.eA.REPLACE}}}},l={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},a={...r,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function c({pixelRatio:e,state:i,displayLevel:o,requiredLevel:n},s){const r=1/2**(o-s.key.level),l=1/2**(n-s.key.level);return{displayMat3:i.displayMat3,displayViewMat3:i.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:i.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:r,requiredZoomFactor:l,tileOffset:[s.x,s.y],currentScale:i.scale,currentZoom:o,metersPerSRUnit:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__.GA)(i.spatialReference),rotation:i.rotation,pixelRatio:e}}function p(t){return"highlight"===t.passOptions?.type}function f(t){return"hittest"===t.passOptions?.type}function u(t){if(!f(t))return null;const{position:e,distance:i,smallSymbolDistance:o,smallSymbolSizeThreshold:n}=t.passOptions;return{position:e,distance:i,smallSymbolDistance:o,smallSymbolSizeThreshold:n}}function d(t){if(!p(t))return null;const{activeReasons:e,highlightAll:i}=t.passOptions;return{activeReasons:e,highlightAll:i?1:0}}function m(t,e,i){const o={};for(const n in i)i[n]instanceof Function?o[n]=i[n](t,e):o[n]=i[n];return o}function h(t,e){const{attributeView:i,context:o}=t;return{storage:i.getUniforms(o),view:c(t,e),hittestRequest:u(t),highlight:d(t)}}function y(t){return{inside:t.selection===_enums_js__WEBPACK_IMPORTED_MODULE_2__.RI.InsideEffect,outside:t.selection===_enums_js__WEBPACK_IMPORTED_MODULE_2__.RI.OutsideEffect}}function M(t){return f(t)?l:p(t)&&"clear"===t.passOptions.stepType?a:r}function w(t){const{row:o,col:n}=t.key,s=n*_definitions_js__WEBPACK_IMPORTED_MODULE_1__.CQ,r=o*_definitions_js__WEBPACK_IMPORTED_MODULE_1__.CQ;return{tileOffsetFromLocalOrigin:[s%_definitions_js__WEBPACK_IMPORTED_MODULE_1__.YV,r%_definitions_js__WEBPACK_IMPORTED_MODULE_1__.YV],maxIntsToLocalOrigin:[Math.floor(s/_definitions_js__WEBPACK_IMPORTED_MODULE_1__.YV),Math.floor(r/_definitions_js__WEBPACK_IMPORTED_MODULE_1__.YV)]}}},"./node_modules/@arcgis/core/views/2d/layers/support/util.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H_:()=>p,u4:()=>c,Oq:()=>util_u,lB:()=>util_g,eh:()=>util_a});var arrayUtils=__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),jsonMap=__webpack_require__("./node_modules/@arcgis/core/core/jsonMap.js"),guards=__webpack_require__("./node_modules/@arcgis/core/support/guards.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),definitions=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js"),parameters=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/parameters.js"),HighlightOptions=__webpack_require__("./node_modules/@arcgis/core/views/support/HighlightOptions.js"),enums=__webpack_require__("./node_modules/@arcgis/core/views/webgl/enums.js"),Texture=__webpack_require__("./node_modules/@arcgis/core/views/webgl/Texture.js"),TextureDescriptor=__webpack_require__("./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");const a=()=>Logger.A.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");const d=[0,0,0,0];class g{constructor(){this.type="single",this._highlightOptions=new HighlightOptions.A,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*parameters.Ci),this._minMaxDistance=[0,0]}setHighlightOptions(o){this._highlightOptions=o}applyHighlightOptions(o,t){this._updateGradientTexture(o),o.bindTexture(this._shadeTex,definitions.CR),t.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<definitions.U5)-1,activeGradient:this}]}_updateGradientTexture(o){const i=function f(o){return`${o.color};${o.haloColor};${o.haloOpacity};${o.fillOpacity};${o.haloWidth};${o.haloBlur}`}(this._highlightOptions);if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,function u(o,i){i.fillColor[0]=o.color.r/255,i.fillColor[1]=o.color.g/255,i.fillColor[2]=o.color.b/255,i.fillColor[3]=o.color.a,o.haloColor?(i.outlineColor[0]=o.haloColor.r/255,i.outlineColor[1]=o.haloColor.g/255,i.outlineColor[2]=o.haloColor.b/255,i.outlineColor[3]=o.haloColor.a):(i.outlineColor[0]=i.fillColor[0],i.outlineColor[1]=i.fillColor[1],i.outlineColor[2]=i.fillColor[2],i.outlineColor[3]=i.fillColor[3]),i.fillColor[3]*=o.fillOpacity,i.outlineColor[3]*=o.haloOpacity,i.fillColor[0]*=i.fillColor[3],i.fillColor[1]*=i.fillColor[3],i.fillColor[2]*=i.fillColor[3],i.outlineColor[0]*=i.outlineColor[3],i.outlineColor[1]*=i.outlineColor[3],i.outlineColor[2]*=i.outlineColor[3],i.outlineWidth=(1-o.haloBlur)*o.haloWidth,i.outerHaloWidth=o.haloBlur*o.haloWidth/2,i.innerHaloWidth=o.haloBlur*o.haloWidth/2,i.outlinePosition=0}(this._highlightOptions,this._convertedHighlightOptions);const t=this._convertedHighlightOptions,r=t.outlinePosition-t.outlineWidth/2-t.outerHaloWidth,g=t.outlinePosition-t.outlineWidth/2,p=t.outlinePosition+t.outlineWidth/2,C=t.outlinePosition+t.outlineWidth/2+t.innerHaloWidth,c=Math.sqrt(Math.PI/2)*parameters.aY,m=Math.abs(r)>c?Math.round(10*(Math.abs(r)-c))/10:0,x=Math.abs(C)>c?Math.round(10*(Math.abs(C)-c))/10:0;let _;m&&!x?a().error("The outer rim of the highlight is "+m+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!m&&x?a().error("The inner rim of the highlight is "+x+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):m&&x&&a().error("The highlight is "+Math.max(m,x)+"px away from the edge of the feature; consider reducing some width values.");const w=[void 0,void 0,void 0,void 0];function T(o,i,t){w[0]=(1-t)*o[0]+t*i[0],w[1]=(1-t)*o[1]+t*i[1],w[2]=(1-t)*o[2]+t*i[2],w[3]=(1-t)*o[3]+t*i[3]}const{_texelData:v}=this;for(let l=0;l<parameters.Ci;++l)_=r+l/(parameters.Ci-1)*(C-r),_<r?(w[0]=0,w[1]=0,w[2]=0,w[3]=0):_<g?T(d,t.outlineColor,(_-r)/(g-r)):_<p?[w[0],w[1],w[2],w[3]]=t.outlineColor:_<C?T(t.outlineColor,t.fillColor,(_-p)/(C-p)):[w[0],w[1],w[2],w[3]]=t.fillColor,v[4*l]=255*w[0],v[4*l+1]=255*w[1],v[4*l+2]=255*w[2],v[4*l+3]=255*w[3];if(this._minMaxDistance[0]=r,this._minMaxDistance[1]=C,!this._shadeTex){const i=new TextureDescriptor.R;i.wrapMode=enums.pF.CLAMP_TO_EDGE,i.width=parameters.Ci,i.height=1,this._shadeTex=new Texture.g(o,i)}this._shadeTex.updateData(0,0,0,parameters.Ci,1,this._texelData)}}class s{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(s){for(let e=0;e<s.length;e++)this.gradients[e]||(this.gradients[e]=new g),this.gradients[e].setHighlightOptions(s[e]);for(let t=s.length+1;t<this.gradients.length;t++)this.gradients[t].destroy();this.gradients.length=s.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const s=[];for(let e=0;e<this.gradients.length;e++){const i=this.gradients[e];s.push({activeReasons:t,activeGradient:i}),t<<=1}return s}}var featureTechniqueUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js");const l=new jsonMap.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function util_a(t){return l.toJSON(t)}function p(t){const{bandCount:e,attributeTable:i,colormap:n,pixelType:r}=t.raster.rasterInfo;return 1===e&&(null!=i||null!=n||"u8"===r||"s8"===r)}function c(t,e){return null==e?(t?.destroy(),null):("single"===t?.type&&Array.isArray(e)&&(t.destroy(),t=null),"multi"!==t?.type||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new s:new g),Array.isArray(e)?"multi"===t.type&&t.setHighlightOptions(e):"single"===t.type&&t.setHighlightOptions(e),t)}function util_g(t,e,i,n){const{painter:r,highlightGradient:s}=t,{highlight:l}=r.effects;if(!s)return;const a=t.passOptions,h=s.getReasonsWithGradients();for(let p=0;p<h.length;p++){const s={...t,passOptions:{type:"highlight",activeGradient:null!=n?h[n].activeGradient:h[p].activeGradient,activeReasons:h[p].activeReasons,stepType:"burn",highlightAll:e}};if(l.bind(s),i(s),p<h.length-1){let r=0;for(let t=p+1;t<h.length;t++)r|=h[t].activeReasons;i({...t,passOptions:{type:"highlight",activeGradient:null!=n?h[n].activeGradient:h[p].activeGradient,activeReasons:r,stepType:"clear",highlightAll:e}})}const a={...t,passOptions:{type:"highlight",activeGradient:null!=n?h[n].activeGradient:h[p].activeGradient,activeReasons:h[p].activeReasons,stepType:"draw",highlightAll:e}};r.setPipelineState((0,featureTechniqueUtils.Qu)(t)),r.updatePipelineState(t.context),l.draw(a),l.unbind()}t.passOptions=a}function util_u(i){if(!i)return[];let r=(0,guards.DU)(i)?[i]:Collection.A.isCollection(i)?i.toArray():Array.isArray(i)?i:[];return r=r?.filter(arrayUtils.Ru),0===(r?.length??0)?[]:r}},"./node_modules/@arcgis/core/views/2d/navigation/duration.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>r});var _core_has_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),_core_time_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/time.js");function r(){const r=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__.A)("mapview-essential-goto-duration");return null==r?r:(0,_core_time_js__WEBPACK_IMPORTED_MODULE_1__.l5)(r)}},"./node_modules/@arcgis/core/views/2d/support/Timeline.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>e});class e{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),(s=>s.includes("Brush"))(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(s){this._names.has(s)&&!this._names.get(s)&&(this._names.set(s,!0),performance.mark(`Esri.${s}.End`))}record(s){this._names.has(s)||(this._names.set(s,!0),performance.mark(`Esri.${s}`))}}},"./node_modules/@arcgis/core/views/2d/support/clippingUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>m,p:()=>n});var _geometry_support_contains_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/contains.js");const r=t=>parseFloat(t)/100;function n(t,e,o){const n="string"==typeof t.left?r(t.left)*e:t.left,m="string"==typeof t.right?r(t.right)*e:t.right,y="string"==typeof t.top?r(t.top)*o:t.top,a="string"==typeof t.bottom?r(t.bottom)*o:t.bottom,i=y;return{xmin:n,xmax:Math.max(e-m,n),ymin:i,ymax:Math.max(o-a,y)}}function m(r,m,y,a){switch(m.type){case"rect":{const{width:t,height:e}=r,{xmin:o,xmax:a,ymin:i,ymax:p}=n(m,t,e),{x:g,y:s}=y;return g>o&&g<a&&s>i&&s<p}case"path":return 0===m.path.length||!Array.isArray(m.path[0][0])||(0,_geometry_support_contains_js__WEBPACK_IMPORTED_MODULE_0__.t1)(m.path,[y.x,y.y]);case"geometry":return null==m.geometry||("polygon"===m.geometry.type?(0,_geometry_support_contains_js__WEBPACK_IMPORTED_MODULE_0__.m3)(m.geometry,a):(0,_geometry_support_contains_js__WEBPACK_IMPORTED_MODULE_0__.qz)(m.geometry,a))}}},"./node_modules/@arcgis/core/views/2d/support/highlightOptionsUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>t,o:()=>g});var _core_Collection_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_support_HighlightOptions_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/views/support/HighlightOptions.js");function t(i){if(!i.highlights)return null;const h=i.highlights.findIndex((i=>"default"===i.name));return-1===h?null:i.highlights.items[h]}function g(t,g){if(!t.highlights){if(!g)return;t.highlights=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_0__.A([new _support_HighlightOptions_js__WEBPACK_IMPORTED_MODULE_1__.A])}const n=t.highlights.findIndex((i=>"default"===i.name));g?t.highlights.items[n].assignFrom(g):(t.highlights.removeAt(n),0===t.highlights.length&&(t.highlights=null))}},"./node_modules/@arcgis/core/views/2d/viewpointUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$0:()=>wt,AU:()=>H,C:()=>Z,FT:()=>mt,GL:()=>ut,Hn:()=>ot,Ji:()=>xt,RG:()=>lt,UR:()=>jt,WK:()=>Gt,XR:()=>ht,Z7:()=>_,aA:()=>kt,b:()=>tt,b8:()=>rt,cp:()=>ft,hV:()=>yt,iB:()=>$,nr:()=>gt,qV:()=>Rt,ri:()=>at,s5:()=>pt,tj:()=>bt,vt:()=>Y});var _Viewpoint_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/Viewpoint.js"),_core_Collection_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/unitUtils.js"),_core_libs_gl_matrix_2_math_common_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/common.js"),_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat2d.js"),_core_libs_gl_matrix_2_factories_mat2df64_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat2df64.js"),_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js"),_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js"),_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),_geometry_Geometry_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@arcgis/core/geometry/Geometry.js"),_geometry_Point_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/normalizeUtils.js"),_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");const O=96,Q=39.37,T=180/Math.PI;function B(t){return t.wkid?t:t.spatialReference||_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__.A.WGS84}function D(t,e){return e.type?(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,e.x,e.y):(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.C)(t,e)}function W(t){return(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_3__.GA)(t)}function H(t,e,n=0){let o=t.width,a=t.height;if(0!==n){const e=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_2__.kU)(n),i=Math.abs(Math.cos(e)),c=Math.abs(Math.sin(e));o=t.width*i+t.height*c,a=t.width*c+t.height*i}const i=Math.max(1,e[0]),c=Math.max(1,e[1]);return Math.max(o/i,a/c)*function ct(t){return(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_15__.fn)(t)?W(t)*Q*O:1}(t.spatialReference)}async function J(t,r,n,o){let a,i;if(!t)return null;if(Array.isArray(t)&&!t.length)return null;if(_core_Collection_js__WEBPACK_IMPORTED_MODULE_1__.A.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&"object"==typeof t[0]){const e=t.every((t=>"attributes"in t)),a=t.some((t=>!t.geometry));let i=t;if(e&&a&&r&&r.allLayerViews){const e=new Map;for(const r of t){const t=r.layer,n=e.get(t)||[],o=r.attributes[t.objectIdField];null!=o&&n.push(o),e.set(t,n)}const n=[];e.forEach(((t,e)=>{const o=r.allLayerViews?.find((t=>t.layer.id===e.id));if(o&&"queryFeatures"in o){const r=e.createQuery();r.objectIds=t,r.returnGeometry=!0,n.push(o.queryFeatures(r))}}));const o=await Promise.all(n),a=[];for(const t of o)if(t&&t.features&&t.features.length)for(const e of t.features)null!=e.geometry&&a.push(e.geometry);i=a}for(const t of i)o=await J(t,r,n,o);return o}if(Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1])a=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_11__.default(t);else if(t instanceof _geometry_Geometry_js__WEBPACK_IMPORTED_MODULE_10__.A)a=t;else if("geometry"in t)if(t.geometry)a=t.geometry;else if(t.layer){const e=t.layer,n=r.allLayerViews?.find((t=>t.layer.id===e.id));if(n&&"queryFeatures"in n){const r=e.createQuery();r.objectIds=[t.attributes[e.objectIdField]],r.returnGeometry=!0;const o=await n.queryFeatures(r);a=o?.features?.[0]?.geometry}}if(null==a)return null;switch(a.type){case"point":i=new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_9__.default({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":i=(0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_14__.Hr)(a);break;default:i=a.extent}if(!i)return null;(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.isLoaded)()||(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.canProjectWithoutEngine)(i.spatialReference,n)||await(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.load)();const c=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.project)(i,n);if(!c)return null;if(o){const t=c.center,e=t.clone();e.x=(0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_14__.O7)(t.x,o.center.x,n),e.x!==t.x&&c.centerAt(e),o=o.union(c)}else o=c;return o}function X(t,e){const r=B(t);return(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_15__.aI)(r,e)||r.imageCoordinateSystem||e.imageCoordinateSystem?t:(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.project)(t,e)}async function Y(e,r){if(!e||!r)return new _Viewpoint_js__WEBPACK_IMPORTED_MODULE_0__.A({targetGeometry:new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_11__.default,scale:0,rotation:0});let n=r.spatialReference;const{constraints:o,padding:a,viewpoint:i,size:c}=r,s=[a?c[0]-a.left-a.right:c[0],a?c[1]-a.top-a.bottom:c[1]];let u=null;e instanceof _Viewpoint_js__WEBPACK_IMPORTED_MODULE_0__.A?u=e:e.viewpoint?u=e.viewpoint:e.target&&"esri.Viewpoint"===e.target.declaredClass&&(u=e.target);let l=null;u?.targetGeometry?l=u.targetGeometry:e instanceof _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_9__.default?l=e:e instanceof _geometry_Geometry_js__WEBPACK_IMPORTED_MODULE_10__.A?l=await J(e,r,n):e&&(l=await J(e.center,r,n)||await J(e.target,r,n)||await J(e,r,n)),!l&&i?.targetGeometry?l=i.targetGeometry:!l&&r.extent&&(l=r.extent),n||(n=B(r.spatialReference||r.extent||l)),(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.isLoaded)()||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_15__.aI)(l.spatialReference,n)||(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.canProjectWithoutEngine)(l.spatialReference,n)||await(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.load)();const f=X(l,n),m="center"in f?f.center:f;!1!==r.pickClosestTarget&&"point"===m.type&&"point"===i.targetGeometry?.type&&(m.x=(0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_14__.O7)(m.x,i.targetGeometry.x,m.spatialReference));let y=0;u?y=u.rotation:e.hasOwnProperty("rotation")?y=e.rotation:i&&(y=i.rotation);let p=0;p=null!=u?.targetGeometry&&"point"===u.targetGeometry.type?u.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&-1!==e.zoom&&o&&o.effectiveLODs?o.zoomToScale(e.zoom):Array.isArray(l)||"point"===l.type||"extent"===l.type&&0===l.width&&0===l.height?i.scale:H(X(l.extent,n),s,y);const g=function K(t){if(t&&(!Array.isArray(t)||"number"!=typeof t[0])&&("object"==typeof t||Array.isArray(t)&&"object"==typeof t[0])){if("layer"in t&&null!=t.layer?.minScale&&null!=t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every((t=>"layer"in t))){let e=0,r=0;for(const n of t){const t=n.layer;t?.minScale&&t.maxScale&&(e=t.minScale<e?t.minScale:e,r=t.maxScale>r?t.maxScale:r)}return e&&r?{min:e,max:r}:null}}}(e.target??e);g&&(g.min&&g.min<p?p=g.min:g.max&&g.max>p&&(p=g.max));let x=new _Viewpoint_js__WEBPACK_IMPORTED_MODULE_0__.A({targetGeometry:m,scale:p,rotation:y});return o&&(x=o.fit(x),o.constrainByGeometry(x),o.rotationEnabled||(x.rotation=i.rotation)),x}function Z(t,e){const r=t.targetGeometry,n=e.targetGeometry;return r.x=n.x,r.y=n.y,r.spatialReference=n.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function $(t,e,r){return r?(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,.5*(e[0]-r.right+r.left),.5*(e[1]-r.bottom+r.top)):(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hs)(t,e,.5)}const _=function(){const t=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)();return function(e,r,n){const o=r.targetGeometry;D(t,o);const a=.5*ot(r);return e.xmin=t[0]-a*n[0],e.ymin=t[1]-a*n[1],e.xmax=t[0]+a*n[0],e.ymax=t[1]+a*n[1],e.spatialReference=o.spatialReference,e}}();function tt(t,e,r,n,o){return xt(t,e,r.center),t.scale=H(r,n),o?.constraints?.constrain(t),t}const rt=function(){const t=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)();return function(e,r,n){return(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.jb)(e,function st(t,e){return(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hs)(t,e,.5)}(e,r),$(t,r,n))}}(),nt=function(){const t=(0,_core_libs_gl_matrix_2_factories_mat2df64_js__WEBPACK_IMPORTED_MODULE_6__.vt)(),e=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)();return function(r,n,o,s){const u=ot(n),l=it(n);return(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(e,u,u),(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_5__.CV)(t,e),(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_5__.e$)(t,t,l),(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_5__.Tl)(t,t,rt(e,o,s)),(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_5__.Tl)(t,t,[0,s.top-s.bottom]),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(r,t[4],t[5])}}();function ot(t){return t.scale*at(t.targetGeometry?.spatialReference)}function at(t){return(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_15__.fn)(t)?1/(W(t)*Q*O):1}function it(t){return(0,_core_libs_gl_matrix_2_math_common_js__WEBPACK_IMPORTED_MODULE_4__.DF)(t.rotation)||0}const ut=function(){const t=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)(),e=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)(),r=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)();return function(n,o,a,l,f,m){return(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.ze)(t,o),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hs)(e,a,.5*m),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(r,1/l*m,-1/l*m),(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_5__.kN)(n,e),f&&(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_5__.e$)(n,n,f),(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_5__.hs)(n,n,r),(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_5__.Tl)(n,n,t),n}}(),lt=function(){const t=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)();return function(e,r,n,o){const a=ot(r),i=it(r);return D(t,r.targetGeometry),ut(e,t,n,a,i,o)}}(),ft=function(){const t=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)();return function(e,r,n,o){const a=ot(r);return D(t,r.targetGeometry),ut(e,t,n,a,0,o)}}();function mt(t){const e=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_15__.Vp)(t);return e?e.valid[1]-e.valid[0]:0}function yt(t,e){return Math.round(mt(t)/e)}const pt=function(){const t=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)(),e=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)(),r=[0,0,0];return function(n,o,a){(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.Re)(t,n,o),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.S8)(t,t),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.Re)(e,n,a),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.S8)(e,e),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.$A)(r,t,e);let i=Math.acos((0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.Om)(t,e)/((0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.Bw)(t)*(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.Bw)(e)))*T;return r[2]<0&&(i=-i),isNaN(i)&&(i=0),i}}(),gt=function(){const t=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)();return function(e,r,n,o){const a=e.targetGeometry;return Z(e,r),nt(t,r,n,o),a.x+=t[0],a.y+=t[1],e}}(),xt=function(t,e,r){Z(t,e);const n=t.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,t},ht=function(){const t=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)();return function(e,r,n,o,a){a||(a="center"),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.jb)(t,n,o),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hs)(t,t,.5);const i=t[0],c=t[1];switch(a){case"center":(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,0,0);break;case"left":(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,-i,0);break;case"top":(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,0,c);break;case"right":(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,i,0);break;case"bottom":(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,0,-c);break;case"top-left":(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,-i,c);break;case"bottom-left":(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,-i,-c);break;case"top-right":(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,i,c);break;case"bottom-right":(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,i,-c)}return kt(e,r,t),e}}();function bt(t,e,r){return Z(t,e),t.rotation+=r,t}function wt(t,e,r){return Z(t,e),t.rotation=r,t}const dt=function(){const t=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)();return function(e,r,n,o,a){return Z(e,r),isNaN(n)||0===n||(At(t,o,r,a),e.scale=r.scale*n,St(t,t,e,a),kt(e,e,(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,t[0]-o[0],o[1]-t[1]))),e}}();function jt(t,e,r){return Z(t,e),t.scale=r,t}const Gt=function(){const t=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)();return function(e,r,n,o,a,i){return Z(e,r),isNaN(n)||0===n||(At(t,a,r,i),e.scale=r.scale*n,e.rotation+=o,St(t,t,e,i),kt(e,e,(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.hZ)(t,t[0]-a[0],a[1]-t[1]))),e}}(),Rt=function(){const t=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)(),e=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)();return function(r,n,o,a,i,c,s){return rt(e,c,s),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.WQ)(t,i,e),a?Gt(r,n,o,a,t,c):dt(r,n,o,t,c)}}(),At=function(){const t=(0,_core_libs_gl_matrix_2_factories_mat2df64_js__WEBPACK_IMPORTED_MODULE_6__.vt)();return function(e,r,n,o){return(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.l0)(e,r,function et(t,e,r,n){return lt(t,e,r,n),(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_5__.B8)(t,t)}(t,n,o,1))}}(),St=function(){const t=(0,_core_libs_gl_matrix_2_factories_mat2df64_js__WEBPACK_IMPORTED_MODULE_6__.vt)();return function(e,r,n,o){return(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.l0)(e,r,lt(t,n,o,1))}}(),kt=function(){const t=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.vt)(),e=(0,_core_libs_gl_matrix_2_factories_mat2df64_js__WEBPACK_IMPORTED_MODULE_6__.vt)();return function(r,n,o){Z(r,n);const a=ot(n),i=r.targetGeometry;return(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_5__.$0)(e,it(n)),(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_5__.hs)(e,e,(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_8__.fA)(a,a)),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_7__.l0)(t,o,e),i.x+=t[0],i.y+=t[1],r}}()},"./node_modules/@arcgis/core/views/MapView.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>MapView_p});var tslib_es6=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),property=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),has=__webpack_require__("./node_modules/@arcgis/core/core/has.js"),Logger=__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),subclass=(__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),Viewpoint=__webpack_require__("./node_modules/@arcgis/core/Viewpoint.js"),Collection=__webpack_require__("./node_modules/@arcgis/core/core/Collection.js"),CollectionFlattener=__webpack_require__("./node_modules/@arcgis/core/core/CollectionFlattener.js"),core_Error=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),maybe=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),reactiveUtils=__webpack_require__("./node_modules/@arcgis/core/core/reactiveUtils.js"),workers=__webpack_require__("./node_modules/@arcgis/core/core/workers/workers.js"),cast=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/cast.js"),ensureType=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/ensureType.js"),Polygon=__webpack_require__("./node_modules/@arcgis/core/geometry/Polygon.js"),projection=__webpack_require__("./node_modules/@arcgis/core/geometry/projection.js"),TileInfo=__webpack_require__("./node_modules/@arcgis/core/layers/support/TileInfo.js"),ArrayPool=__webpack_require__("./node_modules/@arcgis/core/core/ArrayPool.js");const l={widthBreakpoint:{getValue(e){const i=e.viewSize[0],s=e.breakpoints,a=this.values;return i<=s.xsmall?a.xsmall:i<=s.small?a.small:i<=s.medium?a.medium:i<=s.large?a.large:a.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const i=e.viewSize[1],s=e.breakpoints,a=this.values;return i<=s.xsmall?a.xsmall:i<=s.small?a.small:i<=s.medium?a.medium:i<=s.large?a.large:a.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const i=e.viewSize,s=i[0],a=i[1],t=this.values;return a>=s?t.portrait:t.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},h={xsmall:544,small:768,medium:992,large:1200};function m(e,i){return i?l[e].valueToClassName[i].split(" "):[]}const o=o=>{let g=class extends o{constructor(...e){super(...e),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=h}initialize(){this.addHandles((0,reactiveUtils.watch)((()=>[this.breakpoints,this.size]),(()=>this._updateClassNames()),reactiveUtils.Vh))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(e){if(e!==this._get("breakpoints")){if(!function n(e){const i=e;return i&&i.xsmall<i.small&&i.small<i.medium&&i.medium<i.large}(e)){const i=JSON.stringify(h,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),e=h}this._set("breakpoints",{...e})}}_updateClassNames(){if(!this.container)return;const e=ArrayPool.A.acquire(),s=ArrayPool.A.acquire();let a,t=!1;for(a in l){const i=this[a],r=l[a].getValue({viewSize:this.size,breakpoints:this.breakpoints});i!==r&&(t=!0,this[a]=r,m(a,i).forEach((e=>s.push(e))),m(a,r).forEach((i=>e.push(i))))}t&&(this._applyClassNameChanges(e,s),ArrayPool.A.release(e),ArrayPool.A.release(s))}_applyClassNameChanges(e,i){const s=this.container;s&&(i.forEach((e=>s.classList.remove(e))),e.forEach((e=>s.classList.add(e))))}_removeActiveClassNames(){const e=this.container;if(!e)return;let i;for(i in l)m(i,this[i]).forEach((i=>e.classList.remove(i)))}};return(0,tslib_es6._)([(0,property.MZ)()],g.prototype,"breakpoints",null),(0,tslib_es6._)([(0,property.MZ)()],g.prototype,"orientation",void 0),(0,tslib_es6._)([(0,property.MZ)()],g.prototype,"widthBreakpoint",void 0),(0,tslib_es6._)([(0,property.MZ)()],g.prototype,"heightBreakpoint",void 0),g=(0,tslib_es6._)([(0,subclass.$)("esri.views.BreakpointsOwner")],g),g};var domUtils=__webpack_require__("./node_modules/@arcgis/core/core/domUtils.js"),events=__webpack_require__("./node_modules/@arcgis/core/core/events.js"),handleUtils=__webpack_require__("./node_modules/@arcgis/core/core/handleUtils.js"),scheduling=__webpack_require__("./node_modules/@arcgis/core/core/scheduling.js"),Accessor=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),UpdatingHandles=__webpack_require__("./node_modules/@arcgis/core/core/support/UpdatingHandles.js"),projector=(__webpack_require__("./node_modules/@arcgis/core/libs/maquette/projection.js"),__webpack_require__("./node_modules/@arcgis/core/libs/maquette/projector.js"));let a=class extends Accessor.A{constructor(){super(...arguments),this.items=new Collection.A,this._watchUpdatingTracking=new UpdatingHandles.U,this._callbacks=new Map,this._projector=(0,projector.F)(),this._hiddenProjector=(0,projector.F)()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange((()=>this.items),(t=>{for(const e of t.added){const t=()=>e.render();this._callbacks.set(e,t),this._projector.append(this.surface,t)}for(const e of t.removed){const t=this._projector.detach(this._callbacks.get(e));this.surface.removeChild(t.domNode),this._callbacks.delete(e)}}))}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach((t=>this._projector.detach(t))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const e=this._hiddenSurface,o=this._hiddenProjector;let r;const s=()=>(r=t.render(),r);o.append(e,s),o.renderNow();const i={left:0,top:0,right:0,bottom:0};if(r?.domNode){const t=r.domNode.getBoundingClientRect();i.left=t.left,i.top=t.top,i.right=t.right,i.bottom=t.bottom}for(o.detach(s);e.firstChild;)e.removeChild(e.firstChild);return i}overlaps(t,e){const o=this.computeBoundingRect(t),r=this.computeBoundingRect(e);return Math.max(o.left,r.left)<=Math.min(o.right,r.right)&&Math.max(o.top,r.top)<=Math.min(o.bottom,r.bottom)}get hasVisibleItems(){return this.items.some((t=>t.visible))}async prepare(){await document.fonts.load(this._fontString()).catch((()=>{}))}renderCanvas(t,e){const o=!!e?.disableDecorations;if(!this.items.some((t=>t.visible&&!(o&&t.isDecoration))))return;const r=t.getContext("2d");r.save(),r.font=this._fontString(),this.items.forEach((t=>{o&&t.isDecoration||(r.save(),t.renderCanvas(r),r.restore())})),r.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],a.prototype,"surface",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],a.prototype,"items",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],a.prototype,"needsRender",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],a.prototype,"_watchUpdatingTracking",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],a.prototype,"updating",null),a=(0,tslib_es6._)([(0,subclass.$)("esri.views.overlay.ViewOverlay")],a);const c=a,p=[0,0];function DOMContainer_m(e){const t=(e.ownerDocument||window.document).defaultView,s=e.getBoundingClientRect();return p[0]=s.left+(t?.pageXOffset??0),p[1]=s.top+(t?.pageYOffset??0),p}function f(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}const g=16,v=750,C=p=>{let C=class extends p{constructor(...e){super(...e),this._freqInfo={freq:g,time:v},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([(0,reactiveUtils.watch)((()=>this.cursor),(e=>{const{surface:t}=this;t&&t.setAttribute("data-cursor",e)})),(0,reactiveUtils.watch)((()=>this.navigating),(e=>{const{surface:t}=this;t&&t.setAttribute("data-navigating",e.toString())}))])}initialize(){this.addHandles([(0,reactiveUtils.watch)((()=>this.ui),((e,t)=>this._handleUIChange(e,t)),reactiveUtils.Vh),this.on("focus",(()=>this.notifyChange("focused"))),this.on("blur",(()=>this.notifyChange("focused")))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(e){const i=this._get("container"),r=(0,domUtils.$)(e);if(r||"string"!=typeof e||Logger.A.getLogger(this).error("#container",`element with id '${e}' not found`),i===r)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(f(this.root),this._set("root",null)),this.userContent&&((0,domUtils.y)(this.userContent,i),f(this.userContent),this._set("userContent",null))),!r)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);r.classList.add("esri-view");const h=document.createElement("div");h.className="esri-view-user-storage",(0,domUtils.y)(r,h),r.appendChild(h),this._set("userContent",h);const l=document.createElement("div");l.className="esri-view-root",r.insertBefore(l,r.firstChild),this._set("root",l);const u=document.createElement("div");u.className="esri-view-surface",u.setAttribute("role","application"),u.tabIndex=0,l.appendChild(u),this._set("surface",u);const p=new c;l.appendChild(p.surface),this._set("overlay",p),this.addHandles((0,reactiveUtils.watch)((()=>p.needsRender),(e=>{e&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=(0,scheduling.mg)({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=(0,maybe.xt)(this._overlayRenderTaskHandle)}))),this.forceDOMReadyCycle(),this._set("container",r),this._startMeasuring()}get focused(){const e=document.activeElement===this.surface;return document.hasFocus()&&e}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(e,t,s){const i=this.position;return e-=i?i[0]:0,t-=i?i[1]:0,s?(s[0]=e,s[1]=t):s=[e,t],s}containerToPage(e,t,s){const i=this.position;return e+=i?i[0]:0,t+=i?i[1]:0,s?(s[0]=e,s[1]=t):s=[e,t],s}_handleUIChange(e,t){this.removeHandles("ui"),t&&t!==e&&t.destroy(),e&&(e.view=this,this.addHandles((0,reactiveUtils.watch)((()=>this.root),(t=>{e.container=t?function y(e){const t=document.createElement("div");return e.appendChild(t),t}(t):null}),reactiveUtils.Vh),"ui")),this._set("ui",e)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const e=this._freqInfo;e.freq=g,e.time=v;const t=(0,scheduling.mg)({prepare:e=>{const s=this._measure(),i=this._freqInfo;if(i.time+=e.deltaTime,s&&(i.freq=g,this._get("resizing")||this._set("resizing",!0)),i.time<i.freq)return;i.time=0;const r=this._position();i.freq=r||s?g:Math.min(v,2*i.freq),!s&&i.freq>=512&&(t.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver((s=>{e.freq=g,e.time=v,t.resume()}));null!=this.container&&s.observe(this.container);const o=(0,handleUtils.hA)((()=>s.disconnect()));this.addHandles([(0,events.on)(window,"resize",(()=>{e.freq=g,e.time=v,t.resume()})),o,t],"measuring"),this._measure(),this._position()}_measure(){const e=this.container,t=e?e.clientWidth:0,s=e?e.clientHeight:0;if(0===t||0===s)return this.suspended||this._set("suspended",!0),!1;const i=this.width,r=this.height;return t===i&&s===r?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",t),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:i,oldHeight:r,width:t,height:s}),!0)}_position(){const e=this.container,t=this.position,s=e&&DOMContainer_m(e);return!(!s||t&&s[0]===t[0]&&s[1]===t[1]||(this._set("position",[s[0],s[1]]),0))}forceDOMReadyCycle(){}};return(0,tslib_es6._)([(0,property.MZ)()],C.prototype,"container",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],C.prototype,"focused",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],C.prototype,"height",void 0),(0,tslib_es6._)([(0,property.MZ)()],C.prototype,"messagesCommon",void 0),(0,tslib_es6._)([(0,property.MZ)({type:c})],C.prototype,"overlay",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],C.prototype,"position",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],C.prototype,"resizing",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],C.prototype,"root",void 0),(0,tslib_es6._)([(0,property.MZ)({value:null,readOnly:!0})],C.prototype,"size",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],C.prototype,"surface",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],C.prototype,"suspended",void 0),(0,tslib_es6._)([(0,property.MZ)({nonNullable:!0})],C.prototype,"ui",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],C.prototype,"userContent",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],C.prototype,"width",void 0),(0,tslib_es6._)([(0,property.MZ)()],C.prototype,"widthBreakpoint",void 0),C=(0,tslib_es6._)([(0,subclass.$)("esri.views.DOMContainer")],C),C};var asyncUtils=__webpack_require__("./node_modules/@arcgis/core/core/asyncUtils.js"),promiseUtils=__webpack_require__("./node_modules/@arcgis/core/core/promiseUtils.js"),InputManager=__webpack_require__("./node_modules/@arcgis/core/views/input/InputManager.js");function PopupView_m(p){return null!=p&&"open"in p&&"declaredClass"in p}function PopupView_f(p){return null!=p&&"declaredClass"in p&&"dockOptions"in p}const PopupView_w=a=>{let w=class extends a{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([(0,reactiveUtils.watch)((()=>[this.ui,this.popup]),(([p,e],t)=>{const o="popup";if(t){const[p,e]=t;p&&PopupView_m(e)&&(e.view=null,PopupView_f(e)&&p.remove(e,o))}p&&PopupView_m(e)&&(e.view=this,PopupView_f(e)&&p.add(e,{key:o,position:"manual",internal:!0}))}),reactiveUtils.Vh),this.on("click",(p=>{this.popup&&this.popupEnabled&&("mouse"!==p.pointerType||0===p.button)&&(PopupView_m(this.popup)?this.popup.viewModel.handleViewClick(p):p.async((async()=>{await this.setupPopup(),PopupView_m(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(p)})))}),InputManager.o.WIDGET)]),(0,reactiveUtils.C_)((()=>this.ready&&this.popupEnabled&&!this.updating)).then((()=>{Promise.all([__webpack_require__.e(2669),__webpack_require__.e(9299),__webpack_require__.e(4742)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/widgets/Popup.js"))}))}destroy(){this.destroyed||this.closePopup()}async openPopup(p){if(PopupView_m(this.popup))return this.popup.open(p);try{if(await this.setupPopup(),!this.popup)return void Logger.A.getLogger(this).error(new core_Error.A("view:null-popup","Popup is null and can't be opened"));this.popup.open(p)}catch{}}closePopup(){this._popupSetupTask?.abort(),PopupView_m(this.popup)&&this.popup.close()}async fetchPopupFeatures(p,e){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(p,e),e)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!PopupView_m(this.popup))return this._popupSetupTask=(0,asyncUtils.UT)((async p=>{const{default:e}=await Promise.all([__webpack_require__.e(2669),__webpack_require__.e(9299),__webpack_require__.e(4742)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/widgets/Popup.js"));if((0,promiseUtils.Te)(p),!this.popup||PopupView_m(this.popup))return;const t=this.popup;delete t.open,delete t.close,this.popup=new e(t)})),this._popupSetupTask.promise}async _popupHitsToFeatures({location:p,hits:e},t){const o=[],i=[];let a=!1;const u=(0,promiseUtils.YL)(t,(0,has.A)("popup-view-fetch-timeout")??P),c=p=>{const e=i.at(-1);return e&&e.layerView===p&&!a?e:(p=>{const e=new PopupView_y(p);return i.push(e),o.push(e.promise),e})(p)};for(const s of e)"graphic"in s?(c(s.layerView).graphics.push(s.graphic),a=!1):(o.push(s.layerView.fetchPopupFeaturesAtLocation(s.mapPoint,u)),a=!0);i.map((p=>p.resolve(u)));const h=(0,promiseUtils.nA)(o).then((p=>p.filter((p=>!!p)).flat()));return{pendingFeatures:o,allGraphicsPromise:h,location:p}}async _getPopupHits(p,e){const{hits:t,location:o}=await this.popupHitTest(p);(0,promiseUtils.Te)(e);const s=[];for(const i of t)if("graphic"in i){if(this._isValidPopupGraphic(i.graphic,e)){const p=this._isValidPopupGraphicsLayerView(i.layerView)?i.layerView:void 0;s.push({graphic:i.graphic,layerView:p})}}else this._isValidPopupLocationLayerView(i.layerView)&&s.push({mapPoint:i.mapPoint,layerView:i.layerView});return{hits:s,location:o}}_isValidPopupGraphic(p,e){return p&&!!p.getEffectivePopupTemplate(e?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(p){return!p||(!("layer"in p)||!p.suspended)&&"fetchPopupFeaturesFromGraphics"in p}_isValidPopupLocationLayerView(p){return(!("layer"in p)||!p.suspended)&&"fetchPopupFeaturesAtLocation"in p}};return(0,tslib_es6._)([(0,property.MZ)()],w.prototype,"popup",void 0),(0,tslib_es6._)([(0,property.MZ)()],w.prototype,"popupEnabled",void 0),w=(0,tslib_es6._)([(0,subclass.$)("esri.views.PopupView")],w),w};class PopupView_y{constructor(p){this.layerView=p,this._resolver=(0,promiseUtils.Tw)(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(p){const{layerView:e,graphics:t,_resolver:o}=this;if(!e)return o.resolve(t),o.promise;let i;return e.fetchPopupFeaturesFromGraphics(t,p).catch((p=>(i=p,null))).then((p=>{p?o.resolve(p):o.reject(i)})),o.promise}}const P=5e3;var core_Map=__webpack_require__("./node_modules/@arcgis/core/Map.js"),collectionUtils=__webpack_require__("./node_modules/@arcgis/core/core/collectionUtils.js"),Evented=__webpack_require__("./node_modules/@arcgis/core/core/Evented.js"),Handles=__webpack_require__("./node_modules/@arcgis/core/core/Handles.js"),Loadable=__webpack_require__("./node_modules/@arcgis/core/core/Loadable.js"),core_Promise=__webpack_require__("./node_modules/@arcgis/core/core/Promise.js"),OwningCollection=__webpack_require__("./node_modules/@arcgis/core/core/support/OwningCollection.js"),Extent=__webpack_require__("./node_modules/@arcgis/core/geometry/Extent.js"),HeightModelInfo=__webpack_require__("./node_modules/@arcgis/core/geometry/HeightModelInfo.js"),SpatialReference=__webpack_require__("./node_modules/@arcgis/core/geometry/SpatialReference.js"),spatialReferenceUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");let t=class extends OwningCollection.X{constructor(e){super(e),this.addHandles(this.on("before-add",(e=>{null!=e.item&&e.item.parent===this.owner&&(Logger.A.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),e.preventDefault())})))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};t=(0,tslib_es6._)([(0,subclass.$)("esri.support.AnalysesCollection")],t);var GraphicsCollection=__webpack_require__("./node_modules/@arcgis/core/support/GraphicsCollection.js"),constants=__webpack_require__("./node_modules/@arcgis/core/time/constants.js"),TimeExtent=__webpack_require__("./node_modules/@arcgis/core/time/TimeExtent.js"),timeZoneUtils=__webpack_require__("./node_modules/@arcgis/core/time/timeZoneUtils.js");let BasemapView_n=class extends Accessor.A{constructor(e){super(e),this.view=null,this.baseLayerViews=new Collection.A,this.referenceLayerViews=new Collection.A,this._loadingHandle=(0,reactiveUtils.watch)((()=>this.view?.map?.basemap),(e=>{e&&e.load().catch((()=>{}))}),reactiveUtils.Vh)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return this.view?.suspended??!0}get updating(){if(this.view?.suspended)return!1;const e=this.view?.map?.basemap;return!!e?.loaded&&(this.baseLayerViews.some((e=>e.updating))||this.referenceLayerViews.some((e=>e.updating)))}};(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],BasemapView_n.prototype,"view",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],BasemapView_n.prototype,"baseLayerViews",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],BasemapView_n.prototype,"referenceLayerViews",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],BasemapView_n.prototype,"suspended",null),(0,tslib_es6._)([(0,property.MZ)({type:Boolean,readOnly:!0})],BasemapView_n.prototype,"updating",null),BasemapView_n=(0,tslib_es6._)([(0,subclass.$)("esri.views.BasemapView")],BasemapView_n);const BasemapView_p=BasemapView_n;var MapUtils=__webpack_require__("./node_modules/@arcgis/core/core/MapUtils.js"),get=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/get.js"),Layer=__webpack_require__("./node_modules/@arcgis/core/layers/Layer.js"),support_collectionUtils=__webpack_require__("./node_modules/@arcgis/core/support/collectionUtils.js");function L(e){return null!=e&&"object"==typeof e&&"layerViews"in e}class M{constructor(e,r,t){this.layer=e,this.view=r,this.layerViewImporter=t,this._controller=new AbortController,this._deferred=(0,promiseUtils.Tw)(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,(0,promiseUtils.u7)(this._controller.signal,(()=>{const r=new core_Error.A("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(r)}))}tryRecycle(e){if(!this.done||!this.layerView||!function LayerViewManager_v(e){return"tryRecycleWith"in e}(this.layerView))return null;const r=this.layer.type,i=this._controller.signal;for(let t=0;t<e.length;t++){const s=e[t];if(s.type!==r)continue;const a=this.layerView.tryRecycleWith(s,{signal:i});if(a){e.splice(t,1),this.layer=s;const r=this.layerView,i=r.view;return this.promise=Promise.race([a.then((()=>((0,promiseUtils.Te)(this._controller.signal),s.emit("layerview-destroy",{view:i,layerView:r}),i.emit("layerview-destroy",{view:i,layerView:r}),s.emit("layerview-create",{view:i,layerView:r}),i.emit("layerview-create",{view:i,layerView:r}),r))),new Promise(((e,r)=>(0,promiseUtils.u7)(this._controller.signal,(()=>r((0,promiseUtils.NK)())))))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{layer:r,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:r,view:t}=this;this._map=t.map;try{let o,l;if(await r.load({signal:e}),r.prefetchResources&&await r.prefetchResources({signal:e}),function LayerViewManager_C(e){return e.createLayerView!==Layer.A.prototype.createLayerView}(r))o=await r.createLayerView(t,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new core_Error.A("layer:view-not-supported","No layerview implementation was found");const s=await this.layerViewImporter.importLayerView(r);(0,promiseUtils.Te)(e),o="default"in s?new s.default({layer:r,view:t}):new s({layer:r,view:t})}const n=()=>{l=(0,maybe.xt)(l),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};l=(0,promiseUtils.u7)(e,n),(0,promiseUtils.Te)(e);try{await o.when()}catch(s){throw n(),s}const c=this._map?.allLayers?.includes(r);if(!c)return n(),void this._deferred.reject(new core_Error.A("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:t,layerView:o}),t.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(s){r.emit("layerview-create-error",{view:t,error:s}),t.emit("layerview-create-error",{layer:r,error:s}),this.done=!0,this._deferred.reject(new core_Error.A("layerview:create-error","layerview creation failed",{layer:r,error:s}))}}}let I=class extends Accessor.A{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new UpdatingHandles.U,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const e=this.view.map?.allLayers;if(e)for(const r of e)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(null==this._workPromise&&(this._workPromise=(0,promiseUtils.Tw)(),this._workPromise.promise.catch((()=>{}))),this.removeHandles("reschedule"),this.addHandles((0,scheduling._)(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const e=this.view.map;if(this._map!==e&&(this.clear(),this._map=e),null==this._workPromise)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,i=[],t=this.view.ready,s=e=>{if(null!=e)for(const a of e)if(a){r.add(a);const e=this._layerLayerViewInfoMap.get(a);e&&t?e.start():e||this._recyclingInfoMap.has(a)||i.push(a),"layers"in a&&a.layers&&s(a.layers)}};for(const o of this._rootCollectionNames)s((0,get.Jt)(this,o));for(const[o,l]of this._layerLayerViewInfoMap)if(!r.has(o)){this._layerLayerViewInfoMap.delete(l.layer);const e=l.tryRecycle(i);e?(this.notifyChange("updating"),this._recyclingInfoMap.set(l.layer,l),e.then((()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),this._layerLayerViewInfoMap.set(l.layer,l),this._reschedule()})).catch((()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),l.destroy(),this._reschedule()}))):l.destroy()}for(const[o,l]of this._recyclingInfoMap)r.has(o)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),l.destroy());for(const o of i)this._createLayerView(o);this._refreshCollections();const a=[e?.ground?.layers,e?.basemap?.baseLayers,e?.basemap?.referenceLayers,e?.layers].filter((e=>!!e));r.forEach((e=>"layers"in e&&a.push(e.layers))),this.addHandles(a.map((e=>this._watchUpdatingTracking.addOnCollectionChange((()=>e),this._reschedule))),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([(0,reactiveUtils.on)((()=>this.view?.map?.allLayers),"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),(0,reactiveUtils.watch)((()=>{const e=this.view,r=e?.map;return[r?.basemap,r?.ground,r?.layers,e?.ready]}),(()=>this._reschedule()),reactiveUtils.pc)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),(0,support_collectionUtils.X)(this._recyclingInfoMap),(0,support_collectionUtils.X)(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,null!=this._workPromise&&(this._workPromise.reject((0,promiseUtils.NK)()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return null!=this._workPromise||this._watchUpdatingTracking.updating||(0,MapUtils.Bs)(this._layerLayerViewInfoMap,(e=>!e.done))||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++e;return e}clear(){this.destroyed||((0,support_collectionUtils.X)(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new core_Error.A("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,r){this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(e);if(!i?.done)return!0;const t=i.layerView;return!(!t||!r||t.parent===r)||!!(i.done&&t&&"layers"in e&&e.layers?.length)&&e.layers.some((e=>this.isCreatingLayerViewsForLayer(e,t)))}_refreshCollections(){for(const[e,r]of this._layersToLayerViews)this._populateLayerViewsOwners((0,get.Jt)(this,e),(0,get.Jt)(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,r,i){if(!e||!r)return void(r&&r.removeAll());let t=0;for(const s of e){const e=this._layerLayerViewInfoMap.get(s);if(!e?.layerView)continue;const a=e.layerView;a.layer=s,a.parent=i,r.at(t)!==a&&r.splice(t,0,a),"layers"in s&&L(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),t+=1}t<r.length&&r.splice(t,r.length)}_createLayerView(e){e.load().catch((()=>{})),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const r=new M(e,this.view,this.layerViewImporter);r.promise.then((()=>this._refreshCollections()),(r=>{r&&((0,promiseUtils.zf)(r)||"cancelled:layerview-create"===r.name)||Logger.A.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()})),this._layerLayerViewInfoMap.set(e,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};(0,tslib_es6._)([(0,property.MZ)()],I.prototype,"_workPromise",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],I.prototype,"_watchUpdatingTracking",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],I.prototype,"_layersToLayerViews",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],I.prototype,"_rootCollectionNames",null),(0,tslib_es6._)([(0,property.MZ)()],I.prototype,"layerViewImporter",void 0),(0,tslib_es6._)([(0,property.MZ)()],I.prototype,"supportsGround",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],I.prototype,"updating",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],I.prototype,"updatingRemaining",null),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],I.prototype,"view",void 0),I=(0,tslib_es6._)([(0,subclass.$)("esri.views.LayerViewManager")],I);const j=I;var screenUtils=__webpack_require__("./node_modules/@arcgis/core/core/screenUtils.js");let i=class extends Accessor.A{constructor(o){super(o),this.factor=1.5,this.offset=(0,screenUtils.tc)(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};(0,tslib_es6._)([(0,property.MZ)({type:Number})],i.prototype,"factor",void 0),(0,tslib_es6._)([(0,property.MZ)({nonNullable:!0})],i.prototype,"offset",void 0),(0,tslib_es6._)([(0,property.MZ)()],i.prototype,"position",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,range:{min:0}})],i.prototype,"size",void 0),(0,tslib_es6._)([(0,property.MZ)()],i.prototype,"maskUrl",void 0),(0,tslib_es6._)([(0,property.MZ)()],i.prototype,"maskEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)()],i.prototype,"overlayUrl",void 0),(0,tslib_es6._)([(0,property.MZ)()],i.prototype,"overlayEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],i.prototype,"version",null),(0,tslib_es6._)([(0,property.MZ)({type:Boolean})],i.prototype,"visible",void 0),i=(0,tslib_es6._)([(0,subclass.$)("esri.views.Magnifier")],i);const Magnifier_p=i;var arrayUtils=__webpack_require__("./node_modules/@arcgis/core/core/arrayUtils.js"),ReactiveMap=__webpack_require__("./node_modules/@arcgis/core/core/ReactiveMap.js"),SetUtils=__webpack_require__("./node_modules/@arcgis/core/core/SetUtils.js"),layerUtils=__webpack_require__("./node_modules/@arcgis/core/layers/support/layerUtils.js"),Query=__webpack_require__("./node_modules/@arcgis/core/rest/support/Query.js");function selectionUtils_e(e){return!!(null!=e&&"object"==typeof e&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let SelectionManager_y=class extends Evented.A.EventedAccessor{constructor(e){super(e),this._selectionMap=new ReactiveMap.A,this._sources=new Collection.A,this._trashCan=[],this._layerEditHandles=new Collection.A,this._vizTaskId=0,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([(0,reactiveUtils.watch)((()=>[this.view,this.showHighlight]),(()=>this._refreshVisualization())),(0,reactiveUtils.on)((()=>this.sources),"change",(e=>{const t=this._selectionMap;for(const s of e.removed)t.delete(s);this._refreshListeners(),this._refreshVisualization()}),{onListenerAdd:()=>this._refreshListeners()})]);const e=new Collection.A;this.view.when().then((()=>{this.view.map&&(this.view.map.allLayers.flatten((e=>"sublayers"in e&&e.sublayers?e.sublayers:null)).forEach((t=>{(selectionUtils_e(t)&&!(0,layerUtils.F2)(t)||(0,layerUtils.Sv)(t))&&e.add(t)})),this.sources=e)}))}destroy(){this._layerEditHandles.drain(maybe.xt)}get selections(){return Array.from(this._selectionMap.entries()).map((e=>{const[t,s]=e;return{layer:t,selection:[...s.selection]}}))}get count(){let e=0;for(const t of this._selectionMap.values())e+=t.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){(0,collectionUtils.V)(e,this._sources)}async getSelectedFeatures(e,t={},s="layerView"){const{view:i,selections:o}=this,n=(void 0!==e?o.filter((t=>e.includes(t.layer))):o).filter((e=>e.selection.length>0)).map((async e=>{const{layer:o,selection:n}=e,l=(0,layerUtils.Sv)(o)?o.parent:o;if(null==l||!S(l))return null;if("layer"===s)return SelectionManager_M(l,n,t);if(SelectionManager_v(l))return null;const r=await i.whenLayerView(l).catch((()=>null));return r?SelectionManager_M(r,n,t):null}));return(await Promise.all(n)).filter((e=>null!=e))}updateSelection(e){const s=new Map;for(const[t,n]of this._selectionMap)s.set(t,[...n.selection]);let i=!1;const o=e.current.concat(e.added);for(const t of o){const e=t.sourceLayer,o=t.getObjectId();if(this.sources.includes(e)&&(selectionUtils_e(e)||(0,layerUtils.Sv)(e))&&null!==o){const t=(0,MapUtils.tE)(s,e,(()=>[]));t.includes(o)||(t.push(o),i=!0)}}for(const t of e.removed){const e=t.sourceLayer,o=t.getObjectId();if(this.sources.includes(e)&&(selectionUtils_e(e)||(0,layerUtils.Sv)(e))&&null!==o){const t=s.get(e),n=t?.indexOf(o);void 0!==n&&n>=0&&(t?.splice(n,1),i=!0)}}if(i){const{_selectionMap:e,_trashCan:i}=this,o=[];for(const[n,l]of s){const s=e.get(n);void 0!==s&&i.push(s),e.set(n,{selection:l}),o.push({layer:n,selection:l,...(0,arrayUtils.iv)(void 0!==s?s.selection:[],l)})}this._onSelectionChange(o)}}setSelection(e,t){this._setSelection(e,t)}getSelection(e){const t=this._selectionMap.get(e);return t?.selection}appendToSelection(e,t){const s=this._selectionMap.get(e),i=void 0!==s?[...s.selection]:[];for(const o of t)i.includes(o)||i.push(o);this._setSelection(e,i)}removeFromSelection(e,t){const s=this._selectionMap.get(e);if(!s)return;const i=[];for(const o of s.selection)t.includes(o)||i.push(o);this._setSelection(e,i)}toggleInSelection(e,t){const s=this._selectionMap.get(e);if(!s||0===s.selection.length)return void this._setSelection(e,t);const i=new Set(s.selection),o=new Set(t),n=(0,SetUtils.BT)(i,o);this._setSelection(e,Array.from(n))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const t=[];for(const[s,i]of this._selectionMap.entries())t.push({layer:s,added:[],removed:[...i.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(t)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){if(null==this.view||null==this.sources)return;for(this._vizTaskId++;this._trashCan.length>0;){const e=this._trashCan.pop();e?.highlightHandle?.remove()}const{sources:e,view:t,_selectionMap:s,showHighlight:i}=this,o=this._vizTaskId;for(const n of e){const e=s.get(n),l=(0,layerUtils.Sv)(n)?n.parent:n;if(null!=l&&S(l)){if(SelectionManager_v(l))continue;t.whenLayerView(l).then((t=>{e?.highlightHandle?.remove(),null!=e&&i&&o===this._vizTaskId&&"highlight"in t&&"function"==typeof t.highlight&&e.selection.length>0&&(e.highlightHandle=t.highlight(e.selection,this.highlightName))})).catch((()=>{e?.highlightHandle?.remove()}))}}}_refreshListeners(){this._layerEditHandles.drain(maybe.xt);for(const e of this.sources){const t=(0,layerUtils.Sv)(e)?e.parent:e;if(null!=t&&selectionUtils_e(t)){const s=t.on("edits",(t=>{this._handleEditChanges(t,e)}));this._layerEditHandles.push(s)}}}_handleEditChanges(e,t){if(void 0!==e.deletedFeatures&&e.deletedFeatures.length>0&&this._selectionMap.has(t)){const i=e.deletedFeatures.filter((e=>null==e.error)).map((e=>e.objectId)).filter(arrayUtils.Ru);this.removeFromSelection(t,i)}}_setSelection(e,s){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const i=this._selectionMap.get(e);if(void 0===i||!SelectionManager_j(i,{selection:s})){void 0!==i&&this._trashCan.push(i),this._selectionMap.set(e,{selection:[...s]});const o={layer:e,selection:[...s],...(0,arrayUtils.iv)(void 0!==i?i.selection:[],s)};this._onSelectionChange([o])}}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,nonNullable:!0})],SelectionManager_y.prototype,"selections",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,nonNullable:!0})],SelectionManager_y.prototype,"count",null),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0,nonNullable:!0})],SelectionManager_y.prototype,"view",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,nonNullable:!0})],SelectionManager_y.prototype,"hasSelection",null),(0,tslib_es6._)([(0,property.MZ)()],SelectionManager_y.prototype,"showHighlight",void 0),(0,tslib_es6._)([(0,property.MZ)()],SelectionManager_y.prototype,"sources",null),(0,tslib_es6._)([(0,property.MZ)()],SelectionManager_y.prototype,"highlightName",void 0),SelectionManager_y=(0,tslib_es6._)([(0,subclass.$)("esri.views.SelectionManager")],SelectionManager_y);const SelectionManager_v=e=>(0,layerUtils.Sv)(e)?!0===e.parent?.isTable:e.isTable,S=e=>void 0!==e?.when,SelectionManager_j=(e,t)=>{if(null==e&&null==t)return!0;if(null!=e&&null==t||null==e&&null!=t)return!1;if(null!=e&&null!=t&&null!=e.selection&&null!=t.selection){const s=[...e.selection],i=[...t.selection];if(s.length!==i.length)return!1;s.sort(),i.sort();for(let e=0;e<s.length;e++)if(s[e]!==i[e])return!1}return!0},SelectionManager_M=async(e,t,s={})=>{let i;if((e=>void 0!==e.layer)(e)){const o=e;i=void 0===o?null:await o.queryFeatures(new Query.A({...s,objectIds:t})).then((t=>({data:t,layer:e.layer})))}else{const o=e;i=void 0===o?null:await o.queryFeatures(new Query.A({...s,objectIds:t})).then((e=>({data:e,layer:o})))}return i},b=SelectionManager_y;var Color=__webpack_require__("./node_modules/@arcgis/core/Color.js"),Clonable=__webpack_require__("./node_modules/@arcgis/core/core/Clonable.js");let Theme_p=class extends(Clonable.A.ClonableMixin(Accessor.A)){constructor(o){super(o),this.accentColor=new Color.A([255,127,0]),this.textColor=new Color.A([255,255,255])}};(0,tslib_es6._)([(0,property.MZ)({type:Color.A,nonNullable:!0})],Theme_p.prototype,"accentColor",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Color.A,nonNullable:!0})],Theme_p.prototype,"textColor",void 0),Theme_p=(0,tslib_es6._)([(0,subclass.$)("esri.views.Theme")],Theme_p);const Theme_l=Theme_p;var clock=__webpack_require__("./node_modules/@arcgis/core/core/clock.js"),mathUtils=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),InputHandler=__webpack_require__("./node_modules/@arcgis/core/views/input/InputHandler.js");__webpack_require__("./node_modules/@arcgis/core/views/input/IViewEvents.js");const r=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],ViewEvents_o={};function s(t){return!!ViewEvents_o[t]}r.forEach((t=>{ViewEvents_o[t]=!0}));class ViewEvents_c{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach((({handler:t,priority:e},n)=>this.inputManager?.installHandlers(n,[t],e)))}disconnect(){this.inputManager&&this._handlers.forEach(((t,e)=>this.inputManager?.uninstallHandlers(e))),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,n,a,r){const o=Array.isArray(e)?e:e.split(",");if(!function ViewEvents_p(t){for(const e of t)if(!s(e))return!1;return!0}(o))return o.some(s)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let c,u;Array.isArray(n)?u=n:(c=n,u=[]),"function"==typeof a?c=a:r=a,r=null!=r?r:InputManager.o.DEFAULT;const m=this._createUniqueGroupName(),d=new ViewEvents_l(this.view,o,u,c);this._handlers.set(m,{handler:d,priority:r});for(const t of o){const e=this._handlerCounts.get(t)||0;this._handlerCounts.set(t,e+1)}return this.inputManager&&this.inputManager.installHandlers(m,[d],r),(0,handleUtils.hA)((()=>this._removeHandler(m,o)))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,e){if(this._handlers.has(t)){this._handlers.delete(t);for(const t of e){const e=this._handlerCounts.get(t);void 0===e||(1===e?this._handlerCounts.delete(t):this._handlerCounts.set(t,e-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}}class ViewEvents_l extends InputHandler.l{constructor(t,e,n,a){super(!0),this._latestDragStart=void 0,this.view=t;for(const i of e)switch(i){case"click":this.registerIncoming("click",n,(e=>a(d(t,e))));break;case"double-click":this.registerIncoming("double-click",n,(e=>a(ViewEvents_g(t,e))));break;case"immediate-click":this.registerIncoming("immediate-click",n,(e=>a(ViewEvents_y(t,e))));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",n,(e=>a(ViewEvents_v(t,e))));break;case"hold":this.registerIncoming("hold",n,(e=>a(ViewEvents_h(t,e))));break;case"drag":this.registerIncoming("drag",n,(t=>{const e=this._wrapDrag(t);e&&a(e)}));break;case"key-down":this.registerIncoming("key-down",n,(t=>a(ViewEvents_f(t))));break;case"key-up":this.registerIncoming("key-up",n,(t=>a(k(t))));break;case"pointer-down":this.registerIncoming("pointer-down",n,(t=>a(ViewEvents_I(t,"pointer-down"))));break;case"pointer-move":this.registerIncoming("pointer-move",n,(t=>a(ViewEvents_I(t,"pointer-move"))));break;case"pointer-up":this.registerIncoming("pointer-up",n,(t=>a(ViewEvents_I(t,"pointer-up"))));break;case"pointer-drag":this.registerIncoming("pointer-drag",n,(t=>a(D(t))));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",n,(t=>a(ViewEvents_P(t))));break;case"pointer-enter":this.registerIncoming("pointer-enter",n,(t=>a(ViewEvents_I(t,"pointer-enter"))));break;case"pointer-leave":this.registerIncoming("pointer-leave",n,(t=>a(ViewEvents_I(t,"pointer-leave"))));break;case"gamepad":this.registerIncoming("gamepad",n,(t=>{a(ViewEvents_(t))}));break;case"focus":this.registerIncoming("focus",n,(t=>{a(u(t))}));break;case"blur":this.registerIncoming("blur",n,(t=>{a(ViewEvents_m(t))}))}}_wrapDrag(t){const n=t.data,{x:a,y:i}=n.center,{action:r,pointerType:o,button:s}=n;if("start"===r&&(this._latestDragStart=n),!this._latestDragStart)return;const p=n.pointer.native,c=n.buttons,{cancelable:l,timestamp:u}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return"end"===r&&(this._latestDragStart=void 0),{type:"drag",action:r,x:a,y:i,origin:m,pointerType:o,button:s,buttons:c,radius:n.radius,angle:(0,mathUtils.KJ)(n.angle),native:p,timestamp:u,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}}function u(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function ViewEvents_m(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function d(t,e){const{pointerType:a,button:i,buttons:r,x:o,y:s,native:p,eventId:c}=e.data,{cancelable:l,timestamp:u}=e;return{type:"click",pointerType:a,button:i,buttons:r,x:o,y:s,native:p,timestamp:u,screenPoint:(0,screenUtils.tc)(o,s),mapPoint:ViewEvents_b(t,o,s),eventId:c,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function ViewEvents_g(t,e){const{pointerType:n,button:a,buttons:i,x:r,y:o,native:s,eventId:p}=e.data,{cancelable:c,timestamp:l}=e;return{type:"double-click",pointerType:n,button:a,buttons:i,x:r,y:o,native:s,timestamp:l,mapPoint:ViewEvents_b(t,r,o),eventId:p,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function ViewEvents_y(t,e){const{pointerType:n,button:a,buttons:i,x:r,y:o,native:s,eventId:p}=e.data,c=s.pointerId,{cancelable:l,timestamp:u}=e;return{type:"immediate-click",pointerId:c,pointerType:n,button:a,buttons:i,x:r,y:o,native:s,timestamp:u,mapPoint:ViewEvents_b(t,r,o),eventId:p,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function ViewEvents_v(t,e){const{pointerType:n,button:a,buttons:i,x:r,y:o,native:s,eventId:p}=e.data,c=s.pointerId,{cancelable:l,timestamp:u}=e;return{type:"immediate-double-click",pointerId:c,pointerType:n,button:a,buttons:i,x:r,y:o,native:s,timestamp:u,mapPoint:ViewEvents_b(t,r,o),eventId:p,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function ViewEvents_h(t,e){const{pointerType:n,button:a,buttons:i,x:r,y:o,native:s}=e.data,{cancelable:p,timestamp:c}=e;return{type:"hold",pointerType:n,button:a,buttons:i,x:r,y:o,native:s,timestamp:c,mapPoint:ViewEvents_b(t,r,o),cancelable:p,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function ViewEvents_b(t,e,a){return t.toMap((0,screenUtils.tc)(e,a),{exclude:[]})}function ViewEvents_f(t){const{key:e,repeat:n,native:a}=t.data,{cancelable:i,timestamp:r}=t;return{type:"key-down",key:e,repeat:n,native:a,timestamp:r,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function k(t){const{key:e,native:n}=t.data,{cancelable:a,timestamp:i}=t;return{type:"key-up",key:e,native:n,timestamp:i,cancelable:a,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function ViewEvents_I(t,e){const{x:n,y:a,button:i,buttons:r,native:o,eventId:s}=t.data,p=o.pointerId,c=o.pointerType,{cancelable:l,timestamp:u}=t;return{type:e,x:n,y:a,pointerId:p,pointerType:c,button:i,buttons:r,native:o,timestamp:u,eventId:s,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function D(t){const{x:e,y:n,buttons:a,native:i,eventId:r}=t.data.currentEvent,{button:o}=t.data.startEvent,s=t.data.startEvent.native.pointerId,p=t.data.startEvent.native.pointerType,c=t.data.action,l={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:u,timestamp:m}=t;return{type:"pointer-drag",x:e,y:n,pointerId:s,pointerType:p,button:o,buttons:a,action:c,origin:l,native:i,timestamp:m,eventId:r,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function ViewEvents_P(t){const{cancelable:e,data:n,timestamp:a}=t,{x:i,y:r,deltaY:o,native:s}=n;return{type:"mouse-wheel",x:i,y:r,deltaY:o,native:s,timestamp:a,cancelable:e,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}function ViewEvents_(t){const{action:e,state:n,device:a}=t.data,{cancelable:i,timestamp:r}=t,{buttons:o,axes:s}=n;return{type:"gamepad",device:a,timestamp:r,action:e,buttons:o,axes:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}var interfaces=__webpack_require__("./node_modules/@arcgis/core/views/interactive/interfaces.js");function interactiveToolUtils_o(t){return[t.on("before-add",(o=>{const i=o.item;if(null==i||t.includes(i))return Logger.A.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void o.preventDefault();i.onAdd()})),t.on("after-remove",(e=>{const t=e.item;t.active&&(t.view.activeTool=null),t.destroy()}))]}function interactiveToolUtils_i(e){return e.visible&&null!=e.getEditableFlag&&e.getEditableFlag(interfaces.PK.USER)&&e.getEditableFlag(interfaces.PK.MANAGER)}var iteratorUtils=__webpack_require__("./node_modules/@arcgis/core/core/iteratorUtils.js"),support_screenUtils=__webpack_require__("./node_modules/@arcgis/core/views/support/screenUtils.js");class ToolViewManagerManipulatorState_i{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,o){const a=()=>e.stopPropagation();switch(e.type){case"pointer-move":ToolViewManagerManipulatorState_l(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:"start"===e.action?this._externallyDragging=!0:"end"===e.action&&(this._externallyDragging=!1),this._stopDrag&&(a(),"end"===e.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!ToolViewManagerManipulatorState_p(e))break;const t=(0,support_screenUtils.ZV)(e),i=ToolViewManagerManipulatorState_s(t,e.pointerType,o.forEachTool);if(null==i)break;const n=i.manipulator,l=i.tool;null==n||null==l||!n.interactive||n.grabbable&&n.grabbableForEvent(e)||!n.grabbing||n.dragging||this._releaseManipulatorBeforeDragging(n,e,o),null!=n&&null!=l&&n.interactive&&n.grabbable&&n.grabbableForEvent(e)&&!n.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:n,tool:l,start:t,pointerType:e.pointerType}),1===this._grabbedManipulators.size&&null==o.activeTool&&(this._revertToNullActiveTool=!0,o.setActiveTool(i.tool)),n.grabbing=!0,n.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:t}),a());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,o);break;case"pointer-drag":{if(!ToolViewManagerManipulatorState_p(e))break;const i=this._grabbedManipulators.get(e.pointerId),n=i?.manipulator,s=i?.tool;if(null==n||null==s)break;const l=(0,support_screenUtils.ZV)(e);l.x=(0,mathUtils.qE)(l.x,0,o.view.width),l.y=(0,mathUtils.qE)(l.y,0,o.view.height);const u=i.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":"update"!==e.action&&1!==this._grabbedManipulators.size||(n.dragging=!0,c?n.events.emit("drag",{action:"update",start:u,screenPoint:l}):n.events.emit("drag",{action:"start",start:u,screenPoint:l,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:s,manipulator:n,start:u}));break;case"end":n.dragging=!1,c&&n.events.emit("drag",{action:"end",start:u,screenPoint:l}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,o)}a();break}case"immediate-click":{const t=(0,support_screenUtils.ZV)(e),i=ToolViewManagerManipulatorState_s(t,e.pointerType,o.forEachTool);if(function ToolViewManagerManipulatorState_u(e){return!!e.native.shiftKey}(e)||o.forEachTool((e=>{if((null==i||i.tool!==e||e.automaticManipulatorSelection)&&e.manipulators){let t=!1;e.manipulators.forEach((({manipulator:e})=>{e.selected&&(e.selected=!1,t=!0)})),t&&e.onManipulatorSelectionChanged&&e.onManipulatorSelectionChanged()}})),null==i)break;const{manipulator:n,tool:l}=i;if(!n.interactive)break;n.selectable&&l.automaticManipulatorSelection&&(n.selected=!n.selected,l.onManipulatorSelectionChanged&&l.onManipulatorSelectionChanged());const p=e.native.shiftKey;n.events.emit("immediate-click",{screenPoint:t,button:e.button,pointerType:e.pointerType,shiftKey:p,stopPropagation:a}),ToolViewManagerManipulatorState_c(n,a);break}case"click":{const t=(0,support_screenUtils.ZV)(e),i=ToolViewManagerManipulatorState_s(t,e.pointerType,o.forEachTool),n=i?.manipulator;if(null==n||!n.interactive)break;const l=e.native.shiftKey;n.events.emit(e.type,{screenPoint:t,button:e.button,pointerType:e.pointerType,shiftKey:l}),a();break}case"double-click":{const t=(0,support_screenUtils.ZV)(e),i=ToolViewManagerManipulatorState_s(t,e.pointerType,o.forEachTool),n=null!=i?i.manipulator:null;if(null==n||!n.interactive)break;const l=e.native.shiftKey;n.events.emit("double-click",{screenPoint:t,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:a}),ToolViewManagerManipulatorState_c(n,a);break}case"immediate-double-click":{const t=(0,support_screenUtils.ZV)(e),i=ToolViewManagerManipulatorState_s(t,e.pointerType,o.forEachTool),n=null!=i?i.manipulator:null;if(null==n||!n.interactive)break;const l=e.native.shiftKey;n.events.emit("immediate-double-click",{screenPoint:t,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:a}),"mouse"===e.pointerType&&ToolViewManagerManipulatorState_c(n,a);break}}this._onFocusChange(o.forEachTool)}_releaseManipulatorBeforeDragging(e,t,o){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:(0,support_screenUtils.ZV)(t)}),this._grabbedManipulators.forEach((({manipulator:t},o)=>{t===e&&this._grabbedManipulators.delete(o)})),this._afterManipulatorRelease(o.setActiveTool)}_handlePointerEnd(e,t){const o=this._grabbedManipulators.get(e.pointerId)?.manipulator;null!=o&&o.grabbing&&(o.grabbing=!1,o.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:(0,support_screenUtils.ZV)(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(t.setActiveTool))}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=ToolViewManagerManipulatorState_n(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=ToolViewManagerManipulatorState_n(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const o=new Set,a=new Set;this._grabbedManipulators.forEach((({tool:e})=>{o.add(e)})),this._hoveredManipulators.forEach((({tool:e})=>{a.add(e)})),t((t=>{t.hasGrabbedManipulators=o.has(t),t.hasHoveredManipulators=a.has(t);const r=this._grabbedManipulators.values(),i=(0,iteratorUtils.I6)(r,(({tool:e})=>e===t));t.firstGrabbedManipulator=null!=i?i.manipulator:null}))}clearPointers(e,{forEachTool:t,setActiveTool:o},a=!0,r){const i=(t,o)=>t===e&&(null==r||r===o);this._grabbedManipulators.forEach((({tool:e,manipulator:t,pointerType:o},a)=>{i(e,t)&&(this._grabbedManipulators.delete(a),t.grabbing=!1,t.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:o}))})),this._draggedManipulators.forEach((({tool:e,manipulator:t},o)=>{i(e,t)&&(this._draggedManipulators.delete(o),t.dragging=!1,t.events.emit("drag",{action:"cancel"}))})),a&&this._hoveredManipulators.forEach((({tool:e,manipulator:t},o)=>{i(e,t)&&(this._hoveredManipulators.delete(o),t.hovering=!1)})),this._afterManipulatorRelease(o),this._onFocusChange(t)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach(((t,a)=>{this._updateHoveredStateForPointerAtScreenPosition((0,screenUtils.tc)(t.x,t.y),a,t.pointerType,e)}))}handleHoverEvent(e,t){const o=e.type;"pointer-up"!==o&&"immediate-click"!==o&&"pointer-move"!==o||!ToolViewManagerManipulatorState_l(e.pointerType)||("pointer-up"!==o&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition((0,support_screenUtils.ZV)(e),e.pointerId,e.pointerType,t))}_updateHoveredStateForPointerAtScreenPosition(e,t,o,a){let r=ToolViewManagerManipulatorState_s(e,o,a);const i=this._hoveredManipulators.get(t)?.manipulator;null==r||r.manipulator.interactive||(r=null),null!=r&&i===r.manipulator||(null!=i&&(i.hovering=!1),null!=r?(r.manipulator.hovering=!0,this._hoveredManipulators.set(t,r)):this._hoveredManipulators.delete(t),this._onFocusChange(a))}_afterManipulatorRelease(e){0===this._grabbedManipulators.size&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach((({manipulator:t},o)=>{e===o&&(this._hoveredManipulators.delete(e),t.hovering=!1)}))}}function ToolViewManagerManipulatorState_n(e){for(const{manipulator:t}of e.values())if(null!=t&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function ToolViewManagerManipulatorState_s(e,t,o){let r=null;return o((o=>{if(null==o.manipulators||!interactiveToolUtils_i(o))return!1;const i=o.manipulators.intersect(e,t);return null!=i&&(r={tool:o,manipulator:i},!0)})),r}function ToolViewManagerManipulatorState_l(e){return"mouse"===e}function ToolViewManagerManipulatorState_p(e){return"mouse"!==e.pointerType||0===e.button}function ToolViewManagerManipulatorState_c(e,t){e?.consumesClicks&&t()}let ToolViewManager_f=class extends Accessor.A{constructor(t){super(t),this._updatingHandles=new UpdatingHandles.U,this._clock=clock.p,this._manipulatorState=new ToolViewManagerManipulatorState_i,this.tools=new Collection.A,this.cursor=null,this._interacting=!1,this._interactingTimeout=1e3,this._interactingTimeoutHandle=null,this._forEachTool=t=>{for(const o of this.tools.items)if(t(o))return}}initialize(){this.addHandles([this.view.on(r,(t=>{this._handleInputEvent(t)}),InputManager.o.TOOL),...interactiveToolUtils_o(this.tools),this.tools.on("before-add",(({item:t})=>{this._updateToolEditableFlag(t)})),this.tools.on("before-remove",(({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()})),this.tools.on("change",(()=>{this._refreshToolWatchers()}))])}destroy(){this.activeTool=null,this.tools.drain((t=>t.destroy())),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(null!=t&&!this.view.ready)return void Logger.A.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const o=this.activeTool;this._set("activeTool",t),null!=o&&o.deactivate(),null!=t&&t.activate(),this._removeIncompleteTools(t);for(const e of this.tools){this._updateToolEditableFlag(e);const t=interactiveToolUtils_i(e);null!=this.activeTool&&t||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!t)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some((t=>t.updating))}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=(0,maybe.xt)(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout((()=>this._interacting=!1),this._interactingTimeout)}attach(){"3d"===this.view.type?this.addHandles([(0,reactiveUtils.watch)((()=>{const{state:t}=this.view;return"camera"in t&&t.camera}),(()=>this._forEachManipulator((t=>t.onViewChange())))),this.view.elevationProvider?.on("elevation-change",(t=>this._forEachManipulator((o=>o.onElevationChange(t)))))],"attached"):this.addHandles((0,reactiveUtils.watch)((()=>this.view.extent),(()=>this._forEachManipulator((t=>t.onViewChange())))))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles("attached"),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool((o=>{o.manipulators&&o.manipulators.forEach((({manipulator:e})=>t(e,o)))}))}_handleInputEvent(t){let o=!1;const e={...t,stopPropagation:()=>{o=!0,t.stopPropagation()}};null!=this.activeTool?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(e):this._forEachTool((t=>{!o&&t.visible&&t.handleInputEvent(e)})),!o&&"key-down"===t.type&&"Escape"===t.key&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(e,this._manipulatorStateEventArgs),o||null==this.activeTool||this.activeTool.handleInputEventAfter(e),this._manipulatorState.handleHoverEvent(e,this._forEachTool),this._updateCursor(),"pointer-move"===t.type&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles("tools"),this._forEachTool((t=>{if(t instanceof Accessor.A){const o=(0,reactiveUtils.watch)((()=>[t.cursor,t.visible,t.editable]),(()=>{interactiveToolUtils_i(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}));this.addHandles(o,"tools")}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",(o=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,o.item.manipulator)})),t.manipulators.on("change",(()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}))],"tools")})),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){t.setEditableFlag?.(interfaces.PK.MANAGER,null==this.activeTool||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;null==t&&this._forEachTool((o=>!(null==o.cursor||!o.visible||(t=o.cursor,0)))),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter((o=>(null==t||o!==t)&&!o.created&&o.removeIncompleteOnCancel)).forEach((t=>{this.tools.remove(t)}))}get test(){}};(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0,nonNullable:!0})],ToolViewManager_f.prototype,"view",void 0),(0,tslib_es6._)([(0,property.MZ)({value:null})],ToolViewManager_f.prototype,"activeTool",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:Collection.A})],ToolViewManager_f.prototype,"tools",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ToolViewManager_f.prototype,"cursor",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ToolViewManager_f.prototype,"updating",null),(0,tslib_es6._)([(0,property.MZ)()],ToolViewManager_f.prototype,"_interacting",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ToolViewManager_f.prototype,"interacting",null),ToolViewManager_f=(0,tslib_es6._)([(0,subclass.$)("esri.views.ToolViewManager")],ToolViewManager_f);var HighlightDefaults=__webpack_require__("./node_modules/@arcgis/core/views/support/HighlightDefaults.js"),HighlightOptions=__webpack_require__("./node_modules/@arcgis/core/views/support/HighlightOptions.js");let GamepadInputDevice_n=class extends Accessor.A{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown","standard"===e.mapping?this._detectedDeviceType="standard":GamepadInputDevice_i.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return null!=this.nativeIndex&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return GamepadInputDevice_a[this.deviceType]}};(0,tslib_es6._)([(0,property.MZ)({nonNullable:!0,readOnly:!0})],GamepadInputDevice_n.prototype,"nativeIndex",void 0),(0,tslib_es6._)([(0,property.MZ)({type:String,readOnly:!0})],GamepadInputDevice_n.prototype,"deviceType",null),(0,tslib_es6._)([(0,property.MZ)({type:Number,readOnly:!0})],GamepadInputDevice_n.prototype,"axisThreshold",null),GamepadInputDevice_n=(0,tslib_es6._)([(0,subclass.$)("esri.views.input.gamepad.GamepadInputDevice")],GamepadInputDevice_n);const GamepadInputDevice_o=GamepadInputDevice_n,GamepadInputDevice_i=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),GamepadInputDevice_a={standard:.15,spacemouse:.025,unknown:0};let GamepadSettings_p=class extends Accessor.A{constructor(...o){super(...o),this.devices=new Collection.A,this.enabledFocusMode="document"}};(0,tslib_es6._)([(0,property.MZ)({type:Collection.A.ofType(GamepadInputDevice_o),readOnly:!0})],GamepadSettings_p.prototype,"devices",void 0),(0,tslib_es6._)([(0,property.MZ)({type:["document","view","none"]})],GamepadSettings_p.prototype,"enabledFocusMode",void 0),GamepadSettings_p=(0,tslib_es6._)([(0,subclass.$)("esri.views.input.gamepad.GamepadSettings")],GamepadSettings_p);const GamepadSettings_i=GamepadSettings_p;let Input_p=class extends Accessor.A{constructor(){super(...arguments),this.gamepad=new GamepadSettings_i}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Input_p.prototype,"gamepad",void 0),Input_p=(0,tslib_es6._)([(0,subclass.$)("esri.views.input.Input")],Input_p);const Input_a=Input_p;var a11yUtils=__webpack_require__("./node_modules/@arcgis/core/core/a11yUtils.js"),deprecate=__webpack_require__("./node_modules/@arcgis/core/core/deprecate.js");const NavigationActionMap_s=()=>(0,property.MZ)({type:["pan","rotate","zoom","none"],nonNullable:!0});let NavigationActionMap_a=class extends Accessor.A{constructor(o){super(o),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};(0,tslib_es6._)([NavigationActionMap_s()],NavigationActionMap_a.prototype,"dragPrimary",void 0),(0,tslib_es6._)([NavigationActionMap_s()],NavigationActionMap_a.prototype,"dragSecondary",void 0),(0,tslib_es6._)([NavigationActionMap_s()],NavigationActionMap_a.prototype,"dragTertiary",void 0),(0,tslib_es6._)([(0,property.MZ)({type:["zoom","none"],nonNullable:!0})],NavigationActionMap_a.prototype,"mouseWheel",void 0),NavigationActionMap_a=(0,tslib_es6._)([(0,subclass.$)("esri.views.navigation.NavigationActionMap")],NavigationActionMap_a);const NavigationActionMap_p=NavigationActionMap_a;let GamepadSettings_s=class extends Accessor.A{constructor(o){super(o),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};(0,tslib_es6._)([(0,property.MZ)({type:Boolean,nonNullable:!0})],GamepadSettings_s.prototype,"enabled",void 0),(0,tslib_es6._)([(0,property.MZ)({type:GamepadInputDevice_o})],GamepadSettings_s.prototype,"device",void 0),(0,tslib_es6._)([(0,property.MZ)({type:["pan","zoom"],nonNullable:!0})],GamepadSettings_s.prototype,"mode",void 0),(0,tslib_es6._)([(0,property.MZ)({type:["forward-down","forward-up"],nonNullable:!0})],GamepadSettings_s.prototype,"tiltDirection",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number,nonNullable:!0})],GamepadSettings_s.prototype,"velocityFactor",void 0),GamepadSettings_s=(0,tslib_es6._)([(0,subclass.$)("esri.views.navigation.gamepad.GamepadSettings")],GamepadSettings_s);const gamepad_GamepadSettings_i=GamepadSettings_s;let Navigation_i=class extends Accessor.A{constructor(o){super(o),this.actionMap=new NavigationActionMap_p,this.browserTouchPanEnabled=!0,this.gamepad=new gamepad_GamepadSettings_i,this.momentumEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!(0,a11yUtils.O)()}get mouseWheelZoomEnabled(){return"zoom"===this.actionMap.mouseWheel}set mouseWheelZoomEnabled(o){(0,deprecate.Lx)(Logger.A.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=o?"zoom":"none"}};(0,tslib_es6._)([(0,property.MZ)({type:NavigationActionMap_p,nonNullable:!0})],Navigation_i.prototype,"actionMap",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Boolean})],Navigation_i.prototype,"browserTouchPanEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)({type:gamepad_GamepadSettings_i,nonNullable:!0})],Navigation_i.prototype,"gamepad",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Boolean})],Navigation_i.prototype,"momentumEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Boolean})],Navigation_i.prototype,"mouseWheelZoomEnabled",null),Navigation_i=(0,tslib_es6._)([(0,subclass.$)("esri.views.navigation.Navigation")],Navigation_i);const Navigation_l=Navigation_i;var heightModelInfoUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/heightModelInfoUtils.js"),ViewingMode=__webpack_require__("./node_modules/@arcgis/core/views/ViewingMode.js");let projectionUtils_n,projectionUtils_s=null;async function projectionUtils_c(r){projectionUtils_s||(projectionUtils_s=__webpack_require__.e(6759).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/portal/support/geometryServiceUtils.js")).then((e=>projectionUtils_n=e))),await projectionUtils_s,(0,promiseUtils.Te)(r)}async function projectionUtils_p(e,s,a,m){if(!e)return null;const l=e.spatialReference;return(0,projection.isLoaded)()||(0,projection.canProjectWithoutEngine)(l,s)?(0,projection.project)(e,s):projectionUtils_n?projectionUtils_n.projectGeometry(e,s,a,m):(await Promise.race([projectionUtils_c(m),(0,projection.load)(m)]),projectionUtils_p(e,s,a,m))}let DefaultsFromMap_d=class extends Accessor.A{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=(0,maybe.DC)(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return null==this.userSpatialReference||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),t=[];return null!=this.priorityCollection&&t.push(this.priorityCollection),t.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),t}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,(t=>{const n=this._getSupportedSpatialReferences(t);if(n.length>0){const t=this._narrowDownSpatialReferenceCandidates(e,n);null!=t&&(e=t)}return 1===e?.length}))&&1!==e?.length)return{updating:!0};const t=this._pickSpatialReferenceCandidate(e);return{spatialReference:t?.spatialReference??null,viewingMode:t?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),t=this.spatialReference;if(!t)return{updating:this._spatialReferenceTask.updating};let n;const a=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers}],(e=>!(!("tileInfo"in e)||!e.tileInfo?.spatialReference.equals(t)||(n=e,0))),(e=>"tileInfo"in e));return n?{tileInfo:n.tileInfo,updating:!1}:{updating:a}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const t=this._collectLayers(this.mapCollections,(t=>{const n=(0,heightModelInfoUtils.zy)(t);return!!n&&(e={heightModelInfo:n,vcsWkid:t.spatialReference?.vcsWkid,latestVcsWkid:t.spatialReference?.latestVcsWkid},!0)}),(e=>(0,heightModelInfoUtils.jI)(e)));return{...e,updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],t=this._collectLayers(this.mapCollections,(t=>{const n="fullExtents"in t&&t.fullExtents||(null!=t.fullExtent?[t.fullExtent]:[]),a=this.requiresExtentInSpatialReference?null:n[0],s=n.find((e=>e.spatialReference.equals(this.spatialReference)))??a;if(s)return e.push({extent:s,layer:t}),!0;if(this._getSupportedSpatialReferences(t).length>0)for(const i of n)e.push({extent:i,layer:t});return!1}));return{candidates:e,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(null==e||0===e.length)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(e),r=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:null!=this._projectExtentTask.task&&!this._projectExtentTask.task.finished}:(null!=this._projectExtentTask.task&&(this._projectExtentTask.task=(0,maybe.DC)(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:r.clone(),task:(0,asyncUtils.UT)((async e=>{try{const t=await projectionUtils_p(i.extent,r,"portalItem"in i.layer?i.layer.portalItem:void 0,e);this._projectExtentTask={...this._projectExtentTask,task:null,output:t}}catch(t){if((0,promiseUtils.G4)(e))return;this._projectExtentTask={...this._projectExtentTask,task:null}}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(null==e)return t;const n=new Array;for(const a of e)for(const e of t){if(!a.spatialReference.equals(e.spatialReference))continue;const t=DefaultsFromMap_h(a.viewingMode,e.viewingMode);if(!1!==t){n.push({spatialReference:a.spatialReference,viewingMode:t});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return null==e||e.length<1?t?{spatialReference:t,viewingMode:null}:null:(null!=t&&e.length>1&&e.some((({spatialReference:e})=>e.equals(t)))&&(e=e.filter((({spatialReference:e})=>e.equals(t)))),e.length>1&&e.some((({viewingMode:e})=>e!==ViewingMode.RT.Local))&&(e=e.filter((({viewingMode:e})=>e!==ViewingMode.RT.Local))),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(0===t.length)return[];const n=[];for(const a of t){const t=this.getSpatialReferenceSupport(a,e);if(null!=t){const e=t.constraints??[{spatialReference:a,viewingMode:null}];for(const{spatialReference:t,viewingMode:a}of e)this.requiresExtentInSpatialReference&&null!=this.userSpatialReference&&!t.equals(this.userSpatialReference)||n.push({spatialReference:t,viewingMode:a})}}return n}_pickExtentCandidate(e){const t=this.spatialReference;return e.find((({extent:e})=>t.equals(e.spatialReference)))||e[0]}_collectLayers(e,t,n=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const a=new DefaultsFromMap_f(n,t);for(const s of e)if(this._collectCollection(s,a),a.done||a.preloading===this.sourcePreloadCount)break;return a.updating}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const n of e.layers)if(t.layerFilter(n)){switch(this._loadMaybe(n)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":if(t.updating||(t.done=t.pushLayer(n)),t.done||t.preloading===this.sourcePreloadCount)break;"layers"in n&&this._collectCollection({layers:n.layers},t)}if(t.done||t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&null!=e.loadStatus?"not-loaded"===e.loadStatus?(e.load().catch((e=>{(0,promiseUtils.zf)(e)})),"loading"):e.loadStatus:"loaded"}};(0,tslib_es6._)([(0,property.MZ)()],DefaultsFromMap_d.prototype,"required",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],DefaultsFromMap_d.prototype,"map",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],DefaultsFromMap_d.prototype,"getSpatialReferenceSupport",void 0),(0,tslib_es6._)([(0,property.MZ)()],DefaultsFromMap_d.prototype,"defaultSpatialReference",void 0),(0,tslib_es6._)([(0,property.MZ)()],DefaultsFromMap_d.prototype,"userSpatialReference",void 0),(0,tslib_es6._)([(0,property.MZ)()],DefaultsFromMap_d.prototype,"sourcePreloadCount",void 0),(0,tslib_es6._)([(0,property.MZ)()],DefaultsFromMap_d.prototype,"priorityCollection",void 0),(0,tslib_es6._)([(0,property.MZ)()],DefaultsFromMap_d.prototype,"requiresExtentInSpatialReference",void 0),(0,tslib_es6._)([(0,property.MZ)()],DefaultsFromMap_d.prototype,"suspended",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"ready",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"heightModelInfoReady",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"spatialReference",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"extent",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"heightModelInfo",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"vcsWkid",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"latestVcsWkid",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"viewingMode",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"tileInfo",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"mapCollections",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"_spatialReferenceTask",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"_tileInfoTask",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"_heightModelInfoTask",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],DefaultsFromMap_d.prototype,"_extentCandidatesTask",null),(0,tslib_es6._)([(0,property.MZ)()],DefaultsFromMap_d.prototype,"_extentTask",null),(0,tslib_es6._)([(0,property.MZ)()],DefaultsFromMap_d.prototype,"_projectExtentTask",void 0),DefaultsFromMap_d=(0,tslib_es6._)([(0,subclass.$)("esri.views.support.DefaultsFromMap")],DefaultsFromMap_d);class DefaultsFromMap_f{constructor(e,t){this.layerFilter=e,this.pushLayer=t,this.preloading=-1,this.updating=!1,this.done=!1}}function DefaultsFromMap_h(e,t){return null!=e?null!=t?e===t&&e:e:t}let RequiredFieldsOptions_t=class extends Accessor.A{constructor(o){super(o),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};(0,tslib_es6._)([(0,property.MZ)()],RequiredFieldsOptions_t.prototype,"featureTitleFields",void 0),(0,tslib_es6._)([(0,property.MZ)()],RequiredFieldsOptions_t.prototype,"utilityNetworkFields",void 0),(0,tslib_es6._)([(0,property.MZ)()],RequiredFieldsOptions_t.prototype,"globalIdField",void 0),RequiredFieldsOptions_t=(0,tslib_es6._)([(0,subclass.$)("esri.views.support.RequiredFieldsOptions")],RequiredFieldsOptions_t);const RequiredFieldsOptions_i=RequiredFieldsOptions_t;var $;let B=$=class extends(Evented.A.EventedMixin(core_Promise.A.EsriPromiseMixin(Accessor.A))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Handles.A,this.updatingHandles=new UpdatingHandles.U,this.allLayerViews=new CollectionFlattener.A({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:Q}),this.groundView=null,this.basemapView=null,this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new GraphicsCollection.Y,this.analyses=new t,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Collection.A,this.magnifier=new Magnifier_p,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Input_a,this.navigation=new Navigation_l,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new ViewEvents_c(this),this.persistableViewModels=new Collection.A,this.requiredFieldsOptions=new RequiredFieldsOptions_i,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add((0,reactiveUtils.watch)((()=>this.preconditionsReady),(e=>{const t=this.ready;if(e?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,$.views.add(this)):(this._lockedSpatialReference=null,$.views.remove(this)),this.notifyChange("spatialReference"),!e&&t)this.toolViewManager?.detach(),null!=this.analysisViewManager&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(e&&!t){try{this._startup()}catch(i){return void queueMicrotask((()=>{this.fatalError=new core_Error.A("startup-error",null,i)}))}null!=this.analysisViewManager&&this.analysisViewManager.attach(),this.toolViewManager.attach()}}),reactiveUtils.OH))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then((()=>(this._isValid=!0,(0,reactiveUtils.C_)((()=>this.ready)))))),this.basemapView=new BasemapView_p({view:this}),this.layerViewManager=new j({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new ToolViewManager_f({view:this}),this.selectionManager=new b({view:this}),this.addHandles([(0,reactiveUtils.when)((()=>"map-content-error"===this.readyState&&!this.spatialReference),(()=>{Logger.A.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),(0,reactiveUtils.watch)((()=>this.initialExtentRequired),(e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e}),reactiveUtils.pc),(0,reactiveUtils.watch)((()=>this.ready),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)}),reactiveUtils.OH),(0,reactiveUtils.watch)((()=>this._userSpatialReference),(e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)}),reactiveUtils.pc)])}destroy(){this.destroyed||($.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=(0,maybe.pR)(this.graphics),this.analyses=(0,maybe.pR)(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),(0,maybe.pR)(this.analysisViewManager),this.toolViewManager=(0,maybe.pR)(this.toolViewManager),this.layerViewManager=(0,maybe.pR)(this.layerViewManager),this.selectionManager=(0,maybe.pR)(this.selectionManager),this.basemapView=(0,maybe.pR)(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach((e=>e.destroy())),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=(0,maybe.pR)(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Logger.A.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new DefaultsFromMap_d({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??function DefaultHighlights_n(){return new(Collection.A.ofType(HighlightOptions.A))([new HighlightOptions.A({name:HighlightDefaults.Tv}),new HighlightOptions.A({name:HighlightDefaults.n4,color:HighlightDefaults.lH})])}()}set highlights(e){this._set("highlights",(0,collectionUtils.V)(e,this._get("highlights"),Collection.A.ofType(HighlightOptions.A)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Loadable.A.isLoadable(this.map)&&!this.map.loaded||0===this.width||0===this.height||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(Logger.A.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),Loadable.A.isLoadable(e)&&e.load().catch((()=>{})),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if(this.defaultsFromMap?.ready&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,t=this.map.ground.loaded,i=this.map.basemap?.loaded??!0;return e&&i&&t&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=(0,asyncUtils.UT)((e=>(0,promiseUtils.Pl)((0,has.A)("view-readyState-waiting-delay"),null,e))),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=(0,maybe.DC)(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const t=e.clone();return t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,t}return e}set spatialReference(e){const t=!(0,spatialReferenceUtils.aI)(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??constants.qU}set timeZone(e){this._userTimeZone=e,(0,timeZoneUtils.wr)(e)||Logger.A.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new Theme_l}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new core_Error.A("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return null!=this.getSpatialReferenceSupport(e)}when(e,t){return this.isResolved()&&!this.ready&&Logger.A.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&((0,reactiveUtils.when)((()=>this.destroyed||!1===this.preconditionsReady),(()=>this._readyCycleForced=!1),{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};B.views=new Collection.A,(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"_userSpatialReference",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"activeTool",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"allLayerViews",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"groundView",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"animation",null),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"basemapView",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"center",null),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"defaultsFromMapSettings",null),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"defaultsFromMap",null),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"displayFilterEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"fatalError",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Extent.default})],B.prototype,"extent",null),(0,tslib_es6._)([(0,property.MZ)((0,OwningCollection.C)(GraphicsCollection.Y,"graphics"))],B.prototype,"graphics",void 0),(0,tslib_es6._)([(0,property.MZ)((0,OwningCollection.C)(t,"analyses"))],B.prototype,"analyses",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:HeightModelInfo.A})],B.prototype,"heightModelInfo",null),(0,tslib_es6._)([(0,property.MZ)({type:Collection.A.ofType(HighlightOptions.A)})],B.prototype,"highlights",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"interacting",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"navigating",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],B.prototype,"preconditionsReady",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"typeSpecificPreconditionsReady",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Collection.A,readOnly:!0})],B.prototype,"layerViews",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"resolution",null),(0,tslib_es6._)([(0,property.MZ)({type:Magnifier_p})],B.prototype,"magnifier",void 0),(0,tslib_es6._)([(0,property.MZ)({value:null,type:core_Map.default})],B.prototype,"map",null),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"padding",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"ready",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"_readyStateWaitingTask",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"readyState",null),(0,tslib_es6._)([(0,property.MZ)({type:SpatialReference.A})],B.prototype,"spatialReference",null),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"stationary",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"supportsGround",void 0),(0,tslib_es6._)([(0,property.MZ)({type:TimeExtent.A})],B.prototype,"timeExtent",null),(0,tslib_es6._)([(0,property.MZ)({type:String,nonNullable:!0})],B.prototype,"timeZone",null),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"tools",null),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"toolViewManager",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Number})],B.prototype,"scale",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"updating",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"initialExtentRequired",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"initialExtent",null),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"cursor",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"input",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Navigation_l,nonNullable:!0})],B.prototype,"navigation",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"layerViewManager",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"analysisViewManager",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"selectionManager",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"width",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"height",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"resizing",void 0),(0,tslib_es6._)([(0,property.MZ)({value:null,readOnly:!0})],B.prototype,"size",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"suspended",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"viewEvents",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],B.prototype,"persistableViewModels",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"_isValid",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"_readyCycleForced",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"_lockedSpatialReference",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"_userTimeZone",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"_lockedTimeZone",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"_userTimeExtent",void 0),(0,tslib_es6._)([(0,property.MZ)()],B.prototype,"_lockedTimeExtent",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Theme_l})],B.prototype,"theme",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:Theme_l})],B.prototype,"effectiveTheme",null),B=$=(0,tslib_es6._)([(0,subclass.$)("esri.views.View")],B);const J=globalThis.$arcgis;J&&!J.views&&Object.defineProperty(J,"views",{configurable:!1,enumerable:!0,writable:!1,value:B.views});const K=B;function Q(e){return e.layerViews}var vec2=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js"),vec2f64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js"),viewpointUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/viewpointUtils.js"),JSONSupport=__webpack_require__("./node_modules/@arcgis/core/core/JSONSupport.js"),common=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/common.js"),mat2d=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat2d.js"),mat2df32=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat2df32.js"),mat2df64=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat2df64.js"),mat3=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js"),mat3f32=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js"),vec2f32=__webpack_require__("./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f32.js");function vec2_t(t){return function vec2_n(n){return n instanceof Float32Array&&n.length>=2}(t)||function vec2_r(n){return Array.isArray(n)&&n.length>=2}(t)}var G,Point=__webpack_require__("./node_modules/@arcgis/core/geometry/Point.js"),normalizeUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/normalizeUtils.js");const O=[0,0];let W=G=class extends JSONSupport.A{constructor(t){super(t),this._viewpoint2D={center:(0,vec2f64.vt)(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Extent.default,this.id=0,this.inverseTransform=(0,mat2df64.vt)(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=(0,mat2df64.vt)(),this.transformNoRotation=(0,mat2df64.vt)(),this.displayMat3=(0,mat3f32.vt)(),this.displayViewMat3=(0,mat3f32.vt)(),this.viewMat3=(0,mat3f32.vt)(),this.viewMat2d=(0,mat2df32.vt)(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const i=this._viewpoint2D,e=t.targetGeometry;i.center[0]=e.x,i.center[1]=e.y,i.rotation=t.rotation,i.scale=t.scale,i.spatialReference=e.spatialReference}this._update()}get visibleArea(){const[t,i]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,i),this.toMap([0,0],t,i),this.toMap([0,0],t,0)]}copy(t){const i=this.size,e=this.viewpoint;return e&&i?(this.viewpoint=(0,viewpointUtils.C)(e,t.viewpoint),this._set("size",(0,vec2.C)(i,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new G({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,i,e){return vec2_t(i)?(0,vec2.l0)(t,i,this.inverseTransform):(O[0]=i,O[1]=e,(0,vec2.l0)(t,O,this.inverseTransform))}toScreen(t,i,e){return vec2_t(i)?(0,vec2.l0)(t,i,this.transform):(O[0]=i,O[1]=e,(0,vec2.l0)(t,O,this.transform))}toScreenNoRotation(t,i,e){return vec2_t(i)?(0,vec2.l0)(t,i,this.transformNoRotation):(O[0]=i,O[1]=e,(0,vec2.l0)(t,O,this.transformNoRotation))}wrapMapCoordinate(t,i){(0,vec2.C)(t,i);const[e]=i,[s]=this.center,{extent:o,spatialReference:r}=this;let{xmin:a,xmax:n}=o;if(r.isWrappable){const t=(0,viewpointUtils.FT)(r)/2;a=Math.max(a,s-t),n=Math.min(n,s+t)}return(e<a||e>n)&&(t[0]=(0,normalizeUtils.O7)(e,s,r)),t}getScreenTransform(t,i){const{center:e}=this._viewpoint2D,s=this._get("pixelRatio")||1,o=this._get("size");return(0,viewpointUtils.GL)(t,e,o,i,0,s),t}_update(){const{center:t,spatialReference:e,scale:s,rotation:o}=this._viewpoint2D,h=this._get("pixelRatio")||1,c=this._get("size"),u=new Viewpoint.A({targetGeometry:new Point.default(t[0],t[1],e),scale:s,rotation:o});if(this._set("viewpoint",u),!c||!e||!s)return;this.resolution=(0,viewpointUtils.Hn)(u),this.rotation=o,this.scale=s,this.spatialReference=e,(0,vec2.C)(this.center,t);const j=0!==c[0]?2/c[0]:0,g=0!==c[1]?-2/c[1]:0;(0,mat3.hZ)(this.displayMat3,j,0,0,0,g,0,-1,1,1);const R=(0,mat3.D_)(this.viewMat3),_=(0,vec2f32.fA)(c[0]/2,c[1]/2),b=(0,vec2f32.fA)(-c[0]/2,-c[1]/2),z=(0,common.DF)(o);(0,mat3.Tl)(R,R,_),(0,mat3.e$)(R,R,z),(0,mat3.Tl)(R,R,b),(0,mat3.lw)(this.displayViewMat3,this.displayMat3,R);const S=(0,mat2d.kN)(this.viewMat2d,_);return(0,mat2d.e$)(S,S,z),(0,mat2d.Tl)(S,S,b),(0,viewpointUtils.Z7)(this.extent,u,c),(0,viewpointUtils.RG)(this.transform,u,c,h),(0,mat2d.B8)(this.inverseTransform,this.transform),(0,viewpointUtils.cp)(this.transformNoRotation,u,c,h),this.worldScreenWidth=(0,viewpointUtils.hV)(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],W.prototype,"id",void 0),(0,tslib_es6._)([(0,property.MZ)({value:1,json:{write:!0}})],W.prototype,"pixelRatio",null),(0,tslib_es6._)([(0,property.MZ)({json:{write:!0}})],W.prototype,"size",null),(0,tslib_es6._)([(0,property.MZ)()],W.prototype,"spatialReference",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Viewpoint.A,json:{write:!0}})],W.prototype,"viewpoint",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],W.prototype,"visibleArea",null),W=G=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.ViewState")],W);const ViewState_L=W;var PaddedViewState_l,PaddedViewState_m;let PaddedViewState_g=PaddedViewState_l=class extends Accessor.A{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new PaddedViewState_l({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};(0,tslib_es6._)([(0,property.MZ)()],PaddedViewState_g.prototype,"left",void 0),(0,tslib_es6._)([(0,property.MZ)()],PaddedViewState_g.prototype,"top",void 0),(0,tslib_es6._)([(0,property.MZ)()],PaddedViewState_g.prototype,"right",void 0),(0,tslib_es6._)([(0,property.MZ)()],PaddedViewState_g.prototype,"bottom",void 0),PaddedViewState_g=PaddedViewState_l=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.PaddedViewState.Padding")],PaddedViewState_g);let PaddedViewState_w=PaddedViewState_m=class extends ViewState_L{constructor(...t){super(...t),this.paddedViewState=new ViewState_L,this._updateContent=(()=>{const t=(0,vec2f64.vt)();return()=>{const e=this._get("size"),i=this._get("padding");if(!e||!i)return;const o=this.paddedViewState;(0,vec2.hZ)(t,i.left+i.right,i.top+i.bottom),(0,vec2.Re)(t,e,t),(0,vec2.C)(o.size,t);const s=o.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles((0,reactiveUtils.watch)((()=>[this.size,this.padding]),(()=>this._updateContent()),reactiveUtils.OH)),this.padding=new PaddedViewState_g,this.size=[0,0]}set padding(t){this._set("padding",t||new PaddedViewState_g)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const i=this._get("padding");i&&(e=(0,viewpointUtils.nr)(t.clone(),t,this._get("size"),i));const{targetGeometry:o,rotation:s,scale:r}=e,{x:p,y:d,spatialReference:a}=o,n=this._viewpoint2D;n.center[0]=p,n.center[1]=d,n.rotation=s,n.scale=r,n.spatialReference=a,this._update()}}clone(){return new PaddedViewState_m({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};(0,tslib_es6._)([(0,property.MZ)()],PaddedViewState_w.prototype,"paddedViewState",void 0),(0,tslib_es6._)([(0,property.MZ)({type:PaddedViewState_g})],PaddedViewState_w.prototype,"padding",null),(0,tslib_es6._)([(0,property.MZ)()],PaddedViewState_w.prototype,"viewpoint",null),PaddedViewState_w=PaddedViewState_m=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.PaddedViewState")],PaddedViewState_w);const PaddedViewState_f=PaddedViewState_w;var RenderState=__webpack_require__("./node_modules/@arcgis/core/views/support/RenderState.js"),Scheduler=__webpack_require__("./node_modules/@arcgis/core/views/support/Scheduler.js");class FrameTask_h{constructor(a){this.view=a,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=(0,Scheduler.mj)(),this._schedulerHandle=(0,reactiveUtils.when)((()=>this._scheduler.updating),(()=>this.requestFrame())),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),null==this.view.animation?.target||(0,promiseUtils.$X)(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=e=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:t,graphicsView:a,labelManager:s,state:{id:i}}=this.view;t?.forEach(this._updateLayerView,this),null!=s&&(s.lastUpdateId!==i&&(s.viewChange(),s.lastUpdateId=i),s.updateRequested&&s.processUpdate(this._updateParameters)),null!=a&&(a.lastUpdateId!==i&&(a.viewChange(),a.lastUpdateId=i),a.updateRequested&&a.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=RenderState.M.ANIMATING:this.view.interacting?this._scheduler.state=RenderState.M.INTERACTING:this._scheduler.state=RenderState.M.IDLE,this._scheduler.frame(e)||this._updateRequested||this._scheduler.state!==RenderState.M.IDLE||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new PaddedViewState_f,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=(0,reactiveUtils.watch)((()=>e.stationary),(e=>{this.stationary=e,this.requestFrame()})),this._frameTaskHandle=(0,scheduling.mg)(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const t=this.view.state,a=e.lastUpdateId;null!=a&&(this.stationary||e.moving)||(e.moving=!0),a!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}}let ViewAnimation_p=class extends core_Promise.A{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=(0,promiseUtils.Tw)(),this.addResolvingPromise(this._resolver.promise)}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._resolver?.reject(new core_Error.A("ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._resolver?.resolve())}update(t,s){s||(s=(0,promiseUtils.$X)(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",s)}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ViewAnimation_p.prototype,"done",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:String})],ViewAnimation_p.prototype,"state",void 0),(0,tslib_es6._)([(0,property.MZ)()],ViewAnimation_p.prototype,"target",void 0),ViewAnimation_p=(0,tslib_es6._)([(0,subclass.$)("esri.views.ViewAnimation")],ViewAnimation_p),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(ViewAnimation_p||(ViewAnimation_p={}));const ViewAnimation_a=ViewAnimation_p;let GoToManager_h=class extends Accessor.A{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,e){if(!t)return void Logger.A.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new ViewAnimation_a;this.view.animation=i,await(0,reactiveUtils.C_)((()=>this.view.ready),e);const s={...e,animate:e?.animate??!(0,a11yUtils.O)(),animationMode:e?.animationMode??"auto"},{extent:a,spatialReference:c,size:m,viewpoint:h,constraints:g,padding:w,allLayerViews:d}=this.view,u=(0,viewpointUtils.vt)(t,{extent:a,spatialReference:c,size:m,viewpoint:h,constraints:g,padding:w,allLayerViews:d,pickClosestTarget:e?.pickClosestTarget??!0});return i?.update(u),this._gotoTask={},s.animate?this._gotoAnimated(u,s):this._gotoImmediate(u,s)}_gotoImmediate(t,o){const e=this._gotoTask,r=this.view.animation,a=t.then((t=>{if((0,promiseUtils.Te)(o),e!==this._gotoTask)throw new core_Error.A("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=r.target=t,r.finish()}));return this._cancellableGoTo(e,r,a,o)}_gotoAnimated(t,o){const e=this._gotoTask,r=this.view.animation;if(!r)return Promise.resolve();const a=t.then((t=>{if((0,promiseUtils.Te)(o),e!==this._gotoTask)throw new core_Error.A("view:goto-interrupted","Goto was interrupted");return r.update(t),this.view.animationManager.animate(r,this.view.viewpoint,o),r.when().then((()=>{}),(()=>{}))}));return this._cancellableGoTo(e,r,a,o)}_cancellableGoTo(t,o,e,i){const r=()=>t===this._gotoTask;return(0,promiseUtils.qr)(e,i).finally((()=>{r()&&(o.done||o.stop())}))}};(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],GoToManager_h.prototype,"view",void 0),GoToManager_h=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.GoToManager")],GoToManager_h);var GeometryConstraint_l,LOD=__webpack_require__("./node_modules/@arcgis/core/layers/support/LOD.js"),Identifiable=__webpack_require__("./node_modules/@arcgis/core/core/Identifiable.js"),contains=__webpack_require__("./node_modules/@arcgis/core/geometry/support/contains.js"),coordsUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/coordsUtils.js");let GeometryConstraint_p=GeometryConstraint_l=class extends(Identifiable.A.NumericIdentifiableMixin(Accessor.A)){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(null==this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return(0,projection.project)(this.geometry,this.spatialReference)}catch(e){return Logger.A.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,r){if(null==this.normalizedGeometry)return e;const t=e.targetGeometry;if("extent"===this.normalizedGeometry.type?(0,contains.qz)(this.normalizedGeometry,t):(0,contains.m3)(this.normalizedGeometry,t))return e;const{coordinate:o}=function near_r(r,l){const{spatialReference:s}=l,a=[l.x,l.y];let c,m,x,f;const p=[0,0],u=function near_i(e){switch(e.type){case"extent":return[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]];case"polygon":return e.rings;case"polyline":return e.paths}}(r);for(let e=0;e<u.length;e++){const t=u[e];for(let r=0;r<t.length-1;r++){(0,coordsUtils.B1)(p,a,t,r);const i=(0,vec2.Io)(a,p);(null==c||i<c)&&(c=i,m=[...p],x=e,f=r)}}if(null==c||!m||null==x||null==f)throw new core_Error.A("nearest-coordinate:failed","Failed to find the nearest coordinate");const[y,d]=m;return{coordinate:new Point.default({x:y,y:d,spatialReference:s}),distance:c}}(this.normalizedGeometry,t);return o?(e.targetGeometry=o,e):e}clone(){return new GeometryConstraint_l({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};var RotationConstraint_i;(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],GeometryConstraint_p.prototype,"geometry",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],GeometryConstraint_p.prototype,"normalizedGeometry",null),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],GeometryConstraint_p.prototype,"spatialReference",void 0),GeometryConstraint_p=GeometryConstraint_l=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.constraints.GeometryConstraint")],GeometryConstraint_p);let RotationConstraint_n=RotationConstraint_i=class extends(Identifiable.A.NumericIdentifiableMixin(Accessor.A)){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(o,t){return this.enabled&&t?(this.rotationEnabled||(o.rotation=t.rotation),o):o}clone(){return new RotationConstraint_i({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};(0,tslib_es6._)([(0,property.MZ)()],RotationConstraint_n.prototype,"enabled",void 0),(0,tslib_es6._)([(0,property.MZ)()],RotationConstraint_n.prototype,"rotationEnabled",void 0),RotationConstraint_n=RotationConstraint_i=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.constraints.RotationConstraint")],RotationConstraint_n);const RotationConstraint_a=RotationConstraint_n;var ZoomConstraint_a;let ZoomConstraint_c=ZoomConstraint_a=class extends(Identifiable.A.NumericIdentifiableMixin(Accessor.A)){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:o,maxScale:s,minZoom:i,maxZoom:a}=this,c=-1,l=-1,r=!1,n=!1;if(0!==o&&0!==s&&o<s&&([o,s]=[s,o]),!t?.length)return this._set("effectiveMinScale",o),void this._set("effectiveMaxScale",s);t=t.map((e=>e.clone())),t.sort(((e,t)=>t.scale-e.scale)),t.forEach(((e,t)=>e.level=t));for(const f of t)!r&&o>0&&o>=f.scale&&(c=f.level,r=!0),!n&&s>0&&s>=f.scale&&(l=e?e.level:-1,n=!0),e=f;-1===i&&(i=0===o?0:c),-1===a&&(a=0===s?t.length-1:l),i=Math.max(i,0),i=Math.min(i,t.length-1),a=Math.max(a,0),a=Math.min(a,t.length-1),i>a&&([i,a]=[a,i]),o=t[i].scale,s=t[a].scale,t.splice(0,i),t.splice(a-i+1,t.length),t.forEach(((e,t)=>{this._lodByScale[e.scale]=e,this._scales[t]=e.scale})),this._set("effectiveLODs",t),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",a),this._set("effectiveMinScale",o),this._set("effectiveMaxScale",s)}constrain(e,t){if(t&&e.scale===t.scale)return e;const o=this.effectiveMinScale,s=this.effectiveMaxScale,i=e.targetGeometry,a=t&&t.targetGeometry,c=0!==s&&e.scale<s,l=0!==o&&e.scale>o;if(c||l){const c=l?o:s;if(t&&a){const o=(c-t.scale)/(e.scale-t.scale);i.x=a.x+(i.x-a.x)*o,i.y=a.y+(i.y-a.y)*o}e.scale=c}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),o=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(o>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const o=Math.floor(e),s=Math.ceil(e);return t[o]+(e-o)*(t[s]-t[o])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let o,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let i=0;i<t.length-1;i++){if(o=t[i],s=t[i+1],s===e)return i+this.effectiveMinZoom+1;if(o>e&&s<e)return i+this.effectiveMinZoom+1-(e-s)/(o-s)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const o=Math.round(this.scaleToZoom(e));return this.zoomToScale(o+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const o=Math.round(this.scaleToZoom(e));return this.zoomToScale(o-1)}clone(){return new ZoomConstraint_a({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce(((t,o)=>Math.abs(o-e)<=Math.abs(t-e)?o:t),this._scales[0])),this._lodByScale[e].scale}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ZoomConstraint_c.prototype,"effectiveLODs",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ZoomConstraint_c.prototype,"effectiveMinZoom",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ZoomConstraint_c.prototype,"effectiveMaxZoom",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ZoomConstraint_c.prototype,"effectiveMinScale",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ZoomConstraint_c.prototype,"effectiveMaxScale",void 0),(0,tslib_es6._)([(0,property.MZ)()],ZoomConstraint_c.prototype,"lods",void 0),(0,tslib_es6._)([(0,property.MZ)()],ZoomConstraint_c.prototype,"minZoom",void 0),(0,tslib_es6._)([(0,property.MZ)()],ZoomConstraint_c.prototype,"maxZoom",void 0),(0,tslib_es6._)([(0,property.MZ)()],ZoomConstraint_c.prototype,"minScale",void 0),(0,tslib_es6._)([(0,property.MZ)()],ZoomConstraint_c.prototype,"maxScale",void 0),(0,tslib_es6._)([(0,property.MZ)()],ZoomConstraint_c.prototype,"snapToZoom",void 0),ZoomConstraint_c=ZoomConstraint_a=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.constraints.ZoomConstraint")],ZoomConstraint_c);const ZoomConstraint_l=ZoomConstraint_c,MapViewConstraints_p={base:null,key:"type",typeMap:{extent:Extent.default,polygon:Polygon.A}};let MapViewConstraints_y=class extends Accessor.A{constructor(o){super(o),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Collection.A}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(o){o?this._set("geometry",o):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const o=this._get("_geometry");return o&&this.geometry===o.geometry&&this.view?.constraintsInfo.spatialReference===o.spatialReference?o:new GeometryConstraint_p({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new RotationConstraint_a({rotationEnabled:this.rotationEnabled})}get _zoom(){const o=this._get("_zoom"),t=this.lods||this.view?.constraintsInfo.lods,e=this.minZoom,r=this.maxZoom,s=this.minScale,n=this.maxScale,i=this.snapToZoom;return o&&o.lods===t&&o.minZoom===e&&o.maxZoom===r&&o.minScale===s&&o.maxScale===n&&o.snapToZoom===i?o:new ZoomConstraint_l({lods:t,minZoom:e,maxZoom:r,minScale:s,maxScale:n,snapToZoom:i})}canZoomInTo(o){const t=this.effectiveMaxScale;return 0===t||o>=t}canZoomOutTo(o){const t=this.effectiveMinScale;return 0===t||o<=t}constrain(o,t){return this._zoom.constrain(o,t),this._rotation.constrain(o,t),this._geometry.constrain(o,t),this.customConstraints.forEach((e=>e.constrain(o,t))),o}constrainByGeometry(o){return this._geometry.constrain(o),this.customConstraints.forEach((t=>t.applyPanConstraint?.(o))),o}fit(o){return this._zoom.fit(o)}zoomToScale(o){return this._zoom.zoomToScale(o)}scaleToZoom(o){return this._zoom.scaleToZoom(o)}snapScale(o){return this._zoom.snapToClosestScale(o)}snapToNextScale(o){return this._zoom.snapToNextScale(o)}snapToPreviousScale(o){return this._zoom.snapToPreviousScale(o)}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],MapViewConstraints_y.prototype,"effectiveLODs",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],MapViewConstraints_y.prototype,"effectiveMinScale",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],MapViewConstraints_y.prototype,"effectiveMaxScale",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],MapViewConstraints_y.prototype,"effectiveMinZoom",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],MapViewConstraints_y.prototype,"effectiveMaxZoom",null),(0,tslib_es6._)([(0,property.MZ)({types:MapViewConstraints_p,value:null})],MapViewConstraints_y.prototype,"geometry",null),(0,tslib_es6._)([(0,property.MZ)({type:[LOD.A]})],MapViewConstraints_y.prototype,"lods",void 0),(0,tslib_es6._)([(0,property.MZ)()],MapViewConstraints_y.prototype,"minScale",void 0),(0,tslib_es6._)([(0,property.MZ)()],MapViewConstraints_y.prototype,"maxScale",void 0),(0,tslib_es6._)([(0,property.MZ)()],MapViewConstraints_y.prototype,"minZoom",void 0),(0,tslib_es6._)([(0,property.MZ)()],MapViewConstraints_y.prototype,"maxZoom",void 0),(0,tslib_es6._)([(0,property.MZ)()],MapViewConstraints_y.prototype,"rotationEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)()],MapViewConstraints_y.prototype,"snapToZoom",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Collection.A})],MapViewConstraints_y.prototype,"customConstraints",void 0),(0,tslib_es6._)([(0,property.MZ)()],MapViewConstraints_y.prototype,"view",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],MapViewConstraints_y.prototype,"version",null),(0,tslib_es6._)([(0,property.MZ)({type:GeometryConstraint_p,readOnly:!0})],MapViewConstraints_y.prototype,"_geometry",null),(0,tslib_es6._)([(0,property.MZ)({type:RotationConstraint_a})],MapViewConstraints_y.prototype,"_rotation",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:ZoomConstraint_l})],MapViewConstraints_y.prototype,"_zoom",null),MapViewConstraints_y=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.MapViewConstraints")],MapViewConstraints_y);const MapViewConstraints_f=MapViewConstraints_y;var Warning=__webpack_require__("./node_modules/@arcgis/core/core/Warning.js"),pe=__webpack_require__("./node_modules/@arcgis/core/chunks/pe.js");let z=class extends Accessor.A{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([(0,reactiveUtils.watch)((()=>this.constraints?.version),(t=>{this.constraints&&t&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))}),reactiveUtils.OH)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:e}=this.state.paddedViewState;return this.state.commitProperty("id"),new Point.default({x:t[0],y:t[1],spatialReference:e})}set center(t){if(null==t)return;if(!this.ready)return void this._set("center",t);let e;try{e=this._project(t,this.state.spatialReference)}catch(o){return void Logger.A.getLogger(this).error(new core_Error.A("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:o}))}const i=this.viewpoint;(0,viewpointUtils.Ji)(i,i,e),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(null==t)return;if(!t.width||!t.height)return void Logger.A.getLogger(this).error(new core_Error.A("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let e;try{e=this._project(t,this.state.spatialReference)}catch(o){return void Logger.A.getLogger(this).error(new core_Error.A("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:o}))}const i=this.viewpoint;(0,viewpointUtils.b)(i,i,e,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const e=this.viewpoint;(0,viewpointUtils.$0)(e,e,t),this.viewpoint=e}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const e=this._get("extent");return void(e&&(this._set("extent",void 0),this._set("center",e.center)))}const e=this.viewpoint;(0,viewpointUtils.UR)(e,e,t),this.viewpoint=e}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){if(null==t)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,o;try{i=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?o=new core_Error.A("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):null==t.targetGeometry&&(o=new core_Error.A("mapview:invalid-viewpoint","geometry not defined"))}catch(a){o=new core_Error.A("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:a})}if(o)return void Logger.A.getLogger(this).error(o);this._scaleBeforeChangingSpatialReference=null;const n=new Viewpoint.A({targetGeometry:new Point.default,scale:0,rotation:0});(0,viewpointUtils.C)(n,i),this.constraints?.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(t){if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const e=this._get("extent");return void(e&&(this._set("extent",void 0),this._set("center",e.center)))}const e=this.constraints?.zoomToScale(t)??0;if(!e)return void this._set("zoom",-1);const i=this.viewpoint;(0,viewpointUtils.UR)(i,i,e),this.viewpoint=i,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:e,constraints:i}=this,s=this._get("center"),r=this._get("extent"),o=this._get("scale"),n=this._get("rotation"),a=this._get("viewpoint"),c=this._get("zoom"),p=null!=c&&null!=i&&i.zoomToScale(c)||void 0;let h,l,d;const v=a?.rotation,u=a?.targetGeometry;"extent"===u?.type?h=u:"point"===u?.type&&(l=u,d=a?.scale);const m=r??h;return{center:s??l??m?.center,rotation:n??v,scale:(o??p??d??(m&&(0,viewpointUtils.AU)(m,[t[0]-e.left-e.right,t[1]-e.top-e.bottom])))||void 0}}startup(t,e,i,s){const o=t.targetGeometry;try{this._project(t,i)}catch(n){Logger.A.getLogger(this).warn(new Warning.A("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:o.toJSON(),spatialReference:i,error:n})),t.targetGeometry=s||new Point.default({x:0,y:0,spatialReference:i})}this.constraints?.fit(t),this._set("state",new PaddedViewState_f({padding:this.padding,size:e,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,e],spatialReference:i,rotation:s,scale:r}=this.state.paddedViewState,o=new Point.default({x:t,y:e,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",r),this._set("state",null)}changeSpatialReference(t){const i=this.state.paddedViewState.clone();if(null==this._scaleBeforeChangingSpatialReference)this._scaleBeforeChangingSpatialReference=i.scale;else{const t=i.viewpoint.clone();t.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=t}const s=i.clone(),[o,n]=i.center;let a=null;try{a=this._project(new Point.default({x:o,y:n,spatialReference:i.spatialReference}),t)}catch(h){(0,pe.i)()||Logger.A.getLogger(this).warn(new Warning.A("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:a?.toJSON(),spatialReference:t,error:h}))}a||(a=new Point.default({x:0,y:0,spatialReference:t}));const p=(0,viewpointUtils.Ji)(new Viewpoint.A({targetGeometry:new Point.default,scale:0,rotation:0}),i.viewpoint,a);s.viewpoint=p;try{const e=20,r=[i.size[0]/2,i.size[1]/2],o=[r[0]+e,r[1]],n=i.toMap([0,0],o),{x:a,y:c}=this._project(new Point.default({x:n[0],y:n[1],spatialReference:i.spatialReference}),t);n[0]=a,n[1]=c,s.toScreen(n,n);const h=(0,viewpointUtils.s5)(r,n,o),l=Math.hypot(n[0]-r[0],n[1]-r[1])/e;!Number.isFinite(l)||Math.abs(l)>4?(p.rotation=0,p.targetGeometry=new Point.default({x:0,y:0,spatialReference:t})):(p.scale*=l,p.scale>(0,has.A)("mapview-srswitch-adjust-rotation-scale-threshold")?p.rotation=0:p.rotation+=Number.isFinite(h)?h:0)}catch{}this._get("constraints")?.constrain(p,void 0),this._get("state").viewpoint=p}resize(t,e){if(!this.ready)return;const i=this.state;let s=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.slice();i.size=[t,e],(0,viewpointUtils.XR)(s,s,r,this.state.paddedViewState.size,this.resizeAlign),s=this.constraints?.constrain(s,void 0)??s,this.state.viewpoint=s}toMap(t){if(!this.ready)return null;const[i,s]=this.state.toMap([0,0],[t.x,t.y]),r=this.state.spatialReference;return new Point.default({x:i,y:s,spatialReference:r})}toScreen(t,e){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),s=[i.x,i.y];return!1===e?.pickClosestTarget||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),(0,screenUtils.tc)(s[0],s[1])}_project(t,e){const i=t?.targetGeometry||t;if(!e)return t;if(!i)return null;if(e.imageCoordinateSystem||i.spatialReference?.imageCoordinateSystem)return t;if((0,spatialReferenceUtils.aI)(e,i.spatialReference))return t;const r=(0,projection.project)(i,e);if(!r)throw new core_Error.A("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:e});return function V(t){return"esri.Viewpoint"===t?.declaredClass}(t)?(t.targetGeometry=r,t):r}};function support_r(r,e){switch(e){case"primary":return"touch"===r.pointerType||0===r.button;case"secondary":return"touch"!==r.pointerType&&2===r.button;case"tertiary":return"touch"!==r.pointerType&&1===r.button}}function support_e(e,t){return t.some((t=>support_r(e,t)))}function support_n(r,{dragPrimary:e,dragSecondary:t,dragTertiary:n}){return[{key:"primary",value:e},{key:"secondary",value:t},{key:"tertiary",value:n}].filter((e=>e.value===r)).map((r=>r.key))}(0,tslib_es6._)([(0,property.MZ)({type:Point.default})],z.prototype,"center",null),(0,tslib_es6._)([(0,property.MZ)()],z.prototype,"constraints",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Extent.default})],z.prototype,"extent",null),(0,tslib_es6._)([(0,property.MZ)({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],z.prototype,"padding",null),(0,tslib_es6._)([(0,property.MZ)()],z.prototype,"ready",void 0),(0,tslib_es6._)([(0,property.MZ)()],z.prototype,"resizeAlign",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],z.prototype,"resolution",null),(0,tslib_es6._)([(0,property.MZ)({type:Number})],z.prototype,"rotation",null),(0,tslib_es6._)([(0,property.MZ)({type:Number})],z.prototype,"scale",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],z.prototype,"state",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Viewpoint.A})],z.prototype,"viewpoint",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],z.prototype,"visibleArea",null),(0,tslib_es6._)([(0,property.MZ)()],z.prototype,"zoom",null),z=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.ViewStateManager")],z);class DoubleClickZoom_a extends InputHandler.l{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,(t=>this._handleDoubleClick(t,i)))}_handleDoubleClick(t,a){support_r(t.data,"primary")&&(t.stopPropagation(),a?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class DoubleTapDragZoom_e extends InputHandler.l{constructor(t,e,a){super(!0),this.view=t,this.pointerType=e,this.registerIncoming("double-tap-drag",a,(t=>this._handleDoubleTapDrag(t)))}_handleDoubleTapDrag(t){const{data:e}=t,{pointerType:a}=e;if(a!==this.pointerType)return;t.stopPropagation();const{action:s,delta:i}=e,{view:r}=this,{mapViewNavigation:n}=r;switch(s){case"begin":{const{scale:t}=r;this._startScale=t,this._currentScale=t,this._previousDelta=i,n.begin();break}case"update":{if(this._previousDelta.y===i.y)return;this._previousDelta=i;const t=1.015**i.y,e=this._startScale*t,a=e/this._currentScale;n.setViewpointImmediate(a),this._currentScale=e;break}case"end":{const{constraints:t}=r,{effectiveLODs:e,snapToZoom:a}=t;if(!a||!e)return void n.end();const s=t.snapScale(this._currentScale),o=(i.y>0?Math.max(s,t.snapToPreviousScale(this._startScale)):Math.min(s,t.snapToNextScale(this._startScale)))/this._currentScale;n.zoom(o).then((()=>{n.end()}));break}}}}class DragEventSeparator_t{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const s=t.data,i=s.pointers.size;switch(s.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){this._startEvent=t,this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}}class DragPan_n extends InputHandler.l{constructor(t,i,a){super(!0),this.view=t,this.pointerActions=i,this.registerIncoming("drag",a,(t=>this._handleDrag(t))),this.registerIncoming("pointer-down",(()=>this.stopMomentumNavigation()))}onInstall(i){super.onInstall(i),this._dragEventSeparator=new DragEventSeparator_t({start:(t,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(t,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(t,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(t,i)=>1===t&&support_e(i.data,this.pointerActions)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class DragRotate_o extends InputHandler.l{constructor(a,o,r){super(!0),this._view=a,this.pointerActions=o;const e=this._view.mapViewNavigation;this._dragEventSeparator=new DragEventSeparator_t({start:(t,a)=>{e.rotate.begin(this._view,a.data),a.stopPropagation()},update:(t,a)=>{e.rotate.update(this._view,a.data),a.stopPropagation()},end:(t,a)=>{e.rotate.end(),a.stopPropagation()},condition:(t,a)=>1===t&&support_e(a.data,this.pointerActions)}),this.registerIncoming("drag",r,(t=>this._dragEventSeparator.handle(t)))}}var vec32=__webpack_require__("./node_modules/@arcgis/core/chunks/vec32.js");function gamepadAndKeyboardUtils_n(t){let n=t*t;return t<0&&(n*=-1),n}class GamepadNavigation_m extends InputHandler.l{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Handles.A,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",(t=>this._handleGamePadEvent(t))),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([(0,reactiveUtils.watch)((()=>this._view.navigation.gamepad?.enabled),(t=>{t?(this._handle.resume(),this._frameTask||(this._frameTask=(0,scheduling.mg)({update:t=>this._frameUpdate(t.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))}),reactiveUtils.Vh)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const e=this._view.navigation.gamepad.device;e&&t.data.device!==e||this._currentDevice&&this._currentDevice!==t.data.device||("end"===t.data.action?(this._currentDevice=null,function gamepadAndKeyboardUtils_a(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}(this._transformation)):(this._currentDevice=t.data.device,function gamepadAndKeyboardUtils_i(a,i,o){const s=o,e=a.state,r=a.device,l="forward-down"===i.tiltDirection?1:-1;return"standard"===r.deviceType?(s.translation[0]=gamepadAndKeyboardUtils_n(e.axes[0]),s.translation[1]=gamepadAndKeyboardUtils_n(e.axes[1]),s.translation[2]=gamepadAndKeyboardUtils_n(e.buttons[7])-gamepadAndKeyboardUtils_n(e.buttons[6]),s.heading=gamepadAndKeyboardUtils_n(e.axes[2]),s.tilt=gamepadAndKeyboardUtils_n(e.axes[3])):"spacemouse"===r.deviceType&&(s.translation[0]=1.2*gamepadAndKeyboardUtils_n(e.axes[0]),s.translation[1]=1.2*gamepadAndKeyboardUtils_n(e.axes[1]),s.translation[2]=2*-gamepadAndKeyboardUtils_n(e.axes[2]),s.heading=1.2*gamepadAndKeyboardUtils_n(e.axes[5]),s.tilt=1.2*gamepadAndKeyboardUtils_n(e.axes[3])),s.tilt*=l,(0,vec32.h)(s.translation,s.translation,1),s}(t.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(t){const e=this._transformation;if(function gamepadAndKeyboardUtils_s(t){return 0===t.translation[0]&&0===t.translation[1]&&0===t.translation[2]&&0===t.heading&&0===t.tilt&&0===t.zoom}(e))return void this._frameTask?.pause();const i=this._view.viewpoint.clone(),a=this._view.navigation.gamepad.velocityFactor,r=GamepadNavigation_*a*t;(0,viewpointUtils.aA)(i,i,[e.translation[0]*r,-e.translation[1]*r]);const o=1+e.translation[2]*GamepadNavigation_c*t,h=this._view.constraints.rotationEnabled?-e.heading*GamepadNavigation_d*t:0,m=this._view.size,v=[m[0]/2,m[1]];(0,viewpointUtils.WK)(i,i,o,h,v,m);const p=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=p}}const GamepadNavigation_d=.06,GamepadNavigation_=.7,GamepadNavigation_c=6e-4;function VisibilityChange_i(i){const t=()=>i("visible"===document.visibilityState);return document.addEventListener("visibilitychange",t),(0,handleUtils.hA)((()=>document.removeEventListener("visibilitychange",t)))}class KeyPan_e extends InputHandler.l{constructor(i,e,s){super(!0),this.view=i,this.keys=e,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=i=>{const t=this._keyMap[i.data.key];if(i.modifiers.has("Meta")||i.modifiers.has("Control"))return void this._stopMovement();if(null==t)return;i.stopPropagation(),i.preventDefault();const e="key-down"===i.type;if(this._pressedKeys[e?"add":"delete"](t),e){if(this._direction===t)return;this._direction=t,this._isSticky=!1,this._setTimeout((()=>{this._isSticky&&this._handlePopKey()}))}else{const i=void 0===this._timeout,t=this._pressedKeys.size>0;i||t?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),null==this._direction&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[e.left]:"left",[e.right]:"right",[e.up]:"up",[e.down]:"down"},this.registerIncoming("key-down",s,this._handleKey),this.registerIncoming("key-up",s,this._handleKey),this.registerIncoming("blur",s,this._stopMovement),this._visibilityHandle=VisibilityChange_i((i=>i?null:this._stopMovement()))}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(i){const t=null!=this._currentDirection;if(null!=i){if(t||this.view.mapViewNavigation.begin(),this._currentDirection!==i)switch(i){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else t&&this.view.mapViewNavigation.stop();this._currentDirection=i}_setTimeout(i){clearTimeout(this._timeout),this._timeout=void 0===i?void 0:setTimeout((()=>{this._timeout=void 0,i()}),this._stickyKeyDuration)}}class KeyRotate_t extends InputHandler.l{constructor(e,t,s){super(!0),this.view=e,this.keys=t,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(t),this.registerIncoming("key-down",s,(e=>this._handleKeyDown(e))),this.registerIncoming("key-up",s,(e=>this._handleKeyUp(e))),this.registerIncoming("blur",s,(()=>this._handleStop())),this._visibilityHandle=VisibilityChange_i((e=>e?null:this._handleStop()))}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,i){for(const t of e)this._keyToDirection.set(t,i)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const t=e.modifiers;if(t.size>0&&!t.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection.get(e.data.key);if(this._pressed=null!=s,this._pressed){if(e.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}}var KeyZoom_t;!function(o){o[o.IN=0]="IN",o[o.OUT=1]="OUT"}(KeyZoom_t||(KeyZoom_t={}));class KeyZoom_e extends InputHandler.l{constructor(o,e,i){super(!0),this.view=o,this.keys=e,this._keysToZoomAction={},this.registerIncoming("key-down",i,(o=>this._handleKeyDown(o))),e.zoomIn.forEach((o=>this._keysToZoomAction[o]=KeyZoom_t.IN)),e.zoomOut.forEach((o=>this._keysToZoomAction[o]=KeyZoom_t.OUT))}_handleKeyDown(o){this._handleKey(o)}_handleKey(o){const e=o.modifiers;if(e.size>0&&!e.has("Shift"))return;const{key:i}=o.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view;let r=null;switch(n){case KeyZoom_t.IN:r=s.zoomIn();break;case KeyZoom_t.OUT:r=s.zoomOut();break;default:return}s.begin(),r.then((()=>s.end())),o.stopPropagation()}}class MouseWheelZoom_o extends InputHandler.l{constructor(e,t){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,(e=>this._handleMouseWheel(e)))}_handleMouseWheel(e){if("zoom"!==this._view.navigation.actionMap.mouseWheel)return;if(e.preventDefault(),e.stopPropagation(),!this._canZoom)return;const o=this._view.mapViewNavigation,{x:i,y:n,deltaY:s}=e.data,a=1/.6**(1/60*s),h=o.zoom(a,[i,n]);h&&(this._canZoom=!1,h.catch((()=>{})).then((()=>{this._canZoom=!0,o.end()})))}}class PinchAction_a extends InputHandler.l{constructor(i){super(!0),this.view=i,this.registerIncoming("drag",(t=>this._handleDrag(t))),this.registerIncoming("pointer-down",(()=>this._stopMomentumNavigation()));const a=this.view.mapViewNavigation;this._dragEventSeparator=new DragEventSeparator_t({start:(t,i)=>{a.pinch.begin(this.view,i.data),i.stopPropagation()},update:(t,i)=>{a.pinch.update(this.view,i.data),i.stopPropagation()},end:(t,i)=>{a.pinch.end(this.view),i.stopPropagation()},condition:t=>t>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function GamepadState_t(t){const n=t.native;return n?{buttons:n.buttons.map((t=>t.pressed?t.value||1:0)),axes:n.axes.map((n=>function GamepadState_s(t,n){const e=Math.abs(t);return e<n?0:Math.sign(t)*(e-n)/(1-n)}(n,t.axisThreshold)))}:{buttons:[],axes:[]}}class GamepadSource_a{constructor(e,t){this._element=e,this._input=t,this._hasEventListeners=!1,this._onConnectGamepad=e=>{this._connectGamepad(e.gamepad)},this._onDisconnectGamepad=e=>{const t=e.gamepad,n=t.index,i=this._inputDevices[n];i&&(this._emitGamepadEvent(t,GamepadState_t(i),!1),this._inputDevices.splice(n,1),this._latestUpdate.splice(n,1),this._input.gamepad.devices.remove(i),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const n="getGamepads"in window.navigator,i=window.isSecureContext;this.supported=n&&i,this.supported&&(GamepadSource_d((e=>this._connectGamepad(e))),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const s=new GamepadInputDevice_o(e);"unknown"!==s.deviceType&&(this._inputDevices[e.index]=s,this._input.gamepad.devices.add(s)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==this._frameTask&&(this._frameTask=(0,scheduling.mg)({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),t=this._element.contains(document.activeElement),a="document"===this._input.gamepad.enabledFocusMode&&!e||"view"===this._input.gamepad.enabledFocusMode&&!t;GamepadSource_d((e=>{const t=this._inputDevices[e.index];if(!t)return;const o=this._latestUpdate[e.index],d=GamepadState_t(t),c=a||function GamepadState_e(t){for(let n=0;n<t.axes.length;n++)if(0!==t.axes[n])return!1;for(let n=0;n<t.buttons.length;n++)if(0!==t.buttons[n])return!1;return!0}(d);if(o){if(o.timestamp===e.timestamp)return;if(!o.active&&c)return;if(function GamepadState_n(t,n){if(t.axes.length!==n.axes.length)return!1;if(t.buttons.length!==n.buttons.length)return!1;for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==n.axes[e])return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==n.buttons[e])return!1;return!0}(o.state,d))return}this._emitGamepadEvent(e,d,!c)}))}_emitGamepadEvent(e,t,s){const n=this._latestUpdate[e.index],i=n&&n.active;if(!i&&!s)return;const a=!i&&s?"start":i&&s?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:s},this._callback&&this._callback({device:this._inputDevices[e.index],state:t,action:a})}}function GamepadSource_o(e){if(!e)return!1;if(!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function GamepadSource_d(e){for(const t of navigator.getGamepads())GamepadSource_o(t)&&e(t)}const BrowserEventSource_i=(0,has.A)("edge"),BrowserEventSource_a=(0,has.A)("chrome"),BrowserEventSource_o=(0,has.A)("ff"),BrowserEventSource_s=(0,has.A)("safari"),BrowserEventSource_h={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class BrowserEventSource_l{constructor(e,n){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new GamepadSource_a(e,n),this._gamepadSource.onEvent=e=>this._callback("gamepad",e)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach((e=>this._releasePointerCaptureSafe(e))),this._activePointerCaptures.clear(),this._gamepadSource=(0,maybe.pR)(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const t in this._active)if(!e||!e.has(t)){const e=this._active[t];this._element.removeEventListener(BrowserEventSource_c[t],e),delete this._active[t]}e&&e.forEach((e=>{if(!this._active[e]&&BrowserEventSource_c[e]){const t=(this._eventHandlers[e]||this._handleDefault).bind(this,e);this._element.addEventListener(BrowserEventSource_c[e],t),this._active[e]=t}})),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,t){t?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?BrowserEventSource_h.touchNone:BrowserEventSource_h.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?BrowserEventSource_h.touchPan:BrowserEventSource_h.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(BrowserEventSource_h.touchNone),this._element.classList.remove(BrowserEventSource_h.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch(t){}}_updateNormalizedPointerLikeEvent(e,t){const i=(0,support_screenUtils.Uo)(this._element,e);return BrowserEventSource_l.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),t.x=i.x,t.y=i.y,t}_handleKey(e,t){const{key:n}=t;n&&"key-up"===e&&this._keyDownState.delete(n);const i={native:t,key:n,repeat:!!n&&this._keyDownState.has(n)};n&&"key-down"===e&&this._keyDownState.add(i.key),this._callback(e,i)}_handlePointer(e,t){const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,n)}_handlePointerPreventDefault(e,t){const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,n)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&(0,has.A)("mac")&&0===e.deltaY?e.deltaX:e.deltaY}_handleMouseWheel(e,t){let n=this._getDeltaFromTrackpadOrMouseWheel(t);switch(t.deltaMode){case 0:BrowserEventSource_i&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}BrowserEventSource_i?n*=.7:BrowserEventSource_a||BrowserEventSource_s?n*=.6:BrowserEventSource_o&&(n*=1.375);const h=Math.abs(n);h>100&&(n=n/h*200/(1+Math.exp(-.02*(h-100))));const l=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:n});this._callback(e,l)}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}_handleDefault(e,t){const n={native:t};t.preventDefault(),this._callback(e,n)}_preventAltKeyDefault(e){"Alt"===e.key&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}}BrowserEventSource_l.test={disableSubpixelCoordinates:!1};const BrowserEventSource_c={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class PreventContextMenu_e extends InputHandler.l{constructor(){super(!0),this.registerIncoming("context-menu",(t=>t.data.native.preventDefault()))}}const recognizers_support_t_maximumClickDelay=300,recognizers_support_t_movementUntilMouseDrag=1.5,recognizers_support_t_movementUntilPenDrag=6,recognizers_support_t_movementUntilTouchDrag=6,recognizers_support_t_holdDelay=500,recognizers_support_t_maximumDoubleClickDelay=250,recognizers_support_t_maximumDoubleClickDistance=10,recognizers_support_t_maximumDoubleTouchDelay=350,recognizers_support_t_maximumDoubleTouchDistance=35;function recognizers_support_n(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function support_u(e){const{native:t}=e,{pointerId:n,button:r,pointerType:o}=t;return"mouse"===o?`${n}:${r}`:`${o}`}class DoubleTapDrag_u extends InputHandler.l{constructor(e=recognizers_support_t_maximumDoubleClickDelay,a=recognizers_support_t_maximumDoubleClickDistance,n=recognizers_support_t_maximumDoubleTouchDelay,s=recognizers_support_t_maximumDoubleTouchDistance,u=clock.p){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=a,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=s,this._clock=u,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=(0,screenUtils.tc)(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new DragEventSeparator_t({start:(t,e)=>this._dragStart(t,e),update:(t,e)=>this._dragUpdate(e),end:(t,e)=>this._dragEnd(e)}),this.registerIncoming("drag",(t=>this._dragEventSeparator.handle(t))),this.registerIncoming("pointer-down",(t=>this._handlePointerDown(t))),this.registerIncoming("pointer-up",(()=>this._handlePointerUp()))}onUninstall(){this._pointerState.forEach((t=>{t.doubleTapTimeout=(0,maybe.xt)(t.doubleTapTimeout)}))}get hasPendingInputs(){for(const t of this._pointerState.values())if(null!=t.doubleTapTimeout)return!0;return!1}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=(0,maybe.xt)(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,e){if(!this._doubleTapDragReady||1!==t)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:o,modifiers:a}=e,{center:r}=o;this._dragStartCenter=r;const n=DoubleTapDrag_d("begin",(0,screenUtils.tc)(0,0),o);this._doubleTapDrag.emit(n,void 0,a),e.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:o}=t,{center:a}=e,r=DoubleTapDrag_d("update",(0,screenUtils.tc)(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),e);this._doubleTapDrag.emit(r,void 0,o),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:e,modifiers:o}=t,{center:a}=e,r=DoubleTapDrag_d("end",(0,screenUtils.tc)(a.x-this._dragStartCenter.x,a.y-this._dragStartCenter.y),e);this._doubleTapDrag.emit(r,void 0,o),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:e}=t,i=support_u(e),o=this._pointerState.get(i),{pointerType:a}=e.native;if(o){const r="touch"===a?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),recognizers_support_n(o.event.data,e)>r?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:e}=t,{pointerType:i}=e.native,o=support_u(e),a="touch"===i?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,r=this._clock.setTimeout((()=>this._clearPointerDown(o)),a);this._pointerState.set(o,{event:t,doubleTapTimeout:r}),this.refreshHasPendingInputs()}}function DoubleTapDrag_d(t,e,i){const{button:o,buttons:a,pointer:r,pointers:n,pointerType:s,timestamp:u}=i;return{action:t,delta:e,button:o,buttons:a,pointer:r,pointers:n,pointerType:s,timestamp:u}}var Drag_p,time=__webpack_require__("./node_modules/@arcgis/core/core/time.js");class Drag_s extends InputHandler.l{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,e,i,n){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:e.buttons,timestamp:n,pointers:Drag_o(this._activePointerMap),pointer:e,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const e=t.native.pointerId,i=Drag_a(this._activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(e,n);const s=Drag_h(n,Drag_r(this._activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(t){if(t&&null==t.x&&null==t.y)return;const e=t.native.pointerId,i=this._activePointerMap.get(e);i?i.event=t:this._addPointer(t)}_removePointer(t){const e=Drag_a(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(e)}_updatePointerAngles(t){const e=Drag_a(this._activePointerMap);this._activePointerMap.forEach((i=>{i.initialAngle=Drag_h(i,e)-t,i.lastAngle=Drag_h(i,e)-t}))}_emitEvent(t,e,i){const n=Drag_a(this._activePointerMap);this._drag.emit(this._createPayload(t,e,n,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,n=(0,time.l5)(t.timestamp);this._activePointerMap.get(i)&&(1===this._activePointerMap.size?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,n),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,(0,time.l5)(t.timestamp))))}_handlePointerDrag(t){const i=t.data,n=i.currentEvent,s=(0,time.l5)(t.timestamp);switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(n.native.pointerId)?(this._updatePointer(n),!this._isCurrentDragSuppressed&&this._emitEvent("update",n,s)):(this._addPointer(n),this._emitEvent("added",n,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(n),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",n,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}function Drag_r(e){const i=[];return e.forEach((e=>{i.push((0,screenUtils.tc)(e.event.x,e.event.y))})),function support_o(t,n){if(n?(n.radius=0,n.center.x=0,n.center.y=0):n={radius:0,center:(0,screenUtils.tc)()},0===t.length)return n;if(1===t.length)return n.center.x=t[0].x,n.center.y=t[0].y,n;if(2===t.length){const[e,r]=t,[o,u]=[r.x-e.x,r.y-e.y];return n.radius=Math.sqrt(o*o+u*u)/2,n.center.x=(e.x+r.x)/2,n.center.y=(e.y+r.y)/2,n}let r=0,o=0;for(let e=0;e<t.length;e++)r+=t[e].x,o+=t[e].y;r/=t.length,o/=t.length;const u=t.map((e=>e.x-r)),c=t.map((e=>e.y-o));let i=0,a=0,l=0,m=0,s=0,x=0,y=0;for(let e=0;e<u.length;e++){const t=u[e],n=c[e],r=t*t,o=n*n;i+=r,a+=o,l+=t*n,m+=r*t,s+=o*n,x+=t*o,y+=n*r}const h=.5*(m+x),D=.5*(s+y),g=i*a-l*l,f=(h*a-D*l)/g,b=(i*D-l*h)/g,p=(0,screenUtils.tc)(f+r,b+o);return{radius:Math.sqrt(f*f+b*b+(i+a)/t.length),center:p}}(i)}function Drag_a(t){const e=Drag_r(t);let i=0;return t.forEach((t=>{let n=Drag_h(t,e),s=n-t.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=t.lastAngle+s,t.lastAngle=n;const r=n-t.initialAngle;i+=r})),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function Drag_o(t){const e=new Map;return t.forEach(((t,i)=>e.set(i,t.event))),e}function Drag_h(t,e){const i=t.event,n=i.x-e.center.x,s=i.y-e.center.y;return Math.atan2(s,n)}!function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"}(Drag_p||(Drag_p={}));class ImmediateDoubleClick_m extends InputHandler.l{constructor(e=recognizers_support_t_maximumDoubleClickDelay,o=recognizers_support_t_maximumDoubleClickDistance,a=recognizers_support_t_maximumDoubleTouchDelay,m=recognizers_support_t_maximumDoubleTouchDistance,n=clock.p){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=o,this._maximumDoubleTouchDelay=a,this._maximumDoubleTouchDistance=m,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach((t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()})),super.onUninstall()}_handlePointerDown(t){const e=t.data,i=support_u(e);if(!this._pointerState.has(i)){const t={downButton:e.native.button,x:e.x,y:e.y,immediateDoubleClick:null};this._pointerState.set(i,t),this.startCapturingPointer(e.native)}}_handlePointerUp(t){const e=t.data,i=support_u(e),m=this._pointerState.get(i);if(m&&m.downButton===e.native.button){const i=m.immediateDoubleClick,o="touch"===t.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;i?(i.timeoutHandle.remove(),recognizers_support_n(i,t.data)>o?this._startImmediateDoubleClick(t,m):(this._immediateDoubleClick.emit(t.data,void 0,i.modifiers),this._removeState(e))):recognizers_support_n(m,t.data)>o?this._removeState(e):this._startImmediateDoubleClick(t,m)}}_startImmediateDoubleClick(t,e){const i="touch"===t.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;e.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout((()=>this._removeState(t.data)),i)}}_removeState(t){const e=support_u(t);this._pointerState.delete(e),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}class PointerClickHoldAndDrag_r extends InputHandler.l{constructor(e=recognizers_support_t_maximumClickDelay,i=recognizers_support_t_movementUntilMouseDrag,o=recognizers_support_t_movementUntilPenDrag,r=recognizers_support_t_movementUntilTouchDrag,s=recognizers_support_t_holdDelay,a=clock.p){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=o,this._movementUntilTouchDrag=r,this._holdDelay=s,this._clock=a,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",(t=>this._handlePointerDown(t))),this.registerIncoming("pointer-up",(t=>this._handlePointerLoss(t,"pointer-up"))),this.registerIncoming("pointer-capture-lost",(t=>this._handlePointerLoss(t,"pointer-capture-lost"))),this.registerIncoming("pointer-cancel",(t=>this._handlePointerLoss(t,"pointer-cancel"))),this._moveHandle=this.registerIncoming("pointer-move",(t=>this._handlePointerMove(t))),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach((t=>{t.holdTimeout=(0,maybe.xt)(t.holdTimeout)})),super.onUninstall()}_handlePointerDown(t){const e=t.data,i=e.native.pointerId;let n=null;0===this._pointerState.size&&(n=this._clock.setTimeout((()=>{const e=this._pointerState.get(i);if(e){if(!e.isDragging){const i=e.previousEvent;this._pointerHold.emit(i,void 0,t.modifiers),e.holdEmitted=!0}e.holdTimeout=null}}),this._holdDelay));const o={startEvent:e,previousEvent:e,startTimestamp:t.timestamp,isDragging:!1,downButton:e.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,o),this.startCapturingPointer(e.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const e=t.data,i=e.native.pointerId,n=this._pointerState.get(i);n&&(n.isDragging?this._pointerDrag.emit(PointerClickHoldAndDrag_s("update",n,e),void 0,n.modifiers):function recognizers_support_r(e,t){const n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}(e,n.startEvent)>this._getDragThreshold(e.native.pointerType)&&this._startDragging(t),n.previousEvent=e)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const e=t.data,i=e.native.pointerId;this._pointerState.forEach((n=>{null!=n.holdTimeout&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(PointerClickHoldAndDrag_s("start",n,e)):this._pointerDrag.emit(PointerClickHoldAndDrag_s("start",n,n.previousEvent),t.timestamp))}))}_handlePointerLoss(t,e){const i=t.data,n=i.native.pointerId,o=this._pointerState.get(n);o&&(null!=o.holdTimeout&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging?this._pointerDrag.emit(PointerClickHoldAndDrag_s("end",o,"pointer-up"===e?i:o.previousEvent),void 0,o.modifiers):"pointer-up"===e&&o.downButton===i.native.button&&t.timestamp-o.startTimestamp<=this._maximumClickDelay&&!o.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(n),this.stopCapturingPointer(i.native),0===this._pointerState.size&&this._moveHandle.pause())}}function PointerClickHoldAndDrag_s(t,e,i){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:i}}class SingleAndDoubleClick_l extends InputHandler.l{constructor(t=recognizers_support_t_maximumDoubleClickDelay,i=recognizers_support_t_maximumDoubleClickDistance,n=recognizers_support_t_maximumDoubleTouchDelay,s=recognizers_support_t_maximumDoubleTouchDistance,l=clock.p){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=s,this._clock=l,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",(e=>this._handleImmediateClick(e))),this.registerIncoming("pointer-down",(e=>this._handlePointerDown(e)))}onUninstall(){this._pointerState.forEach((e=>e.doubleClickTimer=(0,maybe.xt)(e.doubleClickTimer)))}get hasPendingInputs(){for(const e of this._pointerState.values())if(null!=e.doubleClickTimer)return!0;return!1}_clearDoubleClickTimer(e,i){const o=this._pointerState.get(e);o&&(o.doubleClickTimer=(0,maybe.xt)(o.doubleClickTimer),i&&this._click.emit(o.event.data,void 0,o.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);1===t.pointerDownCount&&this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const t=e.data,{pointerType:i}=t.native,o=function SingleAndDoubleClick_r(e){const{pointerId:t,pointerType:i,button:o}=e.native;return"mouse"===i?`${t}:${o}`:`${i}`}(t);if(!this._pointerState.has(o))return void this._startClick(e);const s=this._pointerState.get(o),{data:l,modifiers:c}=s.event,a="touch"===i?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;recognizers_support_n(l,t)>a?(this._clearDoubleClickTimer(o,!0),this._startClick(e)):(this._clearDoubleClickTimer(o,!1),2===s.pointerDownCount&&this._doubleClick.emit(l,void 0,c))}_handlePointerDown(e){const t=support_u(e.data),i=this._pointerState.get(t);i&&(i.pointerDownCount+=1)}_startClick(e){const{data:t}=e,{native:{pointerType:i}}=t,o=support_u(t),n="touch"===i?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,l=this._clock.setTimeout((()=>this._doubleClickTimeoutExceeded(o)),n);this._pointerState.set(o,{event:e,doubleClickTimer:l,pointerDownCount:1}),this.refreshHasPendingInputs()}}const MapViewInputManager_C_counter="Control",MapViewInputManager_C_pan={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},MapViewInputManager_C_zoom={zoomIn:["=","+"],zoomOut:["-","_"]},MapViewInputManager_C_rotate={clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]},MapViewInputManager_L=Symbol("handles");let MapViewInputManager_k=class extends Accessor.A{initialize(){const e=()=>this.view?.ready;this.addHandles([(0,reactiveUtils.when)((()=>!e()),(()=>this._disconnect())),(0,reactiveUtils.when)(e,(()=>this._connect()))])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(MapViewInputManager_L),this._inputManager=(0,maybe.pR)(this._inputManager)}_connect(){const e=this.view.surface,t=new BrowserEventSource_l(e,this.view.input),o=[new ImmediateDoubleClick_m,new PointerClickHoldAndDrag_r,new SingleAndDoubleClick_l,new Drag_s(this.view.navigation),new DoubleTapDrag_u],r=new InputManager.e({eventSource:t,recognizers:o}),a=new DragPan_n(this.view,["primary"]),c=new DragRotate_o(this.view,["secondary"]);r.installHandlers("prevent-context-menu",[new PreventContextMenu_e],InputManager.o.INTERNAL),r.installHandlers("navigation",[new PinchAction_a(this.view),new GamepadNavigation_m(this.view),new MouseWheelZoom_o(this.view),new DoubleClickZoom_a(this.view),new DoubleClickZoom_a(this.view,[MapViewInputManager_C_counter]),a,new KeyPan_e(this.view,MapViewInputManager_C_pan),new KeyZoom_e(this.view,MapViewInputManager_C_zoom),new KeyRotate_t(this.view,MapViewInputManager_C_rotate),c,new DoubleTapDragZoom_e(this.view,"touch")],InputManager.o.INTERNAL),this.view.viewEvents.connect(r),this._source=t,this._inputManager=r,this.addHandles([(0,reactiveUtils.watch)((()=>this.view?.navigation?.browserTouchPanEnabled),(e=>{this._source&&(this._source.browserTouchPanningEnabled=!e)}),reactiveUtils.Vh),(0,reactiveUtils.watch)((()=>{const{actionMap:e}=this.view.navigation;return{panActions:support_n("pan",e),rotateActions:support_n("rotate",e)}}),(({panActions:e,rotateActions:t})=>{a.pointerActions=e,c.pointerActions=t}),reactiveUtils.pc)],MapViewInputManager_L)}get test(){}};(0,tslib_es6._)([(0,property.MZ)()],MapViewInputManager_k.prototype,"view",void 0),(0,tslib_es6._)([(0,property.MZ)()],MapViewInputManager_k.prototype,"latestPointerType",null),(0,tslib_es6._)([(0,property.MZ)()],MapViewInputManager_k.prototype,"latestPointerLocation",null),(0,tslib_es6._)([(0,property.MZ)()],MapViewInputManager_k.prototype,"multiTouchActive",null),MapViewInputManager_k=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.input.MapViewInputManager")],MapViewInputManager_k);const E=MapViewInputManager_k;let StationaryManager_i=class extends Accessor.A{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),null==this._timer&&(this._timer=setInterval((()=>{performance.now()-this._timestamp>=160&&this.clear()}),160))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};(0,tslib_es6._)([(0,property.MZ)()],StationaryManager_i.prototype,"_timer",void 0),(0,tslib_es6._)([(0,property.MZ)()],StationaryManager_i.prototype,"stationary",null),StationaryManager_i=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.support.StationaryManager")],StationaryManager_i);const Viewport2DMixin_u=u=>{let m=class extends u{constructor(...t){super(...t),this.fullOpacity=1,this.stateManager=new z({constraints:new MapViewConstraints_f({view:this})}),this.goToManager=new GoToManager_h({view:this}),this.stationaryManager=new StationaryManager_i,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new FrameTask_h(this),this.inputManager=new E({view:this}),this.viewEvents=new ViewEvents_c(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([(0,reactiveUtils.watch)((()=>this.viewpoint),(()=>this.stationaryManager.flip()),reactiveUtils.OH),this.on("resize",(t=>this.stateManager.resize(t.width,t.height)))])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(t){this.stateManager.extent=t}get state(){return this.stateManager.state}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}set animation(t){const e=this._get("animation");if(t===e)return;if(e&&e.stop(),t!==this.animationManager.animation&&this.animationManager.stop(),!t||t.isFulfilled())return void this._set("animation",null);this._set("animation",t);const i=()=>{this.destroyed||t===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};t.when(i,i)}get constraints(){return this.stateManager?.constraints}set constraints(t){t.view=this;const e=this.stateManager.constraints;this.stateManager.constraints=t,e?.destroy()}get padding(){return this.stateManager?.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(t){this.stateManager.resizeAlign=t}get rotation(){return this.stateManager.rotation??0}set rotation(t){const{rotationEnabled:e}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=t,this.constraints.rotationEnabled=e}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(t){this.stateManager.viewpoint=t,this.frameTask.requestFrame()}on(t,e,i,n){return this.inputManager&&this.viewEvents.on(t,e,i,n)||super.on(t,e)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}goTo(t,e){return this.goToManager.goTo(t,e)}};return(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],m.prototype,"animationManager",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],m.prototype,"fullOpacity",void 0),(0,tslib_es6._)([(0,property.MZ)()],m.prototype,"stateManager",void 0),(0,tslib_es6._)([(0,property.MZ)()],m.prototype,"constraintsInfo",null),(0,tslib_es6._)([(0,property.MZ)()],m.prototype,"extent",null),(0,tslib_es6._)([(0,property.MZ)()],m.prototype,"goToManager",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],m.prototype,"state",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],m.prototype,"mapViewNavigation",void 0),(0,tslib_es6._)([(0,property.MZ)()],m.prototype,"renderingOptions",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],m.prototype,"interacting",null),(0,tslib_es6._)([(0,property.MZ)()],m.prototype,"stationary",null),(0,tslib_es6._)([(0,property.MZ)()],m.prototype,"animation",null),(0,tslib_es6._)([(0,property.MZ)({type:MapViewConstraints_f})],m.prototype,"constraints",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],m.prototype,"inputManager",void 0),(0,tslib_es6._)([(0,property.MZ)()],m.prototype,"padding",null),(0,tslib_es6._)([(0,property.MZ)()],m.prototype,"resizeAlign",null),(0,tslib_es6._)([(0,property.MZ)()],m.prototype,"rotation",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],m.prototype,"viewEvents",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Viewpoint.A})],m.prototype,"viewpoint",null),m=(0,tslib_es6._)([(0,subclass.$)("esri.views.Viewport2DMixin")],m),m};var pointUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/pointUtils.js");class Camera_a{constructor(e){this._view=e,this.viewpoint=new Viewpoint.A({targetGeometry:new Point.default,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,e]=this._view.size;return Math.sqrt(t*t+e*e)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return(0,viewpointUtils.ri)(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,o){o.pan=(0,pointUtils.Io)(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,o.rotate=(0,mathUtils.kU)(i),o.sourceZoom=this.scale,o.targetZoom=t.scale}interpolate(t,e,i){const{pan:r,rotate:s,zoom:n,zoomOffset:a}=i,{center:c}=this;c.spatialReference=t.center.spatialReference,c.x=(0,mathUtils.Cc)(t.center.x,e.center.x,r),c.y=(0,mathUtils.Cc)(t.center.y,e.center.y,r),this.viewpoint.scale=(0,mathUtils.Cc)(t.scale,e.scale+a,n);let p=t.rotation;const l=e.rotation;Math.abs(l-p)>=180&&(p+=360*(p<l?1:-1)),this.viewpoint.rotation=(0,mathUtils.Cc)(p,l,s)}copyFrom(t){(0,viewpointUtils.C)(this.viewpoint,t.viewpoint),this._view=t.view}}var unitBezier=__webpack_require__("./node_modules/@arcgis/core/views/2d/unitBezier.js");const easing_i=t=>t*t,easing_o=t=>1-easing_i(1-t),easing_a=t=>t*t*t,easing_c=t=>1-easing_a(1-t),easing_e=t=>t*t*t*t,q=t=>1-easing_e(1-t),easing_d=t=>t*t*t*t*t,easing_b=t=>1-easing_d(1-t),easing_h=t=>1-Math.cos(t*Math.PI/2),x=t=>1-easing_h(1-t),easing_f=t=>2**(10*(t-1)),easing_I=t=>1-easing_f(1-t),easing_O=t=>-(Math.sqrt(1-t*t)-1),easing_j=t=>1-easing_O(1-t);function easing_z(t){const u=2*(t-Math.sqrt((t-1)*t)),i=u/2/t;return o=>o<i?t*o*o:u*o-u+1}function easing_B(t,u){return(i,o)=>i<u?u*t(i/u,o):1-t((1-i)/(1-u),o)*(1-u)}const easing_P=easing_B(easing_z(1),1),easing_g=easing_B(easing_z(1),0),easing_k=easing_B(easing_z(1),.5),easing_v=easing_B(easing_z(2),1),easing_w=easing_B(easing_z(2),0),easing_y=easing_B(easing_z(2),.5),A=easing_B(easing_z(3),1),easing_C=easing_B(easing_z(3),0),easing_D=easing_B(easing_z(3),.5),easing_E=easing_B(easing_z(4),1),F=easing_B(easing_z(4),0),easing_G=easing_B(easing_z(4),.5),H={linear:t=>t,"in-quad":easing_i,"out-quad":easing_o,"in-out-quad":t=>t<.5?easing_i(2*t)/2:(easing_o(2*(t-.5))+1)/2,"in-coast-quad":easing_P,"out-coast-quad":easing_g,"in-out-coast-quad":easing_k,"in-cubic":easing_a,"out-cubic":easing_c,"in-out-cubic":t=>t<.5?easing_a(2*t)/2:(easing_c(2*(t-.5))+1)/2,"in-coast-cubic":easing_v,"out-coast-cubic":easing_w,"in-out-coast-cubic":easing_y,"in-quart":easing_e,"out-quart":q,"in-out-quart":t=>t<.5?easing_e(2*t)/2:(q(2*(t-.5))+1)/2,"in-coast-quart":A,"out-coast-quart":easing_C,"in-out-coast-quart":easing_D,"in-quint":easing_d,"out-quint":easing_b,"in-out-quint":t=>t<.5?easing_d(2*t)/2:(easing_b(2*(t-.5))+1)/2,"in-coast-quint":easing_E,"out-coast-quint":F,"in-out-coast-quint":easing_G,"in-sine":easing_h,"out-sine":x,"in-out-sine":t=>t<.5?easing_h(2*t)/2:(x(2*(t-.5))+1)/2,"in-expo":easing_f,"out-expo":easing_I,"in-out-expo":t=>t<.5?easing_f(2*t)/2:(easing_I(2*(t-.5))+1)/2,"in-circ":easing_O,"out-circ":easing_j,"in-out-circ":t=>t<.5?easing_O(2*t)/2:(easing_j(2*(t-.5))+1)/2,ease:u=>unitBezier.Z0.ease(u),"ease-in":u=>unitBezier.Z0.easeIn(u),"ease-out":u=>unitBezier.Z0.easeOut(u),"ease-in-out":u=>unitBezier.Z0.easeInOut(u)};class Camera_t{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}}const Settings_o={desiredScreenFlow:2,minDuration:(0,time.l5)(500),maxDuration:(0,time.l5)(8e3)},Settings_r={...Settings_o,maxDuration:(0,time.l5)(4e3)};class Definition_r{constructor(t){this._createCamera=t,this.compared=new Camera_t,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:Settings_o.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new Definition_r(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,e,r){this.source!==t&&this.source.copyFrom(t),this.target!==e&&this.target.copyFrom(e),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??Settings_o.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const e=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/e}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>(0,common.FD)()}get hasFov(){return Math.abs(this.compared.fov)>(0,common.FD)()}get hasRotate(){return this.compared.rotate>(0,common.FD)()}}let Path_e=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce(((e,o)=>(0,time.Kp)(e+o.time)),(0,time.Kp)(0))}interpolateComponentsAt(t,e){t=Math.min(Math.max(t,0),1),t*=this.time;let o=0,s=0;const n=this.definition,a=this.segments.reduce(((t,e)=>t||e.definition.hasZoom),!1);for(let i=0;i<this.segments.length;i++){const m=this.segments[i],r=m.definition;if(t<=m.time||i===this.segments.length-1){if(this.segmentInterpolateComponentsAt(m,0===m.time?0:t/m.time,e),n.hasPan&&!isNaN(e.pan)&&isFinite(n.compared.pan)?e.pan=(o+r.compared.pan*e.pan)/n.compared.pan:e.pan=1,n.hasRotate&&!isNaN(e.rotate)&&isFinite(n.compared.rotate)?e.rotate=(s+r.compared.rotate*e.rotate)/n.compared.rotate:e.rotate=1,a&&!isNaN(e.zoom)&&isFinite(r.compared.targetZoom)){const{sourceZoom:t,targetZoom:o}=r.compared,s=e.zoom*(o-t)+t,n=this.segments[0].definition.compared.sourceZoom,a=this.segments[this.segments.length-1].definition.compared.targetZoom,i=Math.abs(o-n)>Math.abs(t-n)?o:t;e.zoomOffset=i-a,e.zoom=(s-n)/(i-n)}else e.zoom=1;return e}t-=m.time,o+=r.compared.pan,s+=r.compared.rotate}}segmentInterpolateComponentsAt(t,e,o){t.interpolateComponentsAt(e,o)}};class Segment_o{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,i=t.compared,o=i.sourceZoom,e=i.targetZoom;this._zoomSign=o>e?1:-1,this._panPixelsAtSource=i.pan*t.source.pixelsPerPanAtZoom(o);const n=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*n}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,o=this.definition.compared.targetZoom,{hasZoom:e,hasPan:n,hasRotate:s}=this.definition;let h=0,a=0;e&&(n&&(h=(o/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(t/o)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const r=this.definition.desiredPixelFlow;if(e&&n&&s){const t=h+a+h*a;this._zoomPixelFlow=h*a/t*r,this._panPixelFlow=a/t*r,this._rotatePixelFlow=h/t*r}else if(e&&n){const t=1+h;this._zoomPixelFlow=h/t*r,this._panPixelFlow=1/t*r}else if(e&&s){const t=1+a;this._zoomPixelFlow=a/t*r,this._rotatePixelFlow=1/t*r}else if(n&&s){const t=this._panPixelsAtSource/this._rotatePixels,i=1+t;this._panPixelFlow=t/i*r,this._rotatePixelFlow=1/i*r}else n?this._panPixelFlow=r:e?this._zoomPixelFlow=r:s&&(this._rotatePixelFlow=r);if(this._time=(0,time.Kp)(Math.max(this.rotateTime,this.zoomTime,this.panTime)),this.fovTime>this._time){const t=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=t,this._panPixelFlow/=t,this._rotatePixelFlow/=t}}get rotateTime(){return this.definition.hasRotate?(0,time.Kp)(this._rotatePixels/this._rotatePixelFlow):(0,time.Kp)(0)}get zoomTime(){return this.definition.hasZoom?(0,time.Kp)(this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow):(0,time.Kp)(0)}get fovTime(){return this.definition.hasFov?(0,time.Kp)(Math.abs(this.definition.compared.fov)/Segment_e):(0,time.Kp)(0)}get panTime(){if(!this.definition.hasPan)return(0,time.Kp)(0);if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,o=t*this._panPixelsAtSource;return(0,time.Kp)(Math.log(o*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow))}return(0,time.Kp)(this._panPixelsAtSource/this._panPixelFlow)}_interpolateComponentsZoom(t){if(0===t||1===t)return t;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,o=this.definition.compared.targetZoom;return(i*(i/o)**-t-i)/(o-i)}return t}_interpolateComponentsFov(t){if(0===t)return this.definition.segmentStart;if(1===t)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:o}=this.definition;return i+t*(o-i)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(0===t||1===t)return t;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*t*this._time)-1))/(i*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),i.zoom=this._interpolateComponentsZoom(t),i.pan=this._interpolateComponentsPan(t),i.rotate=this._interpolateComponentsRotate(t),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(t)}}const Segment_e=(0,mathUtils.kU)(45);function functions_o(o,e,a){const n=e-o.compared.sourceZoom,t=o.halfWindowPanAtZoom(n);return-o.halfWindowSize*(a.ascensionFactor*Math.LN2*o.compared.pan+t)*Math.log(o.compared.sourceZoom/e)/(o.desiredPixelFlow*Math.LN2*t)}function functions_e(o,e,a){const n=1/e,t=Math.log(o.compared.sourceZoom*n),i=1/o.desiredPixelFlow,r=1/Math.LN2,d=e-o.compared.sourceZoom,c=1/d,l=(a.ascensionFactor*Math.LN2*o.compared.pan+o.halfWindowPanAtZoom(d))/o.halfWindowPanAtZoom(1);return o.halfWindowSize*n*i*r*c*l-o.halfWindowSize*t*i*r*c+o.halfWindowSize*t*i*r*l/(d*d)}function functions_a(o,e,a){const n=e-o.compared.sourceZoom,t=1/n,i=1/e,r=Math.log(o.compared.sourceZoom*i),d=(a.ascensionFactor*Math.LN2*o.compared.pan+o.halfWindowPanAtZoom(n))/o.halfWindowPanAtZoom(1);return o.halfWindowSize*t*(-2*t*i*d+2*t*r+2*i-2*r*d/(n*n)-d/(e*e))/(o.desiredPixelFlow*Math.LN2)}function functions_n(o,e){return-o.halfWindowSize*Math.log(o.compared.sourceZoom/e)/(o.desiredPixelFlow*Math.LN2)}function functions_t(o,e){return o.halfWindowSize/(e*o.desiredPixelFlow*Math.LN2)}function functions_i(o,e){return-o.halfWindowSize/(e*e*o.desiredPixelFlow*Math.LN2)}function functions_l(o,e,a){return o.halfWindowSize*(-o.halfWindowPanAtZoom(e)-a.descensionFactor*Math.LN2*o.compared.pan+o.halfWindowPanAtZoom(o.compared.targetZoom))*Math.log(e/o.compared.targetZoom)/(o.desiredPixelFlow*Math.LN2*o.halfWindowPanAtZoom(-e+o.compared.targetZoom))}function functions_m(o,e,a){const n=Math.log(e/o.compared.targetZoom),t=1/o.desiredPixelFlow,i=1/Math.LN2,r=-e+o.compared.targetZoom,d=1/r,c=(-o.halfWindowPanAtZoom(e)-a.descensionFactor*Math.LN2*o.compared.pan+o.halfWindowPanAtZoom(o.compared.targetZoom))/o.halfWindowPanAtZoom(1);return-o.halfWindowSize*n*t*i*d+o.halfWindowSize*n*t*i*c/(r*r)+o.halfWindowSize*t*i*d*c/e}function functions_h(o,e,a){const n=e-o.compared.targetZoom,t=1/n,i=1/e,r=Math.log(e/o.compared.targetZoom),d=(o.halfWindowPanAtZoom(e)+a.descensionFactor*Math.LN2*o.compared.pan-o.halfWindowPanAtZoom(o.compared.targetZoom))/o.halfWindowPanAtZoom(1);return o.halfWindowSize*t*(-2*t*i*d-2*t*r+2*i+2*r*d/(n*n)-d/(e*e))/(o.desiredPixelFlow*Math.LN2)}function functions_s(o,e){return o.halfWindowSize*Math.log(e/o.compared.targetZoom)/(o.desiredPixelFlow*Math.LN2)}function functions_f(o,e){return o.halfWindowSize/(e*o.desiredPixelFlow*Math.LN2)}function functions_w(o,e){return-o.halfWindowSize/(e*e*o.desiredPixelFlow*Math.LN2)}function planning_f(f,Z){let b=function planning_D(o,e){const n=Math.max(o.compared.sourceZoom,o.compared.targetZoom),a=o.source.zoomAtPixelsPerPan(o.desiredPixelFlow/o.compared.pan)/2;return a<n?null!=e.maximumDistance?n+(e.maximumDistance-n)/2:1.5*n:e.maximumDistance?Math.min(e.maximumDistance,a):a}(f,Z);const h={ascensionFactor:null!=Z.ascensionFactor?Z.ascensionFactor:.5,descensionFactor:null!=Z.descensionFactor?Z.descensionFactor:.5},M=0===h.ascensionFactor,P=0===h.descensionFactor,g=M?functions_n:functions_o,k=M?functions_t:functions_e,N=M?functions_i:functions_a,j=P?functions_s:functions_l,w=P?functions_f:functions_m,z=P?functions_w:functions_h,A=o=>g(f,o,h)+function functions_r(o,e,a){return-o.compared.pan*o.halfWindowSize*(a.ascensionFactor+a.descensionFactor-1)/(o.desiredPixelFlow*o.halfWindowPanAtZoom(e))}(f,o,h)+j(f,o,h),I=o=>k(f,o,h)+function functions_d(o,e,a){return o.compared.pan*o.halfWindowSize*(a.ascensionFactor+a.descensionFactor-1)/(o.desiredPixelFlow*o.halfWindowPanAtZoom(e*e))}(f,o,h)+w(f,o,h),S=o=>N(f,o,h)+function functions_c(o,e,a){return-2*o.compared.pan*o.halfWindowSize*(a.ascensionFactor+a.descensionFactor-1)/(o.desiredPixelFlow*o.halfWindowPanAtZoom(e*e*e))}(f,o,h)+z(f,o,h);let q=A(b);const v=function functions_p(o){const e=o.compared.sourceZoom-o.compared.targetZoom;if(0===e)return o.compared.pan*o.halfWindowSize/(o.desiredPixelFlow*o.halfWindowPanAtZoom(o.compared.sourceZoom));const a=Math.LN2*o.compared.pan,n=e,t=o.halfWindowPanAtZoom(n),i=o.halfWindowSize*Math.log(o.compared.sourceZoom/o.compared.targetZoom)/(o.desiredPixelFlow*Math.LN2*t);return o.compared.sourceZoom<=o.compared.targetZoom?i*(a-t):i*(a+t)}(f);let y;const B=Z.maximumIterations||20,C=null!=Z.maximumDistance?Z.maximumDistance:1/0;for(y=0;y<B;y++){const o=Z.desiredSlope??1e-6;let e=I(b);Math.abs(e)>o&&(e+=o);const n=e/S(b);if(isNaN(n)||b>=C&&n<0){if(!isFinite(C))return null;b=C,q=A(b);break}if(b-=n,b<f.compared.sourceZoom||b<f.compared.targetZoom)return null;const a=A(b);if(Math.abs(a-q)/q<=.005)break;q=a}return q>.7*v||b<f.compared.sourceZoom||b<f.compared.targetZoom?null:b}class Path_s extends Path_e{constructor(i,n){super(),this._preallocSegments=[new Segment_o,new Segment_o,new Segment_o],this._ascensionSegment=null,this._descensionSegment=null,this.update(i,n)}update(i,n){if(!i)return;this.definition?this.definition.copyFrom(i):this.definition=i.clone();const e=n?.apex?planning_f(i,n.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,e?this._updateWithApex(e,n?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,t,o){e.interpolateComponentsAt(t,o),e===this._ascensionSegment?o.zoom=easing_o(o.zoom):e===this._descensionSegment&&(o.zoom=easing_i(o.zoom))}_updateWithApex(i,n){const[e,t,o]=this._preallocSegments,s=n?.ascensionFactor??.5,d=Math.min(1-s,null!=n?.ascensionFactor&&null!=n.descensionFactor?n.descensionFactor:.5),a=1-s-d;e.definition?e.definition.copyFrom(this.definition):e.definition=this.definition.clone(),e.definition.compared.targetZoom=i,e.definition.compared.pan=this.definition.compared.pan*s,e.definition.compared.rotate=this.definition.compared.rotate*s,e.definition.segmentEnd=s,e.update(),this._ascensionSegment=e,this.segments.push(e),a>0&&(t.definition?t.definition.copyFrom(this.definition):t.definition=this.definition.clone(),t.definition.copyFrom(this.definition),t.definition.compared.sourceZoom=i,t.definition.compared.targetZoom=i,t.definition.compared.pan=this.definition.compared.pan*a,t.definition.compared.rotate=this.definition.compared.rotate*a,t.definition.segmentStart=e.definition.segmentEnd,t.definition.segmentEnd=e.definition.segmentEnd+a,t.update(),this.segments.push(t)),o.definition?o.definition.copyFrom(this.definition):o.definition=this.definition.clone(),o.definition.compared.sourceZoom=i,o.definition.compared.pan=this.definition.compared.pan*d,o.definition.compared.rotate=this.definition.compared.rotate*d,o.definition.segmentStart=s+a,o.update(),this._descensionSegment=o,this.segments.push(o)}_updateWithoutApex(){const[i]=this._preallocSegments;i.update(this.definition),this.segments.push(i)}}const Animation_h=new class InterpolateComponents_t{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}};let Animation_p=class{get time(){return this._time}get isLinear(){return 1===this.path.segments.length}constructor(i){this._time=(0,time.l5)(0),this._easing=easing_k,this.definition=new Definition_r(i),this.path=new Path_s}update(t,a,o){this.definition.update(t,a,o),this.path.update(this.definition,o),this._time=this._applyTimeSettings((0,time.gr)(isFinite(this.path.time)?this.path.time:(0,time.Kp)(0)),o),this._easing=o.easing??(this._time>=1e3?easing_k:easing_I)}cameraAt(t,i){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const e=this.path.interpolateComponentsAt(t,Animation_h);i.interpolate(this.definition.source,this.definition.target,e)}_normalizedEasing(t){const i=this._easing(0,this._time),e=this._easing(1,this._time);return(this._easing(t,this._time)-i)/(e-i)}_applyTimeSettings(i,e){const n=null!=e.speedFactor?e.speedFactor:1,s=e.minDuration??Settings_o.minDuration/n,a=e.maxDuration??Settings_o.maxDuration/n;return null!=e.duration?(0,time.l5)(e.duration):(0,time.l5)(Math.min(Math.max(i/n,s),a))}};class AnimationManager_j{constructor(t){this._view=t,this._animation=new Animation_p((()=>new Camera_a(this._view))),this._current=new Camera_a(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,i,e={}){(0,viewpointUtils.C)(this._current.viewpoint,t),(0,viewpointUtils.C)(this._source.viewpoint,t),(0,viewpointUtils.C)(this._target.viewpoint,i),this._animation.update(this._source,this._target,e)}applyRatio(t,i){this._animation.cameraAt(i,this._current),(0,viewpointUtils.C)(t,this._current.viewpoint)}}let AnimationManager_y=class extends Accessor.A{constructor(t){super(t),this._animation=null,this._destinationViewState=new PaddedViewState_f,this.updateFunction=null,this.easing=H.ease,this.viewpoint=new Viewpoint.A({targetGeometry:new Point.default,scale:0,rotation:0}),this._updateTask=(0,scheduling.mg)({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new AnimationManager_j(t.view)}destroy(){this._updateTask=(0,maybe.xt)(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,i,e){this.stop();const n=this.viewpoint;(0,viewpointUtils.C)(n,i);const s=t.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(64*Math.min(i.scale,s.scale),this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:e?.duration,maxDuration:"auto"===e?.animationMode?(0,time.l5)(1/0):e?.maxDuration??Settings_r.maxDuration,speedFactor:e?.speedFactor,easing:("string"==typeof e?.easing?H[e.easing]:e?.easing)||this.easing}),"auto"===e?.animationMode&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,function AnimationManager_T(t,i,e,n){if(null!=i?.duration)return!0;const{time:s,isLinear:a}=t,r=i?.speedFactor||1;if(s>(i?.maxDuration??Settings_r.maxDuration/r))return!1;if(a){const t=1.5,i=(0,vec2f64.vt)(),a=(0,screenUtils.tc)(...n.toScreen(i,...e.center)),m=(0,screenUtils.tc)(...e.toScreen(i,...n.center)),h=null!=m&&m.x>-1*e.size[0]&&m.x<(t+.5)*e.size[0]&&m.y>-1*e.size[1]&&m.y<(t+.5)*e.size[1],u=null!=a&&a.x>-1*n.size[0]&&a.x<(t+.5)*n.size[0]&&a.y>-1*n.size[1]&&a.y<(t+.5)*n.size[1];if(s>2e3/r&&!h&&!u)return!1}return!0}(this._transition.animation,e,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:(0,time.l5)(0)}));const o=()=>{this.animation===t&&this._updateTask&&("finished"===t.state&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const e=new ViewAnimation_a({target:t.clone()}),n=()=>{this.animation===e&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return e.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){const i=this.animation;if(i&&i.state!==ViewAnimation_a.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),this.animation?.update(this.viewpoint);else{const t=performance.now()-this._startTime,i=this._transition.duration,e=i>0?t/i:1,n=e>=1;this._transition.applyRatio(this.viewpoint,e),n&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};(0,tslib_es6._)([(0,property.MZ)()],AnimationManager_y.prototype,"easing",void 0),(0,tslib_es6._)([(0,property.MZ)()],AnimationManager_y.prototype,"view",void 0),(0,tslib_es6._)([(0,property.MZ)()],AnimationManager_y.prototype,"viewpoint",void 0),AnimationManager_y=(0,tslib_es6._)([(0,subclass.$)("esri.views.2d.AnimationManager")],AnimationManager_y);const AnimationManager_x=AnimationManager_y;function layerViewModuleImportUtils_r(){return Promise.all([Promise.all([__webpack_require__.e(5958),__webpack_require__.e(5119)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/webglDeps.js")),Promise.all([__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9144),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(6302),__webpack_require__.e(3611),__webpack_require__.e(1830),__webpack_require__.e(8984),__webpack_require__.e(7104),__webpack_require__.e(316),__webpack_require__.e(1364)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/mapViewDeps.js"))])}const layerViewModuleImportUtils_a=()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9144),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(6302),__webpack_require__.e(3611),__webpack_require__.e(1830),__webpack_require__.e(8984),__webpack_require__.e(193),__webpack_require__.e(971),__webpack_require__.e(2553)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js")))),layerViewModuleImportUtils_t=()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(8965),__webpack_require__.e(4207),__webpack_require__.e(5349)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js")))),layerViewModuleImportUtils_i={"base-dynamic":()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(2683),__webpack_require__.e(3587)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/BaseDynamicLayerView2D.js")))),"base-tile":layerViewModuleImportUtils_a,"bing-maps":layerViewModuleImportUtils_a,catalog:()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(3428)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/CatalogLayerView2D.js")))),"catalog-dynamic-group":()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(281)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/CatalogDynamicGroupLayerView2D.js")))),"catalog-footprint":()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(8965),__webpack_require__.e(4207),__webpack_require__.e(5349),__webpack_require__.e(5048)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/CatalogFootprintLayerView2D.js")))),csv:layerViewModuleImportUtils_t,"geo-rss":()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9144),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(6302),__webpack_require__.e(3611),__webpack_require__.e(3052)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/GeoRSSLayerView2D.js")))),feature:layerViewModuleImportUtils_t,geojson:layerViewModuleImportUtils_t,parquet:layerViewModuleImportUtils_t,graphics:()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9144),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(6302),__webpack_require__.e(3611),__webpack_require__.e(5278)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/GraphicsLayerView2D.js")))),group:()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(5025)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/GroupLayerView2D.js")))),imagery:()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9144),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(6302),__webpack_require__.e(3611),__webpack_require__.e(9414),__webpack_require__.e(193),__webpack_require__.e(4427),__webpack_require__.e(3707)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/ImageryLayerView2D.js")))),"imagery-tile":()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9414),__webpack_require__.e(4427),__webpack_require__.e(4356)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/ImageryTileLayerView2D.js")))),kml:()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9144),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(6302),__webpack_require__.e(3611),__webpack_require__.e(7104),__webpack_require__.e(3173)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js")))),"knowledge-graph":()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(845)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/KnowledgeGraphLayerView2D.js")))),"link-chart":()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(845)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/KnowledgeGraphLayerView2D.js")))),"knowledge-graph-sublayer":layerViewModuleImportUtils_t,"map-image":()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9144),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(6302),__webpack_require__.e(3611),__webpack_require__.e(193),__webpack_require__.e(971),__webpack_require__.e(5497)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/MapImageLayerView2D.js")))),"map-notes":()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9144),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(6302),__webpack_require__.e(3611),__webpack_require__.e(980)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/MapNotesLayerView2D.js")))),media:()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9144),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(6302),__webpack_require__.e(3611),__webpack_require__.e(1830),__webpack_require__.e(8984),__webpack_require__.e(396)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/MediaLayerView2D.js")))),"ogc-feature":()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(8965),__webpack_require__.e(4207),__webpack_require__.e(5349),__webpack_require__.e(1123)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/OGCFeatureLayerView2D.js")))),"open-street-map":layerViewModuleImportUtils_a,"oriented-imagery":layerViewModuleImportUtils_t,route:()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9144),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(6302),__webpack_require__.e(3611),__webpack_require__.e(2851),__webpack_require__.e(1726)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/RouteLayerView2D.js")))),stream:()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(8965),__webpack_require__.e(4207),__webpack_require__.e(5349),__webpack_require__.e(7912)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js")))),"subtype-group":()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(8965),__webpack_require__.e(4207),__webpack_require__.e(5349),__webpack_require__.e(5462)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/SubtypeGroupLayerView2D.js")))),tile:layerViewModuleImportUtils_a,"vector-tile":()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(159)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/VectorTileLayerView2D.js")))),video:()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9144),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(6302),__webpack_require__.e(3611),__webpack_require__.e(7376)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/VideoLayerView2D.js")))),wcs:()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9414),__webpack_require__.e(4427),__webpack_require__.e(4356)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/ImageryTileLayerView2D.js")))),"web-tile":layerViewModuleImportUtils_a,wfs:layerViewModuleImportUtils_t,wms:()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(2683),__webpack_require__.e(4247)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/WMSLayerView2D.js")))),wmts:()=>layerViewModuleImportUtils_r().then((()=>Promise.all([__webpack_require__.e(7863),__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(2683),__webpack_require__.e(7526)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/layers/WMTSLayerView2D.js")))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};const layerViewModuleImportUtils_l_hasLayerViewModule=e=>null!=layerViewModuleImportUtils_i[e.type],layerViewModuleImportUtils_l_importLayerView=e=>{const r=layerViewModuleImportUtils_i[e.type];if(null==r)throw function layerViewModuleImportUtils_s(r){const a=r.declaredClass?r.declaredClass.slice(r.declaredClass.lastIndexOf(".")+1):"Unknown",t=a.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new core_Error.A(`${t}:view-not-supported`,`${a} is not supported in 2D`)}(e);return r(e)};var TileInfoView=__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js"),TileKey=__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileKey.js"),rbush=(__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileQueue.js"),__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileStrategy.js"),__webpack_require__("./node_modules/@arcgis/core/chunks/rbush.js")),aaBoundingRect=__webpack_require__("./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js"),Tile=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/features/support/Tile.js"),TileCoverage=__webpack_require__("./node_modules/@arcgis/core/views/2d/tiling/TileCoverage.js");const TileStore_d={added:[],removed:[]},TileStore_a=new Set,TileStore_c=new TileKey.A(0,0,0,0);class TileStore_u extends Evented.A{constructor(e){super(),this._tiles=new Map,this._index=(0,rbush.r)(9,(0,has.A)("esri-csp-restrictions")?e=>({minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||0===(0,aaBoundingRect.VL)(e)||0===(0,aaBoundingRect.uJ)(e))return[];const t=function TileStore_m(e,t){const s=(0,spatialReferenceUtils.Vp)(t);if(!s)return null;const[i,r]=s.valid;return e[2]>r?[(0,aaBoundingRect.vt)([e[0],e[1],r,e[3]]),(0,aaBoundingRect.vt)([i,e[1],i+e[2]-r,e[3]])]:e[0]<i?[(0,aaBoundingRect.vt)([i,e[1],e[2],e[3]]),(0,aaBoundingRect.vt)([r-(i-e[0]),e[1],r,e[3]])]:null}(e,this.tileScheme.spatialReference);return null!=t?[...new Set([...this.boundsIntersections(t[0]),...this.boundsIntersections(t[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const t={added:[],removed:[]};for(const s of e.added)if(!this.has(s)){const e=new Tile.F(this.tileScheme,s);this._tiles.set(s,e),this._index.insert(e),t.added.push(e)}for(const s of e.removed)if(this.has(s)){const e=this.get(s);this._tiles.delete(s),this._index.remove(e),t.removed.push(e)}this.tiles.length=0,this._tiles.forEach((e=>this.tiles.push(e))),(t.added.length||t.removed.length)&&this.emit("update",t)}setViewState(e){const t=this.tileScheme.getTileCoverage(e,0);if(!t)return;const{spans:s,lodInfo:i}=t,{level:o}=i;if(s.length>0)for(const{row:n,colFrom:l,colTo:h}of s)for(let e=l;e<=h;e++){const t=TileStore_c.set(o,n,i.normalizeCol(e),i.getWorldForColumn(e)).id;if(TileStore_a.add(t),!this.has(t)){const e=new Tile.F(this.tileScheme,t);this._tiles.set(t,e),this._index.insert(e),this.tiles.push(e),TileStore_d.added.push(e)}}for(let n=this.tiles.length-1;n>=0;n--){const e=this.tiles[n];TileStore_a.has(e.id)||(this._tiles.delete(e.id),this.tiles.splice(n,1),this._index.remove(e),TileStore_d.removed.push(e))}(TileStore_d.added.length||TileStore_d.removed.length)&&this.emit("update",TileStore_d),TileCoverage.A.pool.release(t),TileStore_a.clear(),TileStore_d.added.length=0,TileStore_d.removed.length=0}}var util=__webpack_require__("./node_modules/@arcgis/core/views/2d/layers/support/util.js"),clippingUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/support/clippingUtils.js"),highlightOptionsUtils=__webpack_require__("./node_modules/@arcgis/core/views/2d/support/highlightOptionsUtils.js"),Graphic=__webpack_require__("./node_modules/@arcgis/core/Graphic.js");function hitTestUtils_n(r,i,t,a,l,s){return n=>{if(n instanceof Graphic.default){if(n.layer===r)s?.();else{const e=r.allLayerViews.find((e=>e.layer===n.layer));e&&l?.(e)}a(hitTestUtils_c(n))}else if("layer"in n&&"element"in n);else if("subtype-sublayer"===n.type){const e=r.allLayerViews.find((e=>e.layer===n.parent));e&&t(n,e)}else{const e=r.allLayerViews.find((e=>e.layer===n));e&&i(e)}}}function hitTestUtils_o(e,r){if(e)if((0,iteratorUtils.xZ)(e))for(const t of e)if((0,iteratorUtils.xZ)(t))for(const e of t)r(e);else r(t);else r(e)}function hitTestUtils_c(e){const r=e.getObjectId();return r?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${r}`:`"MapView/${e.uid}`}function hitTestUtils_p({layer:e},r){"subtype-group"===e?.type&&e.sublayers.forEach((e=>{r(e)}))}var screenshotUtils=__webpack_require__("./node_modules/@arcgis/core/views/support/screenshotUtils.js");const screenshotUtils_e={flipY:!0,premultipliedAlpha:!0};function screenshotUtils_a(t,i){const h=function screenshotUtils_d(t,i,h,n){t.ignorePadding&&(n={left:0,right:0,top:0,bottom:0});let e=null;null!=t.width&&null!=t.height?e=[t.width,t.height]:null==t.width&&null!=t.height?e=[t.height,t.height]:null!=t.width&&null==t.height?e=[t.width,t.width]:null==t.width&&null==t.height&&(e=null);const o=h[0]-(n.left+n.right),r=h[1]-(n.top+n.bottom);let a,l,u=t.area||{x:0,y:0,width:o,height:r};if(e){const t=o/r,i=e[0]/e[1];if(i>t){const t=u.width/i;u={x:u.x,y:Math.round(u.y+(u.height-t)/2),width:u.width,height:Math.round(t)}}else{const t=u.height*i;u={x:Math.round(u.x+(u.width-t)/2),y:u.y,width:Math.round(t),height:u.height}}}else e=[u.width,u.height];return e[0]>u.width?(a=Math.min(e[0]/u.width,i),l=e[0]/u.width/a):(a=1,l=e[0]/u.width),{cropArea:{x:Math.round((u.x+n.left)*a),y:Math.round((u.y+n.top)*a),width:Math.round(u.width*a),height:Math.round(u.height*a)},outputScale:l,resolutionScale:a}}(i||{},function screenshotUtils_u(t,i){return Math.min(4,(0,screenshotUtils.getMaximumResolutionScale)(i,Math.min(4096,t.context.parameters.maxTextureSize)))}(t.stage,t.size),t.size,t.padding),n=function screenshotUtils_l(t={},i){if(!t.layers)return;const h=[];return t.layers.forEach((t=>{const n=i.find((i=>i.layer.id===t.id));n?.container&&h.push(n.container)})),h}(i,t.allLayerViews);return t.stage.takeScreenshot(h,n,t.backgroundColor,i?.rotation)}var Timeline=__webpack_require__("./node_modules/@arcgis/core/views/2d/support/Timeline.js"),capabilities=__webpack_require__("./node_modules/@arcgis/core/views/webgl/capabilities.js");const Component_c_component="esri-component";let Component_p=class extends Accessor.A{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(t){this._set("id",t)}set node(t){const o=this._get("node");t!==o&&(t&&t.classList.add(Component_c_component),o&&o.classList.remove(Component_c_component),this._set("node",t))}castNode(t){return this.widget?.destroy(),t?"string"==typeof t||function Component_n(t){return t&&"nodeType"in t}(t)?(this._set("widget",null),(0,domUtils.$)(t)):(function Component_d(t){return t&&"function"==typeof t.render}(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};(0,tslib_es6._)([(0,property.MZ)()],Component_p.prototype,"id",null),(0,tslib_es6._)([(0,property.MZ)()],Component_p.prototype,"node",null),(0,tslib_es6._)([(0,cast.w)("node")],Component_p.prototype,"castNode",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Component_p.prototype,"widget",void 0),Component_p=(0,tslib_es6._)([(0,subclass.$)("esri.views.ui.Component")],Component_p);const Component_m=Component_p;__webpack_require__("./node_modules/@arcgis/core/intl.js");var themeUtils=__webpack_require__("./node_modules/@arcgis/core/support/themeUtils.js"),widgetUtils=__webpack_require__("./node_modules/@arcgis/core/widgets/support/widgetUtils.js"),locale=__webpack_require__("./node_modules/@arcgis/core/intl/locale.js");const UI_f={left:0,top:0,bottom:0,right:0},UI_={bottom:30,top:15,right:15,left:15},UI_g="esri-ui",UI_y={ui:UI_g,corner:`${UI_g}-corner`,innerContainer:`${UI_g}-inner-container`,manualContainer:`${UI_g}-manual-container`,cornerContainer:`${UI_g}-corner-container`,topLeft:`${UI_g}-top-left`,topRight:`${UI_g}-top-right`,bottomLeft:`${UI_g}-bottom-left`,bottomRight:`${UI_g}-bottom-right`};function UI_v(t){return 0===t?"0":`${t}px`}function UI_b(t){const o="object"==typeof t&&null!==t&&Object.getPrototypeOf(t);return null!==o&&o!==Object.prototype||!("component"in t||"index"in t||"position"in t)?null:t}function UI_w(t,{top:o,bottom:e,left:n,right:i}){t.style.top=o,t.style.bottom=e,t.style.left=n,t.style.right=i}let UI_P=class extends Evented.A.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=(0,locale.JK)(),this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&UI_w(t,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&UI_w(t,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([(0,reactiveUtils.watch)((()=>[this.view?.padding,this.container]),this._applyViewPadding,reactiveUtils.Vh),(0,reactiveUtils.watch)((()=>this.padding),this._applyUIPadding,reactiveUtils.Vh),(0,reactiveUtils.watch)((()=>[this.container,this._locale]),(([t,o])=>{t&&t.setAttribute("lang",o)}),reactiveUtils.Vh),(0,locale.oQ)((t=>{this._locale=t}))])}destroy(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){const o=this._get("container");t!==o&&(t&&(t.classList.add(UI_y.ui),(0,themeUtils.hY)(t),this._attachContainers(t)),o&&(o.classList.remove(UI_y.ui),UI_w(o,{top:"",bottom:"",left:"",right:""}),o.textContent=""),this._set("container",t))}get height(){const t=this.view?.height??0;if(0===t)return t;const o=this._getViewPadding(),{top:e,bottom:n}=o;return Math.max(t-e-n,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return"number"==typeof t?{bottom:t,top:t,right:t,left:t}:{...UI_,...t}}get width(){const t=this.view?.width??0;if(0===t)return t;const o=this._getViewPadding(),{left:e,right:n}=o;return Math.max(t-e-n,0)}add(t,o){let e,n,i;if(Array.isArray(t))return void t.forEach((t=>this.add(t,o)));const r=UI_b(t);r&&({index:e,position:o,component:t,key:n}=r),o&&"object"==typeof o&&({index:e,key:n,position:o,internal:i}=o),!t||o&&!this._isValidPosition(o)||this._add(t,o,e,n,i)}remove(t,o){if(!t)return;if(Array.isArray(t))return t.map((t=>this.remove(t,o)));const e=this._find(t);if(e){if(this._componentMap.has(e)&&this._componentMap.get(e)?.key!==o)return;const t=this._components.indexOf(e),n=e.node.parentNode;return n?.removeChild(e.node),this._componentMap.delete(e),e.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(t,1)[0]}}empty(t,o={removeInternal:!1}){if(Array.isArray(t)){for(const e of t)this.empty(e,o);return}const e=this._positionNameToContainerLookup[t??"manual"],n=Array.prototype.slice.call(e.children).map((t=>this._findByNode(t))).filter((t=>null!=t&&(!this._componentMap.get(t)?.internal||o.removeInternal)));for(const i of n)this.remove(i)}move(t,o){if(Array.isArray(t)&&t.forEach((t=>this.move(t,o))),!t)return;let e;const n=UI_b(t)||UI_b(o);if(n&&(e=n.index,o=n.position,t=n.component||t),o&&!this._isValidPosition(o))return;const i=this.remove(t);i&&this.add(i,{position:o,index:e})}find(t){if(!t)return null;const o=this._findById(t);return o&&(o.widget||o.node)}getComponents(t,o={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap((t=>this._getComponentsAtPosition(t,o))):this._getComponentsAtPosition(t,o):this._components.filter((t=>o.includeInternal||!this._componentMap.get(t)?.internal)).map((({widget:t,node:o})=>t??o))}getPosition(t){for(const o in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[o].contains(t))return o;return null}_add(t,e,n,r,s){t instanceof Component_m||(t=new Component_m({node:t}));const{widget:a}=t;null!=a&&a instanceof Accessor.A&&a.addHandles((0,handleUtils.hA)((()=>{queueMicrotask((()=>this.remove(t)))})),this._removeWidgetHandleKey),this._place({component:t,position:e,index:n}),this._components.push(t),this._componentMap.set(t,{key:r,internal:s})}_find(t){return t?t instanceof Component_m?this._findByComponent(t):"string"==typeof t?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){return this.view?.padding??UI_f}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){const t=document.createElement("div");t.classList.add(UI_y.innerContainer,UI_y.cornerContainer);const o=document.createElement("div");o.classList.add(UI_y.innerContainer,UI_y.manualContainer);const e=document.createElement("div");e.classList.add(UI_y.topLeft,UI_y.corner),t.appendChild(e);const n=document.createElement("div");n.classList.add(UI_y.topRight,UI_y.corner),t.appendChild(n);const i=document.createElement("div");i.classList.add(UI_y.bottomLeft,UI_y.corner),t.appendChild(i);const r=document.createElement("div");r.classList.add(UI_y.bottomRight,UI_y.corner),t.appendChild(r),this._innerContainer=t,this._manualContainer=o;const s=(0,widgetUtils.V8)();this._cornerNameToContainerLookup={"top-left":e,"top-right":n,"bottom-left":i,"bottom-right":r,"top-leading":s?n:e,"top-trailing":s?e:n,"bottom-leading":s?r:i,"bottom-trailing":s?i:r},this._positionNameToContainerLookup={manual:o,...this._cornerNameToContainerLookup}}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){const o=t.position??"manual",{component:e,index:n}=t,i=this._positionNameToContainerLookup[o],r=null!=n&&n>-1;if(function UI_C(t){return t&&!t._started&&"function"==typeof t.postMixInProperties&&"function"==typeof t.buildRendering&&"function"==typeof t.postCreate&&"function"==typeof t.startup}(e.widget)&&e.widget.startup(),!r)return void i.appendChild(e.node);const s=Array.from(i.children);if(0===n){const{firstChild:t}=i;return void(t?t.parentNode?.insertBefore(e.node,t):i.appendChild(e.node))}if(n>=s.length)return void i.appendChild(e.node);const a=s[n];a.parentNode?.insertBefore(e.node,a)}_toPixelPosition(t){return{top:UI_v(t.top),left:UI_v(t.left),right:UI_v(t.right),bottom:UI_v(t.bottom)}}_findByComponent(t){return this._components.find((o=>o===t))??null}_findById(t){return this._components.find((({id:o})=>o===t))??null}_findByNode(t){return this._components.find((({node:o})=>o===t))??null}_getComponentsAtPosition(t,o){const n=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(n.children).map((t=>this._findByNode(t))).filter(arrayUtils.Ru).filter((t=>o.includeInternal||!this._componentMap.get(t)?.internal)).map((({widget:t,node:o})=>t??o))}};(0,tslib_es6._)([(0,property.MZ)()],UI_P.prototype,"_locale",void 0),(0,tslib_es6._)([(0,property.MZ)()],UI_P.prototype,"container",null),(0,tslib_es6._)([(0,property.MZ)()],UI_P.prototype,"height",null),(0,tslib_es6._)([(0,property.MZ)({value:UI_})],UI_P.prototype,"padding",null),(0,tslib_es6._)([(0,cast.w)("padding")],UI_P.prototype,"castPadding",null),(0,tslib_es6._)([(0,property.MZ)()],UI_P.prototype,"view",void 0),(0,tslib_es6._)([(0,property.MZ)()],UI_P.prototype,"width",null),UI_P=(0,tslib_es6._)([(0,subclass.$)("esri.views.ui.UI")],UI_P);const UI_L=UI_P;var Widget=__webpack_require__("./node_modules/@arcgis/core/widgets/Widget.js"),webMercatorUtils=__webpack_require__("./node_modules/@arcgis/core/geometry/support/webMercatorUtils.js");const Lyr3DWasm_i=new Map;function AttributionViewModel_f(t,e){return t&&"copyright"in t&&(!e||"function"==typeof t.originOf&&"user"===t.originOf("copyright"))}function AttributionViewModel_b(t,e,i){i&&e&&(t.find((t=>t.layerView===e&&t.text===i))||t.push({text:i,layerView:e}))}const AttributionViewModel_A=[];let AttributionViewModel_=class extends Accessor.A{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Collection.A,this.view=null,this._allLayerViewsChange=t=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const e=this.view?.allLayerViews;e&&(this.addHandles(e.map((t=>(0,reactiveUtils.watch)((()=>[t.suspended,t.layer?.attributionVisible]),(()=>this._updateAttributionItems())))).toArray(),"suspension"),e.forEach((t=>{"esri.views.3d.layers.Tiles3DLayerView3D"===t.declaredClass&&this.addHandles(t.on("visible-geometry-changed",(()=>this._updateAttributionItems())),"visible-geometry-changed")}))),t?.removed&&t.removed.forEach((t=>{this._pendingAttributions.delete(t),this._fetchedAttributionData.delete(t)})),this._updateAttributionItems()},this.addHandles([(0,reactiveUtils.on)((()=>this.view?.allLayerViews),"change",(t=>this._allLayerViewsChange(t)),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),(0,reactiveUtils.when)((()=>!0===this.view?.stationary),(()=>this._updateAttributionItems()))])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,e=t?.allLayerViews;if(AttributionViewModel_A.length=0,!t||!e)return void this._clear();e.forEach((e=>{if(e.suspended||!e.layer?.attributionVisible)return;const i=e.layer;if(AttributionViewModel_f(i,"user"))return void AttributionViewModel_b(AttributionViewModel_A,e,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(e)){const r=this._fetchedAttributionData.get(e);return void(r?AttributionViewModel_b(AttributionViewModel_A,e,this._getDynamicAttribution(r,t,i)):AttributionViewModel_f(i)&&AttributionViewModel_b(AttributionViewModel_A,e,i.copyright))}return void this._fetchAttributionData(e)}const r="portalItem"in i?i.portalItem?.accessInformation:void 0;AttributionViewModel_b(AttributionViewModel_A,e,r||i.copyright)}));const i=e.find((t=>"integrated-mesh-3dtiles"===t.layer?.type));if(this.view&&i){const t=function Lyr3DWasm_r(e){return Lyr3DWasm_i.get(e)}(this.view);if(t){const e=t.getAttributionText();for(let t=0;t<e.length;++t)AttributionViewModel_b(AttributionViewModel_A,i,e[t])}}(function AttributionViewModel_y(t,e){return t.length!==e.length||t.some(((t,i)=>t.text!==e[i].text))})(this.items,AttributionViewModel_A)&&(this.items.removeAll(),this.items.addMany(AttributionViewModel_A)),AttributionViewModel_A.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const e=await(0,asyncUtils.Ke)(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const i=e.ok?this._createContributionIndex(e.value,function AttributionViewModel_g(t){return"bing-maps"===t.type}(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,i)}this._updateAttributionItems()}_createContributionIndex(t,e){const i=t.contributors,r={};if(!i)return r;for(let s=0;s<i.length;s++){const t=i[s],o=t.coverageAreas;if(!o)return;for(const i of o){const o=i.bbox,n=i.zoomMin-(e&&i.zoomMin?1:0),a=i.zoomMax-(e&&i.zoomMax?1:0),c=new Extent.default({xmin:o[1],ymin:o[0],xmax:o[3],ymax:o[2],spatialReference:SpatialReference.A.WGS84}),u={extent:(0,webMercatorUtils.Gh)(c),attribution:t.attribution||"",score:null!=i.score?i.score:100,id:s};for(let t=n;t<=a;t++)r[t]??=[],r[t].push(u)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(t,e,i){const{extent:r,scale:s}=e;let o=i.tileInfo?.scaleToZoom(s)??0;if(o=Math.min(t.maxKey??0,Math.round(o)),!r||null==o||o<=-1)return"";const n=t[o],a=(0,webMercatorUtils.Cv)(r.center.clone().normalize(),SpatialReference.A.WebMercator),c=new Set;return n?n.filter((t=>{const e=t.id,i=!c.has(e)&&a&&t.extent&&(0,contains.qz)(t.extent,a);return i&&c.add(e),i})).sort(((t,e)=>e.score-t.score||t.objectId-e.objectId)).map((t=>t.attribution)).join(", "):""}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,type:Collection.A})],AttributionViewModel_.prototype,"items",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],AttributionViewModel_.prototype,"state",null),(0,tslib_es6._)([(0,property.MZ)()],AttributionViewModel_.prototype,"view",void 0),AttributionViewModel_=(0,tslib_es6._)([(0,subclass.$)("esri.widgets.Attribution.AttributionViewModel")],AttributionViewModel_);const AttributionViewModel_v=AttributionViewModel_;var globalCss=__webpack_require__("./node_modules/@arcgis/core/widgets/support/globalCss.js"),accessibleHandler=__webpack_require__("./node_modules/@arcgis/core/widgets/support/decorators/accessibleHandler.js"),messageBundle=__webpack_require__("./node_modules/@arcgis/core/widgets/support/decorators/messageBundle.js"),jsxFactory=__webpack_require__("./node_modules/@arcgis/core/widgets/support/jsxFactory.js");const Attribution_a={base:"esri-attribution",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link"};let Attribution_h=class extends Widget.A{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver((e=>e.forEach((({target:e})=>this._checkSourceTextOverflow(e))))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new AttributionViewModel_v}initialize(){this.addHandles((0,reactiveUtils.on)((()=>this.viewModel?.items),"change",(()=>this.scheduleRender())))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce(((e,t)=>(e.includes(t.text)||e.push(t.text),e)),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[Attribution_a.open]:this._isOpen};return(0,jsxFactory.K)("div",{bind:this,class:this.classes(Attribution_a.base,globalCss.D.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return(0,jsxFactory.K)("div",{class:Attribution_a.poweredBy},"Powered by"," ",(0,jsxFactory.K)("a",{class:Attribution_a.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,i=t?0:void 0,{attributionText:r}=this,s={[Attribution_a.sourcesOpen]:e,[globalCss.D.interactive]:t};return(0,jsxFactory.K)("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Attribution_a.sources,s),innerHTML:r,tabIndex:i})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:i,clientWidth:r,scrollWidth:s}=e,o=s>r,n=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,n&&(t=!0),this._isOpen){const e=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,e&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};(0,tslib_es6._)([(0,property.MZ)()],Attribution_h.prototype,"_isOpen",void 0),(0,tslib_es6._)([(0,property.MZ)()],Attribution_h.prototype,"_isInteractive",null),(0,tslib_es6._)([(0,property.MZ)()],Attribution_h.prototype,"_attributionTextOverflowed",void 0),(0,tslib_es6._)([(0,property.MZ)()],Attribution_h.prototype,"_prevSourceNodeHeight",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Attribution_h.prototype,"attributionText",null),(0,tslib_es6._)([(0,property.MZ)()],Attribution_h.prototype,"icon",null),(0,tslib_es6._)([(0,property.MZ)()],Attribution_h.prototype,"itemDelimiter",void 0),(0,tslib_es6._)([(0,property.MZ)()],Attribution_h.prototype,"label",null),(0,tslib_es6._)([(0,property.MZ)(),(0,messageBundle.G)("esri/widgets/Attribution/t9n/Attribution")],Attribution_h.prototype,"messages",void 0),(0,tslib_es6._)([(0,property.MZ)()],Attribution_h.prototype,"view",null),(0,tslib_es6._)([(0,property.MZ)({type:AttributionViewModel_v})],Attribution_h.prototype,"viewModel",void 0),(0,tslib_es6._)([(0,accessibleHandler.$)()],Attribution_h.prototype,"_toggleState",null),Attribution_h=(0,tslib_es6._)([(0,subclass.$)("esri.widgets.Attribution")],Attribution_h);const Attribution_u=Attribution_h;var duration=__webpack_require__("./node_modules/@arcgis/core/views/2d/navigation/duration.js");var GoTo=__webpack_require__("./node_modules/@arcgis/core/widgets/support/GoTo.js");let CompassViewModel_h=class extends((0,GoTo.A)(Accessor.A)){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(reactiveUtils.Vh)}destroy(){this.view=null}get canShowNorth(){return function utils_e(e){return e?.spatialReference?.isWebMercator||e?.spatialReference?.isGeographic||!1}(this.view)}get state(){return!this.view?.ready||"2d"===this.view.type&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&("2d"===this.view?.type?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:(0,duration.s)()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){null!=t&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const o=-t.heading;this._set("orientation",{x:0,y:0,z:o})}_updateRotationWatcher(t){this.removeAllHandles(),this._watchForView(),t&&this.addHandles("2d"===t.type?(0,reactiveUtils.watch)((()=>t?.rotation),this._updateForRotation,reactiveUtils.Vh):(0,reactiveUtils.watch)((()=>t?.camera),this._updateForCamera,reactiveUtils.Vh))}_watchForView(t){this.addHandles((0,reactiveUtils.watch)((()=>this.view),this._updateRotationWatcher,t))}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],CompassViewModel_h.prototype,"canShowNorth",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],CompassViewModel_h.prototype,"orientation",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],CompassViewModel_h.prototype,"state",null),(0,tslib_es6._)([(0,property.MZ)()],CompassViewModel_h.prototype,"view",void 0),CompassViewModel_h=(0,tslib_es6._)([(0,subclass.$)("esri.widgets.Compass.CompassViewModel")],CompassViewModel_h);const CompassViewModel_p=CompassViewModel_h,css_o={base:"esri-compass",iconContainer:"esri-compass__icon-container"};var componentsUtils=__webpack_require__("./node_modules/@arcgis/core/widgets/support/componentsUtils.js");let Compass_c=class extends Widget.A{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new CompassViewModel_p,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=e=>({transform:`rotateZ(${e.z}deg)`})}loadDependencies(){return(0,componentsUtils.W)({button:()=>__webpack_require__.e(8044).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@esri/calcite-components/dist/components/calcite-button/index.js")),icon:()=>__webpack_require__.e(8676).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@esri/calcite-components/dist/components/calcite-icon/index.js"))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return"rotation"===this.viewModel.state?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,{messages:o}=this;return(0,jsxFactory.K)("div",{class:this.classes(css_o.base,globalCss.D.widget)},(0,jsxFactory.K)("calcite-button",{class:globalCss.D.widgetButton,disabled:"disabled"===t,kind:"neutral",label:o.reset,onclick:this._reset,round:!0,scale:"s",title:o.reset},(0,jsxFactory.K)("div",{"aria-hidden":"true",class:css_o.iconContainer,title:o.reset},(0,jsxFactory.K)("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};(0,tslib_es6._)([(0,property.MZ)()],Compass_c.prototype,"goToOverride",null),(0,tslib_es6._)([(0,property.MZ)()],Compass_c.prototype,"icon",null),(0,tslib_es6._)([(0,property.MZ)()],Compass_c.prototype,"label",null),(0,tslib_es6._)([(0,property.MZ)(),(0,messageBundle.G)("esri/widgets/Compass/t9n/Compass")],Compass_c.prototype,"messages",void 0),(0,tslib_es6._)([(0,property.MZ)()],Compass_c.prototype,"view",null),(0,tslib_es6._)([(0,property.MZ)({type:CompassViewModel_p})],Compass_c.prototype,"viewModel",void 0),Compass_c=(0,tslib_es6._)([(0,subclass.$)("esri.widgets.Compass")],Compass_c);const Compass_d=Compass_c,css_t_base="esri-navigation-toggle",css_t_isLayoutHorizontal="esri-navigation-toggle--horizontal";let NavigationToggleViewModel_s=class extends Accessor.A{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles((0,reactiveUtils.when)((()=>this.view?.navigation?.actionMap),(()=>this._updateNavigationActionMap())))}destroy(){this.view=null}get state(){return this.view?.ready&&"3d"===this.view?.type?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate")}_updateNavigationActionMap(){const t=this.view?.navigation?.actionMap;if(!t)return;const o="pan"===this._navigationMode;t.dragPrimary=o?"pan":"rotate",t.dragSecondary=o?"rotate":"pan"}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],NavigationToggleViewModel_s.prototype,"state",null),(0,tslib_es6._)([(0,property.MZ)()],NavigationToggleViewModel_s.prototype,"_navigationMode",void 0),(0,tslib_es6._)([(0,property.MZ)()],NavigationToggleViewModel_s.prototype,"view",void 0),NavigationToggleViewModel_s=(0,tslib_es6._)([(0,subclass.$)("esri.widgets.NavigationToggle.NavigationToggleViewModel")],NavigationToggleViewModel_s);const NavigationToggleViewModel_r=NavigationToggleViewModel_s;let NavigationToggle_c=class extends Widget.A{constructor(t,e){super(t,e),this.messages=null,this.viewModel=new NavigationToggleViewModel_r,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const t="pan"===this.viewModel?.navigationMode?this._rotateButton:this._panButton;(0,widgetUtils.Z6)(t),this.toggle()}}loadDependencies(){return(0,componentsUtils.W)({button:()=>__webpack_require__.e(8044).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@esri/calcite-components/dist/components/calcite-button/index.js"))})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){"horizontal"!==t&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t="disabled"===this.viewModel?.state,e="pan"===this.viewModel?.navigationMode,o=this.messages.toggle;return(0,jsxFactory.K)("div",{class:this.classes(css_t_base,globalCss.D.widget,{[css_t_isLayoutHorizontal]:"horizontal"===this.layout})},(0,jsxFactory.K)("calcite-button",{afterCreate:t=>{this._panButton=t},appearance:e?"outline-fill":"solid",class:globalCss.D.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:o,onclick:this._toggle,tabIndex:e?void 0:-1,title:o}),(0,jsxFactory.K)("calcite-button",{afterCreate:t=>{this._rotateButton=t},appearance:e?"solid":"outline-fill",class:globalCss.D.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:o,onclick:this._toggle,tabIndex:e?-1:void 0,title:o}))}};(0,tslib_es6._)([(0,property.MZ)()],NavigationToggle_c.prototype,"icon",null),(0,tslib_es6._)([(0,property.MZ)()],NavigationToggle_c.prototype,"label",null),(0,tslib_es6._)([(0,property.MZ)({value:"vertical"})],NavigationToggle_c.prototype,"layout",null),(0,tslib_es6._)([(0,property.MZ)(),(0,messageBundle.G)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],NavigationToggle_c.prototype,"messages",void 0),(0,tslib_es6._)([(0,property.MZ)()],NavigationToggle_c.prototype,"view",null),(0,tslib_es6._)([(0,property.MZ)({type:NavigationToggleViewModel_r})],NavigationToggle_c.prototype,"viewModel",void 0),NavigationToggle_c=(0,tslib_es6._)([(0,subclass.$)("esri.widgets.NavigationToggle")],NavigationToggle_c);const NavigationToggle_d=NavigationToggle_c;let ZoomConditions2D_r=class extends Accessor.A{get canZoomIn(){const o=this.view?.ready;if(!o)return!1;const t=this.view?.constraints?.effectiveMaxScale;return 0===t||this._scale>t}get canZoomOut(){const{view:o}=this,t=o?.ready;if(!t)return!1;const e=o.constraints?.effectiveMinScale;return 0===e||this._scale<e}get _scale(){const o=this.view?.animation?.target;return(o&&"then"in o?void 0:o?.scale)??this.view?.scale??0}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ZoomConditions2D_r.prototype,"canZoomIn",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ZoomConditions2D_r.prototype,"canZoomOut",null),(0,tslib_es6._)([(0,property.MZ)()],ZoomConditions2D_r.prototype,"view",void 0),(0,tslib_es6._)([(0,property.MZ)()],ZoomConditions2D_r.prototype,"_scale",null),ZoomConditions2D_r=(0,tslib_es6._)([(0,subclass.$)("esri.widgets.Zoom.ZoomConditions2D")],ZoomConditions2D_r);const ZoomConditions2D_c=ZoomConditions2D_r;let ZoomConditions3D_s=class extends Accessor.A{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ZoomConditions3D_s.prototype,"canZoomIn",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ZoomConditions3D_s.prototype,"canZoomOut",null),(0,tslib_es6._)([(0,property.MZ)()],ZoomConditions3D_s.prototype,"view",void 0),ZoomConditions3D_s=(0,tslib_es6._)([(0,subclass.$)("esri.widgets.Zoom.ZoomConditions3D")],ZoomConditions3D_s);const ZoomConditions3D_c=ZoomConditions3D_s;let ZoomViewModel_m=class extends Accessor.A{constructor(o){super(o)}destroy(){this.view=null}get canZoomIn(){return null!=this._zoomConditions&&this._zoomConditions.canZoomIn}get canZoomOut(){return null!=this._zoomConditions&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(o){o?"2d"===o.type?this._zoomConditions=new ZoomConditions2D_c({view:o}):"3d"===o.type&&(this._zoomConditions=new ZoomConditions3D_c({view:o})):this._zoomConditions=null,this._set("view",o)}zoomIn(){const o=this.view;this.canZoomIn&&o&&("2d"===o.type?o.mapViewNavigation.zoomIn():(0,promiseUtils.QZ)(o.goTo({zoomFactor:2})))}zoomOut(){const o=this.view;this.canZoomOut&&o&&("2d"===o.type?o.mapViewNavigation.zoomOut():(0,promiseUtils.QZ)(o.goTo({zoomFactor:.5})))}};(0,tslib_es6._)([(0,property.MZ)()],ZoomViewModel_m.prototype,"_zoomConditions",void 0),(0,tslib_es6._)([(0,property.MZ)()],ZoomViewModel_m.prototype,"canZoomIn",null),(0,tslib_es6._)([(0,property.MZ)()],ZoomViewModel_m.prototype,"canZoomOut",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],ZoomViewModel_m.prototype,"state",null),(0,tslib_es6._)([(0,property.MZ)()],ZoomViewModel_m.prototype,"view",null),ZoomViewModel_m=(0,tslib_es6._)([(0,subclass.$)("esri.widgets.Zoom.ZoomViewModel")],ZoomViewModel_m);const ZoomViewModel_p=ZoomViewModel_m,Zoom_m_base="esri-zoom",Zoom_m_horizontalLayout="esri-zoom--horizontal";let Zoom_c=class extends Widget.A{constructor(o,t){super(o,t),this.messages=null,this.viewModel=new ZoomViewModel_p,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return(0,componentsUtils.W)({button:()=>__webpack_require__.e(8044).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@esri/calcite-components/dist/components/calcite-button/index.js"))})}get icon(){return"magnifying-glass-plus"}set icon(o){this._overrideIfSome("icon",o)}get label(){return this.messages?.widgetLabel??""}set label(o){this._overrideIfSome("label",o)}set layout(o){"horizontal"!==o&&(o="vertical"),this._set("layout",o)}set view(o){this.viewModel.view=o}get view(){return this.viewModel.view}render(){const o={[Zoom_m_horizontalLayout]:"horizontal"===this.layout},{canZoomIn:t,canZoomOut:e}=this.viewModel,{zoomIn:s,zoomOut:i}=this.messages;return(0,jsxFactory.K)("div",{class:this.classes(Zoom_m_base,globalCss.D.widget,o)},(0,jsxFactory.K)("calcite-button",{class:globalCss.D.widgetButton,disabled:!t,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),(0,jsxFactory.K)("calcite-button",{class:globalCss.D.widgetButton,disabled:!e,iconStart:"minus",kind:"neutral",label:i,onclick:this.zoomOut,title:i}))}};(0,tslib_es6._)([(0,property.MZ)()],Zoom_c.prototype,"icon",null),(0,tslib_es6._)([(0,property.MZ)()],Zoom_c.prototype,"label",null),(0,tslib_es6._)([(0,property.MZ)({value:"vertical"})],Zoom_c.prototype,"layout",null),(0,tslib_es6._)([(0,property.MZ)(),(0,messageBundle.G)("esri/widgets/Zoom/t9n/Zoom")],Zoom_c.prototype,"messages",void 0),(0,tslib_es6._)([(0,property.MZ)()],Zoom_c.prototype,"view",null),(0,tslib_es6._)([(0,property.MZ)({type:ZoomViewModel_p})],Zoom_c.prototype,"viewModel",void 0),Zoom_c=(0,tslib_es6._)([(0,subclass.$)("esri.widgets.Zoom")],Zoom_c);const Zoom_p=Zoom_c;let DefaultUI_h=class extends UI_L{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=t=>{this.components.forEach((o=>{const e=this._find(o),i=e?.widget;(function DefaultUI_m(t){return void 0!==t?.view})(i)&&(i.view=t)}))},this._componentsWatcher=(t,o)=>{this._removeComponents(o),this._addComponents(t),this._adjustPadding(t)}}initialize(){this.addHandles([(0,reactiveUtils.watch)((()=>this.components),this._componentsWatcher,reactiveUtils.Vh),(0,reactiveUtils.watch)((()=>this.view),this._updateViewAwareWidgets,reactiveUtils.Vh)])}_add(t,o,e,i,s){let r=t;if("string"==typeof t&&this._defaultPositionLookup[t]){if(this._find(t))return;r=this._createComponent(t)}super._add(r,o,e,i,s)}_removeComponents(t){t.forEach((t=>{const o=this._find(t);o&&(this.remove(o),o.destroy())}))}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(t){this.constructed&&t.forEach((t=>this.add(this._createComponent(t),this._defaultPositionLookup[t])))}_createComponent(t){const o=this._createWidget(t);return new Component_m({id:t,node:o})}_createWidget(t){const o=this.view;switch(t){case"attribution":return new Attribution_u({view:o});case"compass":return new Compass_d({view:o});case"navigation-toggle":return new NavigationToggle_d({view:o});case"zoom":return new Zoom_p({view:o})}}};(0,tslib_es6._)([(0,property.MZ)()],DefaultUI_h.prototype,"components",void 0),DefaultUI_h=(0,tslib_es6._)([(0,subclass.$)("esri.views.ui.DefaultUI")],DefaultUI_h);const DefaultUI_u=DefaultUI_h;let DefaultUI2D_e=class extends DefaultUI_u{constructor(o){super(o),this.components=["attribution","zoom"]}};(0,tslib_es6._)([(0,property.MZ)()],DefaultUI2D_e.prototype,"components",void 0),DefaultUI2D_e=(0,tslib_es6._)([(0,subclass.$)("esri.views.ui.2d.DefaultUI2D")],DefaultUI2D_e);const DefaultUI2D_c=DefaultUI2D_e;var ColorBackground_p,utils=__webpack_require__("./node_modules/@arcgis/core/webmap/utils.js"),lang=__webpack_require__("./node_modules/@arcgis/core/core/lang.js");let ColorBackground_a=ColorBackground_p=class extends JSONSupport.A{constructor(o){super(o),this.color=new Color.A([0,0,0,1])}clone(){return new ColorBackground_p((0,lang.o8)({color:this.color}))}};(0,tslib_es6._)([(0,property.MZ)({type:Color.A,json:{write:!0}})],ColorBackground_a.prototype,"color",void 0),ColorBackground_a=ColorBackground_p=(0,tslib_es6._)([(0,subclass.$)("esri.webmap.background.ColorBackground")],ColorBackground_a);const ColorBackground_m=ColorBackground_a;let View2D_F,View2D_H,View2D_B,Z,View2D_J,View2D_K,View2D_Q;let Y=class extends(Viewport2DMixin_u(o(PopupView_w(C(K))))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new CollectionFlattener.A({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new Navigation_l({actionMap:new NavigationActionMap_p({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.floors=new Collection.A,this.grid=null,this.map=null,this.spatialReferenceLocked=!1,this.timeline=new Timeline.K,this.type="2d",this.view2dType=null,this.ui=new DefaultUI2D_c,this.test={takeScreenshot:async e=>async function screenshotUtils_r(t,i){const n=await screenshotUtils_a(t,i);return(0,screenshotUtils.encodeData)(n,screenshotUtils_e)}(this._getScreenshotView(e),e)},this.padding={top:0,right:0,bottom:0,left:0},(0,workers.n_)()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=(0,maybe.pR)(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new TileStore_u(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,t=this.spatialReference;return{lods:e?.spatialReference?.equals(t)?e.lods:null,spatialReference:t}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:t,center:i,viewpoint:r,extent:s}=this;let a=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||s||(t?.effectiveLODs||(a=-1),i&&(0!==e||-1!==a)||null!=r?.targetGeometry&&("extent"===r.targetGeometry.type||r.scale)))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=e.targetGeometry,i=this.spatialReference;return(0,projection.isLoadedOrLoadFor)(t.spatialReference,i)}get background(){return(0,utils.r)(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get highlightOptions(){return(0,highlightOptionsUtils.a)(this)}set highlightOptions(e){(0,highlightOptionsUtils.o)(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resolution(){return this.stateManager.resolution??0}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||null===this.magnifier.position||!this._magnifierView?.updatingHandles.updating),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some((e=>!e.destroyed&&!("layerViews"in e)&&!0===e.updating))||e);if((0,has.A)("esri-2d-log-updating")){const i=this.allLayerViews.reduce(((e,t)=>({...e,[`${t.layer.id}(${t.layer.type})`]:!t.destroyed&&!("layerViews"in t)&&t.updating})),{});console.log(`Updating MapView: ${t}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(i)}\n-> updatingMagnifier: ${e}\n`)}return t}get visibleArea(){const e=this.stateManager.visibleArea;return e?new Polygon.A({rings:[e.map((e=>[e[0],e[1]]))],spatialReference:this.spatialReference}):e}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,t){return async function hitTestUtils_s(e,i,s){const f=(0,support_screenUtils.FV)(i)?(0,support_screenUtils.xB)(e,i):i;if(!e.ready||isNaN(f.x)||isNaN(f.y))return{screenPoint:f,results:[]};let d=new Set;const y=new Set;let u=!1,h=null,g=null;s?.include?hitTestUtils_o(s.include,hitTestUtils_n(e,(e=>{d.add(e),hitTestUtils_p(e,(e=>y.add(e)))}),((e,r)=>{y.add(e),d.add(r)}),(e=>{h||(h=new Set),h.add(e)}),(e=>d.add(e)),(()=>u=!0))):(u=!0,d=new Set(e.allLayerViews),d.forEach((e=>{hitTestUtils_p(e,(e=>y.add(e)))}))),s?.exclude&&hitTestUtils_o(s.exclude,hitTestUtils_n(e,(e=>{d.delete(e),hitTestUtils_p(e,(e=>y.delete(e)))}),(e=>y.delete(e)),(e=>{g||(g=new Set),g.add(e)})));const m=e.toMap(f),w=e.allLayerViews.filter((r=>!r.suspended&&d.has(r)&&r.clips.every((r=>(0,clippingUtils.O)(e,r,f,m))))).reverse();let V=[...u?e.graphicsView.hitTest(m).map((e=>({type:"graphic",graphic:e,layer:null,mapPoint:m}))):[],...await Promise.all(w.map((e=>e.hitTest(m,f))).toArray())].filter(arrayUtils.Ru).flat().filter(arrayUtils.Ru);return V=V.filter((e=>"graphic"!==e.type||"subtype-group"!==e.layer?.type||y.has(e.graphic.layer))),h&&(V=V.filter((e=>!("graphic"in e)||!e.graphic||h?.has(hitTestUtils_c(e.graphic))))),g&&(V=V.filter((e=>!("graphic"in e)||!e.graphic||!g?.has(hitTestUtils_c(e.graphic))))),{screenPoint:f,results:V}}(this,e,t)}async takeScreenshot(e){return async function screenshotUtils_o(h,n){const o=await screenshotUtils_a(h,n),{format:r,quality:l}=(0,screenshotUtils.getFormatAndQuality)(n?.format,n?.quality);return(0,screenshotUtils.encode)(o,{format:r,quality:l},screenshotUtils_e)}(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const t=(0,support_screenUtils.FV)(e)?(0,support_screenUtils.xB)(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise((e=>{this.ready?e(this):this._resolveWhenReady.push(e)}))}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return(0,utils.r)(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return(0,utils.r)(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return layerViewModuleImportUtils_l_hasLayerViewModule(e)}importLayerView(e){return layerViewModuleImportUtils_l_importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(Logger.A.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const t=this.toMap(e),i=await this.hitTest(e),r=this.allLayerViews.toArray().filter((i=>i.clips.every((i=>(0,clippingUtils.O)(this,i,e,t))))).reverse(),s=new globalThis.Map(r.map((e=>[e.layer.uid,e]))),a=[];let n=0,o=0;for(;n<i.results.length||o<r.length;){const e=i.results.at(n);if(e&&"graphic"!==e.type){++n;continue}const l=s.get((e?.layer??e?.graphic.layer)?.uid);if((!e||l)&&o<r.length&&r.at(o)!==l){const e=r.at(o);"fetchPopupFeaturesAtLocation"in e&&a.push({mapPoint:t,layerView:e}),++o}else e&&(a.push({graphic:e.graphic,layerView:l}),++n)}return{hits:a,location:t}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=function WebGLRequirements_t(t){const o=(0,capabilities.C)();return o.available?"3d"===t&&o.majorPerformanceCaveat?new core_Error.A("webgl:major-performance-caveat-detected",`Your WebGL implementation (${o.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):o.supportsHighPrecisionFragment?o.supportsVertexShaderSamplers?null:new core_Error.A("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new core_Error.A("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new core_Error.A("webgl:required","WebGL2 is required but not supported.",(new Error).stack)}(this.type);if((0,has.A)("safari")&&(0,has.A)("safari")<9&&(e=new core_Error.A("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:(0,has.A)("safari")})),null!=e)throw Logger.A.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return async function X(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,GridView2D:a,Stage:n}]=await Promise.all([Promise.all([__webpack_require__.e(5958),__webpack_require__.e(5119)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/webglDeps.js")),Promise.all([__webpack_require__.e(6928),__webpack_require__.e(5958),__webpack_require__.e(9178),__webpack_require__.e(9144),__webpack_require__.e(7685),__webpack_require__.e(2683),__webpack_require__.e(1856),__webpack_require__.e(6302),__webpack_require__.e(3611),__webpack_require__.e(1830),__webpack_require__.e(8984),__webpack_require__.e(7104),__webpack_require__.e(316),__webpack_require__.e(1364)]).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@arcgis/core/views/2d/mapViewDeps.js"))]);View2D_H=e,View2D_B=t,Z=i,View2D_J=r,View2D_K=s,View2D_Q=a,View2D_F=n}()}_getDefaultViewpoint(){const{constraints:e,initialExtent:i,map:r,padding:s,size:a}=this;if(!e)return null;const n=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),l=n?.viewpoint,p=l?.targetGeometry?.extent??i,h=p?.center,g=l?.rotation??0,d=l?.scale||p&&(0,viewpointUtils.AU)(p,[a[0]-s.left-s.right,a[1]-s.top-s.bottom]),c=o.center??h,u=o.rotation??g,m=o.scale??d;return c&&m?new Viewpoint.A({targetGeometry:c,scale:m,rotation:u}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const t=new View2D_F(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new View2D_K,this._magnifierView.magnifier=this.magnifier,this._gridView=new View2D_Q;const i=new Z({view:this});this._set("labelManager",i);const r=new AnimationManager_x({view:this});this._set("animationManager",r);const s=new View2D_J({view:this,animationManager:r});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",(()=>this._updateStageChildren())),t.on("webgl-error",(e=>this.fatalError=e.error)),(0,reactiveUtils.watch)((()=>this.stationary),(e=>t.stationary=e),reactiveUtils.pc),(0,reactiveUtils.watch)((()=>this.background),(e=>{t.backgroundColor=e?.color,this._magnifierView.backgroundColor=e?.color}),reactiveUtils.pc),(0,reactiveUtils.watch)((()=>this.magnifier),(e=>this._magnifierView.magnifier=e),reactiveUtils.pc),(0,reactiveUtils.watch)((()=>this.grid),(e=>this._gridView.grid=e),reactiveUtils.pc),(0,reactiveUtils.watch)((()=>this.renderingOptions),(e=>t.renderingOptions=e),reactiveUtils.pc),(0,reactiveUtils.watch)((()=>this.highlights.items.map((e=>({name:e.name,options:{fillColor:e.color,haloColor:e.haloColor,fillOpacity:e.fillOpacity,haloOpacity:e.haloOpacity,haloWidth:e.haloWidth,haloBlur:e.haloBlur}})))),(()=>{t.highlightGradient=(0,util.u4)(t.highlightGradient,this.highlights.items)}),reactiveUtils.pc),(0,reactiveUtils.watch)((()=>this.state.id),(()=>t.state=this.state),reactiveUtils.pc)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach((e=>e(this))),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach((e=>{this.stage.addChild(e.container)}));const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new TileInfoView.A(TileInfo.default.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new View2D_H({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new View2D_B(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:t,padding:i,size:r,stage:s}=this;return{allLayerViews:t,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:i,size:r,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const e of this.allLayerViews)e.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const e of this.allLayerViews)e.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};Y.type="2d",(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],Y.prototype,"deactivatedWebGLExtensions",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],Y.prototype,"debugWebGLExtensions",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Y.prototype,"featuresTilingScheme",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Y.prototype,"graphicsTileStore",null),(0,tslib_es6._)([(0,property.MZ)()],Y.prototype,"graphicsView",void 0),(0,tslib_es6._)([(0,property.MZ)()],Y.prototype,"constraintsInfo",null),(0,tslib_es6._)([(0,property.MZ)()],Y.prototype,"initialExtentRequired",null),(0,tslib_es6._)([(0,property.MZ)()],Y.prototype,"labelManager",void 0),(0,tslib_es6._)([(0,property.MZ)({type:Navigation_l,nonNullable:!0})],Y.prototype,"navigation",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],Y.prototype,"renderCanvas",void 0),(0,tslib_es6._)([(0,property.MZ)()],Y.prototype,"renderingOptions",void 0),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],Y.prototype,"supersampleScreenshotsEnabled",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Y.prototype,"supportsGround",void 0),(0,tslib_es6._)([(0,property.MZ)()],Y.prototype,"defaultsFromMapSettings",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Y.prototype,"typeSpecificPreconditionsReady",null),(0,tslib_es6._)([(0,property.MZ)({type:ColorBackground_m})],Y.prototype,"background",null),(0,tslib_es6._)([(0,property.MZ)()],Y.prototype,"center",null),(0,tslib_es6._)([(0,property.MZ)({type:Collection.A})],Y.prototype,"floors",void 0),(0,tslib_es6._)([(0,property.MZ)()],Y.prototype,"grid",void 0),(0,tslib_es6._)([(0,property.MZ)({type:HighlightOptions.A})],Y.prototype,"highlightOptions",null),(0,tslib_es6._)([(0,property.MZ)()],Y.prototype,"map",void 0),(0,tslib_es6._)([(0,property.MZ)()],Y.prototype,"padding",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Y.prototype,"rendering",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Y.prototype,"resolution",null),(0,tslib_es6._)([(0,property.MZ)()],Y.prototype,"scale",null),(0,tslib_es6._)([(0,property.MZ)({constructOnly:!0})],Y.prototype,"spatialReferenceLocked",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Y.prototype,"tileInfo",null),(0,tslib_es6._)([(0,property.MZ)({type:Timeline.K,readOnly:!0})],Y.prototype,"timeline",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Y.prototype,"type",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Y.prototype,"updating",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Y.prototype,"view2dType",void 0),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Y.prototype,"visibleArea",null),(0,tslib_es6._)([(0,property.MZ)()],Y.prototype,"zoom",null),(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],Y.prototype,"navigating",null),(0,tslib_es6._)([(0,property.MZ)(),(0,cast.w)((e=>e instanceof DefaultUI_u?e:(0,ensureType.PZ)(DefaultUI2D_c,e)))],Y.prototype,"ui",void 0),Y=(0,tslib_es6._)([(0,subclass.$)("esri.views.View2D")],Y);const ee=Y;let MapView_t=class extends ee{constructor(o){super(o),this.view2dType="map"}};(0,tslib_es6._)([(0,property.MZ)({readOnly:!0})],MapView_t.prototype,"view2dType",void 0),MapView_t=(0,tslib_es6._)([(0,subclass.$)("esri.views.MapView")],MapView_t);const MapView_p=MapView_t},"./node_modules/@arcgis/core/views/ViewingMode.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var l;__webpack_require__.d(__webpack_exports__,{RT:()=>l}),function(l){l[l.Global=1]="Global",l[l.Local=2]="Local"}(l||(l={}))},"./node_modules/@arcgis/core/views/input/IViewEvents.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var t;__webpack_require__.d(__webpack_exports__,{w:()=>t}),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"}(t||(t={}))},"./node_modules/@arcgis/core/views/support/HighlightDefaults.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ps:()=>t,Tv:()=>c,Zs:()=>r,cD:()=>w,d2:()=>a,fT:()=>e,lH:()=>p,mA:()=>l,n4:()=>m,xc:()=>n});var _Color_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/Color.js");const e=new _Color_js__WEBPACK_IMPORTED_MODULE_0__.A("cyan"),r=1,l=.25,n=new _Color_js__WEBPACK_IMPORTED_MODULE_0__.A("black"),t=.4,a=.2,w=.25,c="default",m="temporary",p=new _Color_js__WEBPACK_IMPORTED_MODULE_0__.A("yellow")},"./node_modules/@arcgis/core/views/support/HighlightOptions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>u});var d,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_Color_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/Color.js"),_core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/Accessor.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js")),_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@arcgis/core/views/support/HighlightDefaults.js");let y=d=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__.A{constructor(o){super(o),this.name=_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_8__.Tv,this.color=_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_8__.fT.clone(),this.haloColor=null,this.haloOpacity=_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_8__.Zs,this.fillOpacity=_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_8__.mA,this.shadowColor=_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_8__.xc.clone(),this.shadowOpacity=_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_8__.Ps,this.shadowDifference=_HighlightDefaults_js__WEBPACK_IMPORTED_MODULE_8__.d2,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(o){return this.color.equals(o.color)&&(this.haloColor||this.color).equals(o.haloColor||o.color)&&this.haloOpacity===o.haloOpacity&&this.fillOpacity===o.fillOpacity&&this.haloWidth===o.haloWidth&&this.haloBlur===o.haloBlur&&this.shadowColor.equals(o.shadowColor)&&this.shadowOpacity===o.shadowOpacity&&this.shadowDifference===o.shadowDifference}clone(){return new d({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(o){this.color=o.color.clone(),this.haloColor=o.haloColor?.clone(),this.haloOpacity=o.haloOpacity,this.fillOpacity=o.fillOpacity,this.shadowColor=o.shadowColor.clone(),this.shadowDifference=o.shadowDifference,this.shadowOpacity=o.shadowOpacity,this.haloBlur=o.haloBlur,this.haloWidth=o.haloWidth}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:String,constructOnly:!0,nonNullable:!0})],y.prototype,"name",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:_Color_js__WEBPACK_IMPORTED_MODULE_1__.A,nonNullable:!0})],y.prototype,"color",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:_Color_js__WEBPACK_IMPORTED_MODULE_1__.A})],y.prototype,"haloColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({nonNullable:!0})],y.prototype,"haloOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({nonNullable:!0})],y.prototype,"fillOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({type:_Color_js__WEBPACK_IMPORTED_MODULE_1__.A,nonNullable:!0})],y.prototype,"shadowColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({nonNullable:!0})],y.prototype,"shadowOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({nonNullable:!0})],y.prototype,"shadowDifference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({nonNullable:!0})],y.prototype,"haloWidth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.MZ)({nonNullable:!0})],y.prototype,"haloBlur",void 0),y=d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.$)("esri.views.support.HighlightOptions")],y);const u=y},"./node_modules/@arcgis/core/views/support/screenshotUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{completeUserSettings:()=>o,createEmptyImageData:()=>_core_imageUtils_js__WEBPACK_IMPORTED_MODULE_2__.xR,encode:()=>a,encodeData:()=>r,getFormatAndQuality:()=>c,getMaximumResolutionScale:()=>s,resampleHermite:()=>w,screenshotSuperSampleSettings:()=>M,toDataUrl:()=>u,toRenderSettings:()=>n});__webpack_require__("./node_modules/@arcgis/core/core/has.js");var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/mathUtils.js"),_core_imageUtils_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/imageUtils.js");const h=2048,i=1.5,e=8;function o(h,i){const{format:e,quality:o,rotation:n,disableDecorations:a}=h||{},r=b(h,i.padding),l=function p(t,h){const i={x:0,y:0,width:h.width,height:h.height};if(t?.area){null!=t.area.x&&(i.x=Math.floor(t.area.x)),null!=t.area.y&&(i.y=Math.floor(t.area.y));const e=null!=t.area.width?Math.floor(t.area.width):null,o=null!=t.area.height?Math.floor(t.area.height):null;if(i.width=h.width-i.x,i.height=h.height-i.y,null!=e&&null!=o)i.width=Math.min(i.width,e),i.height=Math.min(i.height,o);else if(null==e&&null!=o){const t=Math.min(i.width,e);i.height=t/i.width*i.height,i.width=t}else if(null!=e&&null==o){const t=Math.min(i.height,o);i.width=t/i.height*i.width,i.height=t}}return function x(t,h){const i=Math.floor(Math.max(t.x,0)),e=Math.floor(Math.max(t.y,0)),o={x:i,y:e,width:Math.floor(Math.min(t.width,h.width-i)),height:Math.floor(Math.min(t.height,h.height-e))},n=o.width/o.height,a=t.width/t.height;if(a===n)return o;if(a>n){const t=Math.floor(o.width/a),h=o.height-t;return{x:o.x,y:Math.floor(o.y+h/2),width:o.width,height:t}}const r=Math.floor(o.height*a),l=o.width-r;return{x:Math.floor(o.x+l/2),y:o.y,width:r,height:o.height}}(function y(t,h){if(null==h?.width||null==h.height)return t;const i=h.width/h.height,e=t.width/t.height;if(e===i)return t;if(e<i){const h=Math.floor(t.height*i);return t.x-=(h-t.width)/2,t.width=h,t}const o=Math.floor(t.width/i);return t.y-=(o-t.height)/2,t.height=o,t}(i,t),h)}(h,{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom}),{width:g,height:f}=function m(t,h){if(!t)return h;const i=t.width,e=t.height;if(null!=i&&null!=e)return{width:Math.floor(i),height:Math.floor(e)};if(null==i&&null==e)return h;const o=h.width/h.height;return null==e?{width:Math.floor(i),height:Math.floor(i/o)}:{width:Math.floor(e*o),height:Math.floor(e)}}(h,l),d=j(e),u=R[d];return{format:d,quality:(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__.qE)(null!=o?o:u,0,100),area:l,width:g,height:f,rotation:n,disableDecorations:!!a,ignoreBackground:!!h?.ignoreBackground,ignorePadding:!!h?.ignorePadding}}function n(t,h){const i=o(t,h),e=i.area,n=i.width/e.width,a=b(i,h.padding),r=a.left+a.right,l=a.top+a.bottom,g=h.width-r,f=h.height-l,d=Math.floor(g*n+r),u=Math.floor(f*n+l),c=t?.layers??[],s=i.ignoreBackground,w=i.ignorePadding;return{framebufferWidth:d,framebufferHeight:u,region:{x:Math.floor(e.x*n)+a.left,y:Math.floor(e.y*n)+a.top,width:i.width,height:i.height},format:i.format,quality:i.quality,rotation:i.rotation,pixelRatio:n,layers:c,disableDecorations:i.disableDecorations,ignoreBackground:s,ignorePadding:w,objectAndLayerIdColor:!1}}function a(t,h,i){const{ctx:e,canvas:o}=l(t,i),n=e.getImageData(0,0,t.width,t.height),a=u(o,h);return g(o),{dataUrl:a,data:n}}function r(t,h){const{ctx:i,canvas:e}=l(t,h),o=i.getImageData(0,0,t.width,t.height);return g(e),o}function l(t,h){const i=function f(){return null==d&&(d=document.createElement("canvas")),d}();h.premultipliedAlpha&&function q(t){const h=t.data,i=h.length;for(let e=0;e<i;e+=4){const t=h[e+3];if(255!==t&&t>0){const i=255/t;h[e]=h[e]*i,h[e+1]=h[e+1]*i,h[e+2]=h[e+2]*i}}}(t),i.width=t.width,i.height=t.height;const e=i.getContext("2d",{willReadFrequently:!0});return e.putImageData(t,0,0),h.flipY&&function D(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}(e),{ctx:e,canvas:i}}function g(t){t.width=0,t.height=0}let d=null;function u(t,h){const i=v[h.format],e=h.quality/100;return t.toDataURL(i,e)}function c(h,i){const e=j(h),o=R[e];return{format:e,quality:(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__.qE)(null!=i?i:o,0,100)}}function s(t,h){return h/Math.max(t[0],t[1])}function w(t,h,i,e=0,o=0,n=t.width-e,a=t.height-o,r=!1){const{data:l}=t,{width:g,height:f,data:d}=h,u=n/g,c=a/f,s=Math.ceil(u/2),w=Math.ceil(c/2),M=t.width;for(let m=0;m<f;m++)for(let t=0;t<g;t++){const h=4*(t+(r?f-m-1:m)*g);let n=0,a=0,p=0,x=0,y=0,b=0;const j=(m+.5)*c;for(let r=Math.floor(m*c);r<(m+1)*c;r++){const h=Math.abs(j-(r+.5))/w,g=(t+.5)*u,f=h*h;for(let d=Math.floor(t*u);d<(t+1)*u;d++){const t=Math.abs(g-(d+.5))/s,h=Math.sqrt(f+t*t);if(h>=1)continue;let u=2*h*h*h-3*h*h+1;const c=4*(e+d+(o+r)*M);b+=u*l[c+3],a+=u,!i&&l[c+3]<255&&(u=u*l[c+3]/255),p+=u*l[c],x+=u*l[c+1],y+=u*l[c+2],n+=u}}d[h]=p/n,d[h+1]=x/n,d[h+2]=y/n,d[h+3]=b/a}return h}function M(t,o,n){if(!o)return t;const{framebufferWidth:a,framebufferHeight:r,pixelRatio:l,region:g}=t,f=b(t,n),d=f.left+f.right,u=f.top+f.bottom,c=a-d,s=r-u,w=Math.min(e,Math.min((h-d)/c,(h-u)/s));return w<i?t:{...t,framebufferWidth:Math.round(c*w)+d,framebufferHeight:Math.round(s*w)+u,pixelRatio:l*w,resample:{region:{x:Math.round((g.x-f.left)*w)+f.left,y:Math.round((g.y-f.top)*w)+f.top,width:Math.round(g.width*w),height:Math.round(g.height*w)},width:a,height:r}}}function b(t,h){return!h||t?.ignorePadding?k:h}function j(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return P}}const v={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},P="png",R={png:100,jpg:98,jpeg:98},k={top:0,right:0,bottom:0,left:0}},"./node_modules/@arcgis/core/webdoc/interfaces.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var A;__webpack_require__.d(__webpack_exports__,{X:()=>A}),function(A){A[A.SAVE=0]="SAVE",A[A.SAVE_AS=1]="SAVE_AS"}(A||(A={}))},"./node_modules/@arcgis/core/webdoc/support/writeUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CJ:()=>g});var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/core/Error.js"),_core_lang_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/lang.js"),_core_object_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@arcgis/core/core/object.js"),_core_accessorSupport_extensions_serializableProperty_writer_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/extensions/serializableProperty/writer.js"),_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@arcgis/core/layers/support/layerUtils.js");const o=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),l=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wcs","wfs","wms","wmts"]),a=new Set([...l,"link-chart"]);function d(e,t){if(t.restrictedWebMapWriting){const n=function u(e){switch(e.layerContainerType){case"basemap":return o;case"operational-layers":return"link-chart"===e.origin?a:l;default:return null}}(t);return null==n||n.has(e.type)&&!(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_4__.Ov)(e)}return!0}function m(e,t){"maxScale"in e&&(t.maxScale=(0,_core_accessorSupport_extensions_serializableProperty_writer_js__WEBPACK_IMPORTED_MODULE_3__.B)(e.maxScale)??void 0),"minScale"in e&&(t.minScale=(0,_core_accessorSupport_extensions_serializableProperty_writer_js__WEBPACK_IMPORTED_MODULE_3__.B)(e.minScale)??void 0)}function f(e,t){if(function p(e,t){if(t)if((0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_4__.Ov)(e)){const r=(0,_core_object_js__WEBPACK_IMPORTED_MODULE_2__.wc)("featureCollection.layers",t),i=r?.[0]?.layerDefinition;i&&m(e,i)}else"group"!==e.type&&m(e,t)}(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=(0,_core_accessorSupport_extensions_serializableProperty_writer_js__WEBPACK_IMPORTED_MODULE_3__.B)(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type))if((0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_4__.Ov)(e)){const n=t.featureCollection;n&&(n.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function g(n,r,o){if(!n.persistenceEnabled)return null;if(!("write"in n)||!n.write)return o?.messages&&o.messages.push(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__.A("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted`,{layer:n})),null;if((0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_4__.Ov)(n)&&!n.isTable)r=n.resourceInfo;else if(d(n,o)){const e={};return n.write(e,o)?e:null}return null!=r&&f(n,r=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.o8)(r)),r}},"./node_modules/@arcgis/core/widgets/support/GoTo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>t});var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/chunks/tslib.es6.js"),_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@arcgis/core/core/maybe.js"),_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js"),_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__("./node_modules/@arcgis/core/core/has.js"),__webpack_require__("./node_modules/@arcgis/core/core/Logger.js"),__webpack_require__("./node_modules/@arcgis/core/core/RandomLCG.js"),__webpack_require__("./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js"));const t=t=>{let i=class extends t{constructor(...o){super(...o),this.goToOverride=null,this.view=null}callGoTo(o){const{view:e}=this;return(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_6__.Lw)(e),this.goToOverride?this.goToOverride(e,o):e.goTo(o.target,o.options)}};return(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.MZ)()],i.prototype,"goToOverride",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.MZ)()],i.prototype,"view",void 0),i=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.$)("esri.widgets.support.GoTo")],i),i}},"./node_modules/@arcgis/core/widgets/support/decorators/accessibleHandler.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>t});var _widgetUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@arcgis/core/widgets/support/widgetUtils.js");function t(){return function(n,t){if(!n[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:r(n[t])}}}function r(t){return function(r,...o){!function e(n){const t=n?.type;return n instanceof KeyboardEvent||"keyup"===t||"keydown"===t||"keypress"===t}(r)?t.call(this,r,...o):(0,_widgetUtils_js__WEBPACK_IMPORTED_MODULE_0__.OU)(r.key)&&(r.preventDefault(),r.stopPropagation(),r.target.click())}}},"./node_modules/@arcgis/core/widgets/support/globalCss.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>e});const e={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"}}}]);