/*! For license information please see views-2d-interactive-editingTools.js.LICENSE.txt */
(self.webpackChunkdefraMap=self.webpackChunkdefraMap||[]).push([[7215],{3199:function(e){function t(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=function(){return[]},t.resolve=t,t.id=3199,e.exports=t},17858:function(e,t,n){"use strict";n.d(t,{L2:function(){return s},FK:function(){return Qe},wt:function(){return yt},xr:function(){return $},lh:function(){return V},$x:function(){return Ce},OX:function(){return a},h:function(){return C},w$:function(){return Xe},gv:function(){return Rt},Qu:function(){return l}});var i={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},r="app",o=Object.defineProperty,s={isDev:!!i.isDev,isBrowser:!0,isServer:!1,isTesting:!!i.isTesting},a=e=>{const t=new URL(e,vt.$resourcesUrl$);return t.origin!==mt.location.origin?t.href:t.pathname},l=e=>vt.$resourcesUrl$=e,c={},u=e=>"object"==(e=typeof e)||"function"===e;((e,t)=>{for(var n in t)o(e,n,{get:t[n],enumerable:!0})})({},{err:()=>h,map:()=>p,ok:()=>d,unwrap:()=>y,unwrapErr:()=>v});var d=e=>({isOk:!0,isErr:!1,value:e}),h=e=>({isOk:!1,isErr:!0,value:e});function p(e,t){if(e.isOk){const n=t(e.value);return n instanceof Promise?n.then((e=>d(e))):d(n)}if(e.isErr){const t=e.value;return h(t)}throw"should never get here"}var f,m,g,y=e=>{if(e.isOk)return e.value;throw e.value},v=e=>{if(e.isErr)return e.value;throw e.value},_=0,b=(e,t="")=>{if(i.profile&&performance.mark){const n=`st:${e}:${t}:${_++}`;return performance.mark(n),()=>performance.measure(`[Stencil] ${e}() <${t}>`,n)}return()=>{}},x="s-id",w="sty-id",M="c-id",S="http://www.w3.org/1999/xlink",T=["formAssociatedCallback","formResetCallback","formDisabledCallback","formStateRestoreCallback"],C=(e,t,...n)=>{let r=null,o=null,s=null,a=!1,l=!1;const c=[],d=t=>{for(let n=0;n<t.length;n++)r=t[n],Array.isArray(r)?d(r):null!=r&&"boolean"!=typeof r&&((a="function"!=typeof e&&!u(r))?r=String(r):i.isDev&&"function"!=typeof e&&void 0===r.$flags$&&ct("vNode passed as children has unexpected type.\nMake sure it's using the correct h() function.\nEmpty objects can also be the cause, look for JSX comments that became objects."),a&&l?c[c.length-1].$text$+=r:c.push(a?k(null,r):r),l=a)};if(d(n),t&&(i.isDev&&"input"===e&&I(t),i.vdomKey&&t.key&&(o=t.key),i.slotRelocation&&t.name&&(s=t.name),i.vdomClass)){const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}if(i.isDev&&c.some(E)&&ct("The <Host> must be the single root component. Make sure:\n- You are NOT using hostData() and <Host> in the same component.\n- <Host> is used once, and it's the single root component of the render() function."),i.vdomFunctional&&"function"==typeof e)return e(null===t?{}:t,c,A);const h=k(e,null);return h.$attrs$=t,c.length>0&&(h.$children$=c),i.vdomKey&&(h.$key$=o),i.slotRelocation&&(h.$name$=s),h},k=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return i.vdomAttribute&&(n.$attrs$=null),i.vdomKey&&(n.$key$=null),i.slotRelocation&&(n.$name$=null),n},$={},E=e=>e&&e.$tag$===$,A={forEach:(e,t)=>e.map(P).forEach(t),map:(e,t)=>e.map(P).map(t).map(R)},P=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),R=e=>{if("function"==typeof e.vtag){const t={...e.vattrs};return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),C(e.vtag,t,...e.vchildren||[])}const t=k(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},I=e=>{const t=Object.keys(e),n=t.indexOf("value");if(-1===n)return;const i=t.indexOf("type"),r=t.indexOf("min"),o=t.indexOf("max"),s=t.indexOf("step");(n<i||n<r||n<o||n<s)&&ut('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},O=(e,t,n,r,o,s,a)=>{let l,c,u,d;if(1===s.nodeType){for(l=s.getAttribute(M),l&&(c=l.split("."),c[0]!==a&&"0"!==c[0]||(u={$flags$:0,$hostId$:c[0],$nodeId$:c[1],$depth$:c[2],$index$:c[3],$tag$:s.tagName.toLowerCase(),$elm$:s,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},t.push(u),s.removeAttribute(M),e.$children$||(e.$children$=[]),e.$children$[u.$index$]=u,e=u,r&&"0"===u.$depth$&&(r[u.$index$]=u.$elm$))),d=s.childNodes.length-1;d>=0;d--)O(e,t,n,r,o,s.childNodes[d],a);if(s.shadowRoot)for(d=s.shadowRoot.childNodes.length-1;d>=0;d--)O(e,t,n,r,o,s.shadowRoot.childNodes[d],a)}else if(8===s.nodeType)c=s.nodeValue.split("."),c[1]!==a&&"0"!==c[1]||(l=c[0],u={$flags$:0,$hostId$:c[1],$nodeId$:c[2],$depth$:c[3],$index$:c[4],$elm$:s,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===l?(u.$elm$=s.nextSibling,u.$elm$&&3===u.$elm$.nodeType&&(u.$text$=u.$elm$.textContent,t.push(u),s.remove(),e.$children$||(e.$children$=[]),e.$children$[u.$index$]=u,r&&"0"===u.$depth$&&(r[u.$index$]=u.$elm$))):u.$hostId$===a&&("s"===l?(u.$tag$="slot",c[5]?s["s-sn"]=u.$name$=c[5]:s["s-sn"]="",s["s-sr"]=!0,i.shadowDom&&r&&(u.$elm$=gt.createElement(u.$tag$),u.$name$&&u.$elm$.setAttribute("name",u.$name$),s.parentNode.insertBefore(u.$elm$,s),s.remove(),"0"===u.$depth$&&(r[u.$index$]=u.$elm$)),n.push(u),e.$children$||(e.$children$=[]),e.$children$[u.$index$]=u):"r"===l&&(i.shadowDom&&r?s.remove():i.slotRelocation&&(o["s-cr"]=s,s["s-cn"]=!0))));else if(e&&"style"===e.$tag$){const t=k(null,s.textContent);t.$elm$=s,t.$index$="0",e.$children$=[t]}},L=(e,t)=>{if(1===e.nodeType){let n=0;for(;n<e.childNodes.length;n++)L(e.childNodes[n],t);if(e.shadowRoot)for(n=0;n<e.shadowRoot.childNodes.length;n++)L(e.shadowRoot.childNodes[n],t)}else if(8===e.nodeType){const n=e.nodeValue.split(".");"o"===n[0]&&(t.set(n[1]+"."+n[2],e),e.nodeValue="",e["s-en"]=n[3])}},V=(e,t,n)=>{const r=(e=>i.lazyLoad?rt(e).$hostElement$:e)(e);return{emit:e=>(i.isDev&&!r.isConnected&&ut(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),N(r,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e}))}},N=(e,t,n)=>{const i=vt.ce(t,n);return e.dispatchEvent(i),i},Z=new WeakMap,D=(e,t,n)=>{var r;const o=G(t,n),s=pt.get(o);if(!i.attachStyles)return o;if(e=11===e.nodeType?e:gt,s)if("string"==typeof s){e=e.head||e;let n,a=Z.get(e);if(a||Z.set(e,a=new Set),!a.has(o)){if(i.hydrateClientSide&&e.host&&(n=e.querySelector(`[${w}="${o}"]`)))n.innerHTML=s;else{n=gt.createElement("style"),n.innerHTML=s;const t=null!=(r=vt.$nonce$)?r:function(e){var t,n,i;return null!=(i=null==(n=null==(t=e.head)?void 0:t.querySelector('meta[name="csp-nonce"]'))?void 0:n.getAttribute("content"))?i:void 0}(gt);null!=t&&n.setAttribute("nonce",t),(i.hydrateServerSide||i.hotModuleReplacement)&&n.setAttribute(w,o),e.insertBefore(n,e.querySelector("link"))}4&t.$flags$&&(n.innerHTML+="slot-fb{display:contents}slot-fb[hidden]{display:none}"),a&&a.add(o)}}else i.constructableCSS&&!e.adoptedStyleSheets.includes(s)&&(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return o},G=(e,t)=>"sc-"+(i.mode&&t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),z=(e,t,n,r,o,s)=>{if(n!==r){let a=st(e,t),l=t.toLowerCase();if(i.vdomClass&&"class"===t){const t=e.classList,i=U(n),o=U(r);t.remove(...i.filter((e=>e&&!o.includes(e)))),t.add(...o.filter((e=>e&&!i.includes(e))))}else if(i.vdomStyle&&"style"===t){if(i.updatable)for(const t in n)r&&null!=r[t]||(!i.hydrateServerSide&&t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in r)n&&r[t]===n[t]||(!i.hydrateServerSide&&t.includes("-")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if(i.vdomKey&&"key"===t);else if(i.vdomRef&&"ref"===t)r&&r(e);else if(!i.vdomListener||(i.lazyLoad?a:e.__lookupSetter__(t))||"o"!==t[0]||"n"!==t[1]){if(i.vdomPropOrAttr){const c=u(r);if((a||c&&null!==r)&&!o)try{if(e.tagName.includes("-"))e[t]=r;else{const i=null==r?"":r;"list"===t?a=!1:null!=n&&e[t]==i||(e[t]=i)}}catch(e){}let d=!1;i.vdomXlink&&l!==(l=l.replace(/^xlink\:?/,""))&&(t=l,d=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(i.vdomXlink&&d?e.removeAttributeNS(S,t):e.removeAttribute(t)):(!a||4&s||o)&&!c&&(r=!0===r?"":r,i.vdomXlink&&d?e.setAttributeNS(S,t,r):e.setAttribute(t,r))}}else if(t="-"===t[2]?t.slice(3):st(mt,l)?l.slice(2):l[2]+t.slice(3),n||r){const i=t.endsWith(H);t=t.replace(j,""),n&&vt.rel(e,t,n,i),r&&vt.ael(e,t,r,i)}}},F=/\s/,U=e=>e?e.split(F):[],H="Capture",j=new RegExp(H+"$"),B=(e,t,n)=>{const r=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||c,s=t.$attrs$||c;if(i.updatable)for(const e of W(Object.keys(o)))e in s||z(r,e,o[e],void 0,n,t.$flags$);for(const e of W(Object.keys(s)))z(r,e,o[e],s[e],n,t.$flags$)};function W(e){return e.includes("ref")?[...e.filter((e=>"ref"!==e)),"ref"]:e}var K=!1,q=!1,Y=!1,X=!1,Q=(e,t,n,r)=>{var o;const s=t.$children$[n];let a,l,c,u=0;if(i.slotRelocation&&!K&&(Y=!0,"slot"===s.$tag$&&(f&&r.classList.add(f+"-s"),s.$flags$|=s.$children$?2:1)),i.isDev&&s.$elm$&&ct(`The JSX ${null!==s.$text$?`"${s.$text$}" text`:`"${s.$tag$}" element`} node should not be shared within the same renderer. The renderer caches element lookups in order to improve performance. However, a side effect from this is that the exact same JSX node should not be reused. For more information please see https://stenciljs.com/docs/templating-jsx#avoid-shared-jsx-nodes`),i.vdomText&&null!==s.$text$)a=s.$elm$=gt.createTextNode(s.$text$);else if(i.slotRelocation&&1&s.$flags$)a=s.$elm$=i.isDebug||i.hydrateServerSide?ge(s):gt.createTextNode("");else{if(i.svg&&!X&&(X="svg"===s.$tag$),a=s.$elm$=i.svg?gt.createElementNS(X?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",i.slotRelocation&&2&s.$flags$?"slot-fb":s.$tag$):gt.createElement(i.slotRelocation&&2&s.$flags$?"slot-fb":s.$tag$),i.svg&&X&&"foreignObject"===s.$tag$&&(X=!1),i.vdomAttribute&&B(null,s,X),(i.shadowDom||i.scoped)&&null!=f&&a["s-si"]!==f&&a.classList.add(a["s-si"]=f),s.$children$)for(u=0;u<s.$children$.length;++u)l=Q(e,s,u,a),l&&a.appendChild(l);i.svg&&("svg"===s.$tag$?X=!1:"foreignObject"===a.tagName&&(X=!0))}return a["s-hn"]=g,i.slotRelocation&&3&s.$flags$&&(a["s-sr"]=!0,a["s-cr"]=m,a["s-sn"]=s.$name$||"",a["s-rf"]=null==(o=s.$attrs$)?void 0:o.ref,c=e&&e.$children$&&e.$children$[n],c&&c.$tag$===s.$tag$&&e.$elm$&&(i.experimentalSlotFixes?J(e.$elm$):ee(e.$elm$,!1))),a},J=e=>{vt.$flags$|=1;const t=e.closest(g.toLowerCase());if(null!=t){const n=Array.from(t.childNodes).find((e=>e["s-cr"])),i=Array.from(e.childNodes);for(const e of n?i.reverse():i)null!=e["s-sh"]&&(he(t,e,null!=n?n:null),e["s-sh"]=void 0,Y=!0)}vt.$flags$&=-2},ee=(e,t)=>{vt.$flags$|=1;const n=Array.from(e.childNodes);if(e["s-sr"]&&i.experimentalSlotFixes){let t=e;for(;t=t.nextSibling;)t&&t["s-sn"]===e["s-sn"]&&t["s-sh"]===g&&n.push(t)}for(let e=n.length-1;e>=0;e--){const i=n[e];i["s-hn"]!==g&&i["s-ol"]&&(he(oe(i),i,re(i)),i["s-ol"].remove(),i["s-ol"]=void 0,i["s-sh"]=void 0,Y=!0),t&&ee(i,t)}vt.$flags$&=-2},te=(e,t,n,r,o,s)=>{let a,l=i.slotRelocation&&e["s-cr"]&&e["s-cr"].parentNode||e;for(i.shadowDom&&l.shadowRoot&&l.tagName===g&&(l=l.shadowRoot);o<=s;++o)r[o]&&(a=Q(null,n,o,e),a&&(r[o].$elm$=a,he(l,a,i.slotRelocation?re(t):t)))},ne=(e,t,n)=>{for(let r=t;r<=n;++r){const t=e[r];if(t){const e=t.$elm$;de(t),e&&(i.slotRelocation&&(q=!0,e["s-ol"]?e["s-ol"].remove():ee(e,!0)),e.remove())}}},ie=(e,t,n=!1)=>e.$tag$===t.$tag$&&(i.slotRelocation&&"slot"===e.$tag$?e.$name$===t.$name$:!(i.vdomKey&&!n)||e.$key$===t.$key$),re=e=>e&&e["s-ol"]||e,oe=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,se=(e,t,n=!1)=>{const r=t.$elm$=e.$elm$,o=e.$children$,s=t.$children$,a=t.$tag$,l=t.$text$;let c;i.vdomText&&null!==l?i.vdomText&&i.slotRelocation&&(c=r["s-cr"])?c.parentNode.textContent=l:i.vdomText&&e.$text$!==l&&(r.data=l):(i.svg&&(X="svg"===a||"foreignObject"!==a&&X),(i.vdomAttribute||i.reflect)&&(i.slot&&"slot"===a&&!K?i.experimentalSlotFixes&&e.$name$!==t.$name$&&(t.$elm$["s-sn"]=t.$name$||"",J(t.$elm$.parentElement)):B(e,t,X)),i.updatable&&null!==o&&null!==s?((e,t,n,r,o=!1)=>{let s,a,l=0,c=0,u=0,d=0,h=t.length-1,p=t[0],f=t[h],m=r.length-1,g=r[0],y=r[m];for(;l<=h&&c<=m;)if(null==p)p=t[++l];else if(null==f)f=t[--h];else if(null==g)g=r[++c];else if(null==y)y=r[--m];else if(ie(p,g,o))se(p,g,o),p=t[++l],g=r[++c];else if(ie(f,y,o))se(f,y,o),f=t[--h],y=r[--m];else if(ie(p,y,o))!i.slotRelocation||"slot"!==p.$tag$&&"slot"!==y.$tag$||ee(p.$elm$.parentNode,!1),se(p,y,o),he(e,p.$elm$,f.$elm$.nextSibling),p=t[++l],y=r[--m];else if(ie(f,g,o))!i.slotRelocation||"slot"!==p.$tag$&&"slot"!==y.$tag$||ee(f.$elm$.parentNode,!1),se(f,g,o),he(e,f.$elm$,p.$elm$),f=t[--h],g=r[++c];else{if(u=-1,i.vdomKey)for(d=l;d<=h;++d)if(t[d]&&null!==t[d].$key$&&t[d].$key$===g.$key$){u=d;break}i.vdomKey&&u>=0?(a=t[u],a.$tag$!==g.$tag$?s=Q(t&&t[c],n,u,e):(se(a,g,o),t[u]=void 0,s=a.$elm$),g=r[++c]):(s=Q(t&&t[c],n,c,e),g=r[++c]),s&&(i.slotRelocation?he(oe(p.$elm$),s,re(p.$elm$)):he(p.$elm$.parentNode,s,p.$elm$))}l>h?te(e,null==r[m+1]?null:r[m+1].$elm$,n,r,c,m):i.updatable&&c>m&&ne(t,l,h)})(r,o,t,s,n):null!==s?(i.updatable&&i.vdomText&&null!==e.$text$&&(r.textContent=""),te(r,null,t,s,0,s.length-1)):i.updatable&&null!==o&&ne(o,0,o.length-1),i.svg&&X&&"svg"===a&&(X=!1))},ae=e=>{const t=e.childNodes;for(const e of t)if(1===e.nodeType){if(e["s-sr"]){const n=e["s-sn"];e.hidden=!1;for(const i of t)if(i!==e)if(i["s-hn"]!==e["s-hn"]||""!==n){if(1===i.nodeType&&(n===i.getAttribute("slot")||n===i["s-sn"])||3===i.nodeType&&n===i["s-sn"]){e.hidden=!0;break}}else if(1===i.nodeType||3===i.nodeType&&""!==i.textContent.trim()){e.hidden=!0;break}}ae(e)}},le=[],ce=e=>{let t,n,r;for(const o of e.childNodes){if(o["s-sr"]&&(t=o["s-cr"])&&t.parentNode){n=t.parentNode.childNodes;const e=o["s-sn"];for(r=n.length-1;r>=0;r--)if(t=n[r],!(t["s-cn"]||t["s-nr"]||t["s-hn"]===o["s-hn"]||i.experimentalSlotFixes&&t["s-sh"]&&t["s-sh"]===o["s-hn"]))if(ue(t,e)){let n=le.find((e=>e.$nodeToRelocate$===t));q=!0,t["s-sn"]=t["s-sn"]||e,n?(n.$nodeToRelocate$["s-sh"]=o["s-hn"],n.$slotRefNode$=o):(t["s-sh"]=o["s-hn"],le.push({$slotRefNode$:o,$nodeToRelocate$:t})),t["s-sr"]&&le.map((e=>{ue(e.$nodeToRelocate$,t["s-sn"])&&(n=le.find((e=>e.$nodeToRelocate$===t)),n&&!e.$slotRefNode$&&(e.$slotRefNode$=n.$slotRefNode$))}))}else le.some((e=>e.$nodeToRelocate$===t))||le.push({$nodeToRelocate$:t})}1===o.nodeType&&ce(o)}},ue=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,de=e=>{i.vdomRef&&(e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(de))},he=(e,t,n)=>{const r=null==e?void 0:e.insertBefore(t,n);return i.scoped&&fe(t,e),r},pe=e=>e?e["s-rsc"]||e["s-si"]||e["s-sc"]||pe(e.parentElement):void 0,fe=(e,t)=>{var n,i,r;if(e&&t){const o=e["s-rsc"],s=pe(t);o&&(null==(n=e.classList)?void 0:n.contains(o))&&e.classList.remove(o),s&&(e["s-rsc"]=s,!(null==(i=e.classList)?void 0:i.contains(s))&&(null==(r=e.classList)||r.add(s)))}},me=(e,t,n=!1)=>{var r,o,s,a,l;const c=e.$hostElement$,u=e.$cmpMeta$,d=e.$vnode$||k(null,null),h=E(t)?t:C(null,null,t);if(g=c.tagName,i.isDev&&Array.isArray(t)&&t.some(E))throw new Error(`The <Host> must be the single root component.\nLooks like the render() function of "${g.toLowerCase()}" is returning an array that contains the <Host>.\n\nThe render() function should look like this instead:\n\nrender() {\n  // Do not return an array\n  return (\n    <Host>{content}</Host>\n  );\n}\n  `);if(i.reflect&&u.$attrsToReflect$&&(h.$attrs$=h.$attrs$||{},u.$attrsToReflect$.map((([e,t])=>h.$attrs$[t]=c[e]))),n&&h.$attrs$)for(const e of Object.keys(h.$attrs$))c.hasAttribute(e)&&!["key","ref","style","class"].includes(e)&&(h.$attrs$[e]=c[e]);if(h.$tag$=null,h.$flags$|=4,e.$vnode$=h,h.$elm$=d.$elm$=i.shadowDom&&c.shadowRoot||c,(i.scoped||i.shadowDom)&&(f=c["s-sc"]),K=_t&&0!=(1&u.$flags$),i.slotRelocation&&(m=c["s-cr"],q=!1),se(d,h,n),i.slotRelocation){if(vt.$flags$|=1,Y){ce(h.$elm$);for(const e of le){const t=e.$nodeToRelocate$;if(!t["s-ol"]){const e=i.isDebug||i.hydrateServerSide?ye(t):gt.createTextNode("");e["s-nr"]=t,he(t.parentNode,t["s-ol"]=e,t)}}for(const e of le){const t=e.$nodeToRelocate$,l=e.$slotRefNode$;if(l){const e=l.parentNode;let n=l.nextSibling;if(!i.experimentalSlotFixes||n&&1===n.nodeType){let i=null==(r=t["s-ol"])?void 0:r.previousSibling;for(;i;){let r=null!=(o=i["s-nr"])?o:null;if(r&&r["s-sn"]===t["s-sn"]&&e===r.parentNode){for(r=r.nextSibling;r===t||(null==r?void 0:r["s-sr"]);)r=null==r?void 0:r.nextSibling;if(!r||!r["s-nr"]){n=r;break}}i=i.previousSibling}}(!n&&e!==t.parentNode||t.nextSibling!==n)&&t!==n&&(i.experimentalSlotFixes||t["s-hn"]||!t["s-ol"]||(t["s-hn"]=t["s-ol"].parentNode.nodeName),he(e,t,n),1===t.nodeType&&(t.hidden=null!=(s=t["s-ih"])&&s)),t&&"function"==typeof l["s-rf"]&&l["s-rf"](t)}else 1===t.nodeType&&(n&&(t["s-ih"]=null!=(a=t.hidden)&&a),t.hidden=!0)}}q&&ae(h.$elm$),vt.$flags$&=-2,le.length=0}if(i.experimentalScopedSlotChanges&&2&u.$flags$)for(const e of h.$elm$.childNodes)e["s-hn"]===g||e["s-sh"]||(n&&null==e["s-ih"]&&(e["s-ih"]=null!=(l=e.hidden)&&l),e.hidden=!0);m=void 0},ge=e=>gt.createComment(`<slot${e.$name$?' name="'+e.$name$+'"':""}> (host=${g.toLowerCase()})`),ye=e=>gt.createComment("org-location for "+(e.localName?`<${e.localName}> (host=${e["s-hn"]})`:`[${e.textContent}]`)),ve=(e,t)=>{i.asyncLoading&&t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((t=>e.$onRenderResolve$=t)))},_e=(e,t)=>{if(i.taskQueue&&i.updatable&&(e.$flags$|=16),i.asyncLoading&&4&e.$flags$)return void(e.$flags$|=512);ve(e,e.$ancestorComponent$);const n=()=>be(e,t);return i.taskQueue?It(n):n()},be=(e,t)=>{const n=e.$hostElement$,r=b("scheduleUpdate",e.$cmpMeta$.$tagName$),o=i.lazyLoad?e.$lazyInstance$:n;if(!o)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let s;return t?(i.lazyLoad&&i.hostListener&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((([e,t])=>$e(o,e,t))),e.$queuedListeners$=void 0)),Ee(n,"componentWillLoad"),i.cmpWillLoad&&(s=$e(o,"componentWillLoad"))):(Ee(n,"componentWillUpdate"),i.cmpWillUpdate&&(s=$e(o,"componentWillUpdate"))),Ee(n,"componentWillRender"),i.cmpWillRender&&(s=xe(s,(()=>$e(o,"componentWillRender")))),r(),xe(s,(()=>Me(e,o,t)))},xe=(e,t)=>we(e)?e.then(t):t(),we=e=>e instanceof Promise||e&&e.then&&"function"==typeof e.then,Me=async(e,t,n)=>{var r;const o=e.$hostElement$,s=b("update",e.$cmpMeta$.$tagName$),a=o["s-rc"];i.style&&n&&(e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,o=b("attachStyles",t.$tagName$),s=D(i.shadowDom&&_t&&n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$);(i.shadowDom||i.scoped)&&i.cssAnnotations&&10&r&&(n["s-sc"]=s,n.classList.add(s+"-h"),i.scoped&&2&r&&n.classList.add(s+"-s")),o()})(e);const l=b("render",e.$cmpMeta$.$tagName$);if(i.isDev&&(e.$flags$|=1024),i.hydrateServerSide?await Se(e,t,o,n):Se(e,t,o,n),i.isDev&&(e.$renderCount$=void 0===e.$renderCount$?1:e.$renderCount$+1,e.$flags$&=-1025),i.hydrateServerSide)try{Pe(o),n&&(1&e.$cmpMeta$.$flags$?o["s-en"]="":2&e.$cmpMeta$.$flags$&&(o["s-en"]="c"))}catch(e){at(e,o)}if(i.asyncLoading&&a&&(a.map((e=>e())),o["s-rc"]=void 0),l(),s(),i.asyncLoading){const t=null!=(r=o["s-p"])?r:[],n=()=>Te(e);0===t.length?n():(Promise.all(t).then(n),e.$flags$|=4,t.length=0)}else Te(e)},Se=(e,t,n,r)=>{const o=!!i.allRenderFn,s=!!i.lazyLoad,a=!!i.taskQueue,l=!!i.updatable;try{if(t=(o||t.render)&&t.render(),l&&a&&(e.$flags$&=-17),(l||s)&&(e.$flags$|=2),i.hasRenderFn||i.reflect)if(i.vdomRender||i.reflect){if(i.hydrateServerSide)return Promise.resolve(t).then((t=>me(e,t,r)));me(e,t,r)}else{const i=n.shadowRoot;1&e.$cmpMeta$.$flags$?i.textContent=t:n.textContent=t}}catch(t){at(t,e.$hostElement$)}return null},Te=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=b("postUpdate",t),o=i.lazyLoad?e.$lazyInstance$:n,s=e.$ancestorComponent$;i.cmpDidRender&&(i.isDev&&(e.$flags$|=1024),$e(o,"componentDidRender"),i.isDev&&(e.$flags$&=-1025)),Ee(n,"componentDidRender"),64&e.$flags$?(i.cmpDidUpdate&&(i.isDev&&(e.$flags$|=1024),$e(o,"componentDidUpdate"),i.isDev&&(e.$flags$&=-1025)),Ee(n,"componentDidUpdate"),r()):(e.$flags$|=64,i.asyncLoading&&i.cssAnnotations&&Ae(n),i.cmpDidLoad&&(i.isDev&&(e.$flags$|=2048),$e(o,"componentDidLoad"),i.isDev&&(e.$flags$&=-2049)),Ee(n,"componentDidLoad"),r(),i.asyncLoading&&(e.$onReadyResolve$(n),s||ke(t))),i.method&&i.lazyLoad&&e.$onInstanceResolve$(n),i.asyncLoading&&(e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&Pt((()=>_e(e,!1))),e.$flags$&=-517)},Ce=e=>{if(i.updatable&&(s.isBrowser||s.isTesting)){const t=rt(e),n=t.$hostElement$.isConnected;return n&&2==(18&t.$flags$)&&_e(t,!1),n}return!1},ke=e=>{i.cssAnnotations&&Ae(gt.documentElement),i.asyncQueue&&(vt.$flags$|=2),Pt((()=>N(mt,"appload",{detail:{namespace:r}}))),i.profile&&performance.measure&&performance.measure(`[Stencil] ${r} initial load (by ${e})`,"st:app:start")},$e=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(e){at(e)}},Ee=(e,t)=>{i.lifecycleDOMEvents&&N(e,"stencil_"+t,{bubbles:!0,composed:!0,detail:{namespace:r}})},Ae=e=>{var t,n;return i.hydratedClass?e.classList.add(null!=(t=i.hydratedSelectorName)?t:"hydrated"):i.hydratedAttribute?e.setAttribute(null!=(n=i.hydratedSelectorName)?n:"hydrated",""):void 0},Pe=e=>{const t=e.children;if(null!=t)for(let e=0,n=t.length;e<n;e++){const n=t[e];"function"==typeof n.connectedCallback&&n.connectedCallback(),Pe(n)}},Re=(e,t,n)=>{var r;const o=e.prototype;if(i.formAssociated&&64&t.$flags$&&1&n&&T.forEach((e=>Object.defineProperty(o,e,{value(...t){const n=rt(this),r=i.lazyLoad?n.$hostElement$:this,o=i.lazyLoad?n.$lazyInstance$:r;if(o){const n=o[e];"function"==typeof n&&n.call(o,...t)}else n.$onReadyPromise$.then((n=>{const i=n[e];"function"==typeof i&&i.call(n,...t)}))}}))),i.member&&t.$members$){i.watchCallback&&e.watchers&&(t.$watchers$=e.watchers);const s=Object.entries(t.$members$);if(s.map((([e,[r]])=>{(i.prop||i.state)&&(31&r||(!i.lazyLoad||2&n)&&32&r)?Object.defineProperty(o,e,{get(){return t=e,rt(this).$instanceValues$.get(t);var t},set(o){if(i.isDev){const i=rt(this);0==(1&n)&&0===(i&&8&i.$flags$)&&0!=(31&r)&&0==(1024&r)&&ut(`@Prop() "${e}" on <${t.$tagName$}> is immutable but was modified from within the component.\nMore information: https://stenciljs.com/docs/properties#prop-mutability`)}((e,t,n,r)=>{const o=rt(e);if(i.lazyLoad&&!o)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const s=i.lazyLoad?o.$hostElement$:e,a=o.$instanceValues$.get(t),l=o.$flags$,c=i.lazyLoad?o.$lazyInstance$:s;var d,h;d=n,h=r.$members$[t][0],n=null==d||u(d)?d:i.propBoolean&&4&h?"false"!==d&&(""===d||!!d):i.propNumber&&2&h?parseFloat(d):i.propString&&1&h?String(d):d;const p=Number.isNaN(a)&&Number.isNaN(n);if((!i.lazyLoad||!(8&l)||void 0===a)&&n!==a&&!p&&(o.$instanceValues$.set(t,n),i.isDev&&(1024&o.$flags$?ut(`The state/prop "${t}" changed during rendering. This can potentially lead to infinite-loops and other bugs.`,"\nElement",s,"\nNew value",n,"\nOld value",a):2048&o.$flags$&&ut(`The state/prop "${t}" changed during "componentDidLoad()", this triggers extra re-renders, try to setup on "componentWillLoad()"`,"\nElement",s,"\nNew value",n,"\nOld value",a)),!i.lazyLoad||c)){if(i.watchCallback&&r.$watchers$&&128&l){const e=r.$watchers$[t];e&&e.map((e=>{try{c[e](n,a,t)}catch(e){at(e,s)}}))}if(i.updatable&&2==(18&l)){if(i.cmpShouldUpdate&&c.componentShouldUpdate&&!1===c.componentShouldUpdate(n,a,t))return;_e(o,!1)}}})(this,e,o,t)},configurable:!0,enumerable:!0}):i.lazyLoad&&i.method&&1&n&&64&r&&Object.defineProperty(o,e,{value(...t){var n;const i=rt(this);return null==(n=null==i?void 0:i.$onInstancePromise$)?void 0:n.then((()=>{var n;return null==(n=i.$lazyInstance$)?void 0:n[e](...t)}))}})})),i.observeAttribute&&(!i.lazyLoad||1&n)){const n=new Map;o.attributeChangedCallback=function(e,r,s){vt.jmp((()=>{var a;const l=n.get(e);if(this.hasOwnProperty(l))s=this[l],delete this[l];else{if(o.hasOwnProperty(l)&&"number"==typeof this[l]&&this[l]==s)return;if(null==l){const n=rt(this),o=null==n?void 0:n.$flags$;if(o&&!(8&o)&&128&o&&s!==r){const o=i.lazyLoad?n.$hostElement$:this,l=i.lazyLoad?n.$lazyInstance$:o,c=null==(a=t.$watchers$)?void 0:a[e];null==c||c.forEach((t=>{null!=l[t]&&l[t].call(l,s,r,e)}))}return}}this[l]=(null!==s||"boolean"!=typeof this[l])&&s}))},e.observedAttributes=Array.from(new Set([...Object.keys(null!=(r=t.$watchers$)?r:{}),...s.filter((([e,t])=>15&t[0])).map((([e,r])=>{var o;const s=r[1]||e;return n.set(s,e),i.reflect&&512&r[0]&&(null==(o=t.$attrsToReflect$)||o.push([e,s])),s}))]))}}return e},Ie=async(e,t,r,o)=>{let s;if(0==(32&t.$flags$)){t.$flags$|=32;const c=r.$lazyBundleId$;if((i.lazyLoad||i.hydrateClientSide)&&c){const e=ht(r,t,o);if(e&&"then"in e){const n=(a=`st:load:${r.$tagName$}:${t.$modeName$}`,l=`[Stencil] Load module for <${r.$tagName$}>`,i.profile&&performance.mark?(0===performance.getEntriesByName(a,"mark").length&&performance.mark(a),()=>{0===performance.getEntriesByName(l,"measure").length&&performance.measure(l,a)}):()=>{});s=await e,n()}else s=e;if(!s)throw new Error(`Constructor for "${r.$tagName$}#${t.$modeName$}" was not found`);i.member&&!s.isProxied&&(i.watchCallback&&(r.$watchers$=s.watchers),Re(s,r,2),s.isProxied=!0);const n=b("createInstance",r.$tagName$);i.member&&(t.$flags$|=8);try{new s(t)}catch(e){at(e)}i.member&&(t.$flags$&=-9),i.watchCallback&&(t.$flags$|=128),n(),Oe(t.$lazyInstance$)}else{s=e.constructor;const n=e.localName;customElements.whenDefined(n).then((()=>t.$flags$|=128))}if(i.style&&s&&s.style){let o=s.style;i.mode&&"string"!=typeof o&&(t.$modeName$=(e=>ft.map((t=>t(e))).find((e=>!!e)))(e),t.$modeName$&&(o=o[t.$modeName$]),i.hydrateServerSide&&t.$modeName$&&e.setAttribute("s-mode",t.$modeName$));const a=G(r,t.$modeName$);if(!pt.has(a)){const e=b("registerStyles",r.$tagName$);!i.hydrateServerSide&&i.shadowDom&&i.shadowDomShim&&8&r.$flags$&&(o=await n.e(8473).then(n.bind(n,3545)).then((e=>e.scopeCss(o,a,!1)))),((e,t,n)=>{let i=pt.get(e);xt&&n?(i=i||new CSSStyleSheet,"string"==typeof i?i=t:i.replaceSync(t)):i=t,pt.set(e,i)})(a,o,!!(1&r.$flags$)),e()}}}var a,l;const c=t.$ancestorComponent$,u=()=>_e(t,!0);i.asyncLoading&&c&&c["s-rc"]?c["s-rc"].push(u):u()},Oe=e=>{i.lazyLoad&&i.connectedCallback&&$e(e,"connectedCallback")},Le=e=>{const t=e["s-cr"]=gt.createComment(i.isDebug?`content-ref (host=${e.localName})`:"");t["s-cn"]=!0,he(e,t,e.firstChild)},Ve=e=>{i.lazyLoad&&i.disconnectedCallback&&$e(e,"disconnectedCallback"),i.cmpDidUnload&&$e(e,"componentDidUnload")},Ne=e=>{const t=e.cloneNode;e.cloneNode=function(e){const n=this,r=!!i.shadowDom&&n.shadowRoot&&_t,o=t.call(n,!!r&&e);if(i.slot&&!r&&e){let e,t,r=0;const s=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf","s-rsc"];for(;r<n.childNodes.length;r++)e=n.childNodes[r]["s-nr"],t=s.every((e=>!n.childNodes[r][e])),e&&(i.appendChildSlotFix&&o.__appendChild?o.__appendChild(e.cloneNode(!0)):o.appendChild(e.cloneNode(!0))),t&&o.appendChild(n.childNodes[r].cloneNode(!0))}return o}},Ze=e=>{e.__appendChild=e.appendChild,e.appendChild=function(e){const t=e["s-sn"]=Ke(e),n=qe(this.childNodes,t,this.tagName);if(n){const i=Ye(n,t),r=i[i.length-1],o=he(r.parentNode,e,r.nextSibling);return ae(this),o}return this.__appendChild(e)}},De=e=>{e.__removeChild=e.removeChild,e.removeChild=function(e){if(e&&void 0!==e["s-sn"]){const t=qe(this.childNodes,e["s-sn"],this.tagName);if(t){const n=Ye(t,e["s-sn"]).find((t=>t===e));if(n)return n.remove(),void ae(this)}}return this.__removeChild(e)}},Ge=e=>{const t=e.prepend;e.prepend=function(...e){e.forEach((e=>{"string"==typeof e&&(e=this.ownerDocument.createTextNode(e));const n=e["s-sn"]=Ke(e),i=qe(this.childNodes,n,this.tagName);if(i){const t=document.createTextNode("");t["s-nr"]=e,i["s-cr"].parentNode.__appendChild(t),e["s-ol"]=t;const r=Ye(i,n)[0];return he(r.parentNode,e,r.nextSibling)}return 1===e.nodeType&&e.getAttribute("slot")&&(e.hidden=!0),t.call(this,e)}))}},ze=e=>{e.append=function(...e){e.forEach((e=>{"string"==typeof e&&(e=this.ownerDocument.createTextNode(e)),this.appendChild(e)}))}},Fe=e=>{const t=e.insertAdjacentHTML;e.insertAdjacentHTML=function(e,n){if("afterbegin"!==e&&"beforeend"!==e)return t.call(this,e,n);const i=this.ownerDocument.createElement("_");let r;if(i.innerHTML=n,"afterbegin"===e)for(;r=i.firstChild;)this.prepend(r);else if("beforeend"===e)for(;r=i.firstChild;)this.append(r)}},Ue=e=>{e.insertAdjacentText=function(e,t){this.insertAdjacentHTML(e,t)}},He=e=>{const t=e.insertAdjacentElement;e.insertAdjacentElement=function(e,n){return"afterbegin"!==e&&"beforeend"!==e?t.call(this,e,n):"afterbegin"===e?(this.prepend(n),n):"beforeend"===e?(this.append(n),n):n}},je=e=>{const t=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperty(e,"__textContent",t),i.experimentalScopedSlotChanges?Object.defineProperty(e,"textContent",{get(){return" "+We(this.childNodes).map((e=>{var t,n;const i=[];let r=e.nextSibling;for(;r&&r["s-sn"]===e["s-sn"];)3!==r.nodeType&&1!==r.nodeType||i.push(null!=(n=null==(t=r.textContent)?void 0:t.trim())?n:""),r=r.nextSibling;return i.filter((e=>""!==e)).join(" ")})).filter((e=>""!==e)).join(" ")+" "},set(e){We(this.childNodes).forEach((t=>{let n=t.nextSibling;for(;n&&n["s-sn"]===t["s-sn"];){const e=n;n=n.nextSibling,e.remove()}if(""===t["s-sn"]){const n=this.ownerDocument.createTextNode(e);n["s-sn"]="",he(t.parentElement,n,t.nextSibling)}else t.remove()}))}}):Object.defineProperty(e,"textContent",{get(){var e;const t=qe(this.childNodes,"",this.tagName);return 3===(null==(e=null==t?void 0:t.nextSibling)?void 0:e.nodeType)?t.nextSibling.textContent:t?t.textContent:this.__textContent},set(e){var t;const n=qe(this.childNodes,"",this.tagName);if(3===(null==(t=null==n?void 0:n.nextSibling)?void 0:t.nodeType))n.nextSibling.textContent=e;else if(n)n.textContent=e;else{this.__textContent=e;const t=this["s-cr"];t&&he(this,t,this.firstChild)}}})},Be=(e,t)=>{class n extends Array{item(e){return this[e]}}if(8&t.$flags$){const t=e.__lookupGetter__("childNodes");Object.defineProperty(e,"children",{get(){return this.childNodes.map((e=>1===e.nodeType))}}),Object.defineProperty(e,"childElementCount",{get(){return e.children.length}}),Object.defineProperty(e,"childNodes",{get(){const e=t.call(this);if(0==(1&vt.$flags$)&&2&rt(this).$flags$){const t=new n;for(let n=0;n<e.length;n++){const i=e[n]["s-nr"];i&&t.push(i)}return t}return n.from(e)}})}},We=e=>{const t=[];for(const n of Array.from(e))n["s-sr"]&&t.push(n),t.push(...We(n.childNodes));return t},Ke=e=>e["s-sn"]||1===e.nodeType&&e.getAttribute("slot")||"",qe=(e,t,n)=>{let i,r=0;for(;r<e.length;r++){if(i=e[r],i["s-sr"]&&i["s-sn"]===t&&i["s-hn"]===n)return i;if(i=qe(i.childNodes,t,n),i)return i}return null},Ye=(e,t)=>{const n=[e];for(;(e=e.nextSibling)&&e["s-sn"]===t;)n.push(e);return n},Xe=(e,t)=>{const n={$flags$:t[0],$tagName$:t[1]};var r,o;i.member&&(n.$members$=t[2]),i.hostListener&&(n.$listeners$=t[3]),i.watchCallback&&(n.$watchers$=e.$watchers$),i.reflect&&(n.$attrsToReflect$=[]),i.shadowDom&&!_t&&1&n.$flags$&&(n.$flags$|=8),i.experimentalSlotFixes?i.scoped&&2&n.$flags$&&(r=e.prototype,o=n,Ne(r),Ze(r),ze(r),Ge(r),He(r),Fe(r),Ue(r),je(r),Be(r,o),De(r)):(i.slotChildNodesFix&&Be(e.prototype,n),i.cloneNodeFix&&Ne(e.prototype),i.appendChildSlotFix&&Ze(e.prototype),i.scopedSlotTextContentFix&&2&n.$flags$&&je(e.prototype));const s=e.prototype.connectedCallback,a=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){ot(this,n)},connectedCallback(){(e=>{if(0==(1&vt.$flags$)){const t=rt(e),n=t.$cmpMeta$,r=b("connectedCallback",n.$tagName$);if(i.hostListenerTargetParent&&Je(e,t,n.$listeners$,!0),1&t.$flags$)Je(e,t,n.$listeners$,!1),(null==t?void 0:t.$lazyInstance$)?Oe(t.$lazyInstance$):(null==t?void 0:t.$onReadyPromise$)&&t.$onReadyPromise$.then((()=>Oe(t.$lazyInstance$)));else{let r;if(t.$flags$|=1,i.hydrateClientSide&&(r=e.getAttribute(x),r)){if(i.shadowDom&&_t&&1&n.$flags$){const t=i.mode?D(e.shadowRoot,n,e.getAttribute("s-mode")):D(e.shadowRoot,n);e.classList.remove(t+"-h",t+"-s")}((e,t,n,r)=>{const o=b("hydrateClient",t),s=e.shadowRoot,a=[],l=i.shadowDom&&s?[]:null,c=r.$vnode$=k(t,null);vt.$orgLocNodes$||L(gt.body,vt.$orgLocNodes$=new Map),e[x]=n,e.removeAttribute(x),O(c,a,[],l,e,e,n),a.map((e=>{const n=e.$hostId$+"."+e.$nodeId$,i=vt.$orgLocNodes$.get(n),r=e.$elm$;i&&_t&&""===i["s-en"]&&i.parentNode.insertBefore(r,i.nextSibling),s||(r["s-hn"]=t,i&&(r["s-ol"]=i,r["s-ol"]["s-nr"]=r)),vt.$orgLocNodes$.delete(n)})),i.shadowDom&&s&&l.map((e=>{e&&s.appendChild(e)})),o()})(e,n.$tagName$,r,t)}if(i.slotRelocation&&!r&&(i.hydrateServerSide||(i.slot||i.shadowDom)&&12&n.$flags$)&&Le(e),i.asyncLoading){let n=e;for(;n=n.parentNode||n.host;)if(i.hydrateClientSide&&1===n.nodeType&&n.hasAttribute("s-id")&&n["s-p"]||n["s-p"]){ve(t,t.$ancestorComponent$=n);break}}i.prop&&!i.hydrateServerSide&&n.$members$&&Object.entries(n.$members$).map((([t,[n]])=>{if(31&n&&e.hasOwnProperty(t)){const n=e[t];delete e[t],e[t]=n}})),i.initializeNextTick?Pt((()=>Ie(e,t,n))):Ie(e,t,n)}r()}})(this),i.connectedCallback&&s&&s.call(this)},disconnectedCallback(){(async e=>{if(0==(1&vt.$flags$)){const t=rt(e);i.hostListener&&t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0),i.lazyLoad?(null==t?void 0:t.$lazyInstance$)?Ve(t.$lazyInstance$):(null==t?void 0:t.$onReadyPromise$)&&t.$onReadyPromise$.then((()=>Ve(t.$lazyInstance$))):Ve(e)}})(this),i.disconnectedCallback&&a&&a.call(this)},__attachShadow(){_t?i.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(16&n.$flags$)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=n.$tagName$,Re(e,n,3)},Qe=(e,t)=>t,Je=(e,t,n,r)=>{i.hostListener&&n&&(i.hostListenerTargetParent&&(n=r?n.filter((([e])=>32&e)):n.filter((([e])=>!(32&e)))),n.map((([n,r,o])=>{const s=i.hostListenerTarget?tt(e,n):e,a=et(t,o),l=nt(n);vt.ael(s,r,a,l),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>vt.rel(s,r,a,l)))})))},et=(e,t)=>n=>{try{i.lazyLoad?256&e.$flags$?e.$lazyInstance$[t](n):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,n]):e.$hostElement$[t](n)}catch(e){at(e)}},tt=(e,t)=>i.hostListenerTargetDocument&&4&t?gt:i.hostListenerTargetWindow&&8&t?mt:i.hostListenerTargetBody&&16&t?gt.body:i.hostListenerTargetParent&&32&t?e.parentElement:e,nt=e=>bt?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),it=i.hotModuleReplacement?window.__STENCIL_HOSTREFS__||(window.__STENCIL_HOSTREFS__=new WeakMap):new WeakMap,rt=e=>it.get(e),ot=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return i.isDev&&(n.$renderCount$=0),i.method&&i.lazyLoad&&(n.$onInstancePromise$=new Promise((e=>n.$onInstanceResolve$=e))),i.asyncLoading&&(n.$onReadyPromise$=new Promise((e=>n.$onReadyResolve$=e)),e["s-p"]=[],e["s-rc"]=[]),Je(e,n,t.$listeners$,!1),it.set(e,n)},st=(e,t)=>t in e,at=(e,t)=>(0,console.error)(e,t),lt=i.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],ct=(...e)=>console.error(...lt,...e),ut=(...e)=>console.warn(...lt,...e),dt=new Map,ht=(e,t,r)=>{const o=e.$tagName$.replace(/-/g,"_"),s=e.$lazyBundleId$;if(i.isDev&&"string"!=typeof s)return void ct(`Trying to lazily load component <${e.$tagName$}> with style mode "${t.$modeName$}", but it does not exist.`);const a=!i.hotModuleReplacement&&dt.get(s);return a?a[o]:n(3199)(`./${s}.entry.js${i.hotModuleReplacement&&r?"?s-hmr="+r:""}`).then((e=>(i.hotModuleReplacement||dt.set(s,e),e[o])),at)},pt=new Map,ft=[],mt="undefined"!=typeof window?window:{},gt=mt.document||{head:{}},yt=mt.HTMLElement||class{},vt={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,i)=>e.addEventListener(t,n,i),rel:(e,t,n,i)=>e.removeEventListener(t,n,i),ce:(e,t)=>new CustomEvent(e,t)},_t=!i.shadowDomShim||!i.shadowDom||(()=>(gt.head.attachShadow+"").indexOf("[native")>-1)(),bt=(()=>{let e=!1;try{gt.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),xt=!!i.constructableCSS&&(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1})(),wt=0,Mt=!1,St=[],Tt=[],Ct=[],kt=(e,t)=>n=>{e.push(n),Mt||(Mt=!0,t&&4&vt.$flags$?Pt(At):vt.raf(At))},$t=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){at(e)}e.length=0},Et=(e,t)=>{let n=0,i=0;for(;n<e.length&&(i=performance.now())<t;)try{e[n++](i)}catch(e){at(e)}n===e.length?e.length=0:0!==n&&e.splice(0,n)},At=()=>{if(i.asyncQueue&&wt++,$t(St),i.asyncQueue){const e=2==(6&vt.$flags$)?performance.now()+14*Math.ceil(.1*wt):1/0;Et(Tt,e),Et(Ct,e),Tt.length>0&&(Ct.push(...Tt),Tt.length=0),(Mt=St.length+Tt.length+Ct.length>0)?vt.raf(At):wt=0}else $t(Tt),(Mt=St.length>0)&&vt.raf(At)},Pt=e=>Promise.resolve(void 0).then(e),Rt=kt(St,!1),It=kt(Tt,!0)},2075:function(e,t,n){"use strict";n.d(t,{a:function(){return y},c:function(){return v},g:function(){return w},h:function(){return E},u:function(){return b}}),n(58941);var i=n(40633),r=n(15774),o=n(89736),s=n(73364),a=n(39714),l=n(20551),c=n(32501),u=n(72485),d=n(73313),h=n(5596),p=n(79578),f=n(29531),m=n(50973);const g=()=>i.A.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function y(e=V){return{plane:(0,h.vt)(e.plane),origin:(0,c.o8)(e.origin),basis1:(0,c.o8)(e.basis1),basis2:(0,c.o8)(e.basis2)}}function v(e,t=y()){return _(e.origin,e.basis1,e.basis2,t)}function _(e,t,n,i=y()){return(0,l.c)(i.origin,e),(0,l.c)(i.basis1,t),(0,l.c)(i.basis2,n),b(i),function(e,t){Math.abs((0,l.m)(e.basis1,e.basis2)/((0,l.l)(e.basis1)*(0,l.l)(e.basis2)))>1e-6&&g().warn(t,"Provided basis vectors are not perpendicular"),Math.abs((0,l.m)(e.basis1,P(e)))>1e-6&&g().warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,l.m)(P(e),e.origin)-e.plane[3])>1e-6&&g().warn(t,"Plane offset is not consistent with plane origin")}(i,"fromValues()"),i}function b(e){(0,h.mR)(e.basis2,e.basis1,e.origin,e.plane)}function x(e,t,n){e!==n&&v(e,n);const i=(0,l.j)(m.rq.get(),P(e),t);return(0,l.g)(n.origin,n.origin,i),n.plane[3]-=t,n}function w(e,t=y()){const n=(e[2]-e[0])/2,i=(e[3]-e[1])/2;return(0,l.s)(t.origin,e[0]+n,e[1]+i,0),(0,l.s)(t.basis1,n,0,0),(0,l.s)(t.basis2,0,i,0),(0,h.fA)(0,0,1,0,t.plane),t}function M(e,t,n){return!!(0,h.Ui)(e.plane,t,n)&&R(e,n)}function S(e,t,n){const i=N.get();L(e,t,i,N.get());let o=Number.POSITIVE_INFINITY;for(const s of z){const a=O(e,s,Z.get()),c=m.rq.get();if((0,h.T7)(i,a,c)){const e=(0,l.E)(m.rq.get(),t.origin,c),i=Math.abs((0,r.XM)((0,l.m)(t.direction,e)));i<o&&(o=i,(0,l.c)(n,c))}}return o===Number.POSITIVE_INFINITY?T(e,t,n):n}function T(e,t,n){if(M(e,t,n))return n;const i=N.get(),r=N.get();L(e,t,i,r);let o=Number.POSITIVE_INFINITY;for(const s of z){const a=O(e,s,Z.get()),c=m.rq.get();if((0,h.gv)(i,a,c)){const e=(0,p.kb)(t,c);if(!(0,h.Tj)(r,c))continue;e<o&&(o=e,(0,l.c)(n,c))}}return $(e,t.origin)<o&&C(e,t.origin,n),n}function C(e,t,n){const i=(0,h._I)(e.plane,t,m.rq.get()),r=(0,d.H6)(I(e,e.basis1),i,-1,1,m.rq.get()),o=(0,d.H6)(I(e,e.basis2),i,-1,1,m.rq.get());return(0,l.f)(n,(0,l.g)(m.rq.get(),r,o),e.origin),n}function k(e,t,n){const{origin:i,basis1:r,basis2:o}=e,s=(0,l.f)(m.rq.get(),t,i),a=(0,f.gr)(r,s),c=(0,f.gr)(o,s),u=(0,f.gr)(P(e),s);return(0,l.s)(n,a,c,u)}function $(e,t){const n=k(e,t,m.rq.get()),{basis1:i,basis2:r}=e,o=(0,l.l)(i),s=(0,l.l)(r),a=Math.max(Math.abs(n[0])-o,0),c=Math.max(Math.abs(n[1])-s,0),u=n[2];return a*a+c*c+u*u}function E(e,t){return Math.sqrt($(e,t))}function A(e,t){const n=-e.plane[3];return(0,f.gr)(P(e),t)-n}function P(e){return(0,h.Qj)(e.plane)}function R(e,t){const n=(0,l.f)(m.rq.get(),t,e.origin),i=(0,l.q)(e.basis1),r=(0,l.q)(e.basis2),o=(0,l.m)(e.basis1,n),s=(0,l.m)(e.basis2,n);return-o-i<0&&o-i<0&&-s-r<0&&s-r<0}function I(e,t){const n=Z.get();return(0,l.c)(n.origin,e.origin),(0,l.c)(n.vector,t),n}function O(e,t,n){const{basis1:i,basis2:r,origin:o}=e,s=(0,l.j)(m.rq.get(),i,t.origin[0]),a=(0,l.j)(m.rq.get(),r,t.origin[1]);(0,l.g)(n.origin,s,a),(0,l.g)(n.origin,n.origin,o);const c=(0,l.j)(m.rq.get(),i,t.direction[0]),u=(0,l.j)(m.rq.get(),r,t.direction[1]);return(0,l.j)(n.vector,(0,l.g)(c,c,u),2),n}function L(e,t,n,i){const r=P(e);(0,h.mR)(r,t.direction,t.origin,n),(0,h.mR)((0,h.Qj)(n),r,t.origin,i)}const V={plane:(0,h.vt)(),origin:(0,c.fA)(0,0,0),basis1:(0,c.fA)(1,0,0),basis2:(0,c.fA)(0,1,0)},N=new o.I(h.vt),Z=new o.I(d.vt),D=(0,c.vt)(),G=new o.I((()=>y())),z=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],F=(0,a.vt)(),U=(0,a.vt)();Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:class{constructor(){this.plane=(0,h.vt)(),this.origin=(0,c.vt)(),this.basis1=(0,c.vt)(),this.basis2=(0,c.vt)()}},altitudeAt:A,axisAt:function(e,t,n,i){return function(e,t,n){switch(t){case u._.X:(0,l.c)(n,e.basis1),(0,l.n)(n,n);break;case u._.Y:(0,l.c)(n,e.basis2),(0,l.n)(n,n);break;case u._.Z:(0,l.c)(n,P(e))}return n}(e,n,i)},closestPoint:T,closestPointOnSilhouette:S,copy:v,copyWithoutVerify:function(e,t){(0,l.c)(t.origin,e.origin),(0,l.c)(t.basis1,e.basis1),(0,l.c)(t.basis2,e.basis2),(0,h.C)(t.plane,e.plane)},create:y,distance:E,distance2:$,distanceToSilhouette:function(e,t){let n=Number.NEGATIVE_INFINITY;for(const i of z){const r=O(e,i,Z.get()),o=(0,d.kb)(r,t);o>n&&(n=o)}return Math.sqrt(n)},elevate:x,equals:function(e,t){return(0,l.e)(e.basis1,t.basis1)&&(0,l.e)(e.basis2,t.basis2)&&(0,l.e)(e.origin,t.origin)},extrusionContainsPoint:function(e,t){return(0,h.Tj)(e.plane,t)&&R(e,t)},fromAABoundingRect:w,fromValues:_,intersectRay:M,intersectRayClosestSilhouette:function(e,t,n){if(M(e,t,n))return n;const i=S(e,t,m.rq.get());return(0,l.g)(n,t.origin,(0,l.j)(m.rq.get(),t.direction,(0,l.p)(t.origin,i)/(0,l.l)(t.direction))),n},normal:P,projectPoint:C,projectPointLocal:k,rotate:function(e,t,n,i){return e!==i&&v(e,i),(0,s.$0)(U,t,n),(0,l.h)(i.basis1,e.basis1,U),(0,l.h)(i.basis2,e.basis2,U),b(i),i},setAltitudeAt:function(e,t,n,i){const r=A(e,t),o=(0,l.j)(D,P(e),n-r);return(0,l.g)(i,t,o),i},setExtent:function(e,t,n){return w(t,n),x(n,A(e,e.origin),n),n},transform:function(e,t,n){return e!==n&&v(e,n),(0,s.B8)(F,t),(0,s.mg)(F,F),(0,l.h)(n.basis1,e.basis1,F),(0,l.h)(n.basis2,e.basis2,F),(0,l.h)((0,h.Qj)(n.plane),(0,h.Qj)(e.plane),F),(0,l.h)(n.origin,e.origin,t),(0,h.mP)(n.plane,n.plane,n.origin),n},up:V,updateUnboundedPlane:b,wrap:function(e,t,n){const i=G.get();return i.origin=e,i.basis1=t,i.basis2=n,i.plane=(0,h.LV)(0,0,0,0),b(i),i}},Symbol.toStringTag,{value:"Module"}))},59122:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var i,r,o,s=n(32150),a={exports:{}};i=a,r=function(){function e(e,n,r){r=r||2;var o,s,a,c,u,d,h,p=n&&n.length,f=p?n[0]*r:e.length,m=t(e,0,f,r,!0),g=[];if(!m||m.next===m.prev)return g;if(p&&(m=l(e,n,m,r)),e.length>80*r){o=a=e[0],s=c=e[1];for(var y=r;y<f;y+=r)(u=e[y])<o&&(o=u),(d=e[y+1])<s&&(s=d),u>a&&(a=u),d>c&&(c=d);h=0!==(h=Math.max(a-o,c-s))?1/h:0}return i(m,g,r,o,s,h),g}function t(e,t,n,i,r){var o,s;if(r===$(e,t,n,i)>0)for(o=t;o<n;o+=i)s=T(o,e[o],e[o+1],s);else for(o=n-i;o>=t;o-=i)s=T(o,e[o],e[o+1],s);if(s&&_(s,s.next)){var a=s.next;C(s),s=a}return s}function n(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!_(i,i.next)&&0!==v(i.prev,i,i.next))i=i.next;else{var r=i.prev;if(C(i),(i=t=r)===i.next)break;n=!0}}while(n||i!==t);return t}function i(e,t,l,c,u,d,h){if(e){!h&&d&&p(e,c,u,d);for(var f,m,g=e;e.prev!==e.next;)if(f=e.prev,m=e.next,d?o(e,c,u,d):r(e))t.push(f.i/l),t.push(e.i/l),t.push(m.i/l),C(e),e=m.next,g=m.next;else if((e=m)===g){h?1===h?i(e=s(n(e),t,l),t,l,c,u,d,2):2===h&&a(e,t,l,c,u,d):i(n(e),t,l,c,u,d,1);break}}}function r(e){var t=e.prev,n=e,i=e.next;if(v(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(g(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&v(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function o(e,t,n,i){var r=e.prev,o=e,s=e.next;if(v(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,c=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,u=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,d=f(a,l,t,n,i),h=f(c,u,t,n,i),p=e.prevZ,m=e.nextZ;p&&p.z>=d&&m&&m.z<=h;){if(p!==e.prev&&p!==e.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,m!==e.prev&&m!==e.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,m.x,m.y)&&v(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;m&&m.z<=h;){if(m!==e.prev&&m!==e.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,m.x,m.y)&&v(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function s(e,t,i){var r=e;do{var o=r.prev,s=r.next.next;!_(o,s)&&b(o,r,r.next,s)&&M(o,s)&&M(s,o)&&(t.push(o.i/i),t.push(r.i/i),t.push(s.i/i),C(r),C(r.next),r=e=s),r=r.next}while(r!==e);return n(r)}function a(e,t,r,o,s,a){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&y(l,c)){var u=S(l,c);return l=n(l,l.next),u=n(u,u.next),i(l,t,r,o,s,a),void i(u,t,r,o,s,a)}c=c.next}l=l.next}while(l!==e)}function l(e,i,r,o){var s,a,l,u=[];for(s=0,a=i.length;s<a;s++)(l=t(e,i[s]*o,s<a-1?i[s+1]*o:e.length,o,!1))===l.next&&(l.steiner=!0),u.push(m(l));for(u.sort(c),s=0;s<u.length;s++)r=n(r=d(u[s],r),r.next);return r}function c(e,t){return e.x-t.x}function u(e){if(e.next.prev===e)return e;let t=e;for(;;){const n=t.next;if(n.prev===t||n===t||n===e)break;t=n}return t}function d(e,t){var i=function(e,t){var n,i=t,r=e.x,o=e.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===s)return n;var l,c=n,u=n.x,d=n.y,p=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&g(o<d?r:s,o,u,d,o<d?s:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),M(i,e)&&(l<p||l===p&&(i.x>n.x||i.x===n.x&&h(n,i)))&&(n=i,p=l)),i=i.next}while(i!==c);return n}(e,t);if(!i)return t;var r=S(i,e),o=n(i,i.next);let s=u(r);return n(s,s.next),o=u(o),u(t===i?o:t)}function h(e,t){return v(e.prev,e,t.prev)<0&&v(t.next,e,e.next)<0}function p(e,t,n,i){var r=e;do{null===r.z&&(r.z=f(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,o,s,a,l,c=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,i=n,a=0,t=0;t<c&&(a++,i=i.nextZ);t++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(s>1)}(r)}function f(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function m(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function g(e,t,n,i,r,o,s,a){return(r-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(i-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function y(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&b(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(M(e,t)&&M(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(v(e.prev,e,t.prev)||v(e,t.prev,t))||_(e,t)&&v(e.prev,e,e.next)>0&&v(t.prev,t,t.next)>0)}function v(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function _(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,n,i){var r=w(v(e,t,n)),o=w(v(e,t,i)),s=w(v(n,i,e)),a=w(v(n,i,t));return r!==o&&s!==a||!(0!==r||!x(e,n,t))||!(0!==o||!x(e,i,t))||!(0!==s||!x(n,e,i))||!(0!==a||!x(n,t,i))}function x(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function w(e){return e>0?1:e<0?-1:0}function M(e,t){return v(e.prev,e,e.next)<0?v(e,t,e.next)>=0&&v(e,e.prev,t)>=0:v(e,t,e.prev)<0||v(e,e.next,t)<0}function S(e,t){var n=new k(e.i,e.x,e.y),i=new k(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function T(e,t,n,i){var r=new k(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function C(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function k(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $(e,t,n,i){for(var r=0,o=t,s=n-i;o<n;o+=i)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}return e.deviation=function(e,t,n,i){var r=t&&t.length,o=r?t[0]*n:e.length,s=Math.abs($(e,0,o,n));if(r)for(var a=0,l=t.length;a<l;a++){var c=t[a]*n,u=a<l-1?t[a+1]*n:e.length;s-=Math.abs($(e,c,u,n))}var d=0;for(a=0;a<i.length;a+=3){var h=i[a]*n,p=i[a+1]*n,f=i[a+2]*n;d+=Math.abs((e[h]-e[f])*(e[p+1]-e[h+1])-(e[h]-e[p])*(e[f+1]-e[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},e.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++)for(var s=0;s<t;s++)n.vertices.push(e[r][o][s]);r>0&&(i+=e[r-1].length,n.holes.push(i))}return n},e},void 0!==(o=r())&&(i.exports=o);const l=(0,s.g)(a.exports)},69296:function(e,t,n){"use strict";var i;n.d(t,{u:function(){return i}}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(i||(i={}))},85876:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var i=n(44567),r=n(87085);class o{constructor(e){this._observable=new r.I,this._set=new Set(e)}get size(){return(0,i.gc)(this._observable),this._set.size}add(e){const t=this._set.size;return this._set.add(e),this._set.size!==t&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const t=this._set.delete(e);return t&&this._observable.notify(),t}entries(){return(0,i.gc)(this._observable),this._set.entries()}forEach(e,t){(0,i.gc)(this._observable),this._set.forEach(((n,i)=>e.call(t,n,i,this)),t)}has(e){return(0,i.gc)(this._observable),this._set.has(e)}keys(){return(0,i.gc)(this._observable),this._set.keys()}values(){return(0,i.gc)(this._observable),this._set.values()}[Symbol.iterator](){return(0,i.gc)(this._observable),this._set[Symbol.iterator]()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}},84016:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var i=n(25591);const r=()=>i.default.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches},72952:function(e,t,n){"use strict";n.d(t,{EB:function(){return p},Im:function(){return g},Mj:function(){return h},Ui:function(){return m},w2:function(){return f}});var i=n(83525),r=n(78879),o=n(63693);const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function a(e){return e instanceof i.A}function l(e){return e instanceof r.A?Object.keys(e.items):a(e)?(0,o.oY)(e).keys():e?Object.keys(e):[]}function c(e,t){return e instanceof r.A?e.items[t]:e[t]}function u(e){return e?e.declaredClass:null}function d(e,t){const n=e.diff;if(n&&"function"==typeof n)return n(e,t);const i=l(e),r=l(t);if(0===i.length&&0===r.length)return;if(!i.length||!r.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const o=r.filter((e=>!i.includes(e))),h=i.filter((e=>!r.includes(e))),p=i.filter((n=>r.includes(n)&&c(e,n)!==c(t,n))).concat(o,h).sort(),f=u(e);if(f&&s.has(f)&&p.length)return{type:"complete",oldValue:e,newValue:t};let m;const g=a(e)&&a(t);for(const i of p){const r=c(e,i),o=c(t,i);let s;if((g||"function"!=typeof r&&"function"!=typeof o)&&r!==o&&(null!=r||null!=o)){if(n&&n[i]&&"function"==typeof n[i])s=n[i]?.(r,o);else if(r instanceof Date&&o instanceof Date){if(r.getTime()===o.getTime())continue;s={type:"complete",oldValue:r,newValue:o}}else s="object"==typeof r&&"object"==typeof o&&u(r)===u(o)?d(r,o):{type:"complete",oldValue:r,newValue:o};null!=s&&(null!=m?m.diff[i]=s:m={type:"partial",diff:{[i]:s}})}}return m}function h(e,t){return p(e,t)}function p(e,t){if(null==e)return!1;const n=t.split(".");let i=e;for(const e of n){if("complete"===i.type)return!0;if("partial"!==i.type)return!1;{const t=i.diff[e];if(!t)return!1;i=t}}return!0}function f(e,t){if(!e)return!1;if("partial"===e.type){const n=Object.keys(e.diff);return 1===n.length&&n[0]===t}return!1}function m(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&u(e)!==u(t)?{type:"complete",oldValue:e,newValue:t}:d(e,t)}function g(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!g(e))return!1;for(const e of t.removed)if(!g(e))return!1;for(const e of t.changed)if(!g(e))return!1;return!0}case"partial":for(const t in e.diff)if(!g(e.diff[t]))return!1;return!0}}},75505:function(e,t,n){"use strict";n.d(t,{$:function(){return g},IB:function(){return o},N2:function(){return y},QP:function(){return k},RH:function(){return _},Vl:function(){return C},Ws:function(){return b},ZD:function(){return v},_L:function(){return T},bJ:function(){return M},e$:function(){return S},f6:function(){return E},pW:function(){return x},pf:function(){return $}});var i=n(52874),r=(n(33400),n(41546));function o(e){return"r"in e&&"g"in e&&"b"in e}function s(e){return"h"in e&&"s"in e&&"v"in e}function a(e){return"l"in e&&"a"in e&&"b"in e}function l(e){return"l"in e&&"c"in e&&"h"in e}const c=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],u=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function d(e,t){const n=[];let i,r;if(e[0].length!==t.length)throw new Error("dimensions do not match");const o=e.length,s=e[0].length;let a=0;for(i=0;i<o;i++){for(a=0,r=0;r<s;r++)a+=e[i][r]*t[r];n.push(a)}return n}function h(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),n=d(c,t);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function p(e){const t=d(u,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function f(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function m(e){const t=e.l,n=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function g(e){return o(e)?e:l(e)?function(e){return p(m(function(e){const t=e.l,n=e.c,i=e.h;return{l:t,a:n*Math.cos(i),b:n*Math.sin(i)}}(e)))}(e):a(e)?function(e){return p(m(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?p(e):s(e)?function(e){const t=(e.h+360)%360/60,n=e.s/100,i=e.v/100*255,r=i*n,o=r*(1-Math.abs(t%2-1));let s;switch(Math.floor(t)){case 0:s={r:r,g:o,b:0};break;case 1:s={r:o,g:r,b:0};break;case 2:s={r:0,g:r,b:o};break;case 3:s={r:0,g:o,b:r};break;case 4:s={r:o,g:0,b:r};break;case 5:case 6:s={r:r,g:0,b:o};break;default:s={r:0,g:0,b:0}}return s.r=Math.round(s.r+i-r),s.g=Math.round(s.g+i-r),s.b=Math.round(s.b+i-r),s}(e):e}function y(e){return s(e)?e:function(e){const t=e.r,n=e.g,i=e.b,r=Math.max(t,n,i),o=r-Math.min(t,n,i);let s=r,a=0===o?0:r===t?(n-i)/o%6:r===n?(i-t)/o+2:(t-n)/o+4,l=0===o?0:o/s;return a<0&&(a+=6),a*=60,l*=100,s*=100/255,{h:a,s:l,v:s}}(g(e))}function v(e){return a(e)?e:function(e){return f(h(e))}(g(e))}function _(e){return l(e)?e:function(e){return function(e){const t=e.l,n=e.a,i=e.b,r=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o=o>0?o:o+2*Math.PI,{l:t,c:r,h:o}}(f(h(e)))}(g(e))}function b(e,t){const{r:n,g:r,b:o}=t?.ignoreAlpha?e:function(e){let{r:t,g:n,b:r,a:o}=e;return o<1&&(t=Math.round(o*t+255*(1-o)),n=Math.round(o*n+255*(1-o)),r=Math.round(o*r+255*(1-o))),new i.A({r:t,g:n,b:r})}(e);return.2126*n+.7152*r+.0722*o}var x,w;function M(e,t=x.High){return b(e,{ignoreAlpha:!0})>t?new i.A([0,0,0,e.a]):new i.A([255,255,255,e.a])}function S(e,t){const n=v(e);n.l*=1-t;const i=g(n),r=e.clone();return r.setColor(i),r.a=e.a,r}function T(e,t){const n=e.clone();return n.a*=t,n}function C(e,t){const n=y(e);n.s*=t;const i=g(n),r=e.clone();return r.setColor(i),r.a=e.a,r}function k(e){return i.A.toUnitRGBA(e)}function $(e){return(0,r.fA)(e[0],e[1],e[2],e.length>3?e[3]:1)}function E(e,t){const n=i.A.toUnitRGBA(e);return n[3]*=t,n}(w=x||(x={}))[w.Low=160]="Low",w[w.High=225]="High"},88264:function(e,t,n){"use strict";function i(e){return"string"==typeof e?document.getElementById(e):e??null}function r(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function o(e,t){const n=t.parentNode;n&&n.insertBefore(e,t)}function s(e,t){for(;;){const n=e.firstChild;if(!n)break;t.appendChild(n)}}n.d(t,{$H:function(){return i},Ie:function(){return r},nc:function(){return o},yC:function(){return s}}),Element.prototype.closest},12978:function(e,t,n){"use strict";function i(){return[1,0,0,1,0,0]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}n.d(t,{o8:function(){return r},vt:function(){return i}});Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:[1,0,0,1,0,0],clone:r,create:i,createView:function(e,t){return new Float64Array(e,t,6)},fromValues:function(e,t,n,i,r,o){return[e,t,n,i,r,o]}},Symbol.toStringTag,{value:"Module"}))},67348:function(e,t,n){"use strict";n.d(t,{$0:function(){return d},B8:function(){return s},CV:function(){return h},D_:function(){return r},Tl:function(){return u},e$:function(){return l},hZ:function(){return o},hs:function(){return c},kN:function(){return p},lw:function(){return a}});var i=n(8527);function r(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function o(e,t,n,i,r,o,s){return e[0]=t,e[1]=n,e[2]=i,e[3]=r,e[4]=o,e[5]=s,e}function s(e,t){const n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5];let l=n*o-i*r;return l?(l=1/l,e[0]=o*l,e[1]=-i*l,e[2]=-r*l,e[3]=n*l,e[4]=(r*a-o*s)*l,e[5]=(i*s-n*a)*l,e):null}function a(e,t,n){const i=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=n[0],u=n[1],d=n[2],h=n[3],p=n[4],f=n[5];return e[0]=i*c+o*u,e[1]=r*c+s*u,e[2]=i*d+o*h,e[3]=r*d+s*h,e[4]=i*p+o*f+a,e[5]=r*p+s*f+l,e}function l(e,t,n){const i=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=Math.sin(n),u=Math.cos(n);return e[0]=i*u+o*c,e[1]=r*u+s*c,e[2]=i*-c+o*u,e[3]=r*-c+s*u,e[4]=a,e[5]=l,e}function c(e,t,n){const i=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=n[0],u=n[1];return e[0]=i*c,e[1]=r*c,e[2]=o*u,e[3]=s*u,e[4]=a,e[5]=l,e}function u(e,t,n){const i=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=n[0],u=n[1];return e[0]=i,e[1]=r,e[2]=o,e[3]=s,e[4]=i*c+o*u+a,e[5]=r*c+s*u+l,e}function d(e,t){const n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=-n,e[3]=i,e[4]=0,e[5]=0,e}function h(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function p(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function f(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}const m=a,g=f;Object.freeze(Object.defineProperty({__proto__:null,add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},equals:function(e,t){const n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=t[0],u=t[1],d=t[2],h=t[3],p=t[4],f=t[5],m=(0,i.FD)();return Math.abs(n-c)<=m*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-u)<=m*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-d)<=m*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-h)<=m*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(a-p)<=m*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(l-f)<=m*Math.max(1,Math.abs(l),Math.abs(f))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},frob:function(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)},fromRotation:d,fromScaling:h,fromTranslation:p,identity:r,invert:s,mul:m,multiply:a,multiplyScalar:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},multiplyScalarAndAdd:function(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e[4]=t[4]+n[4]*i,e[5]=t[5]+n[5]*i,e},rotate:l,scale:c,set:o,str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},sub:g,subtract:f,translate:u},Symbol.toStringTag,{value:"Module"}))},32237:function(e,t,n){"use strict";n.d(t,{A6:function(){return g},B8:function(){return p},Xd:function(){return u},Xr:function(){return f},Yc:function(){return P},hZ:function(){return v},lw:function(){return d},t2:function(){return E},x8:function(){return c}});var i=n(87725),r=n(61769),o=n(32501),s=n(8527),a=n(20551),l=n(33400);function c(e,t,n){n*=.5;const i=Math.sin(n);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(n),e}function u(e,t){const n=2*Math.acos(t[3]),i=Math.sin(n/2);return i>(0,s.FD)()?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),n}function d(e,t,n){const i=t[0],r=t[1],o=t[2],s=t[3],a=n[0],l=n[1],c=n[2],u=n[3];return e[0]=i*u+s*a+r*c-o*l,e[1]=r*u+s*l+o*a-i*c,e[2]=o*u+s*c+i*l-r*a,e[3]=s*u-i*a-r*l-o*c,e}function h(e,t,n,i){const r=t[0],o=t[1],a=t[2],l=t[3];let c,u,d,h,p,f=n[0],m=n[1],g=n[2],y=n[3];return u=r*f+o*m+a*g+l*y,u<0&&(u=-u,f=-f,m=-m,g=-g,y=-y),1-u>(0,s.FD)()?(c=Math.acos(u),d=Math.sin(c),h=Math.sin((1-i)*c)/d,p=Math.sin(i*c)/d):(h=1-i,p=i),e[0]=h*r+p*f,e[1]=h*o+p*m,e[2]=h*a+p*g,e[3]=h*l+p*y,e}function p(e,t){const n=t[0],i=t[1],r=t[2],o=t[3],s=n*n+i*i+r*r+o*o,a=s?1/s:0;return e[0]=-n*a,e[1]=-i*a,e[2]=-r*a,e[3]=o*a,e}function f(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function m(e,t){const n=t[0]+t[4]+t[8];let i;if(n>0)i=Math.sqrt(n+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);const r=(n+1)%3,o=(n+2)%3;i=Math.sqrt(t[3*n+n]-t[3*r+r]-t[3*o+o]+1),e[n]=.5*i,i=.5/i,e[3]=(t[3*r+o]-t[3*o+r])*i,e[r]=(t[3*r+n]+t[3*n+r])*i,e[o]=(t[3*o+n]+t[3*n+o])*i}return e}function g(e,t,n,i){const r=.5*Math.PI/180;t*=r,n*=r,i*=r;const o=Math.sin(t),s=Math.cos(t),a=Math.sin(n),l=Math.cos(n),c=Math.sin(i),u=Math.cos(i);return e[0]=o*l*u-s*a*c,e[1]=s*a*u+o*l*c,e[2]=s*l*c-o*a*u,e[3]=s*l*u+o*a*c,e}const y=l.c,v=l.s,_=l.f,b=d,x=l.b,w=l.g,M=l.l,S=l.i,T=S,C=l.j,k=C,$=l.n,E=l.a,A=l.e;function P(e,t,n){const i=(0,a.m)(t,n);return i<-.999999?((0,a.b)(R,I,t),(0,a.H)(R)<1e-6&&(0,a.b)(R,O,t),(0,a.n)(R,R),c(e,R,Math.PI),e):i>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,a.b)(R,t,n),e[0]=R[0],e[1]=R[1],e[2]=R[2],e[3]=1+i,$(e,e))}const R=(0,o.vt)(),I=(0,o.fA)(1,0,0),O=(0,o.fA)(0,1,0),L=(0,r.vt)(),V=(0,r.vt)(),N=(0,i.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:_,calculateW:function(e,t){const n=t[0],i=t[1],r=t[2];return e[0]=n,e[1]=i,e[2]=r,e[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),e},conjugate:f,copy:y,dot:w,equals:A,exactEquals:E,fromEuler:g,fromMat3:m,getAxisAngle:u,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:p,len:T,length:S,lerp:M,mul:b,multiply:d,normalize:$,random:function(e){const t=s.Ov,n=t(),i=t(),r=t(),o=Math.sqrt(1-n),a=Math.sqrt(n);return e[0]=o*Math.sin(2*Math.PI*i),e[1]=o*Math.cos(2*Math.PI*i),e[2]=a*Math.sin(2*Math.PI*r),e[3]=a*Math.cos(2*Math.PI*r),e},rotateX:function(e,t,n){n*=.5;const i=t[0],r=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=i*l+s*a,e[1]=r*l+o*a,e[2]=o*l-r*a,e[3]=s*l-i*a,e},rotateY:function(e,t,n){n*=.5;const i=t[0],r=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=i*l-o*a,e[1]=r*l+s*a,e[2]=o*l+i*a,e[3]=s*l-r*a,e},rotateZ:function(e,t,n){n*=.5;const i=t[0],r=t[1],o=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=i*l+r*a,e[1]=r*l-i*a,e[2]=o*l+s*a,e[3]=s*l-o*a,e},rotationTo:P,scale:x,set:v,setAxes:function(e,t,n,i){const r=N;return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-t[0],r[5]=-t[1],r[8]=-t[2],$(e,m(e,r))},setAxisAngle:c,slerp:h,sqlerp:function(e,t,n,i,r,o){return h(L,t,r,o),h(V,n,i,o),h(e,L,V,2*o*(1-o)),e},sqrLen:k,squaredLength:C,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))},7213:function(e,t,n){"use strict";function i(e){let t,n,i=[],r=!1;return function(...o){return r&&t===this&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(o,i)||(n=e.apply(this,o),t=this,i=o,r=!0),n}}n.d(t,{B:function(){return i}})},88226:function(e,t,n){"use strict";n.d(t,{Jd:function(){return f},Nk:function(){return l},OM:function(){return p},Oo:function(){return h},ix:function(){return u},rJ:function(){return c},yh:function(){return d}});var i=n(16691),r=n(56275),o=n(15999);function s(e,t,n,i=2,s="abbr"){return(0,o.zJ)(e,(0,r.kM)(t,n).value,n,i,s)}function a(e,t,n,i=2,s="abbr"){return(0,o.nD)(e,(0,r.kM)(t,n).value,n,i,s)}function l(e,t,n,r=i.ie,s=!0){return(0,o.Me)(e.value,e.unit,e.rotationType,t,n,r,s)}function c(e,t,n){return(0,o.cs)(e.value,e.unit,e.rotationType,t,n)}function u(e,t,n,i,r="abbr"){switch(i=i??2,n){case"imperial":return function(e,t,n=2,i="abbr"){return(0,o.tr)(e,t.value,t.unit,n,i)}(e,t,i,r);case"metric":return function(e,t,n=2,i="abbr"){return(0,o.Ee)(e,t.value,t.unit,n,i)}(e,t,i,r);default:return s(e,t,n,i,r)}}function d(e,t,n,i=2,r="abbr"){switch(n){case"imperial":return function(e,t,n=2,i="abbr"){return(0,o.J1)(e,t.value,t.unit,n,i)}(e,t,i,r);case"metric":return function(e,t,n=2,i="abbr"){return(0,o.Mm)(e,t.value,t.unit,n,i)}(e,t,i,r);default:return a(e,t,n,i,r)}}function h(e,t,n,i=2,r="abbr"){switch(n){case"imperial":return function(e,t,n=2,i="abbr"){return(0,o.t_)(e,t.value,t.unit,n,i)}(e,t,i,r);case"metric":return function(e,t,n=2,i="abbr"){return(0,o.W4)(e,t.value,t.unit,n,i)}(e,t,i,r);default:return s(e,t,n,i,r)}}function p(e,t,n,i=2,r="abbr"){switch(n){case"imperial":return function(e,t,n=2,i="abbr"){return(0,o.LF)(e,t.value,t.unit,n,i)}(e,t,i,r);case"metric":return function(e,t,n=2,i="abbr"){return(0,o.e_)(e,t.value,t.unit,n,i)}(e,t,i,r);default:return a(e,t,n,i,r)}}function f(e,t,n,i=2,r="abbr"){switch(n){case"imperial":return function(e,t,n=2,i="abbr"){return(0,o.Sz)(e,t.value,t.unit,n,i)}(e,t,i,r);case"metric":return function(e,t,n=2,i="abbr"){return(0,o.zq)(e,t.value,t.unit,n,i)}(e,t,i,r);default:return s(e,t,n,i,r)}}},15999:function(e,t,n){"use strict";n.d(t,{Cq:function(){return u},Ee:function(){return p},J1:function(){return v},LF:function(){return b},Me:function(){return S},Mm:function(){return f},Sz:function(){return w},W4:function(){return m},cs:function(){return T},e_:function(){return g},nD:function(){return h},t_:function(){return _},tr:function(){return y},v7:function(){return E},zJ:function(){return d},zq:function(){return x}});var i=n(69296),r=n(16691),o=n(15774),s=n(56275),a=n(50944),l=n(62938),c=n(2900);function u(e,t,n){return e.units[t][n]}function d(e,t,n,i=2,r="abbr"){return`${(0,c.ZV)(t,{minimumFractionDigits:i,maximumFractionDigits:i,signDisplay:t>0?"never":"exceptZero"})} ${u(e,n,r)}`}function h(e,t,n,i=2,r="abbr"){return`${(0,c.ZV)(t,{minimumFractionDigits:i,maximumFractionDigits:i,signDisplay:"exceptZero"})} ${u(e,n,r)}`}function p(e,t,n,i=2,r="abbr"){const o=(0,l.x0)(t,n);return d(e,(0,l.oU)(t,n,o),o,i,r)}function f(e,t,n,i=2,r="abbr"){const o=(0,l.x0)(t,n);return h(e,(0,l.oU)(t,n,o),o,i,r)}function m(e,t,n,i=2,r="abbr"){const o=(0,l.x$)(t,n);return d(e,(0,l.oU)(t,n,o),o,i,r)}function g(e,t,n,i=2,r="abbr"){const o=(0,l.x$)(t,n);return h(e,(0,l.oU)(t,n,o),o,i,r)}function y(e,t,n,i=2,r="abbr"){const o=(0,l.OU)(t,n);return d(e,(0,l.oU)(t,n,o),o,i,r)}function v(e,t,n,i=2,r="abbr"){const o=(0,l.OU)(t,n);return h(e,(0,l.oU)(t,n,o),o,i,r)}function _(e,t,n,i=2,r="abbr"){const o=(0,l.y7)(t,n);return d(e,(0,l.oU)(t,n,o),o,i,r)}function b(e,t,n,i=2,r="abbr"){const o=(0,l.y7)(t,n);return h(e,(0,l.oU)(t,n,o),o,i,r)}function x(e,t,n,i=2,r="abbr"){const o=(0,l.wv)(t,n);return d(e,(0,l.oU)(t,n,o),o,i,r)}function w(e,t,n,i=2,r="abbr"){const o=(0,l.TL)(t,n);return d(e,(0,l.oU)(t,n,o),o,i,r)}const M=(e,t)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:e>0?"never":"exceptZero"});function S(e,t,n,i,o,a=r.ie,u=!0){let d=a.normalize((0,s.g2)((0,l.oU)(e,t,"degrees"),n,i),0,u);const h=M(d,o??2);return d=k(d,h),(0,c.ZV)(d,h)}function T(e,t,n,i,r){n!==i&&(e=-e);const o={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:r=r??2,minimumFractionDigits:r,signDisplay:"exceptZero"};let s=(0,l.oU)(e,t,"degrees")%360;return s=k(s,o),(0,c.ZV)(s,o)}const C=new Map;function k(e,t){const n=JSON.stringify(t);let i=C.get(n);return i||(i=new Intl.NumberFormat("en-US",t),C.set(n,i)),/^[-+]?360\.?0*°?$/.test(i.format(e))?0:e}const $=["B","kB","MB","GB","TB"];function E(e,t){let n=0===(t=Math.round(t))?0:Math.floor(Math.log(t)/Math.log(i.u.KILOBYTES));n=(0,o.qE)(n,0,$.length-1);const r=(0,c.ZV)(t/i.u.KILOBYTES**n,{maximumFractionDigits:2});return(0,a.HC)(e.units.bytes[$[n]],{fileSize:r})}},66110:function(e,t,n){"use strict";n.d(t,{lk:function(){return r},vD:function(){return s},yS:function(){return o}});const i="randomUUID"in crypto;function r(){if(i)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function o(){return`{${r().toUpperCase()}}`}function s(){return`{${r()}}`}},6338:function(e,t,n){"use strict";n.d(t,{Hh:function(){return c},mT:function(){return d},o6:function(){return u},s1:function(){return l},ts:function(){return h}});var i=n(39819),r=n(38305),o=n(45532),s=n(57165),a=n(2900);function l(){return(0,r.i)()}function c(){return(0,r.l)()}function u(e,t){const n=[];e=(e=(e=e.replaceAll(/[\u00B0\u00BA]/g,"^")).replaceAll("′","'")).replaceAll("″",'"');const a=function(e){let t=null;if(e||(e=s.A.WGS84),e.wkid){if(t=r.P.geogcs(e.wkid),!t)throw new i.A("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!e.wkt2&&!e.wkt)throw new i.A("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(t=r.P.fromString(r.a.PE_TYPE_GEOGCS,e.wkt2||e.wkt),!t)throw new i.A("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return t}(t);return r.c.dmsToGeog(a,1,[e],n)?new o.default(n[0][0],n[0][1],t||s.A.WGS84):null}function d(e){return e&&l()?(0,a.$J)(e)??u(`0° 0' 0" N | ${e}`)?.longitude??null:null}function h(e){return e&&l()?(0,a.$J)(e)??u(`${e} | 00° 00' 00" E`)?.latitude??null:null}},96611:function(e,t,n){"use strict";n.d(t,{Y0:function(){return c},lO:function(){return u}});var i=n(61714),r=n(57165),o=n(57652);const s=new r.A(i.fv),a=new r.A(i.FY),l=new r.A(i.LJ),c=new r.A(i.Ro);function u(e){const t=d.get(e);if(t)return t;let n=s;if(e)if(e===a)n=a;else if(e===l)n=l;else{const t=e.wkid,i=e.latestWkid;if(null!=t||null!=i)(0,o.tl)(t)||(0,o.tl)(i)?n=a:((0,o.ZL)(t)||(0,o.ZL)(i))&&(n=l);else{const t=e.wkt2??e.wkt;if(t){const e=t.toUpperCase();e===h?n=a:e===p&&(n=l)}}}return d.set(e,n),n}const d=new Map,h=a.wkt.toUpperCase(),p=l.wkt.toUpperCase()},65907:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var i=n(53804),r=n(75743),o=n(30905),s=n(23502),a=(n(58941),n(40633),n(13798),n(74376)),l=n(65953);let c=class extends((0,r.O)(o.oY)){constructor(e){super(e),this.type="georeferenced",this.origin=null}};(0,i._)([(0,a.e)({georeferenced:"georeferenced"},{readOnly:!0})],c.prototype,"type",void 0),(0,i._)([(0,s.MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],c.prototype,"origin",void 0),c=(0,i._)([(0,l.$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],c);const u=c},20460:function(e,t,n){"use strict";n.d(t,{A:function(){return d}});var i=n(53804),r=n(75743),o=n(30905),s=n(23502),a=(n(58941),n(40633),n(13798),n(74376)),l=n(65953),c=n(32501);let u=class extends((0,r.O)(o.oY)){constructor(e){super(e),this.type="local",this.origin=(0,c.vt)()}};(0,i._)([(0,a.e)({local:"local"},{readOnly:!0})],u.prototype,"type",void 0),(0,i._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],u.prototype,"origin",void 0),u=(0,i._)([(0,l.$)("esri.geometry.support.MeshLocalVertexSpace")],u);const d=u},36405:function(e,t,n){"use strict";n.d(t,{A:function(){return g}});var i,r=n(53804),o=n(30905),s=n(23502),a=(n(58941),n(40633),n(13798),n(65953)),l=n(73364),c=n(39714),u=n(32237),d=n(61769),h=n(32501),p=n(26133);let f=i=class extends o.oY{constructor(e){super(e),this.translation=(0,h.vt)(),this.rotationAxis=(0,h.ci)(p.up),this.rotationAngle=0,this.scale=(0,h.fA)(1,1,1)}get rotation(){return(0,p.i4)(this.rotationAxis,this.rotationAngle)}set rotation(e){this.rotationAxis=(0,h.o8)((0,p.yo)(e)),this.rotationAngle=(0,p.g7)(e)}get localMatrix(){const e=(0,c.vt)();return(0,u.x8)(m,(0,p.yo)(this.rotation),(0,p.$I)(this.rotation)),(0,l.o1)(e,m,this.translation,this.scale),e}get localMatrixInverse(){return(0,l.B8)((0,c.vt)(),this.localMatrix)}equals(e){return this===e||null!=e&&(0,l.t2)(this.localMatrix,e.localMatrix)}clone(){const e={translation:(0,h.o8)(this.translation),rotationAxis:(0,h.o8)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,h.o8)(this.scale)};return new i(e)}};(0,r._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"translation",void 0),(0,r._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"rotationAxis",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],f.prototype,"rotationAngle",void 0),(0,r._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"scale",void 0),(0,r._)([(0,s.MZ)()],f.prototype,"rotation",null),(0,r._)([(0,s.MZ)()],f.prototype,"localMatrix",null),(0,r._)([(0,s.MZ)()],f.prototype,"localMatrixInverse",null),f=i=(0,r._)([(0,a.$)("esri.geometry.support.MeshTransform")],f);const m=(0,d.vt)(),g=f},26133:function(e,t,n){"use strict";n.d(t,{$I:function(){return v},AU:function(){return m},Cr:function(){return h},g7:function(){return y},i4:function(){return d},ui:function(){return p},up:function(){return b},vt:function(){return u},yo:function(){return g}});var i=n(15774),r=n(73364),o=n(32237),s=n(61769),a=n(20551),l=n(32501),c=n(41546);function u(e=b){return[e[0],e[1],e[2],e[3]]}function d(e,t,n=u()){return(0,a.c)(n,e),n[3]=t,n}function h(e,t,n=(0,c.vt)()){return(0,a.b)(n,e,t),(0,a.n)(n,n),n[3]=-(0,a.d)(e,t),n}function p(e,t=u()){const n=(0,r.l)(x,e);return _(t,(0,i.KJ)((0,o.Xd)(t,n))),t}function f(e,t,n=u()){return(0,o.x8)(x,e,v(e)),(0,o.x8)(w,t,v(t)),(0,o.lw)(x,w,x),_(n,(0,i.KJ)((0,o.Xd)(n,x)))}function m(e,t,n,i=u()){return d(l.Cw,e,M),d(l.JP,t,S),d(l.Cb,n,T),f(M,S,M),f(M,T,i),i}function g(e){return e}function y(e){return e[3]}function v(e){return(0,i.kU)(e[3])}function _(e,t){return e[3]=t,e}const b=[0,0,1,0],x=(0,s.vt)(),w=(0,s.vt)(),M=(u(),u()),S=u(),T=u()},73313:function(e,t,n){"use strict";n.d(t,{C:function(){return c},Cr:function(){return d},H6:function(){return m},_I:function(){return p},dz:function(){return g},fA:function(){return u},kb:function(){return h},ld:function(){return y},sd:function(){return f},vt:function(){return l}});var i=n(15774),r=n(89736),o=n(20551),s=n(32501),a=n(50973);function l(e){return e?{origin:(0,s.o8)(e.origin),vector:(0,s.o8)(e.vector)}:{origin:(0,s.vt)(),vector:(0,s.vt)()}}function c(e,t=l()){return u(e.origin,e.vector,t)}function u(e,t,n=l()){return(0,o.c)(n.origin,e),(0,o.c)(n.vector,t),n}function d(e,t,n=l()){return(0,o.c)(n.origin,e),(0,o.f)(n.vector,t,e),n}function h(e,t){const n=(0,o.f)(a.rq.get(),t,e.origin),r=(0,o.m)(e.vector,n),s=(0,o.m)(e.vector,e.vector),l=(0,i.qE)(r/s,0,1),c=(0,o.f)(a.rq.get(),(0,o.j)(a.rq.get(),e.vector,l),n);return(0,o.m)(c,c)}function p(e,t,n){return m(e,t,0,1,n)}function f(e,t,n){return(0,o.g)(n,e.origin,(0,o.j)(n,e.vector,t))}function m(e,t,n,r,s){const{vector:l,origin:c}=e,u=(0,o.f)(a.rq.get(),t,c),d=(0,o.m)(l,u)/(0,o.q)(l);return(0,o.j)(s,l,(0,i.qE)(d,n,r)),(0,o.g)(s,s,e.origin)}function g(e,t){if(v(e,function(e,t){const n=b.get();return n.origin=e,n.vector=t,n}(t.origin,t.direction),!1,_)){const{tA:t,pB:n,distance2:i}=_;if(t>=0&&t<=1)return i;if(t<0)return(0,o.a)(e.origin,n);if(t>1)return(0,o.a)((0,o.g)(a.rq.get(),e.origin,e.vector),n)}return null}function y(e,t,n){return!!v(e,t,!0,_)&&((0,o.c)(n,_.pA),!0)}function v(e,t,n,r){const s=1e-6,l=e.origin,c=(0,o.g)(a.rq.get(),l,e.vector),u=t.origin,d=(0,o.g)(a.rq.get(),u,t.vector),h=a.rq.get(),p=a.rq.get();if(h[0]=l[0]-u[0],h[1]=l[1]-u[1],h[2]=l[2]-u[2],p[0]=d[0]-u[0],p[1]=d[1]-u[1],p[2]=d[2]-u[2],Math.abs(p[0])<s&&Math.abs(p[1])<s&&Math.abs(p[2])<s)return!1;const f=a.rq.get();if(f[0]=c[0]-l[0],f[1]=c[1]-l[1],f[2]=c[2]-l[2],Math.abs(f[0])<s&&Math.abs(f[1])<s&&Math.abs(f[2])<s)return!1;const m=h[0]*p[0]+h[1]*p[1]+h[2]*p[2],g=p[0]*f[0]+p[1]*f[1]+p[2]*f[2],y=h[0]*f[0]+h[1]*f[1]+h[2]*f[2],v=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],_=(f[0]*f[0]+f[1]*f[1]+f[2]*f[2])*v-g*g;if(Math.abs(_)<s)return!1;let b=(m*g-y*v)/_,x=(m+g*b)/v;n&&(b=(0,i.qE)(b,0,1),x=(0,i.qE)(x,0,1));const w=a.rq.get(),M=a.rq.get();return w[0]=l[0]+b*f[0],w[1]=l[1]+b*f[1],w[2]=l[2]+b*f[2],M[0]=u[0]+x*p[0],M[1]=u[1]+x*p[1],M[2]=u[2]+x*p[2],r.tA=b,r.tB=x,r.pA=w,r.pB=M,r.distance2=(0,o.a)(w,M),!0}const _={tA:0,tB:0,pA:(0,s.vt)(),pB:(0,s.vt)(),distance2:0},b=new r.I((()=>l()))},67376:function(e,t,n){"use strict";n.d(t,{CK:function(){return h},E9:function(){return u},Hq:function(){return d},MW:function(){return p},TE:function(){return f},yJ:function(){return m}});var i=n(88022),r=n(40633),o=n(20551),s=n(45532),a=n(65907),l=n(20460);function c(){return r.A.getLogger("esri.geometry.Mesh")}function u(e){return!d(e)}function d(e){return null!=e.origin}function h(e){return d(e.vertexSpace)}function p(e,t){if(!d(e))return null;const[n,i,r]=e.origin;return new s.default({x:n,y:i,z:r,spatialReference:t})}function f(e,t){const{x:n,y:r,z:o,spatialReference:s}=e,u=[n,r,o??0];return void 0!==t?.geographic&&((0,i.io)(c(),"option: geographic",{replacement:"Use the `vertexSpace` option instead.",version:"4.29",warnOnce:!0}),t.vertexSpace&&c().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")),"local"===(t?.vertexSpace??(d=t?.geographic,null==d?void 0:d?"local":"georeferenced")??function(e){return e.isGeographic||e.isWebMercator?"local":"georeferenced"}(s))?new l.A({origin:u}):new a.A({origin:u});var d}function m(e,t){return e.type===t.type&&(e.origin===t.origin||null!=e.origin&&null!=t.origin&&(0,o.e)(e.origin,t.origin))}},67496:function(e,t,n){"use strict";n.d(t,{Fm:function(){return a},Q7:function(){return l}});var i=n(89736),r=n(20551),o=n(32501),s=n(73313);function a(e,t,n){const i=t[0]-e[0],r=t[1]-e[1],o=n[0]-e[0],s=n[1]-e[1];return.5*Math.abs(i*s-r*o)}function l(e,t,n){return(0,r.f)(c,t,e),(0,r.f)(u,n,e),.5*(0,r.l)((0,r.b)(c,c,u))}n(50973),new i.I(s.vt),new i.I((()=>{return e?{p0:(0,o.o8)(e.p0),p1:(0,o.o8)(e.p1),p2:(0,o.o8)(e.p2)}:{p0:(0,o.vt)(),p1:(0,o.vt)(),p2:(0,o.vt)()};var e}));const c=(0,o.vt)(),u=(0,o.vt)()},42413:function(e,t,n){"use strict";n.d(t,{CI:function(){return o},fk:function(){return s}}),n(58941);var i=n(15774),r=n(57652);function o(e,t){return e===t||null!=e&&null!=t&&(0,r.aI)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function s(e,t,n){return e===t||null!=e&&null!=t&&(0,r.aI)(e.spatialReference,t.spatialReference)&&(0,i.Sp)(e.x,t.x,n)&&(0,i.Sp)(e.y,t.y,n)&&(0,i.Sp)(e.z??0,t.z??0,n)&&(0,i.Sp)(e.m??0,t.m??0,n)}},45328:function(e,t,n){"use strict";n.d(t,{EL:function(){return g},RS:function(){return y},gr:function(){return c},wP:function(){return d},wZ:function(){return h}}),n(50917);var i=n(59469),r=(n(58941),n(21609)),o=n(24540),s=n(74697),a=n(46460),l=n(57165);function c(e){return"declaredClass"in e}function u(e){return"declaredClass"in e}function d(e,t){return e?"declaredClass"in e?e:new i.default({layer:t,sourceLayer:t,visible:e.visible,symbol:(0,r.o8)(e.symbol),attributes:(0,r.o8)(e.attributes),geometry:h(e.geometry)}):null}function h(e){return null==e?null:c(e)?e:(0,s.rS)(function(e){const{wkid:t,wkt:n,wkt2:i,latestWkid:r}=e.spatialReference,o={wkid:t,wkt:n,wkt2:i,latestWkid:r};switch(e.type){case"point":{const{x:t,y:n,z:i,m:r}=e;return{x:t,y:n,z:i,m:r,spatialReference:o}}case"polygon":{const{rings:t,hasZ:n,hasM:i}=e;return{rings:p(t),hasZ:n,hasM:i,spatialReference:o}}case"polyline":{const{paths:t,hasZ:n,hasM:i}=e;return{paths:p(t),hasZ:n,hasM:i,spatialReference:o}}case"extent":{const{xmin:t,xmax:n,ymin:i,ymax:r,zmin:s,zmax:a,mmin:l,mmax:c,hasZ:u,hasM:d}=e;return{xmin:t,xmax:n,ymin:i,ymax:r,zmin:s,zmax:a,mmin:l,mmax:c,hasZ:u,hasM:d,spatialReference:o}}case"multipoint":{const{points:t,hasZ:n,hasM:i}=e;return{points:m(t)?f(t):t,hasZ:n,hasM:i,spatialReference:o}}default:return}}(e))}function p(e){return function(e){for(const t of e)if(0!==t.length)return m(t);return!1}(e)?e.map((e=>f(e))):e}function f(e){return e.map((e=>Array.from(e)))}function m(e){return e.length>0&&((0,o.vZ)(e[0])||(0,o.aI)(e[0]))}function g(e,t){if(!e)return null;let n;if(u(e)){if(null==t)return e.clone();if(u(t))return t.copy(e)}return null!=t?(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=(0,a.T)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function y(e){const{wkid:t,wkt:n,wkt2:i,latestWkid:r}=e,o={wkid:t,wkt:n,wkt2:i,latestWkid:r};return l.A.fromJSON(o)}},47558:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var i=n(60539),r=n(85445),o=n(55213);class s{constructor(){this._tasks=new Array,this._runningTasks=(0,r.v)(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(e){if(0===this.length)return o.G;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,n){return++this._runningTasks.value,new Promise(((i,r)=>this._tasks.push(new a(i,r,e,t,n)))).finally((()=>--this._runningTasks.value))}unshift(e,t,n){return++this._runningTasks.value,new Promise(((i,r)=>this._tasks.unshift(new a(i,r,e,t,n)))).finally((()=>--this._runningTasks.value))}_process(e){if(0===this._tasks.length)return!1;const t=this._tasks.shift();try{const n=(0,i.G4)(t.signal);if(n&&!t.abortCallback)t.reject((0,i.NK)());else{const r=n?t.abortCallback?.((0,i.NK)()):t.callback(e);(0,i.$X)(r)?r.then(t.resolve,t.reject):t.resolve(r)}}catch(e){t.reject(e)}return!0}cancelAll(){const e=(0,i.NK)();for(const t of this._tasks)if(t.abortCallback){const n=t.abortCallback(e);t.resolve(n)}else t.reject(e);this._tasks.length=0}}class a{constructor(e,t,n,i=void 0,r=void 0){this.resolve=e,this.reject=t,this.callback=n,this.signal=i,this.abortCallback=r}}},92781:function(e,t,n){"use strict";n.d(t,{R:function(){return o},t:function(){return s}});var i=n(77528);const r={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,n)=>{"-"===t.charAt(0)?e.style.setProperty(t,n):e.style[t]=n}};let o=e=>(0,i.X$)(r,e),s={create:(e,t)=>(t=o(t),(0,i.dj)(e,document.createElement("div"),void 0,t),(0,i.Av)(e,t)),append:(e,t,n)=>(n=o(n),(0,i.dj)(t,e,void 0,n),(0,i.Av)(t,n)),insertBefore:(e,t,n)=>(n=o(n),(0,i.dj)(t,e.parentNode,e,n),(0,i.Av)(t,n)),merge:(e,t,n)=>(n=o(n),t.domNode=e,(0,i.OM)(e,t,n),(0,i.Av)(t,n)),replace:(e,t,n)=>(n=o(n),(0,i.dj)(t,e.parentNode,e,n),e.parentNode.removeChild(e),(0,i.Av)(t,n))}},77528:function(e,t,n){"use strict";n.d(t,{Av:function(){return $},OM:function(){return M},X$:function(){return l},dj:function(){return S}});var i=n(20457);const r="http://www.w3.org/",o=`${r}2000/svg`,s=`${r}1999/xlink`;let a=[],l=(e,t)=>{let n={};return Object.keys(e).forEach((t=>{n[t]=e[t]})),t&&Object.keys(t).forEach((e=>{n[e]=t[e]})),n},c=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),u=e=>{if("string"!=typeof e)throw new Error("Style values must be strings")},d=(e,t,n)=>{if(""!==t.vnodeSelector)for(let i=n;i<e.length;i++)if(c(e[i],t))return i;return-1},h=(e,t,n,i)=>{let r=e[t];if(""===r.vnodeSelector)return;let o=r.properties;if(!(o?void 0===o.key?o.bind:o.key:void 0))for(let o=0;o<e.length;o++)if(o!==t){let t=e[o];if(c(t,r))throw new Error(`${n.vnodeSelector} had a ${r.vnodeSelector} child ${"added"===i?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}},p=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},f=[],m=!1,g=e=>{(e.children||[]).forEach(g),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},y=()=>{m=!1,f.forEach(g),f.length=0},v=e=>{f.push(e),m||(m=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(y,{timeout:16}):setTimeout(y,16))},_=e=>{let t=e.domNode;if(e.properties){let n=e.properties.exitAnimation;if(n){t.style.pointerEvents="none";let i=()=>{t.parentNode&&(t.parentNode.removeChild(t),v(e))};return void n(t,i,e.properties)}}t.parentNode&&(t.parentNode.removeChild(t),v(e))},b=(e,t,n)=>{if(!t)return;let r=n.eventHandlerInterceptor,a=Object.keys(t),l=a.length;for(let c=0;c<l;c++){let l=a[c],d=t[l];if("className"===l)throw new Error('Property "className" is not supported, use "class".');if("class"===l)T(e,d,!0);else if("classes"===l){let t=Object.keys(d),n=t.length;for(let i=0;i<n;i++){let n=t[i];d[n]&&e.classList.add(n)}}else if("styles"===l){let t=Object.keys(d),i=t.length;for(let r=0;r<i;r++){let i=t[r],o=d[i];o&&(u(o),n.styleApplyer(e,i,o))}}else if("key"!==l&&null!=d){let a=typeof d;"function"===a?(0===l.lastIndexOf("on",0)&&(r&&(d=r(l,d,e,t)),"oninput"===l&&function(){let e=d;d=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value}}()),e[l]=d):n.namespace===o?"href"===l?e.setAttributeNS(s,l,d):e.setAttribute(l,d):"string"===a&&"value"!==l?"innerHTML"===l?e[l]=i.W5.sanitize(d):x(e)&&l in e?e[l]=d:e.setAttribute(l,d):e[l]=d}}};function x(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let w,M=(e,t,n)=>{((e,t,n)=>{if(t)for(let i of t)S(i,e,void 0,n)})(e,t.children,n),t.text&&(e.textContent=t.text),b(e,t.properties,n),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,n,t.vnodeSelector,t.properties,t.children])},S=(e,t,n,i)=>{let r,s=0,a=e.vnodeSelector,c=t.ownerDocument;if(""===a)r=e.domNode=c.createTextNode(e.text),void 0!==n?t.insertBefore(r,n):t.appendChild(r);else{for(let u=0;u<=a.length;++u){let d=a.charAt(u);if(u===a.length||"."===d||"#"===d){let d=a.charAt(s-1),h=a.slice(s,u);"."===d?r.classList.add(h):"#"===d?r.id=h:("svg"===h&&(i=l(i,{namespace:o})),void 0!==i.namespace?r=e.domNode=c.createElementNS(i.namespace,h):(r=e.domNode=e.domNode||c.createElement(h),"input"===h&&e.properties&&void 0!==e.properties.type&&r.setAttribute("type",e.properties.type)),void 0!==n?t.insertBefore(r,n):r.parentNode!==t&&t.appendChild(r)),s=u+1}}M(r,e,i)}},T=(e,t,n)=>{t&&t.split(" ").forEach((t=>{t&&e.classList.toggle(t,n)}))},C=(e,t,n,r)=>{if(!n)return;let a=!1,l=Object.keys(n),c=l.length;for(let d=0;d<c;d++){let c=l[d],h=n[c],p=t[c];if("class"===c)p!==h&&(T(e,p,!1),T(e,h,!0));else if("classes"===c){let t=e.classList,n=Object.keys(h),i=n.length;for(let e=0;e<i;e++){let i=n[e],r=!!h[i];r!==!!p[i]&&(a=!0,r?t.add(i):t.remove(i))}}else if("styles"===c){let t=Object.keys(h),n=t.length;for(let i=0;i<n;i++){let n=t[i],o=h[n];o!==p[n]&&(a=!0,o?(u(o),r.styleApplyer(e,n,o)):r.styleApplyer(e,n,""))}}else if(h||"string"!=typeof p||(h=""),"value"!==c||x(e)){if(h!==p){let t=typeof h;"function"===t&&r.eventHandlerInterceptor||(r.namespace===o?"href"===c?e.setAttributeNS(s,c,h):e.setAttribute(c,h):"string"===t?"innerHTML"===c?e[c]=i.W5.sanitize(h):"role"===c&&""===h?e.removeAttribute(c):x(e)&&c in e?e[c]=h:e.setAttribute(c,h):e[c]!==h&&(e[c]=h),a=!0)}}else{let t=e[c];t!==h&&(e["oninput-value"]?t===e["oninput-value"]:h!==p)&&(e[c]=h,e["oninput-value"]=void 0),h!==p&&(a=!0)}}return a},k=(e,t,n,i,r)=>{if(n===i)return!1;i=i||a;let o,s=(n=n||a).length,l=i.length,u=0,f=0,m=!1;for(;f<l;){let a=u<s?n[u]:void 0,l=i[f];if(void 0!==a&&c(a,l))m=w(a,l,r)||m,u++;else{let a=d(n,l,u+1);if(a>=0){for(o=u;o<a;o++)_(n[o]),h(n,o,e,"removed");m=w(n[a],l,r)||m,u=a+1}else S(l,t,u<s?n[u].domNode:void 0,r),p(l),h(i,f,e,"added")}f++}if(s>u)for(o=u;o<s;o++)_(n[o]),h(n,o,e,"removed");return m};w=(e,t,n)=>{let i=e.domNode,r=!1;if(e===t)return!1;let s=!1;if(""===t.vnodeSelector){if(t.text!==e.text){let e=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(e,i),t.domNode=e,r=!0,r}t.domNode=i}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(n=l(n,{namespace:o})),e.text!==t.text&&(s=!0,void 0===t.text?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=k(t,i,e.children,t.children,n)||s,s=C(i,e.properties,t.properties,n)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,n,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),r};let $=(e,t)=>({getLastRender:()=>e,update:n=>{if(e.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=n,w(i,n,t)},domNode:e.domNode})},81401:function(e,t,n){"use strict";n.d(t,{F:function(){return a}});var i=n(92781);let r;r=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let o=(e,t)=>{let n=e;return t.forEach((e=>{n=n&&n.children?r(n.children,(t=>t.domNode===e)):void 0})),n},s=(e,t,n)=>{let i=function(i){n("domEvent",i);let r=t(),s=((e,t)=>{let n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n})(i.currentTarget,r.domNode);s.reverse();let a,l=o(r.getLastRender(),s);return e.scheduleRender(),l&&(a=l.properties[`on${i.type}`].apply(l.properties.bind||this,arguments)),n("domEventProcessed",i),a};return(e,t,n,r)=>i},a=e=>{let t,n,r=(0,i.R)(e),o=r.performanceLogger,a=!0,l=!1,c=[],u=[],d=(e,n,i)=>{let a;r.eventHandlerInterceptor=s(t,(()=>a),o),a=e(n,i(),r),c.push(a),u.push(i)},h=()=>{if(n=void 0,a){a=!1,o("renderStart",void 0);for(let e=0;e<c.length;e++){let t=u[e]();o("rendered",void 0),c[e].update(t),o("patched",void 0)}o("renderDone",void 0),a=!0}};return t={renderNow:h,scheduleRender:()=>{n||l||(n=requestAnimationFrame(h))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),l=!0},resume:()=>{l=!1,a=!0,t.scheduleRender()},append:(e,t)=>{d(i.t.append,e,t)},insertBefore:(e,t)=>{d(i.t.insertBefore,e,t)},merge:(e,t)=>{d(i.t.merge,e,t)},replace:(e,t)=>{d(i.t.replace,e,t)},detach:e=>{for(let t=0;t<u.length;t++)if(u[t]===e)return u.splice(t,1),c.splice(t,1)[0];throw new Error("renderFunction was not found")}},t}},82418:function(e,t,n){"use strict";function i(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function r(e,t){return"number"==typeof e?e:e?.stops?.length?function(e){let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i].size;"number"==typeof r&&(t+=r,n++)}return t/n}(e.stops):t}function o(e,t){if(!t)return e;const n=t.filter((e=>"size"===e.type)).map((t=>{const{maxSize:n,minSize:i}=t;return(r(n,e)+r(i,e))/2}));let i=0;const o=n.length;if(0===o)return e;for(let e=0;e<o;e++)i+=n[e];const s=Math.floor(i/o);return Math.max(s,e)}function s(e){const t=e?.renderer,n=e?.pointerType,r="touch"===n?9:6;if(!t)return r;const s="visualVariables"in t?o(r,t.visualVariables):r;if("simple"===t.type)return i(s,t.symbol);if("unique-value"===t.type){let e=s;return t.uniqueValueInfos?.forEach((t=>{e=i(e,t.symbol)})),e}if("class-breaks"===t.type){let e=s;return t.classBreakInfos.forEach((t=>{e=i(e,t.symbol)})),e}return"dot-density"===t.type||t.type,s}n.d(t,{o:function(){return s}})},76722:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var i=n(62938),r=n(51432);function o(e){const t="metric";if(null==e)return t;const n=e.map,o=(n&&"portalItem"in n?n.portalItem?.portal:null)??r.A.getDefault();switch(o.user?.units??o.units){case t:return t;case"english":return"imperial"}return(0,i.jM)(e.spatialReference)??t}},93839:function(e,t,n){"use strict";n.d(t,{fJ:function(){return o},g4:function(){return r},hY:function(){return s}});const i="calcite-mode-";function r(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"").startsWith("dark")}function o(){return`${i}${r()?"dark":"light"}`}function s(e){a(e),e.classList.add(o())}function a(e){Array.from(e.classList).forEach((t=>{t.startsWith(i)&&e.classList.remove(t)}))}},38821:function(e,t,n){"use strict";n.d(t,{D:function(){return r},K:function(){return i}});const i={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},r={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0}}},33389:function(e,t,n){"use strict";var i,r,o,s,a,l,c,u,d,h,p,f,m,g,y,v,_,b,x,w,M,S,T,C,k,$,E,A,P,R,I,O,L,V,N,Z,D,G,z,F,U,H,j,B,W,K,q,Y,X,Q,J,ee,te,ne,ie,re,oe,se,ae,le,ce;n.d(t,{$2:function(){return a},C1:function(){return o},JO:function(){return r},M1:function(){return S},O$:function(){return oe},Q1:function(){return K},TZ:function(){return v},WE:function(){return A},Y:function(){return c},YI:function(){return Y},bj:function(){return u},e_:function(){return W},f0:function(){return re},fu:function(){return p},g7:function(){return d},ip:function(){return q},mU:function(){return P},oF:function(){return w},uQ:function(){return M},uT:function(){return Z},vG:function(){return ae},wd:function(){return F},xR:function(){return i},xn:function(){return _},xw:function(){return k},yS:function(){return D}}),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(r||(r={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(o||(o={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(s||(s={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(a||(a={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(l||(l={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(c||(c={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(u||(u={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(d||(d={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(h||(h={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(p||(p={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(f||(f={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(m||(m={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(g||(g={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(y||(y={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(v||(v={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(_||(_={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(b||(b={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(x||(x={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(w||(w={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks"}(M||(M={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(S||(S={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(T||(T={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(C||(C={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(k||(k={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}($||($={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(E||(E={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(A||(A={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(P||(P={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(R||(R={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(I||(I={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(O||(O={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(L||(L={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(V||(V={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(N||(N={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(Z||(Z={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(D||(D={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(G||(G={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(z||(z={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(F||(F={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(U||(U={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(H||(H={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(j||(j={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(B||(B={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(W||(W={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(K||(K={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(q||(q={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(Y||(Y={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(X||(X={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(Q||(Q={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(J||(J={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(ee||(ee={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(te||(te={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(ne||(ne={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(ie||(ie={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(re||(re={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(oe||(oe={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(se||(se={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(ae||(ae={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(le||(le={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(ce||(ce={}))},7590:function(e,t,n){"use strict";n.d(t,{$w:function(){return y},Bu:function(){return E},DW:function(){return T},FM:function(){return c},G9:function(){return o},GV:function(){return v},Go:function(){return u},K3:function(){return Z},Kn:function(){return M},MM:function(){return p},MO:function(){return z},Nl:function(){return A},Ny:function(){return _},O2:function(){return P},UE:function(){return R},YC:function(){return G},YF:function(){return O},ZO:function(){return V},_1:function(){return k},_H:function(){return x},_d:function(){return S},bs:function(){return D},e6:function(){return d},gQ:function(){return l},iA:function(){return N},jn:function(){return m},lW:function(){return h},mA:function(){return f},n5:function(){return I},pM:function(){return C},pV:function(){return w},pk:function(){return F},rB:function(){return U},s4:function(){return r},xo:function(){return $},yH:function(){return b},zb:function(){return L},zr:function(){return g}});var i=n(38821);function r(e,t,n,i){return function(e){return"function"==typeof e}(e)?e(t,n,i):e}function o(e){return[e.r,e.g,e.b,e.a]}const s=" /-,\n";function a(e){let t=e.length;for(;t--;)if(!s.includes(e.charAt(t)))return!1;return!0}function l(e,t){const n=[];let i=0,r=-1;do{if(r=e.indexOf("[",i),r>=i){if(r>i){const t=e.substr(i,r-i);n.push([t,null,a(t)])}if(i=r+1,r=e.indexOf("]",i),r>=i){if(r>i){const o=t[e.substr(i,r-i)];o&&n.push([null,o,!1])}i=r+1}}}while(-1!==r);if(i<e.length-1){const t=e.substr(i);n.push([t,null,a(t)])}return n}function c(e,t,n,i){let r="",o=null;for(const i of t){const[t,s,a]=i;if(t)a?o=t:(o&&(r+=o,o=null),r+=t);else{let t=s;null!=n&&(t=z(s,n));const i=e.attributes[t];i&&(o&&(r+=o,o=null),r+=i)}}return function(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(r,i)}function u(e,t,n,i,r,o,s=!0){const a=t/r,l=n/o,c=Math.ceil(a/2),u=Math.ceil(l/2);for(let n=0;n<o;n++)for(let d=0;d<r;d++){const h=4*(d+(s?o-n-1:n)*r);let p=0,f=0,m=0,g=0,y=0,v=0,_=0;const b=(n+.5)*l;for(let i=Math.floor(n*l);i<(n+1)*l;i++){const n=Math.abs(b-(i+.5))/u,r=(d+.5)*a,o=n*n;for(let n=Math.floor(d*a);n<(d+1)*a;n++){let s=Math.abs(r-(n+.5))/c;const a=Math.sqrt(o+s*s);a>=-1&&a<=1&&(p=2*a*a*a-3*a*a+1,p>0&&(s=4*(n+i*t),_+=p*e[s+3],m+=p,e[s+3]<255&&(p=p*e[s+3]/250),g+=p*e[s],y+=p*e[s+1],v+=p*e[s+2],f+=p))}}i[h]=g/f,i[h+1]=y/f,i[h+2]=v/f,i[h+3]=_/m}}function d(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function h(e){return e.data?.symbol??null}function p(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function f(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function m(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function g(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const y=(e,t=0)=>null==e||isNaN(e)?t:e,v=(e,t)=>e??t,_=e=>e.tintColor?d(e.tintColor):[255,255,255,1],b=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function x(){return n.e(4696).then(n.bind(n,28356))}function w(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function M(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function S(e){let t="normal",n="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?n="bold":i.includes("light")&&(n="lighter")}return{style:t,weight:n}}function T(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function C(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=C(t);if(null!=e)return e}break;case"CIMTextSymbol":return C(e.symbol);case"CIMSolidFill":return e.color}return null}function k(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=k(e);if(null!=t)return t}break}case"CIMTextSymbol":return k(e.symbol);case"CIMSolidStroke":return e.color}}function $(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=$(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return $(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function E(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function A(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function P(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const R=e=>e.includes("data:image/svg+xml");function I(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function O(e){return e?e.charAt(0).toLowerCase()+e.substring(1):e}function L(e,t,n,i,r,o){const{infos:s}=o;let a=1,l=0,c=0,u=0;for(const{offsetX:e,offsetY:t,rotation:n,size:i,frameHeight:r,rotateClockWise:o}of s)c=j(e,t,l,a,c),u=H(e,t,l,a,u),r&&(a*=i/r),l=B(n,o,l);const d=j(i,r,l,a,c),h=H(i,r,l,a,u);return{size:e*a,rotation:B(t,n,l),offsetX:d,offsetY:h}}function V(e){if(null==e)return!1;if(Array.isArray(e))return e.every((e=>V(e)));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function N(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderlinecolor"===t||"tintcolor"===t)return[...i.K[t]];const n=i.D[e];if(!n)throw new Error(`InternalError: default value for type ${e}.`);return n[t]}function Z(e){return e?.dashTemplate&&"string"==typeof e.dashTemplate&&(e.dashTemplate=e.dashTemplate.split(" ").map(Number)),e}function D(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return D(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return D(e.symbol)}}return"Normal"}function G(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers)for(const n of e.symbolLayers)if(n)switch(n.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const e=n.size??i.D.CIMVectorMarker.size;e>t&&(t=e);break}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers)for(const n of e.symbolLayers)if(n)switch(n.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=n.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(n.markerPlacement&&g(n.markerPlacement)){const e=n.size??i.D.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{const e=n.height;null!=e&&e>t&&(t=e)}}return t}}}function z(e,t){if(null!==t){const n=t.get(e);return n?n.name:e}return e}function F(e){return e.map((e=>({...e,propertyName:O(e.propertyName)})))}function U(e){const t={};for(const n in e){const i=e[n];t[O(n)]=i}return t}function H(e,t,n,i,r){const o=n*Math.PI/180;if(o){const n=Math.cos(o);return(Math.sin(o)*e+n*t)*i+r}return t*i+r}function j(e,t,n,i,r){const o=n*Math.PI/180;return o?(Math.cos(o)*e-Math.sin(o)*t)*i+r:e*i+r}function B(e,t,n){return t?n-e:n+e}},77927:function(e,t,n){"use strict";n.d(t,{Fe:function(){return d},Km:function(){return o},Nk:function(){return l}});var i=n(52874),r=n(7590);function o(e,t,n,i){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)a(n,t);if(e.symbolLayers)for(const n of e.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":s(n,t,i);break;case"CIMPictureStroke":case"CIMSolidStroke":!i?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":o(n.lineSymbol,t,!0,{...i,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}}else null!=e.height&&(e.height*=t)}function s(e,t,n){if(e&&(e.markerPlacement&&function(e,t){switch((0,r.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const i of e.markerGraphics)e.scaleSymbolsProportionally||o(i.symbol,t,!0,n)}function a(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function l(e){const t=[];return c((0,r.lW)(e),t),t.length?new i.A((0,r.e6)(t[0])):null}function c(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const i="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const e of n.symbolLayers)if(!(e.colorLocked||i&&((0,r.mA)(e)||(0,r.MM)(e)&&e.markerPlacement&&(0,r.zr)(e.markerPlacement))))switch(e.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":e.tintColor&&u(t,e.tintColor);break;case"CIMVectorMarker":e.markerGraphics?.forEach((e=>{c(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":u(t,e.color);break;case"CIMHatchFill":c(e.lineSymbol,t)}}function u(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}function d(e,t,n){t instanceof i.A||(t=new i.A(t));const o=(0,r.lW)(e);o&&h(o,t,n)}function h(e,t,n){if(!e)return;let i;i="CIMTextSymbol"===e.type?e.symbol:e;const o="CIMPolygonSymbol"===i?.type;if(i?.symbolLayers)for(const e of i.symbolLayers){if(e.colorLocked)continue;if(o)if(n){const{layersToColor:t}=n;if(((0,r.mA)(e)||(0,r.MM)(e)&&e.markerPlacement&&(0,r.zr)(e.markerPlacement))&&"fill"===t||(0,r.jn)(e)&&"outline"===t)continue}else if((0,r.mA)(e)||(0,r.MM)(e)&&e.markerPlacement&&(0,r.zr)(e.markerPlacement))continue;const i=t.toArray();switch(e.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":e.tintColor=i;break;case"CIMVectorMarker":e.markerGraphics?.forEach((e=>{h(e.symbol,t,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":e.color=i;break;case"CIMHatchFill":h(e.lineSymbol,t,n)}}}},74661:function(e,t,n){"use strict";n.d(t,{A7:function(){return c},Cx:function(){return u},Hk:function(){return d},JJ:function(){return m},SF:function(){return h},UK:function(){return l},jM:function(){return p},x3:function(){return f}}),n(58941);var i=n(8740),r=n(22198),o=n(90363),s=n(90972),a=n(6259);const l=o.A.fromJSON(a.Cb),c=r.A.fromJSON(a.yM),u=i.A.fromJSON(a.WR),d=s.A.fromJSON(a.JZ);function h(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return c;case"polygon":case"extent":return u}return null}const p=o.A.fromJSON(a.nC),f=r.A.fromJSON(a.HW),m=i.A.fromJSON(a.b6)},6259:function(e,t,n){"use strict";n.d(t,{Cb:function(){return o},HW:function(){return u},JR:function(){return r},JZ:function(){return l},WR:function(){return a},b6:function(){return d},fT:function(){return i},nC:function(){return c},yM:function(){return s}});const i=[252,146,31,255],r=[153,153,153,255],o={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},d={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},70684:function(e,t,n){"use strict";n.d(t,{J:function(){return v}}),n(50917);var i=n(59469),r=(n(10748),n(61226)),o=n(13520),s=n(13786),a=n(1932),l=n(32501),c=n(33389),u=n(28397),d=n(21267),h=n(21858),p=n(45532),f=n(91508),m=n(38164),g=n(90363),y=n(22198);class v extends h.b{constructor(e){super(),this._graphicsLayer=e,this._symbolPairingsByType=new Map}visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator(new p.default({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol("intersectionPoint",t.view.effectiveTheme.accentColor))}visualizePoint(e,t){return this._visualizeSnappingIndicator(new p.default({x:e.point[0],y:e.point[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol("point",t.view.effectiveTheme.accentColor))}visualizeLine(e,t){return this._visualizeSnappingIndicator(new f.A({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.spatialReference}),this._getOrCreateSymbol("line",t.view.effectiveTheme.accentColor))}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator(new f.A({paths:[[e.lineStart,e.lineEnd]],spatialReference:t.spatialReference}),this._getOrCreateSymbol("parallelSign",t.view.effectiveTheme.accentColor))}visualizeRightAngleQuad(e,t){const n=(0,a.vt)(),i=(0,a.vt)(),r=(0,l.vt)();(0,s.Re)(n,(0,u.Xz)(e.centerVertex),(0,u.Xz)(e.previousVertex)),(0,s.Re)(i,(0,u.Xz)(e.nextVertex),(0,u.Xz)(e.previousVertex)),(0,s.$A)(r,n,i);const o="rightAngleQuad"+(r[2]<0?45:225);return this._visualizeSnappingIndicator(new f.A({paths:[[e.previousVertex,e.centerVertex,e.nextVertex]],spatialReference:t.spatialReference}),this._getOrCreateSymbol(o,t.view.effectiveTheme.accentColor))}_visualizeSnappingIndicator(e,t){const n=new i.default({geometry:e,symbol:t});return this._graphicsLayer.add(n),(0,r.hA)((()=>{this._graphicsLayer.remove(n)}))}_getOrCreateSymbol(e,t){const n=this._symbolPairingsByType;return n.get(e)?.color!==t&&n.set(e,{color:t,symbol:_(e,t)}),n.get(e).symbol}}function _(e,t){const n=[...t.toRgb(),255*t.a];switch(e){case"point":return new g.A({outline:{width:.5,color:[0,0,0,1]},size:10,color:t});case"intersectionPoint":return new g.A({outline:new y.A({width:1.5,color:t}),size:15,color:[0,0,0,0]});case"line":return new m.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:c.uT.Butt,joinStyle:c.wd.Round,miterLimit:10,width:(0,o.PN)(d.N.lineHintWidthTarget),color:n}]}}});case"parallelSign":return new m.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:n}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:n}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});case"rightAngleQuad45":case"rightAngleQuad225":{const i="rightAngleQuad45"===e?45:225;return new m.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:(0,o.PN)(d.N.rightAngleHintSize),rotation:i,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:(0,o.PN)(d.N.rightAngleHintOutlineSize),color:n},{type:"CIMSolidFill",enable:!0,color:[...t.toRgb(),255*t.a*.4]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}})}}}},65949:function(e,t,n){"use strict";n.r(t),n.d(t,{ControlPointsTransformTool:function(){return F},DrawGraphicTool2D:function(){return x},MediaTransformToolsWrapper:function(){return ye},TransformTool:function(){return me}});var i=n(53804),r=(n(50917),n(59469)),o=n(61226),s=n(95929),a=n(28181),l=n(23502),c=(n(58941),n(40633),n(13798),n(65953)),u=n(70684),d=(n(10748),n(38164)),h=n(90363);const p=new d.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),f=new h.A({style:"circle",size:6,color:[127,127,127,1],outline:{color:[50,50,50],width:1}}),m=new h.A({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}});var g=n(93336),y=n(85499),v=n(99113),_=n(45532),b=n(71673);let x=class extends g.N{constructor(e){super(e),this._visualElementGraphics={regularVertices:null,activeVertex:null,activeEdge:null},this.activeFillSymbol=null,this.type="draw-2d",this._visualElementSymbols={outline:e.activeLineSymbol??p,regularVertices:e.regularVerticesSymbol??f,activeVertex:e.activeVertexSymbol??m,fill:e.activeFillSymbol},e.activeVertexSymbol||this.addHandles((0,a.watch)((()=>this.view?.effectiveTheme?.accentColor),(e=>{if(!e)return;const t=this._visualElementSymbols.activeVertex.clone().set({color:e});this._visualElementGraphics.activeVertex?.set("symbol",t),this._visualElementSymbols={...this._visualElementSymbols,activeVertex:t}}),a.Vh))}normalizeCtorArgs(e){const t={...e};return delete t.activeFillSymbol,delete t.activeVertexSymbol,delete t.regularVerticesSymbol,delete t.activeLineSymbol,t}initializeGraphic(e){return null!=this._visualElementSymbols.fill&&(e.symbol=this._visualElementSymbols.fill),this.internalGraphicsLayer.graphics.sort(w),(0,o.hA)()}makeDrawOperation(){const{defaultZ:e,hasZ:t,view:n}=this;return this._createOrUpdateGraphic(null),new y.O0({view:n,manipulators:this.manipulators,geometryType:(0,g.l)(this.geometryType),drawingMode:this.mode,hasZ:t,defaultZ:e,snapToSceneEnabled:this.snapToScene,drawSurface:new v.uF(n,t,e),hasM:!1,snappingManager:this.snappingManager,snappingVisualizer:new u.J(this.internalGraphicsLayer),graphic:this.graphic,cursor:this.cursor,constraintsEnabled:!0})}onActiveVertexChanged(e){if("point"===this.geometryType)return(0,o.hA)();const[t,n]=e,i=new _.default({x:t,y:n,spatialReference:this.view.spatialReference});return null!=this._visualElementGraphics.activeVertex?(this._visualElementGraphics.activeVertex.geometry=i,(0,o.hA)()):(this._visualElementGraphics.activeVertex=new r.default({geometry:i,symbol:this._visualElementSymbols.activeVertex,attributes:{displayOrder:2}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeVertex),this.internalGraphicsLayer.graphics.sort(w),(0,o.hA)((()=>{null!=this._visualElementGraphics.activeVertex&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeVertex),this._visualElementGraphics.activeVertex=(0,s.pR)(this._visualElementGraphics.activeVertex))})))}onCursorEdgeChanged(e){return null!=this._visualElementGraphics.activeEdge?(this._visualElementGraphics.activeEdge.geometry=e,(0,o.hA)()):(this._visualElementGraphics.activeEdge=new r.default({geometry:e,symbol:this._visualElementSymbols.outline,attributes:{displayOrder:0}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeEdge),this.internalGraphicsLayer.graphics.sort(w),(0,o.hA)((()=>{null!=this._visualElementGraphics.activeEdge&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeEdge),this._visualElementGraphics.activeEdge=(0,s.pR)(this._visualElementGraphics.activeEdge))})))}onRegularVerticesChanged(e){const t=new b.A({points:e,spatialReference:this.view.spatialReference});return null!=this._visualElementGraphics.regularVertices?(this._visualElementGraphics.regularVertices.geometry=t,(0,o.hA)()):(this._visualElementGraphics.regularVertices=new r.default({geometry:t,symbol:this._visualElementSymbols.regularVertices,attributes:{displayOrder:1}}),this.internalGraphicsLayer.add(this._visualElementGraphics.regularVertices),this.internalGraphicsLayer.graphics.sort(w),(0,o.hA)((()=>{null!=this._visualElementGraphics.regularVertices&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.regularVertices),this._visualElementGraphics.regularVertices=(0,s.pR)(this._visualElementGraphics.regularVertices))})))}};function w(e,t){return(e.attributes?.displayOrder??-1/0)-(t.attributes?.displayOrder??-1/0)}(0,i._)([(0,l.MZ)()],x.prototype,"activeFillSymbol",void 0),(0,i._)([(0,l.MZ)({readOnly:!0})],x.prototype,"type",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],x.prototype,"view",void 0),x=(0,i._)([(0,c.$)("esri.views.2d.interactive.editingTools.draw.DrawGraphicTool2D")],x);var M,S=n(52874),T=n(46157),C=n(57652),k=n(19702),$=n(77927),E=n(65420);class A{get hovering(){return this.someManipulator((e=>e.hovering))}get grabbing(){return this.someManipulator((e=>e.grabbing))}get dragging(){return this.someManipulator((e=>e.dragging))}hasManipulator(e){return this.someManipulator((t=>t===e))}someManipulator(e){let t=!1;return this.forEachManipulator((n=>{!t&&e(n)&&(t=!0)})),t}}!function(e){e[e.TRANSLATE_XY=0]="TRANSLATE_XY",e[e.SCALE=1]="SCALE",e[e.ROTATE=2]="ROTATE"}(M||(M={}));var P=n(2831),R=n(82067),I=n(34358),O=n(17921);class L extends A{constructor(e){super(),this._view=e.view,this._tool=e.tool,this._graphic=e.graphic,this._manipulator=this._createManipulator(),this.forEachManipulator((e=>this._tool.manipulators.add(e)))}destroy(){this.forEachManipulator((e=>{this._tool.manipulators.remove(e),e.destroy()})),this._tool=null,this._view=null,this._manipulator=null,this._graphic=null}forEachManipulator(e){e(this._manipulator,M.TRANSLATE_XY)}createDragPipeline(e,t){let n=null,i=null,r=0,o=0,s=0;const{offsetX:a,offsetY:l,size:c}=(0,O.T)(this._graphic.symbol);return(0,P.Xt)(this._manipulator,((u,d)=>{d.next((t=>{if("start"===t.action){const t=e();n=t.editGeometryOperations,i=t.constraints}return t})).next((0,P.y$)(this._view)).next((e=>{const{x:u,y:d,z:h}=e.mapEnd;if(i&&(u+a<i.xmin||d+l-c<i.ymin||u+a>i.xmax||d+l-c>i.ymax))return e;("start"===e.action||0===r&&0===o&&0===s)&&(r=e.mapStart.x,o=e.mapStart.y,s=e.mapStart.z);const p=u-r,f=d-o,m=h-s;r=u,o=d,s=h;const g="start"===e.action?I.Y.NEW_STEP:I.Y.ACCUMULATE_STEPS,y=n.move(p,f,m,g);return t(e,y),e}))}))}_createManipulator(){const e=this._view,t=this._graphic;return new R.l({view:e,graphic:t,selectable:!0,cursor:"move"})}}var V=n(25179),N=n(83202),Z=n(7819);const D="Shift",G=V.i,z=new S.A("#009AF2");let F=class extends N.g{constructor(e){super(e),this._isOpacityToggled=!1,this._isModifierActive=!1,this._factor=1,this._initialControlPoints=null,this._graphicsLayer=new k.default({internal:!0,listMode:"hide",visible:!1,effect:"drop-shadow(0px, 0px, 3px)"}),this._undoStack=[],this._redoStack=[],this._sharedUndoStack=[],this._sharedRedoStack=[],this._highlightHandle=null,this.activeHandle=0}initialize(){this._initialize()}destroy(){const{map:e}=this.view;this._controlPointManipulations.forEach((e=>e.destroy())),this._controlPointEditGeometryOperations.forEach((e=>e.destroy())),e.removeMany([this._graphicsLayer]),this._graphicsLayer.removeAll(),this._graphicsLayer=(0,s.pR)(this._graphicsLayer),this._georeference=null,this._controlPointGraphics=null,this._controlPointManipulations=null,this._graphicsLayer=null,this._controlPointEditGeometryOperations=null,this._undoStack=null,this._redoStack=null,this._initialControlPoints=null,this._sharedUndoStack=null,this._sharedRedoStack=null}get _hasValidSpatialReference(){return(0,C.fn)(this.view.spatialReference)}onActivate(){this.visible=!0}onDeactivate(){this.visible=!1}onShow(){this._graphicsLayer.visible=!0}onHide(){this._graphicsLayer.visible=!1}canUndo(){const e=this._undoStack[this._undoStack.length-1];return null!=e&&this._controlPointEditGeometryOperations[e].canUndo}canRedo(){const e=this._redoStack[this._redoStack.length-1];return null!=e&&this._controlPointEditGeometryOperations[e].canRedo}undo(){if(this._undoStack.length>0){const e=this._undoStack.pop();this._controlPointEditGeometryOperations[e].undo(),this.updateGraphics(),this._redoStack.push(e)}}redo(){if(this._redoStack.length>0){const e=this._redoStack.pop();this._controlPointEditGeometryOperations[e].redo(),this.updateGraphics(),this._undoStack.push(e)}}refresh(){const{mediaElement:e}=this;if(null==e.georeference)return;const t=e.georeference;"control-points"===t.type&&null!=t.coords&&(this._georeference=t,this._georeference.controlPoints.forEach((({mapPoint:e},t)=>{const n=this._controlPointEditGeometryOperations[t],i=n.data.components[0].vertices[0];n.setVertexPosition(i,n.data.coordinateHelper.pointToVector(e))})),this.updateGraphics())}reset(){this._georeference.controlPoints=this._initialControlPoints,this.refresh(),this._sharedUndoStack.length=0,this._sharedRedoStack.length=0}updateGraphics(){const e=this._georeference,t=e.controlPoints,n=t[0].mapPoint.spatialReference,i=this._hasValidSpatialReference;this._georeference.controlPoints=this._controlPointEditGeometryOperations.map(((r,o)=>{const s=r.data.geometry;return this._controlPointGraphics[o].geometry=s,{mapPoint:(0,T.project)(s,n),sourcePoint:i?t[o].sourcePoint:e.toSource(s)}}))}updateActiveHandle(e){if(this.activeHandle===e)return;const t=this._controlPointGraphics[this.activeHandle].symbol.clone();(0,$.Fe)(t,this.view.effectiveTheme.accentColor),this._controlPointGraphics[this.activeHandle].symbol=t;const n=this._controlPointGraphics[e].symbol.clone();(0,$.Fe)(n,z),this._controlPointGraphics[e].symbol=n,this.activeHandle=e,this.view.surface===document.activeElement&&this.highlightActiveHandle()}async highlightActiveHandle(){this.removeHighlightActiveHandle();const e=await this.view.whenLayerView(this._graphicsLayer);this._highlightHandle=e.highlight(this._controlPointGraphics[this.activeHandle])}removeHighlightActiveHandle(){this._highlightHandle&&this._highlightHandle.remove()}setSharedUndoStack(e){this._sharedUndoStack=e}setSharedRedoStack(e){this._sharedRedoStack=e}async _initialize(){const{view:e,mediaElement:t}=this;if(null==t.georeference)return;const n=t.georeference;"control-points"===n.type&&null!=n.coords&&(this._georeference=n,this._initialControlPoints=this._georeference.controlPoints,e.map.addMany([this._graphicsLayer]),e.focus(),this.visible=!1,this.finishToolCreation(),await this._loadProjectionEngine(),this._controlPointEditGeometryOperations=this._georeference.controlPoints.map((({mapPoint:t})=>Z.p.fromGeometry((0,T.project)(t,e.spatialReference),E.RT.Local))),this._controlPointGraphics=this._controlPointEditGeometryOperations.map(((e,t)=>new r.default({symbol:new d.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,colorLocked:!0,anchorPoint:{x:0,y:-15.75},anchorPointUnits:"Absolute",dominantSizeAxis3D:"Y",size:9,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:84.3,ymax:84.3},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[83.2,32.5],[84.3,40.7],[83.8,48.9],[81.7,56.9],[78.1,64.3],[73,70.9],[66.9,76.4],[59.7,80.5],[51.9,83.2],[43.7,84.3],[35.4,83.8],[27.4,81.7],[20,78],[13.4,73],[7.9,66.8],[3.8,59.7],[1.1,51.9],[0,43.7],[.5,35.4],[2.6,27.4],[6.3,20],[11.3,13.4],[17.5,7.9],[24.7,3.8],[32.5,1.1],[39.8,.1],[47.1,.3],[54.3,1.8],[61.1,4.5],[67.4,8.4],[72.9,13.3],[77.4,19.1],[80.9,25.5],[83.2,32.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:[255,255,255,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,clippingPath:{type:"CIMClippingPath",clippingType:"Intersect",path:{rings:[[[0,0],[84.3,0],[84.3,84.3],[0,84.3],[0,0]]]}},rotation:0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-11.25},anchorPointUnits:"Absolute",dominantSizeAxis3D:"Y",size:22.5,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:197.7,ymax:294.7},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[98.9,0],[119.4,23.2],[139.4,49.3],[156.8,75.2],[171.2,100.8],[182.4,125.3],[190.6,148.8],[195.7,171.4],[197.7,192.9],[197.7,195.8],[197.7,200.3],[197.6,202.5],[197.5,204.8],[197.3,207.1],[197,209.4],[196.7,211.7],[196.4,214.1],[196,216.4],[195.5,218.7],[195,221.1],[194.4,223.4],[193.7,225.8],[193,228.1],[192.2,230.5],[191.4,232.8],[190.5,235.1],[189.5,237.5],[188.5,239.7],[187.4,242],[186.2,244.3],[185,246.5],[183.7,248.7],[182.4,250.9],[181,253.1],[179.5,255.2],[178,257.3],[176.4,259.4],[174.7,261.4],[173.1,263.3],[171.3,265.3],[169.5,267.2],[167.7,269],[165.8,270.8],[163.9,272.5],[161.9,274.2],[159.9,275.8],[157.8,277.4],[155.7,278.9],[153.6,280.4],[151.4,281.7],[149.2,283.1],[147,284.4],[144.8,285.6],[142.5,286.7],[140.3,287.8],[138,288.8],[135.7,289.8],[133.4,290.7],[131,291.5],[128.7,292.3],[126.4,293],[124,293.6],[121.7,294.2],[119.4,294.7],[117,295.2],[114.7,295.6],[112.4,296],[110.1,296.3],[107.8,296.5],[105.5,296.7],[103.3,296.8],[101.1,296.9],[98.8,296.9],[83.1,295.7],[67.8,292],[53.3,285.9],[39.9,277.5],[28.1,267.2],[18,255.1],[10,241.5],[4.2,226.9],[.9,211.5],[0,195.8],[.1,192.9],[2.1,171.4],[7.2,148.8],[15.4,125.3],[26.6,100.8],[41,75.2],[58.4,49.3],[78.4,23.2],[98.9,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:t===this.activeHandle?z.toArray():this.view.effectiveTheme.accentColor.toArray()}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,clippingPath:{type:"CIMClippingPath",clippingType:"Intersect",path:{rings:[[[0,0],[197.7,0],[197.7,294.7],[0,294.7],[0,0]]]}},rotation:0}],haloSize:1,scaleX:1,angleAlignment:"Display",angle:0}}}),geometry:e.data.geometry}))),this._graphicsLayer.graphics.addMany([...this._controlPointGraphics]),this._controlPointManipulations=this._controlPointGraphics.map((t=>new L({tool:this,view:e,graphic:t}))),this.addHandles([...this._controlPointManipulations.map(((e,t)=>e.createDragPipeline(this._getInfo.bind(this,t),((e,n)=>{"start"===e.action&&(this._undoStack.push(t),this._redoStack=[],this._sharedUndoStack.push({tool:this,operation:n}),this._sharedRedoStack.length=0),this.updateGraphics()})))),(0,a.watch)((()=>this.view.scale),(()=>this.active?this.updateGraphics():null))]),this._controlPointManipulations.forEach(((e,t)=>{e.forEachManipulator((e=>{this.addHandles([e.events.on(["click","grab-changed"],(e=>this.updateActiveHandle(t)))])}))})),this.addHandles([e.on("key-down",(n=>{e.activeTool===this&&(n.key!==D||n.repeat||(this._isModifierActive=!0,n.stopPropagation()),"t"!==n.key||n.repeat||(t.opacity*=this._isOpacityToggled?2:.5,this._isOpacityToggled=!this._isOpacityToggled,n.stopPropagation()),n.key!==G||n.repeat||(this._factor=10,n.stopPropagation()),this._isModifierActive&&("ArrowUp"===n.key&&(this._move(0,this._factor),n.stopPropagation()),"ArrowDown"===n.key&&(this._move(0,-this._factor),n.stopPropagation()),"ArrowLeft"===n.key&&(this._move(-this._factor,0),n.stopPropagation()),"ArrowRight"===n.key&&(this._move(this._factor,0),n.stopPropagation())))})),e.on("key-up",(t=>{e.activeTool===this&&(t.key===D&&(this._isModifierActive=!1,t.stopPropagation()),t.key===G&&(this._factor=1,t.stopPropagation()))}))]))}async _loadProjectionEngine(){const e=this._georeference.controlPoints[0].mapPoint;return(0,T.initializeProjection)(e.spatialReference,this.view.spatialReference)}_getInfo(e){return{editGeometryOperations:this._controlPointEditGeometryOperations[e],constraints:this._hasValidSpatialReference?null:{xmin:0,ymin:0,xmax:this._georeference.width,ymax:this._georeference.height}}}_move(e,t){const n=this._controlPointEditGeometryOperations[this.activeHandle].move(e*this.view.resolution,t*this.view.resolution,0,I.Y.NEW_STEP);this._sharedUndoStack.push({tool:this,operation:n}),this._sharedRedoStack.length=0,this.updateGraphics()}};(0,i._)([(0,l.MZ)()],F.prototype,"_hasValidSpatialReference",null),(0,i._)([(0,l.MZ)()],F.prototype,"activeHandle",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],F.prototype,"mediaElement",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0})],F.prototype,"view",void 0),F=(0,i._)([(0,c.$)("esri.views.2d.interactive.editingTools.ControlPointsTransformTool")],F);var U=n(75505),H=n(62938),j=n(13786),B=n(1932),W=n(20551),K=n(32501),q=n(2075),Y=n(14606),X=n(15774);function Q(e,t){"start"===e.action?t.cursor="grabbing":t.cursor="grab"}class J{constructor(){this._lastDragEvent=null,this.next=new P.rh,this._enabled=!1}get enabled(){return this._enabled}set enabled(e){if(this._enabled!==e&&null!=this._lastDragEvent){const t={...this._lastDragEvent,action:"update"};e&&this._adjustScaleFactors(t),this.next.execute(t)}this._enabled=e}createDragEventPipelineStep(){return this._lastDragEvent=null,e=>(this._lastDragEvent="end"!==e.action?{...e}:null,this._enabled&&this._adjustScaleFactors(e),e)}_adjustScaleFactors(e){const t=0!==e.direction[0]&&0!==e.direction[1]?Math.max(Math.abs(e.factor1),Math.abs(e.factor2)):0===e.direction[0]?Math.abs(e.factor2):Math.abs(e.factor1);e.factor1=e.factor1<0?-t:t,e.factor2=e.factor2<0?-t:t}}class ee{constructor(){this._lastDragEvent=null,this.next=new P.rh,this._enabled=!1}get enabled(){return this._enabled}set enabled(e){if(this._enabled!==e&&null!=this._lastDragEvent){const t={...this._lastDragEvent,action:"update"};e&&this._adjustRotateAngle(t),this.next.execute(t)}this._enabled=e}createDragEventPipelineStep(){return this._lastDragEvent=null,e=>(this._lastDragEvent="end"!==e.action?{...e}:null,this._enabled&&this._adjustRotateAngle(e),e)}_adjustRotateAngle(e){const t=(0,X.KJ)(e.rotateAngle);e.rotateAngle=(0,X.kU)(5*Math.round(t/5))}}var te=n(67060),ne=n(57665),ie=n(41857);class re extends A{constructor(e){super(),this._handles=new Y.A,this._originCache=(0,K.vt)(),this._view=e.view,this._tool=e.tool,this._graphic=e.graphic,this._snapRotation=e.snapRotation,this._manipulator=this._createManipulator(),this._handles.add([this._manipulator.events.on("grab-changed",(e=>Q(e,this._manipulator)))]),this.forEachManipulator((e=>this._tool.manipulators.add(e)))}destroy(){this._handles.destroy(),this.forEachManipulator((e=>{this._tool.manipulators.remove(e),e.destroy()})),this._tool=null,this._view=null,this._manipulator=null,this._snapRotation=null,this._graphic=null,this._handles=null,this._originCache=null}forEachManipulator(e){e(this._manipulator,M.ROTATE)}createDragPipeline(e,t){let n=null,i=null;return(0,P.Xt)(this._manipulator,((r,o)=>{o.next((t=>{if("start"===t.action){r.cursor="grabbing";const t=e();n=t.plane,i=t.editGeometryOperations}return t})).next((0,P.y$)(this._view)).next((e=>({...e,rotateAngle:(0,te.UT)(e.mapStart,e.mapEnd,{x:n.origin[0],y:n.origin[1]},!0)}))).next(this._snapRotation.createDragEventPipelineStep(),this._snapRotation.next).next((e=>{const r=(0,W.c)(this._originCache,n.origin),o="start"===e.action?I.Y.NEW_STEP:I.Y.ACCUMULATE_STEPS,s=i.rotate(r,e.rotateAngle,o,ne.K.REPLACE);return(0,ie.Bb)(s,n),t(e,s),e})).next((e=>("end"===e.action&&(r.cursor="grab"),e)))}))}_createManipulator(){const e=this._view,t=this._graphic;return new R.l({view:e,graphic:t,selectable:!0,cursor:"grab"})}}const oe=1e-6;function se(e){const t=(0,W.l)(e.basis1),n=(0,W.l)(e.basis2);return.3*Math.min(t,n)}class ae extends A{constructor(e){super(),this._handles=new Y.A,this._planeStart=(0,q.a)(),this._displayPlaneStart=(0,q.a)(),this._originCache=(0,K.vt)(),this._axisCache=(0,B.vt)(),this._renderStartCache=(0,K.vt)(),this._renderEndCache=(0,K.vt)(),this._resizeOriginCache=(0,K.vt)(),this._view=e.view,this._tool=e.tool,this._graphic=e.graphic,this._direction=e.direction,this._preserveAspectRatio=e.preserveAspectRatio,this._manipulator=this._createManipulator(),this._handles.add([this._manipulator.events.on("grab-changed",(e=>Q(e,this._manipulator)))]),this.forEachManipulator((e=>this._tool.manipulators.add(e)))}destroy(){this._handles.destroy(),this.forEachManipulator((e=>{this._tool.manipulators.remove(e),e.destroy()})),this._tool=null,this._view=null,this._graphic=null,this._manipulator=null,this._direction=null,this._handles=null,this._planeStart=null,this._displayPlaneStart=null,this._originCache=null,this._axisCache=null,this._renderStartCache=null,this._renderEndCache=null,this._resizeOriginCache=null,this._preserveAspectRatio=null}forEachManipulator(e){e(this._manipulator,M.SCALE)}createDragPipeline(e,t){let n=null,i=null,r=null,o=0,s=null,a=null;const l=this._planeStart,c=this._displayPlaneStart,u=this._direction;return(0,P.Xt)(this._manipulator,((d,h)=>{h.next((t=>{if("start"===t.action){d.cursor="grabbing";const t=e();n=t.plane,i=t.displayPlane,r=t.editGeometryOperations,o=10*this._view.resolution,(0,q.c)(n,l),(0,q.c)(i,c);const a=(0,C.Vp)(r.data.spatialReference);s=a?a.valid[1]-a.valid[0]-30*this._view.resolution:null}return t})).next((0,P.y$)(this._view)).next((e=>{const t=(0,W.c)(this._renderStartCache,[e.mapStart.x,e.mapStart.y,0]),n=(0,W.c)(this._renderEndCache,[e.mapEnd.x,e.mapEnd.y,0]),r=(0,W.c)(this._resizeOriginCache,c.origin);(0,W.r)(r,r,c.basis1,-u[0]),(0,W.r)(r,r,c.basis2,-u[1]),(0,W.f)(n,n,r),(0,W.f)(t,t,r);const s=0!==u[0]&&0!==u[1],a=se(c),l=se(i)/a,d=(e,i)=>{if(0===e)return 1;let r=(0,W.l)(i),a=.5*e*(0,W.m)(i,n)/r;const c=a<0?-1:1;s&&(a+=(r-.5*e*(0,W.m)(i,t)/r)*c*l);const u=r<1.5*o?1:oe;return r=Math.max(r-o,oe),c>0&&(a-=10*this._view.resolution),c*Math.max(c*(a/r),u)},h=d(u[0],c.basis1),p=d(u[1],c.basis2);return{...e,direction:u,factor1:h,factor2:p}})).next(this._preserveAspectRatio.createDragEventPipelineStep(),this._preserveAspectRatio.next).next((e=>{const i=(0,W.c)(this._originCache,l.origin);(0,W.r)(i,i,l.basis1,-u[0]),(0,W.r)(i,i,l.basis2,-u[1]);const o=(0,j.hZ)(this._axisCache,l.basis1[0],l.basis1[1]);(0,j.S8)(o,o);const c=r.data.allVertices,d="start"===e.action?I.Y.NEW_STEP:I.Y.ACCUMULATE_STEPS,h=r.scaleVertices(c,i,o,e.factor1,e.factor2,d,ne.K.REPLACE);return s&&s<r.data.geometry.extent.width&&a?r.updateVertices(c,a):((0,q.c)(l,n),(0,ie.Bb)(h,n),a=h.operation,t(e,h)),e})).next((e=>("end"===e.action&&(d.cursor="grab"),e)))}))}_createManipulator(){return new R.l({view:this._view,graphic:this._graphic,selectable:!0,cursor:"grab"})}}var le=n(37578),ce=n(2623),ue=n(32992),de=n(62097),he=n(44740),pe=n(8740);V.i;const fe=[[1,1],[1,-1],[-1,-1],[-1,1],[1,0],[0,-1],[-1,0],[0,1]];let me=class extends N.g{constructor(e){super(e),this._initialControlPoints=null,this._initialGeometry=null,this._graphic=null,this._planeCache=(0,q.a)(),this._displayPlaneCache=(0,q.a)(),this._mainAxisCache=(0,B.vt)(),this._rotationHandleCache=(0,K.vt)(),this._cornerA=(0,K.vt)(),this._cornerB=(0,K.vt)(),this._cornerC=(0,K.vt)(),this._cornerD=(0,K.vt)(),this._avgAB=(0,K.vt)(),this._avgBC=(0,K.vt)(),this._avgCD=(0,K.vt)(),this._avgDA=(0,K.vt)(),this._preserveAspectRatio=new J,this._snapRotation=new ee,this._graphicsLayer=new k.default({internal:!0,listMode:"hide",visible:!1}),this._sharedUndoStack=[],this._sharedRedoStack=[],this._isOpacityToggled=!1,this._factor=1,this.preserveAspectRatio=null,this.snapRotation=null}initialize(){this._initialize()}destroy(){const{map:e}=this.view;this._dragManipulation.destroy(),this._rotateManipulation.destroy(),this._scaleManipulations.forEach((e=>e.destroy())),this._editGeometryOperations.destroy(),e.removeMany([this._graphicsLayer]),this._graphicsLayer.removeAll(),this._graphicsLayer=(0,s.pR)(this._graphicsLayer),this._initialControlPoints=null,this._initialGeometry=null,this._graphic=null,this._preserveAspectRatio=null,this._snapRotation=null,this._planeCache=null,this._displayPlaneCache=null,this._rotationHandleCache=null,this._mainAxisCache=null,this._cornerA=null,this._cornerB=null,this._cornerC=null,this._cornerD=null,this._avgAB=null,this._avgBC=null,this._avgCD=null,this._avgDA=null,this._sharedUndoStack=null,this._sharedRedoStack=null}get _plane(){const e=this._graphic.geometry;if(null==e)return null;const t=this._editGeometryOperations.data,n=t.components[0].edges[0],i=(0,j.Re)(this._mainAxisCache,n.leftVertex.pos,n.rightVertex.pos);(0,j.S8)(i,i);let r=80*this.view.resolution;const o=this.view.spatialReference;return(0,C.aI)(o,e.spatialReference)&&(r*=(0,H.GA)(o)/(0,H.GA)(e.spatialReference)),(0,ie.G3)(i,t,r,this._planeCache)}get _displayPlane(){const e=this._plane;if(!e)return null;const t=this._displayPlaneCache;(0,q.c)(e,t);const n=10*this.view.resolution;return(0,W.j)(t.basis1,t.basis1,1+n/(0,W.l)(t.basis1)),(0,W.j)(t.basis2,t.basis2,1+n/(0,W.l)(t.basis2)),t}get _backgroundGraphicGeometry(){const e=this._displayPlane;if(!e)return null;const t=this.view.spatialReference;return this._updateDisplayPlaneConrers(e),new he.A({spatialReference:t,rings:[[this._cornerA,this._cornerB,this._cornerC,this._cornerD,this._cornerA]]})}get _rotateGraphicGeometry(){const e=this._plane;if(!e)return null;const t=this._rotationHandleCache;return(0,W.n)(t,e.basis1),(0,W.j)(t,t,30*this.view.resolution),(0,W.g)(t,t,e.origin),(0,W.g)(t,t,e.basis1),new _.default({x:t[0],y:t[1],spatialReference:this.view.spatialReference})}get _scaleGraphicGeometries(){const e=this._displayPlane;if(!e)return[];const t=this.view.spatialReference;this._updateDisplayPlaneConrers(e);const{_cornerA:n,_cornerB:i,_cornerC:r,_cornerD:o}=this,s=(0,W.o)(this._avgAB,n,i,.5),a=(0,W.o)(this._avgBC,i,r,.5),l=(0,W.o)(this._avgCD,r,o,.5),c=(0,W.o)(this._avgDA,o,n,.5);return[new _.default({x:n[0],y:n[1],spatialReference:t}),new _.default({x:i[0],y:i[1],spatialReference:t}),new _.default({x:r[0],y:r[1],spatialReference:t}),new _.default({x:o[0],y:o[1],spatialReference:t}),new _.default({x:s[0],y:s[1],spatialReference:t}),new _.default({x:a[0],y:a[1],spatialReference:t}),new _.default({x:l[0],y:l[1],spatialReference:t}),new _.default({x:c[0],y:c[1],spatialReference:t})]}onActivate(){this.visible=!0}onDeactivate(){this.visible=!1}onShow(){this._graphicsLayer.visible=!0}onHide(){this._graphicsLayer.visible=!1}canUndo(){return this._editGeometryOperations.canUndo}canRedo(){return this._editGeometryOperations.canRedo}undo(){this._editGeometryOperations.undo(),this.updateGraphics()}redo(){this._editGeometryOperations.redo(),this.updateGraphics()}refresh(){const{view:e,target:t}=this,n="georeference"in t?t.georeference.coords:t.geometry,i=this._editGeometryOperations,r=i.data.components[0].vertices,o=ce.ZE.fromGeometry((0,T.project)(n,e.spatialReference),E.RT.Local).components[0].vertices;r.forEach(((e,t)=>{i.setVertexPosition(e,o[t].pos)})),this.updateGraphics()}reset(){const{target:e}=this;if("georeference"in e){const t=e.georeference;"control-points"===t.type&&(t.controlPoints=this._initialControlPoints)}else e.geometry=this._initialGeometry;this.refresh(),this._sharedUndoStack.length=0,this._sharedRedoStack.length=0}updateGraphics(){const e=this._editGeometryOperations.data.geometry;"georeference"in this.target&&(this.target.georeference.coords=e),this._graphic.geometry=e,this._backgroundGraphic.geometry=this._backgroundGraphicGeometry,this._rotateGraphic.geometry=this._rotateGraphicGeometry,this._scaleGraphicGeometries.forEach(((e,t)=>{this._scaleGraphics[t].geometry=e}))}setSharedUndoStack(e){this._sharedUndoStack=e}setSharedRedoStack(e){this._sharedRedoStack=e}async _initialize(){const{view:e,target:t}=this;if("georeference"in t){const e=t.georeference;this._graphic=new r.default({geometry:e.coords}),this._initialControlPoints="control-points"===e.type?e.controlPoints:null}else this._graphic=t,this._initialGeometry=t.geometry;e.map.addMany([this._graphicsLayer]),e.focus(),this.visible=!1,this.finishToolCreation(),await this._loadProjectionEngine(),this._editGeometryOperations=Z.p.fromGeometry((0,T.project)(this._graphic.geometry,e.spatialReference),E.RT.Local),this._backgroundGraphic=new r.default({symbol:new pe.A({color:"transparent",outline:{type:"simple-line",color:e.effectiveTheme.accentColor,width:2}}),geometry:this._backgroundGraphicGeometry}),this._rotateGraphic=new r.default({symbol:new h.A({color:(0,U.bJ)(e.effectiveTheme.accentColor),outline:{type:"simple-line",color:e.effectiveTheme.accentColor,width:1}}),geometry:this._rotateGraphicGeometry}),this._scaleGraphics=this._scaleGraphicGeometries.map((t=>new r.default({symbol:new h.A({size:6,style:"square",color:(0,U.bJ)(e.effectiveTheme.accentColor),outline:{type:"simple-line",color:e.effectiveTheme.accentColor,width:1}}),geometry:t}))),this._graphicsLayer.graphics.addMany([this._backgroundGraphic,this._rotateGraphic,...this._scaleGraphics]),this._dragManipulation=new L({tool:this,view:e,graphic:this._graphic}),this._rotateManipulation=new re({tool:this,view:e,graphic:this._rotateGraphic,snapRotation:this._snapRotation}),this._scaleManipulations=this._scaleGraphics.map(((t,n)=>new ae({tool:this,view:e,graphic:t,direction:fe[n],preserveAspectRatio:this._preserveAspectRatio}))),this.addHandles([this._dragManipulation.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this)),this._rotateManipulation.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this)),...this._scaleManipulations.map((e=>e.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this)))),(0,a.watch)((()=>this.view.scale),(()=>this.active?this.updateGraphics():null)),e.on("click",(async n=>{if(null!=e.activeTool&&e.activeTool!==this)return;const i=(0,de.ZV)(n),r=[];e.map.allLayers.forEach((e=>{"vector-tile"!==e.type&&"imagery"!==e.type||r.push(e)}));const o=await this.view.hitTest(i,{exclude:r}),s=o.results;if(0===s.length)e.activeTool=null;else{const n=(0,ue.zF)(o.results),i="georeference"in t,r=s.map((e=>"media"===e.type?e.element:null)).filter(Boolean),a=new Set([...this._graphicsLayer.graphics,i?null:t].filter(Boolean));i&&r.includes(t)||null!=n&&a.has(n.graphic)?null==e.activeTool&&(e.activeTool=this):e.activeTool=null}}))]);const n=e=>{this.addHandles(e.events.on("grab-changed",(e=>{"georeference"in t&&("start"===e.action?t.opacity*=.5:"end"===e.action&&(t.opacity*=2))})))};this._dragManipulation.forEachManipulator(n),this._rotateManipulation.forEachManipulator(n),this._scaleManipulations.forEach((e=>e.forEachManipulator(n)));const i=new le.oe;i.addToggle(le.TU.preserveAspectRatio,(()=>{null==this.preserveAspectRatio&&(this._preserveAspectRatio.enabled=!this._preserveAspectRatio.enabled)})),i.addToggle(le.TU.rotateIncrements,(()=>{null==this.snapRotation&&(this._snapRotation.enabled=!this._snapRotation.enabled)})),i.add(le.TU.toggleOpacity,(()=>{"georeference"in t&&(t.opacity*=this._isOpacityToggled?2:.5,this._isOpacityToggled=!this._isOpacityToggled)})),i.addToggle(le.TU.factorModifier,(e=>this._factor="key-down"===e.type?10:1)),i.add(le.TU.scaleUp,(()=>this._scale(this._factor))),i.add(le.TU.scaleDown,(()=>this._scale(-this._factor))),i.add(le.TU.moveUp,(()=>this._move(0,this._factor))),i.add(le.TU.moveDown,(()=>this._move(0,-this._factor))),i.add(le.TU.moveLeft,(()=>this._move(-this._factor,0))),i.add(le.TU.moveRight,(()=>this._move(this._factor,0))),this.addHandles([e.on("key-down",(t=>{e.activeTool===this&&i.dispatch(e.inputManager,t)})),e.on("key-up",(t=>{e.activeTool===this&&i.dispatch(e.inputManager,t)}))])}async _loadProjectionEngine(){const e=this._graphic.geometry;return(0,T.initializeProjection)(e.spatialReference,this.view.spatialReference)}_updateDisplayPlaneConrers(e){const{basis1:t,basis2:n,origin:i}=e,r=this._cornerA;(0,W.g)(r,i,t),(0,W.g)(r,r,n);const o=this._cornerB;(0,W.g)(o,i,t),(0,W.f)(o,o,n);const s=this._cornerC;(0,W.f)(s,i,t),(0,W.f)(s,s,n);const a=this._cornerD;(0,W.f)(a,i,t),(0,W.g)(a,a,n)}_getInfo(){return{editGeometryOperations:this._editGeometryOperations,plane:this._plane,displayPlane:this._displayPlane}}_updateGraphics(e,t){"start"===e.action&&(this._sharedUndoStack.push({tool:this,operation:t}),this._sharedRedoStack.length=0),this.updateGraphics()}_scale(e){const t=this._editGeometryOperations,n=t.data.geometry.extent?.width,i=(n+e*this.view.resolution)/n,r=t.scale(this._plane.origin,B.Cw,i,i,I.Y.NEW_STEP,ne.K.REPLACE);this._sharedUndoStack.push({tool:this,operation:r}),this._sharedRedoStack.length=0,this.updateGraphics()}_move(e,t){const n=this._editGeometryOperations.move(e*this.view.resolution,t*this.view.resolution,0,I.Y.NEW_STEP);this._sharedUndoStack.push({tool:this,operation:n}),this._sharedRedoStack.length=0,this.updateGraphics()}};(0,i._)([(0,l.MZ)()],me.prototype,"_plane",null),(0,i._)([(0,l.MZ)()],me.prototype,"_backgroundGraphicGeometry",null),(0,i._)([(0,l.MZ)()],me.prototype,"_rotateGraphicGeometry",null),(0,i._)([(0,l.MZ)()],me.prototype,"_scaleGraphicGeometries",null),(0,i._)([(0,l.MZ)()],me.prototype,"preserveAspectRatio",void 0),(0,i._)([(0,l.MZ)()],me.prototype,"snapRotation",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],me.prototype,"target",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0})],me.prototype,"view",void 0),me=(0,i._)([(0,c.$)("esri.views.2d.interactive.editingTools.TransformTool")],me);var ge=n(83525);let ye=class extends ge.A{constructor(e){super(e),this._transformTool=null,this._controlPointsTransformTool=null,this._advancedModeTransformTool=null,this._activeTool=null,this._sharedUndoStack=[],this._sharedRedoStack=[],this._originalOpacity=null,this.activeHandle=0}initialize(){const{view:e,mediaElement:t,preserveAspectRatio:n,snapRotation:i,advancedMode:r}=this;this._originalOpacity=t.opacity,this._transformTool=new me({target:t,view:e,preserveAspectRatio:n,snapRotation:i}),this._controlPointsTransformTool=new F({mediaElement:t,view:e}),this._advancedModeTransformTool=new F({mediaElement:r.mediaElement,view:r.view}),this._transformTool.setSharedUndoStack(this._sharedUndoStack),this._transformTool.setSharedRedoStack(this._sharedRedoStack),this._controlPointsTransformTool.setSharedUndoStack(this._sharedUndoStack),this._controlPointsTransformTool.setSharedRedoStack(this._sharedRedoStack),this._advancedModeTransformTool.setSharedUndoStack(this._sharedUndoStack),this._advancedModeTransformTool.setSharedRedoStack(this._sharedRedoStack);const o=t.georeference,s=r.mediaElement.georeference;r.view.tools.addMany([this._advancedModeTransformTool]),"controlPoints"in s&&"controlPoints"in o&&this.addHandles([r.view.on("key-down",(e=>{"z"===e.key&&this.canUndo()&&(this.undo(),e.stopPropagation()),"r"===e.key&&this.canRedo()&&(this.redo(),e.stopPropagation())})),r.view.on("focus",(async e=>{this._controlPointsTransformTool.removeHighlightActiveHandle(),this._advancedModeTransformTool.highlightActiveHandle()})),(0,a.watch)((()=>s.controlPoints),(e=>{o.controlPoints=e.map((({sourcePoint:e},t)=>({sourcePoint:e,mapPoint:o.controlPoints[t].mapPoint}))),this._activeTool?.refresh()})),(0,a.watch)((()=>this._controlPointsTransformTool.activeHandle),(e=>{this._advancedModeTransformTool.updateActiveHandle(e),this.activeHandle=e})),(0,a.watch)((()=>this._advancedModeTransformTool.activeHandle),(e=>{this._controlPointsTransformTool.updateActiveHandle(e),this.activeHandle=e}))]),this.addHandles([e.on("key-down",(e=>{"z"===e.key&&this.canUndo()&&(this.undo(),e.stopPropagation()),"r"===e.key&&this.canRedo()&&(this.redo(),e.stopPropagation())})),e.on("focus",(async e=>{this._advancedModeTransformTool.removeHighlightActiveHandle(),this._controlPointsTransformTool.highlightActiveHandle()}))]),e.tools.addMany([this._transformTool,this._controlPointsTransformTool]),e.activeTool=this._transformTool,this._activeTool=this._transformTool,e.focus()}destroy(){this._transformTool?.destroy(),this._controlPointsTransformTool?.destroy(),this._transformTool=null,this._controlPointsTransformTool=null,this._advancedModeTransformTool=null,this._activeTool=null,this._sharedUndoStack=null,this._sharedRedoStack=null}canUndo(){return this._sharedUndoStack.length>0}canRedo(){return this._sharedRedoStack.length>0}undo(){if(this._sharedUndoStack.length>0){const{tool:e,operation:t}=this._sharedUndoStack.pop();e!==this._activeTool&&e.refresh(),t.undo(),e.updateGraphics(),this._sharedRedoStack.push({tool:e,operation:t}),this._activeTool!==e&&this._activeTool?.refresh()}}redo(){if(this._sharedRedoStack.length>0){const{tool:e,operation:t}=this._sharedRedoStack.pop();e!==this._activeTool&&e.refresh(),t.apply(),e.updateGraphics(),this._sharedUndoStack.push({tool:e,operation:t}),this._activeTool!==e&&this._activeTool?.refresh()}}refresh(){this._activeTool.refresh()}reset(){this._activeTool.reset(),this._advancedModeTransformTool.reset()}async enableAdvancedMode(){this.view.activeTool=this._controlPointsTransformTool,this._activeTool=this._controlPointsTransformTool,this._activeTool.refresh(),await this.advancedMode.view.when(),this.advancedMode.view.activeTool=this._advancedModeTransformTool,this._originalOpacity=this._controlPointsTransformTool.mediaElement.opacity,this._controlPointsTransformTool.mediaElement.opacity=.25*this._originalOpacity}disableAdvancedMode(){this.view.activeTool=this._transformTool,this._activeTool=this._transformTool,this._activeTool.refresh(),this.advancedMode.view.activeTool=null,this._controlPointsTransformTool.mediaElement.opacity=this._originalOpacity}};(0,i._)([(0,l.MZ)()],ye.prototype,"activeHandle",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0})],ye.prototype,"advancedMode",void 0),(0,i._)([(0,l.MZ)()],ye.prototype,"preserveAspectRatio",void 0),(0,i._)([(0,l.MZ)()],ye.prototype,"snapRotation",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],ye.prototype,"mediaElement",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0})],ye.prototype,"view",void 0),ye=(0,i._)([(0,c.$)("esri.views.2d.interactive.editingTools.MediaTransformToolsWrapper")],ye)},65420:function(e,t,n){"use strict";var i;n.d(t,{RT:function(){return i}}),function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"}(i||(i={}))},93336:function(e,t,n){"use strict";n.d(t,{N:function(){return Je},l:function(){return nt}});var i,r,o=n(53804),s=n(59469),a=n(83525),l=n(78879),c=n(28181),u=n(23502),d=(n(58941),n(40633),n(13798),n(65953)),h=n(20248);!function(e){e[e.NeverApplied=0]="NeverApplied",e[e.Applied=1]="Applied",e[e.Undone=2]="Undone"}(i||(i={})),function(e){e.UndoRedoUpdating="UndoRedoUpdating",e.UndoInvalidError="UndoInvalidError",e.RedoInvalidError="RedoInvalidError",e.ApplyInvalidError="ApplyInvalidError"}(r||(r={}));const p={[r.UndoRedoUpdating]:"Cannot perform operation whilst undo redo is updating",[r.UndoInvalidError]:"There are no items to Undo",[r.RedoInvalidError]:"There are no items to Redo",[r.ApplyInvalidError]:"Cannot apply an item that is already applied"};class f extends Error{constructor(){super(p[r.UndoRedoUpdating]),this.type="undo-redo-updating-error"}}class m extends Error{constructor(){super(p[r.UndoInvalidError]),this.type="undo-redo-undo-error"}}class g extends Error{constructor(){super(p[r.RedoInvalidError]),this.type="undo-redo-redo-error"}}class y extends Error{constructor(){super(p[r.ApplyInvalidError]),this.type="undo-redo-apply-error"}}var v,_;(_=v||(v={}))[_.Apply=0]="Apply",_[_.Undo=1]="Undo",_[_.Redo=2]="Redo";let b=class extends a.A{constructor(){super(...arguments),this.name="",this.tag=Symbol(),this.status=i.NeverApplied}get canUndo(){return this.status===i.Applied}get canRedo(){return this.status===i.Undone}async executeUndoRedoOperation(e){switch(e){case v.Apply:if(this.status!==i.NeverApplied)throw new y;return await this.apply(),void(this.status=i.Applied);case v.Undo:if(this.status!==i.Applied)throw new m;return await this.undo(),void(this.status=i.Undone);case v.Redo:if(this.status!==i.Undone)throw new m;return await this.redo(),void(this.status=i.Applied)}}};(0,o._)([(0,u.MZ)()],b.prototype,"name",void 0),(0,o._)([(0,u.MZ)()],b.prototype,"tag",void 0),b=(0,o._)([(0,d.$)("esri.undoredo.UndoableOperation")],b);let x=class extends a.A{constructor(){super(...arguments),this._stack=new l.A,this._stackPosition=-1,this._updatingHandles=new h.U}get updating(){return this._updatingHandles.updating}get canUndo(){return this.hasUndo&&!this.updating}get hasUndo(){return this._stackPosition>=0}get canRedo(){return this.hasRedo&&!this.updating}get hasRedo(){return this._stackPosition<this._stack.length-1}_truncateForwardStack(){this._stack.splice(this._stackPosition+1,this._stack.length-this._stackPosition).forEach((e=>e.destroy()))}_drainStack(){this._stack.drain((e=>e.destroy())),this._stackPosition=-1}async undo(){if(!this.hasUndo)throw new m;if(this.updating)throw new f;const e=this._stack.getItemAt(this._stackPosition);await this._updatingHandles.addPromise((async()=>{await e.executeUndoRedoOperation(v.Undo),--this._stackPosition,e.canRedo||this._truncateForwardStack()})())}async redo(){if(!this.hasRedo)throw new g;if(this.updating)throw new f;const e=this._stack.getItemAt(this._stackPosition+1);await this._updatingHandles.addPromise((async()=>{await e.executeUndoRedoOperation(v.Redo),++this._stackPosition})())}peekUndo(){return this.canUndo?this._stack.getItemAt(this._stackPosition):null}peekRedo(){return this.canRedo?this._stack.getItemAt(this._stackPosition+1):null}async inject(e){if(this.updating)throw new f;await this._updatingHandles.addPromise((async()=>{e.status===i.NeverApplied&&await e.executeUndoRedoOperation(v.Apply),e.canUndo?(this._stack.splice(this._stackPosition+1,0,e),this._stackPosition++):this._stackPosition>-1&&(this._stack.splice(0,this._stackPosition+1).forEach((e=>e.destroy())),this._stackPosition=-1)})())}async add(e){if(this.updating)throw new f;await this._updatingHandles.addPromise((async()=>{e.status===i.NeverApplied&&await e.executeUndoRedoOperation(v.Apply),this._stackPosition>=-1&&this._truncateForwardStack(),e.canUndo?(this._stack.push(e),this._stackPosition=this._stack.length-1):this._drainStack()})())}async removeTagged(e,t=!1){if(this.updating&&!t)return;await(0,c.C_)((()=>!this.updating));const n=new l.A;for(let t=0;t<this._stack.length;t++){const i=this._stack.getItemAt(t);i.tag===e?(i.destroy(),t===this._stackPosition&&(this._stackPosition=n.length-1)):n.push(i)}this._stack=n,this._stackPosition>n.length-1&&(this._stackPosition=n.length-1)}async clear(e=!1){if(this.updating&&!e)throw new f;await(0,c.C_)((()=>!this.updating)),this._drainStack()}};(0,o._)([(0,u.MZ)()],x.prototype,"_stack",void 0),(0,o._)([(0,u.MZ)()],x.prototype,"_stackPosition",void 0),(0,o._)([(0,u.MZ)()],x.prototype,"updating",null),(0,o._)([(0,u.MZ)({readOnly:!0})],x.prototype,"canUndo",null),(0,o._)([(0,u.MZ)({readOnly:!0})],x.prototype,"hasUndo",null),(0,o._)([(0,u.MZ)({readOnly:!0})],x.prototype,"canRedo",null),(0,o._)([(0,u.MZ)({readOnly:!0})],x.prototype,"hasRedo",null),x=(0,o._)([(0,d.$)("esri.UndoRedo")],x);var w=n(77472),M=n(48996),S=n(61226),T=n(95929),C=n(6338),k=n(19702),$=n(42413);class E{constructor(){this.committedVertices=null,this.cursorVertex=null,this.full=null,this.outline=null,this.cursorEdge=null,this.circle=null,this.rectangle=null}}n(50917);var A,P=n(50659),R=n(21609),I=n(62938),O=n(20551),L=n(32501),V=n(61714),N=n(45532),Z=n(44740),D=n(57165),G=n(57862),z=n(1644),F=n(94757);let U=A=class extends Z.A{constructor(...e){super(...e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(e,t){let n;if(e?.center)n=e;else{if(e?.rings)return super.normalizeCtorArgs(e,t);n={center:e}}return{...super.normalizeCtorArgs(),...n,...t}}initialize(){const e=this.center,t=this.numberOfPoints;if(this.hasZ=e?.hasZ??!1,0!==this.rings.length||!e)return;const n=(0,I.oU)(this.radius,this.radiusUnit,"meters"),i=e.spatialReference;let r,o="geographic";if(i.isWebMercator?o="webMercator":(null!=(i.wkid&&F.A[i.wkid])||(i.wkt2||i.wkt)&&(0,I.x1)(i.wkt2||i.wkt))&&(o="projected"),this.geodesic){let i;switch(o){case"webMercator":i=(0,z.ci)(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":i=e}r=this._createGeodesicCircle(i,n,t),"webMercator"===o&&(r=(0,z.Gh)(r))}else{let i;"webMercator"===o||"projected"===o?i=n/(0,I.Ao)(e.spatialReference):"geographic"===o&&(i=(0,I.vl)(n,"meters",(0,V.tO)(e.spatialReference).radius)),r=this._createPlanarCircle(e,i,t)}this.spatialReference=r.spatialReference,this.addRing(r.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:n,radiusUnit:i,geodesic:r}=this;return new A({center:e?.clone(),numberOfPoints:t,radius:n,radiusUnit:i,geodesic:r})}_createGeodesicCircle(e,t,n){let i=0;const r=[];for(;i<360;){const o=[0,0],s=[e.x,e.y];(0,G.vN)(o,s,i,t,D.A.WGS84),this.hasZ&&o.push(e.z),r.push(o),i+=360/n}return r.push(r[0]),new Z.A(r)}_createPlanarCircle(e,t,n){const i=[],r=2*Math.PI/n;for(let o=0;o<n;++o){const n=r*o,s=[e.x+Math.cos(-n)*t,e.y+Math.sin(-n)*t];this.hasZ&&s.push(e.z),i.push(s)}return i.push(i[0]),new Z.A({spatialReference:e.spatialReference,rings:[i]})}};(0,o._)([(0,u.MZ)({type:N.default})],U.prototype,"center",void 0),(0,o._)([(0,u.MZ)()],U.prototype,"geodesic",void 0),(0,o._)([(0,u.MZ)()],U.prototype,"numberOfPoints",void 0),(0,o._)([(0,u.MZ)()],U.prototype,"radius",void 0),(0,o._)([(0,u.MZ)()],U.prototype,"radiusUnit",void 0),U=A=(0,o._)([(0,d.$)("esri.geometry.Circle")],U);const H=U;var j=n(22162),B=n(38441),W=n(57652),K=n(67348),q=n(12978),Y=n(32237),X=n(61769),Q=n(72485);function J(e,t,n=null){return null!=n?[e,t,n]:[e,t]}function ee(e,t,n=null){return null!=n?{x:e,y:t,z:n}:{x:e,y:t}}class te{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map((e=>this.mapToLocal(e))).filter(P.Ru)}get doUnnormalization(){return!1}}class ne extends te{constructor(e,t,n=null){super(t),this._defaultZ=n,this.transform=(0,q.vt)(),this.transformInv=(0,q.vt)(),this.transform=(0,q.o8)(e),(0,K.B8)(this.transformInv,this.transform)}makeMapPoint(e,t){return J(e,t,this._defaultZ)}mapToLocal(e){return ee(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return J(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}class ie extends te{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=(0,L.vt)(),this.tangentFrameUpWS=(0,L.vt)(),this.tangentFrameRightWS=(0,L.vt)(),this.tangentFrameForwardWS=(0,L.vt)(),this.localFrameRightWS=(0,L.vt)(),this.localFrameUpWS=(0,L.vt)(),this.worldToLocalTransform=(0,X.vt)(),this.localToWorldTransform=(0,X.vt)(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const n=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Q._.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Q._.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Q._.Z,this.tangentFrameForwardWS);const i=(0,L.vt)();(0,O.j)(i,this.tangentFrameForwardWS,(0,O.m)(n,this.tangentFrameForwardWS)),(0,O.f)(this.localFrameRightWS,n,i),(0,O.n)(this.localFrameRightWS,this.localFrameRightWS),(0,O.b)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,Y.Yc)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,Y.B8)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return J(e,t,this.defaultZ)}mapToLocal(e){const t=(0,L.vt)();this.view.renderCoordsHelper.toRenderCoords(new N.default({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),(0,O.u)(t,t,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(t,new N.default({spatialReference:this.view.spatialReference}));return null!=n?ee(n.x/this.scale,n.y/this.scale):null}localToMap(e){const t=(0,L.vt)();this.view.renderCoordsHelper.toRenderCoords(new N.default({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),(0,O.u)(t,t,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(t,new N.default({spatialReference:this.view.spatialReference}));return null!=n?J(n.x,n.y,this.defaultZ):null}}var re=n(71673),oe=n(91508);function se(e,t){const n=new N.default({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(n.z=e[2]),n}function ae(e,t,n){const i=new oe.A({paths:e,spatialReference:t});return n&&(0,B._7)(i),i}function le(e,t,n,i=!0){const r=(0,R.o8)(e);r.forEach((e=>{const t=e[0],n=e[e.length-1];(0,P.aI)(t,n)&&1!==e.length||e.push(e[0])}));let o=new Z.A({rings:r,spatialReference:t});return o.rings.forEach((e=>{(0,B.$3)(e)||e.reverse()})),n&&(0,B._7)(o),i&&o.isSelfIntersecting&&(0,W.fn)(t)&&(o=(0,j.simplify)(o)),o}function ce(e,t,n){const i=t.mapToLocalMultiple(e),r=[],o={x:i[0].x,y:i[0].y},s=i[1].x,a=i[1].y,l=Math.round(s-o.x),c=Math.round(a-o.y),u=Math.max(Math.abs(l),Math.abs(c));if(n){const e={x:o.x+u,y:o.y+u},t={x:o.x-u,y:o.y-u};r.push(ee(e.x,t.y),ee(t.x,t.y),ee(t.x,e.y),ee(e.x,e.y))}else{const e={x:l>0?o.x+u:o.x-u,y:c>0?o.y+u:o.y-u};r.push(ee(o.x,o.y),ee(e.x,o.y),ee(e.x,e.y),ee(o.x,e.y))}return ue(le([r.map((e=>t.localToMap(e))).filter(P.Ru)],t.spatialReference,t.doUnnormalization,!0),r,t)}function ue(e,t,n){const i=de(t[3],t[2],n),r=de(t[1],t[2],n),o=de(t[0],t[1],n),s=de(t[0],t[3],n);return{geometry:e,midpoints:null!=i&&null!=r&&null!=o&&null!=s?{top:i,right:r,bottom:o,left:s}:null}}function de(e,t,n){pe[0]=e.x,pe[1]=e.y,pe[2]=0,fe[0]=t.x,fe[1]=t.y,fe[2]=0,(0,O.o)(pe,pe,fe,.5),he.x=pe[0],he.y=fe[1],he.z=fe[2];const i=n.localToMap(he);return null!=i?se(i,n.spatialReference):null}const he=ee(0,0,0),pe=(0,L.vt)(),fe=(0,L.vt)();function me(e,t,n,i){const r=t.mapToLocalMultiple(e);let o=null,s=null;if(n)o=r[0],s=r[1];else{const e=r[0],t=r[1],n=Math.round(t.x-e.x),i=Math.round(t.y-e.y),a=Math.max(Math.abs(n),Math.abs(i));o=ee(n>0?e.x+a/2:e.x-a/2,i>0?e.y+a/2:e.y-a/2),s=ee(Math.abs(n)>Math.abs(i)?o.x-a/2:o.x,Math.abs(n)>Math.abs(i)?o.y:o.y-a/2)}const a=t.localToMap(o),l=t.localToMap(s);if(null==a||null==l)return null;t.doUnnormalization&&(0,B.JM)([[a,l]],t.spatialReference);const c=se(a,t.spatialReference),u=se(l,t.spatialReference),d=(0,I.GA)(t.spatialReference);let h=0;if((0,W.fn)(t.spatialReference))h=d*(0,j.distance)(c,u,null);else{const e=o.x-s.x,t=o.y-s.y;h=d*Math.sqrt(e*e+t*t)*(i||1)}const p=new H({center:c,radius:h,radiusUnit:"meters",spatialReference:t.spatialReference});return{geometry:le(p.rings,p.spatialReference,!1),center:c,edge:u}}var ge=n(56275),ye=n(68945);function ve(e,t){switch(e){case"point":case"multipoint":return"point";case"polyline":return function(e){return(null!=e&&"polyline"===e.type&&e.paths.length?e.paths[0].length:0)<2?"polylineZeroVertices":"polylineOneVertex"}(t);case"polygon":return function(e){const t=null!=e&&"polygon"===e.type&&e.rings.length?e.rings[0].length:0;return t<3?"polylineZeroVertices":t<4?"polygonOneVertex":"polygonTwoVertices"}(t);default:return}}const _e=(0,L.vt)();var be=n(7768),xe=n(77664),we=n(90858);let Me=class extends we.w{constructor(e){super(e),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=ge.iT}get allFields(){return[]}};(0,o._)([(0,u.MZ)()],Me.prototype,"type",void 0),(0,o._)([(0,u.MZ)()],Me.prototype,"radius",void 0),(0,o._)([(0,u.MZ)()],Me.prototype,"xSize",void 0),(0,o._)([(0,u.MZ)()],Me.prototype,"ySize",void 0),(0,o._)([(0,u.MZ)()],Me.prototype,"area",void 0),(0,o._)([(0,u.MZ)()],Me.prototype,"allFields",null),Me=(0,o._)([(0,d.$)("esri.views.interactive.tooltip.infos.DrawCircleTooltipInfo")],Me);var Se=n(18063),Te=n(73919);let Ce=class extends((0,Te.B)(we.w)){constructor(e){super(e),this.type="draw-mesh",this.orientation=(0,Se.LJ)({lockable:!1}),this.scale=(0,Se.dy)({lockable:!1})}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,this.orientation,this.scale]}};(0,o._)([(0,u.MZ)()],Ce.prototype,"helpMessage",void 0),(0,o._)([(0,u.MZ)()],Ce.prototype,"allFields",null),Ce=(0,o._)([(0,d.$)("esri.views.interactive.tooltip.infos.DrawMeshTooltipInfo")],Ce);let ke=class extends((0,Te.B)(we.w)){constructor(e){super(e),this.type="draw-point"}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,o._)([(0,u.MZ)()],ke.prototype,"helpMessage",void 0),(0,o._)([(0,u.MZ)()],ke.prototype,"allFields",null),ke=(0,o._)([(0,d.$)("esri.views.interactive.tooltip.infos.DrawPointTooltipInfo")],ke);let $e=class extends((0,Te.B)(we.w)){constructor(e){super(e),this.type="draw-polygon",this.direction=(0,Se.Gk)(),this.distance=(0,Se.R0)({title:e=>e.messages.sketch.distance}),this.area=(0,Se.Am)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.area]}};(0,o._)([(0,u.MZ)()],$e.prototype,"xyMode",void 0),(0,o._)([(0,u.MZ)()],$e.prototype,"helpMessage",void 0),(0,o._)([(0,u.MZ)()],$e.prototype,"allFields",null),$e=(0,o._)([(0,d.$)("esri.views.interactive.tooltip.infos.DrawPolygonTooltipInfo")],$e);let Ee=class extends((0,Te.B)(we.w)){constructor(e){super(e),this.type="draw-polyline",this.direction=(0,Se.Gk)(),this.distance=(0,Se.R0)({title:e=>e.messages.sketch.distance}),this.totalLength=(0,Se.fr)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.totalLength]}};(0,o._)([(0,u.MZ)()],Ee.prototype,"helpMessage",void 0),(0,o._)([(0,u.MZ)()],Ee.prototype,"xyMode",void 0),(0,o._)([(0,u.MZ)()],Ee.prototype,"allFields",null),Ee=(0,o._)([(0,d.$)("esri.views.interactive.tooltip.infos.DrawPolylineTooltipInfo")],Ee);let Ae=class extends we.w{constructor(e){super(e),this.type="draw-rectangle",this.xSize=ge.r7,this.ySize=ge.r7,this.area=ge.iT}get allFields(){return[]}};(0,o._)([(0,u.MZ)()],Ae.prototype,"type",void 0),(0,o._)([(0,u.MZ)()],Ae.prototype,"xSize",void 0),(0,o._)([(0,u.MZ)()],Ae.prototype,"ySize",void 0),(0,o._)([(0,u.MZ)()],Ae.prototype,"area",void 0),(0,o._)([(0,u.MZ)()],Ae.prototype,"allFields",null),Ae=(0,o._)([(0,d.$)("esri.views.interactive.tooltip.infos.DrawRectangleTooltipInfo")],Ae);var Pe=n(99675),Re=n(70474),Ie=n(9862),Oe=n(46517);function Le(e){const{directionOptions:t,geometryType:n,sketchOptions:i,tooltipInfos:r}=e,o=t=>{const n=je(e).mode,i=r[t].elevation;"relative-to-ground"===n||"relative-to-scene"===n||"on-the-ground"===n?i.lock(We(e)):i.unlock()};switch(n){case"polygon":case"polyline":o(n),(e=>{if(t){const n=r[e].direction;n.committed=t.angle,n.unlockOnVertexPlacement=!1,i.values.directionMode=t.mode}})(n);break;case"point":case"mesh":o(n)}}function Ve(e){Ne(e)?.allFields.forEach((e=>{e.unlockOnVertexPlacement&&e.unlock()}))}function Ne({geometryType:e,graphic:t,tooltipInfos:n}){return"multipoint"===e||t?.geometry?.type!==Ze[e]?null:n[e]}const Ze={point:"point",mesh:"mesh",polyline:"polyline",polygon:"polygon",circle:"polygon",rectangle:"polygon"};function De(e,t,n){const{drawOperation:i,view:r,sketchOptions:o}=n,{cursorVertex:s}=i;if(e.sketchOptions=o,e.viewType=r.type,e.setLocationFromPoint(t,Be(n)),ze(e.elevation,n),!s)return void(i.constraints=void 0);const a=s;i.constraints={context:Ke(a,n),x:e.x.committed,y:e.y.committed,longitude:e.longitude.committed,latitude:e.latitude.committed,elevation:e.elevation.committed,distance:null,direction:null}}function Ge(e,t){const{drawOperation:n,sketchOptions:i,view:r}=t,{cursorVertex:o,lastVertex:s,secondToLastVertex:a}=n,l=i.values.effectiveDirectionMode;e.sketchOptions=i,e.viewType=r.type;const c=s&&o?(0,Ie.Kt)(s,o)??ge.r7:null;if(e.distance.actual=c,e.distance.readOnly=null==s,e.direction.actual=null,e.direction.readOnly=!0,s&&o&&("absolute"===l||a)){const t=(0,Pe.uR)(a,s,o,l);e.direction.actual=t??ge.n0,e.direction.readOnly=!1}e.setLocationFromPoint(o,Be(t)),ze(e.elevation,t);const u=function(e,{sketchOptions:t}){const n=t.tooltips.xyMode;return"auto"===n?e?"direction-distance":"coordinates":n}(s,t);e.xyMode=u,e.direction.visible="direction-distance"===u,e.distance.visible="direction-distance"===u,e.effectiveX.visible="coordinates"===u,e.effectiveY.visible="coordinates"===u;const d=o??s;n.constraints=d?{context:Ke(d,t),x:e.x.committed,y:e.y.committed,longitude:e.longitude.committed,latitude:e.latitude.committed,elevation:e.elevation.committed,distance:e.distance.committed,direction:e.direction.committed}:void 0}function ze(e,t){const{drawOperation:n}=t,i=n?.cursorVertex??n?.lastVertex;e.actual=(0,Oe.Of)(i)??We(t),e.visible=n.hasZ,e.readOnly=!1,e.showAsZ=!0}function Fe(e){const t=e.createOperationGeometry?.full;return"polygon"!==t?.type?ge.iT:(0,Re.n)(t)??ge.iT}function Ue(e){const t=e.createOperationGeometry?.rectangle?.midpoints;return(null!=t?(0,Ie.Kt)(t.left,t.right):null)??ge.r7}function He(e){const t=e.createOperationGeometry?.rectangle?.midpoints;return(null!=t?(0,Ie.Kt)(t.top,t.bottom):null)??ge.r7}function je(e){return e.drawOperation.elevationInfo??ye.qt}function Be(e){return e.drawOperation.coordinateHelper.spatialReference}function We(e){const t=(0,I.G9)(Be(e));return(0,ge.d_)(e.defaultZ*t,"meters")}function Ke(e,t){return(0,be.hj)(e,t.view,Be(t),je(t),t.drawOperation.coordinateHelper.hasZ(),t.sketchOptions.values.effectiveDirectionMode)}var qe=n(83202),Ye=n(37102),Xe=n(30329),Qe=n(25638);let Je=class extends(M.A.EventedMixin(qe.g)){constructor(e){super(e),this._graphic=null,this._coordinateFormatterLoadTask=null,this._createOperationGeometry=null,this.defaultZ=0,this.directionOptions=null,this.geometryType=null,this.hasZ=!0,this.geometryToPlace=null,this.snappingManager=null,this.snapToScene=!1,this.sketchOptions=new Ye.A}initialize(){const{view:e}=this;this.internalGraphicsLayer=new k.default({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer);const t=this.drawOperation=this.makeDrawOperation();this.tooltipInfos=function(e,t){return{point:new ke({sketchOptions:t,viewType:e}),polyline:new Ee({sketchOptions:t,viewType:e}),polygon:new $e({sketchOptions:t,viewType:e}),mesh:new Ce({sketchOptions:t,viewType:e}),rectangle:new Ae({sketchOptions:t}),circle:new Me({sketchOptions:t})}}(e.type,this.sketchOptions);const n=this.tooltip=new Xe.m({view:e});Le(this._tooltipsContext),this._coordinateFormatterLoadTask=(0,w.UT)((()=>(0,C.Hh)())),this.addHandles([t.on("vertex-add",(e=>this.onVertexAdd(e))),t.on("vertex-remove",(e=>this.onVertexRemove(e))),t.on("vertex-update",(e=>this.onVertexUpdate(e))),t.on("cursor-update",(e=>this.onCursorUpdate(e))),t.on("cursor-remove",(()=>this._updateGraphic())),t.on("complete",(e=>this.onComplete(e))),this._coordinateFormatterLoadTask,n.on("paste",(e=>(0,xe.HA)(e,this.activeTooltipInfo))),(0,c.watch)((()=>this.cursor),(e=>{t.cursor=e}),c.pc),(0,Qe.fm)((()=>{const{activeTooltipInfo:e,sketchOptions:t}=this;(function(e,t){switch(e?.type){case"draw-point":!function(e,t){const n=t.graphic?.geometry;"point"===n?.type&&(De(e,n,t),e.helpMessage=ve("point",n))}(e,t);break;case"draw-polyline":!function(e,t){const{createOperationGeometry:n,drawOperation:i}=t,r=null!=n?n.full:null;"polyline"===r?.type&&(Ge(e,t),e.totalLength.actual=i.lastVertex?(0,Ie.ob)(r)??ge.r7:null,e.helpMessage=ve("polyline",r))}(e,t);break;case"draw-polygon":!function(e,t){const{createOperationGeometry:n,drawOperation:i}=t,r=null!=n?n.full:null;"polygon"===r?.type&&(Ge(e,t),e.area.actual=i.lastVertex?(0,Re.n)(r)??ge.iT:null,e.helpMessage=ve("polygon",r))}(e,t);break;case"draw-rectangle":!function(e,t){e.sketchOptions=t.sketchOptions,e.xSize=Ue(t),e.ySize=He(t),e.area=Fe(t)}(e,t);break;case"draw-circle":!function(e,t){const{forceUniformSize:n,sketchOptions:i}=t;e.sketchOptions=i,e.radius=n?function({createOperationGeometry:e}){return(null!=e?.circle?.center&&null!=e.circle.edge?(0,Ie.Kt)(e.circle.center,e.circle.edge):null)??ge.r7}(t):null,e.xSize=n?null:Ue(t),e.ySize=n?null:He(t),e.area=Fe(t)}(e,t);break;case"draw-mesh":!function(e,t){const{graphic:n,view:i}=t,r=n?.geometry;"3d"===i.type&&"mesh"===r?.type&&(De(e,r.origin,t),(0,xe.Ue)(e,r),e.helpMessage=function(e,t){const n=e?.geometry;if(!e||"mesh"!==n?.type||!t)return;const{renderCoordsHelper:i,elevationProvider:r}=t,{camera:o}=t.state,{extent:s}=n,{center:a,spatialReference:l}=s,c=(0,I.GA)(l),u=(0,I.G9)(l),d=(0,I.GA)(i.spatialReference),h=s.width*c,p=s.height*u,f=(s.zmax??0)*u,m=f-(s.zmin??0)*u,g=Math.max(h,p,m)/d,{x:y,y:v}=a,_=a.z??0;(0,O.s)(_e,y,v,_),i.toRenderCoords(_e,l,_e);const b=g/o.computeScreenPixelSizeAt(_e);if(b>1*o.width)return"meshTooClose";if(b<20)return"meshTooFar";const x=(0,ye.bh)(e),{absoluteZ:w}=(0,ye.Q5)(y,v,f,l,t,x);return w<(r.getElevation(y,v,_,l,"ground")??0)*u+.1*m?"meshUnderground":"mesh"}(n,i))}(e,t)}})(e,this._tooltipsContext),n.info=t.tooltips.effectiveEnabled?e:null})),(0,Qe.fm)((()=>{t.constraintZ=function(e){const{geometryType:t,tooltipInfos:n}=e;switch(t){case"point":case"mesh":case"polyline":case"polygon":{const i=n[t].elevation.committed;if(!i)return;return(0,ge.l3)(i,"meters")/(0,I.G9)(Be(e))}default:return}}(this._tooltipsContext)}))]),this.finishToolCreation()}destroy(){this.drawOperation=(0,T.pR)(this.drawOperation),this.tooltip=(0,T.pR)(this.tooltip),this._destroyAllVisualizations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,T.pR)(this.internalGraphicsLayer),this._set("view",null)}get _drawSpatialReference(){return this.drawOperation.coordinateHelper.spatialReference}get _tooltipsContext(){return{createOperationGeometry:this._createOperationGeometry,defaultZ:this.defaultZ,directionOptions:this.directionOptions,drawOperation:this.drawOperation,forceUniformSize:this.forceUniformSize,geometryType:this.geometryType,graphic:this.graphic,sketchOptions:this.sketchOptions,tooltipInfos:this.tooltipInfos,view:this.view}}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(e){this._set("centered",e),this._updateGraphic()}get cursor(){return this._get("cursor")}set cursor(e){this._set("cursor",e)}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set forceUniformSize(e){this._set("forceUniformSize",e),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(e){this._set("graphicSymbol",e),null!=this._graphic&&(this._graphic.symbol=e)}set mode(e){const t=this.drawOperation;t&&(t.drawingMode=e),this._set("mode",e)}get updating(){return this.drawOperation?.updating??!1}get undoRedo(){const{view:{type:e,map:t}}=this;return"2d"===e&&t&&"undoRedo"in t&&t.undoRedo instanceof x?t.undoRedo:null}set undoRedo(e){this._override("undoRedo",e)}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||(0,xe.wG)(e,this.tooltip)||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo(),0===this.drawOperation.numCommittedVertices&&Le(this._tooltipsContext)}_destroyAllVisualizations(){this.removeHandles(tt.outline),this.removeHandles(tt.regularVertices),this.removeHandles(tt.activeVertex),this.removeHandles(tt.activeEdge),this.removeHandles(et)}_createOrUpdateGraphic(e){if(null!=this._graphic)return this.updateGraphicGeometry(e),this._graphic;const t=new s.default({...this.graphicProperties,symbol:this.graphicSymbol});return this._graphic=t,this.updateGraphicGeometry(e),this.internalGraphicsLayer.add(t),this.addHandles(this.initializeGraphic(t)),this.notifyChange("graphic"),this.addHandles((0,S.hA)((()=>{this.internalGraphicsLayer.remove(t),this._graphic===t&&(this._graphic=null)})),et),t}updateGraphicGeometry(e){this._graphic.geometry=e}_getCreateOperationGeometry(e={operationComplete:!1}){if(null==this.drawOperation)return;const{coordinateHelper:t,view:n,visualizationCursorVertex:i,lastVertex:r,committedVertices:o,geometryIncludingUncommittedVertices:s,numCommittedVertices:a}=this.drawOperation;if(!(a>0||null!=i))return;const l=e.operationComplete?o:s,c=l.length,u=null!=i?t.pointToArray(i):null,d=this._drawSpatialReference,h="3d"===n.type&&"global"===n.viewingMode,p=new E;p.committedVertices=o,p.cursorVertex=u;const{geometryType:f}=this;switch(f){case"point":case"mesh":p.full=t.arrayToPoint(l[0]);break;case"multipoint":p.full=c>0?function(e,t){return new re.A({points:e,spatialReference:t})}(l,d):null;break;case"polyline":case"polygon":c>0&&(p.full="polygon"===f?le([l],d,h,!0):ae([l],d,h),p.cursorEdge=null!=u&&r&&!(0,$.CI)(i,r)?ae([[u,t.pointToArray(r)]],d,h):null,p.outline=c>1?p.full:null);break;case"circle":case"rectangle":{if(p.committedVertices=p.cursorVertex=null,!c)break;const t=function(e,t){if("2d"===e.type)return new ne(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){const n=t.length>2?new N.default({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new N.default({x:t[0],y:t[1],spatialReference:e.spatialReference});return new ie(e,n)}return null}(n,l[0]),i=l[0],r=t.makeMapPoint(i[0]+it*n.resolution,i[1]);"circle"===f?1===c&&e.operationComplete?p.circle=me([i,r],t,!0):2===c&&(this.forceUniformSize?p.circle=me(l,t,this.centered):p.rectangle=function(e,t,n){const i=t.mapToLocalMultiple(e),r=i[0],o=i[1],s=Math.round(o.x-r.x),a=Math.round(o.y-r.y),l=ee(n?r.x:r.x+s/2,n?r.y:r.y+a/2),c=n?s:s/2,u=n?a:a/2,d=[],h=2*Math.PI/60;function p(e){const t=Math.cos(e),n=Math.sin(e);return ee(c*t+l.x,u*n+l.y)}for(let e=0;e<60;e++)d.push(p(e*h));d.push(d[0]);const{spatialReference:f,doUnnormalization:m}=t,g=le([d.map((e=>t.localToMap(e))).filter(P.Ru)],f,m,!1),y=t.localToMap(p(Math.PI/2)),v=t.localToMap(p(0)),_=t.localToMap(p(-Math.PI/2)),b=t.localToMap(p(Math.PI));return{geometry:g,midpoints:null!=y&&null!=v&&null!=_&&null!=b?{top:se(y,f),right:se(v,f),bottom:se(_,f),left:se(b,f)}:null}}(l,t,this.centered)):1===c&&e.operationComplete?p.rectangle=ce([i,r],t,!0):2===c&&(p.rectangle=this.forceUniformSize?ce(l,t,this.centered):function(e,t,n){let i=t.mapToLocalMultiple(e);if(1===i.length){const e=48,t=i[0];i=[ee(t.x-e,t.y+e),ee(t.x+e,t.y-e),ee(t.x+e,t.y-e),ee(t.x-e,t.y+e)]}const r=[],o={x:i[0].x,y:i[0].y},s={x:i[1].x,y:i[1].y};if(n){const e=Math.round(s.x-o.x),t=Math.round(s.y-o.y);r.push(ee(o.x-e,o.y-t),ee(s.x,o.y-t),ee(s.x,s.y),ee(o.x-e,s.y))}else r.push(ee(o.x,o.y),ee(s.x,o.y),ee(s.x,s.y),ee(o.x,s.y));return ue(le([r.map((e=>t.localToMap(e))).filter(P.Ru)],t.spatialReference,t.doUnnormalization,!0),r,t)}(l,t,this.centered)),p.full=null!=p.circle?p.circle.geometry:p.rectangle?.geometry,p.outline="polygon"===p.full?.type?p.full:null;break}default:return null}return p}initializeGraphic(e){return(0,S.hA)()}onComplete(e){if(!this.drawOperation)return;this._updateGraphic();let t=null;if(this.drawOperation.isCompleted){const e=this._getCreateOperationGeometry({operationComplete:!0});null!=e&&(t=this._createOrUpdateGraphic(e.full))}this._createOperationGeometry=null,this.emit("complete",{graphic:t,...e})}onCursorUpdate(e){this._updateGraphic(),this.emit("cursor-update",e)}onDeactivate(){const{drawOperation:e}=this;e&&(e.isCompleted||e.cancel())}onOutlineChanged(e){return(0,S.hA)()}onCursorEdgeChanged(e){return(0,S.hA)()}onVertexAdd(e){Ve(this._tooltipsContext),this._updateGraphic(),function(e,t){const{drawOperation:n,view:i}=t,r=Ne(t),o=je(t);if("2d"===i.type||!e||"absolute-height"!==o.mode||1!==n?.numCommittedVertices||!r||"draw-polyline"!==r.type&&"draw-polygon"!==r.type||r.elevation.locked)return;const[s,a,l]=e,c=function(e,t,n,i,r){const{view:o,drawOperation:s}=r;if("3d"!==o.type||!s)return;n??=0;const a=Be(r),l=je(r),c=(0,ye.Fo)(o,e,t,n,a,l,i);return(0,Oe.Qc)(c,a)??We(r)}(s,a,l,o,t);null!=c&&r.elevation.lock(c)}(e.vertices.at(0)?.coordinates,this._tooltipsContext),this.emit("vertex-add",e)}onVertexRemove(e){Ve(this._tooltipsContext),this._updateGraphic(),this.emit("vertex-remove",e)}onVertexUpdate(e){this._updateGraphic(),this.emit("vertex-update",e)}_updateGraphic(){const e=this._getCreateOperationGeometry();this._createOperationGeometry=e,null!=e?(null!=e.cursorEdge?this.addHandles(this.onCursorEdgeChanged(e.cursorEdge),tt.activeEdge):this.removeHandles(tt.activeEdge),null!=e.outline?this.addHandles(this.onOutlineChanged(e.outline),tt.outline):this.removeHandles(tt.outline),null!=e.committedVertices?this.addHandles(this.onRegularVerticesChanged(e.committedVertices),tt.regularVertices):this.removeHandles(tt.regularVertices),null!=e.cursorVertex?this.addHandles(this.onActiveVertexChanged(e.cursorVertex),tt.activeVertex):this.removeHandles(tt.activeVertex),null!=e.full?this._createOrUpdateGraphic(e.full):this.removeHandles(et)):this._destroyAllVisualizations()}get activeTooltipInfo(){return this._coordinateFormatterLoadTask?.finished?Ne(this._tooltipsContext):null}};(0,o._)([(0,u.MZ)()],Je.prototype,"_coordinateFormatterLoadTask",void 0),(0,o._)([(0,u.MZ)()],Je.prototype,"_createOperationGeometry",void 0),(0,o._)([(0,u.MZ)()],Je.prototype,"_tooltipsContext",null),(0,o._)([(0,u.MZ)({value:!0})],Je.prototype,"centered",null),(0,o._)([(0,u.MZ)()],Je.prototype,"cursor",null),(0,o._)([(0,u.MZ)({nonNullable:!0})],Je.prototype,"defaultZ",void 0),(0,o._)([(0,u.MZ)({constructOnly:!0})],Je.prototype,"directionOptions",void 0),(0,o._)([(0,u.MZ)()],Je.prototype,"drawOperation",void 0),(0,o._)([(0,u.MZ)({value:!0})],Je.prototype,"enabled",null),(0,o._)([(0,u.MZ)({value:!0})],Je.prototype,"forceUniformSize",null),(0,o._)([(0,u.MZ)({constructOnly:!0})],Je.prototype,"geometryType",void 0),(0,o._)([(0,u.MZ)()],Je.prototype,"graphic",null),(0,o._)([(0,u.MZ)({constructOnly:!0})],Je.prototype,"graphicProperties",void 0),(0,o._)([(0,u.MZ)()],Je.prototype,"graphicSymbol",null),(0,o._)([(0,u.MZ)({constructOnly:!0})],Je.prototype,"hasZ",void 0),(0,o._)([(0,u.MZ)({constructOnly:!0})],Je.prototype,"geometryToPlace",void 0),(0,o._)([(0,u.MZ)()],Je.prototype,"mode",null),(0,o._)([(0,u.MZ)()],Je.prototype,"snappingManager",void 0),(0,o._)([(0,u.MZ)()],Je.prototype,"snapToScene",void 0),(0,o._)([(0,u.MZ)()],Je.prototype,"tooltip",void 0),(0,o._)([(0,u.MZ)()],Je.prototype,"tooltipInfos",void 0),(0,o._)([(0,u.MZ)({constructOnly:!0,type:Ye.A})],Je.prototype,"sketchOptions",void 0),(0,o._)([(0,u.MZ)()],Je.prototype,"updating",null),(0,o._)([(0,u.MZ)({constructOnly:!0,nonNullable:!0})],Je.prototype,"view",void 0),(0,o._)([(0,u.MZ)({constructOnly:!0})],Je.prototype,"undoRedo",null),(0,o._)([(0,u.MZ)()],Je.prototype,"activeTooltipInfo",null),Je=(0,o._)([(0,d.$)("esri.views.draw.DrawGraphicTool")],Je);const et=Symbol("create-operation-graphic"),tt={outline:Symbol("outline-visual"),regularVertices:Symbol("regular-vertices-visual"),activeVertex:Symbol("active-vertex-visual"),activeEdge:Symbol("active-edge-visual")};function nt(e){switch(e){case"point":case"polyline":case"polygon":case"multipoint":return e;case"circle":case"rectangle":return"segment";case"mesh":return"point"}}const it=48},85499:function(e,t,n){"use strict";n.d(t,{O0:function(){return V}});var i=n(53804),r=n(83525),o=n(48996),s=n(21609),a=n(95929),l=n(7213),c=n(60539),u=n(85876),d=n(28181),h=n(13520),p=n(23502),f=(n(58941),n(40633),n(65953)),m=n(72952),g=n(20248),y=n(42413),v=n(68945),_=n(65420);const b="click";class x{constructor({consumesClicks:e,grabbableForEvent:t}){this.events=new o.A,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.consumesClicks=e,this.grabbableForEvent=t}destroy(){}intersectionDistance(e,t){return 0}attach(){}detach(){}onElevationChange(){}onViewChange(){}}var w=n(50517),M=n(2831),S=n(2623),T=n(7819),C=n(92100),k=n(7768),$=n(50822),E=n(58144),A=n(45908),P=(n(13798),n(48961));let R=class extends r.A{constructor(e){super(e),this.constrainResult=e=>e,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=(0,c.sg)((async(e,t,n,i)=>{const r=this._frameTask;if(null==r)return;const o=await r.schedule((()=>t.snap({...e,context:n,signal:i})),i);o.valid&&await r.schedule((()=>{this.stagedPoint=o.apply(),e!==this._snapPoints&&null!=this._snapPoints&&(this.stagedPoint=t.update({...this._snapPoints,context:n}))}),i)}))}get stagedPoint(){return this._stagedPoint}set stagedPoint(e){this._stagedPoint=this.constrainResult(e)}initialize(){const e="3d"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=null!=e?e.registerTask(P.W6.SNAPPING):P.nu}destroy(){this._abortController=(0,a.DC)(this._abortController),this._frameTask=(0,a.xt)(this._frameTask)}update(e,t,n){this._snapPoints=e;const{point:i,scenePoint:r}=e,o=t.update({point:i,scenePoint:r,context:n});return this.stagedPoint=o,o}async snap(e,t,n){const{point:i,scenePoint:r}=e;return this.stagedPoint=t.update({point:i,scenePoint:r,context:n}),this._snapPoints=e,null==this._abortController&&(this._abortController=new AbortController),this._snap(e,t,n,this._abortController.signal)}async snapAgainNearPreviousMapPoint(e,t){null!=this._snapPoints&&await this.snap(this._snapPoints,e,t)}abort(){this._abortController=(0,a.DC)(this._abortController),this._snapPoints=null}};(0,i._)([(0,p.MZ)({constructOnly:!0})],R.prototype,"view",void 0),(0,i._)([(0,p.MZ)()],R.prototype,"stagedPoint",null),(0,i._)([(0,p.MZ)()],R.prototype,"constrainResult",void 0),(0,i._)([(0,p.MZ)()],R.prototype,"_stagedPoint",void 0),R=(0,i._)([(0,f.$)("esri.views.interactive.snapping.SnappingOperation")],R);var I=n(44425);const O=Symbol(),L=Symbol();let V=class extends(o.A.EventedMixin(r.A)){constructor(e){super(e),this._createOperationCompleted=!1,this._hideDefaultCursor=!1,this._pointerDownStates=new u.A,this._stagedScreenPoint=null,this._stagedPointerType=null,this._updatingHandles=new g.U,this._stagedPointerId=null,this.constraintsEnabled=!1,this.constraints=void 0,this._getPointConstraint=(0,l.B)(k.cx),this._getPolylineOrPolygonConstraint=(0,l.B)(k.lJ),this.constraintZ=null,this.defaultZ=null,this.isDraped=!0,this.labelOptions=new $.A,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.firstVertex=null,this.lastVertex=null,this.secondToLastVertex=null,null==e.elevationInfo&&(this.elevationInfo=(0,v.bK)(!!e.hasZ))}initialize(){const{geometryType:e,view:t}=this,n=t.spatialReference,i="viewingMode"in t.state?t.state.viewingMode:_.RT.Local,r="segment"===e||"multipoint"===e?"polyline":e;this.coordinateHelper=(0,w.BV)(this.hasZ,this.hasM,n),this._editGeometryOperations=new T.p(new S.ZE(r,this.coordinateHelper),i),this._snappingOperation=new R({view:t}),this.addHandles([(0,d.watch)((()=>({stagedPoint:this._snappingOperation.stagedPoint,constraint:this._constraint})),(({stagedPoint:e,constraint:t},n)=>{const{snappingOptions:i}=this;if(i&&(i.forceDisabled=null!=t&&(0,C.fT)(t)),null!=n&&e===n.stagedPoint&&t!==n.constraint)return this._onKeyboardBasedChange();this._processCursor(e??this._screenToMap(this._stagedScreenPoint))}),{equals:(e,t)=>e.stagedPoint===t.stagedPoint&&(0,a.CM)(e.constraint,t.constraint)}),(0,d.watch)((()=>this.view.viewpoint),((e,t)=>{e&&t&&(0,m.Ui)(e,t)&&this._onKeyboardBasedChange()}))]),this._activeComponent=new S.uA(n,i),this._editGeometryOperations.data.components.push(this._activeComponent);const o=this.segmentLabels;null!=o&&(o.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles((0,d.watch)((()=>this.labelOptions.enabled),(e=>{o.visible=e}),d.pc))),this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(e=>{const t=e.vertices.map((e=>({componentIndex:0,vertexIndex:e.index,coordinates:this.coordinateHelper.vectorToArray(e.pos)}))),n=t.map((e=>e.coordinates)),i=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getFirstVertex()?.pos)??null;(0,y.CI)(i,this.firstVertex)||(this.firstVertex=i);const r=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getLastVertex()?.pos)??null;(0,y.CI)(r,this.lastVertex)||(this.lastVertex=r);const o=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.edges.at(-1)?.leftVertex?.pos)??null;switch((0,y.CI)(o,this.secondToLastVertex)||(this.secondToLastVertex=o),this._processCursor(this.cursorVertex),e.type){case"vertex-add":this.emit(e.type,{...e,added:n,vertices:t});break;case"vertex-update":this.emit(e.type,{...e,updated:n,vertices:t});break;case"vertex-remove":this.emit(e.type,{...e,removed:n,vertices:t})}})));const s=this._manipulator=new x({consumesClicks:!1,grabbableForEvent:e=>"click"!==this.drawingMode||"touch"===e.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size});this.manipulators.add(s),s.grabbable="point"!==e,this.addHandles([s.events.on("immediate-click",(e=>this._onImmediateClick(e))),s.events.on("immediate-double-click",(e=>this._onImmediateDoubleClick(e))),(0,d.watch)((()=>this.drawingMode),(()=>{this.removeHandles(O),this.addHandles(this._createManipulatorDragPipeline(s),O)}),d.pc),(0,d.watch)((()=>({effectiveCursor:this.effectiveCursor})),(({effectiveCursor:e})=>{s.cursor=e}),d.pc)]),(0,I.BY)(this,(()=>{const e=this.view.inputManager.latestPointerType??"mouse",t=this._getSnappingContext(e);if(null!=this.snappingManager){const e=this._snappingOperation.snapAgainNearPreviousMapPoint(this.snappingManager,t);this._updatingHandles.addPromise((0,c.QZ)(e))}}))}destroy(){(0,a.pR)(this.segmentLabels),(0,a.pR)(this._snappingOperation),this._editGeometryOperations=(0,a.pR)(this._editGeometryOperations),this._updatingHandles.destroy()}get _isDragging(){const{_stagedPointerId:e,_manipulator:t}=this;return null!=e&&this._pointerDownStates.has(e)||t.grabbing||!t.interactive}get _snappingEnabled(){return null!=this.snappingManager&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const e=this._updateAndGetEffectiveDrawSurface();return"3d"===this.view.type&&this.drawSurface!==e}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((e=>this.coordinateHelper.vectorToArray(e.pos)))}get _constraint(){const{constraints:e,constraintsEnabled:t}=this;if(e&&t)switch(this.geometryType){case"point":return this._getPointConstraint(e);case"polygon":case"polyline":return this._getPolylineOrPolygonConstraint(this.lastVertex,this.secondToLastVertex,e)}}set drawingMode(e){this._set("drawingMode",e??b)}get effectiveCursor(){return this.loading?"progress":this._hideDefaultCursor?null:this.cursor||"crosshair"}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get snappingOptions(){return null!=this.snappingManager?this.snappingManager.options:null}get cursorVertex(){return this._get("cursorVertex")}get visualizationCursorVertex(){return"mouse"===this._stagedPointerType?this.cursorVertex:null}get committableVertex(){const{cursorVertex:e,lastVertex:t,firstVertex:n,geometryType:i}=this;return"polygon"===i&&(0,y.fk)(e,n)||(0,y.fk)(e,t)?null:e}get updating(){return this._updatingHandles.updating}get geometryIncludingUncommittedVertices(){const{committedVertices:e,committableVertex:t,coordinateHelper:n}=this,i=e.slice();return null!=t&&i.push(n.pointToArray(t)),i}cancel(){this.complete({aborted:!0})}commitStagedVertex(){this._snappingOperation.abort();const{committableVertex:e}=this;null!=e&&this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}complete(e){const t=e?.aborted||!1;this._snappingOperation.abort(),this.snappingManager?.doneSnapping();const{geometryType:n,numCommittedVertices:i}=this,r="multipoint"===n&&0===i||"polyline"===n&&i<2||"polygon"===n&&i<3;"segment"!==n&&"point"!==n||this.commitStagedVertex(),this._createOperationCompleted=!r,(this.isCompleted||t)&&(this._stagedScreenPoint=null,this._stagedPointerId=null,this._stagedPointerType=null,this._processCursor(null),this.emit("complete",{vertices:this.committedVertices.map(((e,t)=>({componentIndex:0,vertexIndex:t,coordinates:e}))),aborted:t,type:"complete"}))}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){null!=this.snappingManager&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_processCursor(e){const t=(0,s.o8)(this.cursorVertex),n=(0,s.o8)(e),i=n&&(this._updateAndGetEffectiveDrawSurface()?.constrainZ(n)??n),r=this._snapToClosingVertex(i),o=this._applyConstraints(r);(0,y.fk)(t,o)||(this._set("cursorVertex",o),this.segmentLabels?.set("stagedVertex",null!=o?this.coordinateHelper.pointToVector(o):null),null==o||"mouse"!==this._stagedPointerType?this.emit("cursor-remove"):this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(o)}],operation:"apply",type:"vertex-update"}))}_snapToClosingVertex(e){if(null==e||this._isDragging||"polygon"!==this.geometryType||this.numCommittedVertices<=2)return e;const t=this._mapToScreen(e);if(!t)return e;const n=this._activeComponent;return this._vertexWithinPointerDistance(n.vertices[0].pos,t)?this.firstVertex:this._vertexWithinPointerDistance(n.vertices.at(-1).pos,t)?this.lastVertex:e}_createManipulatorDragPipeline(e){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return(0,M.Xt)(e,((e,t,n,i)=>{const r="touch"===i&&this._snappingEnabled;if(this.isCompleted||!r)return;const{snappingStep:o,cancelSnapping:s}=(0,A.L)({predicate:()=>r,snappingManager:this.snappingManager,snappingContext:new E.e({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,feature:this.graphic,pointer:i,visualizer:this.snappingVisualizer,drawConstraints:this.constraints}),updatingHandles:this._updatingHandles,useZ:!this._requiresScenePoint});n=n.next((e=>(r&&null!=this.snappingManager&&this.snappingManager.doneSnapping(),e))).next(s),t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this._processCursor(e.mapStart),("segment"===this.geometryType||r&&!this.numCommittedVertices)&&this.commitStagedVertex()),e))).next((0,M.pg)(this.view,this.elevationInfo)).next(...o).next((e=>(r&&(this._processCursor(e.mapEnd),"end"===e.action&&this.commitStagedVertex()),e))).next((e=>("end"===e.action&&("mouse"!==this._stagedPointerType&&this._snappingOperation.abort(),"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),e)))}))}_createManipulatorDragPipelineFreehand(e){return(0,M.Xt)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this._snappingOperation.abort(),null==this.committableVertex&&this._processCursor(e.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this._processCursor(e.mapEnd),"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return e}))}))}_createManipulatorDragPipelineHybrid(e){return(0,M.Xt)(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this._snappingOperation.abort(),this.addHandles(this._editGeometryOperations.createUndoGroup(),L),this._processCursor(e.mapStart),this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this._processCursor(e.mapEnd),"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"mouse"!==this._stagedPointerType&&this._snappingOperation.abort(),this.removeHandles(L),"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return e}))}))}get _drawAtFixedElevation(){const{constraintsEnabled:e,constraintZ:t,geometryType:n,numCommittedVertices:i}=this;return e?null!=t||"segment"===n&&i>0:("segment"===n||"polygon"===n)&&i>0}_updateAndGetEffectiveDrawSurface(){const{constraintsEnabled:e,coordinateHelper:t,drawSurface:n,elevationDrawSurface:i,snapToSceneEnabled:r}=this;if(null==i)return n;if(!this.hasZ)return i.defaultZ=null,i;const o=this.elevationInfo?.mode;let s=this.defaultZ,a=e||"absolute-height"===o;return null!=r&&(a=r),"on-the-ground"===o&&(a=!1),this._drawAtFixedElevation&&(s=(e?this.constraintZ:null)??t.getZ(this._activeComponent.vertices[0].pos),a=!1),a?n:(i.defaultZ=s,i)}_mapToScreen(e){return this._updateAndGetEffectiveDrawSurface()?.mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&this._processCursor(e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(!("mouse"===e.pointerType&&2===e.button||this._manipulator.dragging))try{const{drawingMode:t,geometryType:n}=this;this._stagedPointerType=e.pointerType,this._stagedScreenPoint=e.screenPoint;const i=this._screenToMap(e.screenPoint);if(null==i)return;if(null==i||"freehand"===t&&"point"!==n)return;if(this._snappingEnabled&&null!=this.cursorVertex||this._processCursor(i),null==this.committableVertex)return void this.complete();this.commitStagedVertex(),"mouse"!==e.pointerType&&this._processCursor(null),("freehand"===t||"point"===n||"segment"===n&&2===this.numCommittedVertices||"segment"===n&&"hybrid"===t&&1===this.numCommittedVertices)&&this.complete()}finally{e.stopPropagation()}}_onImmediateDoubleClick(e){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),e.stopPropagation())}_onPointerMove(e){const t=(0,h.tc)(e.x,e.y);this._stagedScreenPoint=t,this._stagedPointerType=e.pointerType,this._stagedPointerId=e.pointerId,this._isDragging?this._snappingOperation.abort():(e.stopPropagation(),this._processCursorMovementRelativeToSurface(t,e.pointerType))}_onKeyboardBasedChange(){"mouse"===this._stagedPointerType&&this._stagedScreenPoint&&null!=this._stagedPointerId&&!this._isDragging?this._processCursorMovementRelativeToSurface(this._stagedScreenPoint,this._stagedPointerType):this._snappingOperation.abort()}_processCursorMovementRelativeToSurface(e,t){const n=this._snappingOperation,i=this._screenToMap(e),r=this._requiresScenePoint?this.drawSurface?.screenToMap(e):null;if(null==i)return this._hideDefaultCursor=!0,this._processCursor(null),void n.abort();this._hideDefaultCursor=!1;const o=this.snappingManager;if(null==o)return this._processCursor(i),void n.abort();const s=this._getSnappingContext(t);this._updatingHandles.addPromise((0,c.QZ)(n.snap({point:i,scenePoint:r},o,s)))}_applyConstraints(e){const{_constraint:t,constraints:n}=this;if(!e||!n||!t)return e;const{context:i}=n,r=(0,k.dz)(e,i),o=r?t.closestTo(r):void 0;if(!o)return e;const s=(0,k.tC)(o,e,i),a="2d"===this.view.type||"absolute-height"!==i.elevationInfo.mode;return null!=s&&a&&null!=this.constraintZ&&this.hasZ&&(s.z=this.constraintZ),s}_screenToMap(e){return e?this._updateAndGetEffectiveDrawSurface()?.screenToMap(e):null}_screenToMapDragEventStep(){let e=null;return t=>{if("start"===t.action&&(e=this._screenToMap(t.screenStart)),null==e)return null;const n=this._screenToMap(t.screenEnd);return null!=n?{...t,mapStart:e,mapEnd:n}:null}}_vertexWithinPointerDistance(e,t){const n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return null!=n&&function(e,t,n){const i=e.x-t.x,r=e.y-t.y;return i*i+r*r<=25}(n,t)}_getSnappingContext(e){const t=this._drawAtFixedElevation?this.elevationDrawSurface?.defaultZ:null;return new E.e({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e,feature:this.graphic,visualizer:this.snappingVisualizer,selfSnappingZ:null!=t?{value:t,elevationInfo:this.elevationInfo}:null,drawConstraints:this.constraints})}};(0,i._)([(0,p.MZ)()],V.prototype,"_hideDefaultCursor",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"_stagedPointerId",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"_isDragging",null),(0,i._)([(0,p.MZ)()],V.prototype,"_snappingOperation",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"_snappingEnabled",null),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"graphic",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"constraintsEnabled",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"constraints",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"_constraint",null),(0,i._)([(0,p.MZ)()],V.prototype,"constraintZ",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"defaultZ",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"isDraped",void 0),(0,i._)([(0,p.MZ)({value:b})],V.prototype,"drawingMode",null),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"elevationDrawSurface",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"elevationInfo",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0,type:$.A})],V.prototype,"labelOptions",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"geometryType",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"hasM",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"hasZ",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"cursor",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"effectiveCursor",null),(0,i._)([(0,p.MZ)()],V.prototype,"loading",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"manipulators",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"drawSurface",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"segmentLabels",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"snappingManager",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"snappingVisualizer",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"snapToSceneEnabled",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],V.prototype,"cursorVertex",null),(0,i._)([(0,p.MZ)({readOnly:!0})],V.prototype,"visualizationCursorVertex",null),(0,i._)([(0,p.MZ)()],V.prototype,"committableVertex",null),(0,i._)([(0,p.MZ)()],V.prototype,"firstVertex",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"lastVertex",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"secondToLastVertex",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"updating",null),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"view",void 0),V=(0,i._)([(0,f.$)("esri.views.draw.DrawOperation")],V)},99113:function(e,t,n){"use strict";n.d(t,{IX:function(){return u},rT:function(){return c},uF:function(){return d}}),n(50917);var i=n(13520),r=n(46460),o=n(45328),s=n(68945),a=n(57165),l=n(45532);class c{constructor(e,t,n,i=null){this._elevationInfo=e,this.defaultZ=t,this._view=n,this._excludeGraphics=i}screenToMap(e){const{defaultZ:t,_view:n}=this,r=n.sceneIntersectionHelper.intersectElevationFromScreen((0,i.gs)(e.x,e.y),this._elevationInfo,t??0,this._excludeGraphics);return null==t&&null!=r&&(r.z=void 0),r}mapToScreen(e){const t=(0,r.T)(e.x,e.y,(0,s.wS)(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(t)}constrainZ(e){const{defaultZ:t}=this;return null!=t&&e.z!==t&&((e=(0,o.EL)(e)).z=t),e}}class u{constructor(e,t,n=[]){this.view=e,this.elevationInfo=t,this.exclude=n}screenToMap(e){const t=this.view.toMap(e,{exclude:this.exclude,excludeHud:!0});return null!=t&&(t.z=(0,s.id)(t,this.view,this.elevationInfo)),t}mapToScreen(e){let t=e;return null!=this.elevationInfo&&(t=(0,r.T)(e.x,e.y,(0,s.wS)(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(t)}constrainZ(e){return e}}class d{constructor(e,t=!1,n=0){this.view=e,this.hasZ=t,this.defaultZ=n,this.mapToScreen=t=>e.toScreen(t),this.screenToMap=t?t=>{const i=e.toMap(t);return i.z=n,i}:t=>e.toMap(t)}constrainZ(e){const{defaultZ:t}=this;return this.hasZ&&e.z!==t&&((e=(0,o.EL)(e)).z=t),e}}class h{screenToMap(e){const{x:t,y:n}=e;return new l.default({x:t,y:n,spatialReference:h.spatialReference})}mapToScreen(e){return(0,i.tc)(e.x,e.y)}constrainZ(e){return e}}h.spatialReference=new a.A},67060:function(e,t,n){"use strict";n.d(t,{UT:function(){return d},hs:function(){return c},lR:function(){return l},wW:function(){return u}});var i=n(15774),r=n(87416),o=n(35068),s=n(38441);function a(e,t,n,i){if(null==i||e.hasZ||(i=void 0),"point"===e.type)return e.x+=t,e.y+=n,e.hasZ&&null!=i&&(e.z+=i),e;if("multipoint"===e.type){const r=e.points;for(let e=0;e<r.length;e++)r[e]=h(r[e],t,n,i);return e}if("extent"===e.type)return e.xmin+=t,e.xmax+=t,e.ymin+=n,e.ymax+=n,null!=i&&(e.zmin??=0,e.zmin+=i,e.zmax??=0,e.zmax+=i),e;const r=(0,s.$K)(e),o="polyline"===e.type?e.paths:e.rings;for(let e=0;e<r.length;e++){const o=r[e];for(let e=0;e<o.length;e++)o[e]=h(o[e],t,n,i)}return"paths"in e?e.paths=o:e.rings=o,e}function l(e,t,n,i,r){const o=e.clone(),l=i.resolution;if("point"===o.type){if(r)a(o,t*l,-n*l);else{const e=i.state.transform,r=i.state.inverseTransform,s=e[0]*o.x+e[2]*o.y+e[4],a=e[1]*o.x+e[3]*o.y+e[5];o.x=r[0]*(s+t)+r[2]*(a+n)+r[4],o.y=r[1]*(s+t)+r[3]*(a+n)+r[5]}return o}if("multipoint"===o.type){if(r)a(o,t*l,-n*l);else{const e=o.points,r=i.state.transform,s=i.state.inverseTransform;for(let i=0;i<e.length;i++){const o=e[i],a=r[0]*o[0]+r[2]*o[1]+r[4],l=r[1]*o[0]+r[3]*o[1]+r[5],c=s[0]*(a+t)+s[2]*(l+n)+s[4],u=s[1]*(a+t)+s[3]*(l+n)+s[5];e[i]=p(o,c,u,void 0)}}return o}if("extent"===o.type){if(r)a(o,t*l,-n*l);else{const e=i.state.transform,r=i.state.inverseTransform,s=e[0]*o.xmin+e[2]*o.ymin+e[4],a=e[1]*o.xmin+e[3]*o.ymin+e[5],l=e[0]*o.xmax+e[2]*o.ymax+e[4],c=e[1]*o.xmax+e[3]*o.ymax+e[5];o.xmin=r[0]*(s+t)+r[2]*(a+n)+r[4],o.ymin=r[1]*(s+t)+r[3]*(a+n)+r[5],o.xmax=r[0]*(l+t)+r[2]*(c+n)+r[4],o.ymax=r[1]*(l+t)+r[3]*(c+n)+r[5]}return o}if(r)a(o,t*l,-n*l);else{const e=(0,s.$K)(o),r="polyline"===o.type?o.paths:o.rings,a=i.state.transform,l=i.state.inverseTransform;for(let i=0;i<e.length;i++){const r=e[i];for(let e=0;e<r.length;e++){const i=r[e],o=a[0]*i[0]+a[2]*i[1]+a[4],s=a[1]*i[0]+a[3]*i[1]+a[5],c=l[0]*(o+t)+l[2]*(s+n)+l[4],u=l[1]*(o+t)+l[3]*(s+n)+l[5];r[e]=p(i,c,u,void 0)}}"paths"in o?o.paths=r:o.rings=r}return o}function c(e,t,n,i){if("point"===e.type){const{x:r,y:o}=e,s=i?i[0]:r,a=i?i[1]:o,l=e.clone(),c=(r-s)*t+s,u=(o-a)*n+a;return l.x=c,l.y=u,l}if("multipoint"===e.type){const a=(0,s.$K)(e),l=(0,r.vt)(),[c,u,d,h]=(0,o.Yz)(l,[a]),f=i?i[0]:(c+d)/2,m=i?i[1]:(h+u)/2,g=e.clone(),y=g.points;for(let e=0;e<y.length;e++){const i=y[e],[r,o]=i,s=(r-f)*t+f,a=(o-m)*n+m;y[e]=p(i,s,a,void 0)}return g}if("extent"===e.type){const{xmin:r,xmax:o,ymin:s,ymax:a}=e,l=i?i[0]:(r+o)/2,c=i?i[1]:(a+s)/2,u=e.clone();if(u.xmin=(r-l)*t+l,u.ymax=(a-c)*n+c,u.xmax=(o-l)*t+l,u.ymin=(s-c)*n+c,u.xmin>u.xmax){const e=u.xmin,t=u.xmax;u.xmin=t,u.xmax=e}if(u.ymin>u.ymax){const e=u.ymin,t=u.ymax;u.ymin=t,u.ymax=e}return u}const a=(0,s.$K)(e),l=(0,r.vt)(),[c,u,d,h]=(0,o.Yz)(l,a),f=i?i[0]:(c+d)/2,m=i?i[1]:(h+u)/2,g=e.clone(),y="polyline"===g.type?g.paths:g.rings;for(let e=0;e<a.length;e++){const i=a[e];for(let r=0;r<i.length;r++){const o=i[r],[s,a]=o,l=(s-f)*t+f,c=(a-m)*n+m;y[e][r]=p(o,l,c,void 0)}}return"paths"in g?g.paths=y:g.rings=y,g}function u(e,t,n,i,r,o){const s=Math.sqrt((n-e)*(n-e)+(i-t)*(i-t));return Math.sqrt((r-e)*(r-e)+(o-t)*(o-t))/s}function d(e,t,n,r=!1){const o=Math.atan2(t.y-n.y,t.x-n.x)-Math.atan2(e.y-n.y,e.x-n.x),s=Math.atan2(Math.sin(o),Math.cos(o));return r?s:(0,i.KJ)(s)}function h(e,t,n,i){return p(e,e[0]+t,e[1]+n,null!=e[2]&&null!=i?e[2]+i:void 0)}function p(e,t,n,i){const r=[t,n];return e.length>2&&r.push(null!=i?i:e[2]),e.length>3&&r.push(e[3]),r}},82067:function(e,t,n){"use strict";n.d(t,{l:function(){return b}});var i=n(53804),r=n(83525),o=n(48996),s=n(28181),a=n(13520),l=n(23502),c=(n(58941),n(40633),n(13798),n(65953)),u=n(13786),d=n(20551),h=n(32501),p=n(46157),f=n(56763),m=n(68945),g=n(74661),y=n(6422),v=n(17921),_=n(33383);let b=class extends r.A{set graphic(e){this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set("graphic",e),this.attachSymbolChanged()}get elevationInfo(){const{layer:e}=this.graphic,t=e&&"elevationInfo"in e?e.elevationInfo:null,n=(0,m.ky)(this.graphic),i=t?t.offset:0;return new y.A({mode:n,offset:i})}set focusedSymbol(e){e!==this._get("focusedSymbol")&&(this._set("focusedSymbol",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(e){e!==this._get("grabbing")&&(this._set("grabbing",e),this._updateGraphicSymbol())}set hovering(e){e!==this._get("hovering")&&(this._set("hovering",e),this._updateGraphicSymbol())}set selected(e){e!==this._get("selected")&&(this._set("selected",e),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:e?"select":"deselect"}))}get _focused(){return this._get("hovering")||this._get("grabbing")}constructor(e){super(e),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.consumesClicks=!0,this.events=new o.A.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}intersectionDistance(e){const t=this.graphic;if(!1===t.visible)return null;const n=t.geometry;if(null==n)return null;const i=this._get("focusedSymbol"),r=null!=i?i:t.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,e,n,r):this._intersectDistance3D(this.view,e,t)}attach(){this.attachSymbolChanged(),null!=this.layer&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),null!=this.layer&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=(0,s.watch)((()=>this.graphic?.symbol),(e=>{null!=e&&e!==this.focusedSymbol&&e!==this._originalSymbol&&(this._originalSymbol=e,this._focused&&null!=this.focusedSymbol&&(this.graphic.symbol=this.focusedSymbol))}),s.OH)}detachSymbolChanged(){null!=this._graphicSymbolChangedHandle&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}onElevationChange(){}onViewChange(){}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&null!=this.focusedSymbol?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(e,t,n,i){if(null==(i=i||(0,g.SF)(n)))return null;let r=this._circleCollisionCache;if("point"===n.type&&"cim"===i.type&&"CIMPointSymbol"===i.data.symbol?.type&&i.data.symbol.symbolLayers){const{offsetX:r,offsetY:o,size:s}=(0,v.T)(i),l=(0,a.WA)(t,w),c=s/2,d=e.toScreen(n),h=d.x+r,p=d.y+o;return(0,u.hG)(l,[h,p])<c*c?1:null}if("point"!==n.type||"simple-marker"!==i.type)return(0,_.t)(t,n,e)?1:null;if(null==r||!r.originalPoint.equals(n)){const t=n,o=e.spatialReference;if((0,p.canProjectWithoutEngine)(t.spatialReference,o)){const e=(0,p.project)(t,o);r={originalPoint:t.clone(),mapPoint:e,radiusPx:(0,a.Lz)(i.size)},this._circleCollisionCache=r}}if(null!=r){const n=(0,a.WA)(t,w),o=e.toScreen?.(r.mapPoint);if(!o)return null;const s=r.radiusPx,l=o.x+(0,a.Lz)(i.xoffset),c=o.y-(0,a.Lz)(i.yoffset);return(0,u.hG)(n,[l,c])<s*s?1:null}return null}_intersectDistance3D(e,t,n){const i=e.toMap(t,{include:[n]});return i&&(0,f.g)(i,x,e.renderSpatialReference)?(0,d.p)(x,e.state.camera.eye):null}};(0,i._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],b.prototype,"graphic",null),(0,i._)([(0,l.MZ)()],b.prototype,"elevationInfo",null),(0,i._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],b.prototype,"view",void 0),(0,i._)([(0,l.MZ)({value:null})],b.prototype,"focusedSymbol",null),(0,i._)([(0,l.MZ)({constructOnly:!0})],b.prototype,"layer",void 0),(0,i._)([(0,l.MZ)()],b.prototype,"interactive",void 0),(0,i._)([(0,l.MZ)()],b.prototype,"selectable",void 0),(0,i._)([(0,l.MZ)()],b.prototype,"grabbable",void 0),(0,i._)([(0,l.MZ)({value:!1})],b.prototype,"grabbing",null),(0,i._)([(0,l.MZ)()],b.prototype,"dragging",void 0),(0,i._)([(0,l.MZ)()],b.prototype,"hovering",null),(0,i._)([(0,l.MZ)({value:!1})],b.prototype,"selected",null),(0,i._)([(0,l.MZ)()],b.prototype,"cursor",void 0),b=(0,i._)([(0,c.$)("esri.views.interactive.GraphicManipulator")],b);const x=(0,h.vt)(),w=(0,a.gs)()},83202:function(e,t,n){"use strict";n.d(t,{g:function(){return p}});var i,r,o=n(53804),s=n(83525),a=(n(58941),n(40633),n(60539)),l=n(23502),c=(n(13798),n(65953)),u=n(53551),d=n(78879);(r=i||(i={}))[r.WhenToolEditable=0]="WhenToolEditable",r[r.WhenToolNotEditable=1]="WhenToolNotEditable",r[r.Always=2]="Always";class h{constructor(){this._isToolEditable=!0,this._manipulators=new d.A,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(e){this._isToolEditable=e}get length(){return this._manipulators.length}add(e,t=i.WhenToolEditable){this.addMany([e],t)}addMany(e,t=i.WhenToolEditable){for(const n of e){const e={manipulator:n,visibilityPredicate:t,attached:!1};this._manipulators.add(e),this._attached&&this._updateManipulatorAttachment(e)}}remove(e){for(let t=0;t<this._manipulators.length;t++)if(this._manipulators.at(t).manipulator===e){const e=this._manipulators.splice(t,1)[0];this._detachManipulator(e);break}}removeAll(){this._manipulators.forEach((e=>{this._detachManipulator(e)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((e=>{this._updateManipulatorAttachment(e)})),this._attached=!0}detach(){this._manipulators.forEach((e=>{this._detachManipulator(e)})),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach((({manipulator:e})=>e.destroy())),this._manipulators.destroy(),this._resourceContexts=null}on(e,t){return this._manipulators.on(e,(e=>{t(e)}))}forEach(e){for(const t of this._manipulators.items)e(t)}some(e){return this._manipulators.items.some(e)}toArray(){const e=[];return this.forEach((t=>e.push(t.manipulator))),e}intersect(e,t){let n=null,i=Number.MAX_VALUE;return this._manipulators.forEach((({manipulator:r,attached:o})=>{if(!o||!r.interactive)return;const s=r.intersectionDistance(e,t);null!=s&&s<i&&(i=s,n=r)})),n}_updateManipulatorAttachment(e){this._isManipulatorItemVisible(e)?this._attachManipulator(e):this._detachManipulator(e)}_attachManipulator(e){e.attached||(e.manipulator.attach&&e.manipulator.attach(this._resourceContexts),e.attached=!0)}_detachManipulator(e){if(!e.attached)return;const t=e.manipulator;t.grabbing=!1,t.dragging=!1,t.hovering=!1,t.selected=!1,t.detach&&t.detach(this._resourceContexts),e.attached=!1}_isManipulatorItemVisible(e){return e.visibilityPredicate===i.Always||(this._isToolEditable?e.visibilityPredicate===i.WhenToolEditable:e.visibilityPredicate===i.WhenToolNotEditable)}}let p=class extends s.A{constructor(e){super(e),this.manipulators=new h,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[u.PK.MANAGER,!0],[u.PK.USER,!0]]),this._creationFinishedResolver=(0,a.Tw)()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this._syncVisible())}get editable(){return this.getEditableFlag(u.PK.USER)}set editable(e){this.setEditableFlag(u.PK.USER,e)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){null!=this.view&&(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(e){this.onInputEvent(e)}handleInputEventAfter(e){this.onInputEventAfter(e)}setEditableFlag(e,t){this._editableFlags.set(e,t),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),e===u.PK.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(e){return this._editableFlags.get(e)??!1}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(e){}onInputEventAfter(e){}get internallyEditable(){return this.getEditableFlag(u.PK.USER)&&this.getEditableFlag(u.PK.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};(0,o._)([(0,l.MZ)({constructOnly:!0})],p.prototype,"view",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],p.prototype,"active",null),(0,o._)([(0,l.MZ)({value:!0})],p.prototype,"visible",null),(0,o._)([(0,l.MZ)({value:!0})],p.prototype,"editable",null),(0,o._)([(0,l.MZ)({readOnly:!0})],p.prototype,"manipulators",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],p.prototype,"updating",null),(0,o._)([(0,l.MZ)()],p.prototype,"cursor",null),(0,o._)([(0,l.MZ)({readOnly:!0})],p.prototype,"automaticManipulatorSelection",void 0),(0,o._)([(0,l.MZ)()],p.prototype,"hasFocusedManipulators",null),(0,o._)([(0,l.MZ)()],p.prototype,"hasGrabbedManipulators",void 0),(0,o._)([(0,l.MZ)()],p.prototype,"hasHoveredManipulators",void 0),(0,o._)([(0,l.MZ)()],p.prototype,"firstGrabbedManipulator",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],p.prototype,"created",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],p.prototype,"removeIncompleteOnCancel",void 0),p=(0,o._)([(0,c.$)("esri.views.interactive.InteractiveToolBase")],p)},50517:function(e,t,n){"use strict";n.d(t,{BV:function(){return m}});var i,r,o=n(13786),s=n(1932),a=n(20551),l=n(32501),c=n(33400),u=n(41546),d=n(45532);(r=i||(i={}))[r.Z=0]="Z",r[r.M=1]="M";class h{constructor(e){this.spatialReference=e}createVector(){return this._tag((0,s.vt)())}pointToVector(e){return this._tag((0,s.fA)(e.x,e.y))}arrayToVector(e){return this._tag((0,s.fA)(e[0],e[1]))}vectorToArray(e){return[e[0],e[1]]}pointToArray(e){return[e.x,e.y]}vectorToPoint(e,t=new d.default){return t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.spatialReference=this.spatialReference,t}arrayToPoint(e,t=new d.default){return t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.spatialReference=this.spatialReference,t}vectorToDehydratedPoint(e,t){if(e)return t??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},t.x=e[0],t.y=e[1],t.z=void 0,t.m=void 0,t.hasZ=!1,t.hasM=!1,t.spatialReference=this.spatialReference,t}lerp(e,t,n,i){return(0,o.Cc)(i,e,t,n)}addDelta(e,t,n){e[0]+=t,e[1]+=n}distance(e,t){return(0,o.Io)(e,t)}getZ(e,t=void 0){return t}hasZ(){return!1}getM(e,t=void 0){return t}hasM(){return!1}clone(e){return this._tag((0,s.ci)(e))}copy(e,t){return(0,o.C)(t,e)}fromXYZ(e){return this._tag((0,s.fA)(e[0],e[1]))}toXYZ(e,t=(0,l.vt)()){return(0,a.s)(t,e[0],e[1],0)}pointToXYZ(e,t=(0,l.vt)()){return(0,a.s)(t,e.x,e.y,0)}equals(e,t){return(0,o.aI)(e,t)}_tag(e){return e}}class p{constructor(e,t){this._valueType=e,this.spatialReference=t}createVector(){return this._tag((0,l.vt)())}pointToVector(e){return this._tag((0,l.fA)(e.x,e.y,this._valueType===i.Z?e.z:e.m))}arrayToVector(e){return this._tag((0,l.fA)(e[0],e[1],e[2]||0))}vectorToArray(e){return[e[0],e[1],e[2]]}pointToArray(e){return this._valueType===i.Z?[e.x,e.y,e.z]:[e.x,e.y,e.m]}vectorToPoint(e,t=new d.default){return t.x=e[0],t.y=e[1],t.z=this._valueType===i.Z?e[2]:void 0,t.m=this._valueType===i.M?e[2]:void 0,t.spatialReference=this.spatialReference,t}arrayToPoint(e,t=new d.default){return t.x=e[0],t.y=e[1],t.z=this._valueType===i.Z?e[2]:void 0,t.m=this._valueType===i.M?e[2]:void 0,t.spatialReference=this.spatialReference,t}vectorToDehydratedPoint(e,t){if(!e)return;t??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"};const n=this._valueType===i.Z,r=this._valueType===i.M;return t.x=e[0],t.y=e[1],t.z=n?e[2]:void 0,t.m=r?e[2]:void 0,t.hasZ=n,t.hasM=r,t.spatialReference=this.spatialReference,t}lerp(e,t,n,i){return(0,a.o)(i,e,t,n)}addDelta(e,t,n,r){e[0]+=t,e[1]+=n,this._valueType===i.Z&&(e[2]+=r)}distance(e,t){return this._valueType===i.Z?(0,a.p)(e,t):(0,o.Io)(e,t)}getZ(e,t=void 0){return this._valueType===i.Z?e[2]:t}hasZ(){return this._valueType===i.Z}getM(e,t=void 0){return this._valueType===i.M?e[2]:t}hasM(){return this._valueType===i.M}clone(e){return this._tag((0,l.ci)(e))}copy(e,t){return(0,a.c)(t,e)}fromXYZ(e,t=0,n=0){return this._tag((0,l.fA)(e[0],e[1],this._valueType===i.Z?e.length>2?e[2]:t:n))}toXYZ(e,t=(0,l.vt)()){return(0,a.s)(t,e[0],e[1],this._valueType===i.Z?e[2]:0)}pointToXYZ(e,t=(0,l.vt)()){return(0,a.s)(t,e.x,e.y,this._valueType===i.Z?e.z??0:0)}equals(e,t){return(0,a.G)(e,t)}_tag(e){return e}}class f{constructor(e){this.spatialReference=e}createVector(){return this._tag((0,u.vt)())}pointToVector(e){return this._tag((0,u.fA)(e.x,e.y,e.z,e.m))}arrayToVector(e){return this._tag((0,u.fA)(e[0],e[1],e[2]||0,e[3]||0))}vectorToArray(e){return[e[0],e[1],e[2],e[3]]}pointToArray(e){return[e.x,e.y,e.z,e.m]}vectorToPoint(e,t=new d.default){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.spatialReference=this.spatialReference,t}arrayToPoint(e,t=new d.default){return t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.spatialReference=this.spatialReference,t}vectorToDehydratedPoint(e,t){if(e)return t??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},t.x=e[0],t.y=e[1],t.z=e[2],t.m=e[3],t.hasZ=!0,t.hasM=!0,t.spatialReference=this.spatialReference,t}lerp(e,t,n,i){return(0,c.l)(i,e,t,n)}addDelta(e,t,n,i){e[0]+=t,e[1]+=n,e[2]+=i}distance(e,t){return(0,a.p)(e,t)}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}clone(e){return this._tag((0,u.ci)(e))}copy(e,t){return(0,c.c)(t,e)}fromXYZ(e,t=0,n=0){return this._tag((0,u.fA)(e[0],e[1],e.length>2?e[2]:t,n))}toXYZ(e,t=(0,l.vt)()){return(0,a.s)(t,e[0],e[1],e[2])}pointToXYZ(e,t=(0,l.vt)()){return(0,a.s)(t,e.x,e.y,e.z??0)}equals(e,t){return(0,c.e)(e,t)}_tag(e){return e}}function m(e,t,n){return e&&t?new f(n):t?new p(i.M,n):e?new p(i.Z,n):new h(n)}},2831:function(e,t,n){"use strict";n.d(t,{EX:function(){return b},RS:function(){return k},Tp:function(){return w},Wp:function(){return p},Xt:function(){return d},an:function(){return h},bl:function(){return y},dp:function(){return v},mc:function(){return _},pg:function(){return T},rh:function(){return S},sO:function(){return x},y$:function(){return g}});var i=n(50659),r=(n(58941),n(21609),n(15774)),o=n(13520),s=n(46157),a=n(67376),l=n(45328),c=n(68945),u=n(7819);function d(e,t){return e.events.on("drag",function(e,t){let n=null,i=null;return r=>{if("cancel"===r.action)return void(null!=i&&(i.execute({action:"cancel"}),n=null,i=null));const o={action:r.action,screenStart:r.start,screenEnd:r.screenPoint};"start"===r.action&&null==n&&(n=new S,i=new S,t(e,n,i,r.pointerType,o)),null!=n&&n.execute(o),"end"===r.action&&null!=n&&(n=null,i=null)}}(e,t))}function h(e,t){const n=[e.x,e.y,e.z??0],i=t,r=[Math.cos(i),Math.sin(i)],o=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(0===o)return null;r[0]/=o,r[1]/=o;const s=e=>{const t=(e.x-n[0])*r[0]+(e.y-n[1])*r[1];e.x=n[0]+t*r[0],e.y=n[1]+t*r[1]};return e=>(s(e.mapStart),s(e.mapEnd),{...e,axis:r})}function p(e){let t=null;return n=>{if("start"===n.action&&(t=function(e,t){const n=e.operations;if(!n)return null;const i=n.data.geometry,r=(0,l.RS)(t);if(i.spatialReference.equals(r))return m(e,n,(()=>{}));if("mesh"!==i.type){const t=f(i,r);if(null==t)return null;const o=i.spatialReference;return m(e,u.p.fromGeometry(t,n.viewingMode),(()=>{const e=(0,s.project)(i,o);n.trySetGeometry(e)}))}if((0,a.CK)(i)){const t=f(i.origin,r);if(!t)return null;const o=i.spatialReference,a=u.p.fromGeometry(t,n.viewingMode);return m(e,n,(()=>{const e=(0,s.project)(a.data.geometry,o),t=e.x-i.origin.x,r=e.y-i.origin.y,l=(e.z??0)-(i.origin.z??0);n.move(t,r,l)}))}return null}(e,n.mapStart.spatialReference)),null==t)return null;const i=n.mapEnd.x-n.mapStart.x,r=n.mapEnd.y-n.mapStart.y,o=(n.mapEnd.z??0)-(n.mapStart.z??0);return t.move(i,r,o,n.action),{...n,translationX:i,translationY:r,translationZ:o}}}function f(e,t){return null==e?null:e.spatialReference.equals(t)?e.clone():(0,s.project)(e,t)}function m(e,t,n){let i=0,r=0,o=0;return{move:(s,a,l,c)=>{"start"===c&&(i=0,r=0,o=0);const u=s-i,d=a-r,h=l-o;t.move(u,d,h),i+=u,r+=d,o+=h,n(),"end"===c&&e.endInteraction?.()}}}function g(e,t=null,n){let i=null;const r=null==t||e.spatialReference?.equals(t)?e=>e:e=>null!=e?(0,s.project)(e,t):e,o={exclude:[],...n};return t=>{if("start"===t.action&&(i=r(e.toMap(t.screenStart,o))),null==i)return null;const n=r(e.toMap(t.screenEnd,o));return null!=n?{...t,mapStart:i,mapEnd:n}:null}}function y(e){const t=e.map((e=>p(e))).filter(i.Ru);return e=>{const n=e.mapEnd.x-e.mapStart.x,i=e.mapEnd.y-e.mapStart.y,r=e.mapEnd.z-e.mapStart.z;return t.forEach((t=>t(e))),{...e,translationX:n,translationY:i,translationZ:r}}}function v(e){const t=e.operations?.createResetState();return e=>(t?.remove(),e)}function _(e){const t=e.map((e=>v(e))).filter((e=>null!=e));return e=>(t.forEach((t=>t(e))),e)}function b(){let e=0,t=0,n=0;return i=>{"start"===i.action&&(e=i.mapStart.x,t=i.mapStart.y,n=i.mapStart.z);const r=i.mapEnd.x-e,o=i.mapEnd.y-t,s=i.mapEnd.z-n;return e=i.mapEnd.x,t=i.mapEnd.y,n=i.mapEnd.z,{...i,mapDeltaX:r,mapDeltaY:o,mapDeltaZ:s,mapDeltaSpatialReference:i.mapStart.spatialReference}}}function x(){let e=0,t=0;return n=>{"start"===n.action&&(e=n.screenStart.x,t=n.screenStart.y);const i=n.screenEnd.x-e,r=n.screenEnd.y-t;return e=n.screenEnd.x,t=n.screenEnd.y,{...n,screenDeltaX:i,screenDeltaY:r}}}function w(e,t){let n=null,i=0,s=0;return a=>{if("start"===a.action&&(n=e.toScreen?.(t),null!=n&&(n.x<0||n.x>e.width||n.y<0||n.y>e.height?n=null:(i=a.screenStart.x-n.x,s=a.screenStart.y-n.y))),null==n)return null;const l=(0,r.qE)(a.screenEnd.x-i,0,e.width),c=(0,r.qE)(a.screenEnd.y-s,0,e.height),u=(0,o.tc)(l,c);return a.screenStart=n,a.screenEnd=u,a}}const M=()=>{};class S{constructor(){this.execute=M}next(e,t=new S){return null!=e&&(this.execute=n=>{const i=e(n);null!=i&&t.execute(i)}),t}}function T(e,t,n=[]){if("2d"===e.type)return e=>e;let i=null;return r=>{"start"===r.action&&(i=e.toMap(r.screenStart,{exclude:n}),null!=i&&(i.z=(0,c.id)(i,e,t)));const o=e.toMap(r.screenEnd,{exclude:n});null!=o&&(o.z=(0,c.id)(o,e,t));const s=null!=i&&null!=o?{sceneStart:i,sceneEnd:o}:null;return{...r,scenePoints:s}}}function C(e,t,n){const i=t.elevationProvider.getElevation(e.x,e.y,e.z??0,e.spatialReference,"scene")??0,r=(0,l.EL)(e);return r.z=i,r.hasZ=!0,r.z=(0,c.id)(r,t,n),r}function k(e,t){if("2d"===e.type)return e=>e;let n=null;return i=>{"start"===i.action&&(n=C(i.mapStart,e,t));const r=C(i.mapEnd,e,t),o=null!=n&&null!=r?{sceneStart:n,sceneEnd:r}:null;return{...i,scenePoints:o}}}},2623:function(e,t,n){"use strict";n.d(t,{uA:function(){return p},oH:function(){return h},ZE:function(){return f},Li:function(){return d},oF:function(){return g}});var i=n(50659),r=n(82547),o=n(48996),s=n(44740),a=n(91508),l=n(50517),c=n(57652),u=n(65420);class d{constructor(e){this.component=e,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}}class h{constructor(e,t,n){this.component=e,this.leftVertex=t,this.rightVertex=n,this.type="edge",t.rightEdge=this,n.leftEdge=this}}class p{constructor(e,t){this._spatialReference=e,this._viewingMode=t,this.vertices=[],this.edges=[],this.index=null}unnormalizeVertexPositions(){this.vertices.length<=1||function(e,t){if(!t.supported)return;let n=1/0,i=-1/0;const r=t.upperBoundX-t.lowerBoundX;e.forEach((e=>{let o=e.pos[0];for(;o<t.lowerBoundX;)o+=r;for(;o>t.upperBoundX;)o-=r;n=Math.min(n,o),i=Math.max(i,o),e.pos[0]=o}));const o=i-n;r-o<o&&e.forEach((e=>{e.pos[0]<0&&(e.pos[0]+=r)}))}(this.vertices,function(e,t){const n=(0,c.Vp)(e);return t===u.RT.Global&&n?{supported:!0,lowerBoundX:n.valid[0],upperBoundX:n.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}(this._spatialReference,this._viewingMode))}updateVertexIndex(e,t){if(0===this.vertices.length)return;const n=this.vertices[0];let i=null,r=e,o=t;do{i=r,i.index=o++,r=i.rightEdge?i.rightEdge.rightVertex:null}while(null!=r&&r!==n);i.leftEdge&&i!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(i),this.vertices.length-1)}getFirstVertex(){return this.vertices.at(0)}getLastVertex(){return this.vertices.at(-1)}isClosed(){return this.vertices.length>2&&null!==this.vertices[0].leftEdge}swapVertices(e,t){const n=this.vertices[e];this.vertices[e]=this.vertices[t],this.vertices[t]=n}iterateVertices(e){if(0===this.vertices.length)return;const t=this.vertices[0];let n=t;do{e(n,n.index),n=null!=n.rightEdge?n.rightEdge.rightVertex:null}while(n!==t&&null!=n)}}class f extends o.A{constructor(e,t){super(),this.type=e,this.coordinateHelper=t,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon();break;case"mesh":break;default:(0,r.Xb)(this.type)}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}get allVertices(){return Array.from(this.iterateVertices())}*iterateVertices(){for(const e of this.components)for(const t of e.vertices)yield t}notifyChanges(e){this._dirty=!0,this.emit("change",e)}_toPoint(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const e=[],t=this.coordinateHelper.vectorToArray;for(const n of this.components){if(n.vertices.length<1)continue;const i=[];let r=n.vertices.find((e=>null==e.leftEdge));const o=r;do{i.push(t(r.pos)),r=r.rightEdge?r.rightEdge.rightVertex:null}while(r&&r!==o);e.push(i)}return new a.A({paths:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const e=[],t=this.coordinateHelper.vectorToArray;for(const n of this.components){if(n.vertices.length<1)continue;const i=[],r=n.vertices[0];let o=r;const s=o;do{i.push(t(o.pos)),o=null!=o.rightEdge?o.rightEdge.rightVertex:null}while(o&&o!==s);n.isClosed()&&i.push(t(r.pos)),e.push(i)}return new s.A({rings:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,t){const n=e.spatialReference,r=(0,l.BV)(e.hasZ,e.hasM,n),o=new f(e.type,r);switch(e.type){case"polygon":!function(e,t,n){const r=t.spatialReference,o=e.coordinateHelper,s=t.rings;for(let t=0;t<s.length;++t){const a=s[t],l=new p(r,n);l.index=t;const c=a.length>2&&(0,i.aI)(a[0],a[a.length-1]),u=c?a.length-1:a.length;for(let e=0;e<u;++e){const t=o.arrayToVector(a[e]),n=new d(l);l.vertices.push(n),n.pos=t,n.index=e}const f=l.vertices.length-1;for(let e=0;e<f;++e){const t=l.vertices[e],n=l.vertices[e+1],i=new h(l,t,n);l.edges.push(i)}if(c){const e=new h(l,l.vertices[l.vertices.length-1],l.vertices[0]);l.edges.push(e)}e.components.push(l)}}(o,e,t);break;case"polyline":!function(e,t,n){const i=t.spatialReference,r=e.coordinateHelper,o=t.paths;for(let t=0;t<o.length;++t){const s=o[t],a=new p(i,n);a.index=t;const l=s.length;for(let e=0;e<l;++e){const t=r.arrayToVector(s[e]),n=new d(a);a.vertices.push(n),n.pos=t,n.index=e}const c=a.vertices.length-1;for(let e=0;e<c;++e){const t=a.vertices[e],n=a.vertices[e+1],i=new h(a,t,n);a.edges.push(i)}e.components.push(a)}}(o,e,t);break;case"point":m(o,e,t);break;case"mesh":m(o,e.anchor,t),o._geometry=e,o._dirty=!1}return o}}function m(e,t,n){const i=t.spatialReference,r=e.coordinateHelper,o=new p(i,n);o.index=0;const s=new d(o);s.index=0,s.pos=r.pointToVector(t),o.vertices.push(s),e.components.push(o)}function g(e){return"mesh"===e.type}},7819:function(e,t,n){"use strict";n.d(t,{p:function(){return T}});var i=n(48996),r=n(61226),o=n(32501),s=n(38441),a=n(2623),l=n(34358);class c{constructor(e,t,n){this._editGeometry=e,this._component=t,this._pos=n,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let e="redo";null==this._addedVertex&&(e="apply",this._addedVertex=new a.Li(this._component));const t=this._component.getLastVertex();if(null==t)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let e=null;t.rightEdge&&(this._originalEdge=t.rightEdge,e=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,null==this._left&&(this._left=new a.oH(this._component,t,this._addedVertex)),this._component.edges.push(this._left),t.rightEdge=this._left,null!=this._originalEdge&&null!=e&&(null==this._right&&(this._right=new a.oH(this._component,this._addedVertex,e)),this._component.edges.push(this._right),e.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,t.index+1)}this._editGeometry.notifyChanges({operation:e,addedVertices:[this._addedVertex]})}undo(){null!=this._addedVertex&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),null!=this._left&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),null!=this._right&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),null!=this._originalEdge&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),null!=this._left?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}}var u=n(57665);class d{constructor(e,t,n=0){this._editGeometry=e,this._vertices=t,this._minNumberOfVertices=n,this.removedVertices=null}apply(){let e="redo";if(null==this.removedVertices){const t=this.removedVertices=[];this._vertices.forEach((e=>{const n=this._removeVertex(e);null!=n&&t.push(n)})),e="apply"}else this.removedVertices.forEach((e=>{this._removeVertex(e.removedVertex)}));this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})}undo(){this.removedVertices?.forEach((e=>{this._undoRemoveVertex(e)})),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(e){const t=e.component;if(t.vertices.length<=this._minNumberOfVertices)return null;const n={removedVertex:e,createdEdge:null},i=e.leftEdge,r=e.rightEdge;return t.vertices.splice(t.vertices.indexOf(e),1),i&&(t.edges.splice(t.edges.indexOf(i),1),i.leftVertex.rightEdge=null),r&&(t.edges.splice(t.edges.indexOf(r),1),r.rightVertex.leftEdge=null),0===e.index&&r&&this._vertices.length>0&&t.swapVertices(t.vertices.indexOf(r.rightVertex),0),i&&r&&(n.createdEdge=new a.oH(t,i.leftVertex,r.rightVertex),t.edges.push(n.createdEdge)),r&&t.updateVertexIndex(r.rightVertex,r.rightVertex.index-1),n}_undoRemoveVertex(e){const t=e.removedVertex,n=e.removedVertex.component,i=t.leftEdge,r=t.rightEdge;e.createdEdge&&n.edges.splice(n.edges.indexOf(e.createdEdge),1),n.vertices.push(t),i&&(n.edges.push(i),i.leftVertex.rightEdge=i),r&&(n.edges.push(r),r.rightVertex.leftEdge=r),n.updateVertexIndex(t,t.index)}}class h{constructor(e,t,n){this._editGeometry=e,this._edge=t,this._t=n,this.createdVertex=null,this._left=null,this._right=null}apply(){let e="redo";const t=this._edge,n=t.component,i=t.leftVertex,r=t.rightVertex;n.edges.splice(n.edges.indexOf(t),1),null==this.createdVertex&&(e="apply",this.createdVertex=new a.Li(t.component)),n.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(t.leftVertex.pos,t.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),null==this._left&&(this._left=new a.oH(n,i,this.createdVertex)),this._left.leftVertex.leftEdge?n.edges.push(this._left):n.edges.unshift(this._left),i.rightEdge=this._left,null==this._right&&(this._right=new a.oH(n,this.createdVertex,r)),n.edges.push(this._right),r.leftEdge=this._right,n.updateVertexIndex(this.createdVertex,i.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}undo(){if(null==this.createdVertex||null==this._left||null==this._right)return null;const e=this._edge,t=e.component,n=this.createdVertex.leftEdge,i=this.createdVertex.rightEdge,r=n?.leftVertex,o=i?.rightVertex;t.vertices.splice(t.vertices.indexOf(this.createdVertex),1),t.edges.splice(t.edges.indexOf(this._left),1),t.edges.splice(t.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?t.edges.push(this._edge):t.edges.unshift(this._edge),r&&(r.rightEdge=e),o&&(o.leftEdge=e),r&&t.updateVertexIndex(r,r.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}}class p{constructor(e,t,n){this._editGeometry=e,this._vertex=t,this._pos=n}apply(){const e=null==this._originalPosition;e&&(this._originalPosition=this._vertex.pos),this._apply(e?"apply":"redo")}undo(){this._vertex.pos=this._originalPosition,this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(e){return e instanceof p&&e._vertex===this._vertex&&(this._pos=e._pos,this._apply("apply"),!0)}_apply(e){this._vertex.pos=this._pos,this._editGeometry.components.forEach((e=>e.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:e,updatedVertices:[this._vertex]})}}var f=n(50659);class m{constructor(e,t){this._editGeometry=e,this._component=t,this._createdEdge=null}apply(){let e="redo";if(null==this._createdEdge){e="apply";const t=this._component.getFirstVertex(),n=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||null==t||null==n)return;this._createdEdge=new a.oH(this._component,n,t)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:e})}undo(){null!=this._createdEdge&&((0,f.TF)(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}}class g{constructor(e,t,n,i){this._editGeometry=e,this.dx=t,this.dy=n,this.dz=i,this._firstTime=!0}apply(){const e=this._firstTime?"apply":"redo";this._firstTime=!1,this._apply(e,this.dx,this.dy,this.dz)}undo(){this._apply("undo",-this.dx,-this.dy,-this.dz)}accumulate(e){const t=this._editGeometry.geometry;return e instanceof g&&e._editGeometry.geometry===t&&(this._apply("apply",e.dx,e.dy,e.dz),this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz,!0)}_apply(e,t,n,i){const r=this._editGeometry.geometry;r.offset(t,n,i);const o=this._editGeometry.components[0].getFirstVertex();if(!o)return;const s=this._editGeometry.coordinateHelper;o.pos=s.pointToVector(r.anchor),this._editGeometry.notifyChanges({operation:e,updatedVertices:[o]})}}var y,v=n(28080),_=n(63447),b=n(31966),x=n(76835);class w{constructor(e,t){this._editGeometry=e,this._newPositions=t}apply(){const e=null==this._originalPositions?"apply":"redo";if(!this._originalPositions){const e=this._editGeometry.coordinateHelper;this._originalPositions=this._editGeometry.allVertices.map((t=>e.clone(t.pos)))}this._apply(e,this._newPositions)}undo(){this._originalPositions&&this._apply("undo",this._originalPositions)}accumulate(e){return e instanceof w&&(this._newPositions=e._newPositions,this._apply("apply",this._newPositions),!0)}_apply(e,t){const n=this._editGeometry.coordinateHelper,i=this._editGeometry.allVertices;for(let e=0;e<i.length;e++)n.copy(t[e],i[e].pos);this._editGeometry.components.forEach((e=>e.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:e,updatedVertices:i})}}const M=Symbol();class S{constructor(e){this._operations=[],this._closed=!1,this[y]=!0,e&&(this._operations=e,this._closed=!0)}close(){this._closed=!0}apply(){for(const e of this._operations)e.apply()}undo(){for(let e=this._operations.length-1;e>=0;e--)this._operations[e].undo()}accumulate(e){if(this._closed)return!1;const t=this._operations.length?this._operations[this._operations.length-1]:null;return t&&t.accumulate(e)||(this._operations.push(e),e.apply()),!0}}y=M;class T extends i.A{constructor(e,t){super(),this.data=e,this.viewingMode=t,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",(e=>{e.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:e.addedVertices,operation:e.operation}),e.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:e.removedVertices,operation:e.operation}),e.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:e.updatedVertices,operation:e.operation})}))}destroy(){this._listener.remove()}splitEdge(e,t){return this._apply(new h(this.data,e,t))}updateVertices(e,t,n=l.Y.ACCUMULATE_STEPS){return this._apply(new u.D(this.data,e,t),n)}move(e,t,n,i=l.Y.ACCUMULATE_STEPS){return(0,a.oF)(this.data)?this._apply(new g(this.data,e,t,n),i):this.moveVertices(this.data.allVertices,e,t,n,i)}moveVertices(e,t,n,i,r=l.Y.ACCUMULATE_STEPS){return(0,a.oF)(this.data)?this._apply(new g(this.data,t,n,i),r):this.updateVertices(e,new v.a(this.data.coordinateHelper,t,n,i),r)}scale(e,t,n,i,r=l.Y.ACCUMULATE_STEPS,o=u.K.CUMULATIVE){return this.scaleVertices(this.data.allVertices,e,t,n,i,r,o)}scaleVertices(e,t,n,i,r,o=l.Y.ACCUMULATE_STEPS,s=u.K.CUMULATIVE){return this.updateVertices(e,new x.j(t,n,i,r,s),o)}rotate(e,t,n=l.Y.ACCUMULATE_STEPS,i=u.K.CUMULATIVE){return this.rotateVertices(this.data.allVertices,e,t,n,i)}rotateVertices(e,t,n,i=l.Y.ACCUMULATE_STEPS,r=u.K.CUMULATIVE){return this.updateVertices(e,new b.m(t,n,r),i)}removeVertices(e){return this._apply(new d(this.data,e,this._minNumVerticesPerType))}appendVertex(e){return 0===this.data.components.length?null:this._apply(new c(this.data,this.data.components[0],e))}setVertexPosition(e,t){return this._apply(new p(this.data,e,t))}offsetEdge(e,t,n,i=l.Y.ACCUMULATE_STEPS){return this.updateVertices([t.leftVertex,t.rightVertex],new _.L(this.data.coordinateHelper,e,t,n),i)}trySetGeometry(e,t=l.Y.ACCUMULATE_STEPS){const{data:n}=this,{coordinateHelper:i}=n;if(n.type!==e.type||!n.spatialReference.equals(e.spatialReference)||i.hasZ()!==e.hasZ||i.hasM()!==e.hasM||!(0,s.It)(n.geometry,e)||(0,a.oF)(n))return;const r=Array.from(a.ZE.fromGeometry(e,this.viewingMode).iterateVertices(),(e=>e.pos));return this.setVertexPositions(r,t)}setVertexPositions(e,t=l.Y.ACCUMULATE_STEPS){return this._apply(new w(this.data,e),t)}createResetState(){if((0,a.oF)(this.data))return this._createResetStateMesh();const e=this.data.geometry.clone();return(0,r.hA)((()=>this.trySetGeometry(e)))}closeComponent(e){return this.data.components.includes(e)?this._apply(new m(this.data,e)):null}canRemoveVertex(e){return e.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const e=new S;return this._apply(e),(0,r.hA)((()=>e.close()))}undo(){if(this._undoStack.length>0){const e=this._undoStack.pop();return e.undo(),this._redoStack.push(e),e}return null}redo(){if(this._redoStack.length>0){const e=this._redoStack.pop();return e.apply(),this._undoStack.push(e),e}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(e,t=l.Y.ACCUMULATE_STEPS){return t!==l.Y.NEW_STEP&&null!=this.lastOperation&&this.lastOperation.accumulate(e)||(e.apply(),this._undoStack.push(e),this._redoStack=[]),e}_createResetStateMesh(){if(!(0,a.oF)(this.data))return(0,r.hA)();const e=this.data.geometry,{vertexSpace:t}=e;if(t.origin){const n=(0,o.o8)(t.origin);return(0,r.hA)((()=>{e.vertexSpace.origin=n}))}const n=e.vertexAttributes.clonePositional();return(0,r.hA)((()=>{e.vertexAttributes=n,e.vertexAttributesChanged()}))}static fromGeometry(e,t){return new T(a.ZE.fromGeometry(e,t),t)}}},34358:function(e,t,n){"use strict";var i;n.d(t,{Y:function(){return i}}),function(e){e[e.NEW_STEP=0]="NEW_STEP",e[e.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"}(i||(i={}))},28080:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});class i{constructor(e,t,n,i){this._helper=e,this.dx=t,this.dy=n,this.dz=i}_move(e,t,n,i){this._helper.addDelta(e.pos,t,n,i)}apply(e){this._move(e,this.dx,this.dy,this.dz)}undo(e){this._move(e,-this.dx,-this.dy,-this.dz)}canAccumulate(e){return e instanceof i}accumulate(e,t){this._move(e,t.dx,t.dy,t.dz)}accumulateParams(e){this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz}}},63447:function(e,t,n){"use strict";n.d(t,{B:function(){return f},L:function(){return d}});var i=n(15774),r=n(13786),o=n(1932),s=n(20551),a=n(32501),l=n(5596),c=n(29531),u=n(77363);class d{get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}constructor(e,t,n,i=0,r=m.IMMEDIATE){this._helper=e,this._planeType=t,this._edge=n,this.distance=i,this._plane=(0,l.vt)(),this._offsetPlane=(0,l.vt)(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,r===m.IMMEDIATE&&this._initialize()}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){const e=this._toXYZ(this._edge.leftVertex.pos),t=this._toXYZ(this._edge.leftVertex.leftEdge?.leftVertex?.pos),n=this._toXYZ(this._edge.rightVertex.pos),i=this._toXYZ(this._edge.rightVertex.rightEdge?.rightVertex?.pos);this._edgeDirection=(0,s.E)((0,a.vt)(),e,n),t?(this._left=this._computeNeighbor(e,t,this._edgeDirection),this._right=this._computeNeighbor(n,i,this._edgeDirection,this._left)):(this._right=this._computeNeighbor(n,i,this._edgeDirection),this._left=this._computeNeighbor(e,t,this._edgeDirection,this._right))}_toXYZ(e){return null!=e?this._helper.toXYZ(e):null}_pointToXYZ(e){return this._toXYZ(this._helper.pointToVector(e))}_computeNeighbor(e,t,n,i){const r=(0,a.vt)();if(t){(0,s.E)(r,e,t);const i=!this._passesBisectingAngleThreshold(r,n);return{start:e,end:t,direction:i?this._bisectVectorsPerpendicular(n,r):r,isOriginalDirection:!i}}return this._helper.hasZ()?i&&((0,s.b)(r,n,i.direction),(0,s.b)(r,r,n),(0,s.n)(r,r),Math.sign(r[1])!==Math.sign(n[0])&&(0,s.j)(r,r,-1)):(0,s.s)(r,-n[1],n[0],0),{start:e,end:t,direction:r,isOriginalDirection:!0}}_passesBisectingAngleThreshold(e,t){const n=Math.abs((0,c.g7)(t,e));return n>=h&&n<=Math.PI-h}_bisectVectorsPerpendicular(e,t){const n=(0,s.m)(e,t)<0?e:(0,s.k)((0,a.vt)(),e),i=Math.abs((0,s.m)(n,t));if(!(i<p||i>1-p))return this._bisectDirection(n,t);const r=(0,s.b)((0,a.vt)(),n,[0,0,1]);return(0,s.n)(r,r)}_bisectDirection(e,t){const n=(0,s.g)((0,a.vt)(),e,t);return(0,s.n)(n,n)}_initializePlane(){const e=this._computeNormalDirection(this._left),t=this._computeNormalDirection(this._right);(0,s.m)(e,t)<0&&(0,s.k)(t,t),(0,l.O_)(this._left.start,this._bisectDirection(e,t),this._plane)}_computeNormalDirection(e){const t=(0,s.b)((0,a.vt)(),e.direction,this._edgeDirection);(0,s.n)(t,t);const n=(0,s.b)((0,a.vt)(),this._edgeDirection,t);return this._planeType===f.XY&&(n[2]=0),(0,s.n)(n,n)}_initializeDistanceConstraints(){null==this._left.end||this.requiresSplitEdgeLeft||this._updateDistanceConstraint((0,l.mN)(this._plane,this._left.end)),null==this._right.end||this.requiresSplitEdgeRight||this._updateDistanceConstraint((0,l.mN)(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(e){e<=0&&(this._minDistance=Math.max(this._minDistance,e)),e>=0&&(this._maxDistance=Math.min(this._maxDistance,e))}_updateIntersectDistanceConstraint(e){const t=(0,l.Qj)(e),n=this._edgeDirection,i=(0,s.g)((0,a.vt)(),this._left.start,this._left.direction),c=(0,s.g)((0,a.vt)(),this._right.start,this._right.direction),d=this._pointInBasis2D((0,o.vt)(),t,n,this._left.start),h=this._pointInBasis2D((0,o.vt)(),t,n,i),p=this._pointInBasis2D((0,o.vt)(),t,n,this._right.start),f=this._pointInBasis2D((0,o.vt)(),t,n,c),[m]=(0,u.jI)({start:h,end:d,type:u.Vv.LINE},{start:f,end:p,type:u.Vv.LINE});if(!m)return;const g=(0,r.Re)((0,o.vt)(),d,h);(0,r.S8)(g,g);const y=(0,r.Re)((0,o.vt)(),m,h),v=(0,r.Om)(g,y),_=(0,s.g)((0,a.vt)(),i,(0,s.j)((0,a.vt)(),this._left.direction,-v)),b=(0,l.mN)(e,_);this._updateDistanceConstraint(b)}_pointInBasis2D(e,t,n,i){return e[0]=(0,c.gr)(t,i),e[1]=(0,c.gr)(n,i),e}_offset(e,t){Number.isFinite(this._minDistance)&&(t=Math.max(this._minDistance,t)),Number.isFinite(this._maxDistance)&&(t=Math.min(this._maxDistance,t)),(0,l.C)(this._offsetPlane,this._plane),this._offsetPlane[3]-=t;const n=(e,t,n)=>null!=t&&(0,l.U5)(this._offsetPlane,e,(0,s.g)((0,a.vt)(),e,t),n),i=(0,a.vt)();(e===this._edge.leftVertex?n(this._left.start,this._left.direction,i):n(this._right.start,this._right.direction,i))&&this._helper.copy(this._helper.fromXYZ(i,void 0,this._helper.getM(e.pos)),e.pos)}selectArrowFromStartPoint(e){this._selectedArrow=(0,l.Tj)(this.plane,this._pointToXYZ(e))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(e){return(0,l.mN)(this.plane,this._pointToXYZ(e))}apply(e){this._offset(e,this.distance)}undo(e){this._offset(e,0)}canAccumulate(e){return e instanceof d&&this._edge.leftVertex.index===e._edge.leftVertex.index&&this._edge.rightVertex.index===e._edge.rightVertex.index&&this._edge.component===e._edge.component&&this._maybeEqualsVec3(this._left.direction,e._left.direction)&&this._maybeEqualsVec3(this._right.direction,e._right.direction)&&(0,s.G)((0,l.Qj)(this._plane),(0,l.Qj)(e._plane))}accumulate(e,t){const n=this._plane[3]-t._plane[3]+t.distance;this._offset(e,n)}accumulateParams(e){const t=e.distance-e._plane[3];this.distance=t+this._plane[3]}clone(){const e=new d(this._helper,this._planeType,this._edge,this.distance,m.DEFERRED);return(0,l.C)(e._plane,this._plane),(0,l.C)(e._offsetPlane,this._offsetPlane),e._maxDistance=this._maxDistance,e._minDistance=this._minDistance,e._left=this._cloneNeighbor(this._left),e._right=this._cloneNeighbor(this._right),e._edgeDirection=(0,s.c)((0,a.vt)(),this._edgeDirection),e}_maybeEqualsVec3(e,t){return null==e&&null==t||null!=e&&null!=t&&(0,s.G)(e,t)}_cloneNeighbor({start:e,end:t,direction:n,isOriginalDirection:i}){return{start:(0,s.c)((0,a.vt)(),e),end:null!=t?(0,s.c)((0,a.vt)(),t):null,direction:(0,s.c)((0,a.vt)(),n),isOriginalDirection:i}}}const h=(0,i.kU)(15),p=.001;var f,m,g;(g=f||(f={}))[g.XYZ=0]="XYZ",g[g.XY=1]="XY",function(e){e[e.IMMEDIATE=0]="IMMEDIATE",e[e.DEFERRED=1]="DEFERRED"}(m||(m={}))},31966:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});var i=n(50659),r=n(13786),o=n(57665);class s{constructor(e,t,n=o.K.CUMULATIVE){this.origin=e,this.angle=t,this._accumulationType=n}_rotate(e,t){(0,r.e$)(e.pos,e.pos,this.origin,t)}apply(e){this._rotate(e,this.angle)}undo(e){this._rotate(e,-this.angle)}canAccumulate(e){return e instanceof s&&(0,i.aI)(this.origin,e.origin)}accumulate(e,t){const n=t._accumulationType===o.K.REPLACE;this._rotate(e,n?t.angle-this.angle:t.angle)}accumulateParams(e){const t=e._accumulationType===o.K.REPLACE;this.angle=t?e.angle:this.angle+e.angle}}},76835:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});var i=n(50659),r=n(1932),o=n(13786),s=n(57665);class a{constructor(e,t,n,i,o=s.K.CUMULATIVE){this.origin=e,this.axis1=t,this.factor1=n,this.factor2=i,this._accumulationType=o,this.axis2=(0,r.fA)(t[1],-t[0])}_scale(e,t,n){(0,o.Vj)(e.pos,e.pos,this.origin,this.axis1,t),(0,o.Vj)(e.pos,e.pos,this.origin,this.axis2,n)}apply(e){this._scale(e,this.factor1,this.factor2)}undo(e){this._scale(e,1/this.factor1,1/this.factor2)}canAccumulate(e){return e instanceof a&&(0,i.aI)(this.origin,e.origin)&&(0,i.aI)(this.axis1,e.axis1)}accumulate(e,t){t._accumulationType===s.K.REPLACE?this._scale(e,t.factor1/this.factor1,t.factor2/this.factor2):this._scale(e,t.factor1,t.factor2)}accumulateParams(e){const t=e._accumulationType===s.K.REPLACE;this.factor1=t?e.factor1:this.factor1*e.factor1,this.factor2=t?e.factor2:this.factor2*e.factor2}}},57665:function(e,t,n){"use strict";n.d(t,{D:function(){return i},K:function(){return r}});class i{constructor(e,t,n){this._editGeometry=e,this._vertices=t,this.operation=n,this._undone=!1}apply(){this._vertices.forEach((e=>this.operation.apply(e))),this._editGeometry.components.forEach((e=>e.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach((e=>this.operation.undo(e))),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(e){if(this._undone||e._vertices.length!==this._vertices.length)return!1;for(let t=0;t<e._vertices.length;++t)if(e._vertices[t]!==this._vertices[t])return!1;return this.operation.canAccumulate(e.operation)}accumulate(e){return!!(e instanceof i&&this.canAccumulate(e))&&(this._vertices.forEach((t=>this.operation.accumulate(t,e.operation))),this.operation.accumulateParams(e.operation),this._editGeometry.components.forEach((e=>e.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}}var r;!function(e){e[e.CUMULATIVE=0]="CUMULATIVE",e[e.REPLACE=1]="REPLACE"}(r||(r={}))},41857:function(e,t,n){"use strict";n.d(t,{Bb:function(){return h},G3:function(){return m},fJ:function(){return p}});var i=n(13786),r=n(20551),o=n(32501),s=n(2075),a=n(50973),l=n(28080),c=n(31966),u=n(76835),d=n(57665);function h(e,t){return f(e,t,!1)}function p(e,t){return f(e,t,!0)}function f(e,t,n){if(e instanceof d.D){if(e.operation instanceof l.a)return function(e,t,n=!1){const i=n?-1:1,a=(0,o.fA)(i*e.dx,i*e.dy,i*e.dz);(0,r.g)(t.origin,t.origin,a),(0,s.u)(t)}(e.operation,t,n),!0;if(e.operation instanceof c.m)return function(e,t,n=!1){const i=n?-e.angle:e.angle;(0,r.K)(t.basis1,t.basis1,o.uY,i),(0,r.K)(t.basis2,t.basis2,o.uY,i),(0,s.u)(t)}(e.operation,t,n),!0;if(e.operation instanceof u.j)return function(e,t,n=!1){const o=n?1/e.factor1:e.factor1,a=n?1/e.factor2:e.factor2;(0,r.j)(t.basis1,t.basis1,o),(0,r.j)(t.basis2,t.basis2,a),(0,i.Vj)(t.origin,t.origin,e.origin,e.axis1,o),(0,i.Vj)(t.origin,t.origin,e.origin,e.axis2,a),(0,s.u)(t)}(e.operation,t,n),!0}return!1}function m(e,t,n,r){r||(r=(0,s.a)());const o=(0,i.hZ)(a.oG.get(),e[1],-e[0]),l=(0,i.hZ)(a.oG.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),c=(0,i.hZ)(a.oG.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),u=a.oG.get();t.components.forEach((t=>t.vertices.forEach((({pos:t})=>{(0,i.hZ)(u,(0,i.Om)(e,t),(0,i.Om)(o,t)),(0,i.jk)(l,l,u),(0,i.T9)(c,c,u)}))));const d=1e-6,h=(0,i.hZ)(a.oG.get(),c[0]-l[0]<d?n/2:0,c[1]-l[1]<d?n/2:0);return(0,i.Re)(l,l,h),(0,i.WQ)(c,c,h),(0,i.hs)(r.basis1,e,(c[0]-l[0])/2),(0,i.hs)(r.basis2,o,(c[1]-l[1])/2),(0,i.hZ)(r.origin,l[0]*e[0]+l[1]*o[0],l[0]*e[1]+l[1]*o[1]),(0,i.WQ)(r.origin,r.origin,r.basis1),(0,i.WQ)(r.origin,r.origin,r.basis2),(0,s.u)(r),r}},53551:function(e,t,n){"use strict";var i,r,o;n.d(t,{PK:function(){return i},SJ:function(){return o},p7:function(){return r}}),function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"}(i||(i={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(o||(o={}))},7768:function(e,t,n){"use strict";n.d(t,{cx:function(){return _},dz:function(){return w},hj:function(){return f},lJ:function(){return b},tC:function(){return M}}),n(50917);var i=n(56275),r=n(62938),o=n(20551),s=n(68734),a=n(57862),l=n(46460),c=n(68945),u=n(92100),d=n(28397),h=n(99675),p=n(57165);function f(e,t,n,i,r,o){let l="geodesic",c=(0,a.Xn)(n);const u=(0,d.Hh)();return(0,d.vf)(e,t,i,u),u[2]=0,c&&(0,s.F)(u,n,u,c)||(l="euclidean",c=n),{mode:l,view:t,elevationInfo:i,hasZ:r,directionMode:o,spatialReference:e.spatialReference,measurementSR:c,origin:u}}function m(e,t,n){if(null==t||null==e)return;const o=(0,r._H)(n.measurementSR);if(null==o)return;const s=w(e,n);if(null==s)return;const a=(0,i.l3)(t,o);return new u.ej(s,a)}function g(e,t,n,r){if(null==n||null==e)return;const o=w(e,r);if(null==o)return;const s=(0,h.hF)(n),a=e=>{if(null==e)return;const t=(0,d.Hh)(),n=(0,i.Wq)(e,"degrees","geographic");return(0,h.rT)(t,o,r.measurementSR,10,n,r.mode)?new u.FX(o,t):void 0},l=()=>{if(null!=t&&null!=e)return(0,h.hF)((0,h.$h)(t,e))};switch(r.directionMode){case h.rZ.Absolute:return a(s);case h.rZ.Relative:{const e=l();if(null==e)return;return a(e+s)}case h.rZ.RelativeBilateral:{const e=l();if(null==e)return;return(0,u.xW)([a(e+s),a(e-s)])}}}function y(e,t){const n=function(e,t){return T(e,t)?.value??void 0}(e,t);return null!=n?new u.qR(n):void 0}function v(e,t,n){const{context:r,longitude:o,latitude:a,direction:l,distance:c,elevation:p}=n;if(null!=o||null!=a||null!=c||null!=p||null!=l){if(null!=o||null!=a){const e=(0,h.hF)(o),t=(0,h.hF)(a),n=S(p,r);return new u.QT(e,t,n)}return function(e,t,{context:n,direction:r,distance:o,elevation:a}){if(null==t)return y(a,n);const{view:l,elevationInfo:c,measurementSR:p}=n,f=(0,d.vf)(t,l,c);if(!p||!(0,s.F)(f,t.spatialReference,C,p))return;const[m,g]=C,v=null!=o?(0,i.l3)(o,"meters"):void 0,_=(0,h.hF)(r),b=S(a,n),x=e=>{const t=new u.jf([m,g],p,v,b,e);return null==v||null==e||null==b&&n.hasZ?t:new u.i7(t.closestTo(f))};if(null==_)return x(void 0);const w=()=>{if(null!=e&&null!=t)return(0,h.hF)((0,h.$h)(e,t))};switch(n.directionMode){case h.rZ.Absolute:return x(_);case h.rZ.Relative:{const e=w();if(null==e)return;return x(e+_)}case h.rZ.RelativeBilateral:{const e=w();if(null==e)return;return(0,u.xW)([x(e+_),x(e-_)])}}}(e,t,n)}}function _(e){return"geodesic"===e.context.mode?v(null,null,e):x(e)}function b(e,t,n){const{context:i,x:r,y:o,distance:s,direction:a,elevation:l}=n;return"geodesic"===i.mode?v(t,e,n):null!=r||null!=o?x(n):function(e){let t;for(const n of e)n&&(t=t?.intersect(n)??n);return t}([m(e,s,i),g(e,t,a,i),y(l,i)])}function x({x:e,y:t,elevation:n,context:i}){E.x=e?.value??0,E.y=t?.value??0,E.spatialReference=i.spatialReference;const r=w(E,i,k);return new u.QT(null!=e&&null!=r?r[0]:void 0,null!=t&&null!=r?r[1]:void 0,S(n,i))}function w(e,t,n=(0,d.Hh)()){const{view:i,elevationInfo:r,measurementSR:a,origin:l,mode:c}=t;if((0,d.vf)(e,i,r,n),(0,s.F)(n,e.spatialReference,n,a))return"geodesic"!==c&&(0,o.f)(n,n,l),n}function M(e,t,n,i){const{view:r,measurementSR:a,spatialReference:l,origin:c,mode:u}=n;if("geodesic"===u?(0,o.c)($,e):(0,o.g)($,e,c),(0,s.F)($,a,$,l))return(0,d.xF)($,r,t,n,i)}function S(e,t){const n=T(e,t);return null!=n?(0,i.l3)(n,"meters"):void 0}function T(e,{view:t,origin:n,elevationInfo:o,hasZ:s,measurementSR:a}){if(null==e||!s)return;const l=(0,r.mq)(a);if(null==l)return;const[u,d]=n,h=(0,i.l3)(e,l),p="3d"===t?.type?(0,c.Fo)(t,u,d,h,a,o):h;return null!=p?(0,i.d_)(p,l):void 0}const C=(0,d.Hh)(),k=(0,d.Hh)(),$=(0,d.Hh)(),E=(0,l.T)(0,0,0,p.A.WGS84)},58144:function(e,t,n){"use strict";n.d(t,{e:function(){return i}});class i{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ,this.drawConstraints=e.drawConstraints}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}}},45908:function(e,t,n){"use strict";n.d(t,{L:function(){return h}});var i=n(95929),r=n(60539),o=n(28181),s=n(42413),a=n(45328),l=n(68945),c=n(2831),u=n(58144),d=n(48961);function h({predicate:e=(()=>!0),snappingManager:t,snappingContext:n,updatingHandles:a,useZ:h=!0}){const y=new c.rh;if(null==t)return{snappingStep:[g,y],cancelSnapping:g};let v,_=null,b=null,x=null;const w=()=>{_=(0,i.DC)(_),t.doneSnapping(),b?.frameTask.remove(),b=null,v=(0,i.xt)(v),x=null},M=(S=t,T=h,C=y,(0,r.sg)((async({frameTask:e,point:t,scenePoint:n,context:i,event:r,delta:o,getLastState:a},l)=>{const c=await e.schedule((()=>S.snap({point:t,scenePoint:n,context:i,signal:l})),l);if(c.valid){let n=await e.schedule((()=>c.apply()),l);const u=a();null!=u.point&&t!==u.point&&(n=S.update({point:u.point,scenePoint:u.scenePoint,context:i})),null!=u.updatePoint&&(0,s.CI)(n,u.updatePoint)||(m(r.mapEnd,n,o,T),C.execute(r))}})));var S,T,C;let k=null,$=null,E=null;return{snappingStep:[i=>{if(!e(i))return i;const{action:s}=i;if("start"===s){const{info:e}=i,r=function(e){return"3d"===e.type?e.resourceController.scheduler.registerTask(d.W6.SNAPPING):d.nu}(t.view);if(b=function(e,t,n){return{context:new u.e({editGeometryOperations:e.editGeometryOperations,elevationInfo:e.elevationInfo,pointer:e.pointer,vertexHandle:null!=t.info?t.info.handle:null,excludeFeature:e.excludeFeature,feature:e.feature,visualizer:e.visualizer}),originalPos:null!=t.snapOrigin?e.coordinateHelper.vectorToDehydratedPoint(t.snapOrigin):t.mapStart,originalScenePos:null!=t.scenePoints?t.scenePoints.sceneStart:null,frameTask:n}}(n,i,r),b.context.selfSnappingZ=null,!h&&null!=e){const t=function(e,t){if(!e.hasZ())return null;const n=t.vertices;let i=null;for(const t of n){const n=e.getZ(t.pos);if(null!=i&&null!=n&&Math.abs(n-i)>1e-6)return null;null==i&&(i=n)}return i}(n.coordinateHelper,e.handle.component);null!=t&&(b.context.selfSnappingZ={value:t,elevationInfo:n.elevationInfo??l.qt})}}if(null!=b){const{context:e,originalScenePos:n,originalPos:l}=b,{mapEnd:c,mapStart:u,scenePoints:d}=i,g=p(l,f(c,u)),y=f(u,l),w={...i,action:"update"},S=b.context,T=function(e,t){return null==e||null==t?null:p(e,f(t.sceneEnd,t.sceneStart))}(n,d),C=t.update({point:g,scenePoint:T,context:e});if(E=C,m(c,C,y,h),k=g,$=T,"end"!==s){const{frameTask:e}=b;null==_&&(_=new AbortController),x=t=>{a.addPromise((0,r.QZ)(M({frameTask:e,event:w,context:S,point:g,scenePoint:T,delta:y,getLastState:()=>({point:k,scenePoint:$,updatePoint:t.forceUpdate?null:E})},_.signal)))},x({forceUpdate:!1}),null==v&&(v=(0,o.watch)((()=>t.options.effectiveEnabled),(()=>x?.({forceUpdate:!0}))))}}return"end"===s&&w(),i},y],cancelSnapping:e=>(w(),e)}}function p(e,[t,n,i]){const r=(0,a.EL)(e);return r.x+=t,r.y+=n,r.hasZ&&(r.z+=i),r}function f(e,t){const n=e.hasZ&&t.hasZ?e.z-t.z:0;return[e.x-t.x,e.y-t.y,n]}function m(e,t,[n,i,r],o){e.x=t.x+n,e.y=t.y+i,o&&e.hasZ&&t.hasZ&&(e.z=t.z+r)}function g(e){return e}},21858:function(e,t,n){"use strict";n.d(t,{b:function(){return c}});var i=n(61226),r=n(97441),o=n(64330),s=n(92535),a=n(96942),l=n(98245);class c{draw(e,t){const n=function(e){const t=[];for(const n of e){let e=!0;for(const i of t)if(n.equals(i)){e=!1;break}e&&t.push(n)}return t}(e),c=this.sortUniqueHints(n),u=[];for(const e of c)e instanceof r.v&&u.push(this.visualizeIntersectionPoint(e,t)),e instanceof o.c&&u.push(this.visualizeLine(e,t)),e instanceof s.r&&u.push(this.visualizeParallelSign(e,t)),e instanceof l.l&&u.push(this.visualizeRightAngleQuad(e,t)),e instanceof a._&&u.push(this.visualizePoint(e,t));return(0,i.vE)(u)}sortUniqueHints(e){return e}}},96942:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var i=n(20551),r=n(94612);class o extends r.m{constructor(e,t,n){super(t,n),this.point=e}equals(e){return e instanceof o&&(0,i.e)(this.point,e.point)}}},17921:function(e,t,n){"use strict";n.d(t,{T:function(){return r}});var i=n(13520);function r(e){let t=0,n=0,r=0;return e?("cim"===e.type&&e.data.symbol&&"symbolLayers"in e.data.symbol&&e.data.symbol.symbolLayers&&e.data.symbol.symbolLayers.map((e=>{"CIMVectorMarker"===e.type&&e.anchorPoint&&(Math.abs(e.anchorPoint.x)>t&&(t=e.anchorPoint.x),Math.abs(e.anchorPoint.y)>n&&(n=e.anchorPoint.y),null!=e.size&&e.size>r&&(r=e.size))})),t=(0,i.Lz)(t),n=(0,i.Lz)(n),r=(0,i.Lz)(r),{offsetX:t,offsetY:n,size:r}):{offsetX:t,offsetY:n,size:r}}},30329:function(e,t,n){"use strict";n.d(t,{m:function(){return we}});var i=n(53804),r=n(48996),o=n(40212),s=n(95929),a=n(28181),l=n(23502),c=(n(58941),n(40633),n(13798),n(65953)),u=n(93839);const d="esri-tooltip",h=`${d}-content`,p=`${d}-content--input`,f=`${d}-content__header`,m=`${d}-content__header__spacer`,g=`${d}-content__header__actions`,y=`${d}-draw-header-actions`,v=`${d}-table`,_=`${d}-help-message`,b=`${d}-help-message__text`,x=`${d}-help-message__icon`;n(39819);var w=n(31267),M=n(20457),S=n(49146);const T=`${d}-field`,C={base:T,inputMode:`${T}--input`,title:`${T}__title`,value:`${T}__value`};let k=class extends w.A{constructor(){super(...arguments),this.hidden=!1,this.mode="feedback"}render(){return(0,S.K)("div",{class:this.classes({[C.base]:!0,[C.inputMode]:"input"===this.mode})},(0,S.K)("div",{class:C.title},this.title),(0,S.K)("div",{class:C.value},this.value))}};(0,i._)([(0,l.MZ)()],k.prototype,"hidden",void 0),(0,i._)([(0,l.MZ)()],k.prototype,"mode",void 0),(0,i._)([(0,l.MZ)()],k.prototype,"title",void 0),(0,i._)([(0,l.MZ)()],k.prototype,"value",void 0),k=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.components.TooltipField")],k);const $={base:`${d}-value-by-value`};let E=class extends w.A{constructor(){super(...arguments),this.divider="×"}render(){return(0,S.K)("div",{class:$.base},(0,S.K)("span",null,this.left),(0,S.K)("span",null,this.divider),(0,S.K)("span",null,this.right))}};(0,i._)([(0,l.MZ)()],E.prototype,"left",void 0),(0,i._)([(0,l.MZ)()],E.prototype,"divider",void 0),(0,i._)([(0,l.MZ)()],E.prototype,"right",void 0),E=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.components.ValueByValue")],E);var A=n(84016),P=n(7213),R=n(60539),I=n(74087),O=n(15999),L=n(62938),V=n(76722),N=n(37578),Z=n(49634),D=n(96018),G=n(90357);let z=class extends w.A{constructor(){super(...arguments),this._focusAbortController=new AbortController,this._transition=null,this._mode="feedback",this._getFormatters=(0,P.B)(Z.GC),this._onDiscard=()=>{this.info.clearInputValues(),this.exitInputMode()},this._onCommit=(e,t)=>{if("commit-and-exit"===t)return void this.exitInputMode();if("commit-on-blur"===t)return;const n=this._getFocusableElements(),i=n.length,r=n.indexOf(e);if(-1===r)return void this.exitInputMode();const o=((r+("commit-and-next"===t?1:-1))%i+i)%i;F(n.at(o))},this._handleTab=e=>{if(e.code!==N.ac.next)return;const t=this._getFocusableElements(),n=t.at(0),i=t.at(-1);n&&i&&(e.shiftKey?document.activeElement===n&&(e.preventDefault(),F(i)):document.activeElement===i&&(e.preventDefault(),F(n)))}}get mode(){return this._mode}get _displayUnits(){const e=(0,V.c)(this.tooltip.view);return{length:e,verticalLength:e,area:e,angle:"degrees"}}get _inputUnitInfos(){const e=this._messagesUnits,t=t=>({unit:t,abbreviation:(0,O.Cq)(e,t,"abbr")}),n=(0,V.c)(this.tooltip.view),i=t((0,L.wL)(n)),r=t((0,L.m5)(n)),o=t((0,L.tW)(n)),s=t("degrees");return{length:i,lengthRelative:i,verticalLength:r,verticalLengthRelative:r,area:o,direction:s,orientation:s,rotation:s,longitudeLatitude:s}}get _formatters(){return this._getFormatters(this._messagesUnits,this._displayUnits)}get fieldContext(){return{formatters:this._formatters,inputUnitInfos:this._inputUnitInfos,messages:this._messagesTooltip,sketchOptions:this.info.sketchOptions,onCommit:this._onCommit,onDiscard:this._onDiscard}}render(){const{visibleElements:e}=this.info.sketchOptions.tooltips,t=this._renderedContent,n=this._renderedActions,i=this._renderedHelpMessage,r=t.length>0,o=r||!!i,s="input"===this.mode;return(0,S.K)("div",{class:(0,M.Ly)(h,s&&p),onkeydown:this._handleTab},s&&o&&e.header?(0,S.K)("div",{class:f,key:"header"},(0,S.K)("calcite-button",{appearance:"transparent","data-testid":"tooltip-back-button",iconFlipRtl:"both",iconStart:"chevron-left",key:"discard-button",kind:"neutral",onclick:this._onDiscard,scale:"s",tabIndex:-1}),n.length>0?(0,S.K)(S.w,null,(0,S.K)("div",{class:m,key:"spacer"}),(0,S.K)("div",{class:g,key:"actions"},n)):null):null,r?(0,S.K)("div",{class:v,key:"content"},...t):null,i)}_renderActions(){return null}loadDependencies(){return(0,D.W)({button:()=>n.e(2974).then(n.bind(n,74769)),icon:()=>n.e(2525).then(n.bind(n,22667)),input:()=>n.e(2498).then(n.bind(n,33916))})}async enterInputMode(e){try{await this._transitionTo("input"),await this._focusField(e)}catch(e){(0,R.jH)(e)}}async exitInputMode({focusOnView:e=!0}={}){try{const{container:t,info:n}=this;n.clearInputValues();const i=e?t?.closest(".esri-view")?.querySelector(".esri-view-surface"):null;await this._transitionTo("feedback"),i instanceof HTMLElement&&i.focus()}catch(e){(0,R.jH)(e)}}get _renderedContent(){return U(this._renderContent())}get _renderedActions(){return U(this._renderActions())}get _renderedHelpMessage(){const{sketchOptions:e,visibleElements:t}=this.info;if(!t.helpMessage)return null;const n=e.tooltips.helpMessage??this._defaultHelpMessage;if(!n)return null;const i=e.tooltips.helpMessageIcon??"information";return(0,S.K)("div",{class:_,key:"help-message"},i?(0,S.K)("calcite-icon",{class:x,icon:i,scale:"s"}):null,(0,S.K)("div",{class:b},n))}get _defaultHelpMessage(){const{helpMessage:e,viewType:t}=this.info;if(null==e)return null;const n="3d"===t?"helpMessages3d":"helpMessages2d";return this._messagesTooltip?.sketch?.[n]?.[e]}async _focusField(e){this._focusAbortController?.abort(),this._focusAbortController=new AbortController;const{signal:t}=this._focusAbortController;await this._waitForInputs(),(0,R.Te)(t);const n=this._getFocusableInputs(),i=e?n.find((t=>t.getAttribute("data-field-name")===e)):n.at(0);await F(i)}async _transitionTo(e){if(this._mode===e)return;const t=()=>{this._mode=e};if(!this.domNode?.firstChild||!document.startViewTransition||(0,A.O)())return void t();this.autoRenderingEnabled=!1,this._transition?.skipTransition();const n=this._transition=document.startViewTransition((()=>{if(!this.destroyed)return this.autoRenderingEnabled=!0,t(),this.renderNow(),(0,I.NO)()}));try{await this._transition.finished}finally{n===this._transition&&(this._transition=null)}}async _waitForInputs(){const e=()=>Array.from(this.domNode?.querySelectorAll("calcite-input")??[]);for(;0===e().length;)await(0,R.Pl)(H);await(0,I.$m)()}_getFocusableInputs(){return Array.from(this.domNode?.querySelectorAll("calcite-input:not([read-only]):not([disabled])")??[])}_getFocusableElements(){const e=this.domNode?.querySelector(`.${y}`);return[...Array.from(e?.querySelectorAll(`.${g} calcite-button:not([disabled])`)??[]),...this._getFocusableInputs()]}};async function F(e){await(e?.setFocus())}function U(e){return(Array.isArray(e)?e:[e]).flat(10).filter((e=>!!e))}(0,i._)([(0,G.G)("esri/core/t9n/Units"),(0,l.MZ)()],z.prototype,"_messagesUnits",void 0),(0,i._)([(0,G.G)("esri/views/interactive/tooltip/t9n/Tooltip"),(0,l.MZ)()],z.prototype,"_messagesTooltip",void 0),(0,i._)([(0,l.MZ)()],z.prototype,"info",void 0),(0,i._)([(0,l.MZ)()],z.prototype,"tooltip",void 0),(0,i._)([(0,l.MZ)()],z.prototype,"_mode",void 0),(0,i._)([(0,l.MZ)()],z.prototype,"mode",null),(0,i._)([(0,l.MZ)()],z.prototype,"_displayUnits",null),(0,i._)([(0,l.MZ)()],z.prototype,"_inputUnitInfos",null),(0,i._)([(0,l.MZ)()],z.prototype,"_formatters",null),(0,i._)([(0,l.MZ)()],z.prototype,"fieldContext",null),(0,i._)([(0,l.MZ)()],z.prototype,"_renderedContent",null),(0,i._)([(0,l.MZ)()],z.prototype,"_renderedActions",null),(0,i._)([(0,l.MZ)()],z.prototype,"_renderedHelpMessage",null),(0,i._)([(0,l.MZ)()],z.prototype,"_defaultHelpMessage",null),z=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContent")],z);const H=20;let j=class extends z{_renderContent(){const{area:e,radius:t,xSize:n,ySize:i,visibleElements:r}=this.info,o=this._messagesTooltip.sketch,s=this._formatters;return(0,S.K)(S.w,null,r.radius&&null!=t?(0,S.K)(k,{title:o.radius,value:s.length(t)}):null,r.size&&null!=n&&null!=i?(0,S.K)(k,{title:o.size,value:(0,S.K)(E,{left:s.length(n),right:s.length(i)})}):null,r.area?(0,S.K)(k,{title:o.area,value:s.area(e)}):null)}};j=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],j);const B=`${d}-editable-field`,W={base:B,inputMode:`${B}--input`,feedbackMode:`${B}--feedback`,readOnly:`${B}--read-only`,locked:`${B}--locked`,title:`${B}__title`,value:`${B}__value`,valueContent:`${B}__value__content`,valueContentReadOnly:`${B}__value__content--read-only`,lockIcon:`${B}__lock-icon`,input:`${B}__input`,inputSuffix:`${B}__input-suffix`,button:`${B}__button`},K="lock";let q=class extends w.A{constructor(){super(...arguments),this._input=null,this._onKeyDown=e=>{e.key===N.ac.discard&&"input"===this.mode&&this._input&&this.context.onDiscard(this._input)},this._onInputKeyDown=e=>{const t=this._input;if(t)switch(e.key){case N.ac.commit:return this.field.onCommit("commit-and-exit",t,this.context);case N.ac.next:{e.preventDefault(),e.stopPropagation();const n=e.shiftKey?"commit-and-previous":"commit-and-next";return this.field.onCommit(n,t,this.context)}}},this._onInput=e=>{this.field.onInput(e.target.value)},this._onInputBlur=()=>{const e=this._input;e&&this.field.onCommit("commit-on-blur",e,this.context)},this._selectText=()=>{const e=()=>{this._input===document.activeElement&&this._input?.selectText()};e(),(0,I.$m)().then(e)}}initialize(){this.addHandles((0,a.watch)((()=>this._rawDisplayValue),(()=>{const{committed:e,inputValue:t}=this.field;e||t||this._input!==document.activeElement||this._selectText()})))}loadDependencies(){return(0,D.W)({button:()=>n.e(2974).then(n.bind(n,74769)),icon:()=>n.e(2525).then(n.bind(n,22667)),input:()=>n.e(2498).then(n.bind(n,33916))})}render(){const{field:e,mode:t}=this,n="input"===t,{locked:i,readOnly:r}=e;return(0,S.K)("div",{class:this.classes({[W.base]:!0,[W.feedbackMode]:"feedback"===t,[W.inputMode]:"input"===t,[W.locked]:i,[W.readOnly]:r})},(0,S.K)("div",{class:W.title,key:"title"},this._title),(0,S.K)("div",{class:W.value,key:"value",onkeydown:this._onKeyDown},n?this._renderValueInputMode():this._renderValueFeedbackMode()))}get _formattedValue(){return this.field.getFormattedValue(this.context)||Y}get _rawDisplayValue(){return this.field.getRawDisplayValue(this.context)}get _suffix(){return this.field.getSuffix(this.context)}get _title(){const{title:e}=this.field;return"string"==typeof e?e:e(this.context)}_renderValueFeedbackMode(){return(0,S.K)(S.w,null,(0,S.K)("div",{class:W.valueContent,key:"value-feedback"},this._formattedValue),this.field.locked&&"input"!==this.mode?(0,S.K)("calcite-icon",{class:W.lockIcon,icon:K,key:"icon",scale:"s"}):null)}_renderValueInputMode(){return this.field.readOnly?this._renderValueReadOnly():this._renderValueWritable()}_renderValueReadOnly(){return(0,S.K)("div",{class:this.classes(W.valueContent,W.valueContentReadOnly),key:"value-read-only"},this._formattedValue)}_renderValueWritable(){const{field:e}=this,{name:t,invalid:n,locked:i}=e,r=this.context?.messages.sketch??{},o=i?r.unlockConstraint:r.lockConstraint;return(0,S.K)(S.w,null,(0,S.K)("calcite-input",{afterCreate:e=>{this._input=e},class:W.input,"data-field-name":t,"data-testid":`tooltip-field-${t}`,onblur:this._onInputBlur,onfocus:this._selectText,onkeydown:this._onInputKeyDown,scale:"s",status:n?"invalid":"idle",type:"text",value:this._rawDisplayValue??Y,onCalciteInputInput:this._onInput}),(0,S.K)("div",{class:W.inputSuffix,key:"suffix"},this._suffix),e.lockable?(0,S.K)("calcite-button",{alignment:"center",appearance:"transparent",class:W.button,"data-testid":`tooltip-field-${t}-lock`,iconStart:i?K:"unlock",key:"lock",kind:"neutral",label:o,onclick:()=>{e.toggleLock(this.context)},scale:"s",tabIndex:-1,title:o}):(0,S.K)("div",{key:"lock-empty"}))}};(0,i._)([(0,l.MZ)()],q.prototype,"field",void 0),(0,i._)([(0,l.MZ)()],q.prototype,"context",void 0),(0,i._)([(0,l.MZ)()],q.prototype,"mode",void 0),(0,i._)([(0,l.MZ)()],q.prototype,"_input",void 0),(0,i._)([(0,l.MZ)()],q.prototype,"_formattedValue",null),(0,i._)([(0,l.MZ)()],q.prototype,"_rawDisplayValue",null),(0,i._)([(0,l.MZ)()],q.prototype,"_suffix",null),(0,i._)([(0,l.MZ)()],q.prototype,"_title",null),q=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.components.TooltipEditableField")],q);const Y="—";function X(e){const t=e.fields.filter((e=>!0===e?.visible));return 0===t.length?null:(0,S.K)(S.w,null,t.map((t=>(0,S.K)(q,{context:e.context,field:t,key:t.id,mode:e.mode}))))}let Q=class extends z{_renderContent(){const{fieldContext:e,info:t,mode:n}=this,{visibleElements:i}=t;return(0,S.K)(X,{context:e,fields:[i.coordinates?t.effectiveX:void 0,i.coordinates?t.effectiveY:void 0,i.elevation?t.elevation:void 0,i.orientation?t.orientation:void 0,i.scale?t.scale:void 0],mode:n})}};Q=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentDrawMesh")],Q);let J=class extends z{_renderContent(){const{fieldContext:e,info:t,mode:n}=this,{elevation:i,visibleElements:r}=t;return(0,S.K)(X,{context:e,fields:[r.coordinates?t.effectiveX:void 0,r.coordinates?t.effectiveY:void 0,r.elevation?i:void 0],mode:n})}};J=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],J);const ee={absolute:"absolute-direction",relative:"relative-direction"};let te=class extends w.A{constructor(e){super(e),this.visibleElements={}}render(){return(0,S.K)("div",{class:y},this._isElementVisible("direction")?(0,S.K)(ne,{messages:this.messages,sketchOptions:this.sketchOptions}):null)}loadDependencies(){return(0,D.W)({button:()=>n.e(2974).then(n.bind(n,74769)),dropdown:()=>n.e(7209).then(n.bind(n,10582)),"dropdown-item":()=>n.e(2547).then(n.bind(n,70019)),"dropdown-group":()=>n.e(951).then(n.bind(n,75053))})}_isElementVisible(e){return this.visibleElements?.[e]??this.sketchOptions.tooltips.visibleElements[e]}};function ne(e){const{directionMode:t}=e.sketchOptions.values,n=e.messages?.sketch,i=n?.directionModeSelect?.title,r="absolute",o="relative";return(0,S.K)("calcite-dropdown",{key:"direction-mode",placement:"bottom-end",scale:"s",widthScale:"s",onCalciteDropdownSelect:t=>{const n=t.target.selectedItems?.[0]?.getAttribute("data-mode");e.sketchOptions.values.directionMode=n??"absolute"}},(0,S.K)("calcite-button",{alignment:"end",appearance:"transparent",iconStart:ee[t],kind:"neutral",label:i,scale:"s",slot:"trigger",title:i}),(0,S.K)("calcite-dropdown-group",{selectionMode:"single"},(0,S.K)("calcite-dropdown-item",{"data-mode":o,"data-testid":"tooltip-direction-mode-relative",iconStart:ee.relative,key:"relative",selected:t===o},n?.directionModeSelect?.relative),(0,S.K)("calcite-dropdown-item",{"data-mode":r,"data-testid":"tooltip-direction-mode-absolute",iconStart:ee.absolute,key:"absolute",selected:t===r},n?.directionModeSelect?.absolute)))}(0,i._)([(0,G.G)("esri/views/interactive/tooltip/t9n/Tooltip"),(0,l.MZ)()],te.prototype,"messages",void 0),(0,i._)([(0,l.MZ)()],te.prototype,"sketchOptions",void 0),(0,i._)([(0,l.MZ)()],te.prototype,"visibleElements",void 0),te=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.components.DrawHeaderActions")],te);let ie=class extends z{_renderContent(){const{fieldContext:e,info:t,mode:n}=this,{xyMode:i,visibleElements:r}=t;return(0,S.K)(X,{context:e,fields:[..."direction-distance"===i?[r.direction?t.direction:void 0,r.distance?t.distance:void 0]:[r.coordinates?t.effectiveX:void 0,r.coordinates?t.effectiveY:void 0],r.elevation?t.elevation:void 0,r.area?t.area:void 0],mode:n})}_renderActions(){const{xyMode:e,sketchOptions:t}=this.info;return(0,S.K)(te,{sketchOptions:t,visibleElements:{direction:"direction-distance"===e}})}};ie=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],ie);let re=class extends z{_renderContent(){const{fieldContext:e,info:t,mode:n}=this,{xyMode:i,visibleElements:r}=t;return(0,S.K)(X,{context:e,fields:[..."direction-distance"===i?[r.direction?t.direction:void 0,r.distance?t.distance:void 0]:[r.coordinates?t.effectiveX:void 0,r.coordinates?t.effectiveY:void 0],r.elevation?t.elevation:void 0,r.totalLength?t.totalLength:void 0],mode:n})}_renderActions(){const{xyMode:e,sketchOptions:t}=this.info;return(0,S.K)(te,{sketchOptions:t,visibleElements:{direction:"direction-distance"===e}})}};re=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],re);let oe=class extends z{_renderContent(){const{area:e,xSize:t,ySize:n,visibleElements:i}=this.info,r=this._messagesTooltip.sketch,o=this._formatters;return(0,S.K)(S.w,null,i.size&&null!=t&&null!=n?(0,S.K)(k,{title:r.size,value:(0,S.K)(E,{left:o.length(t),right:o.length(n)})}):null,i.area?(0,S.K)(k,{title:r.area,value:o.area(e)}):null)}};oe=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],oe);let se=class extends z{_renderContent(){const{angle:e,visibleElements:t}=this.info,n=this._messagesTooltip.sketch;return(0,S.K)(S.w,null,t.rotation?(0,S.K)(k,{title:n.rotation,value:this._formatters.angleRelative(e)}):null)}};se=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],se);let ae=class extends z{_renderContent(){const e=this.info,{visibleElements:t}=e,n=this._messagesTooltip.sketch,i=this._formatters;return(0,S.K)(S.w,null,t.size?(0,S.K)(k,{title:n.size,value:(0,S.K)(E,{left:i.length(e.xSize),right:i.length(e.ySize)})}):null,t.scale?(0,S.K)(k,{title:n.scale,value:(0,S.K)(E,{left:i.scale(e.xScale),right:i.scale(e.yScale)})}):null)}};ae=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],ae);let le=class extends z{_renderContent(){const{fieldContext:e,info:t,mode:n}=this,{visibleElements:i}=t;return(0,S.K)(X,{context:e,fields:[i.coordinates?t.effectiveX:void 0,i.coordinates?t.effectiveY:void 0,i.elevation?t.elevation:void 0],mode:n})}};le=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentMovePoint")],le);let ce=class extends z{_renderContent(){const{area:e,distance:t,totalLength:n,visibleElements:i}=this.info,r=this._messagesTooltip.sketch,o=this._formatters;return(0,S.K)(S.w,null,i.distance?(0,S.K)(k,{title:r.distance,value:o.lengthRelative(t)}):null,i.area&&null!=e?(0,S.K)(k,{title:r.area,value:o.area(e)}):null,i.totalLength&&null!=n?(0,S.K)(k,{title:r.totalLength,value:o.length(n)}):null)}};ce=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],ce);let ue=class extends z{_renderContent(){const{fieldContext:e,info:t,mode:n}=this,{visibleElements:i}=t;return(0,S.K)(X,{context:e,fields:[i.coordinates?t.effectiveX:void 0,i.coordinates?t.effectiveY:void 0,i.elevation?t.elevation:void 0,i.area&&"polygon"===t.geometryType?t.area:null,i.totalLength&&"polyline"===t.geometryType?t.totalLength:null],mode:n})}};ue=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentSelectedVertex")],ue);var de=n(88226);let he=class extends z{_renderContent(){const{info:e}=this,{visibleElements:t}=e,n=this._messagesTooltip.sketch,i=this._formatters;return(0,S.K)(S.w,null,t.orientation&&null!=e.orientation?(0,S.K)(k,{key:"orientation",title:n.orientation,value:(0,de.Nk)(e.orientation,e.rotationType,e.orientationPrecision)}):null,t.size&&null!=e.size?(0,S.K)(k,{key:"size",title:n.size,value:i.length(e.size,e.sizeUnit,e.sizePrecision)}):null)}};he=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],he);let pe=class extends z{_renderContent(){const{fieldContext:e,info:t,mode:n}=this,{visibleElements:i}=t;return(0,S.K)(X,{context:e,fields:[i.coordinates?t.effectiveX:void 0,i.coordinates?t.effectiveY:void 0,i.elevation?t.elevation:void 0,i.orientation?t.orientation:void 0,i.scale?t.scale:void 0],mode:n})}};pe=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentTransformMesh")],pe);let fe=class extends z{_renderContent(){const{fieldContext:e,info:t,mode:n}=this,{visibleElements:i}=t;return(0,S.K)(X,{context:e,fields:[i.coordinates?t.effectiveX:void 0,i.coordinates?t.effectiveY:void 0,i.elevation?t.elevation:void 0],mode:n})}};fe=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentTransformPoint")],fe);let me=class extends z{_renderContent(){const{info:e}=this,{visibleElements:t}=e,n=this._messagesTooltip.sketch;return(0,S.K)(S.w,null,t.rotation&&null!=e.rotation?(0,S.K)(k,{key:"rotation",title:n.rotation,value:(0,de.rJ)(e.rotation,e.rotationType,e.rotationPrecision)}):null,t.orientation&&null!=e.orientation?(0,S.K)(k,{key:"orientation",title:n.orientation,value:(0,de.Nk)(e.orientation,e.rotationType,e.orientationPrecision)}):null)}};me=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],me);let ge=class extends z{_renderContent(){const{info:e}=this,{visibleElements:t}=e,n=this._messagesTooltip.sketch,i=this._formatters;return(0,S.K)(S.w,null,t.scale&&null!=e.scale?(0,S.K)(k,{key:"scale",title:n.scale,value:i.percentage(e.scale)}):null,t.size&&null!=e.size?(0,S.K)(k,{key:"size",title:n.size,value:i.length(e.size,e.sizeUnit,e.sizePrecision)}):null)}};ge=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],ge);let ye=class extends z{_renderContent(){const{info:e}=this,{visibleElements:t}=e,n=this._messagesTooltip.sketch,i=this._formatters;return(0,S.K)(S.w,null,t.distance?(0,S.K)(k,{title:n.distance,value:i.length(e.distance)}):null)}};ye=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentTranslate")],ye);let ve=class extends z{_renderContent(){const{distance:e,elevation:t,area:n,totalLength:i,visibleElements:r}=this.info,o=this._messagesTooltip.sketch,s=this._formatters;return(0,S.K)(S.w,null,r.distance?(0,S.K)(k,{title:o.distance,value:s.length(e)}):null,r.elevation&&null!=t?.actual?(0,S.K)(k,{title:o.elevation,value:s.verticalLength(t.actual)}):null,r.area&&null!=n?(0,S.K)(k,{title:o.area,value:s.area(n)}):null,r.totalLength&&null!=i?(0,S.K)(k,{title:o.totalLength,value:s.length(i)}):null)}};ve=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],ve);let _e=class extends z{_renderContent(){const{info:e}=this,{visibleElements:t}=e,n=this._messagesTooltip.sketch,i=this._formatters;return(0,S.K)(S.w,null,t.distance?(0,S.K)(k,{title:n.distance,value:i.length(e.distance)}):null)}};_e=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentTranslateXY")],_e);let be=class extends z{_renderContent(){const{info:e}=this,{visibleElements:t}=e,n=this._messagesTooltip.sketch;return(0,S.K)(S.w,null,t.distance?(0,S.K)(k,{title:n.distance,value:this._formatters.verticalLengthRelative(e.distance)}):null)}};be=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],be);const xe={base:`${d}`};let we=class extends r.A.EventedAccessor{constructor(e){super(e),this.info=null,this.position=null,this.content=null,this.contentContainer=(()=>{const e=document.createElement("div");return e.classList.add(xe.base),(0,u.hY)(e),e})()}initialize(){const{contentContainer:e}=this;this.addHandles([(0,a.watch)((()=>this.view.overlay?.surface),(t=>{e.remove(),t?.appendChild(e)}),a.pc),(0,a.watch)((()=>this.info),((t,n)=>{if(null!=this.content&&null!=t&&null!=n&&t.type===n.type)this.content.info=t;else{this.content=(0,s.pR)(this.content);const n=function(e,t){if(null==t)return null;const n=document.createElement("div");switch(t.type){case"draw-point":return new J({tooltip:e,info:t,container:n});case"draw-polygon":return new ie({tooltip:e,info:t,container:n});case"draw-polyline":return new re({tooltip:e,info:t,container:n});case"draw-mesh":return new Q({tooltip:e,info:t,container:n});case"draw-rectangle":return new oe({tooltip:e,info:t,container:n});case"draw-circle":return new j({tooltip:e,info:t,container:n});case"extent-rotate":return new se({tooltip:e,info:t,container:n});case"extent-scale":return new ae({tooltip:e,info:t,container:n});case"move-point":return new le({tooltip:e,info:t,container:n});case"selected-vertex":return new ue({tooltip:e,info:t,container:n});case"transform-absolute":return new he({tooltip:e,info:t,container:n});case"transform-point":return new fe({tooltip:e,info:t,container:n});case"transform-mesh":return new pe({tooltip:e,info:t,container:n});case"transform-rotate":return new me({tooltip:e,info:t,container:n});case"transform-scale":return new ge({tooltip:e,info:t,container:n});case"translate":return new ye({tooltip:e,info:t,container:n});case"translate-vertex":return new ve({tooltip:e,info:t,container:n});case"translate-z":return new be({tooltip:e,info:t,container:n});case"translate-xy":return new _e({tooltip:e,info:t,container:n});case"reshape-edge-offset":return new ce({tooltip:e,info:t,container:n})}}(this,t);n&&(this.content=n,n.container&&e.appendChild(n.container),this.exitInputMode())}}),a.pc),(0,a.watch)((()=>({container:this.contentContainer,content:this.content,screenPoint:this._screenPoint,positionMode:this.positionMode,position:this.position})),Me,a.pc),(0,o.on)(this.contentContainer,"paste",(e=>{this.emit("paste",e)}))])}destroy(){this.info=null,this.content=(0,s.pR)(this.content),this.contentContainer.remove()}get positionMode(){return"input"===this.content?.mode?"fixed":"follow-cursor"}get mode(){return this.content?.mode??"feedback"}get _screenPoint(){const{inputManager:e}=this.view;return e?.multiTouchActive?null:e?.latestPointerLocation}get visible(){return"none"!==this.contentContainer?.style.display}clear(){this.info=null}async enterInputMode(e){await(this.content?.enterInputMode(e))}async exitInputMode(e){await(this.content?.exitInputMode(e))}};function Me(e){if("fixed"===e.positionMode&&!e.position)return;const{style:t}=e.container,n=e.position??e.screenPoint;if(null!=n&&null!=e.content){t.display="block";const i=(0,M.V8)(e.container),r=`translate(${Math.round(n.x)+Se[0]*(i?-1:1)}px, ${Math.round(n.y)+Se[1]}px)`;t.transform=i?`translate(-100%, 0) ${r}`:r}else t.display="none"}(0,i._)([(0,l.MZ)({nonNullable:!0})],we.prototype,"view",void 0),(0,i._)([(0,l.MZ)()],we.prototype,"info",void 0),(0,i._)([(0,l.MZ)()],we.prototype,"positionMode",null),(0,i._)([(0,l.MZ)()],we.prototype,"position",void 0),(0,i._)([(0,l.MZ)()],we.prototype,"content",void 0),(0,i._)([(0,l.MZ)()],we.prototype,"mode",null),(0,i._)([(0,l.MZ)()],we.prototype,"contentContainer",void 0),(0,i._)([(0,l.MZ)()],we.prototype,"_screenPoint",null),we=(0,i._)([(0,c.$)("esri.views.interactive.tooltip.Tooltip")],we);const Se=[20,20]},18063:function(e,t,n){"use strict";n.d(t,{Am:function(){return w},Gk:function(){return g},S3:function(){return _},fL:function(){return S},R0:function(){return y},em:function(){return M},LJ:function(){return b},dy:function(){return x},fr:function(){return v},Hw:function(){return T},uf:function(){return C}});var i=n(56275),r=n(49634),o=n(53804),s=n(83525),a=n(66110),l=n(23502),c=(n(58941),n(40633),n(13798),n(65953));let u=class extends s.A{constructor(e){super(e),this.actual=null,this.lockable=!0,this.id=(0,a.lk)(),this.inputValue=null,this.readOnly=!1,this.suffix=null,this.visible=!0,this.invalid=!1,this.unlockOnVertexPlacement=!0}get committed(){return this.lockable?this._get("committed"):null}set committed(e){this.lockable&&this._set("committed",e)}get dirty(){return null!=this.inputValue}get locked(){return this.lockable&&null!=this.committed}onInput(e){this.inputValue=e}onCommit(e,t,n){this.lockable?this._onCommitLockable(e,n):this._onCommitNonLockable(n),this.invalid&&"commit-and-exit"===e||n.onCommit(t,e)}_onCommitLockable(e,t){const{inputValue:n,locked:i}=this;i&&d(n)?this.unlock():("commit-and-exit"===e&&!i||null!=n)&&this._parseInputAndLock(t)}_onCommitNonLockable(e){const{inputValue:t}=this;d(t)?this.setActual(null):null!=t&&this._parseInputAndSetActual(e)}applyValue(e){this.lockable?this.lock(e):this.setActual(e)}clearInputValue(){this.inputValue=null,this.invalid=!1}setActual(e){this.actual=e,this.clearInputValue()}lock(e){this.lockable&&(this.committed=e??this.actual,this.clearInputValue())}unlock(){this.lockable&&(this.committed=null,this.clearInputValue())}toggleLock(e){this.lockable&&(this.locked?this.unlock():this._parseInputAndLock(e))}getSuffix(e){const{suffix:t}=this;return"function"==typeof t?t(e):t}getFormattedValue(e){const{actual:t,committed:n,format:i}=this;return null!=n?i(n,e):null!=t?i(t,e):null}getRawDisplayValue(e){const{actual:t,committed:n,inputValue:i}=this;return null!=i?i:this.lockable&&null!=n?this.formatForInputMode(n,e):null!=t?this.formatForInputMode(t,e):null}_parseInputAndSetActual(e){const{inputValue:t}=this;if(null==t||d(t))return this.setActual(null);const n=this.parse(t,e);null!=n?this.setActual(n):this.invalid=!0}_parseInputAndLock(e){const{inputValue:t,actual:n}=this;if(d(t))return this.unlock();if(null==t)return this.lock(n);const i=this.parse(t,e);null!=i?this.lock(i):this.invalid=!0}};function d(e){return null!=e&&""===e.trim()}(0,o._)([(0,l.MZ)()],u.prototype,"actual",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"committed",null),(0,o._)([(0,l.MZ)()],u.prototype,"dirty",null),(0,o._)([(0,l.MZ)()],u.prototype,"format",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"formatForInputMode",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"lockable",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"locked",null),(0,o._)([(0,l.MZ)()],u.prototype,"id",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"inputValue",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"name",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"parse",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"readOnly",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"suffix",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"title",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"visible",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"invalid",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"unlockOnVertexPlacement",void 0),u=(0,o._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipField")],u);let h=class extends u{constructor(e){super(e),this.showAsZ=!1}normalizeCtorArgs(e){const t=e=>e.inputUnitInfos.verticalLength.unit;return{name:"elevation",actual:i.r7,parse:(0,r.hw)(((e,n)=>(0,i.d_)(e,t(n)))),format:(e,t)=>t.formatters.verticalLength(e),formatForInputMode:(e,n)=>n.formatters.scalar((0,i.kM)(e,t(n))),suffix:e=>e.inputUnitInfos.verticalLength.abbreviation,title:e=>e.messages.sketch[this.showAsZ?"z":"elevation"],unlockOnVertexPlacement:!1,...e}}};(0,o._)([(0,l.MZ)()],h.prototype,"showAsZ",void 0),h=(0,o._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],h);var p=n(88226),f=n(99675);let m=class extends u{constructor(e){super(e),this.precision=1}normalizeCtorArgs(e){return{name:"orientation",actual:null,parse:(0,r.hw)(((e,t)=>(0,i.Wq)(e,(e=>e.inputUnitInfos.orientation.unit)(t),"geographic"))),format:e=>{const t=(0,f.P1)(e);return(0,p.Nk)(t,"geographic",this.precision)},formatForInputMode:(e,t)=>{const n=(0,f.P1)(e);return t.formatters.scalar(n)},suffix:e=>e.inputUnitInfos.orientation.abbreviation,title:e=>e.messages.sketch.orientation,...e}}};function g(e){const t=e=>e.inputUnitInfos.direction.unit,n=e=>e.sketchOptions.values.effectiveDirectionMode;return new u({name:"direction",actual:i.IV,parse:(0,r.hw)(((e,n)=>(0,i.Wq)(e,t(n),"geographic"))),format:(e,t)=>{const i=n(t),r=(0,f.jQ)(e,i);switch(i){case f.rZ.Absolute:return t.formatters.direction(r);case f.rZ.Relative:return t.formatters.directionRelative(r);case f.rZ.RelativeBilateral:return t.formatters.directionRelativeBilateral(r)}},formatForInputMode:(e,r)=>{const o=(0,f.jQ)(e,n(r));return r.formatters.scalar((0,i.kM)(o,t(r)))},suffix:e=>e.inputUnitInfos.direction.abbreviation,title:e=>{const t=n(e),{absolute:i,relative:r}=e.messages.sketch.direction;switch(t){case f.rZ.Absolute:return i;case f.rZ.Relative:case f.rZ.RelativeBilateral:return r}},...e})}function y(e){const t=e=>e.inputUnitInfos.length.unit;return new u({name:"distance",actual:i.r7,parse:(0,r.hw)(((e,n)=>(0,i.d_)(Math.max(e,0),t(n)))),format:(e,t)=>t.formatters.length(e),formatForInputMode:(e,n)=>n.formatters.scalar((0,i.kM)(e,t(n))),suffix:e=>e.inputUnitInfos.length.abbreviation,title:e=>e.messages.sketch.distance,...e})}function v(){return y({format:(e,t)=>t.formatters.totalLength(e),title:e=>e.messages.sketch.totalLength,readOnly:!0})}function _(e){return new h(e)}function b(e){return new m(e)}function x(e){return k("scale",{name:"scale",actual:null,parse:(0,r.hw)((e=>(0,i.LF)(Math.abs(e)))),...e})}function w(e){const t=e=>e.inputUnitInfos.area.unit;return new u({name:"area",actual:i.iT,parse:(0,r.hw)(((e,n)=>(0,i.gT)(e,t(n)))),format:(e,t)=>t.formatters.area(e),formatForInputMode:(e,n)=>n.formatters.scalar((0,i.kM)(e,t(n))),suffix:e=>e.inputUnitInfos.area.abbreviation,title:e=>e.messages.sketch.area,readOnly:!0,...e})}function M(e){return new u({name:"x",actual:i.IV,parse:r.L5,format:(e,t)=>t.formatters.longitudeDecimalDegrees(e),formatForInputMode:e=>(0,r.zX)(e),suffix:e=>e.inputUnitInfos.longitudeLatitude.abbreviation,title:e=>e.messages.sketch.longitude,...e})}function S(e){return new u({name:"y",actual:i.IV,parse:r.A3,format:(e,t)=>t.formatters.latitudeDecimalDegrees(e),formatForInputMode:e=>(0,r.oZ)(e),suffix:e=>e.inputUnitInfos.longitudeLatitude.abbreviation,title:e=>e.messages.sketch.latitude,...e})}function T(e){return k("x",{name:"x",...e})}function C(e){return k("y",{name:"y",...e})}function k(e,t){return new u({actual:(0,i.LF)(0),parse:(0,r.hw)((e=>(0,i.LF)(e))),format:(e,t)=>t.formatters.scalar(e),formatForInputMode:(e,t)=>t.formatters.scalar(e),title:t=>t.messages.sketch[e],...t})}(0,o._)([(0,l.MZ)()],m.prototype,"precision",void 0),m=(0,o._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipFieldOrientation")],m)},49634:function(e,t,n){"use strict";n.d(t,{A3:function(){return I},GC:function(){return d},L5:function(){return R},Nr:function(){return E},X3:function(){return P},hw:function(){return C},m6:function(){return O},oZ:function(){return _},zX:function(){return v}});var i=n(16691),r=n(88226),o=n(56275),s=n(6338),a=n(2900),l=n(99675);const c=1,u=6;function d(e,t){return{angleRelative:h,direction:p,directionRelative:f,directionRelativeBilateral:m,latitudeDecimalDegrees:y,longitudeDecimalDegrees:g,area:(n,i)=>(0,r.Jd)(e,n,i??t.area),length:(n,i,o)=>(0,r.ix)(e,n,i??t.length,o),lengthRelative:(n,i)=>(0,r.yh)(e,n,i??t.length),totalLength:(n,i)=>(0,r.ix)(e,n,i??t.length),verticalLength:(n,i)=>(0,r.Oo)(e,n,i??t.length),verticalLengthRelative:(n,i)=>(0,r.OM)(e,n,i??t.verticalLength),percentage:w,scalar:S,scale:M}}function h(e){return(0,a.ZV)(e,{signDisplay:"exceptZero",...T(c)})}function p(e){return(0,r.Nk)(e,e.rotationType,c)}function f(e){const t=(0,l.hF)(e);return(0,a.ZV)(t,{style:"unit",unitDisplay:"narrow",unit:"degree",signDisplay:t>0?"never":"exceptZero",...T(c)})}function m(e){return(0,r.Nk)(e,e.rotationType,c)}function g(e){return b(e,L)}function y(e){return b(e,V)}function v(e){return x(e,L)}function _(e){return x(e,V)}function b(e,t){return(0,r.Nk)((0,o.kM)(e,"degrees"),"geographic",u,t,!1)}function x(e,t){const n=t.normalize((0,o.kM)(e,"degrees").value,void 0,!1);return S((0,o.LF)(n),u)}function w(e){return(0,a.ZV)(e.value,{style:"percent"})}function M(e){return(0,a.ZV)(e,{style:"percent",maximumFractionDigits:0})}function S(e,t){return(0,a.ZV)(e.value,T(t))}function T(e){return{minimumFractionDigits:e,maximumFractionDigits:e}}function C(e){return(t,n)=>{const i=(0,a.$J)(t);return null!=i?e(i,n):null}}const k=e=>{let t=`[-+]?[0-9${e.thousands}]+`;return""!==e.decimal&&(t+=`${e.decimal}[0-9]+`),new RegExp(`^(${t}\\s*)${e.separator}(\\s*${t})$`,"i")},$=[];for(const e of[",","\\|","\\s+"])for(const t of["\\.",",",""])for(const n of["",",","\\."," ","\\s+"])e!==t&&e!==n&&t!==n&&$.push({separator:e,decimal:t,thousands:n,pattern:k({decimal:t,thousands:n,separator:e})});function E(e){for(const{decimal:t,thousands:n,pattern:i}of $){i.lastIndex=0;const r=e.match(i);if(!r)continue;const s=(0,a.$J)(A(r[1],t,n)),l=(0,a.$J)(A(r[2],t,n));if(null!=s&&null!=l)return{x:(0,o.LF)(s),y:(0,o.LF)(l)}}return null}function A(e,t,n){let i=e.replaceAll(/[\s+]/g,"");return""!==n&&(i=i.replaceAll(n,"")),""!==t&&(i=i.replaceAll(t,".")),i}function P(e){if(!e||null!=(0,a.$J)(e)||!(0,s.s1)())return null;const t=(0,s.o6)(e),n=O(t?.latitude),i=O(t?.longitude);return null!=i&&null!=n?{latitude:n,longitude:i}:null}function R(e){return O((0,s.mT)(e))}function I(e){return O((0,s.ts)(e))}function O(e){return null!=e?(0,o.Wq)(e,"degrees","geographic"):null}const L=new i.hr(-180,180),V=new i.hr(-90,90)},90858:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var i=n(53804),r=n(83525),o=n(23502),s=(n(58941),n(40633),n(13798),n(65953));let a=class extends r.A{constructor(e){super(e),this.helpMessage=void 0,this.viewType=void 0}get visibleElements(){return this.sketchOptions.tooltips.visibleElements}get allFields(){return[]}get editableFields(){return this.allFields.filter((e=>e.visible&&!e.readOnly))}clearInputValues(){this.allFields.forEach((e=>e.clearInputValue()))}};(0,i._)([(0,o.MZ)()],a.prototype,"sketchOptions",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"visibleElements",null),(0,i._)([(0,o.MZ)()],a.prototype,"helpMessage",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"viewType",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"allFields",null),(0,i._)([(0,o.MZ)()],a.prototype,"editableFields",null),a=(0,i._)([(0,s.$)("esri.views.interactive.tooltip.infos.SketchTooltipInfo")],a)},73919:function(e,t,n){"use strict";n.d(t,{B:function(){return d}});var i=n(53804),r=n(56275),o=n(23502),s=(n(58941),n(40633),n(13798),n(65953)),a=n(74471),l=n(18063),c=n(49634),u=n(99368);const d=e=>{let t=class extends e{constructor(){super(...arguments),this.longitude=(0,l.em)(),this.latitude=(0,l.fL)(),this.x=(0,l.Hw)(),this.y=(0,l.uf)(),this.elevation=(0,l.S3)(),this.geographic=!1}get effectiveX(){return this.geographic?this.longitude:this.x}get effectiveY(){return this.geographic?this.latitude:this.y}get key(){return{longitude:this.longitude.actual,latitude:this.latitude.actual,x:this.x.actual,y:this.y.actual,elevation:this.elevation.actual,geographic:this.geographic}}setLocationFromPoint(e,t=e?.spatialReference){if(this.geographic=!!t&&(0,u.yF)(t),null==e)return this._setActualLonLat(null,null),void this._setActualXY(null,null);if(this.geographic){const t=(0,a.QP)(e,h);this._setActualLonLat((0,c.m6)(t?.[0]),(0,c.m6)(t?.[1]))}else this._setActualXY((0,r.LF)(e.x),(0,r.LF)(e.y))}_setActualLonLat(e,t){this.longitude.actual=e,this.latitude.actual=t}_setActualXY(e,t){this.x.actual=e,this.y.actual=t}};return(0,i._)([(0,o.MZ)()],t.prototype,"geographic",void 0),(0,i._)([(0,o.MZ)()],t.prototype,"effectiveX",null),(0,i._)([(0,o.MZ)()],t.prototype,"effectiveY",null),(0,i._)([(0,o.MZ)()],t.prototype,"key",null),t=(0,i._)([(0,s.$)("esri.views.interactive.tooltip.infos.TooltipInfoWithCoordinates")],t),t},h=[0,0]},77664:function(e,t,n){"use strict";n.d(t,{HA:function(){return k},IA:function(){return _},Ue:function(){return v},mu:function(){return b},sZ:function(){return C},wG:function(){return T}});var i=n(77472),r=n(61226),o=n(15774),s=n(56275),a=n(62938),l=n(20551),c=n(32501),u=n(6338),d=(n(45532),n(36405)),h=n(67376),p=n(57652),f=n(1644),m=n(37578),g=n(49634),y=n(99675);function v(e,t){const n=(0,h.Hq)(t.vertexSpace),{scale:i,orientation:r}=e,{transform:o}=t,a=function(e){if(!e)return 0;const t=w(e.rotationAxis);return null!=t?t*e.rotationAngle:null}(o);n&&null!=a?(r.actual=(0,s.Wq)(a,"degrees","arithmetic"),r.visible=!0):(r.actual=null,r.visible=!1),n?(i.actual=(0,s.LF)(S(o)),i.visible=!0):(i.actual=null,i.visible=!1)}function _(e,t,n){if(!t||!(0,h.Hq)(t.vertexSpace))return;const i=t.transform??=new d.A,{rotationAngle:r,rotationAxis:o}=i,s=(0,y.Ef)(e.orientation.actual),a=w(o);if(null!=s&&null!=a&&s!==r){n?.onRotateStart?.(r);const e=s*a;i.rotationAngle=e,n?.onRotate?.(e),n?.onRotateStop?.(e)}const u=e.scale.actual?.value,p=S(i);if(null!=u&&u!==p){const{scale:e}=i;let t;if(n?.onScaleStart?.(e[0],e[1],e[2]),0===p)t=(0,c.o8)(c.Un);else{const n=u/p;t=(0,l.j)((0,c.vt)(),e,n)}i.scale=t,n?.onScale?.(t[0],t[1],t[2]),n?.onScaleStop?.(t[0],t[1],t[2])}}function b(e,t){const{x:n,y:i,z:r}=t,{x:l,y:c,z:u}=function(e,t){let n,i,r;if(e.geographic){n=(0,y.hF)(e.longitude.actual),i=(0,y.hF)(e.latitude.actual),(0,p.K8)(t)&&(null!=n&&null!=i?[n,i]=(0,f.je)(n,i,x):null!=n?n=(0,f.je)(n,0,x)[0]:null!=i&&(i=(0,f.je)(0,i,x)[1]));const o=e.elevation.actual,l=(0,a.mq)(t);r=null!=l&&null!=o?(0,s.l3)(o,l):void 0}else n=e.x.actual?.value,i=e.y.actual?.value,r=e.elevation.actual?.value;return{x:n,y:i,z:r}}(e,t.spatialReference);return{dx:null==l||(0,o.Io)(l,n)?0:l-n,dy:null==c||(0,o.Io)(c,i)?0:c-i,dz:null==u||null==r||(0,o.Io)(u,r)?0:u-r}}const x=[0,0];function w(e){return(0,l.G)(e,c.Cb)?1:(0,l.G)(e,M)?-1:null}const M=(0,l.k)((0,c.vt)(),c.Cb);function S(e){return e?Math.max(...e.scale):1}function T(e,t){return!("key-down"!==e.type||e.key!==m.ac.enterInputMode||!t||!function(e){const t=e?.sketchOptions;if(!t)return!1;const{inputEnabled:n,visibleElements:i}=t.tooltips;return n&&!0===e.editableFields.some((({name:e})=>"x"===e||"y"===e?i.coordinates:i[e]))}(t.info)||(t.enterInputMode(),e.stopPropagation(),0))}function C(e){let t=null;return(0,r.vE)([e.on("paste",(async n=>{t?.abort(),t=(0,i.UT)((async()=>{(0,u.s1)()||await(0,u.Hh)(),k(n,e.info)}))})),(0,i.UT)((()=>(0,u.Hh)())),(0,r.hA)((()=>t?.abort()))])}function k(e,t){if(!t||!("geographic"in t))return;const n=e.clipboardData?.getData("text");if(n)if(t.geographic){const i=(0,g.X3)(n);i&&(t.longitude.applyValue(i.longitude),t.latitude.applyValue(i.latitude),e.stopPropagation(),e.preventDefault())}else{const i=(0,g.Nr)(n);i&&(t.x.applyValue(i.x),t.y.applyValue(i.y),e.stopPropagation(),e.preventDefault())}}},81197:function(e,t,n){"use strict";var i;n.d(t,{M:function(){return i}}),function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"}(i||(i={}))},48961:function(e,t,n){"use strict";n.d(t,{Bb:function(){return k},W6:function(){return i},nu:function(){return $}});var i,r,o=n(14606),s=(n(58941),n(40633)),a=n(95929),l=n(69739),c=n(7187),u=n(60539),d=n(28181),h=n(85445),p=n(38504),f=n(47558),m=n(16164),g=n(81197),y=n(55213);(r=i||(i={})).RESOURCE_CONTROLLER_IMMEDIATE="immediate",r.RESOURCE_CONTROLLER="schedule",r.SLIDE="slide",r.STREAM_DATA_LOADER="stream loader",r.ELEVATION_QUERY="elevation query",r.TERRAIN_SURFACE="terrain",r.SURFACE_GEOMETRY_UPDATES="surface geometry updates",r.LOD_RENDERER="LoD renderer",r.GRAPHICS_CORE="Graphics3D",r.I3S_CONTROLLER="I3S",r.POINT_CLOUD_LAYER="point cloud",r.FEATURE_TILE_FETCHER="feature fetcher",r.OVERLAY="overlay",r.STAGE="stage",r.GRAPHICS_DECONFLICTOR="graphics deconflictor",r.FILTER_VISIBILITY="Graphics3D filter visibility",r.SCALE_VISIBILITY="Graphics3D scale visibility",r.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",r.POINT_OF_INTEREST_FREQUENT="POI frequent",r.POINT_OF_INTEREST_INFREQUENT="POI infrequent",r.LABELER="labeler",r.FEATURE_QUERY_ENGINE="feature query",r.FEATURE_TILE_TREE="feature tile tree",r.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",r.ELEVATION_ALIGNMENT="elevation alignment",r.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",r.TEXT_TEXTURE_ATLAS="text texture atlas",r.TEXTURE_UNLOAD="texture unload",r.LINE_OF_SIGHT_TOOL="line of sight tool",r.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",r.ELEVATION_PROFILE="elevation profile",r.SNAPPING="snapping",r.SHADOW_ACCUMULATOR="shadow accumulator",r.CLOUDS_GENERATOR="clouds generator",r[r.NONE=0]="NONE",r[r.TEST_PRIO=1]="TEST_PRIO";const v=new Map([[i.RESOURCE_CONTROLLER_IMMEDIATE,0],[i.RESOURCE_CONTROLLER,4],[i.SLIDE,0],[i.STREAM_DATA_LOADER,0],[i.ELEVATION_QUERY,0],[i.TERRAIN_SURFACE,1],[i.SURFACE_GEOMETRY_UPDATES,1],[i.LOD_RENDERER,2],[i.GRAPHICS_CORE,2],[i.I3S_CONTROLLER,2],[i.POINT_CLOUD_LAYER,2],[i.FEATURE_TILE_FETCHER,2],[i.OVERLAY,4],[i.STAGE,4],[i.GRAPHICS_DECONFLICTOR,4],[i.FILTER_VISIBILITY,4],[i.SCALE_VISIBILITY,4],[i.FRUSTUM_VISIBILITY,4],[i.CLOUDS_GENERATOR,4],[i.POINT_OF_INTEREST_FREQUENT,6],[i.POINT_OF_INTEREST_INFREQUENT,30],[i.LABELER,8],[i.FEATURE_QUERY_ENGINE,8],[i.FEATURE_TILE_TREE,16],[i.FEATURE_TILE_TREE_ACTIVE,0],[i.ELEVATION_ALIGNMENT,12],[i.ELEVATION_ALIGNMENT_SCENE,14],[i.TEXT_TEXTURE_ATLAS,12],[i.TEXTURE_UNLOAD,12],[i.LINE_OF_SIGHT_TOOL,16],[i.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[i.SNAPPING,0],[i.SHADOW_ACCUMULATOR,30]]);function _(e){return v.has(e)?v.get(e):"number"==typeof e?e:1}const b=(0,p.l5)(6.5),x=(0,p.l5)(1),w=(0,p.l5)(30),M=(0,p.l5)(1e3/30),S=(0,p.l5)(100);var T,C;!function(e){e.Scheduler=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((e=>e.needsUpdate))}constructor(){this._updating=(0,h.v)(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new l.A("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new n,this._state=g.M.INTERACTING,this._tasks=new c.A,this._runQueue=new c.A,this._load=0,this._idleStateCallbacks=new c.A,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=(0,d.watch)((()=>m.A.SCHEDULER_LOG_SLOW_TASKS),(e=>this._debug=e),d.Vh);for(const e of Object.keys(i))this.performanceInfo.tasks.set(i[e],new l.A(i[e]))}destroy(){this._tasks.toArray().forEach((e=>e.remove())),this._tasks.clear(),(0,a.xt)(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())})))}registerTask(e,n){const i=new t(this,e,n);return this._tasks.push(i),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new l.A(e)),i}registerIdleStateCallbacks(e,t){const n={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(n),this.state===g.M.IDLE&&this._idleUpdatesStartFired&&n.idleBegin();const i=this;return{remove:()=>this._removeIdleStateCallbacks(n),set idleBegin(e){i._idleUpdatesStartFired&&(n.idleEnd(),i._state===g.M.IDLE&&e()),n.idleBegin=e},set idleEnd(e){n.idleEnd=e}}}get load(){return this._load}set state(e){this._state!==e&&(this._state=e,this.state!==g.M.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((e=>e.idleEnd()))))}get state(){return this._state}updateBudget(e){++this._frameNumber;let t=b,n=e.frameDuration,i=x;switch(this.state){case g.M.IDLE:t=(0,p.l5)(0),n=(0,p.l5)(Math.max(S,e.frameDuration)),i=w;break;case g.M.INTERACTING:n=(0,p.l5)(Math.max(M,e.frameDuration));case g.M.ANIMATING:}return n=(0,p.l5)(n-e.elapsedFrameTime-t),this.state!==g.M.IDLE&&n<x&&!this._forceTask?(this._forceTask=!0,!1):(n=(0,p.l5)(Math.max(n,i)),this._budget.reset(n,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case g.M.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((e=>e.idleBegin()))),this._runIdle();break;case g.M.INTERACTING:this._runInteracting();break;default:this._runAnimating()}}stopFrame(){this._budget.reset((0,p.l5)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)}removeTask(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e),this._updatingChanged()}_updateTask(e){this._tasks.forAll((t=>{t.name===e&&t.setPriority(e)}))}_getState(e){if(this._runQueue.some((t=>t.name===e)))return C.SCHEDULED;let t=C.IDLE;return this._tasks.forAll((n=>{n.name===e&&n.needsUpdate&&(n.schedulePriority<=1?t=C.READY:t!==C.READY&&(t=C.WAITING))})),t}_getRuntime(e){let t=0;return this._tasks.forAll((n=>{n.name===e&&(t+=n.runtime)})),t}_resetRuntimes(){this._tasks.forAll((e=>e.runtime=0))}_getRunning(){const e=new Map;if(this._tasks.forAll((t=>{t.needsUpdate&&e.set(t.name,(e.get(t.name)||0)+1)})),0===e.size)return null;let t="";return e.forEach(((e,n)=>{t+=e>1?` ${e}x ${n}`:` ${n}`})),t}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce(((e,t)=>t.needsUpdate?++e:e),0);this._load=.9*this._load+e*(1-.9)}_schedule(){for(this._runQueue.filterInPlace((e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1))),this._tasks.forAll((e=>{0===e.basePriority&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)}));0===this._runQueue.length;){let e=!1,t=0;if(this._tasks.forAll((n=>{n.needsUpdate&&0!==n.schedulePriority&&0!==n.basePriority&&n.blockFrame!==this._frameNumber&&(e=!0,t=Math.max(t,n.basePriority),1===n.schedulePriority?(n.schedulePriority=0,this._runQueue.push(n)):--n.schedulePriority)})),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const e=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const t=this._budget.now(),n=this._runQueue.pop();this._budget.resetProgress();try{n.task.runTask(this._budget)===y.G&&(n.blockFrame=this._frameNumber)}catch(e){s.A.getLogger("esri.views.support.Scheduler").error(`Exception in task "${n.name}"`,e),n.blockFrame=this._frameNumber}!this._budget.hasProgressed&&n.blockFrame!==this._frameNumber&&n.needsUpdate&&(n.name,i.I3S_CONTROLLER,n.blockFrame=this._frameNumber),n.schedulePriority=n.basePriority;const r=this._budget.now()-t;if(n.runtime+=r,this._frameTaskTimes.set(n.priority,this._frameTaskTimes.get(n.priority)+r),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-e)}}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-e)}_startFrameTaskTimes(){for(const e of Object.keys(i))this._frameTaskTimes.set(i[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach(((e,t)=>this.performanceInfo.tasks.get(t).record(e))),this.performanceInfo.total.record(e)}get test(){}};class t{get task(){return this._task.value}get updating(){return this._queue.running}constructor(e,t,n){this._scheduler=e,this.name=t,this.blockFrame=0,this.runtime=0,this._queue=new f.T,this._handles=new o.A,this._basePriority=_(t),this.schedulePriority=this._basePriority,this._task=(0,h.v)(null!=n?n:this._queue),this._handles.add((0,d.when)((()=>this.task.running),(t=>e.taskRunningChanged(t))))}remove(){this.processQueue(k),this._scheduler.removeTask(this),this.schedule=$.schedule,this.reschedule=$.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const t=_(e);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=t),this._basePriority=t}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.updating||this.task.running}schedule(e,t,n){return this._queue.push(e,t,n)}reschedule(e,t,n){return this._queue.unshift(e,t,n)}processQueue(e){return this._queue.runTask(e)}}class n{constructor(){this._begin="undefined"!=typeof performance?performance.now():0,this._budget=0,this._state=g.M.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(!0===e()&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e,t){this._begin=this.now(),this._budget=e,this._state=t,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=n}(T||(T={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(C||(C={}));const k=(()=>{const e=new T.Budget;return e.enabled=!1,e})(),$=new class{remove(){}processQueue(){}schedule(e,t,n){try{if((0,u.G4)(t)){const e=(0,u.NK)();return n?Promise.resolve(n(e)):Promise.reject(e)}return(0,u.z7)(e(k))}catch(e){return Promise.reject(e)}}reschedule(e,t,n){return this.schedule(e,t,n)}}},55213:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});const i=Symbol("Yield")},70474:function(e,t,n){"use strict";n.d(t,{n:function(){return w}});var i=n(56275),r=n(62938),o=n(59122),s=n(20551),a=n(32501),l=n(68734),c=n(5596),u=n(67496),d=n(19271);function h(e,t,n=e.hasZ){const o=(0,d.l)(e.spatialReference),h=(0,r.B5)(o);if(null==h)return null;const g=(e,t)=>!(t.length<2||((0,s.s)(e,t[0],t[1],n&&t[2]||0),0));let y=0;for(const n of e.rings){const i=n.length;if(i<3)continue;const{positionsWorldCoords:r}=t;for(;r.length<i;)r.push((0,a.vt)());const d=p,h=(0,s.s)(f,0,0,0),v=1/i;for(let t=0;t<i;t++){if(!g(d,n[t]))return null;if(!(0,l.F)(d,e.spatialReference,r[t],o))return null;(0,s.r)(h,h,r[t],v)}const _=(0,c.Cr)(r[0],r[1],h,(0,c.LV)());if(0===(0,s.q)((0,c.Qj)(_)))continue;for(let e=0;e<i;e++)(0,c.Z1)(_,h,r[e],r[e]);const b=m(r);for(let e=0;e<b.length;e+=3)y+=(0,u.Fm)(r[b[e]],r[b[e+1]],r[b[e+2]])}return(0,i.gT)(y,h)}const p=(0,a.vt)(),f=(0,a.vt)();function m(e){return(0,o.e)(function(e){const t=new Float64Array(2*e.length);for(let n=0;n<e.length;++n){const i=e[n],r=2*n;t[r]=i[0],t[r+1]=i[1]}return t}(e),[],2)}var g=n(22162),y=n(57862),v=n(99368);function _(e){const{spatialReference:t}=e;return(0,v.M0)(t,b,x,e)}function b(e){return(0,i.gT)(Math.abs((0,y.qy)([e],"square-meters")[0]),"square-meters")}function x(e){try{return(0,i.gT)(Math.abs((0,g.geodesicArea)(e,"square-meters")),"square-meters")}catch(e){return null}}function w(e,t={positionsWorldCoords:[]}){return function(e,t,n={positionsWorldCoords:[]}){if("on-the-ground"===t){const t=_(e);return null!=t?t:function(e,t={positionsWorldCoords:[]}){return h(e,t,!1)}(e,n)}return function(e,t={positionsWorldCoords:[]}){return h(e,t)}(e,n)}(e,"on-the-ground",t)}},9862:function(e,t,n){"use strict";n.d(t,{Do:function(){return l},Kt:function(){return a},ob:function(){return s}});var i=n(32501),r=n(46517),o=n(1428);function s(e){return(0,o.mh)(e)??(0,r.Xg)(e)}function a(e,t){return(0,o.Og)(e,t)??(0,r.ll)(e,t)}function l(e,t,n){return c[0]=e[0],c[1]=e[1],c[2]=3===e.length?e[2]:0,u[0]=t[0],u[1]=t[1],u[2]=3===t.length?t[2]:0,(0,o.n3)(c,u,n)??(0,r.sT)(c,u,n)}const c=(0,i.vt)(),u=(0,i.vt)()},16164:function(e,t,n){"use strict";n.d(t,{A:function(){return l}});var i=n(53804),r=n(83525),o=n(23502),s=(n(58941),n(40633),n(13798),n(65953));let a=class extends r.A{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};(0,i._)([(0,o.MZ)()],a.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),a=(0,i._)([(0,s.$)("esri.views.support.debugFlags")],a);const l=new a},33383:function(e,t,n){"use strict";n.d(t,{V:function(){return s},t:function(){return a}}),n(50917);var i=n(62938),r=n(82418),o=n(91484);function s(e,t,n,r=new o.default){let s=0;if("2d"===n.type)s=t*(n.resolution??0);else if("3d"===n.type){const r=n.overlayPixelSizeInMapUnits(e),o=n.basemapSpatialReference;s=null==o||o.equals(n.spatialReference)?t*r:(0,i.GA)(o)/(0,i.GA)(n.spatialReference)}const a=e.x-s,l=e.y-s,c=e.x+s,u=e.y+s,{spatialReference:d}=n;return r.xmin=Math.min(a,c),r.ymin=Math.min(l,u),r.xmax=Math.max(a,c),r.ymax=Math.max(l,u),r.spatialReference=d,r}function a(e,t,n){const i=n.toMap(e);return null!=i&&s(i,(0,r.o)(),n,l).intersects(t)}const l=new o.default},46517:function(e,t,n){"use strict";n.d(t,{Of:function(){return m},Qc:function(){return g},Xg:function(){return h},cL:function(){return _},e5:function(){return f},ll:function(){return p},sT:function(){return v}});var i,r,o=n(56275),s=n(62938),a=n(20551),l=n(32501),c=n(68734),u=n(57652),d=n(19271);function h(e){return function(e,t){const{hasZ:n,spatialReference:r}=e,a=(0,d.l)(r);let l=0;const c=(0,s._H)(a);if(null==c)return null;const u=t===i.Direct?y:v;for(const t of e.paths){if(t.length<2)continue;const e=t.length-1;for(let i=0;i<e;++i){const e=t[i];x[0]=e[0],x[1]=e[1],x[2]=n?e[2]:0;const o=t[i+1];w[0]=o[0],w[1]=o[1],w[2]=n?o[2]:0;const s=u(x,w,r);if(null==s)return null;l+=s.value}}return(0,o.d_)(l,c)}(e,i.Horizontal)}function p(e,t){const{spatialReference:n}=e;return(0,u.aI)(n,t.spatialReference)?(x[0]=e.x,x[1]=e.y,x[2]=e.hasZ?e.z:0,w[0]=t.x,w[1]=t.y,w[2]=t.hasZ?t.z:0,v(x,w,n)):null}function f(e,t){const{spatialReference:n}=e;return(0,u.aI)(n,t.spatialReference)?(x[0]=e.x,x[1]=e.y,x[2]=e.hasZ?e.z:0,w[0]=t.x,w[1]=t.y,w[2]=t.hasZ?t.z:0,_(x,w,n)):null}function m(e){return null!=e?g(e.hasZ?e.z:0,e.spatialReference):null}function g(e,t){const n=(0,s.mq)(t);return null!=n?(0,o.d_)(e??0,n):null}function y(e,t,n){const r=b(e,t,n,i.Direct);return null!=r?(0,o.d_)(r.direct,r.unit):null}function v(e,t,n){const r=b(e,t,n,i.Horizontal);return null!=r?(0,o.d_)(r.horizontal,r.unit):null}function _(e,t,n){const r=b(e,t,n,i.Vertical);return null!=r?(0,o.d_)(r.verticalSigned,r.unit):null}function b(e,t,n,r){const o=(0,d.l)(n),l=(0,s._H)(o);if(null==l)return null;const u=t[2]-e[2];if(r===i.Vertical)return{verticalSigned:u,unit:l};if(!(0,c.F)(e,n,M,o)||!(0,c.F)(t,n,S,o))return null;if(r===i.Direct)return{direct:(0,a.p)(S,M),unit:l};if((0,a.s)(T,e[0],e[1],t[2]),!(0,c.F)(T,n,T,o))return null;const h=(0,a.p)(T,S);return r===i.Horizontal?{horizontal:h,unit:l}:{direct:(0,a.p)(S,M),horizontal:h,vertical:Math.abs(u),unit:l}}(r=i||(i={}))[r.Direct=0]="Direct",r[r.Horizontal=1]="Horizontal",r[r.Vertical=2]="Vertical";const x=(0,l.vt)(),w=(0,l.vt)(),M=(0,l.vt)(),S=(0,l.vt)(),T=(0,l.vt)()},19271:function(e,t,n){"use strict";n.d(t,{l:function(){return s}});var i=n(61714),r=n(96611),o=n(57652);function s(e){return(0,o.B3)(e)?(0,o.oT)(e)||(0,o.K8)(e)||(0,o.x1)(e)||(0,i.jA)(e)?r.Y0:e:(0,r.lO)(e)}},31267:function(e,t,n){"use strict";n.d(t,{A:function(){return Z}});var i=n(53804),r=(n(64122),n(88022)),o=n(88264),s=n(48996),a=n(40212),l=(n(58941),n(21609)),c=n(40633),u=n(95929),d=n(62560),h=n(60539),p=n(28181),f=n(66110),m=n(23502),g=n(77560),y=n(65953),v=n(44567),_=n(6792),b=n(92781);n(81401);const x={handleInterceptedEvent:(e,t,n,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||n,[i]))},w={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,n)=>{"-"===t.charAt(0)?e.style.setProperty(t,n):e.style[t]=n}},M=(e,t,n=!1)=>{let i=e;return t.forEach(((e,r)=>{const o=i?.children?((e,t)=>e.find(t))(i.children,(t=>t.domNode===e)):void 0;n&&!o&&r!==t.length-1||(i=o)})),i};var S=n(96018),T=n(69987),C=n(50074);const k=new Set;var $,E=n(15351),A=n(20457),P=n(22739),R=n(38225);let I=0;function O(e,t){const n=Object.prototype.hasOwnProperty;for(const i in t)n.call(t,i)&&n.call(e,i)&&(null!=e[i]&&null!=t[i]&&"object"==typeof e[i]&&"object"==typeof t[i]?O(e[i],t[i]):e[i]=t[i]);return e}const L=(e=>{let t;const n={...x,...e},i=(o=n,{...w,...o}),r=i.performanceLogger;var o;let s,a=!0,l=!1;const c=[],u=[],d=(e,o,s)=>{let a;i.eventHandlerInterceptor=(e,i,o,s)=>function(e){let i;r("domEvent",e);const o=((e,t)=>{const n=[];for(;e&&e!==t;)n.push(e),e=e.parentNode;return n})(e.currentTarget,a.domNode),s=o.some((e=>customElements.get(e?.tagName?.toLowerCase())));if(e.eventPhase!==Event.CAPTURING_PHASE&&s){const t=e.composedPath(),n=t.slice(t.indexOf(e.currentTarget),t.indexOf(a.domNode)).reverse();i=M(a.getLastRender(),n,!0)}else o.reverse(),i=M(a.getLastRender(),o);let l;return i&&(l=n.handleInterceptedEvent(t,i,this,e)),r("domEventProcessed",e),l},n.postProcessProjectionOptions?.(i);const l=s();a=e(o,l,i),i.eventHandlerInterceptor=void 0,c.push(a),u.push(s),n.afterFirstVNodeRendered&&n.afterFirstVNodeRendered(a,l)};let h=()=>{if(s=void 0,a){a=!1,r("renderStart",void 0);for(let e=0;e<c.length;e++){const t=u[e]();r("rendered",void 0),c[e].update(t),r("patched",void 0)}r("renderDone",void 0),a=!0}};return n.modifyDoRenderImplementation&&(h=n.modifyDoRenderImplementation(h,c,u)),t={renderNow:h,scheduleRender:()=>{s||l||(s=requestAnimationFrame(h))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),l=!0},resume:()=>{l=!1,a=!0,t.scheduleRender()},append:(e,t)=>{d(b.t.append,e,t)},insertBefore:(e,t)=>{d(b.t.insertBefore,e,t)},merge:(e,t)=>{d(b.t.merge,e,t)},replace:(e,t)=>{d(b.t.replace,e,t)},detach:e=>{for(let t=0;t<u.length;t++)if(u[t]===e)return u.splice(t,1),c.splice(t,1)[0];throw new Error("renderFunction was not found")}},t})({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,n=/capture$/i;e.eventHandlerInterceptor=(e,i,r,o)=>{const s=t?.(e,i,r,o),a=n.test(e);if(!((e=e.replace(n,"")).toLowerCase()in r)||a){const t=e[2].toLowerCase()+e.slice(3),n=e=>s?.call(r,e);r.addEventListener(t,n,a);const i=()=>r.removeEventListener(t,n,a),l=o.afterRemoved;o.afterRemoved=e=>{l?.(e),i()}}return s}},handleInterceptedEvent(e,t,n,i){const{eventPhase:r,type:o}=i,s=r===Event.CAPTURING_PHASE;let a=`on${o}${s?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${o[0].toUpperCase()}${o.slice(1)}${s?"Capture":""}`,l&&a in l))&&((0,E.Sh)(),e.scheduleRender(),l[a].call(l.bind||n,i))}});let V=!1,N=class extends((0,d.g)(s.A.EventedAccessor)){constructor(e,t){super(e,t),this._attached=!1,this._projector=L,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=(0,h.sg)((async()=>{if(this._messageBundleProps?.length){const e=await Promise.allSettled(this._messageBundleProps.map((async({bundlePath:e,propertyName:t})=>{if(this.destroyed)return;let n=await(0,R.ud)(e);this.uiStrings&&Object.keys(this.uiStrings)&&(n=O((0,l.o8)(n),this.uiStrings)),this[t]=n})));if(this.destroyed)return;for(const t of e)"rejected"===t.status&&c.A.getLogger(this).error("widget-intl:locale-error",this.declaredClass,t.reason)}await this.loadLocale()})),(0,S.V)();const n="esri-widget-uid-"+(0,f.lk)(),i=this.render.bind(this);this._trackingTarget=new _.r((()=>{this.autoRenderingEnabled&&this.scheduleRender()}));const r=()=>({vnodeSelector:"div",properties:{key:`${n}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const e=i()??r(),t=e.properties??={};if(t.key??=n,(0,T.b)(e.vnodeSelector)){if(!this.visible)return r()}else this.visible?t.styles||(t.styles={}):(t.class="",t.styles={display:"none"}),t.styles.display??="";let o=0;return e.children?.forEach((e=>{(0,T.b)(e.vnodeSelector)||(e.properties??={},e.properties.key??=`${this.id}--${o++}`)})),(0,T.d)(this,e)};this.render=()=>{if(V)return o();let e=(0,E.rE)(this)??null;if(e)return e;this._trackingTarget.clear(),V=!0;try{e=(0,v.a)(this._trackingTarget,o)}catch(e){throw c.A.getLogger(this).error(e),e}finally{V=!1}return e&&(0,E.$U)(this,e),e};const s=this.beforeFirstRender();var a;s?this._resourcesFetch=s.then((()=>{this._readyForTrueRender=!0,this._postInitialize()})):(this._resourcesFetch=Promise.resolve().then((()=>{this._postInitialize()})),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),a=this._resourcesFetch,k.add(a),a.finally((()=>k.delete(a)))}normalizeCtorArgs(e,t){const n={...e};return t&&(n.container=t),n}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then((()=>{})).catch(h.jH):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||((0,u.pR)(this._trackingTarget),(0,u.pR)(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,(0,E.Qw)(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return(0,o.$H)(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+I++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[($=C.x,C.D)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||((0,E.Qw)(this),this._projector.scheduleRender())}own(e){(0,r.eO)(c.A.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return A.Ly.apply(this,e)}renderNow(){(0,E.Qw)(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles((0,p.watch)((()=>this.viewModel),((e,t)=>{t&&this.removeHandles("delegated-events"),e&&(0,a.wb)(e)&&this.addHandles(this._delegatedEventNames.map((t=>(0,a.on)(e,t,(e=>{this.emit(t,e)})))),"delegated-events")}),p.pc)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(h.jH),this.scheduleRender()};this.addHandles([(0,P.oQ)(e),(0,p.watch)((()=>this.uiStrings),e),(0,p.when)((()=>this.container),(e=>{this.destroyed||this._attach(e)}),{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}};N[$]=!0,(0,i._)([(0,m.MZ)()],N.prototype,"_readyForTrueRender",void 0),(0,i._)([(0,m.MZ)({value:null})],N.prototype,"container",null),(0,i._)([(0,g.w)("container")],N.prototype,"castContainer",null),(0,i._)([(0,m.MZ)()],N.prototype,"icon",null),(0,i._)([(0,m.MZ)()],N.prototype,"id",null),(0,i._)([(0,m.MZ)()],N.prototype,"label",null),(0,i._)([(0,m.MZ)()],N.prototype,"renderable",null),(0,i._)([(0,m.MZ)()],N.prototype,"uiStrings",void 0),(0,i._)([(0,m.MZ)()],N.prototype,"viewModel",void 0),(0,i._)([(0,m.MZ)({value:!0})],N.prototype,"visible",null),(0,i._)([(0,m.MZ)()],N.prototype,"key",void 0),(0,i._)([(0,m.MZ)()],N.prototype,"children",void 0),(0,i._)([(0,m.MZ)()],N.prototype,"afterCreate",void 0),(0,i._)([(0,m.MZ)()],N.prototype,"afterUpdate",void 0),(0,i._)([(0,m.MZ)()],N.prototype,"afterRemoved",void 0),N=(0,i._)([(0,y.$)("esri.widgets.Widget")],N);const Z=N},96018:function(e,t,n){"use strict";n.d(t,{V:function(){return c},W:function(){return u}});var i=n(4507),r=n(17858);function o(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,n=()=>e.contains(i.d)||e.contains(i.a)&&t?"dark":"light",r=e=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:e}})),o=e=>{s!==e&&r(e),s=e};let s=n();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>o(e.matches?"dark":"light"))),new MutationObserver((()=>o(n()))).observe(document.body,{attributes:!0,attributeFilter:["class"]})}"undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document&&("interactive"===document.readyState?o():document.addEventListener("DOMContentLoaded",(()=>o()),{once:!0}));var s=n(53216),a=(n(58941),n(90683));let l;function c(){try{(0,r.OX)(".")}catch{(0,r.Qu)((0,a.s2)((0,s.s)(l)))}}function u(e){const t=[];for(const n of Object.keys(e))customElements.get(`calcite-${n}`)||t.push(e[n]?.());return t.length>0?Promise.all(t):null}l="components/assets"},90357:function(e,t,n){"use strict";function i(e){return(t,n)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:n})}}n.d(t,{G:function(){return i}})},49146:function(e,t,n){"use strict";n.d(t,{K:function(){return a},w:function(){return l}});var i=n(69987),r=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},o=function(e,t){for(var n=0,i=e.length;n<i;n++){var s=e[n];Array.isArray(s)?o(s,t):null!=s&&!1!==s&&(s.hasOwnProperty("vnodeSelector")||(s=r(s)),t.push(s))}},s=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(1===n.length&&"string"==typeof n[0])return{vnodeSelector:e,properties:t||void 0,children:void 0,text:n[0],domNode:null};var r=[];return o(n,r),{vnodeSelector:e,properties:t||void 0,children:r,text:void 0,domNode:null}};function a(e,t,...n){return"function"!=typeof e||(0,i.b)(e)?s(e,t,...n):e(t,...n)}function l(...e){return e}},69987:function(e,t,n){"use strict";n.d(t,{b:function(){return h},d:function(){return l}});var i=n(61226),r=n(50074);const o=[],s={},a=new WeakMap;function l(e,t){let n=t.children;if(n?.length)for(let t=0;t<n.length;++t)n[t]=l(e,n[t]);else n=o;const i=t.vnodeSelector;if(h(i)){const r=t.properties||s,o=r.key||i;return{vnodeSelector:"div",properties:{key:o,afterCreate:c,afterUpdate:u,afterRemoved:d,parentWidget:e,widgetConstructor:i,widgetProperties:{...r,key:o,children:n}},children:void 0,text:void 0,domNode:null}}return t}function c(e,t,n,{parentWidget:o,widgetConstructor:s,widgetProperties:l}){const c=new s(l);c.container=e,a.set(e,c),c.afterCreate?.(c,e),o.addHandles((0,i.hA)((()=>d(e)))),queueMicrotask((()=>{c[r.D].projector.renderNow()}))}function u(e,t,n,{widgetProperties:i}){const r=a.get(e);r&&(r.set(i),r.afterUpdate?.(r,e))}function d(e){const t=a.get(e);t&&(t.afterRemoved?.(t,e),t.destroy(),a.delete(e))}function h(e){return"function"==typeof e&&e[r.x]}},50074:function(e,t,n){"use strict";n.d(t,{D:function(){return r},x:function(){return i}});const i=Symbol("widget"),r=Symbol("widget-test-data")},15351:function(e,t,n){"use strict";n.d(t,{$U:function(){return s},Qw:function(){return a},Sh:function(){return r},rE:function(){return o}});const i=new Map;function r(){i.clear()}function o(e){return i.get(e)}function s(e,t){i.set(e,t)}function a(e){i.delete(e)}},20457:function(e,t,n){"use strict";n.d(t,{Ly:function(){return ce},N_:function(){return de},OU:function(){return ge},V8:function(){return ue},W5:function(){return me},cA:function(){return he}});var i=function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r={exports:{}},o={},s={exports:{}},a={};function l(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var c=/javascript\s*\:/gim;a.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},a.getDefaultWhiteList=l,a.onAttr=function(e,t,n){},a.onIgnoreAttr=function(e,t,n){},a.safeAttrValue=function(e,t){return c.test(t)?"":t};var u={indexOf:function(e,t){var n,i;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var i,r;if(Array.prototype.forEach)return e.forEach(t,n);for(i=0,r=e.length;i<r;i++)t.call(n,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},d=u,h=a,p=function(e,t){";"!==(e=d.trimRight(e))[e.length-1]&&(e+=";");var n=e.length,i=!1,r=0,o=0,s="";function a(){if(!i){var n=d.trim(e.slice(r,o)),a=n.indexOf(":");if(-1!==a){var l=d.trim(n.slice(0,a)),c=d.trim(n.slice(a+1));if(l){var u=t(r,s.length,l,c,n);u&&(s+=u+"; ")}}}r=o+1}for(;o<n;o++){var l=e[o];if("/"===l&&"*"===e[o+1]){var c=e.indexOf("*/",o+2);if(-1===c)break;r=(o=c+1)+1,i=!1}else"("===l?i=!0:")"===l?i=!1:";"===l?i||a():"\n"===l&&a()}return d.trim(s)};function f(e){return null==e}function m(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||h.whiteList,e.onAttr=e.onAttr||h.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||h.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||h.safeAttrValue,this.options=e}m.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,i=t.onAttr,r=t.onIgnoreAttr,o=t.safeAttrValue;return p(e,(function(e,t,s,a,l){var c=n[s],u=!1;if(!0===c?u=c:"function"==typeof c?u=c(a):c instanceof RegExp&&(u=c.test(a)),!0!==u&&(u=!1),a=o(s,a)){var d,h={position:t,sourcePosition:e,source:l,isWhite:u};return u?f(d=i(s,a,h))?s+":"+a:d:f(d=r(s,a,h))?void 0:d}}))};var g=m;!function(e,t){var n=a,i=g;for(var r in(t=e.exports=function(e,t){return new i(t).process(e)}).FilterCSS=i,n)t[r]=n[r]}(s,s.exports);var y=s.exports,v={indexOf:function(e,t){var n,i;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var i,r;if(Array.prototype.forEach)return e.forEach(t,n);for(i=0,r=e.length;i<r;i++)t.call(n,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},_=y.FilterCSS,b=y.getDefaultWhiteList,x=v;var w=new _;function M(e){return e.replace(S,"&lt;").replace(T,"&gt;")}var S=/</g,T=/>/g,C=/"/g,k=/&quot;/g,$=/&#([a-zA-Z0-9]*);?/gim,E=/&colon;?/gim,A=/&newline;?/gim,P=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,R=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,I=/u\s*r\s*l\s*\(.*/gi;function O(e){return e.replace(C,"&quot;")}function L(e){return e.replace(k,'"')}function V(e){return e.replace($,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function N(e){return e.replace(E,":").replace(A," ")}function Z(e){for(var t="",n=0,i=e.length;n<i;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return x.trim(t)}function D(e){return Z(e=N(e=V(e=L(e))))}function G(e){return M(e=O(e))}o.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},o.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},o.onTag=function(e,t,n){},o.onIgnoreTag=function(e,t,n){},o.onTagAttr=function(e,t,n){},o.onIgnoreTagAttr=function(e,t,n){},o.safeAttrValue=function(e,t,n,i){if(n=D(n),"href"===t||"src"===t){if("#"===(n=x.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(P.lastIndex=0,P.test(n))return""}else if("style"===t){if(R.lastIndex=0,R.test(n))return"";if(I.lastIndex=0,I.test(n)&&(P.lastIndex=0,P.test(n)))return"";!1!==i&&(n=(i=i||w).process(n))}return G(n)},o.escapeHtml=M,o.escapeQuote=O,o.unescapeQuote=L,o.escapeHtmlEntities=V,o.escapeDangerHtml5Entities=N,o.clearNonPrintableCharacter=Z,o.friendlyAttrValue=D,o.escapeAttrValue=G,o.onIgnoreTagStripAll=function(){return""},o.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),i=[],r=!1;return{onIgnoreTag:function(o,s,a){if(function(t){return!!n||-1!==x.indexOf(e,t)}(o)){if(a.isClosing){var l=a.position+10;return i.push([!1!==r?r:a.position,l]),r=!1,"[/removed]"}return r||(r=a.position),"[removed]"}return t(o,s,a)},remove:function(e){var t="",n=0;return x.forEach(i,(function(i){t+=e.slice(n,i[0]),n=i[1]})),t+=e.slice(n)}}},o.stripCommentTag=function(e){for(var t="",n=0;n<e.length;){var i=e.indexOf("\x3c!--",n);if(-1===i){t+=e.slice(n);break}t+=e.slice(n,i);var r=e.indexOf("--\x3e",i);if(-1===r)break;n=r+3}return t},o.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}))).join("")},o.attributeWrapSign='"',o.cssFilter=w,o.getDefaultCSSWhiteList=b;var z={},F=v;function U(e){var t,n=F.spaceIndex(e);return t=-1===n?e.slice(1,-1):e.slice(1,n+1),"/"===(t=F.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function H(e){return"</"===e.slice(0,2)}var j=/[^a-zA-Z0-9\\_:.-]/gim;function B(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function W(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"'"===n||'"'===n?t:-1}}function K(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function q(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}z.parseTag=function(e,t,n){var i="",r=0,o=!1,s=!1,a=0,l=e.length,c="",u="";e:for(a=0;a<l;a++){var d=e.charAt(a);if(!1===o){if("<"===d){o=a;continue}}else if(!1===s){if("<"===d){i+=n(e.slice(r,a)),o=a,r=a;continue}if(">"===d||a===l-1){i+=n(e.slice(r,o)),c=U(u=e.slice(o,a+1)),i+=t(o,i.length,c,u,H(u)),r=a+1,o=!1;continue}if('"'===d||"'"===d)for(var h=1,p=e.charAt(a-h);""===p.trim()||"="===p;){if("="===p){s=d;continue e}p=e.charAt(a-++h)}}else if(d===s){s=!1;continue}}return r<l&&(i+=n(e.substr(r))),i},z.parseAttr=function(e,t){var n=0,i=0,r=[],o=!1,s=e.length;function a(e,n){if(!((e=(e=F.trim(e)).replace(j,"").toLowerCase()).length<1)){var i=t(e,n||"");i&&r.push(i)}}for(var l=0;l<s;l++){var c,u=e.charAt(l);if(!1!==o||"="!==u)if(!1===o||l!==i){if(/\s|\n|\t/.test(u)){if(e=e.replace(/\s|\n|\t/g," "),!1===o){if(-1===(c=B(e,l))){a(F.trim(e.slice(n,l))),o=!1,n=l+1;continue}l=c-1;continue}if(-1===(c=K(e,l-1))){a(o,q(F.trim(e.slice(n,l)))),o=!1,n=l+1;continue}}}else{if(-1===(c=e.indexOf(u,l+1)))break;a(o,F.trim(e.slice(i+1,c))),o=!1,n=(l=c)+1}else o=e.slice(n,l),n=l+1,i='"'===e.charAt(n)||"'"===e.charAt(n)?n:W(e,l+1)}return n<e.length&&(!1===o?a(e.slice(n)):a(o,q(F.trim(e.slice(n))))),F.trim(r.join(" "))};var Y=y.FilterCSS,X=o,Q=z,J=Q.parseTag,ee=Q.parseAttr,te=v;function ne(e){return null==e}function ie(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=X.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map((function(e){return e.toLowerCase()})):t[n.toLowerCase()]=e[n];return t}(e.whiteList||e.allowList):e.whiteList=X.whiteList,this.attributeWrapSign=!0===e.singleQuotedAttributeValue?"'":X.attributeWrapSign,e.onTag=e.onTag||X.onTag,e.onTagAttr=e.onTagAttr||X.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||X.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||X.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||X.safeAttrValue,e.escapeHtml=e.escapeHtml||X.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Y(e.css))}ie.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this,n=t.options,i=n.whiteList,r=n.onTag,o=n.onIgnoreTag,s=n.onTagAttr,a=n.onIgnoreTagAttr,l=n.safeAttrValue,c=n.escapeHtml,u=t.attributeWrapSign,d=t.cssFilter;n.stripBlankChar&&(e=X.stripBlankChar(e)),n.allowCommentTag||(e=X.stripCommentTag(e));var h=!1;n.stripIgnoreTagBody&&(h=X.StripTagBody(n.stripIgnoreTagBody,o),o=h.onIgnoreTag);var p=J(e,(function(e,t,n,h,p){var f={sourcePosition:e,position:t,isClosing:p,isWhite:Object.prototype.hasOwnProperty.call(i,n)},m=r(n,h,f);if(!ne(m))return m;if(f.isWhite){if(f.isClosing)return"</"+n+">";var g=function(e){var t=te.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=te.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=te.trim(e.slice(0,-1))),{html:e,closing:n}}(h),y=i[n],v=ee(g.html,(function(e,t){var i=-1!==te.indexOf(y,e),r=s(n,e,t,i);return ne(r)?i?(t=l(n,e,t,d))?e+"="+u+t+u:e:ne(r=a(n,e,t,i))?void 0:r:r}));return h="<"+n,v&&(h+=" "+v),g.closing&&(h+=" /"),h+">"}return ne(m=o(n,h,f))?c(h):m}),c);return h&&(p=h.remove(p)),p};var re=ie;!function(e,t){var n=o,i=z,r=re;function s(e,t){return new r(t).process(e)}(t=e.exports=s).filterXSS=s,t.FilterXSS=r,function(){for(var e in n)t[e]=n[e];for(var r in i)t[r]=i[r]}(),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(r,r.exports);var oe=r.exports,se=function(){function e(e,t){var n,r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],details:["style"],div:["align","style","aria-label","aria-hidden"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=i(i({},oe.getDefaultCSSWhiteList()),{flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,"line-height":!0,"justify-content":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,n,i){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?r.sanitizeUrl(n):oe.safeAttrValue(e,t,n,i)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"},e&&!t?n=e:e&&t?((n=Object.create(this.arcgisFilterOptions)).css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach((function(t){if("whiteList"===t)n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if("css"===t){var i=e.css.whiteList;null!=i&&e.css instanceof Object&&Object.keys(i).forEach((function(e){return n.css.whiteList[e]=i[e]}))}else n[t]=e[t]}))):((n=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new oe.FilterXSS(n)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&void 0===e)return;return null}},e.prototype.sanitizeUrl=function(e,t){var n=(null!=t?t:{}).isProtocolRequired,i=void 0===n||n,r=this._trim(e.substring(0,e.indexOf(":"))),o="/"===e,s=/^#/.test(e),a=r&&this.allowedProtocols.indexOf(r.toLowerCase())>-1;return o||s||a?oe.escapeAttrValue(e):r||i?"":oe.escapeAttrValue("https://".concat(e))},e.prototype.sanitizeHTMLAttribute=function(e,t,n,i){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,n,i):oe.safeAttrValue(e,t,n,i)},e.prototype.validate=function(e,t){void 0===t&&(t={});var n=this.sanitize(e,t);return{isValid:e===n,sanitized:n}},e.prototype.encodeHTML=function(e){var t=this;return String(e).replace(/[&<>"'\/]/g,(function(e){return t._entityMap[e]}))},e.prototype.encodeAttrValue=function(e){var t=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,(function(n,i){return t.test(n)?n:"&#x".concat(Number(e.charCodeAt(i)).toString(16),";")}))},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(n){Array.isArray(e[n])&&Array.isArray(t[n])?t[n]=t[n].concat(e[n]):t[n]=e[n]}))})),t},e.prototype._iterateOverObject=function(e,t){var n=this;void 0===t&&(t={});try{var i=!1,r=void 0;if(Array.isArray(e))r=e.reduce((function(e,r){var o=n.validate(r,t);return o.isValid?e.concat([r]):(i=!0,e.concat([o.sanitized]))}),[]);else{if(!function(e){if("object"!=typeof e||null===e)return!1;if("[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e)){if(t.allowUndefined&&void 0===e)return;return null}r=Object.keys(e).reduce((function(r,o){var s=e[o],a=n.validate(s,t);return a.isValid?r[o]=s:(i=!0,r[o]=a.sanitized),r}),{})}return i?r:e}catch(e){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}(),ae=n(14130),le=(n(61226),n(58941),n(40633),n(28181),n(15351));function ce(...e){const t=ae.A.acquire();for(let n=0;n<e.length;n++){const i=e[n],r=typeof i;if("string"===r)t.push(i);else if(Array.isArray(i))t.push.apply(t,i);else if("object"===r)for(const e in i)i[e]&&t.push(e)}const n=t.join(" ");return ae.A.release(t),n}function ue(e){const t=e?.closest("[dir]");return null!==t&&t instanceof HTMLElement&&"rtl"===t.dir||"rtl"===document.dir}function de(e){this[e.getAttribute("data-node-ref")]=null}function he(e){this[e.getAttribute("data-node-ref")]=e}(()=>{const e=new Map;new ResizeObserver((t=>{(0,le.Sh)();for(const n of t)e.get(n.target)?.(n)}))})();const pe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce(((e,t)=>(e[t]=[],e)),{}),fe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],me=new se({whiteList:pe,onTagAttr:(e,t,n)=>{const i=`${t}="${n}"`;if(fe.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function ge(e){return"Enter"===e||" "===e}},4507:function(e,t,n){"use strict";n.d(t,{C:function(){return o},a:function(){return i},d:function(){return r}});const i="calcite-mode-auto",r="calcite-mode-dark",o={autoMode:i,darkMode:r,lightMode:"calcite-mode-light",rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"}}}]);
//# sourceMappingURL=views-2d-interactive-editingTools.js.map